#!/bin/sh
# Blocca commit se rimuovi sezioni @lock
if git diff --cached | grep -E '^-.*@lock:start|^-.*@lock:end' >/dev/null; then
  echo "❌ Hai rimosso un blocco @lock. Ripristina o aggiorna la KB prima del commit."
  exit 1
fi

# Build lint
npm run lint && npm run typecheck 2>/dev/null || true
