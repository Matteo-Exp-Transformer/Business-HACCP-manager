# MAPPING TAB HACCP - LAYOUT RIVOLUZIONARIO

## Struttura Tab Originale vs Nuova

### Tab Originali (8 tab separate):
1. Home
2. Punti di conservazione  
3. Attività e mansioni
4. Inventario
5. Gestione etichette
6. IA Assistant
7. Impostazioni e dati
8. Gestione

### Nuova Struttura (6 tab principali):

#### 1. Home - Dashboard principale
- KPI come card normali (non CollapsibleCard)
- Elementi: Temperature Monitorate, Attività e Pulizie, Inventario Prodotti, Personale
- **PROTETTO**: @lock:start(Home-KPI) ... @lock:end(Home-KPI)

#### 2. Punti di Conservazione - Gestione frigoriferi
- 3 CollapsibleCard:
  - Punti di Conservazione (con contatore)
  - Attività Registro Temperature (con contatore)  
  - Stato Punti di Conservazione (con contatore)

#### 3. Attività e Mansioni - Task e pulizie
- 4 CollapsibleCard:
  - Nuove Attività / Mansioni (con contatore)
  - Attività da Svolgere (con contatore)
  - Attività Completate (con contatore)
  - Registra Temperatura (con contatore)

#### 4. Inventario - Prodotti e stock
- 4 CollapsibleCard:
  - Gestione Inventario (con filtri+aggiunta rapida integrati)
  - Prodotti nell'inventario (con contatore)
  - Ordini e Spesa (con contatore)
  - Categorie Personalizzate (con contatore)
- **REGOLA**: @rule:filters-inline-with-create

#### 5. Gestione e AI - Tab unificata
- Struttura Nested Tabs:
  - Tab principale "Gestione e AI"
  - Sottotab: Staff, Reparti, Fornitori, IA Assistant, Etichette
- 2 CollapsibleCard:
  - Elenco Staff Completo (con contatore)
  - Suggerimenti Ruoli Comuni (con contatore)
- **REGOLA**: @rule:no-duplicate-actions

#### 6. Impostazioni e Dati - Configurazioni e backup
- 6 CollapsibleCard:
  - Foto e Documenti (con contatore)
  - Condivisione Automatica (con contatore)
  - Spazio sul tuo dispositivo (con contatore)
  - Azioni Rapide (con contatore)
  - Backup e Export Dati (con contatore)
  - Manuale HACCP (con contatore)

## Componenti Creati

### CollapsibleCard.jsx
- Componente riutilizzabile per schede collassabili
- Caratteristiche:
  - Design: Card con bordo blu spesso (border-2)
  - Header Cliccabile: Area cliccabile per espandere/chiudere
  - Icona e Colori: Icona personalizzabile con colori coordinati
  - Contatore Numerico: Badge con numero di elementi
  - Animazioni: Transizioni smooth per apertura/chiusura
  - Indicatori Visivi: Chevron che ruota per mostrare stato


  

### PuntidiConservazione.jsx
- Gestione frigoriferi e temperature
- 3 CollapsibleCard principali
- Form per aggiunta/modifica frigoriferi
- Gestione categorie prodotti HACCP

### Gestione.jsx
- Tab principale con sottotab
- Gestione staff, reparti, fornitori, IA, etichette
- Form per gestione personale
- Suggerimenti ruoli comuni

## Regole di Protezione

### Blocchi @lock intoccabili:
- Dashboard.jsx: @lock:start(Home-KPI) ... @lock:end(Home-KPI)
- Dashboard.jsx: @lock:start(Home-Welcome) ... @lock:end(Home-Welcome)  
- Dashboard.jsx: @lock:start(Home-News) ... @lock:end(Home-News)
- PuntidiConservazione.jsx: struttura delle 3 CollapsibleCard principali
- Inventory.jsx: sezione Gestione Inventario deve contenere filtri + aggiunta rapida + lista

### Regole @rule da rispettare:
- @rule:filters-inline-with-create (Inventario)
- @rule:no-duplicate-actions (Gestione e AI)

## File di Test e Qualità

### CollapsibleCard.test.jsx
- Test per comportamento toggle
- Test per rendering con props
- Test per callback onToggle
- Test per testId personalizzati

### .eslintrc.json
- Regola per warning su commenti @lock e @rule
- Prevenzione rimozione accidentale di blocchi protetti

### .husky/pre-commit
- Hook per prevenire commit che rimuovono @lock
- Lint automatico prima del commit

## Benefici Ottenuti

### Usabilità:
- Riduzione Clutter: Da 8 tab a 6 tab principali
- Organizzazione Logica: Funzionalità correlate raggruppate
- Feedback Visivo: Contatori numerici per quick overview
- Interazione Intuitiva: Schede collassabili con indicatori chiari

### Performance:
- Lazy Loading: Contenuto caricato solo quando necessario
- Stato Ottimizzato: Meno re-rendering inutili
- Bundle Size: Componenti riutilizzabili

### Manutenibilità:
- Componente Riutilizzabile: CollapsibleCard standardizzato
- Codice Pulito: Rimozione duplicazioni
- Struttura Chiara: Separazione logica delle funzionalità
- Protezione Codice: Blocchi @lock per aree critiche
