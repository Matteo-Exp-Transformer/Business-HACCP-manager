(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var W4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fg={exports:{}},Id={},Og={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mc=Symbol.for("react.element"),u5=Symbol.for("react.portal"),d5=Symbol.for("react.fragment"),h5=Symbol.for("react.strict_mode"),m5=Symbol.for("react.profiler"),f5=Symbol.for("react.provider"),p5=Symbol.for("react.context"),g5=Symbol.for("react.forward_ref"),x5=Symbol.for("react.suspense"),v5=Symbol.for("react.memo"),y5=Symbol.for("react.lazy"),Gp=Symbol.iterator;function N5(e){return e===null||typeof e!="object"?null:(e=Gp&&e[Gp]||e["@@iterator"],typeof e=="function"?e:null)}var Rg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bg=Object.assign,qg={};function sl(e,t,r){this.props=e,this.context=t,this.refs=qg,this.updater=r||Rg}sl.prototype.isReactComponent={};sl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $g(){}$g.prototype=sl.prototype;function pf(e,t,r){this.props=e,this.context=t,this.refs=qg,this.updater=r||Rg}var gf=pf.prototype=new $g;gf.constructor=pf;Bg(gf,sl.prototype);gf.isPureReactComponent=!0;var Wp=Array.isArray,Ug=Object.prototype.hasOwnProperty,xf={current:null},Vg={key:!0,ref:!0,__self:!0,__source:!0};function Hg(e,t,r){var i,a={},s=null,l=null;if(t!=null)for(i in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(s=""+t.key),t)Ug.call(t,i)&&!Vg.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(c===1)a.children=r;else if(1<c){for(var u=Array(c),m=0;m<c;m++)u[m]=arguments[m+2];a.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)a[i]===void 0&&(a[i]=c[i]);return{$$typeof:Mc,type:e,key:s,ref:l,props:a,_owner:xf.current}}function w5(e,t){return{$$typeof:Mc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vf(e){return typeof e=="object"&&e!==null&&e.$$typeof===Mc}function b5(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Jp=/\/+/g;function Ah(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b5(""+e.key):t.toString(36)}function Uu(e,t,r,i,a){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Mc:case u5:l=!0}}if(l)return l=e,a=a(l),e=i===""?"."+Ah(l,0):i,Wp(a)?(r="",e!=null&&(r=e.replace(Jp,"$&/")+"/"),Uu(a,t,r,"",function(m){return m})):a!=null&&(vf(a)&&(a=w5(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(Jp,"$&/")+"/")+e)),t.push(a)),1;if(l=0,i=i===""?".":i+":",Wp(e))for(var c=0;c<e.length;c++){s=e[c];var u=i+Ah(s,c);l+=Uu(s,t,r,u,a)}else if(u=N5(e),typeof u=="function")for(e=u.call(e),c=0;!(s=e.next()).done;)s=s.value,u=i+Ah(s,c++),l+=Uu(s,t,r,u,a);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function vu(e,t,r){if(e==null)return e;var i=[],a=0;return Uu(e,i,"","",function(s){return t.call(r,s,a++)}),i}function j5(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Cr={current:null},Vu={transition:null},S5={ReactCurrentDispatcher:Cr,ReactCurrentBatchConfig:Vu,ReactCurrentOwner:xf};function Gg(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:vu,forEach:function(e,t,r){vu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return vu(e,function(){t++}),t},toArray:function(e){return vu(e,function(t){return t})||[]},only:function(e){if(!vf(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mt.Component=sl;Mt.Fragment=d5;Mt.Profiler=m5;Mt.PureComponent=pf;Mt.StrictMode=h5;Mt.Suspense=x5;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S5;Mt.act=Gg;Mt.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Bg({},e.props),a=e.key,s=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,l=xf.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)Ug.call(t,u)&&!Vg.hasOwnProperty(u)&&(i[u]=t[u]===void 0&&c!==void 0?c[u]:t[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){c=Array(u);for(var m=0;m<u;m++)c[m]=arguments[m+2];i.children=c}return{$$typeof:Mc,type:e.type,key:a,ref:s,props:i,_owner:l}};Mt.createContext=function(e){return e={$$typeof:p5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:f5,_context:e},e.Consumer=e};Mt.createElement=Hg;Mt.createFactory=function(e){var t=Hg.bind(null,e);return t.type=e,t};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(e){return{$$typeof:g5,render:e}};Mt.isValidElement=vf;Mt.lazy=function(e){return{$$typeof:y5,_payload:{_status:-1,_result:e},_init:j5}};Mt.memo=function(e,t){return{$$typeof:v5,type:e,compare:t===void 0?null:t}};Mt.startTransition=function(e){var t=Vu.transition;Vu.transition={};try{e()}finally{Vu.transition=t}};Mt.unstable_act=Gg;Mt.useCallback=function(e,t){return Cr.current.useCallback(e,t)};Mt.useContext=function(e){return Cr.current.useContext(e)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(e){return Cr.current.useDeferredValue(e)};Mt.useEffect=function(e,t){return Cr.current.useEffect(e,t)};Mt.useId=function(){return Cr.current.useId()};Mt.useImperativeHandle=function(e,t,r){return Cr.current.useImperativeHandle(e,t,r)};Mt.useInsertionEffect=function(e,t){return Cr.current.useInsertionEffect(e,t)};Mt.useLayoutEffect=function(e,t){return Cr.current.useLayoutEffect(e,t)};Mt.useMemo=function(e,t){return Cr.current.useMemo(e,t)};Mt.useReducer=function(e,t,r){return Cr.current.useReducer(e,t,r)};Mt.useRef=function(e){return Cr.current.useRef(e)};Mt.useState=function(e){return Cr.current.useState(e)};Mt.useSyncExternalStore=function(e,t,r){return Cr.current.useSyncExternalStore(e,t,r)};Mt.useTransition=function(){return Cr.current.useTransition()};Mt.version="18.3.1";Og.exports=Mt;var re=Og.exports;const qo=c5(re);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5=re,k5=Symbol.for("react.element"),A5=Symbol.for("react.fragment"),L5=Object.prototype.hasOwnProperty,P5=C5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_5={key:!0,ref:!0,__self:!0,__source:!0};function Wg(e,t,r){var i,a={},s=null,l=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)L5.call(t,i)&&!_5.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:k5,type:e,key:s,ref:l,props:a,_owner:P5.current}}Id.Fragment=A5;Id.jsx=Wg;Id.jsxs=Wg;Fg.exports=Id;var n=Fg.exports,lm={},Jg={exports:{}},Zr={},Xg={exports:{}},Yg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,de){var ie=Q.length;Q.push(de);e:for(;0<ie;){var ze=ie-1>>>1,P=Q[ze];if(0<a(P,de))Q[ze]=de,Q[ie]=P,ie=ze;else break e}}function r(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var de=Q[0],ie=Q.pop();if(ie!==de){Q[0]=ie;e:for(var ze=0,P=Q.length,$=P>>>1;ze<$;){var W=2*(ze+1)-1,H=Q[W],te=W+1,me=Q[te];if(0>a(H,ie))te<P&&0>a(me,H)?(Q[ze]=me,Q[te]=ie,ze=te):(Q[ze]=H,Q[W]=ie,ze=W);else if(te<P&&0>a(me,ie))Q[ze]=me,Q[te]=ie,ze=te;else break e}}return de}function a(Q,de){var ie=Q.sortIndex-de.sortIndex;return ie!==0?ie:Q.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var u=[],m=[],x=1,g=null,v=3,p=!1,j=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(Q){for(var de=r(m);de!==null;){if(de.callback===null)i(m);else if(de.startTime<=Q)i(m),de.sortIndex=de.expirationTime,t(u,de);else break;de=r(m)}}function G(Q){if(w=!1,L(Q),!j)if(r(u)!==null)j=!0,ue(ne);else{var de=r(m);de!==null&&we(G,de.startTime-Q)}}function ne(Q,de){j=!1,w&&(w=!1,N(O),O=-1),p=!0;var ie=v;try{for(L(de),g=r(u);g!==null&&(!(g.expirationTime>de)||Q&&!_());){var ze=g.callback;if(typeof ze=="function"){g.callback=null,v=g.priorityLevel;var P=ze(g.expirationTime<=de);de=e.unstable_now(),typeof P=="function"?g.callback=P:g===r(u)&&i(u),L(de)}else i(u);g=r(u)}if(g!==null)var $=!0;else{var W=r(m);W!==null&&we(G,W.startTime-de),$=!1}return $}finally{g=null,v=ie,p=!1}}var ce=!1,V=null,O=-1,J=5,ee=-1;function _(){return!(e.unstable_now()-ee<J)}function D(){if(V!==null){var Q=e.unstable_now();ee=Q;var de=!0;try{de=V(!0,Q)}finally{de?E():(ce=!1,V=null)}}else ce=!1}var E;if(typeof b=="function")E=function(){b(D)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ae=q.port2;q.port1.onmessage=D,E=function(){ae.postMessage(null)}}else E=function(){A(D,0)};function ue(Q){V=Q,ce||(ce=!0,E())}function we(Q,de){O=A(function(){Q(e.unstable_now())},de)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){j||p||(j=!0,ue(ne))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var de=3;break;default:de=v}var ie=v;v=de;try{return Q()}finally{v=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,de){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ie=v;v=Q;try{return de()}finally{v=ie}},e.unstable_scheduleCallback=function(Q,de,ie){var ze=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ze+ie:ze):ie=ze,Q){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ie+P,Q={id:x++,callback:de,priorityLevel:Q,startTime:ie,expirationTime:P,sortIndex:-1},ie>ze?(Q.sortIndex=ie,t(m,Q),r(u)===null&&Q===r(m)&&(w?(N(O),O=-1):w=!0,we(G,ie-ze))):(Q.sortIndex=P,t(u,Q),j||p||(j=!0,ue(ne))),Q},e.unstable_shouldYield=_,e.unstable_wrapCallback=function(Q){var de=v;return function(){var ie=v;v=de;try{return Q.apply(this,arguments)}finally{v=ie}}}})(Yg);Xg.exports=Yg;var z5=Xg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5=re,Kr=z5;function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qg=new Set,fc={};function Ws(e,t){Ko(e,t),Ko(e+"Capture",t)}function Ko(e,t){for(fc[e]=t,e=0;e<t.length;e++)Qg.add(t[e])}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cm=Object.prototype.hasOwnProperty,M5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xp={},Yp={};function D5(e){return cm.call(Yp,e)?!0:cm.call(Xp,e)?!1:M5.test(e)?Yp[e]=!0:(Xp[e]=!0,!1)}function T5(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function E5(e,t,r,i){if(t===null||typeof t>"u"||T5(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kr(e,t,r,i,a,s,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=l}var nr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){nr[e]=new kr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];nr[t]=new kr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){nr[e]=new kr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){nr[e]=new kr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){nr[e]=new kr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){nr[e]=new kr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){nr[e]=new kr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){nr[e]=new kr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){nr[e]=new kr(e,5,!1,e.toLowerCase(),null,!1,!1)});var yf=/[\-:]([a-z])/g;function Nf(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yf,Nf);nr[t]=new kr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yf,Nf);nr[t]=new kr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yf,Nf);nr[t]=new kr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){nr[e]=new kr(e,1,!1,e.toLowerCase(),null,!1,!1)});nr.xlinkHref=new kr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){nr[e]=new kr(e,1,!1,e.toLowerCase(),null,!0,!0)});function wf(e,t,r,i){var a=nr.hasOwnProperty(t)?nr[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(E5(t,r,a,i)&&(r=null),i||a===null?D5(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var ba=I5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,yu=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),Lo=Symbol.for("react.fragment"),bf=Symbol.for("react.strict_mode"),um=Symbol.for("react.profiler"),Kg=Symbol.for("react.provider"),Zg=Symbol.for("react.context"),jf=Symbol.for("react.forward_ref"),dm=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),Wa=Symbol.for("react.lazy"),e1=Symbol.for("react.offscreen"),Qp=Symbol.iterator;function Bl(e){return e===null||typeof e!="object"?null:(e=Qp&&e[Qp]||e["@@iterator"],typeof e=="function"?e:null)}var yn=Object.assign,Lh;function Ql(e){if(Lh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Lh=t&&t[1]||""}return`
`+Lh+e}var Ph=!1;function _h(e,t){if(!e||Ph)return"";Ph=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var a=m.stack.split(`
`),s=i.stack.split(`
`),l=a.length-1,c=s.length-1;1<=l&&0<=c&&a[l]!==s[c];)c--;for(;1<=l&&0<=c;l--,c--)if(a[l]!==s[c]){if(l!==1||c!==1)do if(l--,c--,0>c||a[l]!==s[c]){var u=`
`+a[l].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=l&&0<=c);break}}}finally{Ph=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ql(e):""}function F5(e){switch(e.tag){case 5:return Ql(e.type);case 16:return Ql("Lazy");case 13:return Ql("Suspense");case 19:return Ql("SuspenseList");case 0:case 2:case 15:return e=_h(e.type,!1),e;case 11:return e=_h(e.type.render,!1),e;case 1:return e=_h(e.type,!0),e;default:return""}}function mm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lo:return"Fragment";case Ao:return"Portal";case um:return"Profiler";case bf:return"StrictMode";case dm:return"Suspense";case hm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Zg:return(e.displayName||"Context")+".Consumer";case Kg:return(e._context.displayName||"Context")+".Provider";case jf:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Sf:return t=e.displayName||null,t!==null?t:mm(e.type)||"Memo";case Wa:t=e._payload,e=e._init;try{return mm(e(t))}catch{}}return null}function O5(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mm(t);case 8:return t===bf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function us(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function t1(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function R5(e){var t=t1(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(l){i=""+l,s.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nu(e){e._valueTracker||(e._valueTracker=R5(e))}function n1(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=t1(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function ad(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function fm(e,t){var r=t.checked;return yn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kp(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=us(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function r1(e,t){t=t.checked,t!=null&&wf(e,"checked",t,!1)}function pm(e,t){r1(e,t);var r=us(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?gm(e,t.type,r):t.hasOwnProperty("defaultValue")&&gm(e,t.type,us(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function gm(e,t,r){(t!=="number"||ad(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Kl=Array.isArray;function $o(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+us(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function xm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return yn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function e0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ue(92));if(Kl(r)){if(1<r.length)throw Error(Ue(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:us(r)}}function i1(e,t){var r=us(t.value),i=us(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function t0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function a1(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function vm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?a1(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wu,s1=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wu=wu||document.createElement("div"),wu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},B5=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(e){B5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),rc[t]=rc[e]})});function o1(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||rc.hasOwnProperty(e)&&rc[e]?(""+t).trim():t+"px"}function l1(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=o1(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var q5=yn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ym(e,t){if(t){if(q5[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function Nm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function Cf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bm=null,Uo=null,Vo=null;function n0(e){if(e=Ec(e)){if(typeof bm!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=Fd(t),bm(e.stateNode,e.type,t))}}function c1(e){Uo?Vo?Vo.push(e):Vo=[e]:Uo=e}function u1(){if(Uo){var e=Uo,t=Vo;if(Vo=Uo=null,n0(e),t)for(e=0;e<t.length;e++)n0(t[e])}}function d1(e,t){return e(t)}function h1(){}var zh=!1;function m1(e,t,r){if(zh)return e(t,r);zh=!0;try{return d1(e,t,r)}finally{zh=!1,(Uo!==null||Vo!==null)&&(h1(),u1())}}function gc(e,t){var r=e.stateNode;if(r===null)return null;var i=Fd(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ue(231,t,typeof r));return r}var jm=!1;if(va)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){jm=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{jm=!1}function $5(e,t,r,i,a,s,l,c,u){var m=Array.prototype.slice.call(arguments,3);try{t.apply(r,m)}catch(x){this.onError(x)}}var ic=!1,sd=null,od=!1,Sm=null,U5={onError:function(e){ic=!0,sd=e}};function V5(e,t,r,i,a,s,l,c,u){ic=!1,sd=null,$5.apply(U5,arguments)}function H5(e,t,r,i,a,s,l,c,u){if(V5.apply(this,arguments),ic){if(ic){var m=sd;ic=!1,sd=null}else throw Error(Ue(198));od||(od=!0,Sm=m)}}function Js(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function f1(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function r0(e){if(Js(e)!==e)throw Error(Ue(188))}function G5(e){var t=e.alternate;if(!t){if(t=Js(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var s=a.alternate;if(s===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===r)return r0(a),e;if(s===i)return r0(a),t;s=s.sibling}throw Error(Ue(188))}if(r.return!==i.return)r=a,i=s;else{for(var l=!1,c=a.child;c;){if(c===r){l=!0,r=a,i=s;break}if(c===i){l=!0,i=a,r=s;break}c=c.sibling}if(!l){for(c=s.child;c;){if(c===r){l=!0,r=s,i=a;break}if(c===i){l=!0,i=s,r=a;break}c=c.sibling}if(!l)throw Error(Ue(189))}}if(r.alternate!==i)throw Error(Ue(190))}if(r.tag!==3)throw Error(Ue(188));return r.stateNode.current===r?e:t}function p1(e){return e=G5(e),e!==null?g1(e):null}function g1(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=g1(e);if(t!==null)return t;e=e.sibling}return null}var x1=Kr.unstable_scheduleCallback,i0=Kr.unstable_cancelCallback,W5=Kr.unstable_shouldYield,J5=Kr.unstable_requestPaint,kn=Kr.unstable_now,X5=Kr.unstable_getCurrentPriorityLevel,kf=Kr.unstable_ImmediatePriority,v1=Kr.unstable_UserBlockingPriority,ld=Kr.unstable_NormalPriority,Y5=Kr.unstable_LowPriority,y1=Kr.unstable_IdlePriority,Md=null,Ji=null;function Q5(e){if(Ji&&typeof Ji.onCommitFiberRoot=="function")try{Ji.onCommitFiberRoot(Md,e,void 0,(e.current.flags&128)===128)}catch{}}var Ii=Math.clz32?Math.clz32:ev,K5=Math.log,Z5=Math.LN2;function ev(e){return e>>>=0,e===0?32:31-(K5(e)/Z5|0)|0}var bu=64,ju=4194304;function Zl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cd(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,s=e.pingedLanes,l=r&268435455;if(l!==0){var c=l&~a;c!==0?i=Zl(c):(s&=l,s!==0&&(i=Zl(s)))}else l=r&~a,l!==0?i=Zl(l):s!==0&&(i=Zl(s));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,s=t&-t,a>=s||a===16&&(s&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Ii(t),a=1<<r,i|=e[r],t&=~a;return i}function tv(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nv(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-Ii(s),c=1<<l,u=a[l];u===-1?(!(c&r)||c&i)&&(a[l]=tv(c,t)):u<=t&&(e.expiredLanes|=c),s&=~c}}function Cm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function N1(){var e=bu;return bu<<=1,!(bu&4194240)&&(bu=64),e}function Ih(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Dc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ii(t),e[t]=r}function rv(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-Ii(r),s=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~s}}function Af(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Ii(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var Kt=0;function w1(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var b1,Lf,j1,S1,C1,km=!1,Su=[],ns=null,rs=null,is=null,xc=new Map,vc=new Map,Xa=[],iv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a0(e,t){switch(e){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":xc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(t.pointerId)}}function $l(e,t,r,i,a,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:s,targetContainers:[a]},t!==null&&(t=Ec(t),t!==null&&Lf(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function av(e,t,r,i,a){switch(t){case"focusin":return ns=$l(ns,e,t,r,i,a),!0;case"dragenter":return rs=$l(rs,e,t,r,i,a),!0;case"mouseover":return is=$l(is,e,t,r,i,a),!0;case"pointerover":var s=a.pointerId;return xc.set(s,$l(xc.get(s)||null,e,t,r,i,a)),!0;case"gotpointercapture":return s=a.pointerId,vc.set(s,$l(vc.get(s)||null,e,t,r,i,a)),!0}return!1}function k1(e){var t=Ts(e.target);if(t!==null){var r=Js(t);if(r!==null){if(t=r.tag,t===13){if(t=f1(r),t!==null){e.blockedOn=t,C1(e.priority,function(){j1(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Hu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Am(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);wm=i,r.target.dispatchEvent(i),wm=null}else return t=Ec(r),t!==null&&Lf(t),e.blockedOn=r,!1;t.shift()}return!0}function s0(e,t,r){Hu(e)&&r.delete(t)}function sv(){km=!1,ns!==null&&Hu(ns)&&(ns=null),rs!==null&&Hu(rs)&&(rs=null),is!==null&&Hu(is)&&(is=null),xc.forEach(s0),vc.forEach(s0)}function Ul(e,t){e.blockedOn===t&&(e.blockedOn=null,km||(km=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,sv)))}function yc(e){function t(a){return Ul(a,e)}if(0<Su.length){Ul(Su[0],e);for(var r=1;r<Su.length;r++){var i=Su[r];i.blockedOn===e&&(i.blockedOn=null)}}for(ns!==null&&Ul(ns,e),rs!==null&&Ul(rs,e),is!==null&&Ul(is,e),xc.forEach(t),vc.forEach(t),r=0;r<Xa.length;r++)i=Xa[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Xa.length&&(r=Xa[0],r.blockedOn===null);)k1(r),r.blockedOn===null&&Xa.shift()}var Ho=ba.ReactCurrentBatchConfig,ud=!0;function ov(e,t,r,i){var a=Kt,s=Ho.transition;Ho.transition=null;try{Kt=1,Pf(e,t,r,i)}finally{Kt=a,Ho.transition=s}}function lv(e,t,r,i){var a=Kt,s=Ho.transition;Ho.transition=null;try{Kt=4,Pf(e,t,r,i)}finally{Kt=a,Ho.transition=s}}function Pf(e,t,r,i){if(ud){var a=Am(e,t,r,i);if(a===null)$h(e,t,i,dd,r),a0(e,i);else if(av(a,e,t,r,i))i.stopPropagation();else if(a0(e,i),t&4&&-1<iv.indexOf(e)){for(;a!==null;){var s=Ec(a);if(s!==null&&b1(s),s=Am(e,t,r,i),s===null&&$h(e,t,i,dd,r),s===a)break;a=s}a!==null&&i.stopPropagation()}else $h(e,t,i,null,r)}}var dd=null;function Am(e,t,r,i){if(dd=null,e=Cf(i),e=Ts(e),e!==null)if(t=Js(e),t===null)e=null;else if(r=t.tag,r===13){if(e=f1(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dd=e,null}function A1(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X5()){case kf:return 1;case v1:return 4;case ld:case Y5:return 16;case y1:return 536870912;default:return 16}default:return 16}}var Ka=null,_f=null,Gu=null;function L1(){if(Gu)return Gu;var e,t=_f,r=t.length,i,a="value"in Ka?Ka.value:Ka.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var l=r-e;for(i=1;i<=l&&t[r-i]===a[s-i];i++);return Gu=a.slice(e,1<i?1-i:void 0)}function Wu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cu(){return!0}function o0(){return!1}function ei(e){function t(r,i,a,s,l){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=s,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(s):s[c]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Cu:o0,this.isPropagationStopped=o0,this}return yn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cu)},persist:function(){},isPersistent:Cu}),t}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zf=ei(ol),Tc=yn({},ol,{view:0,detail:0}),cv=ei(Tc),Mh,Dh,Vl,Dd=yn({},Tc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:If,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vl&&(Vl&&e.type==="mousemove"?(Mh=e.screenX-Vl.screenX,Dh=e.screenY-Vl.screenY):Dh=Mh=0,Vl=e),Mh)},movementY:function(e){return"movementY"in e?e.movementY:Dh}}),l0=ei(Dd),uv=yn({},Dd,{dataTransfer:0}),dv=ei(uv),hv=yn({},Tc,{relatedTarget:0}),Th=ei(hv),mv=yn({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),fv=ei(mv),pv=yn({},ol,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gv=ei(pv),xv=yn({},ol,{data:0}),c0=ei(xv),vv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wv(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Nv[e])?!!t[e]:!1}function If(){return wv}var bv=yn({},Tc,{key:function(e){if(e.key){var t=vv[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Wu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?yv[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:If,charCode:function(e){return e.type==="keypress"?Wu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jv=ei(bv),Sv=yn({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u0=ei(Sv),Cv=yn({},Tc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:If}),kv=ei(Cv),Av=yn({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),Lv=ei(Av),Pv=yn({},Dd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_v=ei(Pv),zv=[9,13,27,32],Mf=va&&"CompositionEvent"in window,ac=null;va&&"documentMode"in document&&(ac=document.documentMode);var Iv=va&&"TextEvent"in window&&!ac,P1=va&&(!Mf||ac&&8<ac&&11>=ac),d0=String.fromCharCode(32),h0=!1;function _1(e,t){switch(e){case"keyup":return zv.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Po=!1;function Mv(e,t){switch(e){case"compositionend":return z1(t);case"keypress":return t.which!==32?null:(h0=!0,d0);case"textInput":return e=t.data,e===d0&&h0?null:e;default:return null}}function Dv(e,t){if(Po)return e==="compositionend"||!Mf&&_1(e,t)?(e=L1(),Gu=_f=Ka=null,Po=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return P1&&t.locale!=="ko"?null:t.data;default:return null}}var Tv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tv[e.type]:t==="textarea"}function I1(e,t,r,i){c1(i),t=hd(t,"onChange"),0<t.length&&(r=new zf("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var sc=null,Nc=null;function Ev(e){U1(e,0)}function Td(e){var t=Io(e);if(n1(t))return e}function Fv(e,t){if(e==="change")return t}var M1=!1;if(va){var Eh;if(va){var Fh="oninput"in document;if(!Fh){var f0=document.createElement("div");f0.setAttribute("oninput","return;"),Fh=typeof f0.oninput=="function"}Eh=Fh}else Eh=!1;M1=Eh&&(!document.documentMode||9<document.documentMode)}function p0(){sc&&(sc.detachEvent("onpropertychange",D1),Nc=sc=null)}function D1(e){if(e.propertyName==="value"&&Td(Nc)){var t=[];I1(t,Nc,e,Cf(e)),m1(Ev,t)}}function Ov(e,t,r){e==="focusin"?(p0(),sc=t,Nc=r,sc.attachEvent("onpropertychange",D1)):e==="focusout"&&p0()}function Rv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Td(Nc)}function Bv(e,t){if(e==="click")return Td(t)}function qv(e,t){if(e==="input"||e==="change")return Td(t)}function $v(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Di=typeof Object.is=="function"?Object.is:$v;function wc(e,t){if(Di(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!cm.call(t,a)||!Di(e[a],t[a]))return!1}return!0}function g0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function x0(e,t){var r=g0(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=g0(r)}}function T1(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?T1(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E1(){for(var e=window,t=ad();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ad(e.document)}return t}function Df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Uv(e){var t=E1(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&T1(r.ownerDocument.documentElement,r)){if(i!==null&&Df(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,s=Math.min(i.start,a);i=i.end===void 0?s:Math.min(i.end,a),!e.extend&&s>i&&(a=i,i=s,s=a),a=x0(r,s);var l=x0(r,i);a&&l&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vv=va&&"documentMode"in document&&11>=document.documentMode,_o=null,Lm=null,oc=null,Pm=!1;function v0(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Pm||_o==null||_o!==ad(i)||(i=_o,"selectionStart"in i&&Df(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),oc&&wc(oc,i)||(oc=i,i=hd(Lm,"onSelect"),0<i.length&&(t=new zf("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=_o)))}function ku(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var zo={animationend:ku("Animation","AnimationEnd"),animationiteration:ku("Animation","AnimationIteration"),animationstart:ku("Animation","AnimationStart"),transitionend:ku("Transition","TransitionEnd")},Oh={},F1={};va&&(F1=document.createElement("div").style,"AnimationEvent"in window||(delete zo.animationend.animation,delete zo.animationiteration.animation,delete zo.animationstart.animation),"TransitionEvent"in window||delete zo.transitionend.transition);function Ed(e){if(Oh[e])return Oh[e];if(!zo[e])return e;var t=zo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in F1)return Oh[e]=t[r];return e}var O1=Ed("animationend"),R1=Ed("animationiteration"),B1=Ed("animationstart"),q1=Ed("transitionend"),$1=new Map,y0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(e,t){$1.set(e,t),Ws(t,[e])}for(var Rh=0;Rh<y0.length;Rh++){var Bh=y0[Rh],Hv=Bh.toLowerCase(),Gv=Bh[0].toUpperCase()+Bh.slice(1);fs(Hv,"on"+Gv)}fs(O1,"onAnimationEnd");fs(R1,"onAnimationIteration");fs(B1,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(q1,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);Ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ec="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ec));function N0(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,H5(i,t,void 0,e),e.currentTarget=null}function U1(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var l=i.length-1;0<=l;l--){var c=i[l],u=c.instance,m=c.currentTarget;if(c=c.listener,u!==s&&a.isPropagationStopped())break e;N0(a,c,m),s=u}else for(l=0;l<i.length;l++){if(c=i[l],u=c.instance,m=c.currentTarget,c=c.listener,u!==s&&a.isPropagationStopped())break e;N0(a,c,m),s=u}}}if(od)throw e=Sm,od=!1,Sm=null,e}function on(e,t){var r=t[Dm];r===void 0&&(r=t[Dm]=new Set);var i=e+"__bubble";r.has(i)||(V1(t,e,2,!1),r.add(i))}function qh(e,t,r){var i=0;t&&(i|=4),V1(r,e,i,t)}var Au="_reactListening"+Math.random().toString(36).slice(2);function bc(e){if(!e[Au]){e[Au]=!0,Qg.forEach(function(r){r!=="selectionchange"&&(Wv.has(r)||qh(r,!1,e),qh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Au]||(t[Au]=!0,qh("selectionchange",!1,t))}}function V1(e,t,r,i){switch(A1(t)){case 1:var a=ov;break;case 4:a=lv;break;default:a=Pf}r=a.bind(null,t,r,e),a=void 0,!jm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function $h(e,t,r,i,a){var s=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var c=i.stateNode.containerInfo;if(c===a||c.nodeType===8&&c.parentNode===a)break;if(l===4)for(l=i.return;l!==null;){var u=l.tag;if((u===3||u===4)&&(u=l.stateNode.containerInfo,u===a||u.nodeType===8&&u.parentNode===a))return;l=l.return}for(;c!==null;){if(l=Ts(c),l===null)return;if(u=l.tag,u===5||u===6){i=s=l;continue e}c=c.parentNode}}i=i.return}m1(function(){var m=s,x=Cf(r),g=[];e:{var v=$1.get(e);if(v!==void 0){var p=zf,j=e;switch(e){case"keypress":if(Wu(r)===0)break e;case"keydown":case"keyup":p=jv;break;case"focusin":j="focus",p=Th;break;case"focusout":j="blur",p=Th;break;case"beforeblur":case"afterblur":p=Th;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=l0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=dv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=kv;break;case O1:case R1:case B1:p=fv;break;case q1:p=Lv;break;case"scroll":p=cv;break;case"wheel":p=_v;break;case"copy":case"cut":case"paste":p=gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=u0}var w=(t&4)!==0,A=!w&&e==="scroll",N=w?v!==null?v+"Capture":null:v;w=[];for(var b=m,L;b!==null;){L=b;var G=L.stateNode;if(L.tag===5&&G!==null&&(L=G,N!==null&&(G=gc(b,N),G!=null&&w.push(jc(b,G,L)))),A)break;b=b.return}0<w.length&&(v=new p(v,j,null,r,x),g.push({event:v,listeners:w}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",v&&r!==wm&&(j=r.relatedTarget||r.fromElement)&&(Ts(j)||j[ya]))break e;if((p||v)&&(v=x.window===x?x:(v=x.ownerDocument)?v.defaultView||v.parentWindow:window,p?(j=r.relatedTarget||r.toElement,p=m,j=j?Ts(j):null,j!==null&&(A=Js(j),j!==A||j.tag!==5&&j.tag!==6)&&(j=null)):(p=null,j=m),p!==j)){if(w=l0,G="onMouseLeave",N="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(w=u0,G="onPointerLeave",N="onPointerEnter",b="pointer"),A=p==null?v:Io(p),L=j==null?v:Io(j),v=new w(G,b+"leave",p,r,x),v.target=A,v.relatedTarget=L,G=null,Ts(x)===m&&(w=new w(N,b+"enter",j,r,x),w.target=L,w.relatedTarget=A,G=w),A=G,p&&j)t:{for(w=p,N=j,b=0,L=w;L;L=wo(L))b++;for(L=0,G=N;G;G=wo(G))L++;for(;0<b-L;)w=wo(w),b--;for(;0<L-b;)N=wo(N),L--;for(;b--;){if(w===N||N!==null&&w===N.alternate)break t;w=wo(w),N=wo(N)}w=null}else w=null;p!==null&&w0(g,v,p,w,!1),j!==null&&A!==null&&w0(g,A,j,w,!0)}}e:{if(v=m?Io(m):window,p=v.nodeName&&v.nodeName.toLowerCase(),p==="select"||p==="input"&&v.type==="file")var ne=Fv;else if(m0(v))if(M1)ne=qv;else{ne=Rv;var ce=Ov}else(p=v.nodeName)&&p.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(ne=Bv);if(ne&&(ne=ne(e,m))){I1(g,ne,r,x);break e}ce&&ce(e,v,m),e==="focusout"&&(ce=v._wrapperState)&&ce.controlled&&v.type==="number"&&gm(v,"number",v.value)}switch(ce=m?Io(m):window,e){case"focusin":(m0(ce)||ce.contentEditable==="true")&&(_o=ce,Lm=m,oc=null);break;case"focusout":oc=Lm=_o=null;break;case"mousedown":Pm=!0;break;case"contextmenu":case"mouseup":case"dragend":Pm=!1,v0(g,r,x);break;case"selectionchange":if(Vv)break;case"keydown":case"keyup":v0(g,r,x)}var V;if(Mf)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Po?_1(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(P1&&r.locale!=="ko"&&(Po||O!=="onCompositionStart"?O==="onCompositionEnd"&&Po&&(V=L1()):(Ka=x,_f="value"in Ka?Ka.value:Ka.textContent,Po=!0)),ce=hd(m,O),0<ce.length&&(O=new c0(O,e,null,r,x),g.push({event:O,listeners:ce}),V?O.data=V:(V=z1(r),V!==null&&(O.data=V)))),(V=Iv?Mv(e,r):Dv(e,r))&&(m=hd(m,"onBeforeInput"),0<m.length&&(x=new c0("onBeforeInput","beforeinput",null,r,x),g.push({event:x,listeners:m}),x.data=V))}U1(g,t)})}function jc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function hd(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,s=a.stateNode;a.tag===5&&s!==null&&(a=s,s=gc(e,r),s!=null&&i.unshift(jc(e,s,a)),s=gc(e,t),s!=null&&i.push(jc(e,s,a))),e=e.return}return i}function wo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function w0(e,t,r,i,a){for(var s=t._reactName,l=[];r!==null&&r!==i;){var c=r,u=c.alternate,m=c.stateNode;if(u!==null&&u===i)break;c.tag===5&&m!==null&&(c=m,a?(u=gc(r,s),u!=null&&l.unshift(jc(r,u,c))):a||(u=gc(r,s),u!=null&&l.push(jc(r,u,c)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Jv=/\r\n?/g,Xv=/\u0000|\uFFFD/g;function b0(e){return(typeof e=="string"?e:""+e).replace(Jv,`
`).replace(Xv,"")}function Lu(e,t,r){if(t=b0(t),b0(e)!==t&&r)throw Error(Ue(425))}function md(){}var _m=null,zm=null;function Im(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mm=typeof setTimeout=="function"?setTimeout:void 0,Yv=typeof clearTimeout=="function"?clearTimeout:void 0,j0=typeof Promise=="function"?Promise:void 0,Qv=typeof queueMicrotask=="function"?queueMicrotask:typeof j0<"u"?function(e){return j0.resolve(null).then(e).catch(Kv)}:Mm;function Kv(e){setTimeout(function(){throw e})}function Uh(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),yc(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);yc(t)}function as(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function S0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ll=Math.random().toString(36).slice(2),Gi="__reactFiber$"+ll,Sc="__reactProps$"+ll,ya="__reactContainer$"+ll,Dm="__reactEvents$"+ll,Zv="__reactListeners$"+ll,ey="__reactHandles$"+ll;function Ts(e){var t=e[Gi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ya]||r[Gi]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=S0(e);e!==null;){if(r=e[Gi])return r;e=S0(e)}return t}e=r,r=e.parentNode}return null}function Ec(e){return e=e[Gi]||e[ya],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Io(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function Fd(e){return e[Sc]||null}var Tm=[],Mo=-1;function ps(e){return{current:e}}function cn(e){0>Mo||(e.current=Tm[Mo],Tm[Mo]=null,Mo--)}function sn(e,t){Mo++,Tm[Mo]=e.current,e.current=t}var ds={},mr=ps(ds),Fr=ps(!1),qs=ds;function Zo(e,t){var r=e.type.contextTypes;if(!r)return ds;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},s;for(s in r)a[s]=t[s];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Or(e){return e=e.childContextTypes,e!=null}function fd(){cn(Fr),cn(mr)}function C0(e,t,r){if(mr.current!==ds)throw Error(Ue(168));sn(mr,t),sn(Fr,r)}function H1(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Ue(108,O5(e)||"Unknown",a));return yn({},r,i)}function pd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ds,qs=mr.current,sn(mr,e),sn(Fr,Fr.current),!0}function k0(e,t,r){var i=e.stateNode;if(!i)throw Error(Ue(169));r?(e=H1(e,t,qs),i.__reactInternalMemoizedMergedChildContext=e,cn(Fr),cn(mr),sn(mr,e)):cn(Fr),sn(Fr,r)}var fa=null,Od=!1,Vh=!1;function G1(e){fa===null?fa=[e]:fa.push(e)}function ty(e){Od=!0,G1(e)}function gs(){if(!Vh&&fa!==null){Vh=!0;var e=0,t=Kt;try{var r=fa;for(Kt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}fa=null,Od=!1}catch(a){throw fa!==null&&(fa=fa.slice(e+1)),x1(kf,gs),a}finally{Kt=t,Vh=!1}}return null}var Do=[],To=0,gd=null,xd=0,mi=[],fi=0,$s=null,pa=1,ga="";function zs(e,t){Do[To++]=xd,Do[To++]=gd,gd=e,xd=t}function W1(e,t,r){mi[fi++]=pa,mi[fi++]=ga,mi[fi++]=$s,$s=e;var i=pa;e=ga;var a=32-Ii(i)-1;i&=~(1<<a),r+=1;var s=32-Ii(t)+a;if(30<s){var l=a-a%5;s=(i&(1<<l)-1).toString(32),i>>=l,a-=l,pa=1<<32-Ii(t)+a|r<<a|i,ga=s+e}else pa=1<<s|r<<a|i,ga=e}function Tf(e){e.return!==null&&(zs(e,1),W1(e,1,0))}function Ef(e){for(;e===gd;)gd=Do[--To],Do[To]=null,xd=Do[--To],Do[To]=null;for(;e===$s;)$s=mi[--fi],mi[fi]=null,ga=mi[--fi],mi[fi]=null,pa=mi[--fi],mi[fi]=null}var Qr=null,Xr=null,dn=!1,zi=null;function J1(e,t){var r=gi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function A0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=as(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Xr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$s!==null?{id:pa,overflow:ga}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qr=e,Xr=null,!0):!1;default:return!1}}function Em(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Fm(e){if(dn){var t=Xr;if(t){var r=t;if(!A0(e,t)){if(Em(e))throw Error(Ue(418));t=as(r.nextSibling);var i=Qr;t&&A0(e,t)?J1(i,r):(e.flags=e.flags&-4097|2,dn=!1,Qr=e)}}else{if(Em(e))throw Error(Ue(418));e.flags=e.flags&-4097|2,dn=!1,Qr=e}}}function L0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Pu(e){if(e!==Qr)return!1;if(!dn)return L0(e),dn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Im(e.type,e.memoizedProps)),t&&(t=Xr)){if(Em(e))throw X1(),Error(Ue(418));for(;t;)J1(e,t),t=as(t.nextSibling)}if(L0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Xr=as(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Xr=null}}else Xr=Qr?as(e.stateNode.nextSibling):null;return!0}function X1(){for(var e=Xr;e;)e=as(e.nextSibling)}function el(){Xr=Qr=null,dn=!1}function Ff(e){zi===null?zi=[e]:zi.push(e)}var ny=ba.ReactCurrentBatchConfig;function Hl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ue(309));var i=r.stateNode}if(!i)throw Error(Ue(147,e));var a=i,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(l){var c=a.refs;l===null?delete c[s]:c[s]=l},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ue(284));if(!r._owner)throw Error(Ue(290,e))}return e}function _u(e,t){throw e=Object.prototype.toString.call(t),Error(Ue(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function P0(e){var t=e._init;return t(e._payload)}function Y1(e){function t(N,b){if(e){var L=N.deletions;L===null?(N.deletions=[b],N.flags|=16):L.push(b)}}function r(N,b){if(!e)return null;for(;b!==null;)t(N,b),b=b.sibling;return null}function i(N,b){for(N=new Map;b!==null;)b.key!==null?N.set(b.key,b):N.set(b.index,b),b=b.sibling;return N}function a(N,b){return N=cs(N,b),N.index=0,N.sibling=null,N}function s(N,b,L){return N.index=L,e?(L=N.alternate,L!==null?(L=L.index,L<b?(N.flags|=2,b):L):(N.flags|=2,b)):(N.flags|=1048576,b)}function l(N){return e&&N.alternate===null&&(N.flags|=2),N}function c(N,b,L,G){return b===null||b.tag!==6?(b=Qh(L,N.mode,G),b.return=N,b):(b=a(b,L),b.return=N,b)}function u(N,b,L,G){var ne=L.type;return ne===Lo?x(N,b,L.props.children,G,L.key):b!==null&&(b.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Wa&&P0(ne)===b.type)?(G=a(b,L.props),G.ref=Hl(N,b,L),G.return=N,G):(G=ed(L.type,L.key,L.props,null,N.mode,G),G.ref=Hl(N,b,L),G.return=N,G)}function m(N,b,L,G){return b===null||b.tag!==4||b.stateNode.containerInfo!==L.containerInfo||b.stateNode.implementation!==L.implementation?(b=Kh(L,N.mode,G),b.return=N,b):(b=a(b,L.children||[]),b.return=N,b)}function x(N,b,L,G,ne){return b===null||b.tag!==7?(b=Rs(L,N.mode,G,ne),b.return=N,b):(b=a(b,L),b.return=N,b)}function g(N,b,L){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Qh(""+b,N.mode,L),b.return=N,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case yu:return L=ed(b.type,b.key,b.props,null,N.mode,L),L.ref=Hl(N,null,b),L.return=N,L;case Ao:return b=Kh(b,N.mode,L),b.return=N,b;case Wa:var G=b._init;return g(N,G(b._payload),L)}if(Kl(b)||Bl(b))return b=Rs(b,N.mode,L,null),b.return=N,b;_u(N,b)}return null}function v(N,b,L,G){var ne=b!==null?b.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return ne!==null?null:c(N,b,""+L,G);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case yu:return L.key===ne?u(N,b,L,G):null;case Ao:return L.key===ne?m(N,b,L,G):null;case Wa:return ne=L._init,v(N,b,ne(L._payload),G)}if(Kl(L)||Bl(L))return ne!==null?null:x(N,b,L,G,null);_u(N,L)}return null}function p(N,b,L,G,ne){if(typeof G=="string"&&G!==""||typeof G=="number")return N=N.get(L)||null,c(b,N,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case yu:return N=N.get(G.key===null?L:G.key)||null,u(b,N,G,ne);case Ao:return N=N.get(G.key===null?L:G.key)||null,m(b,N,G,ne);case Wa:var ce=G._init;return p(N,b,L,ce(G._payload),ne)}if(Kl(G)||Bl(G))return N=N.get(L)||null,x(b,N,G,ne,null);_u(b,G)}return null}function j(N,b,L,G){for(var ne=null,ce=null,V=b,O=b=0,J=null;V!==null&&O<L.length;O++){V.index>O?(J=V,V=null):J=V.sibling;var ee=v(N,V,L[O],G);if(ee===null){V===null&&(V=J);break}e&&V&&ee.alternate===null&&t(N,V),b=s(ee,b,O),ce===null?ne=ee:ce.sibling=ee,ce=ee,V=J}if(O===L.length)return r(N,V),dn&&zs(N,O),ne;if(V===null){for(;O<L.length;O++)V=g(N,L[O],G),V!==null&&(b=s(V,b,O),ce===null?ne=V:ce.sibling=V,ce=V);return dn&&zs(N,O),ne}for(V=i(N,V);O<L.length;O++)J=p(V,N,O,L[O],G),J!==null&&(e&&J.alternate!==null&&V.delete(J.key===null?O:J.key),b=s(J,b,O),ce===null?ne=J:ce.sibling=J,ce=J);return e&&V.forEach(function(_){return t(N,_)}),dn&&zs(N,O),ne}function w(N,b,L,G){var ne=Bl(L);if(typeof ne!="function")throw Error(Ue(150));if(L=ne.call(L),L==null)throw Error(Ue(151));for(var ce=ne=null,V=b,O=b=0,J=null,ee=L.next();V!==null&&!ee.done;O++,ee=L.next()){V.index>O?(J=V,V=null):J=V.sibling;var _=v(N,V,ee.value,G);if(_===null){V===null&&(V=J);break}e&&V&&_.alternate===null&&t(N,V),b=s(_,b,O),ce===null?ne=_:ce.sibling=_,ce=_,V=J}if(ee.done)return r(N,V),dn&&zs(N,O),ne;if(V===null){for(;!ee.done;O++,ee=L.next())ee=g(N,ee.value,G),ee!==null&&(b=s(ee,b,O),ce===null?ne=ee:ce.sibling=ee,ce=ee);return dn&&zs(N,O),ne}for(V=i(N,V);!ee.done;O++,ee=L.next())ee=p(V,N,O,ee.value,G),ee!==null&&(e&&ee.alternate!==null&&V.delete(ee.key===null?O:ee.key),b=s(ee,b,O),ce===null?ne=ee:ce.sibling=ee,ce=ee);return e&&V.forEach(function(D){return t(N,D)}),dn&&zs(N,O),ne}function A(N,b,L,G){if(typeof L=="object"&&L!==null&&L.type===Lo&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case yu:e:{for(var ne=L.key,ce=b;ce!==null;){if(ce.key===ne){if(ne=L.type,ne===Lo){if(ce.tag===7){r(N,ce.sibling),b=a(ce,L.props.children),b.return=N,N=b;break e}}else if(ce.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===Wa&&P0(ne)===ce.type){r(N,ce.sibling),b=a(ce,L.props),b.ref=Hl(N,ce,L),b.return=N,N=b;break e}r(N,ce);break}else t(N,ce);ce=ce.sibling}L.type===Lo?(b=Rs(L.props.children,N.mode,G,L.key),b.return=N,N=b):(G=ed(L.type,L.key,L.props,null,N.mode,G),G.ref=Hl(N,b,L),G.return=N,N=G)}return l(N);case Ao:e:{for(ce=L.key;b!==null;){if(b.key===ce)if(b.tag===4&&b.stateNode.containerInfo===L.containerInfo&&b.stateNode.implementation===L.implementation){r(N,b.sibling),b=a(b,L.children||[]),b.return=N,N=b;break e}else{r(N,b);break}else t(N,b);b=b.sibling}b=Kh(L,N.mode,G),b.return=N,N=b}return l(N);case Wa:return ce=L._init,A(N,b,ce(L._payload),G)}if(Kl(L))return j(N,b,L,G);if(Bl(L))return w(N,b,L,G);_u(N,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,b!==null&&b.tag===6?(r(N,b.sibling),b=a(b,L),b.return=N,N=b):(r(N,b),b=Qh(L,N.mode,G),b.return=N,N=b),l(N)):r(N,b)}return A}var tl=Y1(!0),Q1=Y1(!1),vd=ps(null),yd=null,Eo=null,Of=null;function Rf(){Of=Eo=yd=null}function Bf(e){var t=vd.current;cn(vd),e._currentValue=t}function Om(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Go(e,t){yd=e,Of=Eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Er=!0),e.firstContext=null)}function vi(e){var t=e._currentValue;if(Of!==e)if(e={context:e,memoizedValue:t,next:null},Eo===null){if(yd===null)throw Error(Ue(308));Eo=e,yd.dependencies={lanes:0,firstContext:e}}else Eo=Eo.next=e;return t}var Es=null;function qf(e){Es===null?Es=[e]:Es.push(e)}function K1(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,qf(t)):(r.next=a.next,a.next=r),t.interleaved=r,Na(e,i)}function Na(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ja=!1;function $f(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Rt&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,Na(e,r)}return a=i.interleaved,a===null?(t.next=t,qf(i)):(t.next=a.next,a.next=t),i.interleaved=t,Na(e,r)}function Ju(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Af(e,r)}}function _0(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?a=s=l:s=s.next=l,r=r.next}while(r!==null);s===null?a=s=t:s=s.next=t}else a=s=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Nd(e,t,r,i){var a=e.updateQueue;Ja=!1;var s=a.firstBaseUpdate,l=a.lastBaseUpdate,c=a.shared.pending;if(c!==null){a.shared.pending=null;var u=c,m=u.next;u.next=null,l===null?s=m:l.next=m,l=u;var x=e.alternate;x!==null&&(x=x.updateQueue,c=x.lastBaseUpdate,c!==l&&(c===null?x.firstBaseUpdate=m:c.next=m,x.lastBaseUpdate=u))}if(s!==null){var g=a.baseState;l=0,x=m=u=null,c=s;do{var v=c.lane,p=c.eventTime;if((i&v)===v){x!==null&&(x=x.next={eventTime:p,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,w=c;switch(v=t,p=r,w.tag){case 1:if(j=w.payload,typeof j=="function"){g=j.call(p,g,v);break e}g=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=w.payload,v=typeof j=="function"?j.call(p,g,v):j,v==null)break e;g=yn({},g,v);break e;case 2:Ja=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,v=a.effects,v===null?a.effects=[c]:v.push(c))}else p={eventTime:p,lane:v,tag:c.tag,payload:c.payload,callback:c.callback,next:null},x===null?(m=x=p,u=g):x=x.next=p,l|=v;if(c=c.next,c===null){if(c=a.shared.pending,c===null)break;v=c,c=v.next,v.next=null,a.lastBaseUpdate=v,a.shared.pending=null}}while(1);if(x===null&&(u=g),a.baseState=u,a.firstBaseUpdate=m,a.lastBaseUpdate=x,t=a.shared.interleaved,t!==null){a=t;do l|=a.lane,a=a.next;while(a!==t)}else s===null&&(a.shared.lanes=0);Vs|=l,e.lanes=l,e.memoizedState=g}}function z0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(Ue(191,a));a.call(i)}}}var Fc={},Xi=ps(Fc),Cc=ps(Fc),kc=ps(Fc);function Fs(e){if(e===Fc)throw Error(Ue(174));return e}function Uf(e,t){switch(sn(kc,t),sn(Cc,e),sn(Xi,Fc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:vm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=vm(t,e)}cn(Xi),sn(Xi,t)}function nl(){cn(Xi),cn(Cc),cn(kc)}function e2(e){Fs(kc.current);var t=Fs(Xi.current),r=vm(t,e.type);t!==r&&(sn(Cc,e),sn(Xi,r))}function Vf(e){Cc.current===e&&(cn(Xi),cn(Cc))}var xn=ps(0);function wd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Hh=[];function Hf(){for(var e=0;e<Hh.length;e++)Hh[e]._workInProgressVersionPrimary=null;Hh.length=0}var Xu=ba.ReactCurrentDispatcher,Gh=ba.ReactCurrentBatchConfig,Us=0,vn=null,On=null,Hn=null,bd=!1,lc=!1,Ac=0,ry=0;function ar(){throw Error(Ue(321))}function Gf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Di(e[r],t[r]))return!1;return!0}function Wf(e,t,r,i,a,s){if(Us=s,vn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xu.current=e===null||e.memoizedState===null?oy:ly,e=r(i,a),lc){s=0;do{if(lc=!1,Ac=0,25<=s)throw Error(Ue(301));s+=1,Hn=On=null,t.updateQueue=null,Xu.current=cy,e=r(i,a)}while(lc)}if(Xu.current=jd,t=On!==null&&On.next!==null,Us=0,Hn=On=vn=null,bd=!1,t)throw Error(Ue(300));return e}function Jf(){var e=Ac!==0;return Ac=0,e}function Hi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hn===null?vn.memoizedState=Hn=e:Hn=Hn.next=e,Hn}function yi(){if(On===null){var e=vn.alternate;e=e!==null?e.memoizedState:null}else e=On.next;var t=Hn===null?vn.memoizedState:Hn.next;if(t!==null)Hn=t,On=e;else{if(e===null)throw Error(Ue(310));On=e,e={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Hn===null?vn.memoizedState=Hn=e:Hn=Hn.next=e}return Hn}function Lc(e,t){return typeof t=="function"?t(e):t}function Wh(e){var t=yi(),r=t.queue;if(r===null)throw Error(Ue(311));r.lastRenderedReducer=e;var i=On,a=i.baseQueue,s=r.pending;if(s!==null){if(a!==null){var l=a.next;a.next=s.next,s.next=l}i.baseQueue=a=s,r.pending=null}if(a!==null){s=a.next,i=i.baseState;var c=l=null,u=null,m=s;do{var x=m.lane;if((Us&x)===x)u!==null&&(u=u.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var g={lane:x,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};u===null?(c=u=g,l=i):u=u.next=g,vn.lanes|=x,Vs|=x}m=m.next}while(m!==null&&m!==s);u===null?l=i:u.next=c,Di(i,t.memoizedState)||(Er=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=u,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do s=a.lane,vn.lanes|=s,Vs|=s,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Jh(e){var t=yi(),r=t.queue;if(r===null)throw Error(Ue(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,s=t.memoizedState;if(a!==null){r.pending=null;var l=a=a.next;do s=e(s,l.action),l=l.next;while(l!==a);Di(s,t.memoizedState)||(Er=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,i]}function t2(){}function n2(e,t){var r=vn,i=yi(),a=t(),s=!Di(i.memoizedState,a);if(s&&(i.memoizedState=a,Er=!0),i=i.queue,Xf(a2.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||Hn!==null&&Hn.memoizedState.tag&1){if(r.flags|=2048,Pc(9,i2.bind(null,r,i,a,t),void 0,null),Jn===null)throw Error(Ue(349));Us&30||r2(r,t,a)}return a}function r2(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function i2(e,t,r,i){t.value=r,t.getSnapshot=i,s2(t)&&o2(e)}function a2(e,t,r){return r(function(){s2(t)&&o2(e)})}function s2(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Di(e,r)}catch{return!0}}function o2(e){var t=Na(e,1);t!==null&&Mi(t,e,1,-1)}function I0(e){var t=Hi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:e},t.queue=e,e=e.dispatch=sy.bind(null,vn,e),[t.memoizedState,e]}function Pc(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=vn.updateQueue,t===null?(t={lastEffect:null,stores:null},vn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function l2(){return yi().memoizedState}function Yu(e,t,r,i){var a=Hi();vn.flags|=e,a.memoizedState=Pc(1|t,r,void 0,i===void 0?null:i)}function Rd(e,t,r,i){var a=yi();i=i===void 0?null:i;var s=void 0;if(On!==null){var l=On.memoizedState;if(s=l.destroy,i!==null&&Gf(i,l.deps)){a.memoizedState=Pc(t,r,s,i);return}}vn.flags|=e,a.memoizedState=Pc(1|t,r,s,i)}function M0(e,t){return Yu(8390656,8,e,t)}function Xf(e,t){return Rd(2048,8,e,t)}function c2(e,t){return Rd(4,2,e,t)}function u2(e,t){return Rd(4,4,e,t)}function d2(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function h2(e,t,r){return r=r!=null?r.concat([e]):null,Rd(4,4,d2.bind(null,t,e),r)}function Yf(){}function m2(e,t){var r=yi();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Gf(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function f2(e,t){var r=yi();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Gf(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function p2(e,t,r){return Us&21?(Di(r,t)||(r=N1(),vn.lanes|=r,Vs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Er=!0),e.memoizedState=r)}function iy(e,t){var r=Kt;Kt=r!==0&&4>r?r:4,e(!0);var i=Gh.transition;Gh.transition={};try{e(!1),t()}finally{Kt=r,Gh.transition=i}}function g2(){return yi().memoizedState}function ay(e,t,r){var i=ls(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},x2(e))v2(t,r);else if(r=K1(e,t,r,i),r!==null){var a=jr();Mi(r,e,i,a),y2(r,t,i)}}function sy(e,t,r){var i=ls(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(x2(e))v2(t,a);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var l=t.lastRenderedState,c=s(l,r);if(a.hasEagerState=!0,a.eagerState=c,Di(c,l)){var u=t.interleaved;u===null?(a.next=a,qf(t)):(a.next=u.next,u.next=a),t.interleaved=a;return}}catch{}finally{}r=K1(e,t,a,i),r!==null&&(a=jr(),Mi(r,e,i,a),y2(r,t,i))}}function x2(e){var t=e.alternate;return e===vn||t!==null&&t===vn}function v2(e,t){lc=bd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function y2(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Af(e,r)}}var jd={readContext:vi,useCallback:ar,useContext:ar,useEffect:ar,useImperativeHandle:ar,useInsertionEffect:ar,useLayoutEffect:ar,useMemo:ar,useReducer:ar,useRef:ar,useState:ar,useDebugValue:ar,useDeferredValue:ar,useTransition:ar,useMutableSource:ar,useSyncExternalStore:ar,useId:ar,unstable_isNewReconciler:!1},oy={readContext:vi,useCallback:function(e,t){return Hi().memoizedState=[e,t===void 0?null:t],e},useContext:vi,useEffect:M0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Yu(4194308,4,d2.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Yu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yu(4,2,e,t)},useMemo:function(e,t){var r=Hi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Hi();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ay.bind(null,vn,e),[i.memoizedState,e]},useRef:function(e){var t=Hi();return e={current:e},t.memoizedState=e},useState:I0,useDebugValue:Yf,useDeferredValue:function(e){return Hi().memoizedState=e},useTransition:function(){var e=I0(!1),t=e[0];return e=iy.bind(null,e[1]),Hi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=vn,a=Hi();if(dn){if(r===void 0)throw Error(Ue(407));r=r()}else{if(r=t(),Jn===null)throw Error(Ue(349));Us&30||r2(i,t,r)}a.memoizedState=r;var s={value:r,getSnapshot:t};return a.queue=s,M0(a2.bind(null,i,s,e),[e]),i.flags|=2048,Pc(9,i2.bind(null,i,s,r,t),void 0,null),r},useId:function(){var e=Hi(),t=Jn.identifierPrefix;if(dn){var r=ga,i=pa;r=(i&~(1<<32-Ii(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ac++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ry++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ly={readContext:vi,useCallback:m2,useContext:vi,useEffect:Xf,useImperativeHandle:h2,useInsertionEffect:c2,useLayoutEffect:u2,useMemo:f2,useReducer:Wh,useRef:l2,useState:function(){return Wh(Lc)},useDebugValue:Yf,useDeferredValue:function(e){var t=yi();return p2(t,On.memoizedState,e)},useTransition:function(){var e=Wh(Lc)[0],t=yi().memoizedState;return[e,t]},useMutableSource:t2,useSyncExternalStore:n2,useId:g2,unstable_isNewReconciler:!1},cy={readContext:vi,useCallback:m2,useContext:vi,useEffect:Xf,useImperativeHandle:h2,useInsertionEffect:c2,useLayoutEffect:u2,useMemo:f2,useReducer:Jh,useRef:l2,useState:function(){return Jh(Lc)},useDebugValue:Yf,useDeferredValue:function(e){var t=yi();return On===null?t.memoizedState=e:p2(t,On.memoizedState,e)},useTransition:function(){var e=Jh(Lc)[0],t=yi().memoizedState;return[e,t]},useMutableSource:t2,useSyncExternalStore:n2,useId:g2,unstable_isNewReconciler:!1};function Ai(e,t){if(e&&e.defaultProps){t=yn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Rm(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:yn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Bd={isMounted:function(e){return(e=e._reactInternals)?Js(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=jr(),a=ls(e),s=xa(i,a);s.payload=t,r!=null&&(s.callback=r),t=ss(e,s,a),t!==null&&(Mi(t,e,a,i),Ju(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=jr(),a=ls(e),s=xa(i,a);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=ss(e,s,a),t!==null&&(Mi(t,e,a,i),Ju(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=jr(),i=ls(e),a=xa(r,i);a.tag=2,t!=null&&(a.callback=t),t=ss(e,a,i),t!==null&&(Mi(t,e,i,r),Ju(t,e,i))}};function D0(e,t,r,i,a,s,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,s,l):t.prototype&&t.prototype.isPureReactComponent?!wc(r,i)||!wc(a,s):!0}function N2(e,t,r){var i=!1,a=ds,s=t.contextType;return typeof s=="object"&&s!==null?s=vi(s):(a=Or(t)?qs:mr.current,i=t.contextTypes,s=(i=i!=null)?Zo(e,a):ds),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bd,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function T0(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Bd.enqueueReplaceState(t,t.state,null)}function Bm(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},$f(e);var s=t.contextType;typeof s=="object"&&s!==null?a.context=vi(s):(s=Or(t)?qs:mr.current,a.context=Zo(e,s)),a.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Rm(e,t,s,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Bd.enqueueReplaceState(a,a.state,null),Nd(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function rl(e,t){try{var r="",i=t;do r+=F5(i),i=i.return;while(i);var a=r}catch(s){a=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:a,digest:null}}function Xh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function qm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var uy=typeof WeakMap=="function"?WeakMap:Map;function w2(e,t,r){r=xa(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Cd||(Cd=!0,Qm=i),qm(e,t)},r}function b2(e,t,r){r=xa(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){qm(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){qm(e,t),typeof i!="function"&&(os===null?os=new Set([this]):os.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function E0(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new uy;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=Sy.bind(null,e,t,r),t.then(e,e))}function F0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function O0(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xa(-1,1),t.tag=2,ss(r,t,1))),r.lanes|=1),e)}var dy=ba.ReactCurrentOwner,Er=!1;function Nr(e,t,r,i){t.child=e===null?Q1(t,null,r,i):tl(t,e.child,r,i)}function R0(e,t,r,i,a){r=r.render;var s=t.ref;return Go(t,a),i=Wf(e,t,r,i,s,a),r=Jf(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wa(e,t,a)):(dn&&r&&Tf(t),t.flags|=1,Nr(e,t,i,a),t.child)}function B0(e,t,r,i,a){if(e===null){var s=r.type;return typeof s=="function"&&!ip(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,j2(e,t,s,i,a)):(e=ed(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&a)){var l=s.memoizedProps;if(r=r.compare,r=r!==null?r:wc,r(l,i)&&e.ref===t.ref)return wa(e,t,a)}return t.flags|=1,e=cs(s,i),e.ref=t.ref,e.return=t,t.child=e}function j2(e,t,r,i,a){if(e!==null){var s=e.memoizedProps;if(wc(s,i)&&e.ref===t.ref)if(Er=!1,t.pendingProps=i=s,(e.lanes&a)!==0)e.flags&131072&&(Er=!0);else return t.lanes=e.lanes,wa(e,t,a)}return $m(e,t,r,i,a)}function S2(e,t,r){var i=t.pendingProps,a=i.children,s=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},sn(Oo,Jr),Jr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,sn(Oo,Jr),Jr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:r,sn(Oo,Jr),Jr|=i}else s!==null?(i=s.baseLanes|r,t.memoizedState=null):i=r,sn(Oo,Jr),Jr|=i;return Nr(e,t,a,r),t.child}function C2(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $m(e,t,r,i,a){var s=Or(r)?qs:mr.current;return s=Zo(t,s),Go(t,a),r=Wf(e,t,r,i,s,a),i=Jf(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,wa(e,t,a)):(dn&&i&&Tf(t),t.flags|=1,Nr(e,t,r,a),t.child)}function q0(e,t,r,i,a){if(Or(r)){var s=!0;pd(t)}else s=!1;if(Go(t,a),t.stateNode===null)Qu(e,t),N2(t,r,i),Bm(t,r,i,a),i=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var u=l.context,m=r.contextType;typeof m=="object"&&m!==null?m=vi(m):(m=Or(r)?qs:mr.current,m=Zo(t,m));var x=r.getDerivedStateFromProps,g=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==i||u!==m)&&T0(t,l,i,m),Ja=!1;var v=t.memoizedState;l.state=v,Nd(t,i,l,a),u=t.memoizedState,c!==i||v!==u||Fr.current||Ja?(typeof x=="function"&&(Rm(t,r,x,i),u=t.memoizedState),(c=Ja||D0(t,r,c,i,v,u,m))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),l.props=i,l.state=u,l.context=m,i=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,Z1(e,t),c=t.memoizedProps,m=t.type===t.elementType?c:Ai(t.type,c),l.props=m,g=t.pendingProps,v=l.context,u=r.contextType,typeof u=="object"&&u!==null?u=vi(u):(u=Or(r)?qs:mr.current,u=Zo(t,u));var p=r.getDerivedStateFromProps;(x=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==g||v!==u)&&T0(t,l,i,u),Ja=!1,v=t.memoizedState,l.state=v,Nd(t,i,l,a);var j=t.memoizedState;c!==g||v!==j||Fr.current||Ja?(typeof p=="function"&&(Rm(t,r,p,i),j=t.memoizedState),(m=Ja||D0(t,r,m,i,v,j,u)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,j,u),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,j,u)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=j),l.props=i,l.state=j,l.context=u,i=m):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return Um(e,t,r,i,s,a)}function Um(e,t,r,i,a,s){C2(e,t);var l=(t.flags&128)!==0;if(!i&&!l)return a&&k0(t,r,!1),wa(e,t,s);i=t.stateNode,dy.current=t;var c=l&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&l?(t.child=tl(t,e.child,null,s),t.child=tl(t,null,c,s)):Nr(e,t,c,s),t.memoizedState=i.state,a&&k0(t,r,!0),t.child}function k2(e){var t=e.stateNode;t.pendingContext?C0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&C0(e,t.context,!1),Uf(e,t.containerInfo)}function $0(e,t,r,i,a){return el(),Ff(a),t.flags|=256,Nr(e,t,r,i),t.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Hm(e){return{baseLanes:e,cachePool:null,transitions:null}}function A2(e,t,r){var i=t.pendingProps,a=xn.current,s=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(a&2)!==0),c?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),sn(xn,a&1),e===null)return Fm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=l):s=Ud(l,i,0,null),e=Rs(e,i,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Hm(r),t.memoizedState=Vm,e):Qf(t,l));if(a=e.memoizedState,a!==null&&(c=a.dehydrated,c!==null))return hy(e,t,l,i,c,a,r);if(s){s=i.fallback,l=t.mode,a=e.child,c=a.sibling;var u={mode:"hidden",children:i.children};return!(l&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=u,t.deletions=null):(i=cs(a,u),i.subtreeFlags=a.subtreeFlags&14680064),c!==null?s=cs(c,s):(s=Rs(s,l,r,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=e.child.memoizedState,l=l===null?Hm(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~r,t.memoizedState=Vm,i}return s=e.child,e=s.sibling,i=cs(s,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Qf(e,t){return t=Ud({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zu(e,t,r,i){return i!==null&&Ff(i),tl(t,e.child,null,r),e=Qf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hy(e,t,r,i,a,s,l){if(r)return t.flags&256?(t.flags&=-257,i=Xh(Error(Ue(422))),zu(e,t,l,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=i.fallback,a=t.mode,i=Ud({mode:"visible",children:i.children},a,0,null),s=Rs(s,a,l,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,t.mode&1&&tl(t,e.child,null,l),t.child.memoizedState=Hm(l),t.memoizedState=Vm,s);if(!(t.mode&1))return zu(e,t,l,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var c=i.dgst;return i=c,s=Error(Ue(419)),i=Xh(s,i,void 0),zu(e,t,l,i)}if(c=(l&e.childLanes)!==0,Er||c){if(i=Jn,i!==null){switch(l&-l){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|l)?0:a,a!==0&&a!==s.retryLane&&(s.retryLane=a,Na(e,a),Mi(i,e,a,-1))}return rp(),i=Xh(Error(Ue(421))),zu(e,t,l,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Cy.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,Xr=as(a.nextSibling),Qr=t,dn=!0,zi=null,e!==null&&(mi[fi++]=pa,mi[fi++]=ga,mi[fi++]=$s,pa=e.id,ga=e.overflow,$s=t),t=Qf(t,i.children),t.flags|=4096,t)}function U0(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Om(e.return,t,r)}function Yh(e,t,r,i,a){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=a)}function L2(e,t,r){var i=t.pendingProps,a=i.revealOrder,s=i.tail;if(Nr(e,t,i.children,r),i=xn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U0(e,r,t);else if(e.tag===19)U0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(sn(xn,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&wd(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),Yh(t,!1,a,r,s);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&wd(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}Yh(t,!0,r,null,s);break;case"together":Yh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Vs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,r=cs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=cs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function my(e,t,r){switch(t.tag){case 3:k2(t),el();break;case 5:e2(t);break;case 1:Or(t.type)&&pd(t);break;case 4:Uf(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;sn(vd,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(sn(xn,xn.current&1),t.flags|=128,null):r&t.child.childLanes?A2(e,t,r):(sn(xn,xn.current&1),e=wa(e,t,r),e!==null?e.sibling:null);sn(xn,xn.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return L2(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),sn(xn,xn.current),i)break;return null;case 22:case 23:return t.lanes=0,S2(e,t,r)}return wa(e,t,r)}var P2,Gm,_2,z2;P2=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gm=function(){};_2=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Fs(Xi.current);var s=null;switch(r){case"input":a=fm(e,a),i=fm(e,i),s=[];break;case"select":a=yn({},a,{value:void 0}),i=yn({},i,{value:void 0}),s=[];break;case"textarea":a=xm(e,a),i=xm(e,i),s=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=md)}ym(r,i);var l;r=null;for(m in a)if(!i.hasOwnProperty(m)&&a.hasOwnProperty(m)&&a[m]!=null)if(m==="style"){var c=a[m];for(l in c)c.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(fc.hasOwnProperty(m)?s||(s=[]):(s=s||[]).push(m,null));for(m in i){var u=i[m];if(c=a!=null?a[m]:void 0,i.hasOwnProperty(m)&&u!==c&&(u!=null||c!=null))if(m==="style")if(c){for(l in c)!c.hasOwnProperty(l)||u&&u.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in u)u.hasOwnProperty(l)&&c[l]!==u[l]&&(r||(r={}),r[l]=u[l])}else r||(s||(s=[]),s.push(m,r)),r=u;else m==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(s=s||[]).push(m,u)):m==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(m,""+u):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(fc.hasOwnProperty(m)?(u!=null&&m==="onScroll"&&on("scroll",e),s||c===u||(s=[])):(s=s||[]).push(m,u))}r&&(s=s||[]).push("style",r);var m=s;(t.updateQueue=m)&&(t.flags|=4)}};z2=function(e,t,r,i){r!==i&&(t.flags|=4)};function Gl(e,t){if(!dn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function fy(e,t,r){var i=t.pendingProps;switch(Ef(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(t),null;case 1:return Or(t.type)&&fd(),sr(t),null;case 3:return i=t.stateNode,nl(),cn(Fr),cn(mr),Hf(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Pu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zi!==null&&(ef(zi),zi=null))),Gm(e,t),sr(t),null;case 5:Vf(t);var a=Fs(kc.current);if(r=t.type,e!==null&&t.stateNode!=null)_2(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ue(166));return sr(t),null}if(e=Fs(Xi.current),Pu(t)){i=t.stateNode,r=t.type;var s=t.memoizedProps;switch(i[Gi]=t,i[Sc]=s,e=(t.mode&1)!==0,r){case"dialog":on("cancel",i),on("close",i);break;case"iframe":case"object":case"embed":on("load",i);break;case"video":case"audio":for(a=0;a<ec.length;a++)on(ec[a],i);break;case"source":on("error",i);break;case"img":case"image":case"link":on("error",i),on("load",i);break;case"details":on("toggle",i);break;case"input":Kp(i,s),on("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},on("invalid",i);break;case"textarea":e0(i,s),on("invalid",i)}ym(r,s),a=null;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];l==="children"?typeof c=="string"?i.textContent!==c&&(s.suppressHydrationWarning!==!0&&Lu(i.textContent,c,e),a=["children",c]):typeof c=="number"&&i.textContent!==""+c&&(s.suppressHydrationWarning!==!0&&Lu(i.textContent,c,e),a=["children",""+c]):fc.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&on("scroll",i)}switch(r){case"input":Nu(i),Zp(i,s,!0);break;case"textarea":Nu(i),t0(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=md)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{l=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=a1(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),r==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[Gi]=t,e[Sc]=i,P2(e,t,!1,!1),t.stateNode=e;e:{switch(l=Nm(r,i),r){case"dialog":on("cancel",e),on("close",e),a=i;break;case"iframe":case"object":case"embed":on("load",e),a=i;break;case"video":case"audio":for(a=0;a<ec.length;a++)on(ec[a],e);a=i;break;case"source":on("error",e),a=i;break;case"img":case"image":case"link":on("error",e),on("load",e),a=i;break;case"details":on("toggle",e),a=i;break;case"input":Kp(e,i),a=fm(e,i),on("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=yn({},i,{value:void 0}),on("invalid",e);break;case"textarea":e0(e,i),a=xm(e,i),on("invalid",e);break;default:a=i}ym(r,a),c=a;for(s in c)if(c.hasOwnProperty(s)){var u=c[s];s==="style"?l1(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&s1(e,u)):s==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&pc(e,u):typeof u=="number"&&pc(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fc.hasOwnProperty(s)?u!=null&&s==="onScroll"&&on("scroll",e):u!=null&&wf(e,s,u,l))}switch(r){case"input":Nu(e),Zp(e,i,!1);break;case"textarea":Nu(e),t0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+us(i.value));break;case"select":e.multiple=!!i.multiple,s=i.value,s!=null?$o(e,!!i.multiple,s,!1):i.defaultValue!=null&&$o(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=md)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sr(t),null;case 6:if(e&&t.stateNode!=null)z2(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ue(166));if(r=Fs(kc.current),Fs(Xi.current),Pu(t)){if(i=t.stateNode,r=t.memoizedProps,i[Gi]=t,(s=i.nodeValue!==r)&&(e=Qr,e!==null))switch(e.tag){case 3:Lu(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lu(i.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Gi]=t,t.stateNode=i}return sr(t),null;case 13:if(cn(xn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dn&&Xr!==null&&t.mode&1&&!(t.flags&128))X1(),el(),t.flags|=98560,s=!1;else if(s=Pu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!s)throw Error(Ue(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ue(317));s[Gi]=t}else el(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;sr(t),s=!1}else zi!==null&&(ef(zi),zi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||xn.current&1?Rn===0&&(Rn=3):rp())),t.updateQueue!==null&&(t.flags|=4),sr(t),null);case 4:return nl(),Gm(e,t),e===null&&bc(t.stateNode.containerInfo),sr(t),null;case 10:return Bf(t.type._context),sr(t),null;case 17:return Or(t.type)&&fd(),sr(t),null;case 19:if(cn(xn),s=t.memoizedState,s===null)return sr(t),null;if(i=(t.flags&128)!==0,l=s.rendering,l===null)if(i)Gl(s,!1);else{if(Rn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=wd(e),l!==null){for(t.flags|=128,Gl(s,!1),i=l.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)s=r,e=i,s.flags&=14680066,l=s.alternate,l===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return sn(xn,xn.current&1|2),t.child}e=e.sibling}s.tail!==null&&kn()>il&&(t.flags|=128,i=!0,Gl(s,!1),t.lanes=4194304)}else{if(!i)if(e=wd(l),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Gl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!l.alternate&&!dn)return sr(t),null}else 2*kn()-s.renderingStartTime>il&&r!==1073741824&&(t.flags|=128,i=!0,Gl(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(r=s.last,r!==null?r.sibling=l:t.child=l,s.last=l)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=kn(),t.sibling=null,r=xn.current,sn(xn,i?r&1|2:r&1),t):(sr(t),null);case 22:case 23:return np(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Jr&1073741824&&(sr(t),t.subtreeFlags&6&&(t.flags|=8192)):sr(t),null;case 24:return null;case 25:return null}throw Error(Ue(156,t.tag))}function py(e,t){switch(Ef(t),t.tag){case 1:return Or(t.type)&&fd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nl(),cn(Fr),cn(mr),Hf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Vf(t),null;case 13:if(cn(xn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ue(340));el()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cn(xn),null;case 4:return nl(),null;case 10:return Bf(t.type._context),null;case 22:case 23:return np(),null;case 24:return null;default:return null}}var Iu=!1,dr=!1,gy=typeof WeakSet=="function"?WeakSet:Set,nt=null;function Fo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){jn(e,t,i)}else r.current=null}function Wm(e,t,r){try{r()}catch(i){jn(e,t,i)}}var V0=!1;function xy(e,t){if(_m=ud,e=E1(),Df(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var l=0,c=-1,u=-1,m=0,x=0,g=e,v=null;t:for(;;){for(var p;g!==r||a!==0&&g.nodeType!==3||(c=l+a),g!==s||i!==0&&g.nodeType!==3||(u=l+i),g.nodeType===3&&(l+=g.nodeValue.length),(p=g.firstChild)!==null;)v=g,g=p;for(;;){if(g===e)break t;if(v===r&&++m===a&&(c=l),v===s&&++x===i&&(u=l),(p=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=p}r=c===-1||u===-1?null:{start:c,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(zm={focusedElem:e,selectionRange:r},ud=!1,nt=t;nt!==null;)if(t=nt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,nt=e;else for(;nt!==null;){t=nt;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var w=j.memoizedProps,A=j.memoizedState,N=t.stateNode,b=N.getSnapshotBeforeUpdate(t.elementType===t.type?w:Ai(t.type,w),A);N.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ue(163))}}catch(G){jn(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,nt=e;break}nt=t.return}return j=V0,V0=!1,j}function cc(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,s!==void 0&&Wm(t,r,s)}a=a.next}while(a!==i)}}function qd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Jm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function I2(e){var t=e.alternate;t!==null&&(e.alternate=null,I2(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Gi],delete t[Sc],delete t[Dm],delete t[Zv],delete t[ey])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function M2(e){return e.tag===5||e.tag===3||e.tag===4}function H0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||M2(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Xm(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=md));else if(i!==4&&(e=e.child,e!==null))for(Xm(e,t,r),e=e.sibling;e!==null;)Xm(e,t,r),e=e.sibling}function Ym(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ym(e,t,r),e=e.sibling;e!==null;)Ym(e,t,r),e=e.sibling}var Kn=null,Pi=!1;function Va(e,t,r){for(r=r.child;r!==null;)D2(e,t,r),r=r.sibling}function D2(e,t,r){if(Ji&&typeof Ji.onCommitFiberUnmount=="function")try{Ji.onCommitFiberUnmount(Md,r)}catch{}switch(r.tag){case 5:dr||Fo(r,t);case 6:var i=Kn,a=Pi;Kn=null,Va(e,t,r),Kn=i,Pi=a,Kn!==null&&(Pi?(e=Kn,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Kn.removeChild(r.stateNode));break;case 18:Kn!==null&&(Pi?(e=Kn,r=r.stateNode,e.nodeType===8?Uh(e.parentNode,r):e.nodeType===1&&Uh(e,r),yc(e)):Uh(Kn,r.stateNode));break;case 4:i=Kn,a=Pi,Kn=r.stateNode.containerInfo,Pi=!0,Va(e,t,r),Kn=i,Pi=a;break;case 0:case 11:case 14:case 15:if(!dr&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var s=a,l=s.destroy;s=s.tag,l!==void 0&&(s&2||s&4)&&Wm(r,t,l),a=a.next}while(a!==i)}Va(e,t,r);break;case 1:if(!dr&&(Fo(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(c){jn(r,t,c)}Va(e,t,r);break;case 21:Va(e,t,r);break;case 22:r.mode&1?(dr=(i=dr)||r.memoizedState!==null,Va(e,t,r),dr=i):Va(e,t,r);break;default:Va(e,t,r)}}function G0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gy),t.forEach(function(i){var a=ky.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function Si(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var s=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Kn=c.stateNode,Pi=!1;break e;case 3:Kn=c.stateNode.containerInfo,Pi=!0;break e;case 4:Kn=c.stateNode.containerInfo,Pi=!0;break e}c=c.return}if(Kn===null)throw Error(Ue(160));D2(s,l,a),Kn=null,Pi=!1;var u=a.alternate;u!==null&&(u.return=null),a.return=null}catch(m){jn(a,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)T2(t,e),t=t.sibling}function T2(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Si(t,e),$i(e),i&4){try{cc(3,e,e.return),qd(3,e)}catch(w){jn(e,e.return,w)}try{cc(5,e,e.return)}catch(w){jn(e,e.return,w)}}break;case 1:Si(t,e),$i(e),i&512&&r!==null&&Fo(r,r.return);break;case 5:if(Si(t,e),$i(e),i&512&&r!==null&&Fo(r,r.return),e.flags&32){var a=e.stateNode;try{pc(a,"")}catch(w){jn(e,e.return,w)}}if(i&4&&(a=e.stateNode,a!=null)){var s=e.memoizedProps,l=r!==null?r.memoizedProps:s,c=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{c==="input"&&s.type==="radio"&&s.name!=null&&r1(a,s),Nm(c,l);var m=Nm(c,s);for(l=0;l<u.length;l+=2){var x=u[l],g=u[l+1];x==="style"?l1(a,g):x==="dangerouslySetInnerHTML"?s1(a,g):x==="children"?pc(a,g):wf(a,x,g,m)}switch(c){case"input":pm(a,s);break;case"textarea":i1(a,s);break;case"select":var v=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?$o(a,!!s.multiple,p,!1):v!==!!s.multiple&&(s.defaultValue!=null?$o(a,!!s.multiple,s.defaultValue,!0):$o(a,!!s.multiple,s.multiple?[]:"",!1))}a[Sc]=s}catch(w){jn(e,e.return,w)}}break;case 6:if(Si(t,e),$i(e),i&4){if(e.stateNode===null)throw Error(Ue(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(w){jn(e,e.return,w)}}break;case 3:if(Si(t,e),$i(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{yc(t.containerInfo)}catch(w){jn(e,e.return,w)}break;case 4:Si(t,e),$i(e);break;case 13:Si(t,e),$i(e),a=e.child,a.flags&8192&&(s=a.memoizedState!==null,a.stateNode.isHidden=s,!s||a.alternate!==null&&a.alternate.memoizedState!==null||(ep=kn())),i&4&&G0(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(dr=(m=dr)||x,Si(t,e),dr=m):Si(t,e),$i(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!x&&e.mode&1)for(nt=e,x=e.child;x!==null;){for(g=nt=x;nt!==null;){switch(v=nt,p=v.child,v.tag){case 0:case 11:case 14:case 15:cc(4,v,v.return);break;case 1:Fo(v,v.return);var j=v.stateNode;if(typeof j.componentWillUnmount=="function"){i=v,r=v.return;try{t=i,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(w){jn(i,r,w)}}break;case 5:Fo(v,v.return);break;case 22:if(v.memoizedState!==null){J0(g);continue}}p!==null?(p.return=v,nt=p):J0(g)}x=x.sibling}e:for(x=null,g=e;;){if(g.tag===5){if(x===null){x=g;try{a=g.stateNode,m?(s=a.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(c=g.stateNode,u=g.memoizedProps.style,l=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=o1("display",l))}catch(w){jn(e,e.return,w)}}}else if(g.tag===6){if(x===null)try{g.stateNode.nodeValue=m?"":g.memoizedProps}catch(w){jn(e,e.return,w)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;x===g&&(x=null),g=g.return}x===g&&(x=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Si(t,e),$i(e),i&4&&G0(e);break;case 21:break;default:Si(t,e),$i(e)}}function $i(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(M2(r)){var i=r;break e}r=r.return}throw Error(Ue(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(pc(a,""),i.flags&=-33);var s=H0(e);Ym(e,s,a);break;case 3:case 4:var l=i.stateNode.containerInfo,c=H0(e);Xm(e,c,l);break;default:throw Error(Ue(161))}}catch(u){jn(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function vy(e,t,r){nt=e,E2(e)}function E2(e,t,r){for(var i=(e.mode&1)!==0;nt!==null;){var a=nt,s=a.child;if(a.tag===22&&i){var l=a.memoizedState!==null||Iu;if(!l){var c=a.alternate,u=c!==null&&c.memoizedState!==null||dr;c=Iu;var m=dr;if(Iu=l,(dr=u)&&!m)for(nt=a;nt!==null;)l=nt,u=l.child,l.tag===22&&l.memoizedState!==null?X0(a):u!==null?(u.return=l,nt=u):X0(a);for(;s!==null;)nt=s,E2(s),s=s.sibling;nt=a,Iu=c,dr=m}W0(e)}else a.subtreeFlags&8772&&s!==null?(s.return=a,nt=s):W0(e)}}function W0(e){for(;nt!==null;){var t=nt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dr||qd(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!dr)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Ai(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&z0(t,s,i);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}z0(t,l,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var x=m.memoizedState;if(x!==null){var g=x.dehydrated;g!==null&&yc(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ue(163))}dr||t.flags&512&&Jm(t)}catch(v){jn(t,t.return,v)}}if(t===e){nt=null;break}if(r=t.sibling,r!==null){r.return=t.return,nt=r;break}nt=t.return}}function J0(e){for(;nt!==null;){var t=nt;if(t===e){nt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,nt=r;break}nt=t.return}}function X0(e){for(;nt!==null;){var t=nt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{qd(4,t)}catch(u){jn(t,r,u)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(u){jn(t,a,u)}}var s=t.return;try{Jm(t)}catch(u){jn(t,s,u)}break;case 5:var l=t.return;try{Jm(t)}catch(u){jn(t,l,u)}}}catch(u){jn(t,t.return,u)}if(t===e){nt=null;break}var c=t.sibling;if(c!==null){c.return=t.return,nt=c;break}nt=t.return}}var yy=Math.ceil,Sd=ba.ReactCurrentDispatcher,Kf=ba.ReactCurrentOwner,xi=ba.ReactCurrentBatchConfig,Rt=0,Jn=null,Mn=null,er=0,Jr=0,Oo=ps(0),Rn=0,_c=null,Vs=0,$d=0,Zf=0,uc=null,Tr=null,ep=0,il=1/0,ma=null,Cd=!1,Qm=null,os=null,Mu=!1,Za=null,kd=0,dc=0,Km=null,Ku=-1,Zu=0;function jr(){return Rt&6?kn():Ku!==-1?Ku:Ku=kn()}function ls(e){return e.mode&1?Rt&2&&er!==0?er&-er:ny.transition!==null?(Zu===0&&(Zu=N1()),Zu):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:A1(e.type)),e):1}function Mi(e,t,r,i){if(50<dc)throw dc=0,Km=null,Error(Ue(185));Dc(e,r,i),(!(Rt&2)||e!==Jn)&&(e===Jn&&(!(Rt&2)&&($d|=r),Rn===4&&Ya(e,er)),Rr(e,i),r===1&&Rt===0&&!(t.mode&1)&&(il=kn()+500,Od&&gs()))}function Rr(e,t){var r=e.callbackNode;nv(e,t);var i=cd(e,e===Jn?er:0);if(i===0)r!==null&&i0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&i0(r),t===1)e.tag===0?ty(Y0.bind(null,e)):G1(Y0.bind(null,e)),Qv(function(){!(Rt&6)&&gs()}),r=null;else{switch(w1(i)){case 1:r=kf;break;case 4:r=v1;break;case 16:r=ld;break;case 536870912:r=y1;break;default:r=ld}r=V2(r,F2.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function F2(e,t){if(Ku=-1,Zu=0,Rt&6)throw Error(Ue(327));var r=e.callbackNode;if(Wo()&&e.callbackNode!==r)return null;var i=cd(e,e===Jn?er:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Ad(e,i);else{t=i;var a=Rt;Rt|=2;var s=R2();(Jn!==e||er!==t)&&(ma=null,il=kn()+500,Os(e,t));do try{by();break}catch(c){O2(e,c)}while(1);Rf(),Sd.current=s,Rt=a,Mn!==null?t=0:(Jn=null,er=0,t=Rn)}if(t!==0){if(t===2&&(a=Cm(e),a!==0&&(i=a,t=Zm(e,a))),t===1)throw r=_c,Os(e,0),Ya(e,i),Rr(e,kn()),r;if(t===6)Ya(e,i);else{if(a=e.current.alternate,!(i&30)&&!Ny(a)&&(t=Ad(e,i),t===2&&(s=Cm(e),s!==0&&(i=s,t=Zm(e,s))),t===1))throw r=_c,Os(e,0),Ya(e,i),Rr(e,kn()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Ue(345));case 2:Is(e,Tr,ma);break;case 3:if(Ya(e,i),(i&130023424)===i&&(t=ep+500-kn(),10<t)){if(cd(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){jr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Mm(Is.bind(null,e,Tr,ma),t);break}Is(e,Tr,ma);break;case 4:if(Ya(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var l=31-Ii(i);s=1<<l,l=t[l],l>a&&(a=l),i&=~s}if(i=a,i=kn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*yy(i/1960))-i,10<i){e.timeoutHandle=Mm(Is.bind(null,e,Tr,ma),i);break}Is(e,Tr,ma);break;case 5:Is(e,Tr,ma);break;default:throw Error(Ue(329))}}}return Rr(e,kn()),e.callbackNode===r?F2.bind(null,e):null}function Zm(e,t){var r=uc;return e.current.memoizedState.isDehydrated&&(Os(e,t).flags|=256),e=Ad(e,t),e!==2&&(t=Tr,Tr=r,t!==null&&ef(t)),e}function ef(e){Tr===null?Tr=e:Tr.push.apply(Tr,e)}function Ny(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],s=a.getSnapshot;a=a.value;try{if(!Di(s(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ya(e,t){for(t&=~Zf,t&=~$d,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ii(t),i=1<<r;e[r]=-1,t&=~i}}function Y0(e){if(Rt&6)throw Error(Ue(327));Wo();var t=cd(e,0);if(!(t&1))return Rr(e,kn()),null;var r=Ad(e,t);if(e.tag!==0&&r===2){var i=Cm(e);i!==0&&(t=i,r=Zm(e,i))}if(r===1)throw r=_c,Os(e,0),Ya(e,t),Rr(e,kn()),r;if(r===6)throw Error(Ue(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Is(e,Tr,ma),Rr(e,kn()),null}function tp(e,t){var r=Rt;Rt|=1;try{return e(t)}finally{Rt=r,Rt===0&&(il=kn()+500,Od&&gs())}}function Hs(e){Za!==null&&Za.tag===0&&!(Rt&6)&&Wo();var t=Rt;Rt|=1;var r=xi.transition,i=Kt;try{if(xi.transition=null,Kt=1,e)return e()}finally{Kt=i,xi.transition=r,Rt=t,!(Rt&6)&&gs()}}function np(){Jr=Oo.current,cn(Oo)}function Os(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yv(r)),Mn!==null)for(r=Mn.return;r!==null;){var i=r;switch(Ef(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&fd();break;case 3:nl(),cn(Fr),cn(mr),Hf();break;case 5:Vf(i);break;case 4:nl();break;case 13:cn(xn);break;case 19:cn(xn);break;case 10:Bf(i.type._context);break;case 22:case 23:np()}r=r.return}if(Jn=e,Mn=e=cs(e.current,null),er=Jr=t,Rn=0,_c=null,Zf=$d=Vs=0,Tr=uc=null,Es!==null){for(t=0;t<Es.length;t++)if(r=Es[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,s=r.pending;if(s!==null){var l=s.next;s.next=a,i.next=l}r.pending=i}Es=null}return e}function O2(e,t){do{var r=Mn;try{if(Rf(),Xu.current=jd,bd){for(var i=vn.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}bd=!1}if(Us=0,Hn=On=vn=null,lc=!1,Ac=0,Kf.current=null,r===null||r.return===null){Rn=1,_c=t,Mn=null;break}e:{var s=e,l=r.return,c=r,u=t;if(t=er,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var m=u,x=c,g=x.tag;if(!(x.mode&1)&&(g===0||g===11||g===15)){var v=x.alternate;v?(x.updateQueue=v.updateQueue,x.memoizedState=v.memoizedState,x.lanes=v.lanes):(x.updateQueue=null,x.memoizedState=null)}var p=F0(l);if(p!==null){p.flags&=-257,O0(p,l,c,s,t),p.mode&1&&E0(s,m,t),t=p,u=m;var j=t.updateQueue;if(j===null){var w=new Set;w.add(u),t.updateQueue=w}else j.add(u);break e}else{if(!(t&1)){E0(s,m,t),rp();break e}u=Error(Ue(426))}}else if(dn&&c.mode&1){var A=F0(l);if(A!==null){!(A.flags&65536)&&(A.flags|=256),O0(A,l,c,s,t),Ff(rl(u,c));break e}}s=u=rl(u,c),Rn!==4&&(Rn=2),uc===null?uc=[s]:uc.push(s),s=l;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var N=w2(s,u,t);_0(s,N);break e;case 1:c=u;var b=s.type,L=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(os===null||!os.has(L)))){s.flags|=65536,t&=-t,s.lanes|=t;var G=b2(s,c,t);_0(s,G);break e}}s=s.return}while(s!==null)}q2(r)}catch(ne){t=ne,Mn===r&&r!==null&&(Mn=r=r.return);continue}break}while(1)}function R2(){var e=Sd.current;return Sd.current=jd,e===null?jd:e}function rp(){(Rn===0||Rn===3||Rn===2)&&(Rn=4),Jn===null||!(Vs&268435455)&&!($d&268435455)||Ya(Jn,er)}function Ad(e,t){var r=Rt;Rt|=2;var i=R2();(Jn!==e||er!==t)&&(ma=null,Os(e,t));do try{wy();break}catch(a){O2(e,a)}while(1);if(Rf(),Rt=r,Sd.current=i,Mn!==null)throw Error(Ue(261));return Jn=null,er=0,Rn}function wy(){for(;Mn!==null;)B2(Mn)}function by(){for(;Mn!==null&&!W5();)B2(Mn)}function B2(e){var t=U2(e.alternate,e,Jr);e.memoizedProps=e.pendingProps,t===null?q2(e):Mn=t,Kf.current=null}function q2(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=py(r,t),r!==null){r.flags&=32767,Mn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Rn=6,Mn=null;return}}else if(r=fy(r,t,Jr),r!==null){Mn=r;return}if(t=t.sibling,t!==null){Mn=t;return}Mn=t=e}while(t!==null);Rn===0&&(Rn=5)}function Is(e,t,r){var i=Kt,a=xi.transition;try{xi.transition=null,Kt=1,jy(e,t,r,i)}finally{xi.transition=a,Kt=i}return null}function jy(e,t,r,i){do Wo();while(Za!==null);if(Rt&6)throw Error(Ue(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ue(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(rv(e,s),e===Jn&&(Mn=Jn=null,er=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Mu||(Mu=!0,V2(ld,function(){return Wo(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=xi.transition,xi.transition=null;var l=Kt;Kt=1;var c=Rt;Rt|=4,Kf.current=null,xy(e,r),T2(r,e),Uv(zm),ud=!!_m,zm=_m=null,e.current=r,vy(r),J5(),Rt=c,Kt=l,xi.transition=s}else e.current=r;if(Mu&&(Mu=!1,Za=e,kd=a),s=e.pendingLanes,s===0&&(os=null),Q5(r.stateNode),Rr(e,kn()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(Cd)throw Cd=!1,e=Qm,Qm=null,e;return kd&1&&e.tag!==0&&Wo(),s=e.pendingLanes,s&1?e===Km?dc++:(dc=0,Km=e):dc=0,gs(),null}function Wo(){if(Za!==null){var e=w1(kd),t=xi.transition,r=Kt;try{if(xi.transition=null,Kt=16>e?16:e,Za===null)var i=!1;else{if(e=Za,Za=null,kd=0,Rt&6)throw Error(Ue(331));var a=Rt;for(Rt|=4,nt=e.current;nt!==null;){var s=nt,l=s.child;if(nt.flags&16){var c=s.deletions;if(c!==null){for(var u=0;u<c.length;u++){var m=c[u];for(nt=m;nt!==null;){var x=nt;switch(x.tag){case 0:case 11:case 15:cc(8,x,s)}var g=x.child;if(g!==null)g.return=x,nt=g;else for(;nt!==null;){x=nt;var v=x.sibling,p=x.return;if(I2(x),x===m){nt=null;break}if(v!==null){v.return=p,nt=v;break}nt=p}}}var j=s.alternate;if(j!==null){var w=j.child;if(w!==null){j.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}nt=s}}if(s.subtreeFlags&2064&&l!==null)l.return=s,nt=l;else e:for(;nt!==null;){if(s=nt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cc(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,nt=N;break e}nt=s.return}}var b=e.current;for(nt=b;nt!==null;){l=nt;var L=l.child;if(l.subtreeFlags&2064&&L!==null)L.return=l,nt=L;else e:for(l=b;nt!==null;){if(c=nt,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:qd(9,c)}}catch(ne){jn(c,c.return,ne)}if(c===l){nt=null;break e}var G=c.sibling;if(G!==null){G.return=c.return,nt=G;break e}nt=c.return}}if(Rt=a,gs(),Ji&&typeof Ji.onPostCommitFiberRoot=="function")try{Ji.onPostCommitFiberRoot(Md,e)}catch{}i=!0}return i}finally{Kt=r,xi.transition=t}}return!1}function Q0(e,t,r){t=rl(r,t),t=w2(e,t,1),e=ss(e,t,1),t=jr(),e!==null&&(Dc(e,1,t),Rr(e,t))}function jn(e,t,r){if(e.tag===3)Q0(e,e,r);else for(;t!==null;){if(t.tag===3){Q0(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(os===null||!os.has(i))){e=rl(r,e),e=b2(t,e,1),t=ss(t,e,1),e=jr(),t!==null&&(Dc(t,1,e),Rr(t,e));break}}t=t.return}}function Sy(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=jr(),e.pingedLanes|=e.suspendedLanes&r,Jn===e&&(er&r)===r&&(Rn===4||Rn===3&&(er&130023424)===er&&500>kn()-ep?Os(e,0):Zf|=r),Rr(e,t)}function $2(e,t){t===0&&(e.mode&1?(t=ju,ju<<=1,!(ju&130023424)&&(ju=4194304)):t=1);var r=jr();e=Na(e,t),e!==null&&(Dc(e,t,r),Rr(e,r))}function Cy(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$2(e,r)}function ky(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ue(314))}i!==null&&i.delete(t),$2(e,r)}var U2;U2=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fr.current)Er=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Er=!1,my(e,t,r);Er=!!(e.flags&131072)}else Er=!1,dn&&t.flags&1048576&&W1(t,xd,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Qu(e,t),e=t.pendingProps;var a=Zo(t,mr.current);Go(t,r),a=Wf(null,t,i,e,a,r);var s=Jf();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(i)?(s=!0,pd(t)):s=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,$f(t),a.updater=Bd,t.stateNode=a,a._reactInternals=t,Bm(t,i,e,r),t=Um(null,t,i,!0,s,r)):(t.tag=0,dn&&s&&Tf(t),Nr(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(Qu(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=Ly(i),e=Ai(i,e),a){case 0:t=$m(null,t,i,e,r);break e;case 1:t=q0(null,t,i,e,r);break e;case 11:t=R0(null,t,i,e,r);break e;case 14:t=B0(null,t,i,Ai(i.type,e),r);break e}throw Error(Ue(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ai(i,a),$m(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ai(i,a),q0(e,t,i,a,r);case 3:e:{if(k2(t),e===null)throw Error(Ue(387));i=t.pendingProps,s=t.memoizedState,a=s.element,Z1(e,t),Nd(t,i,null,r);var l=t.memoizedState;if(i=l.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){a=rl(Error(Ue(423)),t),t=$0(e,t,i,r,a);break e}else if(i!==a){a=rl(Error(Ue(424)),t),t=$0(e,t,i,r,a);break e}else for(Xr=as(t.stateNode.containerInfo.firstChild),Qr=t,dn=!0,zi=null,r=Q1(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(el(),i===a){t=wa(e,t,r);break e}Nr(e,t,i,r)}t=t.child}return t;case 5:return e2(t),e===null&&Fm(t),i=t.type,a=t.pendingProps,s=e!==null?e.memoizedProps:null,l=a.children,Im(i,a)?l=null:s!==null&&Im(i,s)&&(t.flags|=32),C2(e,t),Nr(e,t,l,r),t.child;case 6:return e===null&&Fm(t),null;case 13:return A2(e,t,r);case 4:return Uf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=tl(t,null,i,r):Nr(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ai(i,a),R0(e,t,i,a,r);case 7:return Nr(e,t,t.pendingProps,r),t.child;case 8:return Nr(e,t,t.pendingProps.children,r),t.child;case 12:return Nr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,s=t.memoizedProps,l=a.value,sn(vd,i._currentValue),i._currentValue=l,s!==null)if(Di(s.value,l)){if(s.children===a.children&&!Fr.current){t=wa(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var c=s.dependencies;if(c!==null){l=s.child;for(var u=c.firstContext;u!==null;){if(u.context===i){if(s.tag===1){u=xa(-1,r&-r),u.tag=2;var m=s.updateQueue;if(m!==null){m=m.shared;var x=m.pending;x===null?u.next=u:(u.next=x.next,x.next=u),m.pending=u}}s.lanes|=r,u=s.alternate,u!==null&&(u.lanes|=r),Om(s.return,r,t),c.lanes|=r;break}u=u.next}}else if(s.tag===10)l=s.type===t.type?null:s.child;else if(s.tag===18){if(l=s.return,l===null)throw Error(Ue(341));l.lanes|=r,c=l.alternate,c!==null&&(c.lanes|=r),Om(l,r,t),l=s.sibling}else l=s.child;if(l!==null)l.return=s;else for(l=s;l!==null;){if(l===t){l=null;break}if(s=l.sibling,s!==null){s.return=l.return,l=s;break}l=l.return}s=l}Nr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Go(t,r),a=vi(a),i=i(a),t.flags|=1,Nr(e,t,i,r),t.child;case 14:return i=t.type,a=Ai(i,t.pendingProps),a=Ai(i.type,a),B0(e,t,i,a,r);case 15:return j2(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:Ai(i,a),Qu(e,t),t.tag=1,Or(i)?(e=!0,pd(t)):e=!1,Go(t,r),N2(t,i,a),Bm(t,i,a,r),Um(null,t,i,!0,e,r);case 19:return L2(e,t,r);case 22:return S2(e,t,r)}throw Error(Ue(156,t.tag))};function V2(e,t){return x1(e,t)}function Ay(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,r,i){return new Ay(e,t,r,i)}function ip(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ly(e){if(typeof e=="function")return ip(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jf)return 11;if(e===Sf)return 14}return 2}function cs(e,t){var r=e.alternate;return r===null?(r=gi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ed(e,t,r,i,a,s){var l=2;if(i=e,typeof e=="function")ip(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Lo:return Rs(r.children,a,s,t);case bf:l=8,a|=8;break;case um:return e=gi(12,r,t,a|2),e.elementType=um,e.lanes=s,e;case dm:return e=gi(13,r,t,a),e.elementType=dm,e.lanes=s,e;case hm:return e=gi(19,r,t,a),e.elementType=hm,e.lanes=s,e;case e1:return Ud(r,a,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Kg:l=10;break e;case Zg:l=9;break e;case jf:l=11;break e;case Sf:l=14;break e;case Wa:l=16,i=null;break e}throw Error(Ue(130,e==null?e:typeof e,""))}return t=gi(l,r,t,a),t.elementType=e,t.type=i,t.lanes=s,t}function Rs(e,t,r,i){return e=gi(7,e,i,t),e.lanes=r,e}function Ud(e,t,r,i){return e=gi(22,e,i,t),e.elementType=e1,e.lanes=r,e.stateNode={isHidden:!1},e}function Qh(e,t,r){return e=gi(6,e,null,t),e.lanes=r,e}function Kh(e,t,r){return t=gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Py(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ih(0),this.expirationTimes=Ih(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ih(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function ap(e,t,r,i,a,s,l,c,u){return e=new Py(e,t,r,c,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=gi(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},$f(s),e}function _y(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function H2(e){if(!e)return ds;e=e._reactInternals;e:{if(Js(e)!==e||e.tag!==1)throw Error(Ue(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ue(171))}if(e.tag===1){var r=e.type;if(Or(r))return H1(e,r,t)}return t}function G2(e,t,r,i,a,s,l,c,u){return e=ap(r,i,!0,e,a,s,l,c,u),e.context=H2(null),r=e.current,i=jr(),a=ls(r),s=xa(i,a),s.callback=t??null,ss(r,s,a),e.current.lanes=a,Dc(e,a,i),Rr(e,i),e}function Vd(e,t,r,i){var a=t.current,s=jr(),l=ls(a);return r=H2(r),t.context===null?t.context=r:t.pendingContext=r,t=xa(s,l),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ss(a,t,l),e!==null&&(Mi(e,a,l,s),Ju(e,a,l)),l}function Ld(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function K0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function sp(e,t){K0(e,t),(e=e.alternate)&&K0(e,t)}function zy(){return null}var W2=typeof reportError=="function"?reportError:function(e){console.error(e)};function op(e){this._internalRoot=e}Hd.prototype.render=op.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ue(409));Vd(e,t,null,null)};Hd.prototype.unmount=op.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Hs(function(){Vd(null,e,null,null)}),t[ya]=null}};function Hd(e){this._internalRoot=e}Hd.prototype.unstable_scheduleHydration=function(e){if(e){var t=S1();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xa.length&&t!==0&&t<Xa[r].priority;r++);Xa.splice(r,0,e),r===0&&k1(e)}};function lp(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Z0(){}function Iy(e,t,r,i,a){if(a){if(typeof i=="function"){var s=i;i=function(){var m=Ld(l);s.call(m)}}var l=G2(t,i,e,0,null,!1,!1,"",Z0);return e._reactRootContainer=l,e[ya]=l.current,bc(e.nodeType===8?e.parentNode:e),Hs(),l}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var c=i;i=function(){var m=Ld(u);c.call(m)}}var u=ap(e,0,!1,null,null,!1,!1,"",Z0);return e._reactRootContainer=u,e[ya]=u.current,bc(e.nodeType===8?e.parentNode:e),Hs(function(){Vd(t,u,r,i)}),u}function Wd(e,t,r,i,a){var s=r._reactRootContainer;if(s){var l=s;if(typeof a=="function"){var c=a;a=function(){var u=Ld(l);c.call(u)}}Vd(t,l,e,a)}else l=Iy(r,t,e,a,i);return Ld(l)}b1=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zl(t.pendingLanes);r!==0&&(Af(t,r|1),Rr(t,kn()),!(Rt&6)&&(il=kn()+500,gs()))}break;case 13:Hs(function(){var i=Na(e,1);if(i!==null){var a=jr();Mi(i,e,1,a)}}),sp(e,1)}};Lf=function(e){if(e.tag===13){var t=Na(e,134217728);if(t!==null){var r=jr();Mi(t,e,134217728,r)}sp(e,134217728)}};j1=function(e){if(e.tag===13){var t=ls(e),r=Na(e,t);if(r!==null){var i=jr();Mi(r,e,t,i)}sp(e,t)}};S1=function(){return Kt};C1=function(e,t){var r=Kt;try{return Kt=e,t()}finally{Kt=r}};bm=function(e,t,r){switch(t){case"input":if(pm(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=Fd(i);if(!a)throw Error(Ue(90));n1(i),pm(i,a)}}}break;case"textarea":i1(e,r);break;case"select":t=r.value,t!=null&&$o(e,!!r.multiple,t,!1)}};d1=tp;h1=Hs;var My={usingClientEntryPoint:!1,Events:[Ec,Io,Fd,c1,u1,tp]},Wl={findFiberByHostInstance:Ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dy={bundleType:Wl.bundleType,version:Wl.version,rendererPackageName:Wl.rendererPackageName,rendererConfig:Wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=p1(e),e===null?null:e.stateNode},findFiberByHostInstance:Wl.findFiberByHostInstance||zy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Md=Du.inject(Dy),Ji=Du}catch{}}Zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=My;Zr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lp(t))throw Error(Ue(200));return _y(e,t,null,r)};Zr.createRoot=function(e,t){if(!lp(e))throw Error(Ue(299));var r=!1,i="",a=W2;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=ap(e,1,!1,null,null,r,!1,i,a),e[ya]=t.current,bc(e.nodeType===8?e.parentNode:e),new op(t)};Zr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):(e=Object.keys(e).join(","),Error(Ue(268,e)));return e=p1(t),e=e===null?null:e.stateNode,e};Zr.flushSync=function(e){return Hs(e)};Zr.hydrate=function(e,t,r){if(!Gd(t))throw Error(Ue(200));return Wd(null,e,t,!0,r)};Zr.hydrateRoot=function(e,t,r){if(!lp(e))throw Error(Ue(405));var i=r!=null&&r.hydratedSources||null,a=!1,s="",l=W2;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=G2(t,null,e,1,r??null,a,!1,s,l),e[ya]=t.current,bc(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Hd(t)};Zr.render=function(e,t,r){if(!Gd(t))throw Error(Ue(200));return Wd(null,e,t,!1,r)};Zr.unmountComponentAtNode=function(e){if(!Gd(e))throw Error(Ue(40));return e._reactRootContainer?(Hs(function(){Wd(null,null,e,!1,function(){e._reactRootContainer=null,e[ya]=null})}),!0):!1};Zr.unstable_batchedUpdates=tp;Zr.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Gd(r))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return Wd(e,t,r,!1,i)};Zr.version="18.3.1-next-f1338f8080-20240426";function J2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(J2)}catch(e){console.error(e)}}J2(),Jg.exports=Zr;var Ty=Jg.exports,eg=Ty;lm.createRoot=eg.createRoot,lm.hydrateRoot=eg.hydrateRoot;var Ey={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Fy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Oy=(e,t)=>{const r=re.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:l,children:c,...u},m)=>re.createElement("svg",{ref:m,...Ey,width:a,height:a,stroke:i,strokeWidth:l?Number(s)*24/Number(a):s,className:`lucide lucide-${Fy(e)}`,...u},[...t.map(([x,g])=>re.createElement(x,g)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${e}`,r};var rt=Oy;const tr=rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),tg=rt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),Ry=rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),By=rt("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),X2=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),ng=rt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),al=rt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),es=rt("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),rg=rt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),cp=rt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Y2=rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zn=rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ig=rt("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Tu=rt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),qy=rt("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),$y=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Uy=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),up=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Vy=rt("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),Gs=rt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Hy=rt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),tf=rt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Gy=rt("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Wy=rt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Jy=rt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),ag=rt("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),Ui=rt("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),Xy=rt("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),tc=rt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Yy=rt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),So=rt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Sr=rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Qy=rt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ky=rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Eu=rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Q2=rt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Pd=rt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Zy=rt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),eN=rt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),Fn=rt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),tN=rt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Ro=rt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),nN=rt("Pizza",[["path",{d:"M15 11h.01",key:"rns66s"}],["path",{d:"M11 15h.01",key:"k85uqc"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"m2 16 20 6-6-20A20 20 0 0 0 2 16",key:"e4slt2"}],["path",{d:"M5.71 17.11a17.04 17.04 0 0 1 11.4-11.4",key:"rerf8f"}]]),wr=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),nc=rt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),rN=rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),sg=rt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Qa=rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),K2=rt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),br=rt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),og=rt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),iN=rt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Jd=rt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),lg=rt("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),Fu=rt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),gn=rt("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),aN=rt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),sN=rt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),Wn=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),dp=rt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),cg=rt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Z2=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),_i=rt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ug=rt("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),un=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),oN=rt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function He({className:e,...t}){return n.jsx("div",{className:`rounded-lg border bg-white text-card-foreground shadow-sm ${e}`,...t})}function ct({className:e,...t}){return n.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${e}`,...t})}function ut({className:e,...t}){return n.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...t})}function Je({className:e,...t}){return n.jsx("div",{className:`p-6 pt-0 ${e}`,...t})}function lN({temperatures:e=[],cleaning:t=[],staff:r=[],products:i=[],currentUser:a}){const s=e.filter(u=>u.status==="ok").length,l=e.filter(u=>u.status==="danger").length,c=t.filter(u=>!u.completed).length;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(He,{children:n.jsx(Je,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Zn,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:s}),n.jsx("p",{className:"text-sm text-gray-600",children:"Temperature OK"})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(tr,{className:"h-8 w-8 text-red-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:l}),n.jsx("p",{className:"text-sm text-gray-600",children:"Problemi Temp."})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Fn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pulizie Pending"})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(cp,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Prodotti"})]})]})})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{children:["Benvenuto, ",a==null?void 0:a.name,"!"]})}),n.jsxs(Je,{children:[n.jsx("p",{className:"text-gray-600",children:"Dashboard Business HACCP Manager"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Ruolo: ",(a==null?void 0:a.role)==="admin"?"Amministratore":"Dipendente","  Reparto: ",a==null?void 0:a.department]})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5 text-blue-600"})," Nuove Funzionalit HACCP"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Validazione Automatica Prodotti-Frigoriferi"}),n.jsx("p",{className:"text-sm text-blue-700",children:"L'applicazione ora verifica automaticamente la compatibilit tra categorie di prodotti e punti di conservazione, prevenendo errori di conservazione e migliorando la sicurezza alimentare."})]}),n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Gestione Categorie Personalizzate"}),n.jsx("p",{className:"text-sm text-green-700",children:"Puoi creare nuove categorie di prodotti direttamente dall'interfaccia, rendendo il sistema pi flessibile e adattabile alle tue esigenze specifiche."})]}),n.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Prevenzione Contaminazioni"}),n.jsx("p",{className:"text-sm text-purple-700",children:"I frigoriferi possono essere dedicati a categorie specifiche, riducendo il rischio di contaminazioni incrociate e migliorando la tracciabilit."})]})]})})]})]})}const cN={default:"bg-primary-500 text-white hover:bg-primary-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100",link:"text-primary-500 underline-offset-4 hover:underline"},uN={default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"};function pe({className:e,variant:t="default",size:r="default",asChild:i=!1,...a}){const s=i?"span":"button";return n.jsx(s,{className:`
        inline-flex items-center justify-center rounded-md text-sm font-medium
        ring-offset-background transition-colors focus-visible:outline-none
        focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2
        disabled:pointer-events-none disabled:opacity-50
        ${cN[t]}
        ${uN[r]}
        ${e}
      `,...a})}function st({className:e,type:t,...r}){return n.jsx("input",{type:t,className:`
        flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2
        text-sm ring-offset-background file:border-0 file:bg-transparent
        file:text-sm file:font-medium placeholder:text-gray-500
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500
        focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50
        ${e}
      `,...r})}function et({className:e,...t}){return n.jsx("label",{className:`
        text-sm font-medium leading-none peer-disabled:cursor-not-allowed
        peer-disabled:opacity-70 ${e}
      `,...t})}function hc({label:e="Range Temperatura (C)",minValue:t,maxValue:r,onMinChange:i,onMaxChange:a,minPlaceholder:s="min",maxPlaceholder:l="max",required:c=!1,showValidation:u=!0,showSuggestions:m=!0,compactMode:x=!1,className:g="",id:v="temperature-range"}){const[p,j]=re.useState(!1),w=parseFloat(t),A=parseFloat(r),N=t&&r&&!isNaN(w)&&!isNaN(A),b=N&&w<A,L=(ne,ce)=>{const V=(ne+ce)/2;return V<=-13.5?"Surgelato":V>=15?"Temperatura Ambiente":"Refrigerato"},G=(ne,ce)=>{const V=(ne+ce)/2;return V<0||V>8?"danger":V>=6&&V<=8?"warning":"ok"};return x?n.jsxs("div",{className:g,children:[n.jsxs(et,{htmlFor:v,children:[e," ",c&&"*"]}),n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border",children:[n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"da"}),n.jsx(st,{id:`${v}-min`,type:"number",step:"0.1",value:t||"",onChange:i,placeholder:s,className:"w-20 text-center font-medium text-sm",required:c}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"a"}),n.jsx(st,{id:`${v}-max`,type:"number",step:"0.1",value:r||"",onChange:a,placeholder:l,className:"w-20 text-center font-medium text-sm",required:c}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"})]}),u&&N&&!b&&n.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" Min < Max"}),m&&n.jsx("div",{className:"mt-1 text-xs text-gray-500",children:" Carne (2-4C), Pesce (0-2C), Surgelati (-18C)"})]}):n.jsxs("div",{className:g,children:[n.jsxs(et,{htmlFor:v,children:[e," ",c&&"*"]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"da"}),n.jsx(st,{id:`${v}-min`,type:"number",step:"0.1",value:t||"",onChange:i,placeholder:s,className:"w-24 text-center font-medium",required:c}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"a"}),n.jsx(st,{id:`${v}-max`,type:"number",step:"0.1",value:r||"",onChange:a,placeholder:l,className:"w-24 text-center font-medium",required:c}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"})]}),u&&N&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("button",{type:"button",onClick:()=>j(!p),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[p?n.jsx(Uy,{className:"h-4 w-4"}):n.jsx($y,{className:"h-4 w-4"}),n.jsx(Sr,{className:"h-4 w-4"}),"Dettagli temperatura"]}),p&&n.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Tipo: "}),n.jsx("span",{children:L(w,A)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Stato: "}),n.jsx("span",{children:G(w,A)==="ok"?" Normale":G(w,A)==="warning"?" Attenzione":" Critica"})]}),!b&&n.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" La temperatura minima deve essere inferiore alla massima"})]})})]}),m&&n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:" Suggerimenti: Carne fresca (2-4C), Pesce (0-2C), Surgelati (-18C), Ambiente (15-25C)"})]})}function dN({cleaning:e,setCleaning:t,temperatures:r,setTemperatures:i,currentUser:a,refrigerators:s=[],setRefrigerators:l}){const c=e||[],u=r||[],[m,x]=re.useState({task:"",assignee:"",frequency:""}),[g,v]=re.useState({location:"",temperatureMin:"",temperatureMax:""}),[p,j]=re.useState("daily");re.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(c))},[c]),re.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(u))},[u]);const w=(E,q)=>{const ae=(E+q)/2;return ae<0||ae>8?"danger":ae>=6&&ae<=8?"warning":"ok"},A=E=>{if(E.preventDefault(),!m.task||!m.assignee||!m.frequency){alert("Compila tutti i campi richiesti");return}const q={id:Date.now().toString(),task:m.task,assignee:m.assignee,frequency:m.frequency,date:new Date().toLocaleDateString("it-IT"),completed:!1,completedAt:null,completedBy:null},ae=[...c,q];t(ae),localStorage.setItem("haccp-cleaning",JSON.stringify(ae)),x({task:"",assignee:"",frequency:""})},N=E=>{var de;if(E.preventDefault(),!g.temperature||!g.refrigeratorId){alert("Compila tutti i campi richiesti");return}const q=parseFloat(g.temperature),ae=parseFloat(g.temperatureMin),ue=parseFloat(g.temperatureMax);if(isNaN(q)||isNaN(ae)||isNaN(ue)){alert("Inserisci valori numerici validi per le temperature");return}const we={id:Date.now().toString(),temperature:q,temperatureMin:ae,temperatureMax:ue,refrigeratorId:g.refrigeratorId,refrigeratorName:((de=s.find(ie=>ie.id===g.refrigeratorId))==null?void 0:de.name)||"Sconosciuto",date:new Date().toLocaleString("it-IT"),status:w(ae,ue),recordedBy:(a==null?void 0:a.name)||"Unknown"},Q=[...u,we];i(Q),localStorage.setItem("haccp-temperatures",JSON.stringify(Q)),v({temperature:"",refrigeratorId:"",temperatureMin:"",temperatureMax:""})},b=E=>{const q=c.map(ae=>ae.id===E?{...ae,completed:!ae.completed,completedAt:ae.completed?null:new Date().toLocaleString("it-IT"),completedBy:ae.completed?null:(a==null?void 0:a.name)||"Unknown"}:ae);t(q),localStorage.setItem("haccp-cleaning",JSON.stringify(q))},L=E=>{const q=c.filter(ae=>ae.id!==E);t(q),localStorage.setItem("haccp-cleaning",JSON.stringify(q))},G=c.filter(E=>!E.completed),ne=c.filter(E=>E.completed),V=(()=>{const E=new Date,q=new Date(E.getFullYear(),E.getMonth(),E.getDate());return c.filter(ae=>{if(ae.completed)return!1;const ue=new Date(ae.date.split("/").reverse().join("-"));switch(ae.frequency){case"daily":const we=new Date(q);return we.setDate(we.getDate()-1),ue<=we;case"weekly":const Q=new Date(q);return Q.setDate(Q.getDate()-7),ue<=Q;case"monthly":const de=new Date(q);return de.setMonth(de.getMonth()-1),ue<=de;case"yearly":const ie=new Date(q);return ie.setFullYear(ie.getFullYear()-1),ue<=ie;default:const ze=new Date(q);return ze.setDate(ze.getDate()-7),ue<=ze}})})(),O=(G||[]).filter(E=>E.frequency==="daily"),J=(G||[]).filter(E=>E.frequency==="weekly"),ee=(G||[]).filter(E=>E.frequency==="monthly"),_=(G||[]).filter(E=>E.frequency==="yearly"),D=(a==null?void 0:a.role)==="admin";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Jd,{className:"h-5 w-5"}),"Nuove Attivit / Mansioni"]})}),n.jsx(Je,{children:n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"task",children:"Attivit"}),n.jsx(st,{id:"task",placeholder:"Es: Pulizia frigorifero, Sanificazione piano lavoro...",value:m.task,onChange:E=>x({...m,task:E.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"assignee",children:"Assegnato a"}),n.jsx(st,{id:"assignee",placeholder:"Nome del responsabile",value:m.assignee,onChange:E=>x({...m,assignee:E.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"frequency",children:"Frequenza"}),n.jsxs("select",{id:"frequency",value:m.frequency,onChange:E=>x({...m,frequency:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Seleziona Frequenza --"}),n.jsx("option",{value:"daily",children:"Giornalmente"}),n.jsx("option",{value:"weekly",children:"Settimanalmente"}),n.jsx("option",{value:"monthly",children:"Mensilmente"}),n.jsx("option",{value:"yearly",children:"Annualmente"}),(a==null?void 0:a.role)==="admin"&&n.jsx("option",{value:"all",children:"Tutti"})]})]})]}),n.jsx(pe,{type:"submit",className:"w-full",children:"Aggiungi Attivit"})]})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{children:["Attivit da Svolgere (",G.length,")"]})}),n.jsx(Je,{children:G.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Zn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{children:"Nessuna attivit da svolgere"}),n.jsx("p",{className:"text-sm",children:"Tutte le attivit sono completate!"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>j("daily"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="daily"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Giornaliere (",O.length,")"]}),n.jsxs("button",{onClick:()=>j("weekly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="weekly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Settimanali (",J.length,")"]}),n.jsxs("button",{onClick:()=>j("monthly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="monthly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Mensili (",ee.length,")"]}),n.jsxs("button",{onClick:()=>j("yearly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="yearly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Annuali (",_.length,")"]}),(a==null?void 0:a.role)==="admin"&&n.jsxs("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${p==="all"?"bg-white text-gray-700 border-2 border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tutti (",G.length,")"]})]}),n.jsx("div",{className:"space-y-3",children:(()=>{let E=[];switch(p){case"daily":E=O;break;case"weekly":E=J;break;case"monthly":E=ee;break;case"yearly":E=_;break;case"all":E=G;break;default:E=O}return E.map(q=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium",children:q.task}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Assegnato a: ",q.assignee,"  ",q.date]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{size:"sm",onClick:()=>b(q.id),className:"bg-green-600 hover:bg-green-700 p-2 md:p-1",children:[n.jsx(Zn,{className:"h-6 w-6 md:h-4 md:w-4 mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Completata"})]}),D&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>L(q.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:n.jsx(Wn,{className:"h-6 w-6 md:h-4 md:w-4"})})]})]},q.id))})()})]})})]}),ne.length>0&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:["Attivit Completate (",ne.length,")",D&&n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>{confirm("Sei sicuro di voler eliminare tutte le attivit completate? Questa azione non pu essere annullata.")&&t(c.filter(E=>!E.completed))},className:"text-red-600 hover:text-red-700",children:[n.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Elimina Tutte"]})]})}),n.jsx(Je,{children:n.jsx("div",{className:"space-y-3",children:ne.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium line-through",children:E.task}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Assegnato a: ",E.assignee,"  Completata: ",E.completedAt,E.completedBy&&n.jsxs("span",{className:"ml-2 text-blue-600",children:[" Completata da: ",E.completedBy]})]})]}),D&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>L(E.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:n.jsx(Wn,{className:"h-6 w-6 md:h-4 md:w-4"})})]},E.id))})})]}),n.jsxs(He,{children:[n.jsxs(ct,{children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(gn,{className:"h-5 w-5"}),"Registra Temperatura Frigorifero/Freezer"]}),a&&n.jsxs("p",{className:"text-sm text-gray-600",children:["Registrando come: ",n.jsx("span",{className:"font-medium",children:a.name})," (",a.department,")"]})]}),n.jsx(Je,{children:n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"temp-location",children:"Frigorifero / Freezer"}),s.length===0?n.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:n.jsx("p",{className:"text-sm text-yellow-800",children:'Nessun punto di conservazione registrato. Aggiungi prima un punto di conservazione nella sezione "Punti di Conservazione".'})}):n.jsxs("select",{id:"temp-location",value:g.location,onChange:E=>v({...g,location:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Seleziona Frigorifero/Freezer --"}),s.map(E=>n.jsxs("option",{value:E.name,children:[E.name," (",E.location||"Posizione non specificata",")"]},E.id))]})]}),n.jsx("div",{children:n.jsx(hc,{label:"Range Temperatura (C)",minValue:g.temperatureMin,maxValue:g.temperatureMax,onMinChange:E=>v({...g,temperatureMin:E.target.value}),onMaxChange:E=>v({...g,temperatureMax:E.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temp-temperature-range"})})]}),n.jsxs(pe,{type:"submit",className:"w-full md:w-auto",disabled:s.length===0,children:[n.jsx(gn,{className:"mr-2 h-4 w-4"}),"Registra Temperatura"]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni da Svolgere"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:G.length})]}),n.jsx(up,{className:"h-10 w-10 md:h-8 md:w-8 text-yellow-500"})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Completate"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:ne.length})]}),n.jsx(Zn,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Mancate"}),n.jsx("p",{className:`text-2xl font-bold ${V.length>0?"text-red-600":"text-green-600"}`,children:V.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(ultimi 7 giorni)"})]}),V.length>0?n.jsx(tr,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"}):n.jsx(Zn,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Temperature da Monitorare"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.filter(E=>E.status==="danger"||E.status==="warning").length})]}),n.jsx(tr,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"})]})})})]})]})}const dg=[{food_item:"Carne fresca (bovino/suino/ovino)",conservation_category:"refrigerated",temp_celsius:"2-7C",temp_range:{min:2,max:7},notes:"Offal a 2-3C; dopo ispezione va raffreddata",legal_reference:"Reg. 853/2004, All. III, Sez. I, Cap. VII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Frattaglie (offal)",conservation_category:"refrigerated",temp_celsius:"1-3C",temp_range:{min:1,max:3},notes:"Applicare stesso schema trasporto/stoccaggio carni",legal_reference:"Reg. 853/2004, All. III, Sez. I, Cap. VII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Carne di pollame fresca",conservation_category:"refrigerated",temp_celsius:"2-4C",temp_range:{min:2,max:4},notes:"Valore operativo coerente con requisiti per lavorazione/macinati",legal_reference:"Reg. 853/2004, All. III, Sez. V, Cap. III",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Carni macinate (tutte)",conservation_category:"refrigerated",temp_celsius:"0-2C",temp_range:{min:0,max:2},notes:"Dopo produzione; mantenere in trasporto/stoccaggio",legal_reference:"Reg. 853/2004, All. III, Sez. V, Cap. III",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Preparazioni di carne (non macinate)",conservation_category:"refrigerated",temp_celsius:"2-4C",temp_range:{min:2,max:4},notes:"Dopo produzione; mantenere in trasporto/stoccaggio",legal_reference:"Reg. 853/2004, All. III, Sez. V, Cap. III",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Carni (tutte)  surgelate",conservation_category:"frozen",temp_celsius:"-18C",temp_range:{min:-18,max:-18},notes:"Non ricongelare dopo decongelamento",legal_reference:"Direttiva 89/108/CEE (surgelati)",reference_link:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108"},{food_item:"Pesce fresco",conservation_category:"refrigerated",temp_celsius:"0-2C",temp_range:{min:0,max:2},notes:"Vicina al ghiaccio in fusione; tenere separata l'acqua di fusione",legal_reference:"Reg. 853/2004, All. III, Sez. VIII, Cap. VII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Prodotti della pesca surgelati",conservation_category:"frozen",temp_celsius:"-18C",temp_range:{min:-18,max:-18},notes:"Ammesse brevi fluttuazioni +3C nel trasporto",legal_reference:"Reg. 853/2004, All. III, Sez. VIII, Cap. VII-VIII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Crostacei/molluschi cotti e refrigerati",conservation_category:"refrigerated",temp_celsius:"0-2C",temp_range:{min:0,max:2},notes:"Vicina al ghiaccio in fusione; raffreddare al pi presto",legal_reference:"Reg. 853/2004, All. III, Sez. VIII, Cap. VII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Pesce per consumo crudo (sushi, marinati)",conservation_category:"frozen",temp_celsius:"-20C per 24h O -35C per 15h",temp_range:{min:-35,max:-20},notes:"Trattamento di bonifica parassiti",legal_reference:"Reg. 853/2004, All. III, Sez. VIII, Cap. III, Parte D",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Latte crudo (accettazione in stabilimento)",conservation_category:"refrigerated",temp_celsius:"2-6C",temp_range:{min:2,max:6},notes:"Pu restare >6C se lavorato subito/entro 4h",legal_reference:"Reg. 853/2004, All. III, Sez. IX, Cap. II",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Ovoprodotti (liquidi)",conservation_category:"refrigerated",temp_celsius:"4",notes:"Max 48h a 4C prima della trasformazione, se non stabilizzati",legal_reference:"Reg. 853/2004, All. III, Sez. X, Cap. II-III",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Uova in guscio",conservation_category:"ambient",temp_celsius:"temperatura idonea e costante",notes:"Evitare sbalzi termici; proteggere da sole/odori",legal_reference:"Reg. 853/2004, All. III, Sez. X, Cap. I",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Piatti pronti caldi (hot holding)",conservation_category:"hot-holding",temp_celsius:"6065",notes:"Servizio caldo: mantenere +60C",legal_reference:"DPR 327/80 Art. 31 (riepiloghi ASL)",reference_link:"https://sian.aulss9.veneto.it/Temperatura-di-conservazione"},{food_item:"Alimenti facilmente deperibili (generico)",conservation_category:"refrigerated",temp_celsius:"4",notes:"Valore guida storico nazionale",legal_reference:"DPR 327/80 Art. 32 (riepiloghi)",reference_link:"https://www.istitutosurgelati.it/wp-content/uploads/2016/05/temperature-prodotti-alimentari.pdf"},{food_item:"Frutta e verdura (non RTE)",conservation_category:"ambient",temp_celsius:"secondo etichetta/merceologia",notes:"Rispettare indicazioni del produttore",legal_reference:"Reg. 852/2004 (principi generali + etichetta)",reference_link:"https://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=OJ:L:2004:139:0001:0054:it:PDF"},{food_item:"Insalate pronte al consumo (IV gamma)",conservation_category:"refrigerated",temp_celsius:"45",notes:"Spesso etichetta impone 5C",legal_reference:"Etichetta del produttore + prassi ASL",reference_link:"https://www.frareg.com/it/newsqualita/temperatura-frigo-haccp-come-conservare-gli-alimenti/"},{food_item:"Prodotti surgelati (tutti)",conservation_category:"frozen",temp_celsius:"-18",notes:"Catena del freddo continua",legal_reference:"Direttiva 89/108/CEE (surgelati)",reference_link:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108"},{food_item:"Mozzarella di Bufala",conservation_category:"refrigerated",temp_celsius:"4-5",notes:"Formaggio fresco, mantenere umidit",legal_reference:"Reg. 853/2004 + DPR 327/80",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Parmigiano Reggiano",conservation_category:"ambient",temp_celsius:"15-18",notes:"Formaggio stagionato, ambiente fresco e asciutto",legal_reference:"Reg. 853/2004 + DPR 327/80",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Prosciutto Crudo",conservation_category:"refrigerated",temp_celsius:"2-4",notes:"Salume stagionato, evitare condensa",legal_reference:"Reg. 853/2004 + DPR 327/80",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Salmone",conservation_category:"refrigerated",temp_celsius:"0-2",notes:"Pesce fresco, vicino al ghiaccio",legal_reference:"Reg. 853/2004, All. III, Sez. VIII",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Pesce Surgelato",conservation_category:"frozen",temp_celsius:"-18",notes:"Catena del freddo continua, non ricongelare",legal_reference:"Direttiva 89/108/CEE (surgelati)",reference_link:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108"},{food_item:"Prodotti della pesca destinati al consumo crudo",conservation_category:"frozen",temp_celsius:"-20 per 24h O -35 per 15h",notes:"Trattamento di bonifica parassiti obbligatorio",legal_reference:"Reg. 853/2004, All. III, Sez. VIII, Cap. III, Parte D",reference_link:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853"},{food_item:"Insalate pronte al consumo (IV gamma)",conservation_category:"refrigerated",temp_celsius:"45",notes:"Spesso etichetta impone 5C",legal_reference:"Etichetta del produttore + prassi ASL",reference_link:"https://www.frareg.com/it/newsqualita/temperatura-frigo-haccp-come-conservare-gli-alimenti/"},{food_item:"Frutta e verdura (non RTE)",conservation_category:"ambient",temp_celsius:"secondo etichetta/merceologia",notes:"Rispettare indicazioni del produttore",legal_reference:"Reg. 852/2004 (principi generali + etichetta)",reference_link:"https://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=OJ:L:2004:139:0001:0054:it:PDF"}],ex=e=>{const t=e.toLowerCase().trim(),r=dg.filter(i=>i.food_item.toLowerCase().includes(t)||t.includes(i.food_item.toLowerCase().split(" ")[0])||t.includes(i.food_item.toLowerCase().split(" ")[1]));if(r.length===0){const i={latticini:["latte","formaggio","mozzarella","parmigiano","ricotta"],carni:["carne","salume","prosciutto","salame","bresaola"],pesce_fresco:["pesce","salmone","branzino","vongole"],pesce_surgelato:["pesce surgelato","gamberi surgelati"],surgelati:["surgelato","gelato","spinaci surgelati"],verdure:["verdura","insalata","pomodoro","zucchina"],frutta:["frutta","mela","arancia","limone"],ambiente:["biscotti","crackers","pane","scatolame","pasta secca","riso","farina"]};for(const[a,s]of Object.entries(i))if(s.some(l=>t.includes(l)))return dg.filter(c=>tx(c.food_item)===a)}return r},tx=e=>{const t=e.toLowerCase();return t.includes("carne")||t.includes("salume")||t.includes("prosciutto")?"carni":t.includes("pesce")&&t.includes("surgelato")?"pesce_surgelato":t.includes("pesce")||t.includes("vongole")||t.includes("molluschi")?"pesce_fresco":t.includes("surgelato")||t.includes("gelato")?"surgelati":t.includes("latte")||t.includes("formaggio")||t.includes("mozzarella")?"latticini":t.includes("verdura")||t.includes("insalata")||t.includes("pomodoro")?"verdure":t.includes("frutta")||t.includes("mela")||t.includes("arancia")?"frutta":t.includes("pasta")||t.includes("riso")||t.includes("farina")?"dispensa":t.includes("olio")||t.includes("aceto")||t.includes("spezie")?"condimenti":t.includes("biscotti")||t.includes("crackers")||t.includes("pane")||t.includes("scatolame")?"ambiente":"altro"},zc=e=>({latticini:{min:4,max:6,unit:"C",type:"refrigerated"},carni:{min:2,max:4,unit:"C",type:"refrigerated"},pesce_fresco:{min:0,max:2,unit:"C",type:"refrigerated"},pesce_surgelato:{min:-18,max:-18,unit:"C",type:"frozen"},surgelati:{min:-18,max:-18,unit:"C",type:"frozen"},verdure:{min:6,max:8,unit:"C",type:"refrigerated"},frutta:{min:6,max:8,unit:"C",type:"refrigerated"},dispensa:{min:15,max:25,unit:"C",type:"ambient"},condimenti:{min:15,max:25,unit:"C",type:"ambient"},ambiente:{min:15,max:25,unit:"C",type:"ambient"}})[e]||{min:4,max:8,unit:"C",type:"refrigerated"},hN=(e,t)=>{const r=ex(e);if(r.length===0)return null;const i=r[0],a=tx(i.food_item),s=zc(a);let l=null,c=-1;return t.forEach(u=>{const m=parseFloat(u.setTemperature);if(isNaN(m))return;let x=0;s.type==="frozen"&&m<=-13.5?x+=100-Math.abs(m-s.min):s.type==="refrigerated"&&m>=-2.5&&m<=14?x+=100-Math.abs(m-(s.min+s.max)/2):s.type==="ambient"&&m>=15&&m<=25&&(x+=100-Math.abs(m-20)),u.dedicatedTo===a&&(x+=50),x>c&&(c=x,l=u)}),{refrigerator:l,suggestions:r,optimalTemperature:s,score:c}},_s=[{id:"latticini",name:"Latticini e Formaggi",description:"Latte, formaggi freschi e stagionati"},{id:"carni",name:"Carni e Salumi",description:"Carni crude, salumi, pollame"},{id:"verdure",name:"Verdure e Ortaggi",description:"Verdure fresche, ortaggi, insalate"},{id:"frutta",name:"Frutta Fresca",description:"Frutta fresca di stagione"},{id:"pesce_fresco",name:"Pesce Fresco",description:"Pesce fresco, molluschi, crostacei"},{id:"pesce_surgelato",name:"Pesce Surgelato",description:"Pesce e prodotti della pesca surgelati"},{id:"surgelati",name:"Surgelati",description:"Tutti i prodotti surgelati"},{id:"dispensa",name:"Dispensa Secca",description:"Pasta, riso, farina, conserve"},{id:"condimenti",name:"Oli e Condimenti",description:"Oli, aceti, spezie, salse"},{id:"hot_holding",name:"Mantenimento Caldo",description:"Piatti pronti caldi, mantenuti a temperatura"},{id:"ambiente",name:"Temperatura Ambiente",description:"Prodotti conservati a temperatura ambiente (15-25C)"},{id:"altro",name:"Altro",description:"Altre categorie di prodotti"}];function mN({temperatures:e,setTemperatures:t,currentUser:r,refrigerators:i,setRefrigerators:a}){var te,me,xe;const[s,l]=re.useState(!1),[c,u]=re.useState(!1),[m,x]=re.useState(null),[g,v]=re.useState({name:"",setTemperatureMin:"",setTemperatureMax:"",location:"",dedicatedTo:"",nextMaintenance:""}),[p,j]=re.useState(""),[w,A]=re.useState(null),[N,b]=re.useState(!1),[L,G]=re.useState([]),[ne,ce]=re.useState(!1),[V,O]=re.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:""}),J=[..._s,...L];re.useEffect(()=>{const C=localStorage.getItem("customStorageCategories");if(C)try{G(JSON.parse(C))}catch(K){console.error("Errore nel caricamento delle categorie personalizzate:",K)}},[]),re.useEffect(()=>{localStorage.setItem("customStorageCategories",JSON.stringify(L))},[L]);const ee=()=>{if(!V.name.trim()||!V.description.trim()){alert("Nome e descrizione sono obbligatori");return}if(V.temperatureMin&&V.temperatureMax){const K=parseFloat(V.temperatureMin),R=parseFloat(V.temperatureMax);if(isNaN(K)||isNaN(R)){alert("Inserisci temperature valide");return}if(K>=R){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}}const C={id:`custom_${Date.now()}`,name:V.name.trim(),description:V.description.trim(),temperatureMin:V.temperatureMin?parseFloat(V.temperatureMin):null,temperatureMax:V.temperatureMax?parseFloat(V.temperatureMax):null,temperatureRange:V.temperatureMin&&V.temperatureMax?`${V.temperatureMin}-${V.temperatureMax}C`:"",notes:V.notes.trim(),isCustom:!0,createdAt:new Date().toISOString()};G(K=>{const R=[...K,C];return console.log(" Categorie aggiornate:",R),R}),O({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:""}),ce(!1),alert(`Categoria "${C.name}" aggiunta con successo!`)},_=C=>{confirm("Sei sicuro di voler eliminare questa categoria? I frigoriferi che la utilizzano non avranno pi una categoria assegnata.")&&(a(K=>K.map(R=>R.dedicatedTo===C?{...R,dedicatedTo:""}:R)),G(K=>K.filter(R=>R.id!==C)))},D=C=>{let K=0;if(typeof C=="object"&&C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(typeof C=="string"){const R=C.replace("C","").trim();K=parseFloat(R)}else typeof C=="number"&&(K=C);return isNaN(K)?"N/A":K<-13.5&&K>=-80?"Abbattitore":K<-2.5&&K>=-13.5?"Freezer":K>=-2.5&&K<=0||K>0&&K<=14?"Frigo":K>=15&&K<=25?"Ambiente":"N/A"},E=C=>{A(C),b(!0)},q=C=>e.filter(K=>K.location.toLowerCase().includes(C.name.toLowerCase())).sort((K,R)=>new Date(R.timestamp)-new Date(K.timestamp)),ae=C=>{var Re;if(C.preventDefault(),!g.name.trim()||!g.setTemperatureMin.trim()||!g.setTemperatureMax.trim())return;const K=i.find(Ne=>Ne.name.toLowerCase()===g.name.trim().toLowerCase());if(K){alert(`Un punto di conservazione con questo nome esiste gi: "${K.name}" (creato il ${new Date(K.createdAt).toLocaleDateString("it-IT")}). Scegli un nome diverso.`);return}const R=parseFloat(g.setTemperatureMin),he=parseFloat(g.setTemperatureMax);if(isNaN(R)||isNaN(he)||R>=he){alert("Inserisci un range di temperatura valido (min < max)");return}if(g.dedicatedTo&&g.dedicatedTo!=="altro"){const Ne=zc(g.dedicatedTo),Y=(R+he)/2;if(Math.abs(Y-(Ne.min+Ne.max)/2)>5){const Qe=(Re=_s.find(ge=>ge.id===g.dedicatedTo))==null?void 0:Re.name;if(!confirm(` ATTENZIONE: Temperatura non ottimale!

Hai impostato: ${R}-${he}C
Temperatura ottimale per ${Qe}: ${Ne.min}-${Ne.max}C

Questa temperatura potrebbe non essere adatta per la conservazione ottimale degli alimenti di questa categoria.

Vuoi continuare comunque?`))return}}const Ce={id:Date.now(),name:g.name.trim(),setTemperatureMin:R,setTemperatureMax:he,setTemperature:`${R}-${he}C`,location:g.location.trim(),dedicatedTo:g.dedicatedTo.trim(),nextMaintenance:g.nextMaintenance.trim(),createdAt:new Date().toISOString(),createdBy:(r==null?void 0:r.name)||"Unknown"};a([...i,Ce]),v({name:"",setTemperatureMin:"",setTemperatureMax:"",location:"",dedicatedTo:"",nextMaintenance:""}),l(!1)},ue=C=>{confirm("Sei sicuro di voler eliminare questo punto di conservazione?")&&a(i.filter(K=>K.id!==C))},we=C=>{x(C);let K="",R="";if(C.setTemperatureMin&&C.setTemperatureMax)K=C.setTemperatureMin.toString(),R=C.setTemperatureMax.toString();else if(C.setTemperature){const he=parseFloat(C.setTemperature);isNaN(he)||(K=he.toString(),R=he.toString())}v({name:C.name,setTemperatureMin:K,setTemperatureMax:R,location:C.location||"",dedicatedTo:C.dedicatedTo||"",nextMaintenance:C.nextMaintenance||""}),u(!0)},Q=C=>{var Re,Ne;if(C.preventDefault(),!g.name.trim()||!g.setTemperatureMin.trim()||!g.setTemperatureMax.trim())return;if(i.find(Y=>Y.id!==m.id&&Y.name.toLowerCase()===g.name.trim().toLowerCase())){alert("Un punto di conservazione con questo nome esiste gi. Scegli un nome diverso.");return}const R=parseFloat(g.setTemperatureMin),he=parseFloat(g.setTemperatureMax);if(isNaN(R)||isNaN(he)||R>=he){alert("Inserisci un range di temperatura valido (min < max)");return}if(g.dedicatedTo&&g.dedicatedTo!=="altro"){const Y=zc(g.dedicatedTo);if(R<=Y.max&&he>=Y.min||Y.min<=he&&Y.max>=R){if(Math.abs(R-Y.min)>2||Math.abs(he-Y.max)>2){const Qe=(Ne=_s.find(ge=>ge.id===g.dedicatedTo))==null?void 0:Ne.name;if(!confirm(` ATTENZIONE: Temperatura non ottimale!

Hai impostato: ${R}-${he}C
Temperatura ottimale per ${Qe}: ${Y.min}-${Y.max}C

Questa temperatura  compatibile ma potrebbe non essere ideale per la conservazione ottimale.

Vuoi continuare comunque?`))return}}else{const Qe=(Re=_s.find(ge=>ge.id===g.dedicatedTo))==null?void 0:Re.name;if(!confirm(` ERRORE: Temperatura INCOMPATIBILE!

Hai impostato: ${R}-${he}C
Temperatura ottimale per ${Qe}: ${Y.min}-${Y.max}C

Questo range di temperatura NON  adatto per la conservazione degli alimenti di questa categoria.

Vuoi continuare comunque? (Non raccomandato)`))return}}const Ce={...m,name:g.name.trim(),setTemperatureMin:R,setTemperatureMax:he,setTemperature:`${R}-${he}C`,location:g.location.trim(),dedicatedTo:g.dedicatedTo.trim(),nextMaintenance:g.nextMaintenance.trim(),updatedAt:new Date().toISOString(),updatedBy:(r==null?void 0:r.name)||"Unknown"};a(i.map(Y=>Y.id===m.id?Ce:Y)),v({name:"",setTemperatureMin:"",setTemperatureMax:"",location:"",dedicatedTo:"",nextMaintenance:""}),x(null),u(!1)},de=C=>C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0?`${C.setTemperatureMin}-${C.setTemperatureMax}C`:C.setTemperature?C.setTemperature:"N/A",ie=C=>{if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)return(C.setTemperatureMin+C.setTemperatureMax)/2;if(C.setTemperature){const K=C.setTemperature.toString().replace("C","").trim();return parseFloat(K)}return 0},ze=C=>{const K=e.filter(Ce=>Ce.location.toLowerCase().includes(C.name.toLowerCase())).sort((Ce,Re)=>new Date(Re.timestamp)-new Date(Ce.timestamp))[0];if(!K)return"no-data";const R=ie(C);if(isNaN(R)||R===0)return"no-data";const he=Math.abs(K.temperature-R);return he<=1?"green":he<=1.5?"orange":he>=2?"red":"orange"},P=C=>{const K={green:"bg-green-500",orange:"bg-orange-500",red:"bg-red-500","no-data":"bg-gray-400"};return n.jsx("div",{className:`w-3 h-3 rounded-full ${K[C]}`})},$=C=>({green:"Temperatura OK",orange:"Attenzione",red:"Critica","no-data":"Nessun dato"})[C],W=i.filter(C=>C.name.toLowerCase().includes(p.toLowerCase())||C.location.toLowerCase().includes(p.toLowerCase())),H=e.filter(C=>i.some(K=>C.location.toLowerCase().includes(K.name.toLowerCase()))).sort((C,K)=>new Date(K.timestamp)-new Date(C.timestamp));return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(gn,{className:"h-5 w-5"}),"Punti di Conservazione"]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(pe,{onClick:()=>l(!0),className:"flex items-center gap-2",children:[n.jsx(wr,{className:"h-4 w-4"}),"Aggiungi Punto di Conservazione"]})})]})}),n.jsxs(Je,{children:[n.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(tr,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:" Nuova Logica di Gestione"}),n.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Ora puoi assegnare categorie specifiche ai punti di conservazione per garantire la corretta gestione HACCP:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Assegna categorie ai frigoriferi per limitare i tipi di prodotti"}),n.jsx("li",{children:"Previeni errori di conservazione e contaminazioni"}),n.jsx("li",{children:"Migliora la tracciabilit e la sicurezza alimentare"}),n.jsx("li",{children:"L'applicazione valida automaticamente la compatibilit"})]})]})]})}),L.length>0&&n.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-green-600",children:n.jsx(wr,{className:"h-5 w-5"})}),n.jsx("h3",{className:"font-medium text-green-800",children:" Categorie Personalizzate"})]}),n.jsxs("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded-full",children:[L.length," categoria",L.length===1?"a":"e"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:L.map(C=>n.jsxs("div",{className:"p-3 bg-white border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-green-800",children:C.name}),n.jsx("p",{className:"text-sm text-green-700",children:C.description}),C.temperatureRange&&n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",C.temperatureRange]}),C.notes&&n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",C.notes]})]}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>_(C.id),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Elimina categoria",children:n.jsx(Wn,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"text-xs text-green-500",children:["Creata il ",new Date(C.createdAt).toLocaleDateString("it-IT")]})]},C.id))})]}),i.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessun punto di conservazione registrato"}),n.jsx("p",{className:"text-sm",children:"Aggiungi il primo punto di conservazione per iniziare"})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[n.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[n.jsx(gn,{className:"h-4 w-4"}),"Frigoriferi"]}),n.jsxs("div",{className:"space-y-2",children:[W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&(K>=-2.5&&K<=0||K>0&&K<=14)}).map(C=>{var R;const K=ze(C);return n.jsxs("div",{className:`p-3 border rounded-lg ${K==="green"?"bg-green-50 border-green-200":K==="orange"?"bg-orange-50 border-orange-200":K==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[P(K),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:C.name}),n.jsx("p",{className:`text-xs ${K==="green"?"text-green-600":K==="orange"?"text-orange-600":K==="red"?"text-red-600":"text-gray-600"}`,children:$(K)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>we(C),className:"h-6 w-6 p-0",children:n.jsx(Ro,{className:"h-3 w-3"})}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>ue(C.id),className:"h-6 w-6 p-0",children:n.jsx(Wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Eu,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:C.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:de(C)})]})]}),C.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((R=J.find(he=>he.id===C.dedicatedTo))==null?void 0:R.name)||C.dedicatedTo})]})]},C.id)}),W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&(K>=-2.5&&K<=0||K>0&&K<=14)}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun frigorifero"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-purple-50",children:[n.jsxs("h3",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[n.jsx(gn,{className:"h-4 w-4"}),"Freezer"]}),n.jsxs("div",{className:"space-y-2",children:[W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K<-2.5&&K>=-13.5}).map(C=>{var R;const K=ze(C);return n.jsxs("div",{className:`p-3 border rounded-lg ${K==="green"?"bg-green-50 border-green-200":K==="orange"?"bg-orange-50 border-orange-200":K==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[P(K),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:C.name}),n.jsx("p",{className:`text-xs ${K==="green"?"text-green-600":K==="orange"?"text-orange-600":K==="red"?"text-red-600":"text-gray-600"}`,children:$(K)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>we(C),className:"h-6 w-6 p-0",children:n.jsx(Ro,{className:"h-3 w-3"})}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>ue(C.id),className:"h-6 w-6 p-0",children:n.jsx(Wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Eu,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:C.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:de(C)})]})]}),C.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((R=_s.find(he=>he.id===C.dedicatedTo))==null?void 0:R.name)||C.dedicatedTo})]})]},C.id)}),W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K<-2.5&&K>=-13.5}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun freezer"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-red-50",children:[n.jsxs("h3",{className:"font-semibold text-red-800 mb-3 flex items-center gap-2",children:[n.jsx(gn,{className:"h-4 w-4"}),"Abbattitore"]}),n.jsxs("div",{className:"space-y-2",children:[W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K<-13.5&&K>=-80}).map(C=>{var R;const K=ze(C);return n.jsxs("div",{className:`p-3 border rounded-lg ${K==="green"?"bg-green-50 border-green-200":K==="orange"?"bg-orange-50 border-orange-200":K==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[P(K),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:C.name}),n.jsx("p",{className:`text-xs ${K==="green"?"text-green-600":K==="orange"?"text-orange-600":K==="red"?"text-red-600":"text-gray-600"}`,children:$(K)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>we(C),className:"h-6 w-6 p-0",children:n.jsx(Ro,{className:"h-3 w-3"})}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>ue(C.id),className:"h-6 w-6 p-0",children:n.jsx(Wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Eu,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:C.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:de(C)})]})]}),C.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((R=_s.find(he=>he.id===C.dedicatedTo))==null?void 0:R.name)||C.dedicatedTo})]})]},C.id)}),W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K<-13.5&&K>=-80}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun abbattitore"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-green-50",children:[n.jsxs("h3",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:[n.jsx(gn,{className:"h-4 w-4"}),"Ambiente"]}),n.jsxs("div",{className:"space-y-2",children:[W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K>=15&&K<=25}).map(C=>{var R;const K=ze(C);return n.jsxs("div",{className:`p-3 border rounded-lg ${K==="green"?"bg-green-50 border-green-200":K==="orange"?"bg-orange-50 border-orange-200":K==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[P(K),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:C.name}),n.jsx("p",{className:`text-xs ${K==="green"?"text-green-600":K==="orange"?"text-orange-600":K==="red"?"text-red-600":"text-gray-600"}`,children:$(K)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>we(C),className:"h-6 w-6 p-0",children:n.jsx(Ro,{className:"h-3 w-3"})}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>ue(C.id),className:"h-6 w-6 p-0",children:n.jsx(Wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[C.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Eu,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:C.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(gn,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:de(C)})]})]}),C.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"text-gray-700",children:((R=_s.find(he=>he.id===C.dedicatedTo))==null?void 0:R.name)||C.dedicatedTo})]})]},C.id)}),W.filter(C=>{let K=0;if(C.setTemperatureMin!==void 0&&C.setTemperatureMax!==void 0)K=(C.setTemperatureMin+C.setTemperatureMax)/2;else if(C.setTemperature){const R=C.setTemperature.toString().replace("C","").trim();K=parseFloat(R)}return!isNaN(K)&&K>=15&&K<=25}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun punto ambiente"})]})]})]})})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(cp,{className:"h-5 w-5"}),"Attivit Registro Temperature"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca per nome frigorifero, utente, data...",value:p,onChange:C=>j(C.target.value),className:"pl-10"})]}),H.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessuna attivit di registrazione temperatura"}),n.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo aver aggiunto frigoriferi"})]}):n.jsx("div",{className:"space-y-3",children:H.map(C=>{const K=i.find(R=>C.location.toLowerCase().includes(R.name.toLowerCase()));return n.jsx("div",{className:"p-3 border rounded-lg",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-medium",children:C.location}),K&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:K.name})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura rilevata:"}),n.jsxs("div",{className:"font-bold text-lg",children:[C.temperature,"C"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Data rilevamento:"}),n.jsx("div",{className:"font-medium",children:C.time})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Operatore:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Z2,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:C.userName||"N/A"}),C.userDepartment&&n.jsxs("span",{className:"text-gray-500",children:["(",C.userDepartment,")"]})]})]})]})]})})},C.id)})})]})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5"}),"Stato Punti di Conservazione"]})}),n.jsx(Je,{children:i.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(br,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessun punto di conservazione registrato"}),n.jsx("p",{className:"text-sm",children:"Aggiungi punti di conservazione per visualizzare lo stato"})]}):n.jsx("div",{className:"space-y-3",children:i.map(C=>{const K=ze(C),R=e.filter(he=>he.location.toLowerCase().includes(C.name.toLowerCase())).sort((he,Ce)=>new Date(Ce.timestamp)-new Date(he.timestamp))[0];return n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:shadow-md transition-shadow ${K==="green"?"bg-green-50 border-green-200 hover:bg-green-100":K==="orange"?"bg-orange-50 border-orange-200 hover:bg-orange-100":K==="red"?"bg-red-50 border-red-200 hover:bg-red-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>E(C),title:"Clicca per vedere la cronologia temperature",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:C.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:D(C)}),P(K),n.jsx("span",{className:`text-sm font-medium ${K==="green"?"text-green-700":K==="orange"?"text-orange-700":K==="red"?"text-red-700":"text-gray-600"}`,children:$(K)})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),n.jsxs("div",{className:"font-medium",children:[de(C)," (",D(C),")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),n.jsx("div",{className:"font-medium",children:C.location||"Non specificato"})]})]}),R&&n.jsx("div",{className:`mt-3 p-3 rounded-lg ${K==="green"?"bg-green-100":K==="orange"?"bg-orange-100":K==="red"?"bg-red-100":"bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Ultima registrazione:"}),n.jsxs("span",{className:"font-medium",children:[R.temperature,"C"]}),n.jsxs("span",{className:"text-gray-500",children:["il ",R.time]})]})})]})})},C.id)})})})]}),s&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-sm mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Aggiungi Punto di Conservazione"}),n.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"text-blue-600 mt-0.5",children:n.jsx(tr,{className:"h-4 w-4"})}),n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),n.jsxs("form",{onSubmit:ae,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"name",children:"Nome punto di conservazione"}),n.jsx(st,{id:"name",type:"text",value:g.name,onChange:C=>v({...g,name:C.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(et,{htmlFor:"dedicatedTo",children:"Categoria punto di Conservazione"}),n.jsxs(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>ce(!ne),className:"flex items-center gap-2 text-xs",children:[n.jsx(wr,{className:"h-3 w-3"}),"Nuova Categoria"]})]}),n.jsxs("select",{id:"dedicatedTo",value:g.dedicatedTo,onChange:C=>v({...g,dedicatedTo:C.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Seleziona una categoria"}),J.map(C=>n.jsx("option",{value:C.id,children:C.name},C.id))]}),g.dedicatedTo&&n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:(te=J.find(C=>C.id===g.dedicatedTo))==null?void 0:te.description}),ne&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border-2 border-blue-300 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Crea Nuova Categoria"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"categoryName",className:"text-xs",children:"Nome Categoria *"}),n.jsx(st,{id:"categoryName",type:"text",value:V.name,onChange:C=>O({...V,name:C.target.value}),placeholder:"es. Prodotti Biologici...",className:"text-sm",required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"categoryDescription",className:"text-xs",children:"Descrizione *"}),n.jsx(st,{id:"categoryDescription",type:"text",value:V.description,onChange:C=>O({...V,description:C.target.value}),placeholder:"Descrizione della categoria...",className:"text-sm",required:!0})]}),n.jsx("div",{children:n.jsx(hc,{label:"Range Temperatura (C)",minValue:V.temperatureMin,maxValue:V.temperatureMax,onMinChange:C=>O({...V,temperatureMin:C.target.value}),onMaxChange:C=>O({...V,temperatureMax:C.target.value}),required:!1,showValidation:!0,showSuggestions:!0,compactMode:!0,className:"w-full",id:"category-temperature-range"})}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"categoryNotes",className:"text-xs",children:"Note"}),n.jsx(st,{id:"categoryNotes",type:"text",value:V.notes,onChange:C=>O({...V,notes:C.target.value}),placeholder:"Note aggiuntive...",className:"text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(pe,{type:"button",size:"sm",className:"flex-1 text-xs",onClick:ee,children:"Crea Categoria"}),n.jsx(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>ce(!1),className:"flex-1 text-xs",children:"Annulla"})]})]})]})]}),n.jsx("div",{children:n.jsx(hc,{label:"Range Temperatura (C) *",minValue:g.setTemperatureMin,maxValue:g.setTemperatureMax,onMinChange:C=>v({...g,setTemperatureMin:C.target.value}),onMaxChange:C=>v({...g,setTemperatureMax:C.target.value}),required:!0,showValidation:!0,showSuggestions:!0,compactMode:!0,className:"w-full",id:"set-temperature-range"})}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"location",children:"Posizionamento"}),n.jsx(st,{id:"location",type:"text",value:g.location,onChange:C=>v({...g,location:C.target.value}),placeholder:"es. Cucina principale, Deposito..."})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"nextMaintenance",children:"Prossima Manutenzione Stimata"}),n.jsx(st,{id:"nextMaintenance",type:"text",value:g.nextMaintenance,onChange:C=>v({...g,nextMaintenance:C.target.value}),placeholder:"es. 15/12/2024"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(pe,{type:"submit",className:"flex-1",children:"Aggiungi"}),n.jsx(pe,{type:"button",variant:"outline",onClick:()=>l(!1),className:"flex-1",children:"Annulla"})]})]})]})}),c&&m&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 w-full max-w-sm mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Modifica Punto di Conservazione"}),n.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"text-blue-600 mt-0.5",children:n.jsx(tr,{className:"h-4 w-4"})}),n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),n.jsxs("form",{onSubmit:Q,className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"edit-name",children:"Nome punto di conservazione"}),n.jsx(st,{id:"edit-name",type:"text",value:g.name,onChange:C=>v({...g,name:C.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx(et,{htmlFor:"edit-dedicatedTo",children:"Categoria punto di Conservazione"}),n.jsxs(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>ce(!ne),className:"flex items-center gap-2 text-xs",children:[n.jsx(wr,{className:"h-3 w-3"}),"Nuova Categoria"]})]}),n.jsxs("select",{id:"edit-dedicatedTo",value:g.dedicatedTo,onChange:C=>v({...g,dedicatedTo:C.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Seleziona una categoria"}),J.map(C=>n.jsx("option",{value:C.id,children:C.name},C.id))]}),g.dedicatedTo&&n.jsx("p",{className:"text-xs text-gray-600 mt-1",children:(me=J.find(C=>C.id===g.dedicatedTo))==null?void 0:me.description})]}),n.jsx("div",{children:n.jsx(hc,{label:"Range Temperatura (C) *",minValue:g.setTemperatureMin,maxValue:g.setTemperatureMax,onMinChange:C=>v({...g,setTemperatureMin:C.target.value}),onMaxChange:C=>v({...g,setTemperatureMax:C.target.value}),required:!0,showValidation:!0,showSuggestions:!0,compactMode:!0,className:"w-full",id:"edit-set-temperature-range"})}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"edit-location",children:"Posizionamento"}),n.jsx(st,{id:"edit-location",type:"text",value:g.location,onChange:C=>v({...g,location:C.target.value}),placeholder:"es. Cucina principale, Deposito..."})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"edit-nextMaintenance",children:"Prossima Manutenzione Stimata"}),n.jsx(st,{id:"edit-nextMaintenance",type:"text",value:g.nextMaintenance,onChange:C=>v({...g,nextMaintenance:C.target.value}),placeholder:"es. 15/12/2024"})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(pe,{type:"submit",className:"flex-1",children:"Aggiorna"}),n.jsx(pe,{type:"button",variant:"outline",onClick:()=>{u(!1),x(null),v({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:""})},className:"flex-1",children:"Annulla"})]})]})]})}),N&&w&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(gn,{className:"h-5 w-5"}),"Cronologia Temperature - ",w.name]}),n.jsx(pe,{variant:"outline",onClick:()=>{b(!1),A(null)},className:"p-2",children:n.jsx(un,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),n.jsxs("div",{className:"font-medium",children:[de(w)," (",D(w),")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),n.jsx("div",{className:"font-medium",children:w.location||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Categoria punto di Conservazione:"}),n.jsx("div",{className:"font-medium",children:w.dedicatedTo?((xe=J.find(C=>C.id===w.dedicatedTo))==null?void 0:xe.name)||w.dedicatedTo:"Non specificato"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Prossima manutenzione:"}),n.jsx("div",{className:"font-medium",children:w.nextMaintenance||"Non programmata"})]})]})}),(()=>{const C=q(w);return C.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessuna registrazione di temperatura"}),n.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo le prime misurazioni"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Totale registrazioni: ",C.length]}),C.map((K,R)=>{const he=Math.abs(K.temperature-ie(w)),Ce=he>2?"danger":he>1?"warning":"ok";return n.jsxs("div",{className:`p-4 border rounded-lg ${Ce==="ok"?"bg-green-50 border-green-200":Ce==="warning"?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-lg font-bold",children:[K.temperature,"C"]}),n.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${Ce==="ok"?"bg-green-100 text-green-700":Ce==="warning"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:Ce==="ok"?" OK":Ce==="warning"?" Attenzione":" Critico"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Differenza: ",he.toFixed(1),"C"]})]}),n.jsxs("div",{className:"text-right text-sm text-gray-600",children:[n.jsx("div",{children:K.time}),n.jsx("div",{className:"text-xs",children:K.user||"Utente sconosciuto"})]})]}),K.notes&&n.jsxs("div",{className:"mt-2 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:[" ",K.notes]})]},K.id||R)})]})})()]})})]})}function fN({staff:e,setStaff:t,users:r,setUsers:i,currentUser:a,isAdmin:s}){const[l,c]=re.useState({name:"",role:"",certification:"",notes:""}),[u,m]=re.useState([]),[x,g]=re.useState(!1),[v,p]=re.useState(null),[j,w]=re.useState({name:"",description:"",members:[],assignedTasks:[]}),[A,N]=re.useState(null),[b,L]=re.useState(!1),[G,ne]=re.useState({}),[ce,V]=re.useState(!1),[O,J]=re.useState(null),[ee,_]=re.useState(""),[D,E]=re.useState(!1);re.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(e))},[e]),re.useEffect(()=>{const R=localStorage.getItem("haccp-departments"),he=localStorage.getItem("haccp-departments-version"),Ce=[{id:"amministratori",name:"Amministratori",description:"Gestione e supervisione completa",members:[],assignedTasks:[]},{id:"responsabili",name:"Responsabili",description:"Responsabili di reparto e coordinamento",members:[],assignedTasks:[]},{id:"dipendenti",name:"Dipendenti",description:"Staff fisso e personale regolare",members:[],assignedTasks:[]},{id:"collaboratori",name:"Collaboratore Occasionale",description:"Personale temporaneo e collaborazioni esterne",members:[],assignedTasks:[]}];if(he!=="2.0"||!R)m(Ce),localStorage.setItem("haccp-departments",JSON.stringify(Ce)),localStorage.setItem("haccp-departments-version","2.0");else{const Re=JSON.parse(R),Ne=[...Ce];Re.forEach(Y=>{Ce.find(ht=>ht.id===Y.id)||Ne.push(Y)}),m(Ne)}},[]),re.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(u))},[u]),re.useEffect(()=>{if(u.length>0&&e&&Array.isArray(e)&&e.length>=0){const R=u.map(Ce=>({...Ce,members:e.filter(Re=>Re&&Re.role===Ce.name).map(Re=>Re.id)}));R.some((Ce,Re)=>{var Ne;return JSON.stringify(Ce.members)!==JSON.stringify(((Ne=u[Re])==null?void 0:Ne.members)||[])})&&m(R)}},[e]);const q=R=>{if(R.preventDefault(),!l.name.trim()||!l.role.trim())return;if(e&&Array.isArray(e)?e.some(Re=>Re&&Re.name&&Re.name.toLowerCase().trim()===l.name.toLowerCase().trim()):!1){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la registrazione.`);return}const Ce={id:Date.now(),name:l.name.trim(),role:l.role.trim(),certification:l.certification.trim(),notes:l.notes.trim(),addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT")};t([...e,Ce]),c({name:"",role:"",certification:"",notes:""})},ae=R=>{confirm("Sei sicuro di voler rimuovere questo membro del personale?")&&t(e&&Array.isArray(e)?e.filter(he=>he&&he.id!==R):[])};e&&Array.isArray(e)&&[...new Set(e.map(R=>R==null?void 0:R.role).filter(Boolean))],e&&Array.isArray(e)&&e.filter(R=>R&&R.certification&&R.certification.trim()!=="");const ue={Amministratori:"bg-red-100 text-red-800",Responsabili:"bg-purple-100 text-purple-800",Dipendenti:"bg-blue-100 text-blue-800","Collaboratore Occasionale":"bg-yellow-100 text-yellow-800",Cuoco:"bg-blue-100 text-blue-800","Sous Chef":"bg-purple-100 text-purple-800",Chef:"bg-red-100 text-red-800",Cameriere:"bg-green-100 text-green-800","Addetto cucina":"bg-yellow-100 text-yellow-800",Manager:"bg-gray-100 text-gray-800",default:"bg-gray-100 text-gray-800"},we=R=>{if(ue[R])return ue[R];const he=["bg-indigo-100 text-indigo-800","bg-pink-100 text-pink-800","bg-teal-100 text-teal-800","bg-orange-100 text-orange-800","bg-emerald-100 text-emerald-800","bg-violet-100 text-violet-800","bg-cyan-100 text-cyan-800","bg-rose-100 text-rose-800","bg-lime-100 text-lime-800","bg-amber-100 text-amber-800","bg-sky-100 text-sky-800","bg-fuchsia-100 text-fuchsia-800","bg-slate-100 text-slate-800","bg-stone-100 text-stone-800","bg-zinc-100 text-zinc-800","bg-neutral-100 text-neutral-800","bg-red-200 text-red-900","bg-blue-200 text-blue-900","bg-green-200 text-green-900","bg-purple-200 text-purple-900","bg-yellow-200 text-yellow-900","bg-indigo-200 text-indigo-900","bg-pink-200 text-pink-900","bg-teal-200 text-teal-900"],Ce=R.split("").reduce((Re,Ne)=>(Re=(Re<<5)-Re+Ne.charCodeAt(0),Re&Re),0);return he[Math.abs(Ce)%he.length]},Q=R=>{const he=we(R);return he.includes("text-red-800")?"bg-red-50 border-red-200":he.includes("text-purple-800")?"bg-purple-50 border-purple-200":he.includes("text-blue-800")?"bg-blue-50 border-blue-200":he.includes("text-yellow-800")?"bg-yellow-50 border-yellow-200":he.includes("text-green-800")?"bg-green-50 border-green-200":he.includes("text-indigo-800")?"bg-indigo-50 border-indigo-200":he.includes("text-pink-800")?"bg-pink-50 border-pink-200":he.includes("text-teal-800")?"bg-teal-50 border-teal-200":he.includes("text-orange-800")?"bg-orange-50 border-orange-200":he.includes("text-emerald-800")?"bg-emerald-50 border-emerald-200":he.includes("text-violet-800")?"bg-violet-50 border-violet-200":he.includes("text-cyan-800")?"bg-cyan-50 border-cyan-200":he.includes("text-rose-800")?"bg-rose-50 border-rose-200":he.includes("text-lime-800")?"bg-lime-50 border-lime-200":he.includes("text-amber-800")?"bg-amber-50 border-amber-200":he.includes("text-sky-800")?"bg-sky-50 border-sky-200":he.includes("text-fuchsia-800")?"bg-fuchsia-50 border-fuchsia-200":he.includes("text-slate-800")?"bg-slate-50 border-slate-200":he.includes("text-stone-800")?"bg-stone-50 border-stone-200":he.includes("text-zinc-800")?"bg-zinc-50 border-zinc-200":he.includes("text-neutral-800")?"bg-neutral-50 border-neutral-200":he.includes("text-red-900")?"bg-red-100 border-red-300":he.includes("text-blue-900")?"bg-blue-100 border-blue-300":he.includes("text-green-900")?"bg-green-100 border-green-300":he.includes("text-purple-900")?"bg-purple-100 border-purple-300":he.includes("text-yellow-900")?"bg-yellow-100 border-yellow-300":he.includes("text-indigo-900")?"bg-indigo-100 border-indigo-300":he.includes("text-pink-900")?"bg-pink-100 border-pink-300":he.includes("text-teal-900")?"bg-teal-100 border-teal-300":"bg-gray-50 border-gray-200"},de=R=>{if(R.preventDefault(),!j.name.trim())return;const he={id:Date.now(),name:j.name.trim(),description:j.description.trim(),members:[],assignedTasks:[],createdAt:new Date().toISOString()};m([...u,he]),w({name:"",description:"",members:[],assignedTasks:[]}),g(!1)},ie=R=>{p(R),w({name:R.name,description:R.description,members:R.members||[],assignedTasks:R.assignedTasks||[]}),g(!0)},ze=R=>{if(R.preventDefault(),!j.name.trim())return;const he=u.map(Ce=>Ce.id===v.id?{...Ce,name:j.name.trim(),description:j.description.trim()}:Ce);m(he),w({name:"",description:"",members:[],assignedTasks:[]}),p(null),g(!1)},P=R=>{confirm("Sei sicuro di voler eliminare questa categoria?")&&m(u.filter(he=>he.id!==R))},$=R=>{N(R),c({name:R.name,role:R.role,certification:R.certification||"",notes:R.notes||""}),L(!0)},W=R=>{if(R.preventDefault(),!l.name.trim()||!l.role.trim())return;if(e.some(Re=>Re.id!==A.id&&Re.name.toLowerCase().trim()===l.name.toLowerCase().trim())){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la modifica.`);return}const Ce=e.map(Re=>Re.id===A.id?{...Re,name:l.name.trim(),role:l.role.trim(),certification:l.certification.trim(),notes:l.notes.trim(),lastModified:new Date().toLocaleString("it-IT")}:Re);t(Ce),c({name:"",role:"",certification:"",notes:""}),N(null),L(!1)},H=()=>{N(null),L(!1),c({name:"",role:"",certification:"",notes:""})},te=R=>{J(R),_(""),V(!0)},me=()=>{if(O&&ee){const R=e.map(he=>he.id===O.id?{...he,role:ee,lastModified:new Date().toLocaleString("it-IT")}:he);t(R),V(!1),J(null),_("")}},xe=()=>{E(!0)},C=()=>{O&&(t(e&&Array.isArray(e)?e.filter(R=>R&&R.id!==O.id):[]),V(!1),E(!1),J(null),_(""))},K=()=>{V(!1),E(!1),J(null),_("")};return n.jsxs("div",{className:"space-y-6",children:[a&&a.role==="admin"&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(_i,{className:"h-5 w-5"}),"Gestione Categorie Ruoli"]})}),n.jsxs(Je,{children:[x&&n.jsxs("form",{onSubmit:v?ze:de,className:"space-y-4 mb-6 p-4 bg-blue-50 rounded-lg border",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"categoryName",children:"Nome Categoria"}),n.jsx(st,{id:"categoryName",value:j.name,onChange:R=>w({...j,name:R.target.value}),placeholder:"es. Cucina, Sala, Amministrazione",required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"categoryDescription",children:"Descrizione"}),n.jsx(st,{id:"categoryDescription",value:j.description,onChange:R=>w({...j,description:R.target.value}),placeholder:"Descrizione della categoria"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{type:"submit",size:"sm",children:v?"Aggiorna Categoria":"Aggiungi Categoria"}),n.jsx(pe,{type:"button",variant:"outline",size:"sm",onClick:()=>{g(!1),p(null),w({name:"",description:"",members:[],assignedTasks:[]})},children:"Annulla"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h4",{className:"font-medium",children:["Categorie Disponibili (",u.length,")"]}),n.jsx(pe,{onClick:()=>g(!0),size:"sm",variant:"outline",children:"Nuova Categoria"})]}),u.length===0?n.jsxs("div",{className:"text-center py-6 text-gray-500",children:[n.jsx(_i,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"Nessuna categoria creata"}),n.jsx("p",{className:"text-sm",children:"Crea la prima categoria per organizzare i ruoli"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(R=>{var he;return n.jsxs("div",{className:`p-4 border rounded-lg ${Q(R.name)}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h5",{className:"font-medium text-lg",children:R.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${we(R.name)}`,children:R.name})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(pe,{onClick:()=>ie(R),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:""}),n.jsx(pe,{onClick:()=>P(R.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]})]}),R.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:R.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:[" ",e&&Array.isArray(e)?e.filter(Ce=>Ce&&Ce.role===R.name).length:0," membri"]}),n.jsxs("span",{children:[" ",((he=R.assignedTasks)==null?void 0:he.length)||0," compiti"]})]})]},R.id)})})]})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(_i,{className:"h-5 w-5"}),A?"Modifica Membro del Personale":"Aggiungi Membro del Personale"]})}),n.jsxs(Je,{children:[b&&n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Stai modificando:"})," ",A==null?void 0:A.name]})}),n.jsxs("form",{onSubmit:A?W:q,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"name",children:"Nome Completo"}),n.jsx(st,{id:"name",placeholder:"Es: Mario Rossi",value:l.name,onChange:R=>c({...l,name:R.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"role",children:"Ruolo"}),n.jsxs("select",{id:"role",value:l.role,onChange:R=>c({...l,role:R.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona un ruolo..."}),u.map(R=>n.jsx("option",{value:R.name,children:R.name},R.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"certification",children:"Certificazioni HACCP (opzionale)"}),n.jsx(st,{id:"certification",placeholder:"Es: Certificato HACCP livello 2, Corso sicurezza alimentare...",value:l.certification,onChange:R=>c({...l,certification:R.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(et,{htmlFor:"notes",children:"Note (opzionale)"}),n.jsx(st,{id:"notes",placeholder:"Es: Turno preferito, competenze particolari...",value:l.notes,onChange:R=>c({...l,notes:R.target.value})})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{type:"submit",className:"flex-1",children:A?"Salva Modifiche":"Aggiungi al Team"}),A&&n.jsx(pe,{type:"button",variant:"outline",onClick:H,className:"flex-1",children:"Annulla"})]})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Totale Personale"}),n.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),n.jsx(_i,{className:"h-8 w-8 text-blue-500"})]})})})}),u.length>0&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.slice().sort((R,he)=>R.name.localeCompare(he.name)).map(R=>{const he=e&&Array.isArray(e)?e.filter(Ne=>Ne&&Ne.role===R.name):[],Ce=he.length,Re=G[R.name];return n.jsxs("div",{children:[n.jsx(He,{className:"cursor-pointer hover:shadow-md transition-shadow",children:n.jsx(Je,{className:"pt-6",children:n.jsxs("button",{onClick:()=>ne(Ne=>({...Ne,[R.name]:!Ne[R.name]})),className:"w-full text-left",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:R.name}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Ce})]}),n.jsx(_i,{className:"h-8 w-8 text-blue-500"})]}),n.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-between",children:[n.jsx("span",{children:Ce===1?"utente":"utenti"}),n.jsx("span",{children:Re?"":""})]})]})})}),Re&&n.jsx(He,{className:"mt-2",children:n.jsx(Je,{className:"pt-4",children:Ce===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(_i,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"Nessun dipendente in questa categoria"}),n.jsxs("p",{className:"text-xs",children:['Aggiungi membri selezionando "',R.name,'" nel form sopra']})]}):n.jsx("div",{className:"space-y-2",children:he.map(Ne=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:Ne.name}),Ne.certification&&n.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[n.jsx(Xy,{className:"h-3 w-3"}),Ne.certification]}),Ne.notes&&n.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[n.jsx(lg,{className:"h-3 w-3"}),Ne.notes]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(pe,{onClick:()=>te(Ne),variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-orange-700 border-orange-300 hover:bg-orange-100 hover:border-orange-400 bg-white shadow-sm",title:"Rimuovi da questo ruolo o riassegna",children:n.jsx(By,{className:"h-7.5 w-7.5 stroke-1.5"})})})]},Ne.id))})})})]},R.id)})}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{children:["Elenco Staff Completo (",e.length,")"]})}),n.jsx(Je,{children:e.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(_i,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"Nessun membro del personale registrato"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Aggiungi il primo membro del team per iniziare la gestione del personale HACCP"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-100 rounded text-xs font-medium text-gray-600",children:[n.jsx("div",{className:"col-span-3",children:"Nome"}),n.jsx("div",{className:"col-span-2",children:"Ruolo"}),n.jsx("div",{className:"col-span-2",children:"Categoria"}),n.jsx("div",{className:"col-span-2",children:"Data Registrazione"}),n.jsx("div",{className:"col-span-2",children:"Note"}),n.jsx("div",{className:"col-span-1",children:"Azioni"})]}),e.map(R=>n.jsxs("div",{className:`grid grid-cols-12 gap-2 px-3 py-2 rounded border transition-colors text-sm ${R.isRegisteredUser?"bg-blue-50 border-blue-200 hover:bg-blue-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"col-span-3 flex items-center",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium flex items-center gap-2",children:[R.name,R.isRegisteredUser&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Utente"})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[R.addedDate,R.lastModified&&"  Mod."]})]})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${we(R.role)}`,children:R.role})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R.role==="Non assegnato"?"bg-gray-100 text-gray-600":"bg-purple-100 text-purple-700"}`,children:R.role})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsxs("div",{className:"text-xs text-gray-600",children:[R.addedDate,R.addedTime&&n.jsx("div",{className:"text-xs text-gray-400",children:R.addedTime.split(" ")[1]})]})}),n.jsx("div",{className:"col-span-2 flex items-center",children:R.notes?n.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[n.jsx(lg,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate text-xs",children:R.notes})]}):n.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),n.jsx("div",{className:"col-span-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(pe,{onClick:()=>$(R),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-blue-700 border-blue-300 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-400 bg-white shadow-sm",title:"Modifica dipendente",children:n.jsx(tN,{className:"h-4 w-4"})}),n.jsx(pe,{onClick:()=>ae(R.id),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-red-700 border-red-300 hover:bg-red-100 hover:text-red-800 hover:border-red-400 bg-white shadow-sm",title:"Elimina dipendente",children:n.jsx(Wn,{className:"h-4 w-4"})})]})})]},R.id))]})})]}),e.length===0&&n.jsxs(He,{className:"border-blue-200 bg-blue-50",children:[n.jsx(ct,{children:n.jsx(ut,{className:"text-blue-800",children:"Suggerimenti Ruoli Comuni"})}),n.jsxs(Je,{children:[n.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Ecco alcuni ruoli comuni nella ristorazione che potresti voler aggiungere:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Chef","Sous Chef","Cuoco","Addetto cucina","Cameriere","Barista","Manager"].map(R=>n.jsx("button",{onClick:()=>c({...l,role:R}),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm hover:bg-blue-200 transition-colors",children:R},R))})]})]}),ce&&O&&!D&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4",children:['Rimuovi "',O.name,'" da "',O.role,'"']}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Scegliere ",n.jsx("strong",{children:"obbligatoriamente"})," un altro ruolo per questo dipendente, oppure rimuovi dipendente dall'applicazione."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nuovo ruolo per ",O.name,":"]}),n.jsxs("select",{value:ee,onChange:R=>_(R.target.value),className:"w-full h-10 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona nuovo ruolo --"}),u.filter(R=>R.name!==O.role).map(R=>n.jsx("option",{value:R.name,children:R.name},R.id))]})]}),ee&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-green-800",children:[n.jsx("strong",{children:" Confermato:"})," ",O.name,' verr spostato da "',O.role,'" a "',n.jsx("strong",{children:ee}),'".']})})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(pe,{onClick:me,className:"flex-1",disabled:!ee,variant:ee?"default":"outline",children:ee?"Conferma":"Seleziona un ruolo"}),n.jsx(pe,{onClick:xe,variant:"destructive",className:"flex-1",children:"Rimuovi Dipendente"})]}),n.jsx("div",{className:"mt-3",children:n.jsx(pe,{onClick:K,variant:"outline",className:"w-full",size:"sm",children:"Annulla"})})]})}),D&&O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Conferma Eliminazione"}),n.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Sei sicuro di voler ",n.jsx("strong",{children:"eliminare definitivamente"})," il dipendente",n.jsxs("strong",{className:"text-red-600",children:[' "',O.name,'"']})," dall'applicazione?"]}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-4",children:n.jsxs("p",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:" Attenzione:"})," Questa azione  ",n.jsx("strong",{children:"irreversibile"}),". Tutti i dati associati a questo dipendente verranno persi permanentemente."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pe,{onClick:()=>E(!1),variant:"outline",className:"flex-1",children:"Annulla"}),n.jsx(pe,{onClick:C,variant:"destructive",className:"flex-1",children:"Elimina Definitivamente"})]})]})})]})}function nx({value:e,onValueChange:t,children:r}){return n.jsx("div",{className:"w-full",children:qo.Children.map(r,i=>!i||!i.type?i:i.type===hp?qo.cloneElement(i,{value:e,onValueChange:t}):i.type===hi?qo.cloneElement(i,{currentValue:e}):i)})}function hp({value:e,onValueChange:t,children:r,className:i=""}){return n.jsx("div",{className:`flex p-1 bg-gray-100 rounded-xl shadow-sm ${i}`,children:qo.Children.map(r,a=>!a||!a.type?a:a.type===di?qo.cloneElement(a,{currentValue:e,onValueChange:t,isActive:e===a.props.value}):a)})}function di({value:e,currentValue:t,onValueChange:r,isActive:i,children:a,className:s=""}){return n.jsx("button",{onClick:()=>r(e),className:`
        flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ease-in-out
        ${i?"bg-white text-blue-600 shadow-md transform scale-[1.02]":"text-gray-600 hover:text-gray-900 hover:bg-white/60 active:scale-[0.98]"}
        ${s}
      `,children:a})}function hi({value:e,currentValue:t,children:r}){return t!==e?null:n.jsx("div",{className:"mt-6 animate-in fade-in-50 duration-200",children:r})}function pN({customCategories:e=[],setCustomCategories:t,currentUser:r}){const[i,a]=re.useState(!1),[s,l]=re.useState(null),[c,u]=re.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800"}),m=["bg-blue-100 text-blue-800","bg-red-100 text-red-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-indigo-100 text-indigo-800","bg-orange-100 text-orange-800","bg-teal-100 text-teal-800","bg-cyan-100 text-cyan-800"];re.useEffect(()=>{localStorage.setItem("haccp-custom-categories",JSON.stringify(e))},[e]);const x=()=>{u({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800"}),l(null)},g=w=>{if(w.preventDefault(),!c.name.trim()||!c.temperatureMin.trim()||!c.temperatureMax.trim()){alert("Compila tutti i campi obbligatori");return}const A=parseFloat(c.temperatureMin),N=parseFloat(c.temperatureMax);if(isNaN(A)||isNaN(N)){alert("Inserisci temperature valide");return}if(A>=N){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}if(s){const b=e.map(L=>L.id===s.id?{...L,name:c.name.trim(),description:c.description.trim(),temperatureMin:A,temperatureMax:N,temperature:`${A}-${N}C`,storageLocation:c.storageLocation.trim(),color:c.color,updatedAt:new Date().toISOString(),updatedBy:r==null?void 0:r.id,updatedByName:r==null?void 0:r.name}:L);t(b)}else{const b={id:Date.now().toString(),name:c.name.trim(),description:c.description.trim(),temperatureMin:A,temperatureMax:N,temperature:`${A}-${N}C`,storageLocation:c.storageLocation.trim(),color:c.color,createdAt:new Date().toISOString(),createdBy:r==null?void 0:r.id,createdByName:r==null?void 0:r.name,updatedAt:new Date().toISOString(),updatedBy:r==null?void 0:r.id,updatedByName:r==null?void 0:r.name};t([...e,b])}x(),a(!1)},v=w=>{l(w),u({name:w.name,description:w.description||"",temperatureMin:w.temperatureMin.toString(),temperatureMax:w.temperatureMax.toString(),storageLocation:w.storageLocation||"",color:w.color}),a(!0)},p=w=>{confirm("Sei sicuro di voler eliminare questa categoria? Questa azione non pu essere annullata.")&&t(e.filter(A=>A.id!==w))},j=(w,A)=>{const N=(w+A)/2;return N<=-13.5?"Surgelato":N>=15?"Temperatura Ambiente":"Refrigerato"};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Categorie Personalizzate"}),n.jsx("p",{className:"text-gray-600",children:"Gestisci categorie di prodotti con temperature specifiche"})]}),n.jsxs(pe,{onClick:()=>{x(),a(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(wr,{className:"mr-2 h-4 w-4"}),"Nuova Categoria"]})]}),i&&n.jsxs(He,{children:[n.jsxs(ct,{children:[n.jsx(ut,{children:s?"Modifica Categoria":"Nuova Categoria Personalizzata"}),r&&n.jsxs("p",{className:"text-sm text-gray-600",children:[s?"Modificando come: ":"Creando come: ",n.jsx("span",{className:"font-medium",children:r.name})," (",r.department,")"]})]}),n.jsx(Je,{children:n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"name",children:"Nome Categoria *"}),n.jsx(st,{id:"name",type:"text",value:c.name,onChange:w=>u({...c,name:w.target.value}),placeholder:"es. Prodotti Freschi, Specialit Regionali...",required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"color",children:"Colore Identificativo"}),n.jsx("select",{value:c.color,onChange:w=>u({...c,color:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:m.map((w,A)=>n.jsx("option",{value:w,children:w.replace("bg-","").replace("-100 text-"," - ").replace("-800","")},A))})]})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"description",children:"Descrizione"}),n.jsx(st,{id:"description",type:"text",value:c.description,onChange:w=>u({...c,description:w.target.value}),placeholder:"es. Prodotti freschi di produzione locale..."})]}),n.jsx("div",{children:n.jsx(hc,{label:"Range Temperatura (C) *",minValue:c.temperatureMin,maxValue:c.temperatureMax,onMinChange:w=>u({...c,temperatureMin:w.target.value}),onMaxChange:w=>u({...c,temperatureMax:w.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temperature-range"})}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"storageLocation",children:"Posizione di Conservazione Suggerita"}),n.jsx(st,{id:"storageLocation",type:"text",value:c.storageLocation,onChange:w=>u({...c,storageLocation:w.target.value}),placeholder:"es. Ripiano superiore frigo, Scaffale dispensa..."})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(pe,{type:"submit",className:"flex-1",children:[s?"Aggiorna":"Crea"," Categoria"]}),n.jsx(pe,{type:"button",variant:"outline",onClick:()=>{a(!1),x()},className:"flex-1",children:"Annulla"})]})]})})]}),e.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(w=>n.jsx(He,{className:"hover:shadow-md transition-shadow",children:n.jsxs(Je,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.color}`,children:w.name}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>v(w),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100",children:n.jsx(Ro,{className:"h-3 w-3"})}),n.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>p(w.id),className:"text-red-600 hover:text-red-700 hover:bg-red-100",children:n.jsx(Wn,{className:"h-3 w-3"})})]})]}),w.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:w.description}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(gn,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Temperatura:"}),n.jsx("span",{className:"font-medium",children:w.temperature})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Zn,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Tipo:"}),n.jsx("span",{className:"font-medium",children:j(w.temperatureMin,w.temperatureMax)})]}),w.storageLocation&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Posizione:"}),n.jsx("span",{className:"font-medium",children:w.storageLocation})]})]}),n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:[n.jsxs("p",{children:["Creata da: ",w.createdByName||"N/A"]}),n.jsxs("p",{children:["Aggiornata: ",new Date(w.updatedAt).toLocaleDateString("it-IT")]})]})]})},w.id))}):n.jsx(He,{children:n.jsxs(Je,{className:"p-8 text-center text-gray-500",children:[n.jsx(gn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Nessuna categoria personalizzata"}),n.jsx("p",{className:"text-sm",children:"Crea la tua prima categoria personalizzata per gestire prodotti specifici"})]})})]})}const gN="modulepreload",xN=function(e,t){return new URL(e,t).href},hg={},nf=function(t,r,i){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(s=>{if(s=xN(s,i),s in hg)return;hg[s]=!0;const l=s.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!i)for(let x=a.length-1;x>=0;x--){const g=a[x];if(g.href===s&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${c}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":gN,l||(m.as="script",m.crossOrigin=""),m.href=s,document.head.appendChild(m),l)return new Promise((x,g)=>{m.addEventListener("load",x),m.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})};function Qt(e){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(e)}var hr=Uint8Array,Yr=Uint16Array,mp=Int32Array,Xd=new hr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Yd=new hr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),rf=new hr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rx=function(e,t){for(var r=new Yr(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var a=new mp(r[30]),i=1;i<30;++i)for(var s=r[i];s<r[i+1];++s)a[s]=s-r[i]<<5|i;return{b:r,r:a}},ix=rx(Xd,2),ax=ix.b,af=ix.r;ax[28]=258,af[258]=28;var sx=rx(Yd,0),vN=sx.b,mg=sx.r,sf=new Yr(32768);for(var ln=0;ln<32768;++ln){var Ha=(ln&43690)>>1|(ln&21845)<<1;Ha=(Ha&52428)>>2|(Ha&13107)<<2,Ha=(Ha&61680)>>4|(Ha&3855)<<4,sf[ln]=((Ha&65280)>>8|(Ha&255)<<8)>>1}var Yi=function(e,t,r){for(var i=e.length,a=0,s=new Yr(t);a<i;++a)e[a]&&++s[e[a]-1];var l=new Yr(t);for(a=1;a<t;++a)l[a]=l[a-1]+s[a-1]<<1;var c;if(r){c=new Yr(1<<t);var u=15-t;for(a=0;a<i;++a)if(e[a])for(var m=a<<4|e[a],x=t-e[a],g=l[e[a]-1]++<<x,v=g|(1<<x)-1;g<=v;++g)c[sf[g]>>u]=m}else for(c=new Yr(i),a=0;a<i;++a)e[a]&&(c[a]=sf[l[e[a]-1]++]>>15-e[a]);return c},hs=new hr(288);for(var ln=0;ln<144;++ln)hs[ln]=8;for(var ln=144;ln<256;++ln)hs[ln]=9;for(var ln=256;ln<280;++ln)hs[ln]=7;for(var ln=280;ln<288;++ln)hs[ln]=8;var Ic=new hr(32);for(var ln=0;ln<32;++ln)Ic[ln]=5;var yN=Yi(hs,9,0),NN=Yi(hs,9,1),wN=Yi(Ic,5,0),bN=Yi(Ic,5,1),Zh=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ci=function(e,t,r){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&r},em=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},fp=function(e){return(e+7)/8|0},ox=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new hr(e.subarray(t,r))},jN=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Li=function(e,t,r){var i=new Error(t||jN[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,Li),!r)throw i;return i},SN=function(e,t,r,i){var a=e.length,s=i?i.length:0;if(!a||t.f&&!t.l)return r||new hr(0);var l=!r,c=l||t.i!=2,u=t.i;l&&(r=new hr(a*3));var m=function(R){var he=r.length;if(R>he){var Ce=new hr(Math.max(he*2,R));Ce.set(r),r=Ce}},x=t.f||0,g=t.p||0,v=t.b||0,p=t.l,j=t.d,w=t.m,A=t.n,N=a*8;do{if(!p){x=Ci(e,g,1);var b=Ci(e,g+1,3);if(g+=3,b)if(b==1)p=NN,j=bN,w=9,A=5;else if(b==2){var ce=Ci(e,g,31)+257,V=Ci(e,g+10,15)+4,O=ce+Ci(e,g+5,31)+1;g+=14;for(var J=new hr(O),ee=new hr(19),_=0;_<V;++_)ee[rf[_]]=Ci(e,g+_*3,7);g+=V*3;for(var D=Zh(ee),E=(1<<D)-1,q=Yi(ee,D,1),_=0;_<O;){var ae=q[Ci(e,g,E)];g+=ae&15;var L=ae>>4;if(L<16)J[_++]=L;else{var ue=0,we=0;for(L==16?(we=3+Ci(e,g,3),g+=2,ue=J[_-1]):L==17?(we=3+Ci(e,g,7),g+=3):L==18&&(we=11+Ci(e,g,127),g+=7);we--;)J[_++]=ue}}var Q=J.subarray(0,ce),de=J.subarray(ce);w=Zh(Q),A=Zh(de),p=Yi(Q,w,1),j=Yi(de,A,1)}else Li(1);else{var L=fp(g)+4,G=e[L-4]|e[L-3]<<8,ne=L+G;if(ne>a){u&&Li(0);break}c&&m(v+G),r.set(e.subarray(L,ne),v),t.b=v+=G,t.p=g=ne*8,t.f=x;continue}if(g>N){u&&Li(0);break}}c&&m(v+131072);for(var ie=(1<<w)-1,ze=(1<<A)-1,P=g;;P=g){var ue=p[em(e,g)&ie],$=ue>>4;if(g+=ue&15,g>N){u&&Li(0);break}if(ue||Li(2),$<256)r[v++]=$;else if($==256){P=g,p=null;break}else{var W=$-254;if($>264){var _=$-257,H=Xd[_];W=Ci(e,g,(1<<H)-1)+ax[_],g+=H}var te=j[em(e,g)&ze],me=te>>4;te||Li(3),g+=te&15;var de=vN[me];if(me>3){var H=Yd[me];de+=em(e,g)&(1<<H)-1,g+=H}if(g>N){u&&Li(0);break}c&&m(v+131072);var xe=v+W;if(v<de){var C=s-de,K=Math.min(de,xe);for(C+v<0&&Li(3);v<K;++v)r[v]=i[C+v]}for(;v<xe;++v)r[v]=r[v-de]}}t.l=p,t.p=P,t.b=v,t.f=x,p&&(x=1,t.m=w,t.d=j,t.n=A)}while(!x);return v!=r.length&&l?ox(r,0,v):r.subarray(0,v)},da=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},Jl=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},tm=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var a=r.length,s=r.slice();if(!a)return{t:cx,l:0};if(a==1){var l=new hr(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(ne,ce){return ne.f-ce.f}),r.push({s:-1,f:25001});var c=r[0],u=r[1],m=0,x=1,g=2;for(r[0]={s:-1,f:c.f+u.f,l:c,r:u};x!=a-1;)c=r[r[m].f<r[g].f?m++:g++],u=r[m!=x&&r[m].f<r[g].f?m++:g++],r[x++]={s:-1,f:c.f+u.f,l:c,r:u};for(var v=s[0].s,i=1;i<a;++i)s[i].s>v&&(v=s[i].s);var p=new Yr(v+1),j=of(r[x-1],p,0);if(j>t){var i=0,w=0,A=j-t,N=1<<A;for(s.sort(function(ce,V){return p[V.s]-p[ce.s]||ce.f-V.f});i<a;++i){var b=s[i].s;if(p[b]>t)w+=N-(1<<j-p[b]),p[b]=t;else break}for(w>>=A;w>0;){var L=s[i].s;p[L]<t?w-=1<<t-p[L]++-1:++i}for(;i>=0&&w;--i){var G=s[i].s;p[G]==t&&(--p[G],++w)}j=t}return{t:new hr(p),l:j}},of=function(e,t,r){return e.s==-1?Math.max(of(e.l,t,r+1),of(e.r,t,r+1)):t[e.s]=r},fg=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yr(++t),i=0,a=e[0],s=1,l=function(u){r[i++]=u},c=1;c<=t;++c)if(e[c]==a&&c!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=e[c]}return{c:r.subarray(0,i),n:t}},Xl=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},lx=function(e,t,r){var i=r.length,a=fp(t+2);e[a]=i&255,e[a+1]=i>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<i;++s)e[a+s+4]=r[s];return(a+4+i)*8},pg=function(e,t,r,i,a,s,l,c,u,m,x){da(t,x++,r),++a[256];for(var g=tm(a,15),v=g.t,p=g.l,j=tm(s,15),w=j.t,A=j.l,N=fg(v),b=N.c,L=N.n,G=fg(w),ne=G.c,ce=G.n,V=new Yr(19),O=0;O<b.length;++O)++V[b[O]&31];for(var O=0;O<ne.length;++O)++V[ne[O]&31];for(var J=tm(V,7),ee=J.t,_=J.l,D=19;D>4&&!ee[rf[D-1]];--D);var E=m+5<<3,q=Xl(a,hs)+Xl(s,Ic)+l,ae=Xl(a,v)+Xl(s,w)+l+14+3*D+Xl(V,ee)+2*V[16]+3*V[17]+7*V[18];if(u>=0&&E<=q&&E<=ae)return lx(t,x,e.subarray(u,u+m));var ue,we,Q,de;if(da(t,x,1+(ae<q)),x+=2,ae<q){ue=Yi(v,p,0),we=v,Q=Yi(w,A,0),de=w;var ie=Yi(ee,_,0);da(t,x,L-257),da(t,x+5,ce-1),da(t,x+10,D-4),x+=14;for(var O=0;O<D;++O)da(t,x+3*O,ee[rf[O]]);x+=3*D;for(var ze=[b,ne],P=0;P<2;++P)for(var $=ze[P],O=0;O<$.length;++O){var W=$[O]&31;da(t,x,ie[W]),x+=ee[W],W>15&&(da(t,x,$[O]>>5&127),x+=$[O]>>12)}}else ue=yN,we=hs,Q=wN,de=Ic;for(var O=0;O<c;++O){var H=i[O];if(H>255){var W=H>>18&31;Jl(t,x,ue[W+257]),x+=we[W+257],W>7&&(da(t,x,H>>23&31),x+=Xd[W]);var te=H&31;Jl(t,x,Q[te]),x+=de[te],te>3&&(Jl(t,x,H>>5&8191),x+=Yd[te])}else Jl(t,x,ue[H]),x+=we[H]}return Jl(t,x,ue[256]),x+we[256]},CN=new mp([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cx=new hr(0),kN=function(e,t,r,i,a,s){var l=s.z||e.length,c=new hr(i+l+5*(1+Math.ceil(l/7e3))+a),u=c.subarray(i,c.length-a),m=s.l,x=(s.r||0)&7;if(t){x&&(u[0]=s.r>>3);for(var g=CN[t-1],v=g>>13,p=g&8191,j=(1<<r)-1,w=s.p||new Yr(32768),A=s.h||new Yr(j+1),N=Math.ceil(r/3),b=2*N,L=function(Re){return(e[Re]^e[Re+1]<<N^e[Re+2]<<b)&j},G=new mp(25e3),ne=new Yr(288),ce=new Yr(32),V=0,O=0,J=s.i||0,ee=0,_=s.w||0,D=0;J+2<l;++J){var E=L(J),q=J&32767,ae=A[E];if(w[q]=ae,A[E]=q,_<=J){var ue=l-J;if((V>7e3||ee>24576)&&(ue>423||!m)){x=pg(e,u,0,G,ne,ce,O,ee,D,J-D,x),ee=V=O=0,D=J;for(var we=0;we<286;++we)ne[we]=0;for(var we=0;we<30;++we)ce[we]=0}var Q=2,de=0,ie=p,ze=q-ae&32767;if(ue>2&&E==L(J-ze))for(var P=Math.min(v,ue)-1,$=Math.min(32767,J),W=Math.min(258,ue);ze<=$&&--ie&&q!=ae;){if(e[J+Q]==e[J+Q-ze]){for(var H=0;H<W&&e[J+H]==e[J+H-ze];++H);if(H>Q){if(Q=H,de=ze,H>P)break;for(var te=Math.min(ze,H-2),me=0,we=0;we<te;++we){var xe=J-ze+we&32767,C=w[xe],K=xe-C&32767;K>me&&(me=K,ae=xe)}}}q=ae,ae=w[q],ze+=q-ae&32767}if(de){G[ee++]=268435456|af[Q]<<18|mg[de];var R=af[Q]&31,he=mg[de]&31;O+=Xd[R]+Yd[he],++ne[257+R],++ce[he],_=J+Q,++V}else G[ee++]=e[J],++ne[e[J]]}}for(J=Math.max(J,_);J<l;++J)G[ee++]=e[J],++ne[e[J]];x=pg(e,u,m,G,ne,ce,O,ee,D,J-D,x),m||(s.r=x&7|u[x/8|0]<<3,x-=7,s.h=A,s.p=w,s.i=J,s.w=_)}else{for(var J=s.w||0;J<l+m;J+=65535){var Ce=J+65535;Ce>=l&&(u[x/8|0]=m,Ce=l),x=lx(u,x+1,e.subarray(J,Ce))}s.i=l}return ox(c,0,i+fp(x)+a)},ux=function(){var e=1,t=0;return{p:function(r){for(var i=e,a=t,s=r.length|0,l=0;l!=s;){for(var c=Math.min(l+2655,s);l<c;++l)a+=i+=r[l];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}e=i,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},AN=function(e,t,r,i,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),l=new hr(s.length+e.length);l.set(s),l.set(e,s.length),e=l,a.w=s.length}return kN(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,a)},dx=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},LN=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=ux();a.p(t.dictionary),dx(e,2,a.d())}},PN=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Li(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Li(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function lf(e,t){t||(t={});var r=ux();r.p(e);var i=AN(e,t,t.dictionary?6:2,4);return LN(i,t),dx(i,i.length-4,r.d()),i}function _N(e,t){return SN(e.subarray(PN(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var zN=typeof TextDecoder<"u"&&new TextDecoder,IN=0;try{zN.decode(cx,{stream:!0}),IN=1}catch{}var xt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function nm(){xt.console&&typeof xt.console.log=="function"&&xt.console.log.apply(xt.console,arguments)}var tn={log:nm,warn:function(e){xt.console&&(typeof xt.console.warn=="function"?xt.console.warn.apply(xt.console,arguments):nm.call(null,arguments))},error:function(e){xt.console&&(typeof xt.console.error=="function"?xt.console.error.apply(xt.console,arguments):nm(e))}};function rm(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Ms(i.response,t,r)},i.onerror=function(){tn.error("could not download file")},i.send()}function gg(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ou(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var mc,cf,Ms=xt.saveAs||((typeof window>"u"?"undefined":Qt(window))!=="object"||window!==xt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=xt.URL||xt.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?gg(a.href)?rm(e,t,r):Ou(a,a.target="_blank"):Ou(a)):(a.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){Ou(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(gg(e))rm(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Ou(i)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:Qt(s)!=="object"&&(tn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return rm(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(xt.HTMLElement)||xt.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&(typeof FileReader>"u"?"undefined":Qt(FileReader))==="object"){var c=new FileReader;c.onloadend=function(){var x=c.result;x=l?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},c.readAsDataURL(e)}else{var u=xt.URL||xt.webkitURL,m=u.createObjectURL(e);i?i.location=m:location.href=m,i=null,setTimeout(function(){u.revokeObjectURL(m)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function hx(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}],i=0;i<r.length;i++){var a=r[i].re,s=r[i].process,l=a.exec(e);l&&(t=s(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var c=this.r.toString(16),u=this.g.toString(16),m=this.b.toString(16);return c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),m.length==1&&(m="0"+m),"#"+c+u+m}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function im(e,t){var r=e[0],i=e[1],a=e[2],s=e[3];r=or(r,i,a,s,t[0],7,-680876936),s=or(s,r,i,a,t[1],12,-389564586),a=or(a,s,r,i,t[2],17,606105819),i=or(i,a,s,r,t[3],22,-1044525330),r=or(r,i,a,s,t[4],7,-176418897),s=or(s,r,i,a,t[5],12,1200080426),a=or(a,s,r,i,t[6],17,-1473231341),i=or(i,a,s,r,t[7],22,-45705983),r=or(r,i,a,s,t[8],7,1770035416),s=or(s,r,i,a,t[9],12,-1958414417),a=or(a,s,r,i,t[10],17,-42063),i=or(i,a,s,r,t[11],22,-1990404162),r=or(r,i,a,s,t[12],7,1804603682),s=or(s,r,i,a,t[13],12,-40341101),a=or(a,s,r,i,t[14],17,-1502002290),r=lr(r,i=or(i,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=lr(s,r,i,a,t[6],9,-1069501632),a=lr(a,s,r,i,t[11],14,643717713),i=lr(i,a,s,r,t[0],20,-373897302),r=lr(r,i,a,s,t[5],5,-701558691),s=lr(s,r,i,a,t[10],9,38016083),a=lr(a,s,r,i,t[15],14,-660478335),i=lr(i,a,s,r,t[4],20,-405537848),r=lr(r,i,a,s,t[9],5,568446438),s=lr(s,r,i,a,t[14],9,-1019803690),a=lr(a,s,r,i,t[3],14,-187363961),i=lr(i,a,s,r,t[8],20,1163531501),r=lr(r,i,a,s,t[13],5,-1444681467),s=lr(s,r,i,a,t[2],9,-51403784),a=lr(a,s,r,i,t[7],14,1735328473),r=cr(r,i=lr(i,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=cr(s,r,i,a,t[8],11,-2022574463),a=cr(a,s,r,i,t[11],16,1839030562),i=cr(i,a,s,r,t[14],23,-35309556),r=cr(r,i,a,s,t[1],4,-1530992060),s=cr(s,r,i,a,t[4],11,1272893353),a=cr(a,s,r,i,t[7],16,-155497632),i=cr(i,a,s,r,t[10],23,-1094730640),r=cr(r,i,a,s,t[13],4,681279174),s=cr(s,r,i,a,t[0],11,-358537222),a=cr(a,s,r,i,t[3],16,-722521979),i=cr(i,a,s,r,t[6],23,76029189),r=cr(r,i,a,s,t[9],4,-640364487),s=cr(s,r,i,a,t[12],11,-421815835),a=cr(a,s,r,i,t[15],16,530742520),r=ur(r,i=cr(i,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=ur(s,r,i,a,t[7],10,1126891415),a=ur(a,s,r,i,t[14],15,-1416354905),i=ur(i,a,s,r,t[5],21,-57434055),r=ur(r,i,a,s,t[12],6,1700485571),s=ur(s,r,i,a,t[3],10,-1894986606),a=ur(a,s,r,i,t[10],15,-1051523),i=ur(i,a,s,r,t[1],21,-2054922799),r=ur(r,i,a,s,t[8],6,1873313359),s=ur(s,r,i,a,t[15],10,-30611744),a=ur(a,s,r,i,t[6],15,-1560198380),i=ur(i,a,s,r,t[13],21,1309151649),r=ur(r,i,a,s,t[4],6,-145523070),s=ur(s,r,i,a,t[11],10,-1120210379),a=ur(a,s,r,i,t[2],15,718787259),i=ur(i,a,s,r,t[9],21,-343485551),e[0]=ts(r,e[0]),e[1]=ts(i,e[1]),e[2]=ts(a,e[2]),e[3]=ts(s,e[3])}function Qd(e,t,r,i,a,s){return t=ts(ts(t,e),ts(i,s)),ts(t<<a|t>>>32-a,r)}function or(e,t,r,i,a,s,l){return Qd(t&r|~t&i,e,t,a,s,l)}function lr(e,t,r,i,a,s,l){return Qd(t&i|r&~i,e,t,a,s,l)}function cr(e,t,r,i,a,s,l){return Qd(t^r^i,e,t,a,s,l)}function ur(e,t,r,i,a,s,l){return Qd(r^(t|~i),e,t,a,s,l)}function mx(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)im(i,MN(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(im(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,im(i,a),i}function MN(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}mc=xt.atob.bind(xt),cf=xt.btoa.bind(xt);var xg="0123456789abcdef".split("");function DN(e){for(var t="",r=0;r<4;r++)t+=xg[e>>8*r+4&15]+xg[e>>8*r&15];return t}function TN(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function uf(e){return mx(e).map(TN).join("")}var EN=function(e){for(var t=0;t<e.length;t++)e[t]=DN(e[t]);return e.join("")}(mx("hello"))!="5d41402abc4b2a76b9719d911017c592";function ts(e,t){if(EN){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function df(e,t){var r,i,a,s;if(e!==r){for(var l=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),c=[],u=0;u<256;u++)c[u]=u;var m=0;for(u=0;u<256;u++){var x=c[u];m=(m+x+l.charCodeAt(u))%256,c[u]=c[m],c[m]=x}r=e,i=c}else c=i;var g=t.length,v=0,p=0,j="";for(u=0;u<g;u++)p=(p+(x=c[v=(v+1)%256]))%256,c[v]=c[p],c[p]=x,l=c[(c[v]+c[p])%256],j+=String.fromCharCode(t.charCodeAt(u)^l);return j}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vg={print:4,modify:8,copy:16,"annot-forms":32};function Co(e,t,r,i){this.v=1,this.r=2;var a=192;e.forEach(function(c){if(vg.perm!==void 0)throw new Error("Invalid permission: "+c);a+=vg[c]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,l),this.P=-(1+(255^a)),this.encryptionKey=uf(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=df(this.encryptionKey,this.padding)}function ko(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var a=e.charCodeAt(i);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[i]}return t}function yg(e){if(Qt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,a){if(a=a||!1,typeof r!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[i,!!a],s},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var l=t[r][s];try{l[0].apply(e,i)}catch(c){xt.console&&tn.error("jsPDF PubSub Error",c.message,c)}l[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _d(e){if(!(this instanceof _d))return new _d(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function fx(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ds(e,t,r,i,a){if(!(this instanceof Ds))return new Ds(e,t,r,i,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,fx.call(this,i,a)}function Bo(e,t,r,i,a){if(!(this instanceof Bo))return new Bo(e,t,r,i,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,fx.call(this,i,a)}function gt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],s=arguments[3],l=[],c=1,u=16,m="S",x=null;Qt(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,a=e.format||a,s=e.compress||e.compressPdf||s,(x=e.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),c=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(u=e.floatPrecision),m=e.defaultPathOperation||"S"),l=e.filters||(s===!0?["FlateEncode"]:l),i=i||"mm",r=(""+(r||"P")).toLowerCase();var g=e.putOnlyUsedFonts||!1,v={},p={internal:{},__private__:{}};p.__private__.PubSub=yg;var j="1.3",w=p.__private__.getPdfVersion=function(){return j};p.__private__.setPdfVersion=function(h){j=h};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return A};var N=p.__private__.getPageFormat=function(h){return A[h]};a=a||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},L=b.COMPAT;function G(){this.saveGraphicsState(),Y(new Ge(Ve,0,0,-Ve,0,Ia()*Ve).toString()+" cm"),this.setFontSize(this.getFontSize()/Ve),m="n",L=b.ADVANCED}function ne(){this.restoreGraphicsState(),m="S",L=b.COMPAT}var ce=p.__private__.combineFontStyleAndFontWeight=function(h,k){if(h=="bold"&&k=="normal"||h=="bold"&&k==400||h=="normal"&&k=="italic"||h=="bold"&&k=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return k&&(h=k==400||k==="normal"?h==="italic"?"italic":"normal":k!=700&&k!=="bold"||h!=="normal"?(k==700?"bold":k)+""+h:"bold"),h};p.advancedAPI=function(h){var k=L===b.COMPAT;return k&&G.call(this),typeof h!="function"||(h(this),k&&ne.call(this)),this},p.compatAPI=function(h){var k=L===b.ADVANCED;return k&&ne.call(this),typeof h!="function"||(h(this),k&&G.call(this)),this},p.isAdvancedAPI=function(){return L===b.ADVANCED};var V,O=function(h){if(L!==b.ADVANCED)throw new Error(h+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=p.roundToPrecision=p.__private__.roundToPrecision=function(h,k){var Z=t||k;if(isNaN(h)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return h.toFixed(Z).replace(/0+$/,"")};V=p.hpf=p.__private__.hpf=typeof u=="number"?function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return J(h,u)}:u==="smart"?function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return J(h,h>-1&&h<1?16:5)}:function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.hpf");return J(h,16)};var ee=p.f2=p.__private__.f2=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.f2");return J(h,2)},_=p.__private__.f3=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.f3");return J(h,3)},D=p.scale=p.__private__.scale=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.scale");return L===b.COMPAT?h*Ve:L===b.ADVANCED?h:void 0},E=function(h){return L===b.COMPAT?Ia()-h:L===b.ADVANCED?h:void 0},q=function(h){return D(E(h))};p.__private__.setPrecision=p.setPrecision=function(h){typeof parseInt(h,10)=="number"&&(t=parseInt(h,10))};var ae,ue="00000000000000000000000000000000",we=p.__private__.getFileId=function(){return ue},Q=p.__private__.setFileId=function(h){return ue=h!==void 0&&/^[a-fA-F0-9]{32}$/.test(h)?h.toUpperCase():ue.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(rr=new Co(x.userPermissions,x.userPassword,x.ownerPassword,ue)),ue};p.setFileId=function(h){return Q(h),this},p.getFileId=function(){return we()};var de=p.__private__.convertDateToPDFDate=function(h){var k=h.getTimezoneOffset(),Z=k<0?"+":"-",se=Math.floor(Math.abs(k/60)),ye=Math.abs(k%60),Le=[Z,W(se),"'",W(ye),"'"].join("");return["D:",h.getFullYear(),W(h.getMonth()+1),W(h.getDate()),W(h.getHours()),W(h.getMinutes()),W(h.getSeconds()),Le].join("")},ie=p.__private__.convertPDFDateToDate=function(h){var k=parseInt(h.substr(2,4),10),Z=parseInt(h.substr(6,2),10)-1,se=parseInt(h.substr(8,2),10),ye=parseInt(h.substr(10,2),10),Le=parseInt(h.substr(12,2),10),Oe=parseInt(h.substr(14,2),10);return new Date(k,Z,se,ye,Le,Oe,0)},ze=p.__private__.setCreationDate=function(h){var k;if(h===void 0&&(h=new Date),h instanceof Date)k=de(h);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(h))throw new Error("Invalid argument passed to jsPDF.setCreationDate");k=h}return ae=k},P=p.__private__.getCreationDate=function(h){var k=ae;return h==="jsDate"&&(k=ie(ae)),k};p.setCreationDate=function(h){return ze(h),this},p.getCreationDate=function(h){return P(h)};var $,W=p.__private__.padd2=function(h){return("0"+parseInt(h)).slice(-2)},H=p.__private__.padd2Hex=function(h){return("00"+(h=h.toString())).substr(h.length)},te=0,me=[],xe=[],C=0,K=[],R=[],he=!1,Ce=xe,Re=function(){te=0,C=0,xe=[],me=[],K=[],pr=qt(),$r=qt()};p.__private__.setCustomOutputDestination=function(h){he=!0,Ce=h};var Ne=function(h){he||(Ce=h)};p.__private__.resetCustomOutputDestination=function(){he=!1,Ce=xe};var Y=p.__private__.out=function(h){return h=h.toString(),C+=h.length+1,Ce.push(h),Ce},ht=p.__private__.write=function(h){return Y(arguments.length===1?h.toString():Array.prototype.join.call(arguments," "))},Qe=p.__private__.getArrayBuffer=function(h){for(var k=h.length,Z=new ArrayBuffer(k),se=new Uint8Array(Z);k--;)se[k]=h.charCodeAt(k);return Z},Fe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Fe};var ge=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(h){return ge=L===b.ADVANCED?h/Ve:h,this};var Pe,Se=p.__private__.getFontSize=p.getFontSize=function(){return L===b.COMPAT?ge:ge*Ve},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(h){return qe=h,this},p.__private__.getR2L=p.getR2L=function(){return qe};var $e,Ke=p.__private__.setZoomMode=function(h){var k=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(h))Pe=h;else if(isNaN(h)){if(k.indexOf(h)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+h+'" is not recognized.');Pe=h}else Pe=parseInt(h,10)};p.__private__.getZoomMode=function(){return Pe};var ot,yt=p.__private__.setPageMode=function(h){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(h)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+h+'" is not recognized.');$e=h};p.__private__.getPageMode=function(){return $e};var Pt=p.__private__.setLayoutMode=function(h){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(h)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+h+'" is not recognized.');ot=h};p.__private__.getLayoutMode=function(){return ot},p.__private__.setDisplayMode=p.setDisplayMode=function(h,k,Z){return Ke(h),Pt(k),yt(Z),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(h){if(Object.keys(lt).indexOf(h)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[h]},p.__private__.getDocumentProperties=function(){return lt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(h){for(var k in lt)lt.hasOwnProperty(k)&&h[k]&&(lt[k]=h[k]);return this},p.__private__.setDocumentProperty=function(h,k){if(Object.keys(lt).indexOf(h)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[h]=k};var mt,Ve,Vt,kt,Ht,Tt={},vt={},hn=[],zt={},fr={},nn={},Bn={},$t=null,Bt=0,We=[],M=new yg(p),Ie=e.hotfixes||[],_e={},it={},bt=[],Ge=function h(k,Z,se,ye,Le,Oe){if(!(this instanceof h))return new h(k,Z,se,ye,Le,Oe);isNaN(k)&&(k=1),isNaN(Z)&&(Z=0),isNaN(se)&&(se=0),isNaN(ye)&&(ye=1),isNaN(Le)&&(Le=0),isNaN(Oe)&&(Oe=0),this._matrix=[k,Z,se,ye,Le,Oe]};Object.defineProperty(Ge.prototype,"sx",{get:function(){return this._matrix[0]},set:function(h){this._matrix[0]=h}}),Object.defineProperty(Ge.prototype,"shy",{get:function(){return this._matrix[1]},set:function(h){this._matrix[1]=h}}),Object.defineProperty(Ge.prototype,"shx",{get:function(){return this._matrix[2]},set:function(h){this._matrix[2]=h}}),Object.defineProperty(Ge.prototype,"sy",{get:function(){return this._matrix[3]},set:function(h){this._matrix[3]=h}}),Object.defineProperty(Ge.prototype,"tx",{get:function(){return this._matrix[4]},set:function(h){this._matrix[4]=h}}),Object.defineProperty(Ge.prototype,"ty",{get:function(){return this._matrix[5]},set:function(h){this._matrix[5]=h}}),Object.defineProperty(Ge.prototype,"a",{get:function(){return this._matrix[0]},set:function(h){this._matrix[0]=h}}),Object.defineProperty(Ge.prototype,"b",{get:function(){return this._matrix[1]},set:function(h){this._matrix[1]=h}}),Object.defineProperty(Ge.prototype,"c",{get:function(){return this._matrix[2]},set:function(h){this._matrix[2]=h}}),Object.defineProperty(Ge.prototype,"d",{get:function(){return this._matrix[3]},set:function(h){this._matrix[3]=h}}),Object.defineProperty(Ge.prototype,"e",{get:function(){return this._matrix[4]},set:function(h){this._matrix[4]=h}}),Object.defineProperty(Ge.prototype,"f",{get:function(){return this._matrix[5]},set:function(h){this._matrix[5]=h}}),Object.defineProperty(Ge.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ge.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ge.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ge.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ge.prototype.join=function(h){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(V).join(h)},Ge.prototype.multiply=function(h){var k=h.sx*this.sx+h.shy*this.shx,Z=h.sx*this.shy+h.shy*this.sy,se=h.shx*this.sx+h.sy*this.shx,ye=h.shx*this.shy+h.sy*this.sy,Le=h.tx*this.sx+h.ty*this.shx+this.tx,Oe=h.tx*this.shy+h.ty*this.sy+this.ty;return new Ge(k,Z,se,ye,Le,Oe)},Ge.prototype.decompose=function(){var h=this.sx,k=this.shy,Z=this.shx,se=this.sy,ye=this.tx,Le=this.ty,Oe=Math.sqrt(h*h+k*k),Ze=(h/=Oe)*Z+(k/=Oe)*se;Z-=h*Ze,se-=k*Ze;var dt=Math.sqrt(Z*Z+se*se);return Ze/=dt,h*(se/=dt)<k*(Z/=dt)&&(h=-h,k=-k,Ze=-Ze,Oe=-Oe),{scale:new Ge(Oe,0,0,dt,0,0),translate:new Ge(1,0,0,1,ye,Le),rotate:new Ge(h,k,-k,h,0,0),skew:new Ge(1,0,Ze,1,0,0)}},Ge.prototype.toString=function(h){return this.join(" ")},Ge.prototype.inversed=function(){var h=this.sx,k=this.shy,Z=this.shx,se=this.sy,ye=this.tx,Le=this.ty,Oe=1/(h*se-k*Z),Ze=se*Oe,dt=-k*Oe,At=-Z*Oe,St=h*Oe;return new Ge(Ze,dt,At,St,-Ze*ye-At*Le,-dt*ye-St*Le)},Ge.prototype.applyToPoint=function(h){var k=h.x*this.sx+h.y*this.shx+this.tx,Z=h.x*this.shy+h.y*this.sy+this.ty;return new io(k,Z)},Ge.prototype.applyToRectangle=function(h){var k=this.applyToPoint(h),Z=this.applyToPoint(new io(h.x+h.w,h.y+h.h));return new Nl(k.x,k.y,Z.x-k.x,Z.y-k.y)},Ge.prototype.clone=function(){var h=this.sx,k=this.shy,Z=this.shx,se=this.sy,ye=this.tx,Le=this.ty;return new Ge(h,k,Z,se,ye,Le)},p.Matrix=Ge;var Gt=p.matrixMult=function(h,k){return k.multiply(h)},_t=new Ge(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=_t;var Wt=function(h,k){if(!fr[h]){var Z=(k instanceof Ds?"Sh":"P")+(Object.keys(zt).length+1).toString(10);k.id=Z,fr[h]=Z,zt[Z]=k,M.publish("addPattern",k)}};p.ShadingPattern=Ds,p.TilingPattern=Bo,p.addShadingPattern=function(h,k){return O("addShadingPattern()"),Wt(h,k),this},p.beginTilingPattern=function(h){O("beginTilingPattern()"),Gc(h.boundingBox[0],h.boundingBox[1],h.boundingBox[2]-h.boundingBox[0],h.boundingBox[3]-h.boundingBox[1],h.matrix)},p.endTilingPattern=function(h,k){O("endTilingPattern()"),k.stream=R[$].join(`
`),Wt(h,k),M.publish("endTilingPattern",k),bt.pop().restore()};var Jt=p.__private__.newObject=function(){var h=qt();return qn(h,!0),h},qt=p.__private__.newObjectDeferred=function(){return te++,me[te]=function(){return C},te},qn=function(h,k){return k=typeof k=="boolean"&&k,me[h]=C,k&&Y(h+" 0 obj"),h},qr=p.__private__.newAdditionalObject=function(){var h={objId:qt(),content:""};return K.push(h),h},pr=qt(),$r=qt(),Ur=p.__private__.decodeColorString=function(h){var k=h.split(" ");if(k.length!==2||k[1]!=="g"&&k[1]!=="G")k.length===5&&(k[4]==="k"||k[4]==="K")&&(k=[(1-k[0])*(1-k[3]),(1-k[1])*(1-k[3]),(1-k[2])*(1-k[3]),"r"]);else{var Z=parseFloat(k[0]);k=[Z,Z,Z,"r"]}for(var se="#",ye=0;ye<3;ye++)se+=("0"+Math.floor(255*parseFloat(k[ye])).toString(16)).slice(-2);return se},Ar=p.__private__.encodeColorString=function(h){var k;typeof h=="string"&&(h={ch1:h});var Z=h.ch1,se=h.ch2,ye=h.ch3,Le=h.ch4,Oe=h.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var Ze=new hx(Z);if(Ze.ok)Z=Ze.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var dt=parseInt(Z.substr(1),16);Z=dt>>16&255,se=dt>>8&255,ye=255&dt}if(se===void 0||Le===void 0&&Z===se&&se===ye)if(typeof Z=="string")k=Z+" "+Oe[0];else switch(h.precision){case 2:k=ee(Z/255)+" "+Oe[0];break;case 3:default:k=_(Z/255)+" "+Oe[0]}else if(Le===void 0||Qt(Le)==="object"){if(Le&&!isNaN(Le.a)&&Le.a===0)return k=["1.","1.","1.",Oe[1]].join(" ");if(typeof Z=="string")k=[Z,se,ye,Oe[1]].join(" ");else switch(h.precision){case 2:k=[ee(Z/255),ee(se/255),ee(ye/255),Oe[1]].join(" ");break;default:case 3:k=[_(Z/255),_(se/255),_(ye/255),Oe[1]].join(" ")}}else if(typeof Z=="string")k=[Z,se,ye,Le,Oe[2]].join(" ");else switch(h.precision){case 2:k=[ee(Z),ee(se),ee(ye),ee(Le),Oe[2]].join(" ");break;case 3:default:k=[_(Z),_(se),_(ye),_(Le),Oe[2]].join(" ")}return k},ti=p.__private__.getFilters=function(){return l},Lr=p.__private__.putStream=function(h){var k=(h=h||{}).data||"",Z=h.filters||ti(),se=h.alreadyAppliedFilters||[],ye=h.addLength1||!1,Le=k.length,Oe=h.objectId,Ze=function(ir){return ir};if(x!==null&&Oe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(Ze=rr.encryptor(Oe,0));var dt={};Z===!0&&(Z=["FlateEncode"]);var At=h.additionalKeyValues||[],St=(dt=gt.API.processDataByFilters!==void 0?gt.API.processDataByFilters(k,Z):{data:k,reverseChain:[]}).reverseChain+(Array.isArray(se)?se.join(" "):se.toString());if(dt.data.length!==0&&(At.push({key:"Length",value:dt.data.length}),ye===!0&&At.push({key:"Length1",value:Le})),St.length!=0)if(St.split("/").length-1==1)At.push({key:"Filter",value:St});else{At.push({key:"Filter",value:"["+St+"]"});for(var Et=0;Et<At.length;Et+=1)if(At[Et].key==="DecodeParms"){for(var pn=[],Nn=0;Nn<dt.reverseChain.split("/").length-1;Nn+=1)pn.push("null");pn.push(At[Et].value),At[Et].value="["+pn.join(" ")+"]"}}Y("<<");for(var _n=0;_n<At.length;_n++)Y("/"+At[_n].key+" "+At[_n].value);Y(">>"),dt.data.length!==0&&(Y("stream"),Y(Ze(dt.data)),Y("endstream"))},Dn=p.__private__.putPage=function(h){var k=h.number,Z=h.data,se=h.objId,ye=h.contentsObjId;qn(se,!0),Y("<</Type /Page"),Y("/Parent "+h.rootDictionaryObjId+" 0 R"),Y("/Resources "+h.resourceDictionaryObjId+" 0 R"),Y("/MediaBox ["+parseFloat(V(h.mediaBox.bottomLeftX))+" "+parseFloat(V(h.mediaBox.bottomLeftY))+" "+V(h.mediaBox.topRightX)+" "+V(h.mediaBox.topRightY)+"]"),h.cropBox!==null&&Y("/CropBox ["+V(h.cropBox.bottomLeftX)+" "+V(h.cropBox.bottomLeftY)+" "+V(h.cropBox.topRightX)+" "+V(h.cropBox.topRightY)+"]"),h.bleedBox!==null&&Y("/BleedBox ["+V(h.bleedBox.bottomLeftX)+" "+V(h.bleedBox.bottomLeftY)+" "+V(h.bleedBox.topRightX)+" "+V(h.bleedBox.topRightY)+"]"),h.trimBox!==null&&Y("/TrimBox ["+V(h.trimBox.bottomLeftX)+" "+V(h.trimBox.bottomLeftY)+" "+V(h.trimBox.topRightX)+" "+V(h.trimBox.topRightY)+"]"),h.artBox!==null&&Y("/ArtBox ["+V(h.artBox.bottomLeftX)+" "+V(h.artBox.bottomLeftY)+" "+V(h.artBox.topRightX)+" "+V(h.artBox.topRightY)+"]"),typeof h.userUnit=="number"&&h.userUnit!==1&&Y("/UserUnit "+h.userUnit),M.publish("putPage",{objId:se,pageContext:We[k],pageNumber:k,page:Z}),Y("/Contents "+ye+" 0 R"),Y(">>"),Y("endobj");var Le=Z.join(`
`);return L===b.ADVANCED&&(Le+=`
Q`),qn(ye,!0),Lr({data:Le,filters:ti(),objectId:ye}),Y("endobj"),se},Ki=p.__private__.putPages=function(){var h,k,Z=[];for(h=1;h<=Bt;h++)We[h].objId=qt(),We[h].contentsObjId=qt();for(h=1;h<=Bt;h++)Z.push(Dn({number:h,data:R[h],objId:We[h].objId,contentsObjId:We[h].contentsObjId,mediaBox:We[h].mediaBox,cropBox:We[h].cropBox,bleedBox:We[h].bleedBox,trimBox:We[h].trimBox,artBox:We[h].artBox,userUnit:We[h].userUnit,rootDictionaryObjId:pr,resourceDictionaryObjId:$r}));qn(pr,!0),Y("<</Type /Pages");var se="/Kids [";for(k=0;k<Bt;k++)se+=Z[k]+" 0 R ";Y(se+"]"),Y("/Count "+Bt),Y(">>"),Y("endobj"),M.publish("postPutPages")},ja=function(h){M.publish("putFont",{font:h,out:Y,newObject:Jt,putStream:Lr}),h.isAlreadyPutted!==!0&&(h.objectNumber=Jt(),Y("<<"),Y("/Type /Font"),Y("/BaseFont /"+ko(h.postScriptName)),Y("/Subtype /Type1"),typeof h.encoding=="string"&&Y("/Encoding /"+h.encoding),Y("/FirstChar 32"),Y("/LastChar 255"),Y(">>"),Y("endobj"))},Zi=function(){for(var h in Tt)Tt.hasOwnProperty(h)&&(g===!1||g===!0&&v.hasOwnProperty(h))&&ja(Tt[h])},Sa=function(h){h.objectNumber=Jt();var k=[];k.push({key:"Type",value:"/XObject"}),k.push({key:"Subtype",value:"/Form"}),k.push({key:"BBox",value:"["+[V(h.x),V(h.y),V(h.x+h.width),V(h.y+h.height)].join(" ")+"]"}),k.push({key:"Matrix",value:"["+h.matrix.toString()+"]"});var Z=h.pages[1].join(`
`);Lr({data:Z,additionalKeyValues:k,objectId:h.objectNumber}),Y("endobj")},Ca=function(){for(var h in _e)_e.hasOwnProperty(h)&&Sa(_e[h])},Ys=function(h,k){var Z,se=[],ye=1/(k-1);for(Z=0;Z<1;Z+=ye)se.push(Z);if(se.push(1),h[0].offset!=0){var Le={offset:0,color:h[0].color};h.unshift(Le)}if(h[h.length-1].offset!=1){var Oe={offset:1,color:h[h.length-1].color};h.push(Oe)}for(var Ze="",dt=0,At=0;At<se.length;At++){for(Z=se[At];Z>h[dt+1].offset;)dt++;var St=h[dt].offset,Et=(Z-St)/(h[dt+1].offset-St),pn=h[dt].color,Nn=h[dt+1].color;Ze+=H(Math.round((1-Et)*pn[0]+Et*Nn[0]).toString(16))+H(Math.round((1-Et)*pn[1]+Et*Nn[1]).toString(16))+H(Math.round((1-Et)*pn[2]+Et*Nn[2]).toString(16))}return Ze.trim()},ul=function(h,k){k||(k=21);var Z=Jt(),se=Ys(h.colors,k),ye=[];ye.push({key:"FunctionType",value:"0"}),ye.push({key:"Domain",value:"[0.0 1.0]"}),ye.push({key:"Size",value:"["+k+"]"}),ye.push({key:"BitsPerSample",value:"8"}),ye.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ye.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Lr({data:se,additionalKeyValues:ye,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),Y("endobj"),h.objectNumber=Jt(),Y("<< /ShadingType "+h.type),Y("/ColorSpace /DeviceRGB");var Le="/Coords ["+V(parseFloat(h.coords[0]))+" "+V(parseFloat(h.coords[1]))+" ";h.type===2?Le+=V(parseFloat(h.coords[2]))+" "+V(parseFloat(h.coords[3])):Le+=V(parseFloat(h.coords[2]))+" "+V(parseFloat(h.coords[3]))+" "+V(parseFloat(h.coords[4]))+" "+V(parseFloat(h.coords[5])),Y(Le+="]"),h.matrix&&Y("/Matrix ["+h.matrix.toString()+"]"),Y("/Function "+Z+" 0 R"),Y("/Extend [true true]"),Y(">>"),Y("endobj")},dl=function(h,k){var Z=qt(),se=Jt();k.push({resourcesOid:Z,objectOid:se}),h.objectNumber=se;var ye=[];ye.push({key:"Type",value:"/Pattern"}),ye.push({key:"PatternType",value:"1"}),ye.push({key:"PaintType",value:"1"}),ye.push({key:"TilingType",value:"1"}),ye.push({key:"BBox",value:"["+h.boundingBox.map(V).join(" ")+"]"}),ye.push({key:"XStep",value:V(h.xStep)}),ye.push({key:"YStep",value:V(h.yStep)}),ye.push({key:"Resources",value:Z+" 0 R"}),h.matrix&&ye.push({key:"Matrix",value:"["+h.matrix.toString()+"]"}),Lr({data:h.stream,additionalKeyValues:ye,objectId:h.objectNumber}),Y("endobj")},ka=function(h){var k;for(k in zt)zt.hasOwnProperty(k)&&(zt[k]instanceof Ds?ul(zt[k]):zt[k]instanceof Bo&&dl(zt[k],h))},Qs=function(h){for(var k in h.objectNumber=Jt(),Y("<<"),h)switch(k){case"opacity":Y("/ca "+ee(h[k]));break;case"stroke-opacity":Y("/CA "+ee(h[k]))}Y(">>"),Y("endobj")},hl=function(){var h;for(h in nn)nn.hasOwnProperty(h)&&Qs(nn[h])},xs=function(){for(var h in Y("/XObject <<"),_e)_e.hasOwnProperty(h)&&_e[h].objectNumber>=0&&Y("/"+h+" "+_e[h].objectNumber+" 0 R");M.publish("putXobjectDict"),Y(">>")},ea=function(){rr.oid=Jt(),Y("<<"),Y("/Filter /Standard"),Y("/V "+rr.v),Y("/R "+rr.r),Y("/U <"+rr.toHexString(rr.U)+">"),Y("/O <"+rr.toHexString(rr.O)+">"),Y("/P "+rr.P),Y(">>"),Y("endobj")},ni=function(){for(var h in Y("/Font <<"),Tt)Tt.hasOwnProperty(h)&&(g===!1||g===!0&&v.hasOwnProperty(h))&&Y("/"+h+" "+Tt[h].objectNumber+" 0 R");Y(">>")},Tn=function(){if(Object.keys(zt).length>0){for(var h in Y("/Shading <<"),zt)zt.hasOwnProperty(h)&&zt[h]instanceof Ds&&zt[h].objectNumber>=0&&Y("/"+h+" "+zt[h].objectNumber+" 0 R");M.publish("putShadingPatternDict"),Y(">>")}},ri=function(h){if(Object.keys(zt).length>0){for(var k in Y("/Pattern <<"),zt)zt.hasOwnProperty(k)&&zt[k]instanceof p.TilingPattern&&zt[k].objectNumber>=0&&zt[k].objectNumber<h&&Y("/"+k+" "+zt[k].objectNumber+" 0 R");M.publish("putTilingPatternDict"),Y(">>")}},ml=function(){if(Object.keys(nn).length>0){var h;for(h in Y("/ExtGState <<"),nn)nn.hasOwnProperty(h)&&nn[h].objectNumber>=0&&Y("/"+h+" "+nn[h].objectNumber+" 0 R");M.publish("putGStateDict"),Y(">>")}},mn=function(h){qn(h.resourcesOid,!0),Y("<<"),Y("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ni(),Tn(),ri(h.objectOid),ml(),xs(),Y(">>"),Y("endobj")},Ks=function(){var h=[];Zi(),hl(),Ca(),ka(h),M.publish("putResources"),h.forEach(mn),mn({resourcesOid:$r,objectOid:Number.MAX_SAFE_INTEGER}),M.publish("postPutResources")},ta=function(){M.publish("putAdditionalObjects");for(var h=0;h<K.length;h++){var k=K[h];qn(k.objId,!0),Y(k.content),Y("endobj")}M.publish("postPutAdditionalObjects")},vs=function(h){vt[h.fontName]=vt[h.fontName]||{},vt[h.fontName][h.fontStyle]=h.id},Aa=function(h,k,Z,se,ye){var Le={id:"F"+(Object.keys(Tt).length+1).toString(10),postScriptName:h,fontName:k,fontStyle:Z,encoding:se,isStandardFont:ye||!1,metadata:{}};return M.publish("addFont",{font:Le,instance:this}),Tt[Le.id]=Le,vs(Le),Le.id},Zs=function(h){for(var k=0,Z=Fe.length;k<Z;k++){var se=Aa.call(this,h[k][0],h[k][1],h[k][2],Fe[k][3],!0);g===!1&&(v[se]=!0);var ye=h[k][0].split("-");vs({id:se,fontName:ye[0],fontStyle:ye[1]||""})}M.publish("addFonts",{fonts:Tt,dictionary:vt})},Pr=function(h){return h.foo=function(){try{return h.apply(this,arguments)}catch(se){var k=se.stack||"";~k.indexOf(" at ")&&(k=k.split(" at ")[1]);var Z="Error in function "+k.split(`
`)[0].split("<")[0]+": "+se.message;if(!xt.console)throw new Error(Z);xt.console.error(Z,se),xt.alert&&alert(Z)}},h.foo.bar=h,h.foo},na=function(h,k){var Z,se,ye,Le,Oe,Ze,dt,At,St;if(ye=(k=k||{}).sourceEncoding||"Unicode",Oe=k.outputEncoding,(k.autoencode||Oe)&&Tt[mt].metadata&&Tt[mt].metadata[ye]&&Tt[mt].metadata[ye].encoding&&(Le=Tt[mt].metadata[ye].encoding,!Oe&&Tt[mt].encoding&&(Oe=Tt[mt].encoding),!Oe&&Le.codePages&&(Oe=Le.codePages[0]),typeof Oe=="string"&&(Oe=Le[Oe]),Oe)){for(dt=!1,Ze=[],Z=0,se=h.length;Z<se;Z++)(At=Oe[h.charCodeAt(Z)])?Ze.push(String.fromCharCode(At)):Ze.push(h[Z]),Ze[Z].charCodeAt(0)>>8&&(dt=!0);h=Ze.join("")}for(Z=h.length;dt===void 0&&Z!==0;)h.charCodeAt(Z-1)>>8&&(dt=!0),Z--;if(!dt)return h;for(Ze=k.noBOM?[]:[254,255],Z=0,se=h.length;Z<se;Z++){if((St=(At=h.charCodeAt(Z))>>8)>>8)throw new Error("Character at position "+Z+" of string '"+h+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ze.push(St),Ze.push(At-(St<<8))}return String.fromCharCode.apply(void 0,Ze)},Xn=p.__private__.pdfEscape=p.pdfEscape=function(h,k){return na(h,k).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},La=p.__private__.beginPage=function(h){R[++Bt]=[],We[Bt]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(h[0]),topRightY:Number(h[1])}},ke(Bt),Ne(R[$])},ys=function(h,k){var Z,se,ye;switch(r=k||r,typeof h=="string"&&(Z=N(h.toLowerCase()),Array.isArray(Z)&&(se=Z[0],ye=Z[1])),Array.isArray(h)&&(se=h[0]*Ve,ye=h[1]*Ve),isNaN(se)&&(se=a[0],ye=a[1]),(se>14400||ye>14400)&&(tn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),se=Math.min(14400,se),ye=Math.min(14400,ye)),a=[se,ye],r.substr(0,1)){case"l":ye>se&&(a=[ye,se]);break;case"p":se>ye&&(a=[ye,se])}La(a),qc(gl),Y(Ni),vl!==0&&Y(vl+" J"),yl!==0&&Y(yl+" j"),M.publish("addPage",{pageNumber:Bt})},B=function(h){h>0&&h<=Bt&&(R.splice(h,1),We.splice(h,1),Bt--,$>Bt&&($=Bt),this.setPage($))},ke=function(h){h>0&&h<=Bt&&($=h)},Be=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return R.length-1},jt=function(h,k,Z){var se,ye=void 0;return Z=Z||{},h=h!==void 0?h:Tt[mt].fontName,k=k!==void 0?k:Tt[mt].fontStyle,se=h.toLowerCase(),vt[se]!==void 0&&vt[se][k]!==void 0?ye=vt[se][k]:vt[h]!==void 0&&vt[h][k]!==void 0?ye=vt[h][k]:Z.disableWarning===!1&&tn.warn("Unable to look up font label for font '"+h+"', '"+k+"'. Refer to getFontList() for available fonts."),ye||Z.noFallback||(ye=vt.times[k])==null&&(ye=vt.times.normal),ye},ft=p.__private__.putInfo=function(){var h=Jt(),k=function(se){return se};for(var Z in x!==null&&(k=rr.encryptor(h,0)),Y("<<"),Y("/Producer ("+Xn(k("jsPDF "+gt.version))+")"),lt)lt.hasOwnProperty(Z)&&lt[Z]&&Y("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+Xn(k(lt[Z]))+")");Y("/CreationDate ("+Xn(k(ae))+")"),Y(">>"),Y("endobj")},Nt=p.__private__.putCatalog=function(h){var k=(h=h||{}).rootDictionaryObjId||pr;switch(Jt(),Y("<<"),Y("/Type /Catalog"),Y("/Pages "+k+" 0 R"),Pe||(Pe="fullwidth"),Pe){case"fullwidth":Y("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Y("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Y("/OpenAction [3 0 R /Fit]");break;case"original":Y("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+Pe;Z.substr(Z.length-1)==="%"&&(Pe=parseInt(Pe)/100),typeof Pe=="number"&&Y("/OpenAction [3 0 R /XYZ null null "+ee(Pe)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":Y("/PageLayout /OneColumn");break;case"single":Y("/PageLayout /SinglePage");break;case"two":case"twoleft":Y("/PageLayout /TwoColumnLeft");break;case"tworight":Y("/PageLayout /TwoColumnRight")}$e&&Y("/PageMode /"+$e),M.publish("putCatalog"),Y(">>"),Y("endobj")},It=p.__private__.putTrailer=function(){Y("trailer"),Y("<<"),Y("/Size "+(te+1)),Y("/Root "+te+" 0 R"),Y("/Info "+(te-1)+" 0 R"),x!==null&&Y("/Encrypt "+rr.oid+" 0 R"),Y("/ID [ <"+ue+"> <"+ue+"> ]"),Y(">>")},fn=p.__private__.putHeader=function(){Y("%PDF-"+j),Y("%")},Fi=p.__private__.putXRef=function(){var h="0000000000";Y("xref"),Y("0 "+(te+1)),Y("0000000000 65535 f ");for(var k=1;k<=te;k++)typeof me[k]=="function"?Y((h+me[k]()).slice(-10)+" 00000 n "):me[k]!==void 0?Y((h+me[k]).slice(-10)+" 00000 n "):Y("0000000000 00000 n ")},Ft=p.__private__.buildDocument=function(){Re(),Ne(xe),M.publish("buildDocument"),fn(),Ki(),ta(),Ks(),x!==null&&ea(),ft(),Nt();var h=C;return Fi(),It(),Y("startxref"),Y(""+h),Y("%%EOF"),Ne(R[$]),xe.join(`
`)},gr=p.__private__.getBlob=function(h){return new Blob([Qe(h)],{type:"application/pdf"})},Pa=p.output=p.__private__.output=Pr(function(h,k){switch(typeof(k=k||{})=="string"?k={filename:k}:k.filename=k.filename||"generated.pdf",h){case void 0:return Ft();case"save":p.save(k.filename);break;case"arraybuffer":return Qe(Ft());case"blob":return gr(Ft());case"bloburi":case"bloburl":if(xt.URL!==void 0&&typeof xt.URL.createObjectURL=="function")return xt.URL&&xt.URL.createObjectURL(gr(Ft()))||void 0;tn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",se=Ft();try{Z=cf(se)}catch{Z=cf(unescape(encodeURIComponent(se)))}return"data:application/pdf;filename="+k.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xt)==="[object Window]"){var ye="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Le=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';k.pdfObjectUrl&&(ye=k.pdfObjectUrl,Le="");var Oe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ye+'"'+Le+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(k)+");<\/script></body></html>",Ze=xt.open();return Ze!==null&&Ze.document.write(Oe),Ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xt)==="[object Window]"){var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(k.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+k.filename+'" width="500px" height="400px" /></body></html>',At=xt.open();if(At!==null){At.document.write(dt);var St=this;At.document.documentElement.querySelector("#pdfViewer").onload=function(){At.document.title=k.filename,At.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(St.output("bloburl"))}}return At}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",k)+'"></iframe></body></html>',pn=xt.open();if(pn!==null&&(pn.document.write(Et),pn.document.title=k.filename),pn||typeof safari>"u")return pn;break;case"datauri":case"dataurl":return xt.document.location.href=this.output("datauristring",k);default:return null}}),eo=function(h){return Array.isArray(Ie)===!0&&Ie.indexOf(h)>-1};switch(i){case"pt":Ve=1;break;case"mm":Ve=72/25.4;break;case"cm":Ve=72/2.54;break;case"in":Ve=72;break;case"px":Ve=eo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ve=12;break;case"ex":Ve=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Ve=i}var rr=null;ze(),Q();var Kd=function(h){return x!==null?rr.encryptor(h,0):function(k){return k}},Oc=p.__private__.getPageInfo=p.getPageInfo=function(h){if(isNaN(h)||h%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:We[h].objId,pageNumber:h,pageContext:We[h]}},wt=p.__private__.getPageInfoByObjId=function(h){if(isNaN(h)||h%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var k in We)if(We[k].objId===h)break;return Oc(k)},Zd=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:We[$].objId,pageNumber:$,pageContext:We[$]}};p.addPage=function(){return ys.apply(this,arguments),this},p.setPage=function(){return ke.apply(this,arguments),Ne.call(this,R[$]),this},p.insertPage=function(h){return this.addPage(),this.movePage($,h),this},p.movePage=function(h,k){var Z,se;if(h>k){Z=R[h],se=We[h];for(var ye=h;ye>k;ye--)R[ye]=R[ye-1],We[ye]=We[ye-1];R[k]=Z,We[k]=se,this.setPage(k)}else if(h<k){Z=R[h],se=We[h];for(var Le=h;Le<k;Le++)R[Le]=R[Le+1],We[Le]=We[Le+1];R[k]=Z,We[k]=se,this.setPage(k)}return this},p.deletePage=function(){return B.apply(this,arguments),this},p.__private__.text=p.text=function(h,k,Z,se,ye){var Le,Oe,Ze,dt,At,St,Et,pn,Nn,_n=(se=se||{}).scope||this;if(typeof h=="number"&&typeof k=="number"&&(typeof Z=="string"||Array.isArray(Z))){var ir=Z;Z=k,k=h,h=ir}if(arguments[3]instanceof Ge?(O("The transform parameter of text() with a Matrix value"),Nn=ye):(Ze=arguments[4],dt=arguments[5],Qt(Et=arguments[3])==="object"&&Et!==null||(typeof Ze=="string"&&(dt=Ze,Ze=null),typeof Et=="string"&&(dt=Et,Et=null),typeof Et=="number"&&(Ze=Et,Et=null),se={flags:Et,angle:Ze,align:dt})),isNaN(k)||isNaN(Z)||h==null)throw new Error("Invalid arguments passed to jsPDF.text");if(h.length===0)return _n;var $n="",wi=!1,Vr=typeof se.lineHeightFactor=="number"?se.lineHeightFactor:ws,Bi=_n.internal.scaleFactor;function Wc(rn){return rn=rn.split("	").join(Array(se.TabLen||9).join(" ")),Xn(rn,Et)}function Sl(rn){for(var an,Cn=rn.concat(),En=[],oa=Cn.length;oa--;)typeof(an=Cn.shift())=="string"?En.push(an):Array.isArray(rn)&&(an.length===1||an[1]===void 0&&an[2]===void 0)?En.push(an[0]):En.push([an[0],an[1],an[2]]);return En}function Cl(rn,an){var Cn;if(typeof rn=="string")Cn=an(rn)[0];else if(Array.isArray(rn)){for(var En,oa,Ml=rn.concat(),go=[],Kc=Ml.length;Kc--;)typeof(En=Ml.shift())=="string"?go.push(an(En)[0]):Array.isArray(En)&&typeof En[0]=="string"&&(oa=an(En[0],En[1],En[2]),go.push([oa[0],oa[1],oa[2]]));Cn=go}return Cn}var so=!1,kl=!0;if(typeof h=="string")so=!0;else if(Array.isArray(h)){var Al=h.concat();Oe=[];for(var oo,Yn=Al.length;Yn--;)(typeof(oo=Al.shift())!="string"||Array.isArray(oo)&&typeof oo[0]!="string")&&(kl=!1);so=kl}if(so===!1)throw new Error('Type of text must be string or Array. "'+h+'" is not recognized.');typeof h=="string"&&(h=h.match(/[\r?\n]/)?h.split(/\r\n|\r|\n/g):[h]);var lo=ge/_n.internal.scaleFactor,co=lo*(Vr-1);switch(se.baseline){case"bottom":Z-=co;break;case"top":Z+=lo-co;break;case"hanging":Z+=lo-2*co;break;case"middle":Z+=lo/2-co}if((St=se.maxWidth||0)>0&&(typeof h=="string"?h=_n.splitTextToSize(h,St):Object.prototype.toString.call(h)==="[object Array]"&&(h=h.reduce(function(rn,an){return rn.concat(_n.splitTextToSize(an,St))},[]))),Le={text:h,x:k,y:Z,options:se,mutex:{pdfEscape:Xn,activeFontKey:mt,fonts:Tt,activeFontSize:ge}},M.publish("preProcessText",Le),h=Le.text,Ze=(se=Le.options).angle,!(Nn instanceof Ge)&&Ze&&typeof Ze=="number"){Ze*=Math.PI/180,se.rotationDirection===0&&(Ze=-Ze),L===b.ADVANCED&&(Ze=-Ze);var uo=Math.cos(Ze),Ll=Math.sin(Ze);Nn=new Ge(uo,Ll,-Ll,uo,0,0)}else Ze&&Ze instanceof Ge&&(Nn=Ze);L!==b.ADVANCED||Nn||(Nn=_t),(At=se.charSpace||ro)!==void 0&&($n+=V(D(At))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pn=se.horizontalScale)!==void 0&&($n+=V(100*pn)+` Tz
`),se.lang;var _r=-1,ch=se.renderingMode!==void 0?se.renderingMode:se.stroke,Pl=_n.internal.getCurrentPageInfo().pageContext;switch(ch){case 0:case!1:case"fill":_r=0;break;case 1:case!0:case"stroke":_r=1;break;case 2:case"fillThenStroke":_r=2;break;case 3:case"invisible":_r=3;break;case 4:case"fillAndAddForClipping":_r=4;break;case 5:case"strokeAndAddPathForClipping":_r=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":_r=6;break;case 7:case"addToPathForClipping":_r=7}var Jc=Pl.usedRenderingMode!==void 0?Pl.usedRenderingMode:-1;_r!==-1?$n+=_r+` Tr
`:Jc!==-1&&($n+=`0 Tr
`),_r!==-1&&(Pl.usedRenderingMode=_r),dt=se.align||"left";var ii,ho=ge*Vr,Xc=_n.internal.pageSize.getWidth(),Yc=Tt[mt];At=se.charSpace||ro,St=se.maxWidth||0,Et=Object.assign({autoencode:!0,noBOM:!0},se.flags);var Ma=[],Ss=function(rn){return _n.getStringUnitWidth(rn,{font:Yc,charSpace:At,fontSize:ge,doKerning:!1})*ge/Bi};if(Object.prototype.toString.call(h)==="[object Array]"){var zr;Oe=Sl(h),dt!=="left"&&(ii=Oe.map(Ss));var xr,Da=0;if(dt==="right"){k-=ii[0],h=[],Yn=Oe.length;for(var ia=0;ia<Yn;ia++)ia===0?(xr=Ri(k),zr=ra(Z)):(xr=D(Da-ii[ia]),zr=-ho),h.push([Oe[ia],xr,zr]),Da=ii[ia]}else if(dt==="center"){k-=ii[0]/2,h=[],Yn=Oe.length;for(var aa=0;aa<Yn;aa++)aa===0?(xr=Ri(k),zr=ra(Z)):(xr=D((Da-ii[aa])/2),zr=-ho),h.push([Oe[aa],xr,zr]),Da=ii[aa]}else if(dt==="left"){h=[],Yn=Oe.length;for(var mo=0;mo<Yn;mo++)h.push(Oe[mo])}else if(dt==="justify"&&Yc.encoding==="Identity-H"){h=[],Yn=Oe.length,St=St!==0?St:Xc;for(var sa=0,Sn=0;Sn<Yn;Sn++)if(zr=Sn===0?ra(Z):-ho,xr=Sn===0?Ri(k):sa,Sn<Yn-1){var _l=D((St-ii[Sn])/(Oe[Sn].split(" ").length-1)),vr=Oe[Sn].split(" ");h.push([vr[0]+" ",xr,zr]),sa=0;for(var ai=1;ai<vr.length;ai++){var fo=(Ss(vr[ai-1]+" "+vr[ai])-Ss(vr[ai]))*Bi+_l;ai==vr.length-1?h.push([vr[ai],fo,0]):h.push([vr[ai]+" ",fo,0]),sa-=fo}}else h.push([Oe[Sn],xr,zr]);h.push(["",sa,0])}else{if(dt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(h=[],Yn=Oe.length,St=St!==0?St:Xc,Sn=0;Sn<Yn;Sn++)zr=Sn===0?ra(Z):-ho,xr=Sn===0?Ri(k):0,Sn<Yn-1?Ma.push(V(D((St-ii[Sn])/(Oe[Sn].split(" ").length-1)))):Ma.push(0),h.push([Oe[Sn],xr,zr])}}var Qc=typeof se.R2L=="boolean"?se.R2L:qe;Qc===!0&&(h=Cl(h,function(rn,an,Cn){return[rn.split("").reverse().join(""),an,Cn]})),Le={text:h,x:k,y:Z,options:se,mutex:{pdfEscape:Xn,activeFontKey:mt,fonts:Tt,activeFontSize:ge}},M.publish("postProcessText",Le),h=Le.text,wi=Le.mutex.isHex||!1;var zl=Tt[mt].encoding;zl!=="WinAnsiEncoding"&&zl!=="StandardEncoding"||(h=Cl(h,function(rn,an,Cn){return[Wc(rn),an,Cn]})),Oe=Sl(h),h=[];for(var Cs,ks,Ta,As=0,po=1,Ls=Array.isArray(Oe[0])?po:As,Ea="",Il=function(rn,an,Cn){var En="";return Cn instanceof Ge?(Cn=typeof se.angle=="number"?Gt(Cn,new Ge(1,0,0,1,rn,an)):Gt(new Ge(1,0,0,1,rn,an),Cn),L===b.ADVANCED&&(Cn=Gt(new Ge(1,0,0,-1,0,0),Cn)),En=Cn.join(" ")+` Tm
`):En=V(rn)+" "+V(an)+` Td
`,En},si=0;si<Oe.length;si++){switch(Ea="",Ls){case po:Ta=(wi?"<":"(")+Oe[si][0]+(wi?">":")"),Cs=parseFloat(Oe[si][1]),ks=parseFloat(Oe[si][2]);break;case As:Ta=(wi?"<":"(")+Oe[si]+(wi?">":")"),Cs=Ri(k),ks=ra(Z)}Ma!==void 0&&Ma[si]!==void 0&&(Ea=Ma[si]+` Tw
`),si===0?h.push(Ea+Il(Cs,ks,Nn)+Ta):Ls===As?h.push(Ea+Ta):Ls===po&&h.push(Ea+Il(Cs,ks,Nn)+Ta)}h=Ls===As?h.join(` Tj
T* `):h.join(` Tj
`),h+=` Tj
`;var oi=`BT
/`;return oi+=mt+" "+ge+` Tf
`,oi+=V(ge*Vr)+` TL
`,oi+=bs+`
`,oi+=$n,oi+=h,Y(oi+="ET"),v[mt]=!0,_n};var eh=p.__private__.clip=p.clip=function(h){return Y(h==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return eh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Y("n"),this};var Oi=p.__private__.isValidStyle=function(h){var k=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(h)!==-1&&(k=!0),k};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(h){return Oi(h)&&(m=h),this};var Rc=p.__private__.getStyle=p.getStyle=function(h){var k=m;switch(h){case"D":case"S":k="S";break;case"F":k="f";break;case"FD":case"DF":k="B";break;case"f":case"f*":case"B":case"B*":k=h}return k},Bc=p.close=function(){return Y("h"),this};p.stroke=function(){return Y("S"),this},p.fill=function(h){return to("f",h),this},p.fillEvenOdd=function(h){return to("f*",h),this},p.fillStroke=function(h){return to("B",h),this},p.fillStrokeEvenOdd=function(h){return to("B*",h),this};var to=function(h,k){Qt(k)==="object"?nh(k,h):Y(h)},fl=function(h){h===null||L===b.ADVANCED&&h===void 0||(h=Rc(h),Y(h))};function th(h,k,Z,se,ye){var Le=new Bo(k||this.boundingBox,Z||this.xStep,se||this.yStep,this.gState,ye||this.matrix);Le.stream=this.stream;var Oe=h+"$$"+this.cloneIndex+++"$$";return Wt(Oe,Le),Le}var nh=function(h,k){var Z=fr[h.key],se=zt[Z];if(se instanceof Ds)Y("q"),Y(rh(k)),se.gState&&p.setGState(se.gState),Y(h.matrix.toString()+" cm"),Y("/"+Z+" sh"),Y("Q");else if(se instanceof Bo){var ye=new Ge(1,0,0,-1,0,Ia());h.matrix&&(ye=ye.multiply(h.matrix||_t),Z=th.call(se,h.key,h.boundingBox,h.xStep,h.yStep,ye).id),Y("q"),Y("/Pattern cs"),Y("/"+Z+" scn"),se.gState&&p.setGState(se.gState),Y(k),Y("Q")}},rh=function(h){switch(h){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},pl=p.moveTo=function(h,k){return Y(V(D(h))+" "+V(q(k))+" m"),this},Ns=p.lineTo=function(h,k){return Y(V(D(h))+" "+V(q(k))+" l"),this},_a=p.curveTo=function(h,k,Z,se,ye,Le){return Y([V(D(h)),V(q(k)),V(D(Z)),V(q(se)),V(D(ye)),V(q(Le)),"c"].join(" ")),this};p.__private__.line=p.line=function(h,k,Z,se,ye){if(isNaN(h)||isNaN(k)||isNaN(Z)||isNaN(se)||!Oi(ye))throw new Error("Invalid arguments passed to jsPDF.line");return L===b.COMPAT?this.lines([[Z-h,se-k]],h,k,[1,1],ye||"S"):this.lines([[Z-h,se-k]],h,k,[1,1]).stroke()},p.__private__.lines=p.lines=function(h,k,Z,se,ye,Le){var Oe,Ze,dt,At,St,Et,pn,Nn,_n,ir,$n,wi;if(typeof h=="number"&&(wi=Z,Z=k,k=h,h=wi),se=se||[1,1],Le=Le||!1,isNaN(k)||isNaN(Z)||!Array.isArray(h)||!Array.isArray(se)||!Oi(ye)||typeof Le!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(pl(k,Z),Oe=se[0],Ze=se[1],At=h.length,ir=k,$n=Z,dt=0;dt<At;dt++)(St=h[dt]).length===2?(ir=St[0]*Oe+ir,$n=St[1]*Ze+$n,Ns(ir,$n)):(Et=St[0]*Oe+ir,pn=St[1]*Ze+$n,Nn=St[2]*Oe+ir,_n=St[3]*Ze+$n,ir=St[4]*Oe+ir,$n=St[5]*Ze+$n,_a(Et,pn,Nn,_n,ir,$n));return Le&&Bc(),fl(ye),this},p.path=function(h){for(var k=0;k<h.length;k++){var Z=h[k],se=Z.c;switch(Z.op){case"m":pl(se[0],se[1]);break;case"l":Ns(se[0],se[1]);break;case"c":_a.apply(this,se);break;case"h":Bc()}}return this},p.__private__.rect=p.rect=function(h,k,Z,se,ye){if(isNaN(h)||isNaN(k)||isNaN(Z)||isNaN(se)||!Oi(ye))throw new Error("Invalid arguments passed to jsPDF.rect");return L===b.COMPAT&&(se=-se),Y([V(D(h)),V(q(k)),V(D(Z)),V(D(se)),"re"].join(" ")),fl(ye),this},p.__private__.triangle=p.triangle=function(h,k,Z,se,ye,Le,Oe){if(isNaN(h)||isNaN(k)||isNaN(Z)||isNaN(se)||isNaN(ye)||isNaN(Le)||!Oi(Oe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-h,se-k],[ye-Z,Le-se],[h-ye,k-Le]],h,k,[1,1],Oe,!0),this},p.__private__.roundedRect=p.roundedRect=function(h,k,Z,se,ye,Le,Oe){if(isNaN(h)||isNaN(k)||isNaN(Z)||isNaN(se)||isNaN(ye)||isNaN(Le)||!Oi(Oe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ze=4/3*(Math.SQRT2-1);return ye=Math.min(ye,.5*Z),Le=Math.min(Le,.5*se),this.lines([[Z-2*ye,0],[ye*Ze,0,ye,Le-Le*Ze,ye,Le],[0,se-2*Le],[0,Le*Ze,-ye*Ze,Le,-ye,Le],[2*ye-Z,0],[-ye*Ze,0,-ye,-Le*Ze,-ye,-Le],[0,2*Le-se],[0,-Le*Ze,ye*Ze,-Le,ye,-Le]],h+ye,k,[1,1],Oe,!0),this},p.__private__.ellipse=p.ellipse=function(h,k,Z,se,ye){if(isNaN(h)||isNaN(k)||isNaN(Z)||isNaN(se)||!Oi(ye))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Le=4/3*(Math.SQRT2-1)*Z,Oe=4/3*(Math.SQRT2-1)*se;return pl(h+Z,k),_a(h+Z,k-Oe,h+Le,k-se,h,k-se),_a(h-Le,k-se,h-Z,k-Oe,h-Z,k),_a(h-Z,k+Oe,h-Le,k+se,h,k+se),_a(h+Le,k+se,h+Z,k+Oe,h+Z,k),fl(ye),this},p.__private__.circle=p.circle=function(h,k,Z,se){if(isNaN(h)||isNaN(k)||isNaN(Z)||!Oi(se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(h,k,Z,Z,se)},p.setFont=function(h,k,Z){return Z&&(k=ce(k,Z)),mt=jt(h,k,{disableWarning:!1}),this};var ih=p.__private__.getFont=p.getFont=function(){return Tt[jt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var h,k,Z={};for(h in vt)if(vt.hasOwnProperty(h))for(k in Z[h]=[],vt[h])vt[h].hasOwnProperty(k)&&Z[h].push(k);return Z},p.addFont=function(h,k,Z,se,ye){var Le=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Le.indexOf(arguments[3])!==-1?ye=arguments[3]:arguments[3]&&Le.indexOf(arguments[3])==-1&&(Z=ce(Z,se)),ye=ye||"Identity-H",Aa.call(this,h,k,Z,ye)};var ws,gl=e.lineWidth||.200025,no=p.__private__.getLineWidth=p.getLineWidth=function(){return gl},qc=p.__private__.setLineWidth=p.setLineWidth=function(h){return gl=h,Y(V(D(h))+" w"),this};p.__private__.setLineDash=gt.API.setLineDash=gt.API.setLineDashPattern=function(h,k){if(h=h||[],k=k||0,isNaN(k)||!Array.isArray(h))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return h=h.map(function(Z){return V(D(Z))}).join(" "),k=V(D(k)),Y("["+h+"] "+k+" d"),this};var $c=p.__private__.getLineHeight=p.getLineHeight=function(){return ge*ws};p.__private__.getLineHeight=p.getLineHeight=function(){return ge*ws};var Uc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(h){return typeof(h=h||1.15)=="number"&&(ws=h),this},Vc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return ws};Uc(e.lineHeight);var Ri=p.__private__.getHorizontalCoordinate=function(h){return D(h)},ra=p.__private__.getVerticalCoordinate=function(h){return L===b.ADVANCED?h:We[$].mediaBox.topRightY-We[$].mediaBox.bottomLeftY-D(h)},ah=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(h){return V(Ri(h))},za=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(h){return V(ra(h))},Ni=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ur(Ni)},p.__private__.setStrokeColor=p.setDrawColor=function(h,k,Z,se){return Ni=Ar({ch1:h,ch2:k,ch3:Z,ch4:se,pdfColorType:"draw",precision:2}),Y(Ni),this};var xl=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ur(xl)},p.__private__.setFillColor=p.setFillColor=function(h,k,Z,se){return xl=Ar({ch1:h,ch2:k,ch3:Z,ch4:se,pdfColorType:"fill",precision:2}),Y(xl),this};var bs=e.textColor||"0 g",sh=p.__private__.getTextColor=p.getTextColor=function(){return Ur(bs)};p.__private__.setTextColor=p.setTextColor=function(h,k,Z,se){return bs=Ar({ch1:h,ch2:k,ch3:Z,ch4:se,pdfColorType:"text",precision:3}),this};var ro=e.charSpace,oh=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ro||0)};p.__private__.setCharSpace=p.setCharSpace=function(h){if(isNaN(h))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ro=h,this};var vl=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(h){var k=p.CapJoinStyles[h];if(k===void 0)throw new Error("Line cap style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return vl=k,Y(k+" J"),this};var yl=0;p.__private__.setLineJoin=p.setLineJoin=function(h){var k=p.CapJoinStyles[h];if(k===void 0)throw new Error("Line join style of '"+h+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return yl=k,Y(k+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(h){if(h=h||0,isNaN(h))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Y(V(D(h))+" M"),this},p.GState=_d,p.setGState=function(h){(h=typeof h=="string"?nn[Bn[h]]:Hc(null,h)).equals($t)||(Y("/"+h.id+" gs"),$t=h)};var Hc=function(h,k){if(!h||!Bn[h]){var Z=!1;for(var se in nn)if(nn.hasOwnProperty(se)&&nn[se].equals(k)){Z=!0;break}if(Z)k=nn[se];else{var ye="GS"+(Object.keys(nn).length+1).toString(10);nn[ye]=k,k.id=ye}return h&&(Bn[h]=k.id),M.publish("addGState",k),k}};p.addGState=function(h,k){return Hc(h,k),this},p.saveGraphicsState=function(){return Y("q"),hn.push({key:mt,size:ge,color:bs}),this},p.restoreGraphicsState=function(){Y("Q");var h=hn.pop();return mt=h.key,ge=h.size,bs=h.color,$t=null,this},p.setCurrentTransformationMatrix=function(h){return Y(h.toString()+" cm"),this},p.comment=function(h){return Y("#"+h),this};var io=function(h,k){var Z=h||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(Le){isNaN(Le)||(Z=parseFloat(Le))}});var se=k||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return se},set:function(Le){isNaN(Le)||(se=parseFloat(Le))}});var ye="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ye},set:function(Le){ye=Le.toString()}}),this},Nl=function(h,k,Z,se){io.call(this,h,k),this.type="rect";var ye=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ye},set:function(Oe){isNaN(Oe)||(ye=parseFloat(Oe))}});var Le=se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Le},set:function(Oe){isNaN(Oe)||(Le=parseFloat(Oe))}}),this},wl=function(){this.page=Bt,this.currentPage=$,this.pages=R.slice(0),this.pagesContext=We.slice(0),this.x=Vt,this.y=kt,this.matrix=Ht,this.width=js($),this.height=Ia($),this.outputDestination=Ce,this.id="",this.objectNumber=-1};wl.prototype.restore=function(){Bt=this.page,$=this.currentPage,We=this.pagesContext,R=this.pages,Vt=this.x,kt=this.y,Ht=this.matrix,bl($,this.width),jl($,this.height),Ce=this.outputDestination};var Gc=function(h,k,Z,se,ye){bt.push(new wl),Bt=$=0,R=[],Vt=h,kt=k,Ht=ye,La([Z,se])},lh=function(h){if(it[h])bt.pop().restore();else{var k=new wl,Z="Xo"+(Object.keys(_e).length+1).toString(10);k.id=Z,it[h]=Z,_e[Z]=k,M.publish("addFormObject",k),bt.pop().restore()}};for(var ao in p.beginFormObject=function(h,k,Z,se,ye){return Gc(h,k,Z,se,ye),this},p.endFormObject=function(h){return lh(h),this},p.doFormObject=function(h,k){var Z=_e[it[h]];return Y("q"),Y(k.toString()+" cm"),Y("/"+Z.id+" Do"),Y("Q"),this},p.getFormObject=function(h){var k=_e[it[h]];return{x:k.x,y:k.y,width:k.width,height:k.height,matrix:k.matrix}},p.save=function(h,k){return h=h||"generated.pdf",(k=k||{}).returnPromise=k.returnPromise||!1,k.returnPromise===!1?(Ms(gr(Ft()),h),typeof Ms.unload=="function"&&xt.setTimeout&&setTimeout(Ms.unload,911),this):new Promise(function(Z,se){try{var ye=Ms(gr(Ft()),h);typeof Ms.unload=="function"&&xt.setTimeout&&setTimeout(Ms.unload,911),Z(ye)}catch(Le){se(Le.message)}})},gt.API)gt.API.hasOwnProperty(ao)&&(ao==="events"&&gt.API.events.length?function(h,k){var Z,se,ye;for(ye=k.length-1;ye!==-1;ye--)Z=k[ye][0],se=k[ye][1],h.subscribe.apply(h,[Z].concat(typeof se=="function"?[se]:se))}(M,gt.API.events):p[ao]=gt.API[ao]);var js=p.getPageWidth=function(h){return(We[h=h||$].mediaBox.topRightX-We[h].mediaBox.bottomLeftX)/Ve},bl=p.setPageWidth=function(h,k){We[h].mediaBox.topRightX=k*Ve+We[h].mediaBox.bottomLeftX},Ia=p.getPageHeight=function(h){return(We[h=h||$].mediaBox.topRightY-We[h].mediaBox.bottomLeftY)/Ve},jl=p.setPageHeight=function(h,k){We[h].mediaBox.topRightY=k*Ve+We[h].mediaBox.bottomLeftY};return p.internal={pdfEscape:Xn,getStyle:Rc,getFont:ih,getFontSize:Se,getCharSpace:oh,getTextColor:sh,getLineHeight:$c,getLineHeightFactor:Vc,getLineWidth:no,write:ht,getHorizontalCoordinate:Ri,getVerticalCoordinate:ra,getCoordinateString:ah,getVerticalCoordinateString:za,collections:{},newObject:Jt,newAdditionalObject:qr,newObjectDeferred:qt,newObjectDeferredBegin:qn,getFilters:ti,putStream:Lr,events:M,scaleFactor:Ve,pageSize:{getWidth:function(){return js($)},setWidth:function(h){bl($,h)},getHeight:function(){return Ia($)},setHeight:function(h){jl($,h)}},encryptionOptions:x,encryption:rr,getEncryptor:Kd,output:Pa,getNumberOfPages:Be,pages:R,out:Y,f2:ee,f3:_,getPageInfo:Oc,getPageInfoByObjId:wt,getCurrentPageInfo:Zd,getPDFVersion:w,Point:io,Rectangle:Nl,Matrix:Ge,hasHotfix:eo},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return js($)},set:function(h){bl($,h)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Ia($)},set:function(h){jl($,h)},enumerable:!0,configurable:!0}),Zs.call(p,Fe),mt="F1",ys(a,r),M.publish("initialized"),p}Co.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Co.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Co.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Co.prototype.processOwnerPassword=function(e,t){return df(uf(t).substr(0,5),e)},Co.prototype.encryptor=function(e,t){var r=uf(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return df(r,i)}},_d.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Qt(e)!==Qt(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},gt.API={events:[]},gt.version="3.0.1";var bn=gt.API,pp=1,Xs=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bo=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ct=function(e){return e.toFixed(2)},Ga=function(e){return e.toFixed(5)};bn.__acroform__={};var Br=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ng=function(e){return e*pp},Vi=function(e){var t=new gx,r=at.internal.getHeight(e)||0,i=at.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Ct(i)),Number(Ct(r))],t},FN=bn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},ON=bn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},RN=bn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},An=bn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return RN(e,t-1)},Ln=bn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return FN(e,t-1)},Pn=bn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ON(e,t-1)},BN=bn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=e[0],s=e[1],l=e[2],c=e[3],u={};return u.lowerLeft_X=r(a)||0,u.lowerLeft_Y=i(s+c)||0,u.upperRight_X=r(a+l)||0,u.upperRight_Y=i(s)||0,[Number(Ct(u.lowerLeft_X)),Number(Ct(u.lowerLeft_Y)),Number(Ct(u.upperRight_X)),Number(Ct(u.upperRight_Y))]},qN=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=hf(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Ct(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Vi(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},hf=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(_){return _.split(`
`)}):a.map(function(_){return[_]});var s=r,l=at.internal.getHeight(e)||0;l=l<0?-l:l;var c=at.internal.getWidth(e)||0;c=c<0?-c:c;var u=function(_,D,E){if(_+1<a.length){var q=D+" "+a[_+1][0];return Ru(q,e,E).width<=c-4}return!1};s++;e:for(;s>0;){t="",s--;var m,x,g=Ru("3",e,s).height,v=e.multiline?l-s:(l-g)/2,p=v+=2,j=0,w=0,A=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ru(t,e,s=12).width+", FieldWidth:"+c+`
`;break}for(var N="",b=0,L=0;L<a.length;L++)if(a.hasOwnProperty(L)){var G=!1;if(a[L].length!==1&&A!==a[L].length-1){if((g+2)*(b+2)+2>l)continue e;N+=a[L][A],G=!0,w=L,L--}else{N=(N+=a[L][A]+" ").substr(N.length-1)==" "?N.substr(0,N.length-1):N;var ne=parseInt(L),ce=u(ne,N,s),V=L>=a.length-1;if(ce&&!V){N+=" ",A=0;continue}if(ce||V){if(V)w=ne;else if(e.multiline&&(g+2)*(b+2)+2>l)continue e}else{if(!e.multiline||(g+2)*(b+2)+2>l)continue e;w=ne}}for(var O="",J=j;J<=w;J++){var ee=a[J];if(e.multiline){if(J===w){O+=ee[A]+" ",A=(A+1)%ee.length;continue}if(J===j){O+=ee[ee.length-1]+" ";continue}}O+=ee[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,x=Ru(O,e,s).width,e.textAlign){case"right":m=c-x-2;break;case"center":m=(c-x)/2;break;case"left":default:m=2}t+=Ct(m)+" "+Ct(p)+` Td
`,t+="("+Xs(O)+`) Tj
`,t+=-Ct(m)+` 0 Td
`,p=-(s+2),x=0,j=G?w:w+1,b++,N=""}break}return i.text=t,i.fontSize=s,i},Ru=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},$N={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},UN=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},VN=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),Qt(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[i]}},HN=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Ti.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify($N)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");pp=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new xx,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.objId=void 0,s.hasAnnotation&&UN(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,a){var s=!i;for(var l in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var c=i[l],u=[],m=c.Rect;if(c.Rect&&(c.Rect=BN(c.Rect,a)),a.internal.newObjectDeferredBegin(c.objId,!0),c.DA=at.createDefaultAppearanceStream(c),Qt(c)==="object"&&typeof c.getKeyValueListForStream=="function"&&(u=c.getKeyValueListForStream()),c.Rect=m,c.hasAppearanceStream&&!c.appearanceStreamContent){var x=qN(c);u.push({key:"AP",value:"<</N "+x+">>"}),a.internal.acroformPlugin.xForms.push(x)}if(c.appearanceStreamContent){var g="";for(var v in c.appearanceStreamContent)if(c.appearanceStreamContent.hasOwnProperty(v)){var p=c.appearanceStreamContent[v];if(g+="/"+v+" ",g+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var l in p)if(p.hasOwnProperty(l)){var j=p[l];typeof j=="function"&&(j=j.call(a,c)),g+="/"+l+" "+j+" ",a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j)}}else typeof(j=p)=="function"&&(j=j.call(a,c)),g+="/"+l+" "+j,a.internal.acroformPlugin.xForms.indexOf(j)>=0||a.internal.acroformPlugin.xForms.push(j);g+=">>"}u.push({key:"AP",value:`<<
`+g+">>"})}a.internal.putStream({additionalKeyValues:u,objectId:c.objId}),a.internal.out("endobj")}s&&VN(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},px=bn.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(l){return l};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),Qt(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),a+="("+Xs(i(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},am=function(e,t,r){var i=function(a){return a};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xs(i(e))+")"},Wi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Wi.prototype.toString=function(){return this.objId+" 0 R"},Wi.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Wi.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],a=this[i];a&&(Array.isArray(a)?e.push({key:i,value:px(a,this.objId,this.scope)}):a instanceof Wi?(a.scope=this.scope,e.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:i,value:a}))}return e};var gx=function(){Wi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Br(gx,Wi);var xx=function(){Wi.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xs(r(e))+")"}},set:function(r){e=r}})};Br(xx,Wi);var Ti=function e(){Wi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute F supplied.');t=N}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!An(t,3)},set:function(N){N?this.F=Ln(t,3):this.F=Pn(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(N){if(isNaN(N))throw new Error('Invalid value "'+N+'" for attribute Ff supplied.');r=N}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(N){i=N!==void 0?N:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(N){i[0]=N}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(N){i[1]=N}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(N){i[2]=N}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(N){i[3]=N}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(N){switch(N){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=N;break;default:throw new Error('Invalid value "'+N+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof zd)return;s="FieldObject"+e.FieldNum++}var N=function(b){return b};return this.scope&&(N=this.scope.internal.getEncryptor(this.objId)),"("+Xs(N(s))+")"},set:function(N){s=N.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(N){s=N}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(N){l=N}});var c="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return c},set:function(N){c=N}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(N){u=N}});var m=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return m===void 0?50/pp:m},set:function(N){m=N}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(N){x=N}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof zd||this instanceof Bs))return am(g,this.objId,this.scope)},set:function(N){N=N.toString(),g=N}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Gn?v:am(v,this.objId,this.scope)},set:function(N){N=N.toString(),v=this instanceof Gn?N:N.substr(0,1)==="("?bo(N.substr(1,N.length-2)):bo(N)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gn?bo(v.substr(1,v.length-1)):v},set:function(N){N=N.toString(),v=this instanceof Gn?"/"+N:N}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(N){this.V=N}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Gn?p:am(p,this.objId,this.scope)},set:function(N){N=N.toString(),p=this instanceof Gn?N:N.substr(0,1)==="("?bo(N.substr(1,N.length-2)):bo(N)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Gn?bo(p.substr(1,p.length-1)):p},set:function(N){N=N.toString(),p=this instanceof Gn?"/"+N:N}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(N){N=!!N,w=N}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(N){j=N}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,1)},set:function(N){N?this.Ff=Ln(this.Ff,1):this.Ff=Pn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,2)},set:function(N){N?this.Ff=Ln(this.Ff,2):this.Ff=Pn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,3)},set:function(N){N?this.Ff=Ln(this.Ff,3):this.Ff=Pn(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(N){if([0,1,2].indexOf(N)===-1)throw new Error('Invalid value "'+N+'" for attribute Q supplied.');A=N}}),Object.defineProperty(this,"textAlign",{get:function(){var N;switch(A){case 0:default:N="left";break;case 1:N="center";break;case 2:N="right"}return N},configurable:!0,enumerable:!0,set:function(N){switch(N){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};Br(Ti,Wi);var Jo=function(){Ti.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return px(t,this.objId,this.scope)},set:function(r){var i,a;a=[],typeof(i=r)=="string"&&(a=function(s,l,c){c||(c=1);for(var u,m=[];u=l.exec(s);)m.push(u[c]);return m}(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,18)},set:function(r){r?this.Ff=Ln(this.Ff,18):this.Ff=Pn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ln(this.Ff,19):this.Ff=Pn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,20)},set:function(r){r?(this.Ff=Ln(this.Ff,20),t.sort()):this.Ff=Pn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,22)},set:function(r){r?this.Ff=Ln(this.Ff,22):this.Ff=Pn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(r){r?this.Ff=Ln(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,27)},set:function(r){r?this.Ff=Ln(this.Ff,27):this.Ff=Pn(this.Ff,27)}}),this.hasAppearanceStream=!1};Br(Jo,Ti);var Xo=function(){Jo.call(this),this.fontName="helvetica",this.combo=!1};Br(Xo,Jo);var Yo=function(){Xo.call(this),this.combo=!0};Br(Yo,Xo);var td=function(){Yo.call(this),this.edit=!0};Br(td,Yo);var Gn=function(){Ti.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,15)},set:function(r){r?this.Ff=Ln(this.Ff,15):this.Ff=Pn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,16)},set:function(r){r?this.Ff=Ln(this.Ff,16):this.Ff=Pn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,17)},set:function(r){r?this.Ff=Ln(this.Ff,17):this.Ff=Pn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(r){r?this.Ff=Ln(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+Xs(r(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){Qt(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Br(Gn,Ti);var nd=function(){Gn.call(this),this.pushButton=!0};Br(nd,Gn);var Qo=function(){Gn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Br(Qo,Gn);var zd=function(){var e,t;Ti.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(c){return c};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,l=[];for(s in l.push("<<"),i)l.push("/"+s+" ("+Xs(a(i[s]))+")");return l.push(">>"),l.join(`
`)},set:function(a){Qt(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=at.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Br(zd,Ti),Qo.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Qo.prototype.createOption=function(e){var t=new zd;return t.Parent=this,t.optionName=e,this.Kids.push(t),GN.call(this.scope,t),t};var rd=function(){Gn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=at.CheckBox.createAppearanceStream()};Br(rd,Gn);var Bs=function(){Ti.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,13)},set:function(t){t?this.Ff=Ln(this.Ff,13):this.Ff=Pn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,21)},set:function(t){t?this.Ff=Ln(this.Ff,21):this.Ff=Pn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,23)},set:function(t){t?this.Ff=Ln(this.Ff,23):this.Ff=Pn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,24)},set:function(t){t?this.Ff=Ln(this.Ff,24):this.Ff=Pn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,25)},set:function(t){t?this.Ff=Ln(this.Ff,25):this.Ff=Pn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,26)},set:function(t){t?this.Ff=Ln(this.Ff,26):this.Ff=Pn(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Br(Bs,Ti);var id=function(){Bs.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!An(this.Ff,14)},set:function(e){e?this.Ff=Ln(this.Ff,14):this.Ff=Pn(this.Ff,14)}}),this.password=!0};Br(id,Bs);var at={CheckBox:{createAppearanceStream:function(){return{N:{On:at.CheckBox.YesNormal},D:{On:at.CheckBox.YesPushDown,Off:at.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=hf(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Ct(at.internal.getWidth(e))+" "+Ct(at.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+Ct(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Vi(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=[],s=at.internal.getHeight(e),l=at.internal.getWidth(e),c=hf(e,e.caption);return a.push("1 g"),a.push("0 0 "+Ct(l)+" "+Ct(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Ct(l-1)+" "+Ct(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Ct(c.fontSize)+" Tf "+i),a.push(c.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ct(at.internal.getWidth(e))+" "+Ct(at.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:at.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=at.RadioButton.Circle.YesNormal,t.D[e]=at.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Vi(e);t.scope=e.scope;var r=[],i=at.internal.getWidth(e)<=at.internal.getHeight(e)?at.internal.getWidth(e)/4:at.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=at.internal.Bezier_C,s=Number((i*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ga(at.internal.getWidth(e)/2)+" "+Ga(at.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),r.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),r.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),r.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=[],i=at.internal.getWidth(e)<=at.internal.getHeight(e)?at.internal.getWidth(e)/4:at.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*at.internal.Bezier_C).toFixed(5)),l=Number((i*at.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ga(at.internal.getWidth(e)/2)+" "+Ga(at.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ga(at.internal.getWidth(e)/2)+" "+Ga(at.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=[],i=at.internal.getWidth(e)<=at.internal.getHeight(e)?at.internal.getWidth(e)/4:at.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),s=Number((a*at.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ga(at.internal.getWidth(e)/2)+" "+Ga(at.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:at.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=at.RadioButton.Cross.YesNormal,t.D[e]=at.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Vi(e);t.scope=e.scope;var r=[],i=at.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Ct(at.internal.getWidth(e)-2)+" "+Ct(at.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Ct(i.x1.x)+" "+Ct(i.x1.y)+" m"),r.push(Ct(i.x2.x)+" "+Ct(i.x2.y)+" l"),r.push(Ct(i.x4.x)+" "+Ct(i.x4.y)+" m"),r.push(Ct(i.x3.x)+" "+Ct(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=at.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+Ct(at.internal.getWidth(e))+" "+Ct(at.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Ct(at.internal.getWidth(e)-2)+" "+Ct(at.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Ct(r.x1.x)+" "+Ct(r.x1.y)+" m"),i.push(Ct(r.x2.x)+" "+Ct(r.x2.y)+" l"),i.push(Ct(r.x4.x)+" "+Ct(r.x4.y)+" m"),i.push(Ct(r.x3.x)+" "+Ct(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Vi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Ct(at.internal.getWidth(e))+" "+Ct(at.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};at.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=at.internal.getWidth(e),r=at.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},at.internal.getWidth=function(e){var t=0;return Qt(e)==="object"&&(t=Ng(e.Rect[2])),t},at.internal.getHeight=function(e){var t=0;return Qt(e)==="object"&&(t=Ng(e.Rect[3])),t};var GN=bn.addField=function(e){if(HN(this,e),!(e instanceof Ti))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bn.AcroFormChoiceField=Jo,bn.AcroFormListBox=Xo,bn.AcroFormComboBox=Yo,bn.AcroFormEditBox=td,bn.AcroFormButton=Gn,bn.AcroFormPushButton=nd,bn.AcroFormRadioButton=Qo,bn.AcroFormCheckBox=rd,bn.AcroFormTextField=Bs,bn.AcroFormPasswordField=id,bn.AcroFormAppearance=at,bn.AcroForm={ChoiceField:Jo,ListBox:Xo,ComboBox:Yo,EditBox:td,Button:Gn,PushButton:nd,RadioButton:Qo,CheckBox:rd,TextField:Bs,PasswordField:id,Appearance:at},gt.AcroForm={ChoiceField:Jo,ListBox:Xo,ComboBox:Yo,EditBox:td,Button:Gn,PushButton:nd,RadioButton:Qo,CheckBox:rd,TextField:Bs,PasswordField:id,Appearance:at};function vx(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(_,D){var E,q,ae,ue,we,Q=t;if((D=D||t)==="RGBA"||_.data!==void 0&&_.data instanceof Uint8ClampedArray&&"height"in _&&"width"in _)return"RGBA";if(ce(_))for(we in r)for(ae=r[we],E=0;E<ae.length;E+=1){for(ue=!0,q=0;q<ae[E].length;q+=1)if(ae[E][q]!==void 0&&ae[E][q]!==_[q]){ue=!1;break}if(ue===!0){Q=we;break}}else for(we in r)for(ae=r[we],E=0;E<ae.length;E+=1){for(ue=!0,q=0;q<ae[E].length;q+=1)if(ae[E][q]!==void 0&&ae[E][q]!==_.charCodeAt(q)){ue=!1;break}if(ue===!0){Q=we;break}}return Q===t&&D!==t&&(Q=D),Q},a=function _(D){for(var E=this.internal.write,q=this.internal.putStream,ae=(0,this.internal.getFilters)();ae.indexOf("FlateEncode")!==-1;)ae.splice(ae.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var ue=[];if(ue.push({key:"Type",value:"/XObject"}),ue.push({key:"Subtype",value:"/Image"}),ue.push({key:"Width",value:D.width}),ue.push({key:"Height",value:D.height}),D.colorSpace===A.INDEXED?ue.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(ue.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===A.DEVICE_CMYK&&ue.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ue.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&ue.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var we="",Q=0,de=D.transparency.length;Q<de;Q++)we+=D.transparency[Q]+" "+D.transparency[Q]+" ";ue.push({key:"Mask",value:"["+we+"]"})}D.sMask!==void 0&&ue.push({key:"SMask",value:D.objectId+1+" 0 R"});var ie=D.filter!==void 0?["/"+D.filter]:void 0;if(q({data:D.data,additionalKeyValues:ue,alreadyAppliedFilters:ie,objectId:D.objectId}),E("endobj"),"sMask"in D&&D.sMask!==void 0){var ze="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,P={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ze,data:D.sMask};"filter"in D&&(P.filter=D.filter),_.call(this,P)}if(D.colorSpace===A.INDEXED){var $=this.internal.newObject();q({data:O(new Uint8Array(D.palette)),objectId:$}),E("endobj")}},s=function(){var _=this.internal.collections.addImage_images;for(var D in _)a.call(this,_[D])},l=function(){var _,D=this.internal.collections.addImage_images,E=this.internal.write;for(var q in D)E("/I"+(_=D[q]).index,_.objectId,"0","R")},c=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var _=this.internal.collections.addImage_images;return c.call(this),_},m=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(_){return typeof e["process"+_.toUpperCase()]=="function"},g=function(_){return Qt(_)==="object"&&_.nodeType===1},v=function(_,D){if(_.nodeName==="IMG"&&_.hasAttribute("src")){var E=""+_.getAttribute("src");if(E.indexOf("data:image/")===0)return mc(unescape(E).split("base64,").pop());var q=e.loadFile(E,!0);if(q!==void 0)return q}if(_.nodeName==="CANVAS"){if(_.width===0||_.height===0)throw new Error("Given canvas must have data. Canvas width: "+_.width+", height: "+_.height);var ae;switch(D){case"PNG":ae="image/png";break;case"WEBP":ae="image/webp";break;case"JPEG":case"JPG":default:ae="image/jpeg"}return mc(_.toDataURL(ae,1).split("base64,").pop())}},p=function(_){var D=this.internal.collections.addImage_images;if(D){for(var E in D)if(_===D[E].alias)return D[E]}},j=function(_,D,E){return _||D||(_=-96,D=-96),_<0&&(_=-1*E.width*72/_/this.internal.scaleFactor),D<0&&(D=-1*E.height*72/D/this.internal.scaleFactor),_===0&&(_=D*E.width/E.height),D===0&&(D=_*E.height/E.width),[_,D]},w=function(_,D,E,q,ae,ue){var we=j.call(this,E,q,ae),Q=this.internal.getCoordinateString,de=this.internal.getVerticalCoordinateString,ie=u.call(this);if(E=we[0],q=we[1],ie[ae.index]=ae,ue){ue*=Math.PI/180;var ze=Math.cos(ue),P=Math.sin(ue),$=function(H){return H.toFixed(4)},W=[$(ze),$(P),$(-1*P),$(ze),0,0,"cm"]}this.internal.write("q"),ue?(this.internal.write([1,"0","0",1,Q(_),de(D+q),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([Q(E),"0","0",Q(q),"0","0","cm"].join(" "))):this.internal.write([Q(E),"0","0",Q(q),Q(_),de(D+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ae.index+" Do"),this.internal.write("Q")},A=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var N=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(_){var D,E,q=0;if(typeof _=="string")for(E=_.length,D=0;D<E;D++)q=(q<<5)-q+_.charCodeAt(D),q|=0;else if(ce(_))for(E=_.byteLength/2,D=0;D<E;D++)q=(q<<5)-q+_[D],q|=0;return q},L=e.__addimage__.validateStringAsBase64=function(_){(_=_||"").toString().trim();var D=!0;return _.length===0&&(D=!1),_.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(_.substr(0,_.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(_.substr(-2))===!1&&(D=!1),D},G=e.__addimage__.extractImageFromDataUrl=function(_){if(_==null||!(_=_.trim()).startsWith("data:"))return null;var D=_.indexOf(",");return D<0?null:_.substring(0,D).trim().endsWith("base64")?_.substring(D+1):null},ne=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(_){return ne()&&_ instanceof ArrayBuffer};var ce=e.__addimage__.isArrayBufferView=function(_){return ne()&&typeof Uint32Array<"u"&&(_ instanceof Int8Array||_ instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&_ instanceof Uint8ClampedArray||_ instanceof Int16Array||_ instanceof Uint16Array||_ instanceof Int32Array||_ instanceof Uint32Array||_ instanceof Float32Array||_ instanceof Float64Array)},V=e.__addimage__.binaryStringToUint8Array=function(_){for(var D=_.length,E=new Uint8Array(D),q=0;q<D;q++)E[q]=_.charCodeAt(q);return E},O=e.__addimage__.arrayBufferToBinaryString=function(_){for(var D="",E=ce(_)?_:new Uint8Array(_),q=0;q<E.length;q+=8192)D+=String.fromCharCode.apply(null,E.subarray(q,q+8192));return D};e.addImage=function(){var _,D,E,q,ae,ue,we,Q,de;if(typeof arguments[1]=="number"?(D=t,E=arguments[1],q=arguments[2],ae=arguments[3],ue=arguments[4],we=arguments[5],Q=arguments[6],de=arguments[7]):(D=arguments[1],E=arguments[2],q=arguments[3],ae=arguments[4],ue=arguments[5],we=arguments[6],Q=arguments[7],de=arguments[8]),Qt(_=arguments[0])==="object"&&!g(_)&&"imageData"in _){var ie=_;_=ie.imageData,D=ie.format||D||t,E=ie.x||E||0,q=ie.y||q||0,ae=ie.w||ie.width||ae,ue=ie.h||ie.height||ue,we=ie.alias||we,Q=ie.compression||Q,de=ie.rotation||ie.angle||de}var ze=this.internal.getFilters();if(Q===void 0&&ze.indexOf("FlateEncode")!==-1&&(Q="SLOW"),isNaN(E)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");c.call(this);var P=J.call(this,_,D,we,Q);return w.call(this,E,q,ae,ue,P,de),this};var J=function(_,D,E,q){var ae,ue,we;if(typeof _=="string"&&i(_)===t){_=unescape(_);var Q=ee(_,!1);(Q!==""||(Q=e.loadFile(_,!0))!==void 0)&&(_=Q)}if(g(_)&&(_=v(_,D)),D=i(_,D),!x(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((we=E)==null||we.length===0)&&(E=function(de){return typeof de=="string"||ce(de)?b(de):ce(de.data)?b(de.data):null}(_)),(ae=p.call(this,E))||(ne()&&(_ instanceof Uint8Array||D==="RGBA"||(ue=_,_=V(_))),ae=this["process"+D.toUpperCase()](_,m.call(this),E,function(de){return de&&typeof de=="string"&&(de=de.toUpperCase()),de in e.image_compression?de:N.NONE}(q),ue)),!ae)throw new Error("An unknown error occurred whilst processing the image.");return ae},ee=e.__addimage__.convertBase64ToBinaryString=function(_,D){D=typeof D!="boolean"||D;var E,q="";if(typeof _=="string"){var ae;E=(ae=G(_))!==null&&ae!==void 0?ae:_;try{q=mc(E)}catch(ue){if(D)throw L(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ue.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(_){var D,E,q="";if(g(_)&&(_=v(_)),typeof _=="string"&&i(_)===t&&((q=ee(_,!1))===""&&(q=e.loadFile(_)||""),_=q),E=i(_),!x(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(!ne()||_ instanceof Uint8Array||(_=V(_)),!(D=this["process"+E.toUpperCase()](_)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=E,D}})(gt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};gt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,a,s,l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),m=r.pageContext.annotations,x=!1,g=0;g<m.length&&!x;g++)switch((i=m[g]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var v=0;v<m.length;v++){i=m[v];var p=this.internal.pdfEscape,j=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),N=this.internal.getEncryptor(w.objId),b=i.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y)+"] ")+"/Contents ("+p(N(i.contents))+")",s+=" /Popup "+A.objId+" 0 R",s+=" /P "+u.objId+" 0 R",s+=" /T ("+p(N(b))+") >>",w.content=s;var L=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+l(i.bounds.x+30)+" "+c(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+c(i.bounds.y)+"] ")+" /Parent "+L,i.open&&(s+=" /Open true"),s+=" >>",A.content=s,this.internal.write(w.objId,"0 R",A.objId,"0 R");break;case"freetext":a="/Rect ["+l(i.bounds.x)+" "+c(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+c(i.bounds.y+i.bounds.h)+"] ";var G=i.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(j(i.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(i.options.name){var ne=this.annotations._nameMap[i.options.name];i.options.pageNumber=ne.page,i.options.top=ne.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",s="",i.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(j(i.options.url))+") >>";else if(i.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,s+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var ce=c(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),s+=" /XYZ "+i.options.left+" "+ce+" "+i.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,a,s,l){var c=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,m=this.internal.getVerticalCoordinateString;c.pageContext.annotations.push({finalBounds:{x:u(r),y:m(i),w:u(r+a),h:m(i+s)},options:l,type:"link"})},e.textWithLink=function(r,i,a,s){var l,c,u=this.getTextWidth(r),m=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){c=s.maxWidth;var x=this.splitTextToSize(r,c).length;l=Math.ceil(m*x)}else c=u,l=m;return this.text(r,i,a,s),a+=.2*m,s.align==="center"&&(i-=u/2),s.align==="right"&&(i-=u),this.link(i,a-m,c,l,s),u},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(gt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},c=e.__arabicParser__.isArabicEndLetter=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length<=2},u=e.__arabicParser__.isArabicAlfLetter=function(w){return l(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=1};var m=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length>=3};var x=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return l(w)&&s(w)&&t[w.charCodeAt(0)].length==4},g=e.__arabicParser__.resolveLigatures=function(w){var A=0,N=r,b="",L=0;for(A=0;A<w.length;A+=1)N[w.charCodeAt(A)]!==void 0?(L++,typeof(N=N[w.charCodeAt(A)])=="number"&&(b+=String.fromCharCode(N),N=r,L=0),A===w.length-1&&(N=r,b+=w.charAt(A-(L-1)),A-=L-1,L=0)):(N=r,b+=w.charAt(A-L),A-=L,L=0);return b};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&i[w.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(w,A,N){return l(w)?s(w)===!1?-1:!m(w)||!l(A)&&!l(N)||!l(N)&&c(A)||c(w)&&!l(A)||c(w)&&u(A)||c(w)&&c(A)?0:x(w)&&l(A)&&!c(A)&&l(N)&&m(N)?3:c(w)||!l(N)?1:2:-1},p=function(w){var A=0,N=0,b=0,L="",G="",ne="",ce=(w=w||"").split("\\s+"),V=[];for(A=0;A<ce.length;A+=1){for(V.push(""),N=0;N<ce[A].length;N+=1)L=ce[A][N],G=ce[A][N-1],ne=ce[A][N+1],l(L)?(b=v(L,G,ne),V[A]+=b!==-1?String.fromCharCode(t[L.charCodeAt(0)][b]):L):V[A]+=L;V[A]=g(V[A])}return V.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var w,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,N=[];if(Array.isArray(A)){var b=0;for(N=[],b=0;b<A.length;b+=1)Array.isArray(A[b])?N.push([p(A[b][0]),A[b][1],A[b][2]]):N.push([p(A[b])]);w=N}else w=p(A);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",j])}(gt.API),gt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(c){r=c}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(c){i=isNaN(c)||Number.isInteger(c)===!1||c<0?150:c,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(c){a=isNaN(c)||Number.isInteger(c)===!1||c<0?300:c,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(c){s=c}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(c){l=c}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var a;if((r=r||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(gt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var m=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(w){x=w}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(w){g=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(w){j=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(u){return i.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},e.getTextDimensions=function(u,m){i.call(this);var x=(m=m||{}).fontSize||this.getFontSize(),g=m.font||this.getFont(),v=m.scaleFactor||this.internal.scaleFactor,p=0,j=0,w=0,A=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var N=m.maxWidth;N>0?typeof u=="string"?u=this.splitTextToSize(u,N):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(L,G){return L.concat(A.splitTextToSize(G,N))},[])):u=Array.isArray(u)?u:[u];for(var b=0;b<u.length;b++)p<(w=this.getStringUnitWidth(u[b],{font:g})*x)&&(p=w);return p!==0&&(j=u.length),{w:p/=v,h:Math.max((j*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var u;u=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var m=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,g=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return m.lineNumber!==void 0&&(m.lineNumber===u.lineNumber?(u.x=(m.x||0)+(m.width||0),u.y=m.y||0):m.y+m.height+u.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=g.top,p&&v&&(this.printHeaderRow(u.lineNumber,!0),u.y+=v[0].height)):u.y=m.y+m.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-x,u.y+x,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+x,{align:"center",baseline:"top",maxWidth:u.width-x-x}):this.text(u.text,u.x+x,u.y+x,{align:"left",baseline:"top",maxWidth:u.width-x-x})),this.internal.__cell__.lastCell=u,this};e.table=function(u,m,x,g,v){if(i.call(this),!x)throw new Error("No data for PDF table.");var p,j,w,A,N=[],b=[],L=[],G={},ne={},ce=[],V=[],O=(v=v||{}).autoSize||!1,J=v.printHeaders!==!1,ee=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,_=v.margins||Object.assign({width:this.getPageWidth()},t),D=typeof v.padding=="number"?v.padding:3,E=v.headerBackgroundColor||"#c8c8c8",q=v.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=_,this.internal.__cell__.table_font_size=ee,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=q,this.setFontSize(ee),g==null)b=N=Object.keys(x[0]),L=N.map(function(){return"left"});else if(Array.isArray(g)&&Qt(g[0])==="object")for(N=g.map(function(ie){return ie.name}),b=g.map(function(ie){return ie.prompt||ie.name||""}),L=g.map(function(ie){return ie.align||"left"}),p=0;p<g.length;p+=1)ne[g[p].name]=g[p].width*(19.049976/25.4);else Array.isArray(g)&&typeof g[0]=="string"&&(b=N=g,L=N.map(function(){return"left"}));if(O||Array.isArray(g)&&typeof g[0]=="string")for(p=0;p<N.length;p+=1){for(G[A=N[p]]=x.map(function(ie){return ie[A]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=G[A],this.setFont(void 0,"normal"),w=0;w<j.length;w+=1)ce.push(this.getTextDimensions(j[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[A]=Math.max.apply(null,ce)+D+D,ce=[]}if(J){var ae={};for(p=0;p<N.length;p+=1)ae[N[p]]={},ae[N[p]].text=b[p],ae[N[p]].align=L[p];var ue=c.call(this,ae,ne);V=N.map(function(ie){return new s(u,m,ne[ie],ue,ae[ie].text,void 0,ae[ie].align)}),this.setTableHeaderRow(V),this.printHeaderRow(1,!1)}var we=g.reduce(function(ie,ze){return ie[ze.name]=ze.align,ie},{});for(p=0;p<x.length;p+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:p,data:x[p]},this);var Q=c.call(this,x[p],ne);for(w=0;w<N.length;w+=1){var de=x[p][N[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:p,col:w,data:de},this),l.call(this,new s(u,m,ne[N[w]],Q,de,p+2,we[N[w]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=m,this};var c=function(u,m){var x=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(u).map(function(p){var j=u[p];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,m[p]-x-x)},this).map(function(p){return this.getLineHeightFactor()*p.length*g/v+x+x},this).reduce(function(p,j){return Math.max(p,j)},0)};e.setTableHeaderRow=function(u){i.call(this),this.internal.__cell__.tableHeaderRow=u},e.printHeaderRow=function(u,m){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){x=this.internal.__cell__.tableHeaderRow[p].clone(),m&&(x.y=this.internal.__cell__.margins.top||0,v.push(x)),x.lineNumber=u;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,x),this.setTextColor(j)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}}(gt.API);var yx={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Nx=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],mf=vx(Nx),wx=[100,200,300,400,500,600,700,800,900],WN=vx(wx);function ff(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return yx[s=s||"normal"]?s:"normal"}(e.style),i=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof mf[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,i].join(" ")}}}function wg(e,t,r,i){var a;for(a=r;a>=0&&a<t.length;a+=i)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=i)if(e[t[a]])return e[t[a]]}var JN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jg(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function XN(e,t,r){for(var i=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},JN,r.genericFontFamilies||{}),s=null,l=null,c=0;c<t.length;++c)if(a[(s=ff(t[c])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){l=e[s.family];break}if(!(l=l||e[i]))throw new Error("Could not find a font-family for the rule '"+jg(s)+"' and default family '"+i+"'.");if(l=function(u,m){if(m[u])return m[u];var x=mf[u],g=x<=mf.normal?-1:1,v=wg(m,Nx,x,g);if(!v)throw new Error("Could not find a matching font-stretch value for "+u);return v}(s.stretch,l),l=function(u,m){if(m[u])return m[u];for(var x=yx[u],g=0;g<x.length;++g)if(m[x[g]])return m[x[g]];throw new Error("Could not find a matching font-style for "+u)}(s.style,l),!(l=function(u,m){if(m[u])return m[u];if(u===400&&m[500])return m[500];if(u===500&&m[400])return m[400];var x=WN[u],g=wg(m,wx,x,u<400?-1:1);if(!g)throw new Error("Could not find a matching font-weight for value "+u);return g}(s.weight,l)))throw new Error("Failed to resolve a font for the rule '"+jg(s)+"'.");return l}function Sg(e){return e.trimLeft()}function YN(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function QN(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Bu,Cg,kg,sm=["times"];(function(e){var t,r,i,a,s,l,c,u,m,x=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new u,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new l,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new l,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new g(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,c=this.internal.Rectangle,u=this.internal.Matrix,m=new x}]);var g=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var $=P;Object.defineProperty(this,"pdf",{get:function(){return $}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(Ne){W=!!Ne}});var H=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return H},set:function(Ne){H=!!Ne}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Ne){isNaN(Ne)||(te=Ne)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Ne){isNaN(Ne)||(me=Ne)}}),Object.defineProperty(this,"margin",{get:function(){return m.margin},set:function(Ne){var Y;typeof Ne=="number"?Y=[Ne,Ne,Ne,Ne]:((Y=new Array(4))[0]=Ne[0],Y[1]=Ne.length>=2?Ne[1]:Y[0],Y[2]=Ne.length>=3?Ne[2]:Y[0],Y[3]=Ne.length>=4?Ne[3]:Y[1]),m.margin=Y}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(Ne){xe=Ne}});var C=0;Object.defineProperty(this,"lastBreak",{get:function(){return C},set:function(Ne){C=Ne}});var K=[];Object.defineProperty(this,"pageBreaks",{get:function(){return K},set:function(Ne){K=Ne}}),Object.defineProperty(this,"ctx",{get:function(){return m},set:function(Ne){Ne instanceof x&&(m=Ne)}}),Object.defineProperty(this,"path",{get:function(){return m.path},set:function(Ne){m.path=Ne}});var R=[];Object.defineProperty(this,"ctxStack",{get:function(){return R},set:function(Ne){R=Ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ne){var Y;Y=v(Ne),this.ctx.fillStyle=Y.style,this.ctx.isFillTransparent=Y.a===0,this.ctx.fillOpacity=Y.a,this.pdf.setFillColor(Y.r,Y.g,Y.b,{a:Y.a}),this.pdf.setTextColor(Y.r,Y.g,Y.b,{a:Y.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ne){var Y=v(Ne);this.ctx.strokeStyle=Y.style,this.ctx.isStrokeTransparent=Y.a===0,this.ctx.strokeOpacity=Y.a,Y.a===0?this.pdf.setDrawColor(255,255,255):(Y.a,this.pdf.setDrawColor(Y.r,Y.g,Y.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ne){["butt","round","square"].indexOf(Ne)!==-1&&(this.ctx.lineCap=Ne,this.pdf.setLineCap(Ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ne){isNaN(Ne)||(this.ctx.lineWidth=Ne,this.pdf.setLineWidth(Ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ne){["bevel","round","miter"].indexOf(Ne)!==-1&&(this.ctx.lineJoin=Ne,this.pdf.setLineJoin(Ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ne){isNaN(Ne)||(this.ctx.miterLimit=Ne,this.pdf.setMiterLimit(Ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ne){this.ctx.textBaseline=Ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ne){["right","end","center","left","start"].indexOf(Ne)!==-1&&(this.ctx.textAlign=Ne)}});var he=null;function Ce(Ne,Y){if(he===null){var ht=function(Qe){var Fe=[];return Object.keys(Qe).forEach(function(ge){Qe[ge].forEach(function(Pe){var Se=null;switch(Pe){case"bold":Se={family:ge,weight:"bold"};break;case"italic":Se={family:ge,style:"italic"};break;case"bolditalic":Se={family:ge,weight:"bold",style:"italic"};break;case"":case"normal":Se={family:ge}}Se!==null&&(Se.ref={name:ge,style:Pe},Fe.push(Se))})}),Fe}(Ne.getFontList());he=function(Qe){for(var Fe={},ge=0;ge<Qe.length;++ge){var Pe=ff(Qe[ge]),Se=Pe.family,qe=Pe.stretch,$e=Pe.style,Ke=Pe.weight;Fe[Se]=Fe[Se]||{},Fe[Se][qe]=Fe[Se][qe]||{},Fe[Se][qe][$e]=Fe[Se][qe][$e]||{},Fe[Se][qe][$e][Ke]=Pe}return Fe}(ht.concat(Y))}return he}var Re=null;Object.defineProperty(this,"fontFaces",{get:function(){return Re},set:function(Ne){he=null,Re=Ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ne){var Y;if(this.ctx.font=Ne,(Y=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ne))!==null){var ht=Y[1];Y[2];var Qe=Y[3],Fe=Y[4];Y[5];var ge=Y[6],Pe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Fe)[2];Fe=Math.floor(Pe==="px"?parseFloat(Fe)*this.pdf.internal.scaleFactor:Pe==="em"?parseFloat(Fe)*this.pdf.getFontSize():parseFloat(Fe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Fe);var Se=function(lt){var mt,Ve,Vt=[],kt=lt.trim();if(kt==="")return sm;if(kt in bg)return[bg[kt]];for(;kt!=="";){switch(Ve=null,mt=(kt=Sg(kt)).charAt(0)){case'"':case"'":Ve=YN(kt.substring(1),mt);break;default:Ve=QN(kt)}if(Ve===null||(Vt.push(Ve[0]),(kt=Sg(Ve[1]))!==""&&kt.charAt(0)!==","))return sm;kt=kt.replace(/^,/,"")}return Vt}(ge);if(this.fontFaces){var qe=XN(Ce(this.pdf,this.fontFaces),Se.map(function(lt){return{family:lt,stretch:"normal",weight:Qe,style:ht}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var $e="";(Qe==="bold"||parseInt(Qe,10)>=700||ht==="bold")&&($e="bold"),ht==="italic"&&($e+="italic"),$e.length===0&&($e="normal");for(var Ke="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<Se.length;yt++){if(this.pdf.internal.getFont(Se[yt],$e,{noFallback:!0,disableWarning:!0})!==void 0){Ke=Se[yt];break}if($e==="bolditalic"&&this.pdf.internal.getFont(Se[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ke=Se[yt],$e="bold";else if(this.pdf.internal.getFont(Se[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ke=Se[yt],$e="normal";break}}if(Ke===""){for(var Pt=0;Pt<Se.length;Pt++)if(ot[Se[Pt]]){Ke=ot[Se[Pt]];break}}Ke=Ke===""?"Times":Ke,this.pdf.setFont(Ke,$e)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ne){this.ctx.globalCompositeOperation=Ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ne){this.ctx.globalAlpha=Ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ne){this.ctx.lineDashOffset=Ne,ze.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ne){this.ctx.lineDash=Ne,ze.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ne){this.ctx.ignoreClearRect=!!Ne}})};g.prototype.setLineDash=function(P){this.lineDash=P},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){G.call(this,"fill",!1)},g.prototype.stroke=function(){G.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(P,$){if(isNaN(P)||isNaN($))throw tn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new l(P,$));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(P,$)},g.prototype.closePath=function(){var P=new l(0,0),$=0;for($=this.path.length-1;$!==-1;$--)if(this.path[$].type==="begin"&&Qt(this.path[$+1])==="object"&&typeof this.path[$+1].x=="number"){P=new l(this.path[$+1].x,this.path[$+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(P.x,P.y)},g.prototype.lineTo=function(P,$){if(isNaN(P)||isNaN($))throw tn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new l(P,$));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new l(W.x,W.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},g.prototype.quadraticCurveTo=function(P,$,W,H){if(isNaN(W)||isNaN(H)||isNaN(P)||isNaN($))throw tn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new l(W,H)),me=this.ctx.transform.applyToPoint(new l(P,$));this.path.push({type:"qct",x1:me.x,y1:me.y,x:te.x,y:te.y}),this.ctx.lastPoint=new l(te.x,te.y)},g.prototype.bezierCurveTo=function(P,$,W,H,te,me){if(isNaN(te)||isNaN(me)||isNaN(P)||isNaN($)||isNaN(W)||isNaN(H))throw tn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new l(te,me)),C=this.ctx.transform.applyToPoint(new l(P,$)),K=this.ctx.transform.applyToPoint(new l(W,H));this.path.push({type:"bct",x1:C.x,y1:C.y,x2:K.x,y2:K.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},g.prototype.arc=function(P,$,W,H,te,me){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H)||isNaN(te))throw tn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=!!me,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new l(P,$));P=xe.x,$=xe.y;var C=this.ctx.transform.applyToPoint(new l(0,W)),K=this.ctx.transform.applyToPoint(new l(0,0));W=Math.sqrt(Math.pow(C.x-K.x,2)+Math.pow(C.y-K.y,2))}Math.abs(te-H)>=2*Math.PI&&(H=0,te=2*Math.PI),this.path.push({type:"arc",x:P,y:$,radius:W,startAngle:H,endAngle:te,counterclockwise:me})},g.prototype.arcTo=function(P,$,W,H,te){throw new Error("arcTo not implemented.")},g.prototype.rect=function(P,$,W,H){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H))throw tn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,$),this.lineTo(P+W,$),this.lineTo(P+W,$+H),this.lineTo(P,$+H),this.lineTo(P,$),this.lineTo(P+W,$),this.lineTo(P,$)},g.prototype.fillRect=function(P,$,W,H){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H))throw tn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,$,W,H),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},g.prototype.strokeRect=function(P,$,W,H){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H))throw tn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(P,$,W,H),this.stroke())},g.prototype.clearRect=function(P,$,W,H){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H))throw tn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,$,W,H))},g.prototype.save=function(P){P=typeof P!="boolean"||P;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage($),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var H=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=H}},g.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var $=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage($),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(P){var $,W,H,te;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))$=0,W=0,H=0,te=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(me!==null)$=parseInt(me[1]),W=parseInt(me[2]),H=parseInt(me[3]),te=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)$=parseInt(me[1]),W=parseInt(me[2]),H=parseInt(me[3]),te=parseFloat(me[4]);else{if(te=1,typeof P=="string"&&P.charAt(0)!=="#"){var xe=new hx(P);P=xe.ok?xe.toHex():"#000000"}P.length===4?($=P.substring(1,2),$+=$,W=P.substring(2,3),W+=W,H=P.substring(3,4),H+=H):($=P.substring(1,3),W=P.substring(3,5),H=P.substring(5,7)),$=parseInt($,16),W=parseInt(W,16),H=parseInt(H,16)}}return{r:$,g:W,b:H,a:te,style:P}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(P,$,W,H){if(isNaN($)||isNaN(W)||typeof P!="string")throw tn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(H=isNaN(H)?void 0:H,!p.call(this)){var te=Q(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:P,x:$,y:W,scale:me,angle:te,align:this.textAlign,maxWidth:H})}},g.prototype.strokeText=function(P,$,W,H){if(isNaN($)||isNaN(W)||typeof P!="string")throw tn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){H=isNaN(H)?void 0:H;var te=Q(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;D.call(this,{text:P,x:$,y:W,scale:me,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:H})}},g.prototype.measureText=function(P){if(typeof P!="string")throw tn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var $=this.pdf,W=this.pdf.internal.scaleFactor,H=$.internal.getFontSize(),te=$.getStringUnitWidth(P)*H/$.internal.scaleFactor,me=function(xe){var C=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return C}}),this};return new me({width:te*=Math.round(96*W/72*1e4)/1e4})},g.prototype.scale=function(P,$){if(isNaN(P)||isNaN($))throw tn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new u(P,0,0,$,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.rotate=function(P){if(isNaN(P))throw tn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var $=new u(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply($)},g.prototype.translate=function(P,$){if(isNaN(P)||isNaN($))throw tn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new u(1,0,0,1,P,$);this.ctx.transform=this.ctx.transform.multiply(W)},g.prototype.transform=function(P,$,W,H,te,me){if(isNaN(P)||isNaN($)||isNaN(W)||isNaN(H)||isNaN(te)||isNaN(me))throw tn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new u(P,$,W,H,te,me);this.ctx.transform=this.ctx.transform.multiply(xe)},g.prototype.setTransform=function(P,$,W,H,te,me){P=isNaN(P)?1:P,$=isNaN($)?0:$,W=isNaN(W)?0:W,H=isNaN(H)?1:H,te=isNaN(te)?0:te,me=isNaN(me)?0:me,this.ctx.transform=new u(P,$,W,H,te,me)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(P,$,W,H,te,me,xe,C,K){var R=this.pdf.getImageProperties(P),he=1,Ce=1,Re=1,Ne=1;H!==void 0&&C!==void 0&&(Re=C/H,Ne=K/te,he=R.width/H*C/H,Ce=R.height/te*K/te),me===void 0&&(me=$,xe=W,$=0,W=0),H!==void 0&&C===void 0&&(C=H,K=te),H===void 0&&C===void 0&&(C=R.width,K=R.height);for(var Y,ht=this.ctx.transform.decompose(),Qe=Q(ht.rotate.shx),Fe=new u,ge=(Fe=(Fe=(Fe=Fe.multiply(ht.translate)).multiply(ht.skew)).multiply(ht.scale)).applyToRectangle(new c(me-$*Re,xe-W*Ne,H*he,te*Ce)),Pe=A.call(this,ge),Se=[],qe=0;qe<Pe.length;qe+=1)Se.indexOf(Pe[qe])===-1&&Se.push(Pe[qe]);if(L(Se),this.autoPaging)for(var $e=Se[0],Ke=Se[Se.length-1],ot=$e;ot<Ke+1;ot++){this.pdf.setPage(ot);var yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=ot===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],mt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ve=ot===1?0:lt+(ot-2)*mt;if(this.ctx.clip_path.length!==0){var Vt=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Y,this.posX+this.margin[3],-Ve+Pt+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=Vt}var kt=JSON.parse(JSON.stringify(ge));kt=b([kt],this.posX+this.margin[3],-Ve+Pt+this.ctx.prevPageLastElemOffset)[0];var Ht=(ot>$e||ot<Ke)&&w.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yt,mt,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",kt.x,kt.y,kt.w,kt.h,null,null,Qe),Ht&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",ge.x,ge.y,ge.w,ge.h,null,null,Qe)};var A=function(P,$,W){var H=[];$=$||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":H.push(Math.floor((P.y+te)/W)+1);break;case"arc":H.push(Math.floor((P.y+te-P.radius)/W)+1),H.push(Math.floor((P.y+te+P.radius)/W)+1);break;case"qct":var me=de(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);H.push(Math.floor((me.y+te)/W)+1),H.push(Math.floor((me.y+me.h+te)/W)+1);break;case"bct":var xe=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);H.push(Math.floor((xe.y+te)/W)+1),H.push(Math.floor((xe.y+xe.h+te)/W)+1);break;case"rect":H.push(Math.floor((P.y+te)/W)+1),H.push(Math.floor((P.y+P.h+te)/W)+1)}for(var C=0;C<H.length;C+=1)for(;this.pdf.internal.getNumberOfPages()<H[C];)N.call(this);return H},N=function(){var P=this.fillStyle,$=this.strokeStyle,W=this.font,H=this.lineCap,te=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=$,this.font=W,this.lineCap=H,this.lineWidth=te,this.lineJoin=me},b=function(P,$,W){for(var H=0;H<P.length;H++)switch(P[H].type){case"bct":P[H].x2+=$,P[H].y2+=W;case"qct":P[H].x1+=$,P[H].y1+=W;case"mt":case"lt":case"arc":default:P[H].x+=$,P[H].y+=W}return P},L=function(P){return P.sort(function($,W){return $-W})},G=function(P,$){for(var W,H,te=this.fillStyle,me=this.strokeStyle,xe=this.lineCap,C=this.lineWidth,K=Math.abs(C*this.ctx.transform.scaleX),R=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),Ce=JSON.parse(JSON.stringify(this.path)),Re=[],Ne=0;Ne<Ce.length;Ne++)if(Ce[Ne].x!==void 0)for(var Y=A.call(this,Ce[Ne]),ht=0;ht<Y.length;ht+=1)Re.indexOf(Y[ht])===-1&&Re.push(Y[ht]);for(var Qe=0;Qe<Re.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<Re[Qe];)N.call(this);if(L(Re),this.autoPaging)for(var Fe=Re[0],ge=Re[Re.length-1],Pe=Fe;Pe<ge+1;Pe++){this.pdf.setPage(Pe),this.fillStyle=te,this.strokeStyle=me,this.lineCap=xe,this.lineWidth=K,this.lineJoin=R;var Se=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Pe===1?this.posY+this.margin[0]:this.margin[0],$e=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=Pe===1?0:$e+(Pe-2)*Ke;if(this.ctx.clip_path.length!==0){var yt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(W,this.posX+this.margin[3],-ot+qe+this.ctx.prevPageLastElemOffset),ne.call(this,P,!0),this.path=yt}if(H=JSON.parse(JSON.stringify(he)),this.path=b(H,this.posX+this.margin[3],-ot+qe+this.ctx.prevPageLastElemOffset),$===!1||Pe===0){var Pt=(Pe>Fe||Pe<ge)&&w.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,Ke,null).clip().discardPath()),ne.call(this,P,$),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=C}else this.lineWidth=K,ne.call(this,P,$),this.lineWidth=C;this.path=he},ne=function(P,$){if((P!=="stroke"||$||!j.call(this))&&(P==="stroke"||$||!p.call(this))){for(var W,H,te=[],me=this.path,xe=0;xe<me.length;xe++){var C=me[xe];switch(C.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:C,deltas:[],abs:[]});break;case"lt":var K=te.length;if(me[xe-1]&&!isNaN(me[xe-1].x)&&(W=[C.x-me[xe-1].x,C.y-me[xe-1].y],K>0)){for(;K>=0;K--)if(te[K-1].close!==!0&&te[K-1].begin!==!0){te[K-1].deltas.push(W),te[K-1].abs.push(C);break}}break;case"bct":W=[C.x1-me[xe-1].x,C.y1-me[xe-1].y,C.x2-me[xe-1].x,C.y2-me[xe-1].y,C.x-me[xe-1].x,C.y-me[xe-1].y],te[te.length-1].deltas.push(W);break;case"qct":var R=me[xe-1].x+2/3*(C.x1-me[xe-1].x),he=me[xe-1].y+2/3*(C.y1-me[xe-1].y),Ce=C.x+2/3*(C.x1-C.x),Re=C.y+2/3*(C.y1-C.y),Ne=C.x,Y=C.y;W=[R-me[xe-1].x,he-me[xe-1].y,Ce-me[xe-1].x,Re-me[xe-1].y,Ne-me[xe-1].x,Y-me[xe-1].y],te[te.length-1].deltas.push(W);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(C)}}H=$?null:P==="stroke"?"stroke":"fill";for(var ht=!1,Qe=0;Qe<te.length;Qe++)if(te[Qe].arc)for(var Fe=te[Qe].abs,ge=0;ge<Fe.length;ge++){var Pe=Fe[ge];Pe.type==="arc"?O.call(this,Pe.x,Pe.y,Pe.radius,Pe.startAngle,Pe.endAngle,Pe.counterclockwise,void 0,$,!ht):E.call(this,Pe.x,Pe.y),ht=!0}else if(te[Qe].close===!0)this.pdf.internal.out("h"),ht=!1;else if(te[Qe].begin!==!0){var Se=te[Qe].start.x,qe=te[Qe].start.y;q.call(this,te[Qe].deltas,Se,qe),ht=!0}H&&J.call(this,H),$&&ee.call(this)}},ce=function(P){var $=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=$*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-W;case"top":return P+$-W;case"hanging":return P+$-2*W;case"middle":return P+$/2-W;case"ideographic":return P;case"alphabetic":default:return P}},V=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function($,W){this.colorStops.push([$,W])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(P,$,W,H,te,me,xe,C,K){for(var R=ue.call(this,W,H,te,me),he=0;he<R.length;he++){var Ce=R[he];he===0&&(K?_.call(this,Ce.x1+P,Ce.y1+$):E.call(this,Ce.x1+P,Ce.y1+$)),ae.call(this,P,$,Ce.x2,Ce.y2,Ce.x3,Ce.y3,Ce.x4,Ce.y4)}C?ee.call(this):J.call(this,xe)},J=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ee=function(){this.pdf.clip(),this.pdf.discardPath()},_=function(P,$){this.pdf.internal.out(r(P)+" "+i($)+" m")},D=function(P){var $;switch(P.align){case"right":case"end":$="right";break;case"center":$="center";break;case"left":case"start":default:$="left"}var W=this.pdf.getTextDimensions(P.text),H=ce.call(this,P.y),te=V.call(this,H)-W.h,me=this.ctx.transform.applyToPoint(new l(P.x,H)),xe=this.ctx.transform.decompose(),C=new u;C=(C=(C=C.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var K,R,he,Ce=this.ctx.transform.applyToRectangle(new c(P.x,H,W.w,W.h)),Re=C.applyToRectangle(new c(P.x,te,W.w,W.h)),Ne=A.call(this,Re),Y=[],ht=0;ht<Ne.length;ht+=1)Y.indexOf(Ne[ht])===-1&&Y.push(Ne[ht]);if(L(Y),this.autoPaging)for(var Qe=Y[0],Fe=Y[Y.length-1],ge=Qe;ge<Fe+1;ge++){this.pdf.setPage(ge);var Pe=ge===1?this.posY+this.margin[0]:this.margin[0],Se=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],$e=qe-this.margin[0],Ke=this.pdf.internal.pageSize.width-this.margin[1],ot=Ke-this.margin[3],yt=ge===1?0:Se+(ge-2)*$e;if(this.ctx.clip_path.length!==0){var Pt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(K,this.posX+this.margin[3],-1*yt+Pe),ne.call(this,"fill",!0),this.path=Pt}var lt=b([JSON.parse(JSON.stringify(Re))],this.posX+this.margin[3],-yt+Pe+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(R=this.pdf.internal.getFontSize(),this.pdf.setFontSize(R*P.scale),he=this.lineWidth,this.lineWidth=he*P.scale);var mt=this.autoPaging!=="text";if(mt||lt.y+lt.h<=qe){if(mt||lt.y>=Pe&&lt.x<=Ke){var Ve=mt?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||Ke-lt.x)[0],Vt=b([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-yt+Pe+this.ctx.prevPageLastElemOffset)[0],kt=mt&&(ge>Qe||ge<Fe)&&w.call(this);kt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,$e,null).clip().discardPath()),this.pdf.text(Ve,Vt.x,Vt.y,{angle:P.angle,align:$,renderingMode:P.renderingMode}),kt&&this.pdf.restoreGraphicsState()}}else lt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-lt.y);P.scale>=.01&&(this.pdf.setFontSize(R),this.lineWidth=he)}else P.scale>=.01&&(R=this.pdf.internal.getFontSize(),this.pdf.setFontSize(R*P.scale),he=this.lineWidth,this.lineWidth=he*P.scale),this.pdf.text(P.text,me.x+this.posX,me.y+this.posY,{angle:P.angle,align:$,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(R),this.lineWidth=he)},E=function(P,$,W,H){W=W||0,H=H||0,this.pdf.internal.out(r(P+W)+" "+i($+H)+" l")},q=function(P,$,W){return this.pdf.lines(P,$,W,null,null)},ae=function(P,$,W,H,te,me,xe,C){this.pdf.internal.out([t(a(W+P)),t(s(H+$)),t(a(te+P)),t(s(me+$)),t(a(xe+P)),t(s(C+$)),"c"].join(" "))},ue=function(P,$,W,H){for(var te=2*Math.PI,me=Math.PI/2;$>W;)$-=te;var xe=Math.abs(W-$);xe<te&&H&&(xe=te-xe);for(var C=[],K=H?-1:1,R=$;xe>1e-5;){var he=R+K*Math.min(xe,me);C.push(we.call(this,P,R,he)),xe-=Math.abs(he-R),R=he}return C},we=function(P,$,W){var H=(W-$)/2,te=P*Math.cos(H),me=P*Math.sin(H),xe=te,C=-me,K=xe*xe+C*C,R=K+xe*te+C*me,he=4/3*(Math.sqrt(2*K*R)-R)/(xe*me-C*te),Ce=xe-he*C,Re=C+he*xe,Ne=Ce,Y=-Re,ht=H+$,Qe=Math.cos(ht),Fe=Math.sin(ht);return{x1:P*Math.cos($),y1:P*Math.sin($),x2:Ce*Qe-Re*Fe,y2:Ce*Fe+Re*Qe,x3:Ne*Qe-Y*Fe,y3:Ne*Fe+Y*Qe,x4:P*Math.cos(W),y4:P*Math.sin(W)}},Q=function(P){return 180*P/Math.PI},de=function(P,$,W,H,te,me){var xe=P+.5*(W-P),C=$+.5*(H-$),K=te+.5*(W-te),R=me+.5*(H-me),he=Math.min(P,te,xe,K),Ce=Math.max(P,te,xe,K),Re=Math.min($,me,C,R),Ne=Math.max($,me,C,R);return new c(he,Re,Ce-he,Ne-Re)},ie=function(P,$,W,H,te,me,xe,C){var K,R,he,Ce,Re,Ne,Y,ht,Qe,Fe,ge,Pe,Se,qe,$e=W-P,Ke=H-$,ot=te-W,yt=me-H,Pt=xe-te,lt=C-me;for(R=0;R<41;R++)Qe=(Y=(he=P+(K=R/40)*$e)+K*((Re=W+K*ot)-he))+K*(Re+K*(te+K*Pt-Re)-Y),Fe=(ht=(Ce=$+K*Ke)+K*((Ne=H+K*yt)-Ce))+K*(Ne+K*(me+K*lt-Ne)-ht),R==0?(ge=Qe,Pe=Fe,Se=Qe,qe=Fe):(ge=Math.min(ge,Qe),Pe=Math.min(Pe,Fe),Se=Math.max(Se,Qe),qe=Math.max(qe,Fe));return new c(Math.round(ge),Math.round(Pe),Math.round(Se-ge),Math.round(qe-Pe))},ze=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,$,W=(P=this.ctx.lineDash,$=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:$}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(gt.API),function(e){var t=function(s){var l,c,u,m,x,g,v,p,j,w;for(c=[],u=0,m=(s+=l="\0\0\0\0".slice(s.length%4||4)).length;m>u;u+=4)(x=(s.charCodeAt(u)<<24)+(s.charCodeAt(u+1)<<16)+(s.charCodeAt(u+2)<<8)+s.charCodeAt(u+3))!==0?(g=(x=((x=((x=((x=(x-(w=x%85))/85)-(j=x%85))/85)-(p=x%85))/85)-(v=x%85))/85)%85,c.push(g+33,v+33,p+33,j+33,w+33)):c.push(122);return function(A,N){for(var b=N;b>0;b--)A.pop()}(c,l.length),String.fromCharCode.apply(String,c)+"~>"},r=function(s){var l,c,u,m,x,g=String,v="length",p=255,j="charCodeAt",w="slice",A="replace";for(s[w](-2),s=s[w](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),u=[],m=0,x=(s+=l="uuuuu"[w](s[v]%5||5))[v];x>m;m+=5)c=52200625*(s[j](m)-33)+614125*(s[j](m+1)-33)+7225*(s[j](m+2)-33)+85*(s[j](m+3)-33)+(s[j](m+4)-33),u.push(p&c>>24,p&c>>16,p&c>>8,p&c);return function(N,b){for(var L=b;L>0;L--)N.pop()}(u,l[v]),g.fromCharCode.apply(g,u)},i=function(s){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),l.test(s)===!1)return"";for(var c="",u=0;u<s.length;u+=2)c+=String.fromCharCode("0x"+(s[u]+s[u+1]));return c},a=function(s){for(var l=new Uint8Array(s.length),c=s.length;c--;)l[c]=s.charCodeAt(c);return s=(l=lf(l)).reduce(function(u,m){return u+String.fromCharCode(m)},"")};e.processDataByFilters=function(s,l){var c=0,u=s||"",m=[];for(typeof(l=l||[])=="string"&&(l=[l]),c=0;c<l.length;c+=1)switch(l[c]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=u.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=a(u),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[c]+'" is not implemented')}return{data:u,reverseChain:m.reverse().join(" ")}}}(gt.API),function(e){e.loadFile=function(t,r,i){return function(a,s,l){s=s!==!1,l=typeof l=="function"?l:function(){};var c=void 0;try{c=function(u,m,x){var g=new XMLHttpRequest,v=0,p=function(j){var w=j.length,A=[],N=String.fromCharCode;for(v=0;v<w;v+=1)A.push(N(255&j.charCodeAt(v)));return A.join("")};if(g.open("GET",u,!m),g.overrideMimeType("text/plain; charset=x-user-defined"),m===!1&&(g.onload=function(){g.status===200?x(p(this.responseText)):x(void 0)}),g.send(null),m&&g.status===200)return p(g.responseText)}(a,s,l)}catch{}return c}(t,r,i)},e.loadImageFile=e.loadFile}(gt.API),function(e){function t(){return(xt.html2canvas?Promise.resolve(xt.html2canvas):nf(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(xt.DOMPurify?Promise.resolve(xt.DOMPurify):nf(()=>import("./purify.es-31816194.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var c=Qt(l);return c==="undefined"?"undefined":c==="string"||l instanceof String?"string":c==="number"||l instanceof Number?"number":c==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":c==="object"?"object":"unknown"},a=function(l,c){var u=document.createElement(l);for(var m in c.className&&(u.className=c.className),c.innerHTML&&c.dompurify&&(u.innerHTML=c.dompurify.sanitize(c.innerHTML)),c.style)u.style[m]=c.style[m];return u},s=function l(c){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),m=l.convert(Promise.resolve(),u);return m=(m=m.setProgress(1,l,1,[l])).set(c)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(l,c){return l.__proto__=c||s.prototype,l},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(l,c){return this.then(function(){switch(c=c||function(u){switch(i(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(r).then(function(u){return this.set({src:a("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},s.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},c=function u(m,x){for(var g=m.nodeType===3?document.createTextNode(m.nodeValue):m.cloneNode(!1),v=m.firstChild;v;v=v.nextSibling)x!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||g.appendChild(u(v,x));return m.nodeType===1&&(m.nodeName==="CANVAS"?(g.width=m.width,g.height=m.height,g.getContext("2d").drawImage(m,0,0)):m.nodeName!=="TEXTAREA"&&m.nodeName!=="SELECT"||(g.value=m.value),g.addEventListener("load",function(){g.scrollTop=m.scrollTop,g.scrollLeft=m.scrollLeft},!0)),g}(this.prop.src,this.opt.html2canvas.javascriptEnabled);c.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(c),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,c(this.prop.container,u)}).then(function(c){(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(c){var u=this.opt.jsPDF,m=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,g=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete g.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=m,m)for(var v=0;v<m.length;++v){var p=m[v],j=p.src.find(function(w){return w.format==="truetype"});j&&u.addFont(j.url,p.ref.name,p.ref.style)}return g.windowHeight=g.windowHeight||0,g.windowHeight=g.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):g.windowHeight,u.context2d.save(!0),c(this.prop.container,g)}).then(function(c){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(c),this.prop.canvas=c,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(l,c,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,c):this.outputPdf(l,c)},s.prototype.outputPdf=function(l,c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,c)})},s.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},s.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(l){if(i(l)!=="object")return this;var c=Object.keys(l||{}).map(function(u){if(u in s.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(c)})},s.prototype.get=function(l,c){return this.then(function(){var u=l in s.template.prop?this.prop[l]:this.opt[l];return c?c(u):u})},s.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},s.prototype.setPageSize=function(l){function c(u,m){return Math.floor(u*m/72*96)}return this.then(function(){(l=l||gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:c(l.inner.width,l.k),height:c(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},s.prototype.setProgress=function(l,c,u,m){return l!=null&&(this.progress.val=l),c!=null&&(this.progress.state=c),u!=null&&(this.progress.n=u),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(l,c,u,m){return this.setProgress(l?this.progress.val+l:null,c||null,u?this.progress.n+u:null,m?this.progress.stack.concat(m):null)},s.prototype.then=function(l,c){var u=this;return this.thenCore(l,c,function(m,x){return u.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(g){return u.updateProgress(null,m),g}).then(m,x).then(function(g){return u.updateProgress(1),g})})},s.prototype.thenCore=function(l,c,u){u=u||Promise.prototype.then,l&&(l=l.bind(this)),c&&(c=c.bind(this));var m=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),x=u.call(m,l,c);return s.convert(x,this.__proto__)},s.prototype.thenExternal=function(l,c){return Promise.prototype.then.call(this,l,c)},s.prototype.thenList=function(l){var c=this;return l.forEach(function(u){c=c.thenCore(u)}),c},s.prototype.catch=function(l){l&&(l=l.bind(this));var c=Promise.prototype.catch.call(this,l);return s.convert(c,this)},s.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},s.prototype.error=function(l){return this.then(function(){throw new Error(l)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gt.getPageSize=function(l,c,u){if(Qt(l)==="object"){var m=l;l=m.orientation,c=m.unit||c,u=m.format||u}c=c||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var x,g=(""+u).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(c){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+c}var p,j=0,w=0;if(v.hasOwnProperty(g))j=v[g][1]/x,w=v[g][0]/x;else try{j=u[1],w=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",w>j&&(p=w,w=j,j=p);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",j>w&&(p=w,w=j,j=p)}return{width:w,height:j,unit:c,k:x,orientation:l}},e.html=function(l,c){(c=c||{}).callback=c.callback||function(){},c.html2canvas=c.html2canvas||{},c.html2canvas.canvas=c.html2canvas.canvas||this.canvas,c.jsPDF=c.jsPDF||this,c.fontFaces=c.fontFaces?c.fontFaces.map(ff):null;var u=new s(c);return c.worker?u:u.from(l).doCallback()}}(gt.API),gt.API.addJS=function(e){return kg=e,this.internal.events.subscribe("postPutResources",function(){Bu=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Bu+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Cg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+kg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Bu!==void 0&&Cg!==void 0&&this.internal.out("/Names <</JavaScript "+Bu+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var l=a[s],c=i.exec(l);if(c!=null){var u=c[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var m=this.internal.pages.length,x=[];for(s=0;s<m;s++){var g=r.internal.newObject();x.push(g);var v=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<x.length;s++)r.internal.write("(page_"+(s+1)+")"+x[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,a,s){var l={title:a,options:s,children:[]};return i==null&&(i=this.root),i.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<i.children.length;s++){var l=i.children[s];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),s>0&&this.line("/Prev "+this.makeRef(i.children[s-1])),s<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[s+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var c=this.count=this.count_r({count:0},l);if(c>0&&this.line("/Count "+c),l.options&&l.options.pageNumber){var u=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var m=0;m<i.children.length;m++)this.renderItems(i.children[m])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,a){for(var s=0;s<a.children.length;s++)i.count++,this.count_r(i,a.children[s]);return i.count}}])}(gt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,a,s,l,c){var u,m=this.decode.DCT_DECODE,x=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(u=function(g){for(var v,p=256*g.charCodeAt(4)+g.charCodeAt(5),j=g.length,w={width:0,height:0,numcomponents:1},A=4;A<j;A+=2){if(A+=p,t.indexOf(g.charCodeAt(A+1))!==-1){v=256*g.charCodeAt(A+5)+g.charCodeAt(A+6),w={width:256*g.charCodeAt(A+7)+g.charCodeAt(A+8),height:v,numcomponents:g.charCodeAt(A+9)};break}p=256*g.charCodeAt(A+2)+g.charCodeAt(A+3)}return w}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:c=this.color_spaces.DEVICE_GRAY;break;case 4:c=this.color_spaces.DEVICE_CMYK;break;case 3:c=this.color_spaces.DEVICE_RGB}x={data:r,width:u.width,height:u.height,colorSpace:c,bitsPerComponent:8,filter:m,index:i,alias:a}}return x}}(gt.API);var jo,qu,Ag,Lg,Pg,KN=function(){var e,t,r;function i(s){var l,c,u,m,x,g,v,p,j,w,A,N,b,L;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},g=null;;){switch(l=this.readUInt32(),j=(function(){var G,ne;for(ne=[],G=0;G<4;++G)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":g&&this.animation.frames.push(g),this.pos+=4,g={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),m=this.readUInt16()||100,g.delay=1e3*x/m,g.disposeOp=this.data[this.pos++],g.blendOp=this.data[this.pos++],g.data=[];break;case"IDAT":case"fdAT":for(j==="fdAT"&&(this.pos+=4,l-=4),s=(g!=null?g.data:void 0)||this.imgData,N=0;0<=l?N<l:N>l;0<=l?++N:--N)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(u=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>u)throw new Error("More transparent colors than palette size");if((w=u-this.transparency.indexed.length)>0)for(b=0;0<=w?b<w:b>w;0<=w?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":v=(A=this.read(l)).indexOf(0),p=String.fromCharCode.apply(String,A.slice(0,v)),this.text[p]=String.fromCharCode.apply(String,A.slice(v+1));break;case"IEND":return g&&this.animation.frames.push(g),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(L=this.colorType)===4||L===6,c=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*c,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(s){var l,c;for(c=[],l=0;0<=s?l<s:l>s;0<=s?++l:--l)c.push(this.data[this.pos++]);return c},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(s){var l=this.pixelBitlength/8,c=new Uint8Array(this.width*this.height*l),u=0,m=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function x(g,v,p,j){var w,A,N,b,L,G,ne,ce,V,O,J,ee,_,D,E,q,ae,ue,we,Q,de,ie=Math.ceil((m.width-g)/p),ze=Math.ceil((m.height-v)/j),P=m.width==ie&&m.height==ze;for(D=l*ie,ee=P?c:new Uint8Array(D*ze),G=s.length,_=0,A=0;_<ze&&u<G;){switch(s[u++]){case 0:for(b=ae=0;ae<D;b=ae+=1)ee[A++]=s[u++];break;case 1:for(b=ue=0;ue<D;b=ue+=1)w=s[u++],L=b<l?0:ee[A-l],ee[A++]=(w+L)%256;break;case 2:for(b=we=0;we<D;b=we+=1)w=s[u++],N=(b-b%l)/l,E=_&&ee[(_-1)*D+N*l+b%l],ee[A++]=(E+w)%256;break;case 3:for(b=Q=0;Q<D;b=Q+=1)w=s[u++],N=(b-b%l)/l,L=b<l?0:ee[A-l],E=_&&ee[(_-1)*D+N*l+b%l],ee[A++]=(w+Math.floor((L+E)/2))%256;break;case 4:for(b=de=0;de<D;b=de+=1)w=s[u++],N=(b-b%l)/l,L=b<l?0:ee[A-l],_===0?E=q=0:(E=ee[(_-1)*D+N*l+b%l],q=N&&ee[(_-1)*D+(N-1)*l+b%l]),ne=L+E-q,ce=Math.abs(ne-L),O=Math.abs(ne-E),J=Math.abs(ne-q),V=ce<=O&&ce<=J?L:O<=J?E:q,ee[A++]=(w+V)%256;break;default:throw new Error("Invalid filter algorithm: "+s[u-1])}if(!P){var $=((v+_*j)*m.width+g)*l,W=_*D;for(b=0;b<ie;b+=1){for(var H=0;H<l;H+=1)c[$++]=ee[W++];$+=(p-1)*l}}_++}}return s=_N(s),m.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),c},i.prototype.decodePalette=function(){var s,l,c,u,m,x,g,v,p;for(c=this.palette,x=this.transparency.indexed||[],m=new Uint8Array((x.length||0)+c.length),u=0,s=0,l=g=0,v=c.length;g<v;l=g+=3)m[u++]=c[l],m[u++]=c[l+1],m[u++]=c[l+2],m[u++]=(p=x[s++])!=null?p:255;return m},i.prototype.copyToImageData=function(s,l){var c,u,m,x,g,v,p,j,w,A,N;if(u=this.colors,w=null,c=this.hasAlphaChannel,this.palette.length&&(w=(N=this._decodedPalette)!=null?N:this._decodedPalette=this.decodePalette(),u=4,c=!0),j=(m=s.data||s).length,g=w||l,x=v=0,u===1)for(;x<j;)p=w?4*l[x/4]:v,A=g[p++],m[x++]=A,m[x++]=A,m[x++]=A,m[x++]=c?g[p++]:255,v=p;else for(;x<j;)p=w?4*l[x/4]:v,m[x++]=g[p++],m[x++]=g[p++],m[x++]=g[p++],m[x++]=c?g[p++]:255,v=p},i.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(xt)==="[object Window]"){try{t=xt.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var l;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(l=new Image).src=t.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(s){var l,c,u,m,x,g,v,p;if(this.animation){for(p=[],c=x=0,g=(v=this.animation.frames).length;x<g;c=++x)l=v[c],u=s.createImageData(l.width,l.height),m=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(u,m),l.imageData=u,p.push(l.image=e(u));return p}},i.prototype.renderFrame=function(s,l){var c,u,m;return c=(u=this.animation.frames)[l],m=u[l-1],l===0&&s.clearRect(0,0,this.width,this.height),(m!=null?m.disposeOp:void 0)===1?s.clearRect(m.xOffset,m.yOffset,m.width,m.height):(m!=null?m.disposeOp:void 0)===2&&s.putImageData(m.imageData,m.xOffset,m.yOffset),c.blendOp===0&&s.clearRect(c.xOffset,c.yOffset,c.width,c.height),s.drawImage(c.image,c.xOffset,c.yOffset)},i.prototype.animate=function(s){var l,c,u,m,x,g,v=this;return c=0,g=this.animation,m=g.numFrames,u=g.frames,x=g.numPlays,(l=function(){var p,j;if(p=c++%m,j=u[p],v.renderFrame(s,p),m>1&&c/m<x)return v.animation._timeout=setTimeout(l,j.delay)})()},i.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},i.prototype.render=function(s){var l,c;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,l=s.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(c=l.createImageData(this.width,this.height),this.copyToImageData(c,this.decodePixels()),l.putImageData(c,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ZN(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,l=1<<(7&a)+1;e[t++],e[t++];var c=null,u=null;s&&(c=t,u=l,t+=3*l);var m=!0,x=[],g=0,v=null,p=0,j=null;for(this.width=r,this.height=i;m&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];g=e[t++]|e[t++]<<8,v=e[t++],!(1&w)&&(v=null),p=w>>2&7,t++;break;case 254:for(;;){if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var A=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,G=e[t++],ne=G>>6&1,ce=1<<(7&G)+1,V=c,O=u,J=!1;G>>7&&(J=!0,V=t,O=ce,t+=3*ce);var ee=t;for(t++;;){var _;if(!((_=e[t++])>=0))throw Error("Invalid block size");if(_===0)break;t+=_}x.push({x:A,y:N,width:b,height:L,has_local_palette:J,palette_offset:V,palette_size:O,data_offset:ee,data_length:t-ee,transparent_index:v,interlaced:!!ne,delay:g,disposal:p});break;case 59:m=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return j},this.frameInfo=function(D){if(D<0||D>=x.length)throw new Error("Frame index out of range.");return x[D]},this.decodeAndBlitFrameBGRA=function(D,E){var q=this.frameInfo(D),ae=q.width*q.height,ue=new Uint8Array(ae);_g(e,q.data_offset,ue,ae);var we=q.palette_offset,Q=q.transparent_index;Q===null&&(Q=256);var de=q.width,ie=r-de,ze=de,P=4*(q.y*r+q.x),$=4*((q.y+q.height)*r+q.x),W=P,H=4*ie;q.interlaced===!0&&(H+=4*r*7);for(var te=8,me=0,xe=ue.length;me<xe;++me){var C=ue[me];if(ze===0&&(ze=de,(W+=H)>=$&&(H=4*ie+4*r*(te-1),W=P+(de+ie)*(te<<1),te>>=1)),C===Q)W+=4;else{var K=e[we+3*C],R=e[we+3*C+1],he=e[we+3*C+2];E[W++]=he,E[W++]=R,E[W++]=K,E[W++]=255}--ze}},this.decodeAndBlitFrameRGBA=function(D,E){var q=this.frameInfo(D),ae=q.width*q.height,ue=new Uint8Array(ae);_g(e,q.data_offset,ue,ae);var we=q.palette_offset,Q=q.transparent_index;Q===null&&(Q=256);var de=q.width,ie=r-de,ze=de,P=4*(q.y*r+q.x),$=4*((q.y+q.height)*r+q.x),W=P,H=4*ie;q.interlaced===!0&&(H+=4*r*7);for(var te=8,me=0,xe=ue.length;me<xe;++me){var C=ue[me];if(ze===0&&(ze=de,(W+=H)>=$&&(H=4*ie+4*r*(te-1),W=P+(de+ie)*(te<<1),te>>=1)),C===Q)W+=4;else{var K=e[we+3*C],R=e[we+3*C+1],he=e[we+3*C+2];E[W++]=K,E[W++]=R,E[W++]=he,E[W++]=255}--ze}}}function _g(e,t,r,i){for(var a=e[t++],s=1<<a,l=s+1,c=l+1,u=a+1,m=(1<<u)-1,x=0,g=0,v=0,p=e[t++],j=new Int32Array(4096),w=null;;){for(;x<16&&p!==0;)g|=e[t++]<<x,x+=8,p===1?p=e[t++]:--p;if(x<u)break;var A=g&m;if(g>>=u,x-=u,A!==s){if(A===l)break;for(var N=A<c?A:w,b=0,L=N;L>s;)L=j[L]>>8,++b;var G=L;if(v+b+(N!==A?1:0)>i)return void tn.log("Warning, gif stream longer than expected.");r[v++]=G;var ne=v+=b;for(N!==A&&(r[v++]=G),L=N;b--;)L=j[L],r[--ne]=255&L,L>>=8;w!==null&&c<4096&&(j[c++]=w<<8|G,c>=m+1&&u<12&&(++u,m=m<<1|1)),w=A}else c=l+1,m=(1<<(u=a+1))-1,w=null}return v!==i&&tn.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function om(e){var t,r,i,a,s,l=Math.floor,c=new Array(64),u=new Array(64),m=new Array(64),x=new Array(64),g=new Array(65535),v=new Array(65535),p=new Array(64),j=new Array(64),w=[],A=0,N=7,b=new Array(64),L=new Array(64),G=new Array(64),ne=new Array(256),ce=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],ee=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],_=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ae=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ue(P,$){for(var W=0,H=0,te=new Array,me=1;me<=16;me++){for(var xe=1;xe<=P[me];xe++)te[$[H]]=[],te[$[H]][0]=W,te[$[H]][1]=me,H++,W++;W*=2}return te}function we(P){for(var $=P[0],W=P[1]-1;W>=0;)$&1<<W&&(A|=1<<N),W--,--N<0&&(A==255?(Q(255),Q(0)):Q(A),N=7,A=0)}function Q(P){w.push(P)}function de(P){Q(P>>8&255),Q(255&P)}function ie(P,$,W,H,te){for(var me,xe=te[0],C=te[240],K=function(Fe,ge){var Pe,Se,qe,$e,Ke,ot,yt,Pt,lt,mt,Ve=0;for(lt=0;lt<8;++lt){Pe=Fe[Ve],Se=Fe[Ve+1],qe=Fe[Ve+2],$e=Fe[Ve+3],Ke=Fe[Ve+4],ot=Fe[Ve+5],yt=Fe[Ve+6];var Vt=Pe+(Pt=Fe[Ve+7]),kt=Pe-Pt,Ht=Se+yt,Tt=Se-yt,vt=qe+ot,hn=qe-ot,zt=$e+Ke,fr=$e-Ke,nn=Vt+zt,Bn=Vt-zt,$t=Ht+vt,Bt=Ht-vt;Fe[Ve]=nn+$t,Fe[Ve+4]=nn-$t;var We=.707106781*(Bt+Bn);Fe[Ve+2]=Bn+We,Fe[Ve+6]=Bn-We;var M=.382683433*((nn=fr+hn)-(Bt=Tt+kt)),Ie=.5411961*nn+M,_e=1.306562965*Bt+M,it=.707106781*($t=hn+Tt),bt=kt+it,Ge=kt-it;Fe[Ve+5]=Ge+Ie,Fe[Ve+3]=Ge-Ie,Fe[Ve+1]=bt+_e,Fe[Ve+7]=bt-_e,Ve+=8}for(Ve=0,lt=0;lt<8;++lt){Pe=Fe[Ve],Se=Fe[Ve+8],qe=Fe[Ve+16],$e=Fe[Ve+24],Ke=Fe[Ve+32],ot=Fe[Ve+40],yt=Fe[Ve+48];var Gt=Pe+(Pt=Fe[Ve+56]),_t=Pe-Pt,Wt=Se+yt,Jt=Se-yt,qt=qe+ot,qn=qe-ot,qr=$e+Ke,pr=$e-Ke,$r=Gt+qr,Ur=Gt-qr,Ar=Wt+qt,ti=Wt-qt;Fe[Ve]=$r+Ar,Fe[Ve+32]=$r-Ar;var Lr=.707106781*(ti+Ur);Fe[Ve+16]=Ur+Lr,Fe[Ve+48]=Ur-Lr;var Dn=.382683433*(($r=pr+qn)-(ti=Jt+_t)),Ki=.5411961*$r+Dn,ja=1.306562965*ti+Dn,Zi=.707106781*(Ar=qn+Jt),Sa=_t+Zi,Ca=_t-Zi;Fe[Ve+40]=Ca+Ki,Fe[Ve+24]=Ca-Ki,Fe[Ve+8]=Sa+ja,Fe[Ve+56]=Sa-ja,Ve++}for(lt=0;lt<64;++lt)mt=Fe[lt]*ge[lt],p[lt]=mt>0?mt+.5|0:mt-.5|0;return p}(P,$),R=0;R<64;++R)j[V[R]]=K[R];var he=j[0]-W;W=j[0],he==0?we(H[0]):(we(H[v[me=32767+he]]),we(g[me]));for(var Ce=63;Ce>0&&j[Ce]==0;)Ce--;if(Ce==0)return we(xe),W;for(var Re,Ne=1;Ne<=Ce;){for(var Y=Ne;j[Ne]==0&&Ne<=Ce;)++Ne;var ht=Ne-Y;if(ht>=16){Re=ht>>4;for(var Qe=1;Qe<=Re;++Qe)we(C);ht&=15}me=32767+j[Ne],we(te[(ht<<4)+v[me]]),we(g[me]),Ne++}return Ce!=63&&we(xe),W}function ze(P){P=Math.min(Math.max(P,1),100),s!=P&&(function($){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],H=0;H<64;H++){var te=l((W[H]*$+50)/100);te=Math.min(Math.max(te,1),255),c[V[H]]=te}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var C=l((me[xe]*$+50)/100);C=Math.min(Math.max(C,1),255),u[V[xe]]=C}for(var K=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],R=0,he=0;he<8;he++)for(var Ce=0;Ce<8;Ce++)m[R]=1/(c[V[R]]*K[he]*K[Ce]*8),x[R]=1/(u[V[R]]*K[he]*K[Ce]*8),R++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),s=P)}this.encode=function(P,$){$&&ze($),w=new Array,A=0,N=7,de(65496),de(65504),de(16),Q(74),Q(70),Q(73),Q(70),Q(0),Q(1),Q(1),Q(0),de(1),de(1),Q(0),Q(0),function(){de(65499),de(132),Q(0);for(var Se=0;Se<64;Se++)Q(c[Se]);Q(1);for(var qe=0;qe<64;qe++)Q(u[qe])}(),function(Se,qe){de(65472),de(17),Q(8),de(qe),de(Se),Q(3),Q(1),Q(17),Q(0),Q(2),Q(17),Q(1),Q(3),Q(17),Q(1)}(P.width,P.height),function(){de(65476),de(418),Q(0);for(var Se=0;Se<16;Se++)Q(O[Se+1]);for(var qe=0;qe<=11;qe++)Q(J[qe]);Q(16);for(var $e=0;$e<16;$e++)Q(ee[$e+1]);for(var Ke=0;Ke<=161;Ke++)Q(_[Ke]);Q(1);for(var ot=0;ot<16;ot++)Q(D[ot+1]);for(var yt=0;yt<=11;yt++)Q(E[yt]);Q(17);for(var Pt=0;Pt<16;Pt++)Q(q[Pt+1]);for(var lt=0;lt<=161;lt++)Q(ae[lt])}(),de(65498),de(12),Q(3),Q(1),Q(0),Q(2),Q(17),Q(3),Q(17),Q(0),Q(63),Q(0);var W=0,H=0,te=0;A=0,N=7,this.encode.displayName="_encode_";for(var me,xe,C,K,R,he,Ce,Re,Ne,Y=P.data,ht=P.width,Qe=P.height,Fe=4*ht,ge=0;ge<Qe;){for(me=0;me<Fe;){for(R=Fe*ge+me,Ce=-1,Re=0,Ne=0;Ne<64;Ne++)he=R+(Re=Ne>>3)*Fe+(Ce=4*(7&Ne)),ge+Re>=Qe&&(he-=Fe*(ge+1+Re-Qe)),me+Ce>=Fe&&(he-=me+Ce-Fe+4),xe=Y[he++],C=Y[he++],K=Y[he++],b[Ne]=(ce[xe]+ce[C+256>>0]+ce[K+512>>0]>>16)-128,L[Ne]=(ce[xe+768>>0]+ce[C+1024>>0]+ce[K+1280>>0]>>16)-128,G[Ne]=(ce[xe+1280>>0]+ce[C+1536>>0]+ce[K+1792>>0]>>16)-128;W=ie(b,m,W,t,i),H=ie(L,x,H,r,a),te=ie(G,x,te,r,a),me+=32}ge+=8}if(N>=0){var Pe=[];Pe[1]=N+1,Pe[0]=(1<<N+1)-1,we(Pe)}return de(65497),new Uint8Array(w)},e=e||50,function(){for(var P=String.fromCharCode,$=0;$<256;$++)ne[$]=P($)}(),t=ue(O,J),r=ue(D,E),i=ue(ee,_),a=ue(q,ae),function(){for(var P=1,$=2,W=1;W<=15;W++){for(var H=P;H<$;H++)v[32767+H]=W,g[32767+H]=[],g[32767+H][1]=W,g[32767+H][0]=H;for(var te=-($-1);te<=-P;te++)v[32767+te]=W,g[32767+te]=[],g[32767+te][1]=W,g[32767+te][0]=$-1+te;P<<=1,$<<=1}}(),function(){for(var P=0;P<256;P++)ce[P]=19595*P,ce[P+256>>0]=38470*P,ce[P+512>>0]=7471*P+32768,ce[P+768>>0]=-11059*P,ce[P+1024>>0]=-21709*P,ce[P+1280>>0]=32768*P+8421375,ce[P+1536>>0]=-27439*P,ce[P+1792>>0]=-5329*P}(),ze(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ki(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function zg(e){function t(O){if(!O)throw Error("assert :P")}function r(O,J,ee){for(var _=0;4>_;_++)if(O[J+_]!=ee.charCodeAt(_))return!0;return!1}function i(O,J,ee,_,D){for(var E=0;E<D;E++)O[J+E]=ee[_+E]}function a(O,J,ee,_){for(var D=0;D<_;D++)O[J+D]=ee}function s(O){return new Int32Array(O)}function l(O,J){for(var ee=[],_=0;_<O;_++)ee.push(new J);return ee}function c(O,J){var ee=[];return function _(D,E,q){for(var ae=q[E],ue=0;ue<ae&&(D.push(q.length>E+1?[]:new J),!(q.length<E+1));ue++)_(D[ue],E+1,q)}(ee,0,O),ee}var u=function(){var O=this;function J(o,d){for(var f=1<<d-1>>>0;o&f;)f>>>=1;return f?(o&f-1)+f:o}function ee(o,d,f,y,S){t(!(y%f));do o[d+(y-=f)]=S;while(0<y)}function _(o,d,f,y,S){if(t(2328>=S),512>=S)var z=s(512);else if((z=s(S))==null)return 0;return function(I,T,F,U,oe,be){var je,ve,Te=T,Ae=1<<F,le=s(16),fe=s(16);for(t(oe!=0),t(U!=null),t(I!=null),t(0<F),ve=0;ve<oe;++ve){if(15<U[ve])return 0;++le[U[ve]]}if(le[0]==oe)return 0;for(fe[1]=0,je=1;15>je;++je){if(le[je]>1<<je)return 0;fe[je+1]=fe[je]+le[je]}for(ve=0;ve<oe;++ve)je=U[ve],0<U[ve]&&(be[fe[je]++]=ve);if(fe[15]==1)return(U=new D).g=0,U.value=be[0],ee(I,Te,1,Ae,U),Ae;var Me,Ee=-1,De=Ae-1,tt=0,Xe=1,pt=1,Ye=1<<F;for(ve=0,je=1,oe=2;je<=F;++je,oe<<=1){if(Xe+=pt<<=1,0>(pt-=le[je]))return 0;for(;0<le[je];--le[je])(U=new D).g=je,U.value=be[ve++],ee(I,Te+tt,oe,Ye,U),tt=J(tt,je)}for(je=F+1,oe=2;15>=je;++je,oe<<=1){if(Xe+=pt<<=1,0>(pt-=le[je]))return 0;for(;0<le[je];--le[je]){if(U=new D,(tt&De)!=Ee){for(Te+=Ye,Me=1<<(Ee=je)-F;15>Ee&&!(0>=(Me-=le[Ee]));)++Ee,Me<<=1;Ae+=Ye=1<<(Me=Ee-F),I[T+(Ee=tt&De)].g=Me+F,I[T+Ee].value=Te-T-Ee}U.g=je-F,U.value=be[ve++],ee(I,Te+(tt>>F),oe,Ye,U),tt=J(tt,je)}}return Xe!=2*fe[15]-1?0:Ae}(o,d,f,y,S,z)}function D(){this.value=this.g=0}function E(){this.value=this.g=0}function q(){this.G=l(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Yn,E)}function ae(o,d,f,y){t(o!=null),t(d!=null),t(2147483648>y),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=d,o.pa=f,o.Jd=d,o.Yc=f+y,o.Zc=4<=y?f+y-4+1:f,me(o)}function ue(o,d){for(var f=0;0<d--;)f|=C(o,128)<<d;return f}function we(o,d){var f=ue(o,d);return xe(o)?-f:f}function Q(o,d,f,y){var S,z=0;for(t(o!=null),t(d!=null),t(4294967288>y),o.Sb=y,o.Ra=0,o.u=0,o.h=0,4<y&&(y=4),S=0;S<y;++S)z+=d[f+S]<<8*S;o.Ra=z,o.bb=y,o.oa=d,o.pa=f}function de(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<uo-8>>>0,++o.bb,o.u-=8;W(o)&&(o.h=1,o.u=0)}function ie(o,d){if(t(0<=d),!o.h&&d<=co){var f=$(o)&lo[d];return o.u+=d,de(o),f}return o.h=1,o.u=0}function ze(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function $(o){return o.Ra>>>(o.u&uo-1)>>>0}function W(o){return t(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>uo}function H(o,d){o.u=d,o.h=W(o)}function te(o){o.u>=Ll&&(t(o.u>=Ll),de(o))}function me(o){t(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(t(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function xe(o){return ue(o,1)}function C(o,d){var f=o.Ca;0>o.b&&me(o);var y=o.b,S=f*d>>>8,z=(o.I>>>y>S)+0;for(z?(f-=S,o.I-=S+1<<y>>>0):f=S+1,y=f,S=0;256<=y;)S+=8,y>>=8;return y=7^S+_r[y],o.b-=y,o.Ca=(f<<y)-1,z}function K(o,d,f){o[d+0]=f>>24&255,o[d+1]=f>>16&255,o[d+2]=f>>8&255,o[d+3]=f>>0&255}function R(o,d){return o[d+0]<<0|o[d+1]<<8}function he(o,d){return R(o,d)|o[d+2]<<16}function Ce(o,d){return R(o,d)|R(o,d+2)<<16}function Re(o,d){var f=1<<d;return t(o!=null),t(0<d),o.X=s(f),o.X==null?0:(o.Mb=32-d,o.Xa=d,1)}function Ne(o,d){t(o!=null),t(d!=null),t(o.Xa==d.Xa),i(d.X,0,o.X,0,1<<d.Xa)}function Y(){this.X=[],this.Xa=this.Mb=0}function ht(o,d,f,y){t(f!=null),t(y!=null);var S=f[0],z=y[0];return S==0&&(S=(o*z+d/2)/d),z==0&&(z=(d*S+o/2)/o),0>=S||0>=z?0:(f[0]=S,y[0]=z,1)}function Qe(o,d){return o+(1<<d)-1>>>d}function Fe(o,d){return((4278255360&o)+(4278255360&d)>>>0&4278255360)+((16711935&o)+(16711935&d)>>>0&16711935)>>>0}function ge(o,d){O[d]=function(f,y,S,z,I,T,F){var U;for(U=0;U<I;++U){var oe=O[o](T[F+U-1],S,z+U);T[F+U]=Fe(f[y+U],oe)}}}function Pe(){this.ud=this.hd=this.jd=0}function Se(o,d){return((4278124286&(o^d))>>>1)+(o&d)>>>0}function qe(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function $e(o,d){return qe(o+(o-d+.5>>1))}function Ke(o,d,f){return Math.abs(d-f)-Math.abs(o-f)}function ot(o,d,f,y,S,z,I){for(y=z[I-1],f=0;f<S;++f)z[I+f]=y=Fe(o[d+f],y)}function yt(o,d,f,y,S){var z;for(z=0;z<f;++z){var I=o[d+z],T=I>>8&255,F=16711935&(F=(F=16711935&I)+((T<<16)+T));y[S+z]=(4278255360&I)+F>>>0}}function Pt(o,d){d.jd=o>>0&255,d.hd=o>>8&255,d.ud=o>>16&255}function lt(o,d,f,y,S,z){var I;for(I=0;I<y;++I){var T=d[f+I],F=T>>>8,U=T,oe=255&(oe=(oe=T>>>16)+((o.jd<<24>>24)*(F<<24>>24)>>>5));U=255&(U=(U=U+((o.hd<<24>>24)*(F<<24>>24)>>>5))+((o.ud<<24>>24)*(oe<<24>>24)>>>5)),S[z+I]=(4278255360&T)+(oe<<16)+U}}function mt(o,d,f,y,S){O[d]=function(z,I,T,F,U,oe,be,je,ve){for(F=be;F<je;++F)for(be=0;be<ve;++be)U[oe++]=S(T[y(z[I++])])},O[o]=function(z,I,T,F,U,oe,be){var je=8>>z.b,ve=z.Ea,Te=z.K[0],Ae=z.w;if(8>je)for(z=(1<<z.b)-1,Ae=(1<<je)-1;I<T;++I){var le,fe=0;for(le=0;le<ve;++le)le&z||(fe=y(F[U++])),oe[be++]=S(Te[fe&Ae]),fe>>=je}else O["VP8LMapColor"+f](F,U,Te,Ae,oe,be,I,T,ve)}}function Ve(o,d,f,y,S){for(f=d+f;d<f;){var z=o[d++];y[S++]=z>>16&255,y[S++]=z>>8&255,y[S++]=z>>0&255}}function Vt(o,d,f,y,S){for(f=d+f;d<f;){var z=o[d++];y[S++]=z>>16&255,y[S++]=z>>8&255,y[S++]=z>>0&255,y[S++]=z>>24&255}}function kt(o,d,f,y,S){for(f=d+f;d<f;){var z=(I=o[d++])>>16&240|I>>12&15,I=I>>0&240|I>>28&15;y[S++]=z,y[S++]=I}}function Ht(o,d,f,y,S){for(f=d+f;d<f;){var z=(I=o[d++])>>16&248|I>>13&7,I=I>>5&224|I>>3&31;y[S++]=z,y[S++]=I}}function Tt(o,d,f,y,S){for(f=d+f;d<f;){var z=o[d++];y[S++]=z>>0&255,y[S++]=z>>8&255,y[S++]=z>>16&255}}function vt(o,d,f,y,S,z){if(z==0)for(f=d+f;d<f;)K(y,((z=o[d++])[0]>>24|z[1]>>8&65280|z[2]<<8&16711680|z[3]<<24)>>>0),S+=32;else i(y,S,o,d,f)}function hn(o,d){O[d][0]=O[o+"0"],O[d][1]=O[o+"1"],O[d][2]=O[o+"2"],O[d][3]=O[o+"3"],O[d][4]=O[o+"4"],O[d][5]=O[o+"5"],O[d][6]=O[o+"6"],O[d][7]=O[o+"7"],O[d][8]=O[o+"8"],O[d][9]=O[o+"9"],O[d][10]=O[o+"10"],O[d][11]=O[o+"11"],O[d][12]=O[o+"12"],O[d][13]=O[o+"13"],O[d][14]=O[o+"0"],O[d][15]=O[o+"0"]}function zt(o){return o==hh||o==mh||o==iu||o==fh}function fr(){this.eb=[],this.size=this.A=this.fb=0}function nn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Bn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fr,this.f.kb=new nn,this.sd=null}function $t(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Bt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function We(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function M(o,d){var f=o.T,y=d.ba.f.RGBA,S=y.eb,z=y.fb+o.ka*y.A,I=ci[d.ba.S],T=o.y,F=o.O,U=o.f,oe=o.N,be=o.ea,je=o.W,ve=d.cc,Te=d.dc,Ae=d.Mc,le=d.Nc,fe=o.ka,Me=o.ka+o.T,Ee=o.U,De=Ee+1>>1;for(fe==0?I(T,F,null,null,U,oe,be,je,U,oe,be,je,S,z,null,null,Ee):(I(d.ec,d.fc,T,F,ve,Te,Ae,le,U,oe,be,je,S,z-y.A,S,z,Ee),++f);fe+2<Me;fe+=2)ve=U,Te=oe,Ae=be,le=je,oe+=o.Rc,je+=o.Rc,z+=2*y.A,I(T,(F+=2*o.fa)-o.fa,T,F,ve,Te,Ae,le,U,oe,be,je,S,z-y.A,S,z,Ee);return F+=o.fa,o.j+Me<o.o?(i(d.ec,d.fc,T,F,Ee),i(d.cc,d.dc,U,oe,De),i(d.Mc,d.Nc,be,je,De),f--):1&Me||I(T,F,null,null,U,oe,be,je,U,oe,be,je,S,z+y.A,null,null,Ee),f}function Ie(o,d,f){var y=o.F,S=[o.J];if(y!=null){var z=o.U,I=d.ba.S,T=I==ru||I==iu;d=d.ba.f.RGBA;var F=[0],U=o.ka;F[0]=o.T,o.Kb&&(U==0?--F[0]:(--U,S[0]-=o.width),o.j+o.ka+o.T==o.o&&(F[0]=o.o-o.j-U));var oe=d.eb;U=d.fb+U*d.A,o=an(y,S[0],o.width,z,F,oe,U+(T?0:3),d.A),t(f==F),o&&zt(I)&&oi(oe,U,T,z,F,d.A)}return 0}function _e(o){var d=o.ma,f=d.ba.S,y=11>f,S=f==tu||f==nu||f==ru||f==dh||f==12||zt(f);if(d.memory=null,d.Ib=null,d.Jb=null,d.Nd=null,!kl(d.Oa,o,S?11:12))return 0;if(S&&zt(f)&&Oe(),o.da)alert("todo:use_scaling");else{if(y){if(d.Ib=We,o.Kb){if(f=o.U+1>>1,d.memory=s(o.U+2*f),d.memory==null)return 0;d.ec=d.memory,d.fc=0,d.cc=d.ec,d.dc=d.fc+o.U,d.Mc=d.cc,d.Nc=d.dc+f,d.Ib=M,Oe()}}else alert("todo:EmitYUV");S&&(d.Jb=Ie,y&&ye())}if(y&&!Lp){for(o=0;256>o;++o)Vx[o]=89858*(o-128)+su>>au,Wx[o]=-22014*(o-128)+su,Gx[o]=-45773*(o-128),Hx[o]=113618*(o-128)+su>>au;for(o=Tl;o<xh;++o)d=76283*(o-16)+su>>au,Jx[o-Tl]=Vr(d,255),Xx[o-Tl]=Vr(d+8>>4,15);Lp=1}return 1}function it(o){var d=o.ma,f=o.U,y=o.T;return t(!(1&o.ka)),0>=f||0>=y?0:(f=d.Ib(o,d),d.Jb!=null&&d.Jb(o,d,f),d.Dc+=f,1)}function bt(o){o.ma.memory=null}function Ge(o,d,f,y){return ie(o,8)!=47?0:(d[0]=ie(o,14)+1,f[0]=ie(o,14)+1,y[0]=ie(o,1),ie(o,3)!=0?0:!o.h)}function Gt(o,d){if(4>o)return o+1;var f=o-2>>1;return(2+(1&o)<<f)+ie(d,f)+1}function _t(o,d){return 120<d?d-120:1<=(f=((f=_x[d-1])>>4)*o+(8-(15&f)))?f:1;var f}function Wt(o,d,f){var y=$(f),S=o[d+=255&y].g-8;return 0<S&&(H(f,f.u+8),y=$(f),d+=o[d].value,d+=y&(1<<S)-1),H(f,f.u+o[d].g),o[d].value}function Jt(o,d,f){return f.g+=o.g,f.value+=o.value<<d>>>0,t(8>=f.g),o.g}function qt(o,d,f){var y=o.xc;return t((d=y==0?0:o.vc[o.md*(f>>y)+(d>>y)])<o.Wb),o.Ya[d]}function qn(o,d,f,y){var S=o.ab,z=o.c*d,I=o.C;d=I+d;var T=f,F=y;for(y=o.Ta,f=o.Ua;0<S--;){var U=o.gc[S],oe=I,be=d,je=T,ve=F,Te=(F=y,T=f,U.Ea);switch(t(oe<be),t(be<=U.nc),U.hc){case 2:Jc(je,ve,(be-oe)*Te,F,T);break;case 0:var Ae=oe,le=be,fe=F,Me=T,Ee=(Ye=U).Ea;Ae==0&&(ch(je,ve,null,null,1,fe,Me),ot(je,ve+1,0,0,Ee-1,fe,Me+1),ve+=Ee,Me+=Ee,++Ae);for(var De=1<<Ye.b,tt=De-1,Xe=Qe(Ee,Ye.b),pt=Ye.K,Ye=Ye.w+(Ae>>Ye.b)*Xe;Ae<le;){var Ut=pt,Xt=Ye,Ot=1;for(Pl(je,ve,fe,Me-Ee,1,fe,Me);Ot<Ee;){var Dt=(Ot&~tt)+De;Dt>Ee&&(Dt=Ee),(0,Ma[Ut[Xt++]>>8&15])(je,ve+ +Ot,fe,Me+Ot-Ee,Dt-Ot,fe,Me+Ot),Ot=Dt}ve+=Ee,Me+=Ee,++Ae&tt||(Ye+=Xe)}be!=U.nc&&i(F,T-Te,F,T+(be-oe-1)*Te,Te);break;case 1:for(Te=je,le=ve,Ee=(je=U.Ea)-(Me=je&~(fe=(ve=1<<U.b)-1)),Ae=Qe(je,U.b),De=U.K,U=U.w+(oe>>U.b)*Ae;oe<be;){for(tt=De,Xe=U,pt=new Pe,Ye=le+Me,Ut=le+je;le<Ye;)Pt(tt[Xe++],pt),Ss(pt,Te,le,ve,F,T),le+=ve,T+=ve;le<Ut&&(Pt(tt[Xe++],pt),Ss(pt,Te,le,Ee,F,T),le+=Ee,T+=Ee),++oe&fe||(U+=Ae)}break;case 3:if(je==F&&ve==T&&0<U.b){for(le=F,je=Te=T+(be-oe)*Te-(Me=(be-oe)*Qe(U.Ea,U.b)),ve=F,fe=T,Ae=[],Me=(Ee=Me)-1;0<=Me;--Me)Ae[Me]=ve[fe+Me];for(Me=Ee-1;0<=Me;--Me)le[je+Me]=Ae[Me];ii(U,oe,be,F,Te,F,T)}else ii(U,oe,be,je,ve,F,T)}T=y,F=f}F!=f&&i(y,f,T,F,z)}function qr(o,d){var f=o.V,y=o.Ba+o.c*o.C,S=d-o.C;if(t(d<=o.l.o),t(16>=S),0<S){var z=o.l,I=o.Ta,T=o.Ua,F=z.width;if(qn(o,S,f,y),S=T=[T],t((f=o.C)<(y=d)),t(z.v<z.va),y>z.o&&(y=z.o),f<z.j){var U=z.j-f;f=z.j,S[0]+=U*F}if(f>=y?f=0:(S[0]+=4*z.v,z.ka=f-z.j,z.U=z.va-z.v,z.T=y-f,f=1),f){if(T=T[0],11>(f=o.ca).S){var oe=f.f.RGBA,be=(y=f.S,S=z.U,z=z.T,U=oe.eb,oe.A),je=z;for(oe=oe.fb+o.Ma*oe.A;0<je--;){var ve=I,Te=T,Ae=S,le=U,fe=oe;switch(y){case eu:zr(ve,Te,Ae,le,fe);break;case tu:xr(ve,Te,Ae,le,fe);break;case hh:xr(ve,Te,Ae,le,fe),oi(le,fe,0,Ae,1,0);break;case vp:aa(ve,Te,Ae,le,fe);break;case nu:vt(ve,Te,Ae,le,fe,1);break;case mh:vt(ve,Te,Ae,le,fe,1),oi(le,fe,0,Ae,1,0);break;case ru:vt(ve,Te,Ae,le,fe,0);break;case iu:vt(ve,Te,Ae,le,fe,0),oi(le,fe,1,Ae,1,0);break;case dh:Da(ve,Te,Ae,le,fe);break;case fh:Da(ve,Te,Ae,le,fe),rn(le,fe,Ae,1,0);break;case yp:ia(ve,Te,Ae,le,fe);break;default:t(0)}T+=F,oe+=be}o.Ma+=z}else alert("todo:EmitRescaledRowsYUVA");t(o.Ma<=f.height)}}o.C=d,t(o.C<=o.i)}function pr(o){var d;if(0<o.ua)return 0;for(d=0;d<o.Wb;++d){var f=o.Ya[d].G,y=o.Ya[d].H;if(0<f[1][y[1]+0].g||0<f[2][y[2]+0].g||0<f[3][y[3]+0].g)return 0}return 1}function $r(o,d,f,y,S,z){if(o.Z!=0){var I=o.qd,T=o.rd;for(t(Oa[o.Z]!=null);d<f;++d)Oa[o.Z](I,T,y,S,y,S,z),I=y,T=S,S+=z;o.qd=I,o.rd=T}}function Ur(o,d){var f=o.l.ma,y=f.Z==0||f.Z==1?o.l.j:o.C;if(y=o.C<y?y:o.C,t(d<=o.l.o),d>y){var S=o.l.width,z=f.ca,I=f.tb+S*y,T=o.V,F=o.Ba+o.c*y,U=o.gc;t(o.ab==1),t(U[0].hc==3),Xc(U[0],y,d,T,F,z,I),$r(f,y,d,z,I,S)}o.C=o.Ma=d}function Ar(o,d,f,y,S,z,I){var T=o.$/y,F=o.$%y,U=o.m,oe=o.s,be=f+o.$,je=be;S=f+y*S;var ve=f+y*z,Te=280+oe.ua,Ae=o.Pb?T:16777216,le=0<oe.ua?oe.Wa:null,fe=oe.wc,Me=be<ve?qt(oe,F,T):null;t(o.C<z),t(ve<=S);var Ee=!1;e:for(;;){for(;Ee||be<ve;){var De=0;if(T>=Ae){var tt=be-f;t((Ae=o).Pb),Ae.wd=Ae.m,Ae.xd=tt,0<Ae.s.ua&&Ne(Ae.s.Wa,Ae.s.vb),Ae=T+Ix}if(F&fe||(Me=qt(oe,F,T)),t(Me!=null),Me.Qb&&(d[be]=Me.qb,Ee=!0),!Ee)if(te(U),Me.jc){De=U,tt=d;var Xe=be,pt=Me.pd[$(De)&Yn-1];t(Me.jc),256>pt.g?(H(De,De.u+pt.g),tt[Xe]=pt.value,De=0):(H(De,De.u+pt.g-256),t(256<=pt.value),De=pt.value),De==0&&(Ee=!0)}else De=Wt(Me.G[0],Me.H[0],U);if(U.h)break;if(Ee||256>De){if(!Ee)if(Me.nd)d[be]=(Me.qb|De<<8)>>>0;else{if(te(U),Ee=Wt(Me.G[1],Me.H[1],U),te(U),tt=Wt(Me.G[2],Me.H[2],U),Xe=Wt(Me.G[3],Me.H[3],U),U.h)break;d[be]=(Xe<<24|Ee<<16|De<<8|tt)>>>0}if(Ee=!1,++be,++F>=y&&(F=0,++T,I!=null&&T<=z&&!(T%16)&&I(o,T),le!=null))for(;je<be;)De=d[je++],le.X[(506832829*De&4294967295)>>>le.Mb]=De}else if(280>De){if(De=Gt(De-256,U),tt=Wt(Me.G[4],Me.H[4],U),te(U),tt=_t(y,tt=Gt(tt,U)),U.h)break;if(be-f<tt||S-be<De)break e;for(Xe=0;Xe<De;++Xe)d[be+Xe]=d[be+Xe-tt];for(be+=De,F+=De;F>=y;)F-=y,++T,I!=null&&T<=z&&!(T%16)&&I(o,T);if(t(be<=S),F&fe&&(Me=qt(oe,F,T)),le!=null)for(;je<be;)De=d[je++],le.X[(506832829*De&4294967295)>>>le.Mb]=De}else{if(!(De<Te))break e;for(Ee=De-280,t(le!=null);je<be;)De=d[je++],le.X[(506832829*De&4294967295)>>>le.Mb]=De;De=be,t(!(Ee>>>(tt=le).Xa)),d[De]=tt.X[Ee],Ee=!0}Ee||t(U.h==W(U))}if(o.Pb&&U.h&&be<S)t(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&Ne(o.s.vb,o.s.Wa);else{if(U.h)break e;I!=null&&I(o,T>z?z:T),o.a=0,o.$=be-f}return 1}return o.a=3,0}function ti(o){t(o!=null),o.vc=null,o.yc=null,o.Ya=null;var d=o.Wa;d!=null&&(d.X=null),o.vb=null,t(o!=null)}function Lr(){var o=new lh;return o==null?null:(o.a=0,o.xb=bp,hn("Predictor","VP8LPredictors"),hn("Predictor","VP8LPredictors_C"),hn("PredictorAdd","VP8LPredictorsAdd"),hn("PredictorAdd","VP8LPredictorsAdd_C"),Jc=yt,Ss=lt,zr=Ve,xr=Vt,Da=kt,ia=Ht,aa=Tt,O.VP8LMapColor32b=ho,O.VP8LMapColor8b=Yc,o)}function Dn(o,d,f,y,S){var z=1,I=[o],T=[d],F=y.m,U=y.s,oe=null,be=0;e:for(;;){if(f)for(;z&&ie(F,1);){var je=I,ve=T,Te=y,Ae=1,le=Te.m,fe=Te.gc[Te.ab],Me=ie(le,2);if(Te.Oc&1<<Me)z=0;else{switch(Te.Oc|=1<<Me,fe.hc=Me,fe.Ea=je[0],fe.nc=ve[0],fe.K=[null],++Te.ab,t(4>=Te.ab),Me){case 0:case 1:fe.b=ie(le,3)+2,Ae=Dn(Qe(fe.Ea,fe.b),Qe(fe.nc,fe.b),0,Te,fe.K),fe.K=fe.K[0];break;case 3:var Ee,De=ie(le,8)+1,tt=16<De?0:4<De?1:2<De?2:3;if(je[0]=Qe(fe.Ea,tt),fe.b=tt,Ee=Ae=Dn(De,1,0,Te,fe.K)){var Xe,pt=De,Ye=fe,Ut=1<<(8>>Ye.b),Xt=s(Ut);if(Xt==null)Ee=0;else{var Ot=Ye.K[0],Dt=Ye.w;for(Xt[0]=Ye.K[0][0],Xe=1;Xe<1*pt;++Xe)Xt[Xe]=Fe(Ot[Dt+Xe],Xt[Xe-1]);for(;Xe<4*Ut;++Xe)Xt[Xe]=0;Ye.K[0]=null,Ye.K[0]=Xt,Ee=1}}Ae=Ee;break;case 2:break;default:t(0)}z=Ae}}if(I=I[0],T=T[0],z&&ie(F,1)&&!(z=1<=(be=ie(F,4))&&11>=be)){y.a=3;break e}var en;if(en=z)t:{var Zt,Lt,zn,Ir=y,In=I,Mr=T,Yt=be,Gr=f,Wr=Ir.m,Un=Ir.s,Qn=[null],yr=1,ui=0,qi=zx[Yt];n:for(;;){if(Gr&&ie(Wr,1)){var Vn=ie(Wr,3)+2,ca=Qe(In,Vn),Ps=Qe(Mr,Vn),xo=ca*Ps;if(!Dn(ca,Ps,0,Ir,Qn))break n;for(Qn=Qn[0],Un.xc=Vn,Zt=0;Zt<xo;++Zt){var Ra=Qn[Zt]>>8&65535;Qn[Zt]=Ra,Ra>=yr&&(yr=Ra+1)}}if(Wr.h)break n;for(Lt=0;5>Lt;++Lt){var wn=Np[Lt];!Lt&&0<Yt&&(wn+=1<<Yt),ui<wn&&(ui=wn)}var vh=l(yr*qi,D),zp=yr,Ip=l(zp,q);if(Ip==null)var lu=null;else t(65536>=zp),lu=Ip;var El=s(ui);if(lu==null||El==null||vh==null){Ir.a=1;break n}var cu=vh;for(Zt=zn=0;Zt<yr;++Zt){var ji=lu[Zt],vo=ji.G,yo=ji.H,Mp=0,uu=1,Dp=0;for(Lt=0;5>Lt;++Lt){wn=Np[Lt],vo[Lt]=cu,yo[Lt]=zn,!Lt&&0<Yt&&(wn+=1<<Yt);i:{var du,yh=wn,hu=Ir,Fl=El,Kx=cu,Zx=zn,Nh=0,Ba=hu.m,e5=ie(Ba,1);if(a(Fl,0,0,yh),e5){var t5=ie(Ba,1)+1,n5=ie(Ba,1),Tp=ie(Ba,n5==0?1:8);Fl[Tp]=1,t5==2&&(Fl[Tp=ie(Ba,8)]=1);var mu=1}else{var Ep=s(19),Fp=ie(Ba,4)+4;if(19<Fp){hu.a=3;var fu=0;break i}for(du=0;du<Fp;++du)Ep[Px[du]]=ie(Ba,3);var wh=void 0,Ol=void 0,Op=hu,r5=Ep,pu=yh,Rp=Fl,bh=0,qa=Op.m,Bp=8,qp=l(128,D);r:for(;_(qp,0,7,r5,19);){if(ie(qa,1)){var i5=2+2*ie(qa,3);if((wh=2+ie(qa,i5))>pu)break r}else wh=pu;for(Ol=0;Ol<pu&&wh--;){te(qa);var $p=qp[0+(127&$(qa))];H(qa,qa.u+$p.g);var No=$p.value;if(16>No)Rp[Ol++]=No,No!=0&&(Bp=No);else{var a5=No==16,Up=No-16,s5=Ax[Up],Vp=ie(qa,kx[Up])+s5;if(Ol+Vp>pu)break r;for(var o5=a5?Bp:0;0<Vp--;)Rp[Ol++]=o5}}bh=1;break r}bh||(Op.a=3),mu=bh}(mu=mu&&!Ba.h)&&(Nh=_(Kx,Zx,8,Fl,yh)),mu&&Nh!=0?fu=Nh:(hu.a=3,fu=0)}if(fu==0)break n;if(uu&&Lx[Lt]==1&&(uu=cu[zn].g==0),Mp+=cu[zn].g,zn+=fu,3>=Lt){var Rl,jh=El[0];for(Rl=1;Rl<wn;++Rl)El[Rl]>jh&&(jh=El[Rl]);Dp+=jh}}if(ji.nd=uu,ji.Qb=0,uu&&(ji.qb=(vo[3][yo[3]+0].value<<24|vo[1][yo[1]+0].value<<16|vo[2][yo[2]+0].value)>>>0,Mp==0&&256>vo[0][yo[0]+0].value&&(ji.Qb=1,ji.qb+=vo[0][yo[0]+0].value<<8)),ji.jc=!ji.Qb&&6>Dp,ji.jc){var gu,ua=ji;for(gu=0;gu<Yn;++gu){var $a=gu,Ua=ua.pd[$a],xu=ua.G[0][ua.H[0]+$a];256<=xu.value?(Ua.g=xu.g+256,Ua.value=xu.value):(Ua.g=0,Ua.value=0,$a>>=Jt(xu,8,Ua),$a>>=Jt(ua.G[1][ua.H[1]+$a],16,Ua),$a>>=Jt(ua.G[2][ua.H[2]+$a],0,Ua),Jt(ua.G[3][ua.H[3]+$a],24,Ua))}}}Un.vc=Qn,Un.Wb=yr,Un.Ya=lu,Un.yc=vh,en=1;break t}en=0}if(!(z=en)){y.a=3;break e}if(0<be){if(U.ua=1<<be,!Re(U.Wa,be)){y.a=1,z=0;break e}}else U.ua=0;var Sh=y,Hp=I,l5=T,Ch=Sh.s,kh=Ch.xc;if(Sh.c=Hp,Sh.i=l5,Ch.md=Qe(Hp,kh),Ch.wc=kh==0?-1:(1<<kh)-1,f){y.xb=Rx;break e}if((oe=s(I*T))==null){y.a=1,z=0;break e}z=(z=Ar(y,oe,0,I,T,T,null))&&!F.h;break e}return z?(S!=null?S[0]=oe:(t(oe==null),t(f)),y.$=0,f||ti(U)):ti(U),z}function Ki(o,d){var f=o.c*o.i,y=f+d+16*d;return t(o.c<=d),o.V=s(y),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+f+d,1)}function ja(o,d){var f=o.C,y=d-f,S=o.V,z=o.Ba+o.c*f;for(t(d<=o.l.o);0<y;){var I=16<y?16:y,T=o.l.ma,F=o.l.width,U=F*I,oe=T.ca,be=T.tb+F*f,je=o.Ta,ve=o.Ua;qn(o,I,S,z),Cn(je,ve,oe,be,U),$r(T,f,f+I,oe,be,F),y-=I,S+=I*o.c,f+=I}t(f==d),o.C=o.Ma=d}function Zi(){this.ub=this.yd=this.td=this.Rb=0}function Sa(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ca(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ys(){this.Yb=function(){var o=[];return function d(f,y,S){for(var z=S[y],I=0;I<z&&(f.push(S.length>y+1?[]:0),!(S.length<y+1));I++)d(f[I],y+1,S)}(o,0,[3,11]),o}()}function ul(){this.jb=s(3),this.Wc=c([4,8],Ys),this.Xc=c([4,17],Ys)}function dl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function ka(){this.ld=this.La=this.dd=this.tc=0}function Qs(){this.Na=this.la=0}function hl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ea(){this.uc=this.M=this.Nb=0,this.wa=Array(new ka),this.Y=0,this.ya=Array(new xs),this.aa=0,this.l=new ri}function ni(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Tn(){this.cb=this.a=0,this.sc="",this.m=new ze,this.Od=new Zi,this.Kc=new Sa,this.ed=new dl,this.Qa=new Ca,this.Ic=this.$c=this.Aa=0,this.D=new ea,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,ze),this.ia=0,this.pb=l(4,hl),this.Pa=new ul,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ni),this.Hd=0,this.rb=Array(new Qs),this.sb=0,this.wa=Array(new ka),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xs),this.L=this.aa=0,this.gd=c([4,2],ka),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ri(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ml(){var o=new Tn;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,Dl||(Dl=vs)),o}function mn(o,d,f){return o.a==0&&(o.a=d,o.sc=f,o.cb=0),0}function Ks(o,d,f){return 3<=f&&o[d+0]==157&&o[d+1]==1&&o[d+2]==42}function ta(o,d){if(o==null)return 0;if(o.a=0,o.sc="OK",d==null)return mn(o,2,"null VP8Io passed to VP8GetHeaders()");var f=d.data,y=d.w,S=d.ha;if(4>S)return mn(o,7,"Truncated header.");var z=f[y+0]|f[y+1]<<8|f[y+2]<<16,I=o.Od;if(I.Rb=!(1&z),I.td=z>>1&7,I.yd=z>>4&1,I.ub=z>>5,3<I.td)return mn(o,3,"Incorrect keyframe parameters.");if(!I.yd)return mn(o,4,"Frame not displayable.");y+=3,S-=3;var T=o.Kc;if(I.Rb){if(7>S)return mn(o,7,"cannot parse picture header");if(!Ks(f,y,S))return mn(o,3,"Bad code word");T.c=16383&(f[y+4]<<8|f[y+3]),T.Td=f[y+4]>>6,T.i=16383&(f[y+6]<<8|f[y+5]),T.Ud=f[y+6]>>6,y+=7,S-=7,o.za=T.c+15>>4,o.Ub=T.i+15>>4,d.width=T.c,d.height=T.i,d.Da=0,d.j=0,d.v=0,d.va=d.width,d.o=d.height,d.da=0,d.ib=d.width,d.hb=d.height,d.U=d.width,d.T=d.height,a((z=o.Pa).jb,0,255,z.jb.length),t((z=o.Qa)!=null),z.Cb=0,z.Bb=0,z.Fb=1,a(z.Zb,0,0,z.Zb.length),a(z.Lb,0,0,z.Lb)}if(I.ub>S)return mn(o,7,"bad partition length");ae(z=o.m,f,y,I.ub),y+=I.ub,S-=I.ub,I.Rb&&(T.Ld=xe(z),T.Kd=xe(z)),T=o.Qa;var F,U=o.Pa;if(t(z!=null),t(T!=null),T.Cb=xe(z),T.Cb){if(T.Bb=xe(z),xe(z)){for(T.Fb=xe(z),F=0;4>F;++F)T.Zb[F]=xe(z)?we(z,7):0;for(F=0;4>F;++F)T.Lb[F]=xe(z)?we(z,6):0}if(T.Bb)for(F=0;3>F;++F)U.jb[F]=xe(z)?ue(z,8):255}else T.Bb=0;if(z.Ka)return mn(o,3,"cannot parse segment header");if((T=o.ed).zd=xe(z),T.Tb=ue(z,6),T.wb=ue(z,3),T.Pc=xe(z),T.Pc&&xe(z)){for(U=0;4>U;++U)xe(z)&&(T.vd[U]=we(z,6));for(U=0;4>U;++U)xe(z)&&(T.od[U]=we(z,6))}if(o.L=T.Tb==0?0:T.zd?1:2,z.Ka)return mn(o,3,"cannot parse filter header");var oe=S;if(S=F=y,y=F+oe,T=oe,o.Xb=(1<<ue(o.m,2))-1,oe<3*(U=o.Xb))f=7;else{for(F+=3*U,T-=3*U,oe=0;oe<U;++oe){var be=f[S+0]|f[S+1]<<8|f[S+2]<<16;be>T&&(be=T),ae(o.Jc[+oe],f,F,be),F+=be,T-=be,S+=3}ae(o.Jc[+U],f,F,T),f=F<y?0:5}if(f!=0)return mn(o,f,"cannot parse partitions");for(f=ue(F=o.m,7),S=xe(F)?we(F,4):0,y=xe(F)?we(F,4):0,T=xe(F)?we(F,4):0,U=xe(F)?we(F,4):0,F=xe(F)?we(F,4):0,oe=o.Qa,be=0;4>be;++be){if(oe.Cb){var je=oe.Zb[be];oe.Fb||(je+=f)}else{if(0<be){o.pb[be]=o.pb[0];continue}je=f}var ve=o.pb[be];ve.Sc[0]=ph[Vr(je+S,127)],ve.Sc[1]=gh[Vr(je+0,127)],ve.Eb[0]=2*ph[Vr(je+y,127)],ve.Eb[1]=101581*gh[Vr(je+T,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=ph[Vr(je+U,117)],ve.Qc[1]=gh[Vr(je+F,127)],ve.lc=je+F}if(!I.Rb)return mn(o,4,"Not a key frame.");for(xe(z),I=o.Pa,f=0;4>f;++f){for(S=0;8>S;++S)for(y=0;3>y;++y)for(T=0;11>T;++T)U=C(z,Fx[f][S][y][T])?ue(z,8):Tx[f][S][y][T],I.Wc[f][S].Yb[y][T]=U;for(S=0;17>S;++S)I.Xc[f][S]=I.Wc[f][Ox[S]]}return o.kc=xe(z),o.kc&&(o.Bd=ue(z,8)),o.cb=1}function vs(o,d,f,y,S,z,I){var T=d[S].Yb[f];for(f=0;16>S;++S){if(!C(o,T[f+0]))return S;for(;!C(o,T[f+1]);)if(T=d[++S].Yb[0],f=0,S==16)return 16;var F=d[S+1].Yb;if(C(o,T[f+2])){var U=o,oe=0;if(C(U,(je=T)[(be=f)+3]))if(C(U,je[be+6])){for(T=0,be=2*(oe=C(U,je[be+8]))+(je=C(U,je[be+9+oe])),oe=0,je=Mx[be];je[T];++T)oe+=oe+C(U,je[T]);oe+=3+(8<<be)}else C(U,je[be+7])?(oe=7+2*C(U,165),oe+=C(U,145)):oe=5+C(U,159);else oe=C(U,je[be+4])?3+C(U,je[be+5]):2;T=F[2]}else oe=1,T=F[1];F=I+Dx[S],0>(U=o).b&&me(U);var be,je=U.b,ve=(be=U.Ca>>1)-(U.I>>je)>>31;--U.b,U.Ca+=ve,U.Ca|=1,U.I-=(be+1&ve)<<je,z[F]=((oe^ve)-ve)*y[(0<S)+0]}return 16}function Aa(o){var d=o.rb[o.sb-1];d.la=0,d.Na=0,a(o.zc,0,0,o.zc.length),o.ja=0}function Zs(o,d){if(o==null)return 0;if(d==null)return mn(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!ta(o,d))return 0;if(t(o.cb),d.ac==null||d.ac(d)){d.ob&&(o.L=0);var f=ou[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=d.v-f>>4,o.zb=d.j-f>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=d.o+15+f>>4,o.Hb=d.va+15+f>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var y=o.ed;for(f=0;4>f;++f){var S;if(o.Qa.Cb){var z=o.Qa.Lb[f];o.Qa.Fb||(z+=y.Tb)}else z=y.Tb;for(S=0;1>=S;++S){var I=o.gd[f][S],T=z;if(y.Pc&&(T+=y.vd[0],S&&(T+=y.od[0])),0<(T=0>T?0:63<T?63:T)){var F=T;0<y.wb&&(F=4<y.wb?F>>2:F>>1)>9-y.wb&&(F=9-y.wb),1>F&&(F=1),I.dd=F,I.tc=2*T+F,I.ld=40<=T?2:15<=T?1:0}else I.tc=0;I.La=S}}}f=0}else mn(o,6,"Frame setup failed"),f=o.a;if(f=f==0){if(f){o.$c=0,0<o.Aa||(o.Ic=Qx);e:{f=o.Ic,y=4*(F=o.za);var U=32*F,oe=F+1,be=0<o.L?F*(0<o.Aa?2:1):0,je=(o.Aa==2?2:1)*F;if((I=y+832+(S=3*(16*f+ou[o.L])/2*U)+(z=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=I)f=0;else{if(I>o.Vb){if(o.Vb=0,o.Ec=s(I),o.Fc=0,o.Ec==null){f=mn(o,1,"no memory during frame initialization.");break e}o.Vb=I}I=o.Ec,T=o.Fc,o.Ac=I,o.Bc=T,T+=y,o.Gd=l(U,ni),o.Hd=0,o.rb=l(oe+1,Qs),o.sb=1,o.wa=be?l(be,ka):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=F),t(!0),o.oc=I,o.pc=T,T+=832,o.ya=l(je,xs),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=F),o.R=16*F,o.B=8*F,F=(U=ou[o.L])*o.R,U=U/2*o.B,o.sa=I,o.ta=T+F,o.qa=o.sa,o.ra=o.ta+16*f*o.R+U,o.Ha=o.qa,o.Ia=o.ra+8*f*o.B+U,o.$c=0,T+=S,o.mb=z?I:null,o.nb=z?T:null,t(T+z<=o.Fc+o.Vb),Aa(o),a(o.Ac,o.Bc,0,y),f=1}}if(f){if(d.ka=0,d.y=o.sa,d.O=o.ta,d.f=o.qa,d.N=o.ra,d.ea=o.Ha,d.Vd=o.Ia,d.fa=o.R,d.Rc=o.B,d.F=null,d.J=0,!Kc){for(f=-255;255>=f;++f)En[255+f]=0>f?-f:f;for(f=-1020;1020>=f;++f)oa[1020+f]=-128>f?-128:127<f?127:f;for(f=-112;112>=f;++f)Ml[112+f]=-16>f?-16:15<f?15:f;for(f=-255;510>=f;++f)go[255+f]=0>f?0:255<f?255:f;Kc=1}mo=ft,sa=B,_l=ke,vr=Be,ai=jt,Sn=ys,fo=xl,Qc=bs,zl=oh,Cs=vl,ks=sh,Ta=ro,As=yl,po=Hc,Ls=Vc,Ea=Ri,Il=ra,si=ah,bi[0]=Oi,bi[1]=It,bi[2]=Zd,bi[3]=eh,bi[4]=Rc,bi[5]=to,bi[6]=Bc,bi[7]=fl,bi[8]=nh,bi[9]=th,Fa[0]=eo,Fa[1]=Fi,Fa[2]=Ft,Fa[3]=gr,Fa[4]=rr,Fa[5]=Kd,Fa[6]=Oc,la[0]=_a,la[1]=fn,la[2]=rh,la[3]=pl,la[4]=ws,la[5]=ih,la[6]=gl,f=1}else f=0}f&&(f=function(ve,Te){for(ve.M=0;ve.M<ve.Va;++ve.M){var Ae,le=ve.Jc[ve.M&ve.Xb],fe=ve.m,Me=ve;for(Ae=0;Ae<Me.za;++Ae){var Ee=fe,De=Me,tt=De.Ac,Xe=De.Bc+4*Ae,pt=De.zc,Ye=De.ya[De.aa+Ae];if(De.Qa.Bb?Ye.$b=C(Ee,De.Pa.jb[0])?2+C(Ee,De.Pa.jb[2]):C(Ee,De.Pa.jb[1]):Ye.$b=0,De.kc&&(Ye.Ad=C(Ee,De.Bd)),Ye.Za=!C(Ee,145)+0,Ye.Za){var Ut=Ye.Ob,Xt=0;for(De=0;4>De;++De){var Ot,Dt=pt[0+De];for(Ot=0;4>Ot;++Ot){Dt=Ex[tt[Xe+Ot]][Dt];for(var en=wp[C(Ee,Dt[0])];0<en;)en=wp[2*en+C(Ee,Dt[en])];Dt=-en,tt[Xe+Ot]=Dt}i(Ut,Xt,tt,Xe,4),Xt+=4,pt[0+De]=Dt}}else Dt=C(Ee,156)?C(Ee,128)?1:3:C(Ee,163)?2:0,Ye.Ob[0]=Dt,a(tt,Xe,Dt,4),a(pt,0,Dt,4);Ye.Dd=C(Ee,142)?C(Ee,114)?C(Ee,183)?1:3:2:0}if(Me.m.Ka)return mn(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Me=le,Ee=(fe=ve).rb[fe.sb-1],tt=fe.rb[fe.sb+fe.ja],Ae=fe.ya[fe.aa+fe.ja],Xe=fe.kc?Ae.Ad:0)Ee.la=tt.la=0,Ae.Za||(Ee.Na=tt.Na=0),Ae.Hc=0,Ae.Gc=0,Ae.ia=0;else{var Zt,Lt;if(Ee=tt,tt=Me,Xe=fe.Pa.Xc,pt=fe.ya[fe.aa+fe.ja],Ye=fe.pb[pt.$b],De=pt.ad,Ut=0,Xt=fe.rb[fe.sb-1],Dt=Ot=0,a(De,Ut,0,384),pt.Za)var zn=0,Ir=Xe[3];else{en=s(16);var In=Ee.Na+Xt.Na;if(In=Dl(tt,Xe[1],In,Ye.Eb,0,en,0),Ee.Na=Xt.Na=(0<In)+0,1<In)mo(en,0,De,Ut);else{var Mr=en[0]+3>>3;for(en=0;256>en;en+=16)De[Ut+en]=Mr}zn=1,Ir=Xe[0]}var Yt=15&Ee.la,Gr=15&Xt.la;for(en=0;4>en;++en){var Wr=1&Gr;for(Mr=Lt=0;4>Mr;++Mr)Yt=Yt>>1|(Wr=(In=Dl(tt,Ir,In=Wr+(1&Yt),Ye.Sc,zn,De,Ut))>zn)<<7,Lt=Lt<<2|(3<In?3:1<In?2:De[Ut+0]!=0),Ut+=16;Yt>>=4,Gr=Gr>>1|Wr<<7,Ot=(Ot<<8|Lt)>>>0}for(Ir=Yt,zn=Gr>>4,Zt=0;4>Zt;Zt+=2){for(Lt=0,Yt=Ee.la>>4+Zt,Gr=Xt.la>>4+Zt,en=0;2>en;++en){for(Wr=1&Gr,Mr=0;2>Mr;++Mr)In=Wr+(1&Yt),Yt=Yt>>1|(Wr=0<(In=Dl(tt,Xe[2],In,Ye.Qc,0,De,Ut)))<<3,Lt=Lt<<2|(3<In?3:1<In?2:De[Ut+0]!=0),Ut+=16;Yt>>=2,Gr=Gr>>1|Wr<<5}Dt|=Lt<<4*Zt,Ir|=Yt<<4<<Zt,zn|=(240&Gr)<<Zt}Ee.la=Ir,Xt.la=zn,pt.Hc=Ot,pt.Gc=Dt,pt.ia=43690&Dt?0:Ye.ia,Xe=!(Ot|Dt)}if(0<fe.L&&(fe.wa[fe.Y+fe.ja]=fe.gd[Ae.$b][Ae.Za],fe.wa[fe.Y+fe.ja].La|=!Xe),Me.Ka)return mn(ve,7,"Premature end-of-file encountered.")}if(Aa(ve),fe=Te,Me=1,Ae=(le=ve).D,Ee=0<le.L&&le.M>=le.zb&&le.M<=le.Va,le.Aa==0)e:{if(Ae.M=le.M,Ae.uc=Ee,Cl(le,Ae),Me=1,Ae=(Lt=le.D).Nb,Ee=(Dt=ou[le.L])*le.R,tt=Dt/2*le.B,en=16*Ae*le.R,Mr=8*Ae*le.B,Xe=le.sa,pt=le.ta-Ee+en,Ye=le.qa,De=le.ra-tt+Mr,Ut=le.Ha,Xt=le.Ia-tt+Mr,Gr=(Yt=Lt.M)==0,Ot=Yt>=le.Va-1,le.Aa==2&&Cl(le,Lt),Lt.uc)for(Wr=(In=le).D.M,t(In.D.uc),Lt=In.yb;Lt<In.Hb;++Lt){zn=Lt,Ir=Wr;var Un=(Qn=(wn=In).D).Nb;Zt=wn.R;var Qn=Qn.wa[Qn.Y+zn],yr=wn.sa,ui=wn.ta+16*Un*Zt+16*zn,qi=Qn.dd,Vn=Qn.tc;if(Vn!=0)if(t(3<=Vn),wn.L==1)0<zn&&Ea(yr,ui,Zt,Vn+4),Qn.La&&si(yr,ui,Zt,Vn),0<Ir&&Ls(yr,ui,Zt,Vn+4),Qn.La&&Il(yr,ui,Zt,Vn);else{var ca=wn.B,Ps=wn.qa,xo=wn.ra+8*Un*ca+8*zn,Ra=wn.Ha,wn=wn.Ia+8*Un*ca+8*zn;Un=Qn.ld,0<zn&&(Qc(yr,ui,Zt,Vn+4,qi,Un),Cs(Ps,xo,Ra,wn,ca,Vn+4,qi,Un)),Qn.La&&(Ta(yr,ui,Zt,Vn,qi,Un),po(Ps,xo,Ra,wn,ca,Vn,qi,Un)),0<Ir&&(fo(yr,ui,Zt,Vn+4,qi,Un),zl(Ps,xo,Ra,wn,ca,Vn+4,qi,Un)),Qn.La&&(ks(yr,ui,Zt,Vn,qi,Un),As(Ps,xo,Ra,wn,ca,Vn,qi,Un))}}if(le.ia&&alert("todo:DitherRow"),fe.put!=null){if(Lt=16*Yt,Yt=16*(Yt+1),Gr?(fe.y=le.sa,fe.O=le.ta+en,fe.f=le.qa,fe.N=le.ra+Mr,fe.ea=le.Ha,fe.W=le.Ia+Mr):(Lt-=Dt,fe.y=Xe,fe.O=pt,fe.f=Ye,fe.N=De,fe.ea=Ut,fe.W=Xt),Ot||(Yt-=Dt),Yt>fe.o&&(Yt=fe.o),fe.F=null,fe.J=null,le.Fa!=null&&0<le.Fa.length&&Lt<Yt&&(fe.J=jl(le,fe,Lt,Yt-Lt),fe.F=le.mb,fe.F==null&&fe.F.length==0)){Me=mn(le,3,"Could not decode alpha data.");break e}Lt<fe.j&&(Dt=fe.j-Lt,Lt=fe.j,t(!(1&Dt)),fe.O+=le.R*Dt,fe.N+=le.B*(Dt>>1),fe.W+=le.B*(Dt>>1),fe.F!=null&&(fe.J+=fe.width*Dt)),Lt<Yt&&(fe.O+=fe.v,fe.N+=fe.v>>1,fe.W+=fe.v>>1,fe.F!=null&&(fe.J+=fe.v),fe.ka=Lt-fe.j,fe.U=fe.va-fe.v,fe.T=Yt-Lt,Me=fe.put(fe))}Ae+1!=le.Ic||Ot||(i(le.sa,le.ta-Ee,Xe,pt+16*le.R,Ee),i(le.qa,le.ra-tt,Ye,De+8*le.B,tt),i(le.Ha,le.Ia-tt,Ut,Xt+8*le.B,tt))}if(!Me)return mn(ve,6,"Output aborted.")}return 1}(o,d)),d.bc!=null&&d.bc(d),f&=1}return f?(o.cb=0,f):0}function Pr(o,d,f,y,S){S=o[d+f+32*y]+(S>>3),o[d+f+32*y]=-256&S?0>S?0:255:S}function na(o,d,f,y,S,z){Pr(o,d,0,f,y+S),Pr(o,d,1,f,y+z),Pr(o,d,2,f,y-z),Pr(o,d,3,f,y-S)}function Xn(o){return(20091*o>>16)+o}function La(o,d,f,y){var S,z=0,I=s(16);for(S=0;4>S;++S){var T=o[d+0]+o[d+8],F=o[d+0]-o[d+8],U=(35468*o[d+4]>>16)-Xn(o[d+12]),oe=Xn(o[d+4])+(35468*o[d+12]>>16);I[z+0]=T+oe,I[z+1]=F+U,I[z+2]=F-U,I[z+3]=T-oe,z+=4,d++}for(S=z=0;4>S;++S)T=(o=I[z+0]+4)+I[z+8],F=o-I[z+8],U=(35468*I[z+4]>>16)-Xn(I[z+12]),Pr(f,y,0,0,T+(oe=Xn(I[z+4])+(35468*I[z+12]>>16))),Pr(f,y,1,0,F+U),Pr(f,y,2,0,F-U),Pr(f,y,3,0,T-oe),z++,y+=32}function ys(o,d,f,y){var S=o[d+0]+4,z=35468*o[d+4]>>16,I=Xn(o[d+4]),T=35468*o[d+1]>>16;na(f,y,0,S+I,o=Xn(o[d+1]),T),na(f,y,1,S+z,o,T),na(f,y,2,S-z,o,T),na(f,y,3,S-I,o,T)}function B(o,d,f,y,S){La(o,d,f,y),S&&La(o,d+16,f,y+4)}function ke(o,d,f,y){sa(o,d+0,f,y,1),sa(o,d+32,f,y+128,1)}function Be(o,d,f,y){var S;for(o=o[d+0]+4,S=0;4>S;++S)for(d=0;4>d;++d)Pr(f,y,d,S,o)}function jt(o,d,f,y){o[d+0]&&vr(o,d+0,f,y),o[d+16]&&vr(o,d+16,f,y+4),o[d+32]&&vr(o,d+32,f,y+128),o[d+48]&&vr(o,d+48,f,y+128+4)}function ft(o,d,f,y){var S,z=s(16);for(S=0;4>S;++S){var I=o[d+0+S]+o[d+12+S],T=o[d+4+S]+o[d+8+S],F=o[d+4+S]-o[d+8+S],U=o[d+0+S]-o[d+12+S];z[0+S]=I+T,z[8+S]=I-T,z[4+S]=U+F,z[12+S]=U-F}for(S=0;4>S;++S)I=(o=z[0+4*S]+3)+z[3+4*S],T=z[1+4*S]+z[2+4*S],F=z[1+4*S]-z[2+4*S],U=o-z[3+4*S],f[y+0]=I+T>>3,f[y+16]=U+F>>3,f[y+32]=I-T>>3,f[y+48]=U-F>>3,y+=64}function Nt(o,d,f){var y,S=d-32,z=Hr,I=255-o[S-1];for(y=0;y<f;++y){var T,F=z,U=I+o[d-1];for(T=0;T<f;++T)o[d+T]=F[U+o[S+T]];d+=32}}function It(o,d){Nt(o,d,4)}function fn(o,d){Nt(o,d,8)}function Fi(o,d){Nt(o,d,16)}function Ft(o,d){var f;for(f=0;16>f;++f)i(o,d+32*f,o,d-32,16)}function gr(o,d){var f;for(f=16;0<f;--f)a(o,d,o[d-1],16),d+=32}function Pa(o,d,f){var y;for(y=0;16>y;++y)a(d,f+32*y,o,16)}function eo(o,d){var f,y=16;for(f=0;16>f;++f)y+=o[d-1+32*f]+o[d+f-32];Pa(y>>5,o,d)}function rr(o,d){var f,y=8;for(f=0;16>f;++f)y+=o[d-1+32*f];Pa(y>>4,o,d)}function Kd(o,d){var f,y=8;for(f=0;16>f;++f)y+=o[d+f-32];Pa(y>>4,o,d)}function Oc(o,d){Pa(128,o,d)}function wt(o,d,f){return o+2*d+f+2>>2}function Zd(o,d){var f,y=d-32;for(y=new Uint8Array([wt(o[y-1],o[y+0],o[y+1]),wt(o[y+0],o[y+1],o[y+2]),wt(o[y+1],o[y+2],o[y+3]),wt(o[y+2],o[y+3],o[y+4])]),f=0;4>f;++f)i(o,d+32*f,y,0,y.length)}function eh(o,d){var f=o[d-1],y=o[d-1+32],S=o[d-1+64],z=o[d-1+96];K(o,d+0,16843009*wt(o[d-1-32],f,y)),K(o,d+32,16843009*wt(f,y,S)),K(o,d+64,16843009*wt(y,S,z)),K(o,d+96,16843009*wt(S,z,z))}function Oi(o,d){var f,y=4;for(f=0;4>f;++f)y+=o[d+f-32]+o[d-1+32*f];for(y>>=3,f=0;4>f;++f)a(o,d+32*f,y,4)}function Rc(o,d){var f=o[d-1+0],y=o[d-1+32],S=o[d-1+64],z=o[d-1-32],I=o[d+0-32],T=o[d+1-32],F=o[d+2-32],U=o[d+3-32];o[d+0+96]=wt(y,S,o[d-1+96]),o[d+1+96]=o[d+0+64]=wt(f,y,S),o[d+2+96]=o[d+1+64]=o[d+0+32]=wt(z,f,y),o[d+3+96]=o[d+2+64]=o[d+1+32]=o[d+0+0]=wt(I,z,f),o[d+3+64]=o[d+2+32]=o[d+1+0]=wt(T,I,z),o[d+3+32]=o[d+2+0]=wt(F,T,I),o[d+3+0]=wt(U,F,T)}function Bc(o,d){var f=o[d+1-32],y=o[d+2-32],S=o[d+3-32],z=o[d+4-32],I=o[d+5-32],T=o[d+6-32],F=o[d+7-32];o[d+0+0]=wt(o[d+0-32],f,y),o[d+1+0]=o[d+0+32]=wt(f,y,S),o[d+2+0]=o[d+1+32]=o[d+0+64]=wt(y,S,z),o[d+3+0]=o[d+2+32]=o[d+1+64]=o[d+0+96]=wt(S,z,I),o[d+3+32]=o[d+2+64]=o[d+1+96]=wt(z,I,T),o[d+3+64]=o[d+2+96]=wt(I,T,F),o[d+3+96]=wt(T,F,F)}function to(o,d){var f=o[d-1+0],y=o[d-1+32],S=o[d-1+64],z=o[d-1-32],I=o[d+0-32],T=o[d+1-32],F=o[d+2-32],U=o[d+3-32];o[d+0+0]=o[d+1+64]=z+I+1>>1,o[d+1+0]=o[d+2+64]=I+T+1>>1,o[d+2+0]=o[d+3+64]=T+F+1>>1,o[d+3+0]=F+U+1>>1,o[d+0+96]=wt(S,y,f),o[d+0+64]=wt(y,f,z),o[d+0+32]=o[d+1+96]=wt(f,z,I),o[d+1+32]=o[d+2+96]=wt(z,I,T),o[d+2+32]=o[d+3+96]=wt(I,T,F),o[d+3+32]=wt(T,F,U)}function fl(o,d){var f=o[d+0-32],y=o[d+1-32],S=o[d+2-32],z=o[d+3-32],I=o[d+4-32],T=o[d+5-32],F=o[d+6-32],U=o[d+7-32];o[d+0+0]=f+y+1>>1,o[d+1+0]=o[d+0+64]=y+S+1>>1,o[d+2+0]=o[d+1+64]=S+z+1>>1,o[d+3+0]=o[d+2+64]=z+I+1>>1,o[d+0+32]=wt(f,y,S),o[d+1+32]=o[d+0+96]=wt(y,S,z),o[d+2+32]=o[d+1+96]=wt(S,z,I),o[d+3+32]=o[d+2+96]=wt(z,I,T),o[d+3+64]=wt(I,T,F),o[d+3+96]=wt(T,F,U)}function th(o,d){var f=o[d-1+0],y=o[d-1+32],S=o[d-1+64],z=o[d-1+96];o[d+0+0]=f+y+1>>1,o[d+2+0]=o[d+0+32]=y+S+1>>1,o[d+2+32]=o[d+0+64]=S+z+1>>1,o[d+1+0]=wt(f,y,S),o[d+3+0]=o[d+1+32]=wt(y,S,z),o[d+3+32]=o[d+1+64]=wt(S,z,z),o[d+3+64]=o[d+2+64]=o[d+0+96]=o[d+1+96]=o[d+2+96]=o[d+3+96]=z}function nh(o,d){var f=o[d-1+0],y=o[d-1+32],S=o[d-1+64],z=o[d-1+96],I=o[d-1-32],T=o[d+0-32],F=o[d+1-32],U=o[d+2-32];o[d+0+0]=o[d+2+32]=f+I+1>>1,o[d+0+32]=o[d+2+64]=y+f+1>>1,o[d+0+64]=o[d+2+96]=S+y+1>>1,o[d+0+96]=z+S+1>>1,o[d+3+0]=wt(T,F,U),o[d+2+0]=wt(I,T,F),o[d+1+0]=o[d+3+32]=wt(f,I,T),o[d+1+32]=o[d+3+64]=wt(y,f,I),o[d+1+64]=o[d+3+96]=wt(S,y,f),o[d+1+96]=wt(z,S,y)}function rh(o,d){var f;for(f=0;8>f;++f)i(o,d+32*f,o,d-32,8)}function pl(o,d){var f;for(f=0;8>f;++f)a(o,d,o[d-1],8),d+=32}function Ns(o,d,f){var y;for(y=0;8>y;++y)a(d,f+32*y,o,8)}function _a(o,d){var f,y=8;for(f=0;8>f;++f)y+=o[d+f-32]+o[d-1+32*f];Ns(y>>4,o,d)}function ih(o,d){var f,y=4;for(f=0;8>f;++f)y+=o[d+f-32];Ns(y>>3,o,d)}function ws(o,d){var f,y=4;for(f=0;8>f;++f)y+=o[d-1+32*f];Ns(y>>3,o,d)}function gl(o,d){Ns(128,o,d)}function no(o,d,f){var y=o[d-f],S=o[d+0],z=3*(S-y)+uh[1020+o[d-2*f]-o[d+f]],I=Zc[112+(z+4>>3)];o[d-f]=Hr[255+y+Zc[112+(z+3>>3)]],o[d+0]=Hr[255+S-I]}function qc(o,d,f,y){var S=o[d+0],z=o[d+f];return li[255+o[d-2*f]-o[d-f]]>y||li[255+z-S]>y}function $c(o,d,f,y){return 4*li[255+o[d-f]-o[d+0]]+li[255+o[d-2*f]-o[d+f]]<=y}function Uc(o,d,f,y,S){var z=o[d-3*f],I=o[d-2*f],T=o[d-f],F=o[d+0],U=o[d+f],oe=o[d+2*f],be=o[d+3*f];return 4*li[255+T-F]+li[255+I-U]>y?0:li[255+o[d-4*f]-z]<=S&&li[255+z-I]<=S&&li[255+I-T]<=S&&li[255+be-oe]<=S&&li[255+oe-U]<=S&&li[255+U-F]<=S}function Vc(o,d,f,y){var S=2*y+1;for(y=0;16>y;++y)$c(o,d+y,f,S)&&no(o,d+y,f)}function Ri(o,d,f,y){var S=2*y+1;for(y=0;16>y;++y)$c(o,d+y*f,1,S)&&no(o,d+y*f,1)}function ra(o,d,f,y){var S;for(S=3;0<S;--S)Vc(o,d+=4*f,f,y)}function ah(o,d,f,y){var S;for(S=3;0<S;--S)Ri(o,d+=4,f,y)}function za(o,d,f,y,S,z,I,T){for(z=2*z+1;0<S--;){if(Uc(o,d,f,z,I))if(qc(o,d,f,T))no(o,d,f);else{var F=o,U=d,oe=f,be=F[U-2*oe],je=F[U-oe],ve=F[U+0],Te=F[U+oe],Ae=F[U+2*oe],le=27*(Me=uh[1020+3*(ve-je)+uh[1020+be-Te]])+63>>7,fe=18*Me+63>>7,Me=9*Me+63>>7;F[U-3*oe]=Hr[255+F[U-3*oe]+Me],F[U-2*oe]=Hr[255+be+fe],F[U-oe]=Hr[255+je+le],F[U+0]=Hr[255+ve-le],F[U+oe]=Hr[255+Te-fe],F[U+2*oe]=Hr[255+Ae-Me]}d+=y}}function Ni(o,d,f,y,S,z,I,T){for(z=2*z+1;0<S--;){if(Uc(o,d,f,z,I))if(qc(o,d,f,T))no(o,d,f);else{var F=o,U=d,oe=f,be=F[U-oe],je=F[U+0],ve=F[U+oe],Te=Zc[112+((Ae=3*(je-be))+4>>3)],Ae=Zc[112+(Ae+3>>3)],le=Te+1>>1;F[U-2*oe]=Hr[255+F[U-2*oe]+le],F[U-oe]=Hr[255+be+Ae],F[U+0]=Hr[255+je-Te],F[U+oe]=Hr[255+ve-le]}d+=y}}function xl(o,d,f,y,S,z){za(o,d,f,1,16,y,S,z)}function bs(o,d,f,y,S,z){za(o,d,1,f,16,y,S,z)}function sh(o,d,f,y,S,z){var I;for(I=3;0<I;--I)Ni(o,d+=4*f,f,1,16,y,S,z)}function ro(o,d,f,y,S,z){var I;for(I=3;0<I;--I)Ni(o,d+=4,1,f,16,y,S,z)}function oh(o,d,f,y,S,z,I,T){za(o,d,S,1,8,z,I,T),za(f,y,S,1,8,z,I,T)}function vl(o,d,f,y,S,z,I,T){za(o,d,1,S,8,z,I,T),za(f,y,1,S,8,z,I,T)}function yl(o,d,f,y,S,z,I,T){Ni(o,d+4*S,S,1,8,z,I,T),Ni(f,y+4*S,S,1,8,z,I,T)}function Hc(o,d,f,y,S,z,I,T){Ni(o,d+4,1,S,8,z,I,T),Ni(f,y+4,1,S,8,z,I,T)}function io(){this.ba=new Bn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Bt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Nl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gc(){this.ua=0,this.Wa=new Y,this.vb=new Y,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new D}function lh(){this.xb=this.a=0,this.l=new ri,this.ca=new Bn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gc,this.ab=0,this.gc=l(4,wl),this.Oc=0}function ao(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ri,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function js(o,d,f,y,S,z,I){for(o=o==null?0:o[d+0],d=0;d<I;++d)S[z+d]=o+f[y+d]&255,o=S[z+d]}function bl(o,d,f,y,S,z,I){var T;if(o==null)js(null,null,f,y,S,z,I);else for(T=0;T<I;++T)S[z+T]=o[d+T]+f[y+T]&255}function Ia(o,d,f,y,S,z,I){if(o==null)js(null,null,f,y,S,z,I);else{var T,F=o[d+0],U=F,oe=F;for(T=0;T<I;++T)U=oe+(F=o[d+T])-U,oe=f[y+T]+(-256&U?0>U?0:255:U)&255,U=F,S[z+T]=oe}}function jl(o,d,f,y){var S=d.width,z=d.o;if(t(o!=null&&d!=null),0>f||0>=y||f+y>z)return null;if(!o.Cc){if(o.ga==null){var I;if(o.ga=new ao,(I=o.ga==null)||(I=d.width*d.o,t(o.Gb.length==0),o.Gb=s(I),o.Uc=0,o.Gb==null?I=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,I=1),I=!I),!I){I=o.ga;var T=o.Fa,F=o.P,U=o.qc,oe=o.mb,be=o.nb,je=F+1,ve=U-1,Te=I.l;if(t(T!=null&&oe!=null&&d!=null),Oa[0]=null,Oa[1]=js,Oa[2]=bl,Oa[3]=Ia,I.ca=oe,I.tb=be,I.c=d.width,I.i=d.height,t(0<I.c&&0<I.i),1>=U)d=0;else if(I.$a=T[F+0]>>0&3,I.Z=T[F+0]>>2&3,I.Lc=T[F+0]>>4&3,F=T[F+0]>>6&3,0>I.$a||1<I.$a||4<=I.Z||1<I.Lc||F)d=0;else if(Te.put=it,Te.ac=_e,Te.bc=bt,Te.ma=I,Te.width=d.width,Te.height=d.height,Te.Da=d.Da,Te.v=d.v,Te.va=d.va,Te.j=d.j,Te.o=d.o,I.$a)e:{t(I.$a==1),d=Lr();t:for(;;){if(d==null){d=0;break e}if(t(I!=null),I.mc=d,d.c=I.c,d.i=I.i,d.l=I.l,d.l.ma=I,d.l.width=I.c,d.l.height=I.i,d.a=0,Q(d.m,T,je,ve),!Dn(I.c,I.i,1,d,null)||(d.ab==1&&d.gc[0].hc==3&&pr(d.s)?(I.ic=1,T=d.c*d.i,d.Ta=null,d.Ua=0,d.V=s(T),d.Ba=0,d.V==null?(d.a=1,d=0):d=1):(I.ic=0,d=Ki(d,I.c)),!d))break t;d=1;break e}I.mc=null,d=0}else d=ve>=I.c*I.i;I=!d}if(I)return null;o.ga.Lc!=1?o.Ga=0:y=z-f}t(o.ga!=null),t(f+y<=z);e:{if(d=(T=o.ga).c,z=T.l.o,T.$a==0){if(je=o.rc,ve=o.Vc,Te=o.Fa,F=o.P+1+f*d,U=o.mb,oe=o.nb+f*d,t(F<=o.P+o.qc),T.Z!=0)for(t(Oa[T.Z]!=null),I=0;I<y;++I)Oa[T.Z](je,ve,Te,F,U,oe,d),je=U,ve=oe,oe+=d,F+=d;else for(I=0;I<y;++I)i(U,oe,Te,F,d),je=U,ve=oe,oe+=d,F+=d;o.rc=je,o.Vc=ve}else{if(t(T.mc!=null),d=f+y,t((I=T.mc)!=null),t(d<=I.i),I.C>=d)d=1;else if(T.ic||ye(),T.ic){T=I.V,je=I.Ba,ve=I.c;var Ae=I.i,le=(Te=1,F=I.$/ve,U=I.$%ve,oe=I.m,be=I.s,I.$),fe=ve*Ae,Me=ve*d,Ee=be.wc,De=le<Me?qt(be,U,F):null;t(le<=fe),t(d<=Ae),t(pr(be));t:for(;;){for(;!oe.h&&le<Me;){if(U&Ee||(De=qt(be,U,F)),t(De!=null),te(oe),256>(Ae=Wt(De.G[0],De.H[0],oe)))T[je+le]=Ae,++le,++U>=ve&&(U=0,++F<=d&&!(F%16)&&Ur(I,F));else{if(!(280>Ae)){Te=0;break t}Ae=Gt(Ae-256,oe);var tt,Xe=Wt(De.G[4],De.H[4],oe);if(te(oe),!(le>=(Xe=_t(ve,Xe=Gt(Xe,oe)))&&fe-le>=Ae)){Te=0;break t}for(tt=0;tt<Ae;++tt)T[je+le+tt]=T[je+le+tt-Xe];for(le+=Ae,U+=Ae;U>=ve;)U-=ve,++F<=d&&!(F%16)&&Ur(I,F);le<Me&&U&Ee&&(De=qt(be,U,F))}t(oe.h==W(oe))}Ur(I,F>d?d:F);break t}!Te||oe.h&&le<fe?(Te=0,I.a=oe.h?5:3):I.$=le,d=Te}else d=Ar(I,I.V,I.Ba,I.c,I.i,d,ja);if(!d){y=0;break e}}f+y>=z&&(o.Cc=1),y=1}if(!y)return null;if(o.Cc&&((y=o.ga)!=null&&(y.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+f*S}function h(o,d,f,y,S,z){for(;0<S--;){var I,T=o,F=d+(f?1:0),U=o,oe=d+(f?0:3);for(I=0;I<y;++I){var be=U[oe+4*I];be!=255&&(be*=32897,T[F+4*I+0]=T[F+4*I+0]*be>>23,T[F+4*I+1]=T[F+4*I+1]*be>>23,T[F+4*I+2]=T[F+4*I+2]*be>>23)}d+=z}}function k(o,d,f,y,S){for(;0<y--;){var z;for(z=0;z<f;++z){var I=o[d+2*z+0],T=15&(U=o[d+2*z+1]),F=4369*T,U=(240&U|U>>4)*F>>16;o[d+2*z+0]=(240&I|I>>4)*F>>16&240|(15&I|I<<4)*F>>16>>4&15,o[d+2*z+1]=240&U|T}d+=S}}function Z(o,d,f,y,S,z,I,T){var F,U,oe=255;for(U=0;U<S;++U){for(F=0;F<y;++F){var be=o[d+F];z[I+4*F]=be,oe&=be}d+=f,I+=T}return oe!=255}function se(o,d,f,y,S){var z;for(z=0;z<S;++z)f[y+z]=o[d+z]>>8}function ye(){oi=h,rn=k,an=Z,Cn=se}function Le(o,d,f){O[o]=function(y,S,z,I,T,F,U,oe,be,je,ve,Te,Ae,le,fe,Me,Ee){var De,tt=Ee-1>>1,Xe=T[F+0]|U[oe+0]<<16,pt=be[je+0]|ve[Te+0]<<16;t(y!=null);var Ye=3*Xe+pt+131074>>2;for(d(y[S+0],255&Ye,Ye>>16,Ae,le),z!=null&&(Ye=3*pt+Xe+131074>>2,d(z[I+0],255&Ye,Ye>>16,fe,Me)),De=1;De<=tt;++De){var Ut=T[F+De]|U[oe+De]<<16,Xt=be[je+De]|ve[Te+De]<<16,Ot=Xe+Ut+pt+Xt+524296,Dt=Ot+2*(Ut+pt)>>3;Ye=Dt+Xe>>1,Xe=(Ot=Ot+2*(Xe+Xt)>>3)+Ut>>1,d(y[S+2*De-1],255&Ye,Ye>>16,Ae,le+(2*De-1)*f),d(y[S+2*De-0],255&Xe,Xe>>16,Ae,le+(2*De-0)*f),z!=null&&(Ye=Ot+pt>>1,Xe=Dt+Xt>>1,d(z[I+2*De-1],255&Ye,Ye>>16,fe,Me+(2*De-1)*f),d(z[I+2*De+0],255&Xe,Xe>>16,fe,Me+(2*De+0)*f)),Xe=Ut,pt=Xt}1&Ee||(Ye=3*Xe+pt+131074>>2,d(y[S+Ee-1],255&Ye,Ye>>16,Ae,le+(Ee-1)*f),z!=null&&(Ye=3*pt+Xe+131074>>2,d(z[I+Ee-1],255&Ye,Ye>>16,fe,Me+(Ee-1)*f)))}}function Oe(){ci[eu]=Bx,ci[tu]=jp,ci[vp]=qx,ci[nu]=Sp,ci[ru]=Cp,ci[dh]=kp,ci[yp]=$x,ci[hh]=jp,ci[mh]=Sp,ci[iu]=Cp,ci[fh]=kp}function Ze(o){return o&~Ux?0>o?0:255:o>>Ap}function dt(o,d){return Ze((19077*o>>8)+(26149*d>>8)-14234)}function At(o,d,f){return Ze((19077*o>>8)-(6419*d>>8)-(13320*f>>8)+8708)}function St(o,d){return Ze((19077*o>>8)+(33050*d>>8)-17685)}function Et(o,d,f,y,S){y[S+0]=dt(o,f),y[S+1]=At(o,d,f),y[S+2]=St(o,d)}function pn(o,d,f,y,S){y[S+0]=St(o,d),y[S+1]=At(o,d,f),y[S+2]=dt(o,f)}function Nn(o,d,f,y,S){var z=At(o,d,f);d=z<<3&224|St(o,d)>>3,y[S+0]=248&dt(o,f)|z>>5,y[S+1]=d}function _n(o,d,f,y,S){var z=240&St(o,d)|15;y[S+0]=240&dt(o,f)|At(o,d,f)>>4,y[S+1]=z}function ir(o,d,f,y,S){y[S+0]=255,Et(o,d,f,y,S+1)}function $n(o,d,f,y,S){pn(o,d,f,y,S),y[S+3]=255}function wi(o,d,f,y,S){Et(o,d,f,y,S),y[S+3]=255}function Vr(o,d){return 0>o?0:o>d?d:o}function Bi(o,d,f){O[o]=function(y,S,z,I,T,F,U,oe,be){for(var je=oe+(-2&be)*f;oe!=je;)d(y[S+0],z[I+0],T[F+0],U,oe),d(y[S+1],z[I+0],T[F+0],U,oe+f),S+=2,++I,++F,oe+=2*f;1&be&&d(y[S+0],z[I+0],T[F+0],U,oe)}}function Wc(o,d,f){return f==0?o==0?d==0?6:5:d==0?4:0:f}function Sl(o,d,f,y,S){switch(o>>>30){case 3:sa(d,f,y,S,0);break;case 2:Sn(d,f,y,S);break;case 1:vr(d,f,y,S)}}function Cl(o,d){var f,y,S=d.M,z=d.Nb,I=o.oc,T=o.pc+40,F=o.oc,U=o.pc+584,oe=o.oc,be=o.pc+600;for(f=0;16>f;++f)I[T+32*f-1]=129;for(f=0;8>f;++f)F[U+32*f-1]=129,oe[be+32*f-1]=129;for(0<S?I[T-1-32]=F[U-1-32]=oe[be-1-32]=129:(a(I,T-32-1,127,21),a(F,U-32-1,127,9),a(oe,be-32-1,127,9)),y=0;y<o.za;++y){var je=d.ya[d.aa+y];if(0<y){for(f=-1;16>f;++f)i(I,T+32*f-4,I,T+32*f+12,4);for(f=-1;8>f;++f)i(F,U+32*f-4,F,U+32*f+4,4),i(oe,be+32*f-4,oe,be+32*f+4,4)}var ve=o.Gd,Te=o.Hd+y,Ae=je.ad,le=je.Hc;if(0<S&&(i(I,T-32,ve[Te].y,0,16),i(F,U-32,ve[Te].f,0,8),i(oe,be-32,ve[Te].ea,0,8)),je.Za){var fe=I,Me=T-32+16;for(0<S&&(y>=o.za-1?a(fe,Me,ve[Te].y[15],4):i(fe,Me,ve[Te+1].y,0,4)),f=0;4>f;f++)fe[Me+128+f]=fe[Me+256+f]=fe[Me+384+f]=fe[Me+0+f];for(f=0;16>f;++f,le<<=2)fe=I,Me=T+Pp[f],bi[je.Ob[f]](fe,Me),Sl(le,Ae,16*+f,fe,Me)}else if(fe=Wc(y,S,je.Ob[0]),Fa[fe](I,T),le!=0)for(f=0;16>f;++f,le<<=2)Sl(le,Ae,16*+f,I,T+Pp[f]);for(f=je.Gc,fe=Wc(y,S,je.Dd),la[fe](F,U),la[fe](oe,be),le=Ae,fe=F,Me=U,255&(je=f>>0)&&(170&je?_l(le,256,fe,Me):ai(le,256,fe,Me)),je=oe,le=be,255&(f>>=8)&&(170&f?_l(Ae,320,je,le):ai(Ae,320,je,le)),S<o.Ub-1&&(i(ve[Te].y,0,I,T+480,16),i(ve[Te].f,0,F,U+224,8),i(ve[Te].ea,0,oe,be+224,8)),f=8*z*o.B,ve=o.sa,Te=o.ta+16*y+16*z*o.R,Ae=o.qa,je=o.ra+8*y+f,le=o.Ha,fe=o.Ia+8*y+f,f=0;16>f;++f)i(ve,Te+f*o.R,I,T+32*f,16);for(f=0;8>f;++f)i(Ae,je+f*o.B,F,U+32*f,8),i(le,fe+f*o.B,oe,be+32*f,8)}}function so(o,d,f,y,S,z,I,T,F){var U=[0],oe=[0],be=0,je=F!=null?F.kd:0,ve=F??new Nl;if(o==null||12>f)return 7;ve.data=o,ve.w=d,ve.ha=f,d=[d],f=[f],ve.gb=[ve.gb];e:{var Te=d,Ae=f,le=ve.gb;if(t(o!=null),t(Ae!=null),t(le!=null),le[0]=0,12<=Ae[0]&&!r(o,Te[0],"RIFF")){if(r(o,Te[0]+8,"WEBP")){le=3;break e}var fe=Ce(o,Te[0]+4);if(12>fe||4294967286<fe){le=3;break e}if(je&&fe>Ae[0]-8){le=7;break e}le[0]=fe,Te[0]+=12,Ae[0]-=12}le=0}if(le!=0)return le;for(fe=0<ve.gb[0],f=f[0];;){e:{var Me=o;Ae=d,le=f;var Ee=U,De=oe,tt=Te=[0];if((Ye=be=[be])[0]=0,8>le[0])le=7;else{if(!r(Me,Ae[0],"VP8X")){if(Ce(Me,Ae[0]+4)!=10){le=3;break e}if(18>le[0]){le=7;break e}var Xe=Ce(Me,Ae[0]+8),pt=1+he(Me,Ae[0]+12);if(2147483648<=pt*(Me=1+he(Me,Ae[0]+15))){le=3;break e}tt!=null&&(tt[0]=Xe),Ee!=null&&(Ee[0]=pt),De!=null&&(De[0]=Me),Ae[0]+=18,le[0]-=18,Ye[0]=1}le=0}}if(be=be[0],Te=Te[0],le!=0)return le;if(Ae=!!(2&Te),!fe&&be)return 3;if(z!=null&&(z[0]=!!(16&Te)),I!=null&&(I[0]=Ae),T!=null&&(T[0]=0),I=U[0],Te=oe[0],be&&Ae&&F==null){le=0;break}if(4>f){le=7;break}if(fe&&be||!fe&&!be&&!r(o,d[0],"ALPH")){f=[f],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{Xe=o,le=d,fe=f;var Ye=ve.gb;Ee=ve.na,De=ve.P,tt=ve.Sa,pt=22,t(Xe!=null),t(fe!=null),Me=le[0];var Ut=fe[0];for(t(Ee!=null),t(tt!=null),Ee[0]=null,De[0]=null,tt[0]=0;;){if(le[0]=Me,fe[0]=Ut,8>Ut){le=7;break e}var Xt=Ce(Xe,Me+4);if(4294967286<Xt){le=3;break e}var Ot=8+Xt+1&-2;if(pt+=Ot,0<Ye&&pt>Ye){le=3;break e}if(!r(Xe,Me,"VP8 ")||!r(Xe,Me,"VP8L")){le=0;break e}if(Ut[0]<Ot){le=7;break e}r(Xe,Me,"ALPH")||(Ee[0]=Xe,De[0]=Me+8,tt[0]=Xt),Me+=Ot,Ut-=Ot}}if(f=f[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],le!=0)break}f=[f],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(Ye=o,le=d,fe=f,Ee=ve.gb[0],De=ve.Ja,tt=ve.xa,Xe=le[0],Me=!r(Ye,Xe,"VP8 "),pt=!r(Ye,Xe,"VP8L"),t(Ye!=null),t(fe!=null),t(De!=null),t(tt!=null),8>fe[0])le=7;else{if(Me||pt){if(Ye=Ce(Ye,Xe+4),12<=Ee&&Ye>Ee-12){le=3;break e}if(je&&Ye>fe[0]-8){le=7;break e}De[0]=Ye,le[0]+=8,fe[0]-=8,tt[0]=pt}else tt[0]=5<=fe[0]&&Ye[Xe+0]==47&&!(Ye[Xe+4]>>5),De[0]=fe[0];le=0}if(f=f[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],d=d[0],le!=0)break;if(4294967286<ve.Ja)return 3;if(T==null||Ae||(T[0]=ve.xa?2:1),I=[I],Te=[Te],ve.xa){if(5>f){le=7;break}T=I,je=Te,Ae=z,o==null||5>f?o=0:5<=f&&o[d+0]==47&&!(o[d+4]>>5)?(fe=[0],Ye=[0],Ee=[0],Q(De=new P,o,d,f),Ge(De,fe,Ye,Ee)?(T!=null&&(T[0]=fe[0]),je!=null&&(je[0]=Ye[0]),Ae!=null&&(Ae[0]=Ee[0]),o=1):o=0):o=0}else{if(10>f){le=7;break}T=Te,o==null||10>f||!Ks(o,d+3,f-3)?o=0:(je=o[d+0]|o[d+1]<<8|o[d+2]<<16,Ae=16383&(o[d+7]<<8|o[d+6]),o=16383&(o[d+9]<<8|o[d+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=ve.Ja||!Ae||!o?o=0:(I&&(I[0]=Ae),T&&(T[0]=o),o=1))}if(!o||(I=I[0],Te=Te[0],be&&(U[0]!=I||oe[0]!=Te)))return 3;F!=null&&(F[0]=ve,F.offset=d-F.w,t(4294967286>d-F.w),t(F.offset==F.ha-f));break}return le==0||le==7&&be&&F==null?(z!=null&&(z[0]|=ve.na!=null&&0<ve.na.length),y!=null&&(y[0]=I),S!=null&&(S[0]=Te),0):le}function kl(o,d,f){var y=d.width,S=d.height,z=0,I=0,T=y,F=S;if(d.Da=o!=null&&0<o.Da,d.Da&&(T=o.cd,F=o.bd,z=o.v,I=o.j,11>f||(z&=-2,I&=-2),0>z||0>I||0>=T||0>=F||z+T>y||I+F>S))return 0;if(d.v=z,d.j=I,d.va=z+T,d.o=I+F,d.U=T,d.T=F,d.da=o!=null&&0<o.da,d.da){if(!ht(T,F,f=[o.ib],z=[o.hb]))return 0;d.ib=f[0],d.hb=z[0]}return d.ob=o!=null&&o.ob,d.Kb=o==null||!o.Sd,d.da&&(d.ob=d.ib<3*y/4&&d.hb<3*S/4,d.Kb=0),1}function Al(o){if(o==null)return 2;if(11>o.S){var d=o.f.RGBA;d.fb+=(o.height-1)*d.A,d.A=-d.A}else d=o.f.kb,o=o.height,d.O+=(o-1)*d.fa,d.fa=-d.fa,d.N+=(o-1>>1)*d.Ab,d.Ab=-d.Ab,d.W+=(o-1>>1)*d.Db,d.Db=-d.Db,d.F!=null&&(d.J+=(o-1)*d.lb,d.lb=-d.lb);return 0}function oo(o,d,f,y){if(y==null||0>=o||0>=d)return 2;if(f!=null){if(f.Da){var S=f.cd,z=f.bd,I=-2&f.v,T=-2&f.j;if(0>I||0>T||0>=S||0>=z||I+S>o||T+z>d)return 2;o=S,d=z}if(f.da){if(!ht(o,d,S=[f.ib],z=[f.hb]))return 2;o=S[0],d=z[0]}}y.width=o,y.height=d;e:{var F=y.width,U=y.height;if(o=y.S,0>=F||0>=U||!(o>=eu&&13>o))o=2;else{if(0>=y.Rd&&y.sd==null){I=z=S=d=0;var oe=(T=F*_p[o])*U;if(11>o||(z=(U+1)/2*(d=(F+1)/2),o==12&&(I=(S=F)*U)),(U=s(oe+2*z+I))==null){o=1;break e}y.sd=U,11>o?((F=y.f.RGBA).eb=U,F.fb=0,F.A=T,F.size=oe):((F=y.f.kb).y=U,F.O=0,F.fa=T,F.Fd=oe,F.f=U,F.N=0+oe,F.Ab=d,F.Cd=z,F.ea=U,F.W=0+oe+z,F.Db=d,F.Ed=z,o==12&&(F.F=U,F.J=0+oe+2*z),F.Tc=I,F.lb=S)}if(d=1,S=y.S,z=y.width,I=y.height,S>=eu&&13>S)if(11>S)o=y.f.RGBA,d&=(T=Math.abs(o.A))*(I-1)+z<=o.size,d&=T>=z*_p[S],d&=o.eb!=null;else{o=y.f.kb,T=(z+1)/2,oe=(I+1)/2,F=Math.abs(o.fa),U=Math.abs(o.Ab);var be=Math.abs(o.Db),je=Math.abs(o.lb),ve=je*(I-1)+z;d&=F*(I-1)+z<=o.Fd,d&=U*(oe-1)+T<=o.Cd,d=(d&=be*(oe-1)+T<=o.Ed)&F>=z&U>=T&be>=T,d&=o.y!=null,d&=o.f!=null,d&=o.ea!=null,S==12&&(d&=je>=z,d&=ve<=o.Tc,d&=o.F!=null)}else d=0;o=d?0:2}}return o!=0||f!=null&&f.fd&&(o=Al(y)),o}var Yn=64,lo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],co=24,uo=32,Ll=8,_r=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ge("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(o){return o},O.Predictor2=function(o,d,f){return d[f+0]},O.Predictor3=function(o,d,f){return d[f+1]},O.Predictor4=function(o,d,f){return d[f-1]},O.Predictor5=function(o,d,f){return Se(Se(o,d[f+1]),d[f+0])},O.Predictor6=function(o,d,f){return Se(o,d[f-1])},O.Predictor7=function(o,d,f){return Se(o,d[f+0])},O.Predictor8=function(o,d,f){return Se(d[f-1],d[f+0])},O.Predictor9=function(o,d,f){return Se(d[f+0],d[f+1])},O.Predictor10=function(o,d,f){return Se(Se(o,d[f-1]),Se(d[f+0],d[f+1]))},O.Predictor11=function(o,d,f){var y=d[f+0];return 0>=Ke(y>>24&255,o>>24&255,(d=d[f-1])>>24&255)+Ke(y>>16&255,o>>16&255,d>>16&255)+Ke(y>>8&255,o>>8&255,d>>8&255)+Ke(255&y,255&o,255&d)?y:o},O.Predictor12=function(o,d,f){var y=d[f+0];return(qe((o>>24&255)+(y>>24&255)-((d=d[f-1])>>24&255))<<24|qe((o>>16&255)+(y>>16&255)-(d>>16&255))<<16|qe((o>>8&255)+(y>>8&255)-(d>>8&255))<<8|qe((255&o)+(255&y)-(255&d)))>>>0},O.Predictor13=function(o,d,f){var y=d[f-1];return($e((o=Se(o,d[f+0]))>>24&255,y>>24&255)<<24|$e(o>>16&255,y>>16&255)<<16|$e(o>>8&255,y>>8&255)<<8|$e(o>>0&255,y>>0&255))>>>0};var ch=O.PredictorAdd0;O.PredictorAdd1=ot,ge("Predictor2","PredictorAdd2"),ge("Predictor3","PredictorAdd3"),ge("Predictor4","PredictorAdd4"),ge("Predictor5","PredictorAdd5"),ge("Predictor6","PredictorAdd6"),ge("Predictor7","PredictorAdd7"),ge("Predictor8","PredictorAdd8"),ge("Predictor9","PredictorAdd9"),ge("Predictor10","PredictorAdd10"),ge("Predictor11","PredictorAdd11"),ge("Predictor12","PredictorAdd12"),ge("Predictor13","PredictorAdd13");var Pl=O.PredictorAdd2;mt("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),mt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var Jc,ii=O.ColorIndexInverseTransform,ho=O.MapARGB,Xc=O.VP8LColorIndexInverseTransformAlpha,Yc=O.MapAlpha,Ma=O.VP8LPredictorsAdd=[];Ma.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Ss,zr,xr,Da,ia,aa,mo,sa,Sn,_l,vr,ai,fo,Qc,zl,Cs,ks,Ta,As,po,Ls,Ea,Il,si,oi,rn,an,Cn,En=s(511),oa=s(2041),Ml=s(225),go=s(767),Kc=0,uh=oa,Zc=Ml,Hr=go,li=En,eu=0,tu=1,vp=2,nu=3,ru=4,dh=5,yp=6,hh=7,mh=8,iu=9,fh=10,kx=[2,3,7],Ax=[3,3,11],Np=[280,256,256,256,40],Lx=[0,1,1,1,0],Px=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_x=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zx=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ix=8,ph=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],gh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Dl=null,Mx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Dx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Tx=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ex=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fx=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ox=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fa=[],bi=[],la=[],Rx=1,bp=2,Oa=[],ci=[];Le("UpsampleRgbLinePair",Et,3),Le("UpsampleBgrLinePair",pn,3),Le("UpsampleRgbaLinePair",wi,4),Le("UpsampleBgraLinePair",$n,4),Le("UpsampleArgbLinePair",ir,4),Le("UpsampleRgba4444LinePair",_n,2),Le("UpsampleRgb565LinePair",Nn,2);var Bx=O.UpsampleRgbLinePair,qx=O.UpsampleBgrLinePair,jp=O.UpsampleRgbaLinePair,Sp=O.UpsampleBgraLinePair,Cp=O.UpsampleArgbLinePair,kp=O.UpsampleRgba4444LinePair,$x=O.UpsampleRgb565LinePair,au=16,su=1<<au-1,Tl=-227,xh=482,Ap=6,Ux=(256<<Ap)-1,Lp=0,Vx=s(256),Hx=s(256),Gx=s(256),Wx=s(256),Jx=s(xh-Tl),Xx=s(xh-Tl);Bi("YuvToRgbRow",Et,3),Bi("YuvToBgrRow",pn,3),Bi("YuvToRgbaRow",wi,4),Bi("YuvToBgraRow",$n,4),Bi("YuvToArgbRow",ir,4),Bi("YuvToRgba4444Row",_n,2),Bi("YuvToRgb565Row",Nn,2);var Pp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ou=[0,2,8],Yx=[8,7,6,4,4,2,2,2,1,1,1,1],Qx=1;this.WebPDecodeRGBA=function(o,d,f,y,S){var z=tu,I=new io,T=new Bn;I.ba=T,T.S=z,T.width=[T.width],T.height=[T.height];var F=T.width,U=T.height,oe=new $t;if(oe==null||o==null)var be=2;else t(oe!=null),be=so(o,d,f,oe.width,oe.height,oe.Pd,oe.Qd,oe.format,null);if(be!=0?F=0:(F!=null&&(F[0]=oe.width[0]),U!=null&&(U[0]=oe.height[0]),F=1),F){T.width=T.width[0],T.height=T.height[0],y!=null&&(y[0]=T.width),S!=null&&(S[0]=T.height);e:{if(y=new ri,(S=new Nl).data=o,S.w=d,S.ha=f,S.kd=1,d=[0],t(S!=null),((o=so(S.data,S.w,S.ha,null,null,null,d,null,S))==0||o==7)&&d[0]&&(o=4),(d=o)==0){if(t(I!=null),y.data=S.data,y.w=S.w+S.offset,y.ha=S.ha-S.offset,y.put=it,y.ac=_e,y.bc=bt,y.ma=I,S.xa){if((o=Lr())==null){I=1;break e}if(function(je,ve){var Te=[0],Ae=[0],le=[0];t:for(;;){if(je==null)return 0;if(ve==null)return je.a=2,0;if(je.l=ve,je.a=0,Q(je.m,ve.data,ve.w,ve.ha),!Ge(je.m,Te,Ae,le)){je.a=3;break t}if(je.xb=bp,ve.width=Te[0],ve.height=Ae[0],!Dn(Te[0],Ae[0],1,je,null))break t;return 1}return t(je.a!=0),0}(o,y)){if(y=(d=oo(y.width,y.height,I.Oa,I.ba))==0){t:{y=o;n:for(;;){if(y==null){y=0;break t}if(t(y.s.yc!=null),t(y.s.Ya!=null),t(0<y.s.Wb),t((f=y.l)!=null),t((S=f.ma)!=null),y.xb!=0){if(y.ca=S.ba,y.tb=S.tb,t(y.ca!=null),!kl(S.Oa,f,nu)){y.a=2;break n}if(!Ki(y,f.width)||f.da)break n;if((f.da||zt(y.ca.S))&&ye(),11>y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),y.ca.f.kb.F!=null&&ye()),y.Pb&&0<y.s.ua&&y.s.vb.X==null&&!Re(y.s.vb,y.s.Wa.Xa)){y.a=1;break n}y.xb=0}if(!Ar(y,y.V,y.Ba,y.c,y.i,f.o,qr))break n;S.Dc=y.Ma,y=1;break t}t(y.a!=0),y=0}y=!y}y&&(d=o.a)}else d=o.a}else{if((o=new ml)==null){I=1;break e}if(o.Fa=S.na,o.P=S.P,o.qc=S.Sa,ta(o,y)){if((d=oo(y.width,y.height,I.Oa,I.ba))==0){if(o.Aa=0,f=I.Oa,t((S=o)!=null),f!=null){if(0<(F=0>(F=f.Md)?0:100<F?255:255*F/100)){for(U=oe=0;4>U;++U)12>(be=S.pb[U]).lc&&(be.ia=F*Yx[0>be.lc?0:be.lc]>>3),oe|=be.ia;oe&&(alert("todo:VP8InitRandom"),S.ia=1)}S.Ga=f.Id,100<S.Ga?S.Ga=100:0>S.Ga&&(S.Ga=0)}Zs(o,y)||(d=o.a)}}else d=o.a}d==0&&I.Oa!=null&&I.Oa.fd&&(d=Al(I.ba))}I=d}z=I!=0?null:11>z?T.f.RGBA.eb:T.f.kb.y}else z=null;return z};var _p=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function m(O,J){for(var ee="",_=0;_<4;_++)ee+=String.fromCharCode(O[J++]);return ee}function x(O,J){return(O[J+0]<<0|O[J+1]<<8|O[J+2]<<16)>>>0}function g(O,J){return(O[J+0]<<0|O[J+1]<<8|O[J+2]<<16|O[J+3]<<24)>>>0}new u;var v=[0],p=[0],j=[],w=new u,A=e,N=function(O,J){var ee={},_=0,D=!1,E=0,q=0;if(ee.frames=[],!function($,W,H,te){for(var me=0;me<te;me++)if($[W+me]!=H.charCodeAt(me))return!0;return!1}(O,J,"RIFF",4)){for(g(O,J+=4),J+=8;J<O.length;){var ae=m(O,J),ue=g(O,J+=4);J+=4;var we=ue+(1&ue);switch(ae){case"VP8 ":case"VP8L":ee.frames[_]===void 0&&(ee.frames[_]={}),(ie=ee.frames[_]).src_off=D?q:J-8,ie.src_size=E+ue+8,_++,D&&(D=!1,E=0,q=0);break;case"VP8X":(ie=ee.header={}).feature_flags=O[J];var Q=J+4;ie.canvas_width=1+x(O,Q),Q+=3,ie.canvas_height=1+x(O,Q),Q+=3;break;case"ALPH":D=!0,E=we+8,q=J-8;break;case"ANIM":(ie=ee.header).bgcolor=g(O,J),Q=J+4,ie.loop_count=(ze=O)[(P=Q)+0]<<0|ze[P+1]<<8,Q+=2;break;case"ANMF":var de,ie;(ie=ee.frames[_]={}).offset_x=2*x(O,J),J+=3,ie.offset_y=2*x(O,J),J+=3,ie.width=1+x(O,J),J+=3,ie.height=1+x(O,J),J+=3,ie.duration=x(O,J),J+=3,de=O[J++],ie.dispose=1&de,ie.blend=de>>1&1}ae!="ANMF"&&(J+=we)}var ze,P;return ee}}(A,0);N.response=A,N.rgbaoutput=!0,N.dataurl=!1;var b=N.header?N.header:null,L=N.frames?N.frames:null;if(b){b.loop_counter=b.loop_count,v=[b.canvas_height],p=[b.canvas_width];for(var G=0;G<L.length&&L[G].blend!=0;G++);}var ne=L[0],ce=w.WebPDecodeRGBA(A,ne.src_off,ne.src_size,p,v);ne.rgba=ce,ne.imgwidth=p[0],ne.imgheight=v[0];for(var V=0;V<p[0]*v[0]*4;V++)j[V]=ce[V];return this.width=p,this.height=v,this.data=j,this}(function(e){var t=function(){return typeof lf=="function"},r=function(v,p,j,w){var A=4,N=l;switch(w){case e.image_compression.FAST:A=1,N=s;break;case e.image_compression.MEDIUM:A=6,N=c;break;case e.image_compression.SLOW:A=9,N=u}v=i(v,p,j,N);var b=lf(v,{level:A});return e.__addimage__.arrayBufferToBinaryString(b)},i=function(v,p,j,w){for(var A,N,b,L=v.length/p,G=new Uint8Array(v.length+L),ne=x(),ce=0;ce<L;ce+=1){if(b=ce*p,A=v.subarray(b,b+p),w)G.set(w(A,j,N),b+ce);else{for(var V,O=ne.length,J=[];V<O;V+=1)J[V]=ne[V](A,j,N);var ee=g(J.concat());G.set(J[ee],b+ce)}N=A}return G},a=function(v){var p=Array.apply([],v);return p.unshift(0),p},s=function(v,p){var j,w=[],A=v.length;w[0]=1;for(var N=0;N<A;N+=1)j=v[N-p]||0,w[N+1]=v[N]-j+256&255;return w},l=function(v,p,j){var w,A=[],N=v.length;A[0]=2;for(var b=0;b<N;b+=1)w=j&&j[b]||0,A[b+1]=v[b]-w+256&255;return A},c=function(v,p,j){var w,A,N=[],b=v.length;N[0]=3;for(var L=0;L<b;L+=1)w=v[L-p]||0,A=j&&j[L]||0,N[L+1]=v[L]+256-(w+A>>>1)&255;return N},u=function(v,p,j){var w,A,N,b,L=[],G=v.length;L[0]=4;for(var ne=0;ne<G;ne+=1)w=v[ne-p]||0,A=j&&j[ne]||0,N=j&&j[ne-p]||0,b=m(w,A,N),L[ne+1]=v[ne]-b+256&255;return L},m=function(v,p,j){if(v===p&&p===j)return v;var w=Math.abs(p-j),A=Math.abs(v-j),N=Math.abs(v+p-j-j);return w<=A&&w<=N?v:A<=N?p:j},x=function(){return[a,s,l,c,u]},g=function(v){var p=v.map(function(j){return j.reduce(function(w,A){return w+Math.abs(A)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(v,p,j,w){var A,N,b,L,G,ne,ce,V,O,J,ee,_,D,E,q,ae=this.decode.FLATE_DECODE,ue="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(b=new KN(v)).imgData,N=b.bits,A=b.colorSpace,G=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){O=(V=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,ee=new Uint8Array(O*b.colors),J=new Uint8Array(O);var we,Q=b.pixelBitlength-b.bits;for(E=0,q=0;E<O;E++){for(D=V[E],we=0;we<Q;)ee[q++]=D>>>we&255,we+=b.bits;J[E]=D>>>we&255}}if(b.bits===16){O=(V=new Uint32Array(b.decodePixels().buffer)).length,ee=new Uint8Array(O*(32/b.pixelBitlength)*b.colors),J=new Uint8Array(O*(32/b.pixelBitlength)),_=b.colors>1,E=0,q=0;for(var de=0;E<O;)D=V[E++],ee[q++]=D>>>0&255,_&&(ee[q++]=D>>>16&255,D=V[E++],ee[q++]=D>>>0&255),J[de++]=D>>>16&255;N=8}w!==e.image_compression.NONE&&t()?(v=r(ee,b.width*b.colors,b.colors,w),ce=r(J,b.width,1,w)):(v=ee,ce=J,ae=void 0)}if(b.colorType===3&&(A=this.color_spaces.INDEXED,ne=b.palette,b.transparency.indexed)){var ie=b.transparency.indexed,ze=0;for(E=0,O=ie.length;E<O;++E)ze+=ie[E];if((ze/=255)===O-1&&ie.indexOf(0)!==-1)L=[ie.indexOf(0)];else if(ze!==O){for(V=b.decodePixels(),J=new Uint8Array(V.length),E=0,O=V.length;E<O;E++)J[E]=ie[V[E]];ce=r(J,b.width,1)}}var P=function($){var W;switch($){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W}(w);return ae===this.decode.FLATE_DECODE&&(ue="/Predictor "+P+" "),ue+="/Colors "+G+" /BitsPerComponent "+N+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:j,data:v,index:p,filter:ae,decodeParameters:ue,transparency:L,palette:ne,sMask:ce,predictor:P,width:b.width,height:b.height,bitsPerComponent:N,colorSpace:A}}}})(gt.API),function(e){e.processGIF89A=function(t,r,i,a){var s=new ZN(t),l=s.width,c=s.height,u=[];s.decodeAndBlitFrameRGBA(0,u);var m={data:u,width:l,height:c},x=new om(100).encode(m,100);return e.processJPEG.call(this,x,r,i,a)},e.processGIF87A=e.processGIF89A}(gt.API),ki.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ki.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){tn.log("bit decode error:"+r)}},ki.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*a*4,c=0;c<8&&8*a+c<this.width;c++){var u=this.palette[s>>7-c&1];this.data[l+4*c]=u.blue,this.data[l+4*c+1]=u.green,this.data[l+4*c+2]=u.red,this.data[l+4*c+3]=255}r!==0&&(this.pos+=4-r)}},ki.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*a*4,c=s>>4,u=15&s,m=this.palette[c];if(this.data[l]=m.blue,this.data[l+1]=m.green,this.data[l+2]=m.red,this.data[l+3]=255,2*a+1>=this.width)break;m=this.palette[u],this.data[l+4]=m.blue,this.data[l+4+1]=m.green,this.data[l+4+2]=m.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},ki.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*i;if(a<this.palette.length){var l=this.palette[a];this.data[s]=l.red,this.data[s+1]=l.green,this.data[s+2]=l.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},ki.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&t)/t*255|0,c=(s>>5&t)/t*255|0,u=(s>>10&t)/t*255|0,m=s>>15?255:0,x=i*this.width*4+4*a;this.data[x]=u,this.data[x+1]=c,this.data[x+2]=l,this.data[x+3]=m}this.pos+=e}},ki.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(l&t)/t*255|0,u=(l>>5&r)/r*255|0,m=(l>>11)/t*255|0,x=a*this.width*4+4*s;this.data[x]=m,this.data[x+1]=u,this.data[x+2]=c,this.data[x+3]=255}this.pos+=e}},ki.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=s,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},ki.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*r;this.data[c]=s,this.data[c+1]=a,this.data[c+2]=i,this.data[c+3]=l}},ki.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,a){var s=new ki(t,!1),l=s.width,c=s.height,u={data:s.getData(),width:l,height:c},m=new om(100).encode(u,100);return e.processJPEG.call(this,m,r,i,a)}}(gt.API),zg.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,a){var s=new zg(t),l=s.width,c=s.height,u={data:s.getData(),width:l,height:c},m=new om(100).encode(u,100);return e.processJPEG.call(this,m,r,i,a)}}(gt.API),gt.API.processRGBA=function(e,t,r){for(var i=e.data,a=i.length,s=new Uint8Array(a/4*3),l=new Uint8Array(a/4),c=0,u=0,m=0;m<a;m+=4){var x=i[m],g=i[m+1],v=i[m+2],p=i[m+3];s[c++]=x,s[c++]=g,s[c++]=v,l[u++]=p}var j=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:j,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},gt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},jo=gt.API,qu=jo.getCharWidthsArray=function(e,t){var r,i,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),c=t.widths?t.widths:a.metadata.Unicode.widths,u=c.fof?c.fof:1,m=t.kerning?t.kerning:a.metadata.Unicode.kerning,x=m.fof?m.fof:1,g=t.doKerning!==!1,v=0,p=e.length,j=0,w=c[0]||u,A=[];for(r=0;r<p;r++)i=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?A.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+l*(1e3/s)||0)/1e3):(v=g&&Qt(m[i])==="object"&&!isNaN(parseInt(m[i][j],10))?m[i][j]/x:0,A.push((c[i]||w)/u+v)),j=i;return A},Ag=jo.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return jo.processArabic&&(e=jo.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,a)/r:qu.apply(this,arguments).reduce(function(s,l){return s+l},0)},Lg=function(e,t,r,i){for(var a=[],s=0,l=e.length,c=0;s!==l&&c+t[s]<r;)c+=t[s],s++;a.push(e.slice(0,s));var u=s;for(c=0;s!==l;)c+t[s]>i&&(a.push(e.slice(u,s)),c=0,u=s),c+=t[s],s++;return u!==s&&a.push(e.slice(u,s)),a},Pg=function(e,t,r){r||(r={});var i,a,s,l,c,u,m,x=[],g=[x],v=r.textIndent||0,p=0,j=0,w=e.split(" "),A=qu.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var N=Array(u).join(" "),b=[];w.map(function(G){(G=G.split(/\s*\n/)).length>1?b=b.concat(G.map(function(ne,ce){return(ce&&ne.length?`
`:"")+ne})):b.push(G[0])}),w=b,u=Ag.apply(this,[N,r])}for(s=0,l=w.length;s<l;s++){var L=0;if(i=w[s],u&&i[0]==`
`&&(i=i.substr(1),L=1),v+p+(j=(a=qu.apply(this,[i,r])).reduce(function(G,ne){return G+ne},0))>t||L){if(j>t){for(c=Lg.apply(this,[i,a,t-(v+p),t]),x.push(c.shift()),x=[c.pop()];c.length;)g.push([c.shift()]);j=a.slice(i.length-(x[0]?x[0].length:0)).reduce(function(G,ne){return G+ne},0)}else x=[i];g.push(x),v=j+u,p=A}else x.push(i),v+=p+j,p=A}return m=u?function(G,ne){return(ne?N:"")+G.join(" ")}:function(G){return G.join(" ")},g.map(m)},jo.splitTextToSize=function(e,t,r){var i,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var g=this.internal.getFont(x.fontName,x.fontStyle);return g.metadata.Unicode?{widths:g.metadata.Unicode.widths||{0:1},kerning:g.metadata.Unicode.kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var c,u,m=[];for(c=0,u=i.length;c<u;c++)m=m.concat(Pg.apply(this,[i[c],l,s]));return m},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},i={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=t[a];var s=function(g){return"0x"+parseInt(g,10).toString(16)},l=e.__fontmetrics__.compress=function(g){var v,p,j,w,A=["{"];for(var N in g){if(v=g[N],isNaN(parseInt(N,10))?p="'"+N+"'":(N=parseInt(N,10),p=(p=s(N).slice(2)).slice(0,-1)+i[p.slice(-1)]),typeof v=="number")v<0?(j=s(v).slice(3),w="-"):(j=s(v).slice(2),w=""),j=w+j.slice(0,-1)+i[j.slice(-1)];else{if(Qt(v)!=="object")throw new Error("Don't know what to do with value type "+Qt(v)+".");j=l(v)}A.push(p+j)}return A.push("}"),A.join("")},c=e.__fontmetrics__.uncompress=function(g){if(typeof g!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,p,j,w,A={},N=1,b=A,L=[],G="",ne="",ce=g.length-1,V=1;V<ce;V+=1)(w=g[V])=="'"?v?(j=v.join(""),v=void 0):v=[]:v?v.push(w):w=="{"?(L.push([b,j]),b={},j=void 0):w=="}"?((p=L.pop())[0][p[1]]=b,j=void 0,b=p[0]):w=="-"?N=-1:j===void 0?r.hasOwnProperty(w)?(G+=r[w],j=parseInt(G,16)*N,N=1,G=""):G+=w:r.hasOwnProperty(w)?(ne+=r[w],b[j]=parseInt(ne,16)*N,N=1,j=void 0,ne=""):ne+=w;return A},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:c("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},x={Unicode:{"Courier-Oblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":c("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":c("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:c("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":c("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:c("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":c("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":c("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":c("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":c("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(g){var v=g.font,p=x.Unicode[v.postScriptName];p&&(v.metadata.Unicode={},v.metadata.Unicode.widths=p.widths,v.metadata.Unicode.kerning=p.kerning);var j=m.Unicode[v.postScriptName];j&&(v.metadata.Unicode.encoding=j,v.encoding=j.codePages[0])}])}(gt.API),function(e){var t=function(r){for(var i=r.length,a=new Uint8Array(i),s=0;s<i;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var i=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(l,c){c=/^\x00\x01\x00\x00/.test(c)?t(c):t(mc(c)),l.metadata=e.API.TTFFont.open(c),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(a,i)}}])}(gt),function(e){function t(){return(xt.canvg?Promise.resolve(xt.canvg):nf(()=>import("./index.es-904e66f5.js"),[],import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}gt.API.addSvgAsImage=function(r,i,a,s,l,c,u,m){if(isNaN(i)||isNaN(a))throw tn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(l))throw tn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=s,x.height=l;var g=x.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,x.width,x.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(j){return j.fromString(g,r,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(j){return j.render(v)}).then(function(){p.addImage(x.toDataURL("image/jpeg",1),i,a,s,l,u,m)})}}(),gt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,r);return this},gt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,a,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},c=Object.keys(l),u=[],m=0,x=0,g=0;function v(j,w){var A,N=!1;for(A=0;A<j.length;A+=1)j[A]===w&&(N=!0);return N}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=c.length;for(g=0;g<p;g+=1)r[c[g]].value=r[c[g]].defaultValue,r[c[g]].explicitSet=!1}if(Qt(e)==="object"){for(a in e)if(s=e[a],v(c,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&v(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(m=0;m<s.length;m+=1)if(i=!0,s[m].length===1&&typeof s[m][0]=="number")u.push(String(s[m]-1));else if(s[m].length>1){for(x=0;x<s[m].length;x+=1)typeof s[m][x]!="number"&&(i=!1);i===!0&&u.push([s[m][0]-1,s[m][1]-1].join(" "))}r[a].value="["+u.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,w=[];for(j in r)r[j].explicitSet===!0&&(r[j].type==="name"?w.push("/"+j+" /"+r[j].value):w.push("/"+j+" "+r[j].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),c=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),m=s.length+l.length+c.length+a.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+m+" >>"),this.internal.write("stream"),this.internal.write(a+s+l+c+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(gt.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,l){for(var c,u=l.metadata.Unicode.widths,m=["","0","00","000","0000"],x=[""],g=0,v=s.length;g<v;++g){if(c=l.metadata.characterToGlyph(s.charCodeAt(g)),l.metadata.glyIdsUsed.push(c),l.metadata.toUnicode[c]=s.charCodeAt(g),u.indexOf(c)==-1&&(u.push(c),u.push([parseInt(l.metadata.widthOfGlyph(c),10)])),c=="0")return x.join("");c=c.toString(16),x.push(m[4-c.length],c)}return x.join("")},i=function(s){var l,c,u,m,x,g,v;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],g=0,v=(c=Object.keys(s).sort(function(p,j){return p-j})).length;g<v;g++)l=c[g],u.length>=100&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),s[l]!==void 0&&s[l]!==null&&typeof s[l].toString=="function"&&(m=("0000"+s[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),u.push("<"+l+"><"+m+">"));return u.length&&(x+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(l){var c=l.font,u=l.out,m=l.newObject,x=l.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="Identity-H"){for(var g=c.metadata.Unicode.widths,v=c.metadata.subset.encode(c.metadata.glyIdsUsed,1),p="",j=0;j<v.length;j++)p+=String.fromCharCode(v[j]);var w=m();x({data:p,addLength1:!0,objectId:w}),u("endobj");var A=m();x({data:i(c.metadata.toUnicode),addLength1:!0,objectId:A}),u("endobj");var N=m();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+ko(c.fontName)),u("/FontFile2 "+w+" 0 R"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/Flags "+c.metadata.flags),u("/StemV "+c.metadata.stemV),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u(">>"),u("endobj");var b=m();u("<<"),u("/Type /Font"),u("/BaseFont /"+ko(c.fontName)),u("/FontDescriptor "+N+" 0 R"),u("/W "+e.API.PDFObject.convert(g)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+c.encoding+")"),u(">>"),u(">>"),u("endobj"),c.objectNumber=m(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+A+" 0 R"),u("/BaseFont /"+ko(c.fontName)),u("/Encoding /"+c.encoding),u("/DescendantFonts ["+b+" 0 R]"),u(">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(l){var c=l.font,u=l.out,m=l.newObject,x=l.putStream;if(c.metadata instanceof e.API.TTFFont&&c.encoding==="WinAnsiEncoding"){for(var g=c.metadata.rawData,v="",p=0;p<g.length;p++)v+=String.fromCharCode(g[p]);var j=m();x({data:v,addLength1:!0,objectId:j}),u("endobj");var w=m();x({data:i(c.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var A=m();u("<<"),u("/Descent "+c.metadata.decender),u("/CapHeight "+c.metadata.capHeight),u("/StemV "+c.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+j+" 0 R"),u("/Flags 96"),u("/FontBBox "+e.API.PDFObject.convert(c.metadata.bbox)),u("/FontName /"+ko(c.fontName)),u("/ItalicAngle "+c.metadata.italicAngle),u("/Ascent "+c.metadata.ascender),u(">>"),u("endobj"),c.objectNumber=m();for(var N=0;N<c.metadata.hmtx.widths.length;N++)c.metadata.hmtx.widths[N]=parseInt(c.metadata.hmtx.widths[N]*(1e3/c.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+ko(c.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+c.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(c.metadata.hmtx.widths)+">>"),u("endobj"),c.isAlreadyPutted=!0}})(s)}]);var a=function(s){var l,c=s.text||"",u=s.x,m=s.y,x=s.options||{},g=s.mutex||{},v=g.pdfEscape,p=g.activeFontKey,j=g.fonts,w=p,A="",N=0,b="",L=j[w].encoding;if(j[w].encoding!=="Identity-H")return{text:c,x:u,y:m,options:x,mutex:g};for(b=c,w=p,Array.isArray(c)&&(b=c[0]),N=0;N<b.length;N+=1)j[w].metadata.hasOwnProperty("cmap")&&(l=j[w].metadata.cmap.unicode.codeMap[b[N].charCodeAt(0)]),l||b[N].charCodeAt(0)<256&&j[w].metadata.hasOwnProperty("Unicode")?A+=b[N]:A+="";var G="";return parseInt(w.slice(1))<14||L==="WinAnsiEncoding"?G=v(A,w).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):L==="Identity-H"&&(G=r(A,j[w])),g.isHex=!0,{text:G,x:u,y:m,options:x,mutex:g}};t.events.push(["postProcessText",function(s){var l=s.text||"",c=[],u={text:l,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(l)){var m=0;for(m=0;m<l.length;m+=1)Array.isArray(l[m])&&l[m].length===3?c.push([a(Object.assign({},u,{text:l[m][0]})).text,l[m][1],l[m][2]]):c.push(a(Object.assign({},u,{text:l[m]})).text);s.text=c}else s.text=a(Object.assign({},u,{text:l})).text}])}(gt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(gt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var a,s,l,c,u,m,x,g=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],N=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,L=0;this.__bidiEngine__={};var G=function(_){var D=_.charCodeAt(),E=D>>8,q=w[E];return q!==void 0?g[256*q+(255&D)]:E===252||E===253?"AL":N.test(E)?"L":E===8?"R":"N"},ne=function(_){for(var D,E=0;E<_.length;E++){if((D=G(_.charAt(E)))==="L")return!1;if(D==="R")return!0}return!1},ce=function(_,D,E,q){var ae,ue,we,Q,de=D[q];switch(de){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(de="AN");break;case"AL":b=!0,de="R";break;case"WS":de="N";break;case"CS":q<1||q+1>=D.length||(ae=E[q-1])!=="EN"&&ae!=="AN"||(ue=D[q+1])!=="EN"&&ue!=="AN"?de="N":b&&(ue="AN"),de=ue===ae?ue:"N";break;case"ES":de=(ae=q>0?E[q-1]:"B")==="EN"&&q+1<D.length&&D[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&E[q-1]==="EN"){de="EN";break}if(b){de="N";break}for(we=q+1,Q=D.length;we<Q&&D[we]==="ET";)we++;de=we<Q&&D[we]==="EN"?"EN":"N";break;case"NSM":if(l&&!c){for(Q=D.length,we=q+1;we<Q&&D[we]==="NSM";)we++;if(we<Q){var ie=_[q],ze=ie>=1425&&ie<=2303||ie===64286;if(ae=D[we],ze&&(ae==="R"||ae==="AL")){de="R";break}}}de=q<1||(ae=D[q-1])==="B"?"N":E[q-1];break;case"B":b=!1,a=!0,de=L;break;case"S":s=!0,de="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":de="N"}return de},V=function(_,D,E){var q=_.split("");return E&&O(q,E,{hiLevel:L}),q.reverse(),D&&D.reverse(),q.join("")},O=function(_,D,E){var q,ae,ue,we,Q,de=-1,ie=_.length,ze=0,P=[],$=L?p:v,W=[];for(b=!1,a=!1,s=!1,ae=0;ae<ie;ae++)W[ae]=G(_[ae]);for(ue=0;ue<ie;ue++){if(Q=ze,P[ue]=ce(_,W,P,ue),q=240&(ze=$[Q][j[P[ue]]]),ze&=15,D[ue]=we=$[ze][5],q>0)if(q===16){for(ae=de;ae<ue;ae++)D[ae]=1;de=-1}else de=-1;if($[ze][6])de===-1&&(de=ue);else if(de>-1){for(ae=de;ae<ue;ae++)D[ae]=we;de=-1}W[ue]==="B"&&(D[ue]=0),E.hiLevel|=we}s&&function(H,te,me){for(var xe=0;xe<me;xe++)if(H[xe]==="S"){te[xe]=L;for(var C=xe-1;C>=0&&H[C]==="WS";C--)te[C]=L}}(W,D,ie)},J=function(_,D,E,q,ae){if(!(ae.hiLevel<_)){if(_===1&&L===1&&!a)return D.reverse(),void(E&&E.reverse());for(var ue,we,Q,de,ie=D.length,ze=0;ze<ie;){if(q[ze]>=_){for(Q=ze+1;Q<ie&&q[Q]>=_;)Q++;for(de=ze,we=Q-1;de<we;de++,we--)ue=D[de],D[de]=D[we],D[we]=ue,E&&(ue=E[de],E[de]=E[we],E[we]=ue);ze=Q}ze++}}},ee=function(_,D,E){var q=_.split(""),ae={hiLevel:L};return E||(E=[]),O(q,E,ae),function(ue,we,Q){if(Q.hiLevel!==0&&x)for(var de,ie=0;ie<ue.length;ie++)we[ie]===1&&(de=A.indexOf(ue[ie]))>=0&&(ue[ie]=A[de+1])}(q,E,ae),J(2,q,D,E,ae),J(1,q,D,E,ae),q.join("")};return this.__bidiEngine__.doBidiReorder=function(_,D,E){if(function(ae,ue){if(ue)for(var we=0;we<ae.length;we++)ue[we]=we;c===void 0&&(c=ne(ae)),m===void 0&&(m=ne(ae))}(_,D),l||!u||m)if(l&&u&&c^m)L=c?1:0,_=V(_,D,E);else if(!l&&u&&m)L=c?1:0,_=ee(_,D,E),_=V(_,D);else if(!l||c||u||m){if(l&&!u&&c^m)_=V(_,D),c?(L=0,_=ee(_,D,E)):(L=1,_=ee(_,D,E),_=V(_,D));else if(l&&c&&!u&&m)L=1,_=ee(_,D,E),_=V(_,D);else if(!l&&!u&&c^m){var q=x;c?(L=1,_=ee(_,D,E),L=0,x=!1,_=ee(_,D,E),x=q):(L=0,_=ee(_,D,E),_=V(_,D),L=1,x=!1,_=ee(_,D,E),x=q,_=V(_,D))}}else L=0,_=ee(_,D,E);else L=c?1:0,_=ee(_,D,E);return _},this.__bidiEngine__.setOptions=function(_){_&&(l=_.isInputVisual,u=_.isOutputVisual,c=_.isInputRtl,m=_.isOutputRtl,x=_.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var s=i.options||{};i.mutex,s.lang;var l=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var c=0;for(l=[],c=0;c<a.length;c+=1)Object.prototype.toString.call(a[c])==="[object Array]"?l.push([r.doBidiReorder(a[c][0]),a[c][1],a[c][2]]):l.push([r.doBidiReorder(a[c])]);i.text=l}else i.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(gt),gt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new ms(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new f4(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new e4(this.contents),this.head=new n4(this),this.name=new o4(this),this.cmap=new bx(this),this.toUnicode={},this.hhea=new r4(this),this.maxp=new l4(this),this.hmtx=new c4(this),this.post=new a4(this),this.os2=new i4(this),this.loca=new m4(this),this.glyf=new u4(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,c,u,m;for(m=[],l=0,c=(u=this.bbox).length;l<c;l++)t=u[l],m.push(Math.round(t*this.scaleFactor));return m}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var a,s,l,c;for(l=0,s=0,c=(t=""+t).length;0<=c?s<c:s>c;s=0<=c?++s:--s)a=t.charCodeAt(s),l+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var Ei,ms=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,a;for(a=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,a,s,l,c,u;return t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^s)+65536*(255^l)+256*(255^c)+(255^u)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*a+16777216*s+65536*l+256*c+u},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,a,s;for(s=[],i=0,a=t.length;i<a;i++)r=t[i],s.push(this.writeByte(r));return s},e}(),e4=function(){var e;function t(r){var i,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,a,s,l,c,u,m,x,g,v,p,j,w;for(w in p=Object.keys(r).length,u=Math.log(2),g=16*Math.floor(Math.log(p)/u),l=Math.floor(g/u),x=16*p-g,(a=new ms).writeInt(this.scalarType),a.writeShort(p),a.writeShort(g),a.writeShort(l),a.writeShort(x),s=16*p,m=a.pos+s,c=null,j=[],r)for(v=r[w],a.writeString(w),a.writeInt(e(v)),a.writeInt(m),a.writeInt(v.length),j=j.concat(v),w==="head"&&(c=m),m+=v.length;m%4;)j.push(0),m++;return a.write(j),i=2981146554-e(a.data),a.pos=c+8,a.writeUInt32(i),a.data},e=function(r){var i,a,s,l;for(r=jx.call(r);r.length%4;)r.push(0);for(s=new ms(r),a=0,i=0,l=r.length;i<l;i=i+=4)a+=s.readUInt32();return 4294967295&a},t}(),t4={}.hasOwnProperty,Qi=function(e,t){for(var r in t)t4.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Ei=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var n4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var i;return(i=new ms).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},t}(),Ig=function(){function e(t,r){var i,a,s,l,c,u,m,x,g,v,p,j,w,A,N,b,L;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),g=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(p=t.readUInt16(),v=p/2,t.pos+=6,s=function(){var G,ne;for(ne=[],u=G=0;0<=v?G<v:G>v;u=0<=v?++G:--G)ne.push(t.readUInt16());return ne}(),t.pos+=2,w=function(){var G,ne;for(ne=[],u=G=0;0<=v?G<v:G>v;u=0<=v?++G:--G)ne.push(t.readUInt16());return ne}(),m=function(){var G,ne;for(ne=[],u=G=0;0<=v?G<v:G>v;u=0<=v?++G:--G)ne.push(t.readUInt16());return ne}(),x=function(){var G,ne;for(ne=[],u=G=0;0<=v?G<v:G>v;u=0<=v?++G:--G)ne.push(t.readUInt16());return ne}(),a=(this.length-t.pos+this.offset)/2,c=function(){var G,ne;for(ne=[],u=G=0;0<=a?G<a:G>a;u=0<=a?++G:--G)ne.push(t.readUInt16());return ne}(),u=N=0,L=s.length;N<L;u=++N)for(A=s[u],i=b=j=w[u];j<=A?b<=A:b>=A;i=j<=A?++b:--b)x[u]===0?l=i+m[u]:(l=c[x[u]/2+(i-j)-(v-u)]||0)!==0&&(l+=m[u]),this.codeMap[i]=65535&l}t.pos=g}return e.encode=function(t,r){var i,a,s,l,c,u,m,x,g,v,p,j,w,A,N,b,L,G,ne,ce,V,O,J,ee,_,D,E,q,ae,ue,we,Q,de,ie,ze,P,$,W,H,te,me,xe,C,K,R,he;switch(q=new ms,l=Object.keys(t).sort(function(Ce,Re){return Ce-Re}),r){case"macroman":for(w=0,A=function(){var Ce=[];for(j=0;j<256;++j)Ce.push(0);return Ce}(),b={0:0},s={},ae=0,de=l.length;ae<de;ae++)b[C=t[a=l[ae]]]==null&&(b[C]=++w),s[a]={old:t[a],new:b[t[a]]},A[a]=b[t[a]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(A),{charMap:s,subtable:q.data,maxGlyphID:w+1};case"unicode":for(D=[],g=[],L=0,b={},i={},N=m=null,ue=0,ie=l.length;ue<ie;ue++)b[ne=t[a=l[ue]]]==null&&(b[ne]=++L),i[a]={old:ne,new:b[ne]},c=b[ne]-a,N!=null&&c===m||(N&&g.push(N),D.push(a),m=c),N=a;for(N&&g.push(N),g.push(65535),D.push(65535),ee=2*(J=D.length),O=2*Math.pow(Math.log(J)/Math.LN2,2),v=Math.log(O/2)/Math.LN2,V=2*J-O,u=[],ce=[],p=[],j=we=0,ze=D.length;we<ze;j=++we){if(_=D[j],x=g[j],_===65535){u.push(0),ce.push(0);break}if(_-(E=i[_].new)>=32768)for(u.push(0),ce.push(2*(p.length+J-j)),a=Q=_;_<=x?Q<=x:Q>=x;a=_<=x?++Q:--Q)p.push(i[a].new);else u.push(E-_),ce.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*J+2*p.length),q.writeUInt16(0),q.writeUInt16(ee),q.writeUInt16(O),q.writeUInt16(v),q.writeUInt16(V),me=0,P=g.length;me<P;me++)a=g[me],q.writeUInt16(a);for(q.writeUInt16(0),xe=0,$=D.length;xe<$;xe++)a=D[xe],q.writeUInt16(a);for(K=0,W=u.length;K<W;K++)c=u[K],q.writeUInt16(c);for(R=0,H=ce.length;R<H;R++)G=ce[R],q.writeUInt16(G);for(he=0,te=p.length;he<te;he++)w=p[he],q.writeUInt16(w);return{charMap:i,subtable:q.data,maxGlyphID:L+1}}},e}(),bx=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="cmap",t.prototype.parse=function(r){var i,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)i=new Ig(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(r,i){var a,s;return i==null&&(i="macroman"),a=Ig.encode(r,i),(s=new ms).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),r4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),i4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,a;for(a=[],i=0;i<10;++i)a.push(r.readByte());return a}(),this.charRange=function(){var i,a;for(a=[],i=0;i<4;++i)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),a4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="post",t.prototype.parse=function(r){var i,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(a=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=a?l<a:l>a;l=0<=a?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)i=r.readByte(),s.push(this.names.push(r.readString(i)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var c,u,m;for(m=[],l=c=0,u=this.file.maxp.numGlyphs;0<=u?c<u:c>u;l=0<=u?++c:--c)m.push(r.readUInt32());return m}).call(this)}},t}(),s4=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},o4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="name",t.prototype.parse=function(r){var i,a,s,l,c,u,m,x,g,v,p;for(r.pos=this.offset,r.readShort(),i=r.readShort(),u=r.readShort(),a=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+u+r.readShort()});for(m={},l=g=0,v=a.length;g<v;l=++g)s=a[l],r.pos=s.offset,x=r.readString(s.length),c=new s4(x,s),m[p=s.nameID]==null&&(m[p]=[]),m[s.nameID].push(c);this.strings=m,this.copyright=m[0],this.fontFamily=m[1],this.fontSubfamily=m[2],this.uniqueSubfamily=m[3],this.fontName=m[4],this.version=m[5];try{this.postscriptName=m[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=m[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=m[7],this.manufacturer=m[8],this.designer=m[9],this.description=m[10],this.vendorUrl=m[11],this.designerUrl=m[12],this.license=m[13],this.licenseUrl=m[14],this.preferredFamily=m[15],this.preferredSubfamily=m[17],this.compatibleFull=m[18],this.sampleText=m[19]},t}(),l4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),c4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="hmtx",t.prototype.parse=function(r){var i,a,s,l,c,u,m;for(r.pos=this.offset,this.metrics=[],i=0,u=this.file.hhea.numberOfMetrics;0<=u?i<u:i>u;i=0<=u?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,g;for(g=[],i=x=0;0<=s?x<s:x>s;i=0<=s?++x:--x)g.push(r.readInt16());return g}(),this.widths=(function(){var x,g,v,p;for(p=[],x=0,g=(v=this.metrics).length;x<g;x++)l=v[x],p.push(l.advance);return p}).call(this),a=this.widths[this.widths.length-1],m=[],i=c=0;0<=s?c<s:c>s;i=0<=s?++c:--c)m.push(this.widths.push(a));return m},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),jx=[].slice,u4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var i,a,s,l,c,u,m,x,g,v;return r in this.cache?this.cache[r]:(l=this.file.loca,i=this.file.contents,a=l.indexOf(r),(s=l.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+a,c=(u=new ms(i.read(s))).readShort(),x=u.readShort(),v=u.readShort(),m=u.readShort(),g=u.readShort(),this.cache[r]=c===-1?new h4(u,x,v,m,g):new d4(u,c,x,v,m,g),this.cache[r]))},t.prototype.encode=function(r,i,a){var s,l,c,u,m;for(c=[],l=[],u=0,m=i.length;u<m;u++)s=r[i[u]],l.push(c.length),s&&(c=c.concat(s.encode(a)));return l.push(c.length),{table:c,offsets:l}},t}(),d4=function(){function e(t,r,i,a,s,l){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=a,this.xMax=s,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),h4=function(){function e(t,r,i,a,s){var l,c;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;c=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&c;)l.pos+=1&c?4:2,128&c?l.pos+=8:64&c?l.pos+=4:8&c&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new ms(jx.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),m4=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Qi(t,Ei),t.prototype.tag="loca",t.prototype.parse=function(r){var i,a;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var s,l;for(l=[],a=0,s=this.length;a<s;a+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var s,l;for(l=[],a=0,s=this.length;a<s;a+=4)l.push(r.readUInt32());return l}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,i){for(var a=new Uint32Array(this.offsets.length),s=0,l=0,c=0;c<a.length;++c)if(a[c]=s,l<i.length&&i[l]==c){++l,a[c]=s;var u=this.offsets[c],m=this.offsets[c+1]-u;m>0&&(s+=m)}for(var x=new Array(4*a.length),g=0;g<a.length;++g)x[4*g+3]=255&a[g],x[4*g+2]=(65280&a[g])>>8,x[4*g+1]=(16711680&a[g])>>16,x[4*g]=(4278190080&a[g])>>24;return x},t}(),f4=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)i=s[r],t[r]=a[i];return t},e.prototype.glyphsFor=function(t){var r,i,a,s,l,c,u;for(a={},l=0,c=t.length;l<c;l++)a[s=t[l]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(i=a[s])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(s in u=this.glyphsFor(r))i=u[s],a[s]=i;return a},e.prototype.encode=function(t,r){var i,a,s,l,c,u,m,x,g,v,p,j,w,A,N;for(a in i=bx.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),p={0:0},N=i.charMap)p[(u=N[a]).old]=u.new;for(j in v=i.maxGlyphID,l)j in p||(p[j]=v++);return x=function(b){var L,G;for(L in G={},b)G[b[L]]=L;return G}(p),g=Object.keys(x).sort(function(b,L){return b-L}),w=function(){var b,L,G;for(G=[],b=0,L=g.length;b<L;b++)c=g[b],G.push(x[c]);return G}(),s=this.font.glyf.encode(l,w,p),m=this.font.loca.encode(s.offsets,w),A={cmap:this.font.cmap.raw(),glyf:s.table,loca:m,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},e}();gt.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,a,s,l;if(Array.isArray(r))return"["+function(){var c,u,m;for(m=[],c=0,u=r.length;c<u;c++)i=r[c],m.push(t.convert(i));return m}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)l=r[a],s.push("/"+a+" "+t.convert(l));return s.push(">>"),s.join(`
`)}return""+r},t}();const Mg=[{id:"prod_001",name:"Mozzarella di Bufala",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["latte"]},{id:"prod_002",name:"Parmigiano Reggiano",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["latte"]},{id:"prod_003",name:"Burrata",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["latte"]},{id:"prod_018",name:"Gorgonzola DOP",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["latte"]},{id:"prod_021",name:"Ricotta Fresca",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["latte"]},{id:"prod_007",name:"Prosciutto Crudo",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_031",name:"Prosciutto Cotto",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_032",name:"Salame",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_008",name:"Bresaola",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_014",name:"Pancetta",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_015",name:"Speck",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_020",name:"Guanciale",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_022",name:"Carne di Manzo",category:"carni",defaultLocation:"Frigo C - Ripiano inferiore",allergens:[]},{id:"prod_005",name:"Basilico Fresco",category:"verdure",defaultLocation:"Frigo B - Cassetto verdure",allergens:[]},{id:"prod_017",name:"Rucola",category:"verdure",defaultLocation:"Frigo B - Cassetto verdure",allergens:[]},{id:"prod_004",name:"Pomodoro",category:"verdure",defaultLocation:"Frigo B - Cassetto verdure",allergens:[]},{id:"prod_023",name:"Zucchine",category:"verdure",defaultLocation:"Frigo B - Cassetto verdure",allergens:[]},{id:"prod_024",name:"Melanzane",category:"verdure",defaultLocation:"Frigo B - Cassetto verdure",allergens:[]},{id:"prod_025",name:"Limoni",category:"frutta",defaultLocation:"Frigo B - Cassetto frutta",allergens:[]},{id:"prod_026",name:"Arance",category:"frutta",defaultLocation:"Frigo B - Cassetto frutta",allergens:[]},{id:"prod_011",name:"Salmone",category:"pesce_fresco",defaultLocation:"Frigo Pesce - Ripiano inferiore",allergens:["pesce"]},{id:"prod_012",name:"Vongole Veraci",category:"pesce_fresco",defaultLocation:"Frigo Pesce - Ripiano inferiore",allergens:["molluschi"]},{id:"prod_027",name:"Branzino Fresco",category:"pesce_fresco",defaultLocation:"Frigo Pesce - Ripiano inferiore",allergens:["pesce"]},{id:"prod_010",name:"Gamberi Rossi Surgelati",category:"surgelati",defaultLocation:"Freezer A",allergens:["crostacei"]},{id:"prod_028",name:"Spinaci Surgelati",category:"surgelati",defaultLocation:"Freezer A",allergens:[]},{id:"prod_009",name:"Farina 00 Manitoba",category:"dispensa",defaultLocation:"Scaffale 3 - Dispensa",allergens:["glutine"]},{id:"prod_029",name:"Pasta Spaghetti",category:"dispensa",defaultLocation:"Scaffale 3 - Dispensa",allergens:["glutine"]},{id:"prod_030",name:"Riso Carnaroli",category:"dispensa",defaultLocation:"Scaffale 3 - Dispensa",allergens:[]},{id:"prod_006",name:"Olio Extra Vergine d'Oliva",category:"condimenti",defaultLocation:"Scaffale 2 - Condimenti",allergens:[]},{id:"prod_016",name:"Aceto Balsamico Modena",category:"condimenti",defaultLocation:"Scaffale 2 - Condimenti",allergens:["solfiti"]},{id:"prod_019",name:"Pistacchi",category:"condimenti",defaultLocation:"Scaffale 4 - Frutta secca",allergens:["frutta_guscio"]},{id:"prod_013",name:"Uova Bio Fresche",category:"latticini",defaultLocation:"Frigo A - Ripiano intermedio",allergens:["uova"]}],Yl=[{id:"glutine",name:"Glutine",color:"bg-red-100 text-red-800"},{id:"crostacei",name:"Crostacei",color:"bg-orange-100 text-orange-800"},{id:"uova",name:"Uova",color:"bg-yellow-100 text-yellow-800"},{id:"pesce",name:"Pesce",color:"bg-blue-100 text-blue-800"},{id:"arachidi",name:"Arachidi",color:"bg-amber-100 text-amber-800"},{id:"soia",name:"Soia",color:"bg-green-100 text-green-800"},{id:"latte",name:"Latte",color:"bg-indigo-100 text-indigo-800"},{id:"frutta_guscio",name:"Frutta a guscio",color:"bg-purple-100 text-purple-800"},{id:"sedano",name:"Sedano",color:"bg-lime-100 text-lime-800"},{id:"senape",name:"Senape",color:"bg-yellow-100 text-yellow-800"},{id:"sesamo",name:"Sesamo",color:"bg-orange-100 text-orange-800"},{id:"solfiti",name:"Solfiti",color:"bg-red-100 text-red-800"},{id:"lupini",name:"Lupini",color:"bg-green-100 text-green-800"},{id:"molluschi",name:"Molluschi",color:"bg-blue-100 text-blue-800"}],Dr=[{id:"latticini",name:"Latticini e Formaggi",color:"bg-blue-100 text-blue-800",temp:"4-5C",storage:"Ripiani intermedi frigo",description:"Latte, formaggi freschi e stagionati"},{id:"carni",name:"Carni e Salumi",color:"bg-red-100 text-red-800",temp:"2-4C",storage:"Ripiano inferiore frigo",description:"Carni crude, salumi, pollame"},{id:"verdure",name:"Verdure e Ortaggi",color:"bg-green-100 text-green-800",temp:"6-8C",storage:"Cassetto frutta/verdura",description:"Verdure fresche, ortaggi, insalate"},{id:"frutta",name:"Frutta Fresca",color:"bg-orange-100 text-orange-800",temp:"6-8C",storage:"Cassetto frutta/verdura",description:"Frutta fresca di stagione"},{id:"pesce_fresco",name:"Pesce Fresco",color:"bg-cyan-100 text-cyan-800",temp:"1-3C",storage:"Ripiano inferiore frigo",description:"Pesce fresco, molluschi, crostacei"},{id:"pesce_surgelato",name:"Pesce Surgelato",color:"bg-indigo-100 text-indigo-800",temp:"-18C",storage:"Freezer",description:"Pesce e prodotti della pesca surgelati"},{id:"surgelati",name:"Surgelati",color:"bg-indigo-100 text-indigo-800",temp:"-18C",storage:"Freezer",description:"Tutti i prodotti surgelati"},{id:"dispensa",name:"Dispensa Secca",color:"bg-yellow-100 text-yellow-800",temp:"Ambiente",storage:"Scaffali dispensa",description:"Pasta, riso, farina, conserve"},{id:"condimenti",name:"Oli e Condimenti",color:"bg-amber-100 text-amber-800",temp:"Ambiente",storage:"Scaffali condimenti",description:"Oli, aceti, spezie, salse"}],p4=[{id:"latticini",name:"Latticini e Formaggi",description:"Latte, formaggi freschi e stagionati"},{id:"carni",name:"Carni e Salumi",description:"Carni crude, salumi, pollame"},{id:"verdure",name:"Verdure e Ortaggi",description:"Verdure fresche, ortaggi, insalate"},{id:"frutta",name:"Frutta Fresca",description:"Frutta fresca di stagione"},{id:"pesce_fresco",name:"Pesce Fresco",description:"Pesce fresco, molluschi, crostacei"},{id:"pesce_surgelato",name:"Pesce Surgelato",description:"Pesce e prodotti della pesca surgelati"},{id:"surgelato",name:"Surgelati",description:"Tutti i prodotti surgelati"},{id:"dispensa",name:"Dispensa Secca",description:"Pasta, riso, farina, conserve"},{id:"condimenti",name:"Oli e Condimenti",description:"Oli, aceti, spezie, salse"},{id:"hot_holding",name:"Mantenimento Caldo",description:"Piatti pronti caldi, mantenuti a temperatura"},{id:"altro",name:"Altro",description:"Altre categorie di prodotti"}];function g4({products:e=[],setProducts:t,currentUser:r,refrigerators:i=[]}){var We;const[a,s]=re.useState(!1),[l,c]=re.useState(null),[u,m]=re.useState(""),[x,g]=re.useState(""),[v,p]=re.useState(""),[j,w]=re.useState(""),[A,N]=re.useState(""),[b,L]=re.useState(""),[G,ne]=re.useState(!1),[ce,V]=re.useState(""),[O,J]=re.useState([]),[ee,_]=re.useState(!1),[D,E]=re.useState([]),[q,ae]=re.useState(!1),[ue,we]=re.useState(""),[Q,de]=re.useState(""),[ie,ze]=re.useState(""),[P,$]=re.useState(""),[W,H]=re.useState([]),[te,me]=re.useState(!1),[xe,C]=re.useState([]),[K,R]=re.useState(!1),[he,Ce]=re.useState([]),[Re,Ne]=re.useState(!1),[Y,ht]=re.useState([]),[Qe,Fe]=re.useState(!1),[ge,Pe]=re.useState({orderId:"",supplierName:"",orderDate:"",expectedDelivery:"",notes:""}),[Se,qe]=re.useState({name:"",category:"",expiryDate:"",location:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",associatedOrderId:"",supplierName:"",temperatureSuggestion:null,storageSuggestion:null});re.useEffect(()=>{localStorage.setItem("haccp-products",JSON.stringify(e))},[e]),re.useEffect(()=>{const M=localStorage.getItem("haccp-suppliers");M&&J(JSON.parse(M));const Ie=localStorage.getItem("haccp-used-ingredients");Ie&&Ce(JSON.parse(Ie));const _e=localStorage.getItem("haccp-custom-categories");_e&&ht(JSON.parse(_e))},[]),re.useEffect(()=>{localStorage.setItem("haccp-used-ingredients",JSON.stringify(he))},[he]),re.useEffect(()=>{localStorage.setItem("haccp-custom-categories",JSON.stringify(Y))},[Y]),re.useEffect(()=>{const M=Ie=>{G&&!Ie.target.closest(".supplier-dropdown")&&(ne(!1),V(""))};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[G]);const $e=M=>{const Ie=new Date;let _e=7;if(M==="latticini")_e=7;else if(M==="carni")_e=3;else if(M==="pesce_fresco")_e=2;else if(M==="verdure")_e=7;else if(M==="frutta")_e=7;else if(M==="dispensa")_e=365;else if(M==="condimenti")_e=730;else if(M==="surgelati"||M==="pesce_surgelato")_e=180;else if(Y.find(bt=>bt.id===M)){const bt=Y.find(Gt=>Gt.id===M),Ge=(bt.temperatureMin+bt.temperatureMax)/2;Ge<=-13.5?_e=180:Ge>=15?_e=365:_e=7}const it=new Date(Ie);return it.setDate(Ie.getDate()+_e),it.toISOString().split("T")[0]},Ke=M=>{const Ie=new Date,it=new Date(M)-Ie,bt=Math.ceil(it/(1e3*60*60*24));return bt<0?{status:"expired",label:"Scaduto",color:"bg-red-100 text-red-800"}:bt<=3?{status:"critical",label:`${bt} giorni`,color:"bg-red-100 text-red-800"}:bt<=7?{status:"warning",label:`${bt} giorni`,color:"bg-yellow-100 text-yellow-800"}:{status:"ok",label:`${bt} giorni`,color:"bg-green-100 text-green-800"}},ot=()=>{qe({name:"",category:"",expiryDate:"",location:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",associatedOrderId:"",supplierName:"",temperatureSuggestion:null,storageSuggestion:null}),c(null)},yt=M=>{var bt,Ge,Gt;if(i.length===0)return"";let Ie;if(Dr.find(_t=>_t.id===M))Ie=zc(M);else if(Y.find(_t=>_t.id===M)){const _t=Y.find(Wt=>Wt.id===M);Ie={min:_t.temperatureMin,max:_t.temperatureMax,unit:"C",type:_t.temperatureMin<=-13.5?"frozen":_t.temperatureMin>=15?"ambient":"refrigerated"}}else return((bt=i[0])==null?void 0:bt.name)||"";if(!Ie)return((Ge=i[0])==null?void 0:Ge.name)||"";let _e=null,it=-1;return i.forEach(_t=>{if(!_t.setTemperatureMin||!_t.setTemperatureMax)return;const Wt=parseFloat(_t.setTemperatureMin),Jt=parseFloat(_t.setTemperatureMax);if(isNaN(Wt)||isNaN(Jt))return;let qt=0;if(Wt<=Ie.max&&Jt>=Ie.min||Ie.min<=Jt&&Ie.max>=Wt){qt+=100;const qr=Math.abs((Wt+Jt)/2-(Ie.min+Ie.max)/2);qt+=Math.max(0,50-qr*10),_t.dedicatedTo===M&&(qt+=50),qt>it&&(it=qt,_e=_t)}}),_e||i.forEach(_t=>{if(!_t.setTemperatureMin||!_t.setTemperatureMax)return;const Wt=parseFloat(_t.setTemperatureMin),Jt=parseFloat(_t.setTemperatureMax);if(isNaN(Wt)||isNaN(Jt))return;const qt=(Wt+Jt)/2,qn=(Ie.min+Ie.max)/2,qr=Math.abs(qt-qn);if(qr<10){const pr=50-qr*5;pr>it&&(it=pr,_e=_t)}}),(_e==null?void 0:_e.name)||((Gt=i[0])==null?void 0:Gt.name)||""},Pt=M=>{qe({name:M.name,category:M.category,expiryDate:$e(M.category),location:M.defaultLocation||"",allergens:M.allergens||[],notes:"",lotNumber:"",batchDeliveryDate:"",associatedOrderId:"",supplierName:"",temperatureSuggestion:null,storageSuggestion:null}),s(!0)},lt=M=>{if(M.preventDefault(),!Se.name.trim()||!Se.expiryDate||!Se.location.trim())return;const Ie=hn(Se.category,Se.location);if(!Ie.isCompatible){alert(Ie.message);return}if(l){const _e=e.map(it=>it.id===l.id?{...it,...Se,updatedAt:new Date().toISOString()}:it);t(_e),c(null)}else{const _e={id:`prod_${Date.now()}`,...Se,addedBy:r==null?void 0:r.id,addedByName:r==null?void 0:r.name,addedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};t([...e,_e])}ot(),s(!1)},mt=M=>{c(M),qe({name:M.name,category:M.category,expiryDate:M.expiryDate,location:M.location,allergens:M.allergens||[],notes:M.notes||"",lotNumber:M.lotNumber||"",batchDeliveryDate:M.batchDeliveryDate||"",associatedOrderId:M.associatedOrderId||"",supplierName:M.supplierName||"",temperatureSuggestion:null,storageSuggestion:null}),s(!0)},Ve=M=>{t(e.filter(Ie=>Ie.id!==M))},Vt=M=>{qe(Ie=>({...Ie,allergens:Ie.allergens.includes(M)?Ie.allergens.filter(_e=>_e!==M):[...Ie.allergens,M]}))},kt=M=>{Ce(Ie=>Ie.filter(_e=>_e.id!==M.id)),qe({name:M.name,category:M.category,expiryDate:$e(M.category),location:M.location||"",allergens:M.allergens||[],notes:M.notes||"",lotNumber:M.lotNumber||"",batchDeliveryDate:M.batchDeliveryDate||"",associatedOrderId:M.associatedOrderId||"",supplierName:M.supplierName||"",temperatureSuggestion:null,storageSuggestion:null}),s(!0),Ne(!1)},Ht=M=>{E(Ie=>Ie.includes(M)?Ie.filter(_e=>_e!==M):[...Ie,M])},Tt=()=>{t(e.filter(M=>!D.includes(M.id))),E([]),_(!1)},vt=()=>{t([]),ae(!1)},hn=(M,Ie)=>{const _e=i.find(Ge=>Ge.name===Ie);if(!_e||!_e.dedicatedTo||_e.dedicatedTo===M)return{isCompatible:!0,message:null};let it;if(Dr.find(Ge=>Ge.id===M))it=zc(M);else if(Y.find(Ge=>Ge.id===M)){const Ge=Y.find(Gt=>Gt.id===M);it={min:Ge.temperatureMin,max:Ge.temperatureMax,unit:"C",type:Ge.temperatureMin<=-13.5?"frozen":Ge.temperatureMin>=15?"ambient":"refrigerated"}}else return{isCompatible:!1,message:"Categoria prodotto non riconosciuta"};if(_e.setTemperatureMin<=it.max&&_e.setTemperatureMax>=it.min||it.min<=_e.setTemperatureMax&&it.max>=_e.setTemperatureMin){if(Math.abs(_e.setTemperatureMin-it.min)>2||Math.abs(_e.setTemperatureMax-it.max)>2)return{isCompatible:!0,message:` ATTENZIONE: Temperatura non ottimale!

Il PDC "${_e.name}" ha temperatura: ${_e.setTemperatureMin}-${_e.setTemperatureMax}C
Il prodotto richiede temperatura: ${it.min}-${it.max}C

La temperatura  compatibile ma potrebbe non essere ideale per la conservazione ottimale.

Vuoi continuare comunque o preferisci scegliere un altro PDC?`}}else return{isCompatible:!1,message:` ERRORE: Temperatura INCOMPATIBILE!

Il PDC "${_e.name}" ha temperatura: ${_e.setTemperatureMin}-${_e.setTemperatureMax}C
Il prodotto richiede temperatura: ${it.min}-${it.max}C

 NON puoi inserire questo prodotto in questo PDC!

Scegli un altro PDC con temperatura compatibile.`};return{isCompatible:!0,message:null}},zt=()=>{const M=new gt;M.setFontSize(20),M.text("Lista della Spesa",20,30),M.setFontSize(12),M.text(`Data: ${new Date().toLocaleDateString("it-IT")}`,20,45),M.text(`Generato da: ${(r==null?void 0:r.name)||"N/A"} (${(r==null?void 0:r.role)==="admin"?"Amministratore":"Dipendente"})`,20,57);const Ie=e.filter(_e=>W.includes(_e.id));if(Ie.length===0)M.text("Nessun prodotto selezionato",20,60);else{M.text(`Prodotti finiti (${Ie.length}):`,20,72);let _e=87;Ie.forEach((it,bt)=>{const Ge=Dr.find(Gt=>Gt.id===it.category);M.text(`${bt+1}. ${it.name}`,25,_e),M.setFontSize(10),M.text(`   Categoria: ${(Ge==null?void 0:Ge.name)||"N/A"} | Posizione: ${it.location}`,25,_e+8),M.setFontSize(12),_e+=20,_e>250&&(M.addPage(),_e=30)})}M.save(`lista-spesa-${new Date().toISOString().split("T")[0]}.pdf`),me(!1),H([])},fr=M=>{H(Ie=>Ie.includes(M)?Ie.filter(_e=>_e!==M):[...Ie,M])},nn=M=>{C(Ie=>Ie.includes(M)?Ie.filter(_e=>_e!==M):[...Ie,M])},Bn=M=>{M.preventDefault(),e.filter(_e=>xe.includes(_e.id));const Ie=e.map(_e=>xe.includes(_e.id)?{..._e,associatedOrderId:ge.orderId,supplierName:ge.supplierName,batchDeliveryDate:ge.expectedDelivery,lotNumber:`L${new Date().toISOString().slice(2,10).replace(/-/g,"")}${Math.random().toString(36).substr(2,3).toUpperCase()}`}:_e);t(Ie),C([]),R(!1),Pe({orderId:"",supplierName:"",orderDate:"",expectedDelivery:"",notes:""})},$t=e.filter(M=>{var Ge;const Ie=u.toLowerCase(),_e=!u||M.name.toLowerCase().includes(Ie)||((Ge=Dr.find(Gt=>Gt.id===M.category))==null?void 0:Ge.name.toLowerCase().includes(Ie))||M.allergens&&M.allergens.some(Gt=>{var _t;return(_t=Yl.find(Wt=>Wt.id===Gt))==null?void 0:_t.name.toLowerCase().includes(Ie)})||M.location&&M.location.toLowerCase().includes(Ie),it=!x||M.category===x,bt=!v||Ke(M.expiryDate).status===v;return _e&&it&&bt}),Bt={total:e.length,expired:e.filter(M=>Ke(M.expiryDate).status==="expired").length,warning:e.filter(M=>Ke(M.expiryDate).status==="warning").length,byCategory:e.reduce((M,Ie)=>(M[Ie.category]=(M[Ie.category]||0)+1,M),{})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(He,{children:n.jsx(Je,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Fn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:Bt.total}),n.jsx("p",{className:"text-sm text-gray-600",children:"Totale Prodotti"})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(tr,{className:"h-8 w-8 text-red-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:Bt.expired}),n.jsx("p",{className:"text-sm text-gray-600",children:"Scaduti"})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(cp,{className:"h-8 w-8 text-yellow-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Bt.warning}),n.jsx("p",{className:"text-sm text-gray-600",children:"In Scadenza"})]})]})})}),n.jsx(He,{children:n.jsx(Je,{className:"p-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(up,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:Bt.byCategory.latticini||0}),n.jsx("p",{className:"text-sm text-gray-600",children:"Latticini"})]})]})})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Gestione Inventario"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{onClick:()=>s(!a),children:a?n.jsxs(n.Fragment,{children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Annulla"]}):n.jsxs(n.Fragment,{children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Aggiungi Prodotto"]})}),n.jsxs(pe,{variant:"outline",onClick:()=>Ne(!Re),className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4"}),"Ingredienti Utilizzati (",he.length,")"]})]})]})}),n.jsxs(Je,{children:[n.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca per nome, categoria, allergene o posizione...",value:u,onChange:M=>m(M.target.value),className:"w-full pl-10"})]})}),n.jsxs("select",{value:x,onChange:M=>g(M.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le categorie"}),Dr.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]}),n.jsxs("select",{value:v,onChange:M=>p(M.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"expired",children:"Scaduti"}),n.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),n.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 p-4 bg-gray-50 rounded",children:[n.jsxs("div",{children:[n.jsx(et,{children:" Filtra per Lotto"}),n.jsx(st,{placeholder:"Numero lotto...",value:j,onChange:M=>w(M.target.value),className:"w-full"})]}),n.jsxs("div",{children:[n.jsx(et,{children:" Filtra per Fornitore"}),n.jsx(st,{placeholder:"Nome fornitore...",value:A,onChange:M=>N(M.target.value),className:"w-full"})]}),n.jsxs("div",{children:[n.jsx(et,{children:" Filtra per Fattura/DDT"}),n.jsx(st,{placeholder:"Fattura N / DDT N",value:b,onChange:M=>L(M.target.value),className:"w-full"})]})]})]})]}),a&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsx(ut,{children:l?"Modifica Prodotto":"Aggiungi Nuovo Prodotto"})}),n.jsxs(Je,{children:[n.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"text-blue-600 mt-1",children:n.jsx(tr,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-blue-800 mb-2",children:" Nuova Logica di Validazione"}),n.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Ora l'applicazione verifica automaticamente la compatibilit tra categorie di prodotti e punti di conservazione:"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"I frigoriferi possono essere dedicati a categorie specifiche"}),n.jsx("li",{children:"I prodotti possono essere inseriti solo in frigoriferi compatibili"}),n.jsx("li",{children:"Viene mostrato un avviso in caso di conflitto"}),n.jsx("li",{children:"Puoi aggiungere nuove categorie personalizzate"})]})]})]})}),n.jsxs("form",{onSubmit:lt,className:"space-y-4",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{children:"Nome Prodotto *"}),n.jsx(st,{value:Se.name,onChange:M=>{const Ie=M.target.value;if(qe({...Se,name:Ie}),Ie.length>3){const _e=ex(Ie);if(_e&&_e.length>0){const it=_e[0],bt=hN(Ie,i);qe(Ge=>({...Ge,name:Ie,temperatureSuggestion:it,storageSuggestion:bt}))}else qe(it=>({...it,name:Ie,temperatureSuggestion:null,storageSuggestion:null}))}},placeholder:"Es. Mozzarella di Bufala",required:!0}),Se.temperatureSuggestion&&n.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(gn,{className:"h-4 w-4 text-green-600 mt-0.5"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-medium text-green-800 mb-1",children:" Suggerimento Temperatura EU/ASL"}),n.jsxs("p",{className:"text-green-700 mb-1",children:[n.jsx("strong",{children:"Temperatura consigliata:"})," ",Se.temperatureSuggestion.temp_celsius]}),n.jsxs("p",{className:"text-green-700 mb-1",children:[n.jsx("strong",{children:"Categoria:"})," ",Se.temperatureSuggestion.conservation_category==="refrigerated"?"Refrigerato":Se.temperatureSuggestion.conservation_category==="frozen"?"Surgelato":Se.temperatureSuggestion.conservation_category==="hot-holding"?"Mantenuto Caldo":"Temperatura Ambiente"]}),Se.temperatureSuggestion.notes&&n.jsxs("p",{className:"text-green-700 mb-2",children:[n.jsx("strong",{children:"Note:"})," ",Se.temperatureSuggestion.notes]}),Se.storageSuggestion&&Se.storageSuggestion.refrigerator&&n.jsxs("div",{className:"mt-2 p-2 bg-blue-50 border border-blue-200 rounded",children:[n.jsx("p",{className:"font-medium text-blue-800 mb-1",children:" Punto di Conservazione Suggerito"}),n.jsxs("p",{className:"text-blue-700 text-xs",children:[n.jsx("strong",{children:"Frigorifero:"})," ",Se.storageSuggestion.refrigerator.name]}),n.jsxs("p",{className:"text-blue-700 text-xs",children:[n.jsx("strong",{children:"Temperatura:"})," ",Se.storageSuggestion.refrigerator.setTemperature,"C"]}),n.jsxs("p",{className:"text-blue-700 text-xs",children:[n.jsx("strong",{children:"Punteggio compatibilit:"})," ",Math.round(Se.storageSuggestion.score),"/100"]}),n.jsx("button",{type:"button",onClick:()=>qe(M=>({...M,location:Se.storageSuggestion.refrigerator.name})),className:"mt-1 px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:" Usa questo punto"})]}),n.jsxs("div",{className:"text-xs text-green-600",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Fonte:"})," ",Se.temperatureSuggestion.legal_reference]}),n.jsx("a",{href:Se.temperatureSuggestion.reference_link,target:"_blank",rel:"noopener noreferrer",className:"text-green-700 underline hover:text-green-800",children:" Leggi la normativa completa"})]})]})]})})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Categoria *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:Se.category,onChange:M=>{qe({...Se,category:M.target.value,location:""})},className:"flex-1 px-3 py-2 border rounded-md",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona una categoria"}),n.jsx("optgroup",{label:"Categorie Predefinite",children:Dr.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))}),Y.length>0&&n.jsx("optgroup",{label:"Categorie Personalizzate",children:Y.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))})]}),n.jsx(pe,{type:"button",variant:"outline",onClick:()=>Fe(!0),className:"px-3 py-2",title:"Gestisci categorie personalizzate",children:n.jsx(wr,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Data Scadenza *"}),n.jsx(st,{type:"date",value:Se.expiryDate,onChange:M=>qe({...Se,expiryDate:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Posizione *"}),n.jsxs("select",{value:Se.location,onChange:M=>qe({...Se,location:M.target.value}),className:"w-full px-3 py-2 border rounded-md",required:!0,disabled:i.length===0,children:[n.jsx("option",{value:"",children:i.length>0?"Seleziona un frigorifero":"Nessun frigorifero registrato - Aggiungi prima un frigorifero"}),i.map(M=>{const Ie=!M.dedicatedTo||M.dedicatedTo===Se.category,_e=Ie?" Compatibile":" Categoria non compatibile";return n.jsxs("option",{value:M.name,disabled:!Ie,children:[M.name," - ",M.location||"Posizione non specificata"," ",_e]},M.id)})]}),i.length===0&&n.jsx("p",{className:"text-sm text-orange-600 mt-1",children:' Devi prima registrare almeno un punto di conservazione nella sezione "Punti di Conservazione"'}),Se.category&&Se.location&&(()=>{var Ie,_e;const M=i.find(it=>it.name===Se.location);return M&&M.dedicatedTo&&M.dedicatedTo!==Se.category?n.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx(tr,{className:"h-4 w-4"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:" Conflitto di Categoria"}),n.jsxs("p",{className:"text-sm",children:['Il frigorifero "',M.name,'"  dedicato alla categoria "',((Ie=p4.find(it=>it.id===M.dedicatedTo))==null?void 0:Ie.name)||M.dedicatedTo,'"']}),n.jsxs("p",{className:"text-sm",children:['Il prodotto "',Se.name,'" appartiene alla categoria "',(_e=Dr.find(it=>it.id===Se.category))==null?void 0:_e.name,'"']}),n.jsx("p",{className:"text-sm font-medium",children:"Scegli un frigorifero compatibile o modifica la categoria del prodotto."})]})]})}):null})()]})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Allergeni"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2 mt-2",children:Yl.map(M=>n.jsx("button",{type:"button",onClick:()=>Vt(M.id),className:`px-2 py-1 text-xs rounded transition-colors ${Se.allergens.includes(M.id)?M.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:M.name},M.id))})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Note"}),n.jsx(st,{value:Se.notes,onChange:M=>qe({...Se,notes:M.target.value}),placeholder:"Note aggiuntive..."})]}),n.jsxs("div",{className:"border-t pt-4 mt-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:" Informazioni aggiuntive"}),n.jsxs("p",{className:"text-xs text-gray-600 bg-blue-50 p-3 rounded-lg border-l-4 border-blue-200",children:[" ",n.jsx("strong",{children:"Perch queste informazioni?"})," Grazie a questi dettagli sar pi facile tracciare i prodotti e ricevere assistenza dall'IA per la gestione dell'inventario."]})]}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{children:"Numero Lotto"}),n.jsx(st,{value:Se.lotNumber,onChange:M=>qe({...Se,lotNumber:M.target.value}),placeholder:"es. L240315A"})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Data Consegna Lotto"}),n.jsx(st,{type:"date",value:Se.batchDeliveryDate,onChange:M=>qe({...Se,batchDeliveryDate:M.target.value})})]}),n.jsxs("div",{children:[n.jsx(et,{children:"ID Ordine Associato"}),n.jsx(st,{value:Se.associatedOrderId,onChange:M=>qe({...Se,associatedOrderId:M.target.value}),placeholder:"Collegamento a ordine/fattura"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(et,{children:"Nome Fornitore"}),n.jsxs("div",{className:"relative",children:[n.jsx(st,{value:Se.supplierName,onChange:M=>qe({...Se,supplierName:M.target.value}),onFocus:()=>ne(!0),placeholder:"Cerca o digita nome fornitore...",className:"pr-10"}),n.jsx("button",{type:"button",onClick:()=>ne(!G),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1",children:n.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),G&&n.jsxs("div",{className:"supplier-dropdown absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[n.jsx("div",{className:"p-2 border-b",children:n.jsx(st,{placeholder:"Cerca fornitori...",value:ce,onChange:M=>V(M.target.value),className:"w-full"})}),n.jsxs("div",{className:"py-1",children:[O.filter(M=>M.name.toLowerCase().includes(ce.toLowerCase())||M.piva&&M.piva.toLowerCase().includes(ce.toLowerCase())).map(M=>n.jsxs("button",{type:"button",onClick:()=>{qe({...Se,supplierName:M.name}),ne(!1),V("")},className:"w-full px-3 py-2 text-left hover:bg-gray-100 focus:bg-gray-100 focus:outline-none",children:[n.jsx("div",{className:"font-medium",children:M.name}),M.piva&&n.jsxs("div",{className:"text-xs text-gray-500",children:["P.IVA: ",M.piva]})]},M.id)),O.filter(M=>M.name.toLowerCase().includes(ce.toLowerCase())||M.piva&&M.piva.toLowerCase().includes(ce.toLowerCase())).length===0&&n.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"Nessun fornitore trovato"})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{type:"submit",children:[l?"Aggiorna":"Aggiungi"," Prodotto"]}),n.jsx(pe,{type:"button",variant:"outline",onClick:ot,children:"Annulla"})]})]})]})]}),Re&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5 text-gray-600"}),"Ingredienti gi Utilizzati (",he.length,")"]})}),n.jsx(Je,{children:he.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Fn,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:"Nessun ingrediente utilizzato"}),n.jsx("p",{className:"text-sm",children:"Gli ingredienti scaduti spostati qui appariranno in questa sezione"})]}):n.jsx("div",{className:"space-y-3",children:he.map(M=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border rounded-lg opacity-75",children:[n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-700",children:M.name}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 mt-1",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[" ",M.category]}),n.jsxs("span",{children:[" Scaduto: ",new Date(M.originalExpiryDate).toLocaleDateString("it-IT")]}),n.jsxs("span",{children:[" ",M.location]})]}),M.movedToUsedAt&&n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Spostato il ",new Date(M.movedToUsedAt).toLocaleDateString("it-IT")," da ",M.movedBy]})]})})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{onClick:()=>kt(M),size:"sm",className:"bg-green-600 hover:bg-green-700",children:" Reinserisci"}),n.jsx(pe,{onClick:()=>{confirm("Sei sicuro di voler eliminare definitivamente questo ingrediente?")&&Ce(Ie=>Ie.filter(_e=>_e.id!==M.id))},variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:""})]})]},M.id))})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Ordini e Spesa"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:" Lista della Spesa"}),n.jsx(pe,{onClick:()=>me(!0),disabled:W.length===0,size:"sm",variant:"outline",children:" Genera PDF"})]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:$t.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per la lista della spesa"}),n.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):$t.map(M=>{const Ie=W.includes(M.id);return n.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:Ie,onChange:()=>fr(M.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm",children:M.name}),n.jsx("div",{className:"text-xs text-gray-500",children:M.location})]})]},M.id)})}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Prodotti selezionati: ",W.length]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:" Gestione Ordini"}),n.jsx(pe,{onClick:()=>R(!0),disabled:xe.length===0,size:"sm",variant:"outline",children:" Crea Ordine"})]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:$t.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per gli ordini"}),n.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):$t.map(M=>{const Ie=xe.includes(M.id);return n.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:Ie,onChange:()=>nn(M.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm",children:M.name}),n.jsx("div",{className:"text-xs text-gray-500",children:M.location})]})]},M.id)})}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Prodotti selezionati: ",xe.length]})]})]})})]}),!a&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Categorie di Prodotti"]})}),n.jsxs(Je,{children:[n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:Dr.map(M=>{const Ie=Mg.filter(_e=>_e.category===M.id);return n.jsx("div",{className:"space-y-2",children:n.jsxs("button",{onClick:()=>g(x===M.id?"":M.id),className:`w-full p-4 text-left rounded-lg border-2 transition-colors ${x===M.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[n.jsx("div",{className:`inline-flex px-2 py-1 text-xs rounded-full ${M.color} mb-2`,children:M.name}),n.jsx("div",{className:"text-sm font-medium",children:M.temp}),n.jsx("div",{className:"text-xs text-gray-600",children:M.storage}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Ie.length," prodotti"]})]})},M.id)})}),x&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("h4",{className:"font-medium mb-3",children:["Prodotti ",(We=Dr.find(M=>M.id===x))==null?void 0:We.name,":"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Mg.filter(M=>M.category===x).map(M=>n.jsx("button",{onClick:()=>Pt(M),className:"p-3 text-left bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm text-green-900",children:M.name}),n.jsx("div",{className:"text-xs text-green-700 mt-1",children:i.length>0?yt(M.category):"Nessun frigorifero registrato"}),M.allergens.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:M.allergens.map(Ie=>{const _e=Yl.find(it=>it.id===Ie);return n.jsx("span",{className:`px-1 py-0.5 text-xs rounded ${_e==null?void 0:_e.color}`,children:_e==null?void 0:_e.name},Ie)})})]}),n.jsx(wr,{className:"h-4 w-4 text-green-600 group-hover:text-green-800"})]})},M.id))})]}),!x&&n.jsxs("div",{className:"text-center py-6 text-gray-500",children:[n.jsx(Fn,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"Seleziona una categoria sopra per vedere i prodotti disponibili"})]})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(ut,{children:["Prodotti nell'inventario (",$t.length,")"]}),n.jsx("div",{className:"flex gap-2",children:e.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(pe,{onClick:()=>_(!0),className:"flex items-center gap-2",variant:"outline",children:" Rimuovi Prodotti"}),n.jsx(pe,{onClick:()=>ae(!0),className:"flex items-center gap-2",variant:"destructive",children:" Cancella Tutto l'Inventario"})]})})]})}),n.jsx(Je,{children:$t.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-gray-600",children:e.length===0?"Inventario vuoto. Inizia aggiungendo prodotti con i pulsanti categoria sopra!":"Nessun prodotto trovato con i filtri attuali"})]}):n.jsx("div",{className:"space-y-3",children:$t.map(M=>{const Ie=Dr.find(it=>it.id===M.category),_e=Ke(M.expiryDate);return n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-medium",children:M.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ie==null?void 0:Ie.color}`,children:Ie==null?void 0:Ie.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_e.color}`,children:_e.label})]}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("div",{children:[" ",M.location]}),n.jsxs("div",{children:[" Scade: ",new Date(M.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("div",{className:"flex flex-wrap gap-4 mt-2 pt-2 border-t border-gray-100",children:[M.lotNumber&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-blue-600",children:""}),n.jsx("span",{className:"font-medium",children:"Lotto:"}),n.jsx("span",{children:M.lotNumber})]}),M.batchDeliveryDate&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-green-600",children:""}),n.jsx("span",{className:"font-medium",children:"Consegna:"}),n.jsx("span",{children:new Date(M.batchDeliveryDate).toLocaleDateString("it-IT")})]}),M.supplierName&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-purple-600",children:""}),n.jsx("span",{className:"font-medium",children:"Fornitore:"}),n.jsx("span",{children:M.supplierName})]}),M.associatedOrderId&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("span",{className:"text-orange-600",children:""}),n.jsx("span",{className:"font-medium",children:"Fattura:"}),n.jsx("span",{children:M.associatedOrderId})]})]}),M.allergens&&M.allergens.length>0&&n.jsxs("div",{className:"flex gap-1 flex-wrap",children:[n.jsx("span",{children:""}),M.allergens.map(it=>{const bt=Yl.find(Ge=>Ge.id===it);return n.jsx("span",{className:`px-2 py-1 text-xs rounded ${bt==null?void 0:bt.color}`,children:bt==null?void 0:bt.name},it)})]}),M.addedByName&&n.jsxs("div",{className:"text-xs text-gray-500",children:["Aggiunto da: ",M.addedByName,"  ",new Date(M.createdAt).toLocaleDateString("it-IT")]})]})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>mt(M),children:n.jsx(Ro,{className:"h-4 w-4"})}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>Ve(M.id),className:"text-red-600 hover:text-red-800",children:n.jsx(Wn,{className:"h-4 w-4"})})]})]})},M.id)})})})]}),ee&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-4xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-xl font-bold",children:" Rimuovi Prodotti"}),n.jsx(pe,{onClick:()=>{_(!1),we(""),de(""),ze(""),$("")},variant:"outline",size:"sm",children:" Chiudi"})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"relative mb-4",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca prodotti da rimuovere...",value:ue,onChange:M=>we(M.target.value),className:"w-full pl-10"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[n.jsxs("select",{value:Q,onChange:M=>de(M.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le categorie"}),Dr.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]}),n.jsxs("select",{value:ie,onChange:M=>ze(M.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"expired",children:"Scaduti"}),n.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),n.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]}),n.jsxs("select",{value:P,onChange:M=>$(M.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutti gli allergeni"}),Yl.map(M=>n.jsx("option",{value:M.id,children:M.name},M.id))]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Seleziona i prodotti da rimuovere dall'inventario:"}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:$t.filter(M=>{var Ge,Gt;const Ie=!ue||M.name.toLowerCase().includes(ue.toLowerCase())||((Ge=M.location)==null?void 0:Ge.toLowerCase().includes(ue.toLowerCase()))||((Gt=Dr.find(_t=>_t.id===M.category))==null?void 0:Gt.name.toLowerCase().includes(ue.toLowerCase())),_e=!Q||M.category===Q;let it=!0;ie&&(it=Ke(M.expiryDate).status===ie);const bt=!P||M.allergens&&M.allergens.includes(P);return Ie&&_e&&it&&bt}).map(M=>{const Ie=D.includes(M.id);return n.jsxs("div",{className:"flex items-center p-2 border rounded",children:[n.jsx("input",{type:"checkbox",checked:Ie,onChange:()=>Ht(M.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:M.name}),n.jsx("div",{className:"text-sm text-gray-500",children:M.location})]})]},M.id)})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs(pe,{onClick:Tt,disabled:D.length===0,variant:"destructive",children:[" Rimuovi Selezionati (",D.length,")"]}),n.jsx(pe,{onClick:()=>{_(!1),we(""),de(""),ze(""),$("")},variant:"outline",size:"sm",children:" Chiudi"})]})]})}),q&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:" Conferma Cancellazione"}),n.jsxs("p",{className:"text-gray-700 mb-6",children:["Sei sicuro di voler ",n.jsx("strong",{children:"cancellare tutto l'inventario"}),"? Questa operazione canceller ",n.jsx("strong",{children:"tutti gli ingredienti registrati nell'app"}),"e ",n.jsx("strong",{children:"non pu essere annullata"}),"."]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pe,{onClick:vt,variant:"destructive",children:" S, Cancella Tutto"}),n.jsx(pe,{onClick:()=>ae(!1),variant:"outline",children:"Annulla"})]})]})}),te&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:" Lista della Spesa"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-gray-600 mb-4",children:["Prodotti selezionati per la lista della spesa (",W.length,"):"]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.filter(M=>W.includes(M.id)).map(M=>{const Ie=Dr.find(_e=>_e.id===M.category);return n.jsx("div",{className:"p-3 border rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:M.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[Ie==null?void 0:Ie.name,"  ",M.location]})]}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ie==null?void 0:Ie.color}`,children:Ie==null?void 0:Ie.name})]})},M.id)})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pe,{onClick:zt,className:"flex-1",children:" Genera PDF"}),n.jsx(pe,{onClick:()=>{me(!1),H([])},variant:"outline",children:"Annulla"})]})]})}),K&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:" Crea Nuovo Ordine"}),n.jsxs("form",{onSubmit:Bn,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{children:"Numero Ordine *"}),n.jsx(st,{value:ge.orderId,onChange:M=>Pe({...ge,orderId:M.target.value}),placeholder:"es. ORD-2024-001",required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Fornitore *"}),n.jsx(st,{value:ge.supplierName,onChange:M=>Pe({...ge,supplierName:M.target.value}),placeholder:"es. Fornitore ABC",required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Data Ordine *"}),n.jsx(st,{type:"date",value:ge.orderDate,onChange:M=>Pe({...ge,orderDate:M.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Data Consegna Prevista *"}),n.jsx(st,{type:"date",value:ge.expectedDelivery,onChange:M=>Pe({...ge,expectedDelivery:M.target.value}),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Note"}),n.jsx(st,{value:ge.notes,onChange:M=>Pe({...ge,notes:M.target.value}),placeholder:"Note aggiuntive sull'ordine..."})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("h3",{className:"font-medium mb-3",children:["Prodotti selezionati (",xe.length,"):"]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e.filter(M=>xe.includes(M.id)).map(M=>{const Ie=Dr.find(_e=>_e.id===M.category);return n.jsx("div",{className:"p-2 border rounded",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:M.name}),n.jsx("div",{className:"text-xs text-gray-600",children:M.location})]}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Ie==null?void 0:Ie.color}`,children:Ie==null?void 0:Ie.name})]})},M.id)})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pe,{type:"submit",className:"flex-1",children:" Crea Ordine"}),n.jsx(pe,{onClick:()=>{R(!1),C([]),Pe({orderId:"",supplierName:"",orderDate:"",expectedDelivery:"",notes:""})},variant:"outline",children:"Annulla"})]})]})]})}),n.jsxs(He,{className:"mt-6",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"h-5 w-5 text-blue-600"})," Riferimenti Normativi EU/ASL"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"text-sm text-gray-700 space-y-3",children:[n.jsx("p",{className:"font-medium text-gray-800",children:"Le temperature di conservazione suggerite sono basate sulle seguenti normative europee e italiane:"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:" Regolamento (CE) 853/2004"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:"Allegato III - Requisiti specifici per alimenti di origine animale"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni fresche: 7C (frattaglie 3C)"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pollame: 4C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni macinate: 2C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pesce fresco: vicino al ghiaccio in fusione"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Latte crudo: 6C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Ovoprodotti: 4C"}),n.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800",children:" Leggi il regolamento completo"})]}),n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:" DPR 327/80 (Italia)"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:"Prassi storiche richiamate da ASL"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti cotti da mantenere caldi: +6065C"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti facilmente deperibili: +4C"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Uova in guscio: temperatura costante"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Evitare sbalzi termici"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Proteggere da sole e odori"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Rispettare etichette produttore"})]})]}),n.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:" Direttiva 89/108/CEE (Surgelati)"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Catena del freddo continua a -18C"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Non ricongelare dopo decongelamento"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Brevi fluttuazioni ammesse nel trasporto"}),n.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 underline text-xs hover:text-purple-800",children:" Leggi la direttiva completa"})]}),n.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:" Note Importanti"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Le temperature suggerite sono indicative e basate su normative EU/ASL"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Rispettare sempre le indicazioni specifiche del produttore"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" In caso di dubbi, consultare le autorit sanitarie locali (ASL)"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Mantenere aggiornate le procedure HACCP aziendali"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Documentare eventuali deviazioni dalle temperature standard"})]})]})})]}),n.jsx(pN,{customCategories:Y,setCustomCategories:ht,showCustomCategoryManager:Qe,setShowCustomCategoryManager:Fe})]})}function x4({productLabels:e=[],setProductLabels:t,products:r=[],currentUser:i}){var vs,Aa,Zs,Pr,na,Xn,La,ys;const[a,s]=re.useState("scanner"),[l,c]=re.useState(!1),[u,m]=re.useState("");re.useState(null);const[x,g]=re.useState(""),[v,p]=re.useState(!1),[j,w]=re.useState(!1),[A,N]=re.useState(null),[b,L]=re.useState(!1),[G,ne]=re.useState(null),[ce,V]=re.useState(!1),[O,J]=re.useState([]),[ee,_]=re.useState(!1),[D,E]=re.useState([]),[q,ae]=re.useState(!1),[ue,we]=re.useState(""),[Q,de]=re.useState([]),[ie,ze]=re.useState(null),[P,$]=re.useState(!1),[W,H]=re.useState([]),[te,me]=re.useState(""),[xe,C]=re.useState(""),[K,R]=re.useState(""),[he,Ce]=re.useState(1),[Re,Ne]=re.useState(20),[Y,ht]=re.useState(new Set),[Qe,Fe]=re.useState("medium"),[ge,Pe]=re.useState(!1),[Se,qe]=re.useState([]),[$e,Ke]=re.useState([]),[ot,yt]=re.useState(""),[Pt,lt]=re.useState(!1),[mt,Ve]=re.useState(null),[Vt,kt]=re.useState(""),[Ht,Tt]=re.useState(null);re.useState(null),re.useState(!1);const[vt,hn]=re.useState(!1),[zt,fr]=re.useState(!1);re.useState("");const[nn,Bn]=re.useState(!1),[$t,Bt]=re.useState(""),[We,M]=re.useState({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]});re.useEffect(()=>{Ys(),Ie()},[e]);const Ie=()=>{const B=localStorage.getItem("haccp-label-groups");B&&de(JSON.parse(B))},_e=B=>{de(B),localStorage.setItem("haccp-label-groups",JSON.stringify(B))},it=()=>{_(!ee),E([])},bt=B=>{E(ke=>ke.includes(B)?ke.filter(Be=>Be!==B):[...ke,B])},Ge=()=>{const B=ea.map(ke=>ke.id);E(B)},Gt=()=>{E([])},_t=()=>{if(D.length===0){alert("Seleziona almeno una etichetta");return}ae(!0)},Wt=()=>{if(!ue.trim()){alert("Inserisci un nome per il gruppo");return}const ke=e.filter(ft=>D.includes(ft.id)).reduce((ft,Nt)=>{const It=new Date(Nt.createdAt);return It>ft?It:ft},new Date(0)),Be={id:`group_${Date.now()}`,name:ue,labelIds:D,labelCount:D.length,createdAt:new Date().toISOString(),createdBy:i.name,lastUpdate:ke.toISOString()},jt=[...Q,Be];_e(jt),E([]),_(!1),ae(!1),we("")},Jt=()=>{const B=prompt("Nome del nuovo gruppo:");if(!B)return;const ke={id:`group_${Date.now()}`,name:B,labelIds:[],labelCount:0,createdAt:new Date().toISOString(),createdBy:i.name,lastUpdate:new Date().toISOString()},Be=[...Q,ke];_e(Be)},qt=B=>Q.find(ke=>ke.labelIds.includes(B)),qn=()=>{if(!ie)return;const B=e.filter(ke=>!ie.labelIds.includes(ke.id));qe(B),Ke([]),yt(""),Pe(!0)},qr=()=>{if(!ie||$e.length===0)return;const B=[],ke=[];if($e.forEach(ft=>{var It;const Nt=qt(ft);Nt&&ke.push({labelId:ft,labelName:(It=e.find(fn=>fn.id===ft))==null?void 0:It.productName,fromGroup:Nt.name}),B.push(ft)}),ke.length>0){const ft=ke.map(It=>` "${It.labelName}" verr spostata da "${It.fromGroup}"`).join(`
`);if(!confirm(`ATTENZIONE: Le seguenti etichette verranno spostate:

${ft}

Continuare?`))return}const Be=Q.map(ft=>{if(ft.id===ie.id){const Nt=[...ft.labelIds,...B],It=[...new Set(Nt)];return{...ft,labelIds:It,labelCount:It.length,lastUpdate:new Date().toISOString()}}else{const Nt=ft.labelIds.filter(It=>!B.includes(It));return{...ft,labelIds:Nt,labelCount:Nt.length,lastUpdate:Nt.length!==ft.labelIds.length?new Date().toISOString():ft.lastUpdate}}});_e(Be);const jt=Be.find(ft=>ft.id===ie.id);ze(jt),Pe(!1),Ke([])},pr=B=>{Ke(ke=>ke.includes(B)?ke.filter(Be=>Be!==B):[...ke,B])},$r=()=>{const B=Se.filter(ke=>ke.productName.toLowerCase().includes(ot.toLowerCase())||ke.barcode.includes(ot)||ke.lotNumber.toLowerCase().includes(ot.toLowerCase())).map(ke=>ke.id);Ke(B)},Ur=()=>{ie&&(Ve(ie),kt(ie.name),lt(!0))},Ar=()=>{if(!Vt.trim()||!mt)return;const B=Q.map(ke=>ke.id===mt.id?{...ke,name:Vt.trim(),lastUpdate:new Date().toISOString()}:ke);_e(B),ie&&ie.id===mt.id&&ze({...ie,name:Vt.trim(),lastUpdate:new Date().toISOString()}),lt(!1),Ve(null),kt("")},ti=B=>{Ve(B),kt(B.name),lt(!0)},Lr=B=>{const ke=e.find(Nt=>Nt.id===B);if(!ke||!confirm(`Eliminare l'etichetta "${ke.productName}"?

Questa azione non pu essere annullata.`))return;const jt=e.filter(Nt=>Nt.id!==B);t(jt),localStorage.setItem("haccp-product-labels",JSON.stringify(jt));const ft=Q.map(Nt=>({...Nt,labelIds:Nt.labelIds.filter(It=>It!==B),labelCount:Nt.labelIds.filter(It=>It!==B).length,lastUpdate:Nt.labelIds.includes(B)?new Date().toISOString():Nt.lastUpdate}));if(_e(ft),ie&&ie.labelIds.includes(B)){const Nt=ft.find(It=>It.id===ie.id);ze(Nt)}},Dn=[{id:"latticini",name:"Latticini e Formaggi",color:"bg-blue-100 text-blue-800",emoji:""},{id:"carni",name:"Carni e Salumi",color:"bg-red-100 text-red-800",emoji:""},{id:"verdure",name:"Verdure e Ortaggi",color:"bg-green-100 text-green-800",emoji:""},{id:"frutta",name:"Frutta Fresca",color:"bg-orange-100 text-orange-800",emoji:""},{id:"pesce",name:"Pesce e Frutti di Mare",color:"bg-cyan-100 text-cyan-800",emoji:""},{id:"surgelati",name:"Surgelati",color:"bg-indigo-100 text-indigo-800",emoji:""},{id:"dispensa",name:"Dispensa Secca",color:"bg-yellow-100 text-yellow-800",emoji:""},{id:"condimenti",name:"Oli e Condimenti",color:"bg-amber-100 text-amber-800",emoji:""}],Ki=B=>{Ht===B?Tt(null):(Tt(B),ze(null))},ja=()=>{$(!P),H([])},Zi=B=>{H(ke=>ke.includes(B)?ke.filter(Be=>Be!==B):[...ke,B])},Sa=()=>{const B=ni.map(ke=>ke.id);H(B)},Ca=()=>{H([])},Ys=()=>{const B=new Date,ke=e.filter(Be=>new Date(Be.expiryDate)<B&&Be.photo);ke.length>0&&(J(ke),V(!0))},ul=()=>{p(!0),setTimeout(()=>{const B=["8001234567890","8001234567891","8001234567892","8001234567893","8001234567894"],ke=B[Math.floor(Math.random()*B.length)];g(ke),M(Be=>({...Be,barcode:ke})),p(!1),c(!0)},2e3)},dl=()=>{if(!We.productName||!We.expiryDate){alert("Nome prodotto e data scadenza sono obbligatori");return}fr(!0)},ka=()=>{const B={id:`label_${Date.now()}`,...We,createdAt:new Date().toISOString(),createdBy:i.name,status:"active"},ke=[...e,B];t(ke),localStorage.setItem("haccp-product-labels",JSON.stringify(ke));const Be={id:`prod_${Date.now()}`,name:We.productName,category:We.category.startsWith("group_")?"latticini":We.category,expiryDate:We.expiryDate,location:We.location||"Posizione da definire",allergens:We.allergens||[],notes:`${We.notes?We.notes+" - ":""}Generato automaticamente da etichetta. Lotto: ${We.lotNumber||"N/A"}`,addedBy:i==null?void 0:i.id,addedByName:i==null?void 0:i.name,createdAt:new Date().toISOString(),status:"active",fromLabel:!0,labelId:B.id,barcode:We.barcode,lotNumber:We.lotNumber||"",batchDeliveryDate:"",associatedOrderId:"",supplierName:""},ft=[...JSON.parse(localStorage.getItem("haccp-products")||"[]"),Be];if(localStorage.setItem("haccp-products",JSON.stringify(ft)),We.category&&We.category.startsWith("group_")){const Nt=We.category.replace("group_",""),It=Q.map(fn=>fn.id===Nt?{...fn,labelIds:[...fn.labelIds,B.id],labelCount:fn.labelCount+1,lastUpdate:new Date().toISOString()}:fn);_e(It)}M({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]}),c(!1),g(""),fr(!1)},Qs=B=>{const ke=B.target.files[0];if(ke){const Be=new FileReader;Be.onload=jt=>{const ft=new Image;ft.onload=()=>{const Nt=document.createElement("canvas"),It=Nt.getContext("2d"),fn=800,Fi=600;let{width:Ft,height:gr}=ft;Ft>gr?Ft>fn&&(gr=gr*fn/Ft,Ft=fn):gr>Fi&&(Ft=Ft*Fi/gr,gr=Fi),Nt.width=Ft,Nt.height=gr,It.drawImage(ft,0,0,Ft,gr);const Pa=Nt.toDataURL("image/jpeg",.7);M(eo=>({...eo,photo:Pa}))},ft.src=jt.target.result},Be.readAsDataURL(ke)}},hl=B=>{N(B),w(!0)},xs=()=>{const B=e.map(ke=>O.some(Be=>Be.id===ke.id)?{...ke,photo:null,cleanedAt:new Date().toISOString()}:ke);t(B),localStorage.setItem("haccp-product-labels",JSON.stringify(B)),V(!1),J([])},ea=e.filter(B=>{if(ie)return ie.labelIds.includes(B.id);if(Ht){const ke=B.category===Ht,Be=B.productName.toLowerCase().includes(u.toLowerCase())||B.barcode.includes(u)||B.lotNumber.toLowerCase().includes(u.toLowerCase());return ke&&Be}return B.productName.toLowerCase().includes(u.toLowerCase())||B.barcode.includes(u)||B.lotNumber.toLowerCase().includes(u.toLowerCase())}),ni=e.filter(B=>{if(!B.photo)return!1;const ke=!te||B.productName.toLowerCase().includes(te.toLowerCase())||B.barcode.includes(te)||B.lotNumber.toLowerCase().includes(te.toLowerCase()),Be=!xe||new Date(B.createdAt).toDateString()===new Date(xe).toDateString(),jt=!K||(()=>{const ft=new Date(B.expiryDate),It=Math.ceil((ft-new Date)/(1e3*60*60*24));switch(K){case"expired":return It<0;case"expiring":return It>=0&&It<=7;case"fresh":return It>7;default:return!0}})();return ke&&Be&&jt}),Tn=Math.ceil(ni.length/Re),ri=ni.slice((he-1)*Re,he*Re),ml=(B,ke=Qe)=>{if(!B)return"";if(B.startsWith("data:image/")&&ke==="low"&&B.length>5e4){const Be=document.createElement("canvas"),jt=Be.getContext("2d"),ft=new Image;return new Promise(Nt=>{ft.onload=()=>{Be.width=Math.min(ft.width,200),Be.height=Math.min(ft.height,200),jt.drawImage(ft,0,0,Be.width,Be.height),Nt(Be.toDataURL("image/jpeg",.5))},ft.src=B})}return B};re.useEffect(()=>{const B=e.filter(ke=>ke.photo).map(ke=>ke.id);ht(new Set(B))},[e]),re.useEffect(()=>{Ce(1)},[te,xe,K]);const mn=()=>{const B=ri.map(ke=>ke.id);H(ke=>[...new Set([...ke,...B])])},Ks=()=>{const B=e.filter(jt=>jt.photo).length,ke=B>100,Be=B>500;return{totalPhotos:B,isLargeDataset:ke,isVeryLargeDataset:Be,recommendedPhotosPerPage:Be?12:ke?20:50}},ta={total:e.length,withPhotos:e.filter(B=>B.photo).length,expiringSoon:e.filter(B=>{const ke=new Date(B.expiryDate),jt=Math.ceil((ke-new Date)/(1e3*60*60*24));return jt<=7&&jt>=0}).length,expired:e.filter(B=>new Date(B.expiryDate)<new Date).length};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(nc,{className:"h-5 w-5"}),"Gestione Etichette Prodotti"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ta.total}),n.jsx("div",{className:"text-sm text-blue-700",children:"Etichette Totali"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:ta.withPhotos}),n.jsx("div",{className:"text-sm text-green-700",children:"Con Foto"})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:ta.expiringSoon}),n.jsx("div",{className:"text-sm text-yellow-700",children:"In Scadenza"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:ta.expired}),n.jsx("div",{className:"text-sm text-red-700",children:"Scaduti"})]})]})})]}),n.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[n.jsxs(pe,{variant:a==="scanner"?"default":"outline",onClick:()=>s("scanner"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(sg,{className:"h-4 w-4"}),"Scanner"]}),n.jsxs(pe,{variant:a==="labels"?"default":"outline",onClick:()=>s("labels"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(Fu,{className:"h-4 w-4"}),"Le Mie Etichette"]}),n.jsxs(pe,{variant:a==="photos"?"default":"outline",onClick:()=>s("photos"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(So,{className:"h-4 w-4"}),"Foto Prodotti"]})]}),a==="scanner"&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Y2,{className:"h-5 w-5"}),"Scanner Codici a Barre"]})}),n.jsx(Je,{className:"space-y-4",children:n.jsx("div",{className:"text-center",children:v?n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"animate-pulse",children:n.jsx(nc,{className:"h-20 w-20 text-blue-500"})}),n.jsx("p",{className:"text-blue-600",children:"Scansione in corso..."})]}):n.jsxs("div",{className:"space-y-4",children:[x?n.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:n.jsxs("p",{className:"text-green-700",children:["Codice scansionato: ",n.jsx("strong",{children:x})]})}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-gray-300 rounded-lg",children:[n.jsx(nc,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:'Clicca "Avvia Scanner" per leggere un codice a barre'})]}),n.jsxs(pe,{onClick:ul,disabled:v,className:"w-full",children:[n.jsx(sg,{className:"h-4 w-4 mr-2"}),"Avvia Scanner"]}),x&&n.jsxs(pe,{onClick:()=>c(!0),variant:"outline",className:"w-full",children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Crea Etichetta per questo Prodotto"]})]})})})]}),a==="labels"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:ie?`Cerca in "${ie.name}"...`:Ht?`Cerca in "${(vs=Dn.find(B=>B.id===Ht))==null?void 0:vs.name}"...`:"Cerca per nome, codice, lotto...",value:u,onChange:B=>m(B.target.value),className:"pl-10"})]})}),n.jsxs(pe,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[n.jsx(wr,{className:"h-4 w-4"}),"Nuova Etichetta"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(pe,{onClick:it,variant:ee?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(ig,{className:"h-4 w-4"}),ee?"Annulla Selezione":"Seleziona Etichette"]}),ee&&n.jsxs(n.Fragment,{children:[n.jsxs(pe,{onClick:Ge,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Tu,{className:"h-4 w-4"}),"Seleziona Tutto"]}),n.jsxs(pe,{onClick:Gt,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),n.jsxs(pe,{onClick:_t,variant:"default",size:"sm",className:"flex items-center gap-2",disabled:D.length===0,children:[n.jsx(eN,{className:"h-4 w-4"}),"Crea Gruppo (",D.length,")"]})]}),!ie&&!ee&&n.jsxs(pe,{onClick:Jt,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(ag,{className:"h-4 w-4"}),"Crea Gruppo di Etichette"]}),!ie&&ee&&D.length>0&&n.jsxs(pe,{onClick:()=>Bn(!0),variant:"default",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Ui,{className:"h-4 w-4"}),"Sposta Etichette nel Gruppo..."]}),ie&&n.jsxs(n.Fragment,{children:[n.jsxs(pe,{onClick:qn,variant:"default",size:"sm",className:"flex items-center gap-2",children:[n.jsx(wr,{className:"h-4 w-4"}),"Aggiungi Etichette al Gruppo"]}),n.jsxs(pe,{onClick:Ur,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-4 w-4"}),"Modifica Gruppo"]}),n.jsxs(pe,{onClick:()=>ze(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),'Esci da "',ie.name,'"']})]}),Ht&&n.jsxs(pe,{onClick:()=>Tt(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),'Esci da "',(Aa=Dn.find(B=>B.id===Ht))==null?void 0:Aa.name,'"']})]}),ee&&D.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[D.length," etichett",D.length===1?"a selezionata":"e selezionate"]})})]})})}),!ie&&!Ht&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Ui,{className:"h-5 w-5"}),"I Miei Gruppi di Etichette"]}),Q.length>0&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca gruppi ed etichette...",value:$t,onChange:B=>Bt(B.target.value),className:"pl-10 w-64"})]})})]})}),n.jsxs(Je,{children:[$t&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(Qa,{className:"h-4 w-4"}),'Risultati Ricerca: "',$t,'"']}),(()=>{const B=Q.filter(Be=>Be.name.toLowerCase().includes($t.toLowerCase())),ke=e.filter(Be=>Be.productName.toLowerCase().includes($t.toLowerCase())||Be.barcode.includes($t)||Be.lotNumber.toLowerCase().includes($t.toLowerCase()));return B.length===0&&ke.length===0?n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun risultato trovato"})}):n.jsxs("div",{className:"space-y-4",children:[B.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[n.jsx(Ui,{className:"h-3 w-3"}),"GRUPPI (",B.length,")"]}),n.jsx("div",{className:"grid gap-2",children:B.map(Be=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-blue-50 border-blue-200",onClick:()=>{ze(Be),Bt("")},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[n.jsx(Ui,{className:"h-3 w-3"}),"GRUPPO"]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Be.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Be.labelIds.length," etichette"]})]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:"Click per aprire"})]},Be.id))})]}),ke.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[n.jsx(Fn,{className:"h-3 w-3"}),"ETICHETTE (",ke.length,")"]}),n.jsxs("div",{className:"grid gap-2",children:[ke.slice(0,5).map(Be=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-green-50 border-green-200",onClick:()=>{N(Be),w(!0),Bt("")},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:[n.jsx(Fn,{className:"h-3 w-3"}),"ETICHETTA"]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Be.productName}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Scadenza: ",Be.expiryDate,"  Lotto: ",Be.lotNumber]})]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:"Click per visualizzare"})]},Be.id)),ke.length>5&&n.jsx("div",{className:"text-center py-2",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["... e altre ",ke.length-5," etichette"]})})]})]})]})})(),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>Bt(""),className:"w-full",children:[n.jsx(un,{className:"h-4 w-4 mr-2"}),"Chiudi Ricerca"]})})]}),!$t&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(Fu,{className:"h-4 w-4"}),"Categorie Ingredienti (Scelte Rapide)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Dn.map(B=>{const Be=e.filter(jt=>jt.category===B.id).length;return n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>Ki(B.id),className:`flex items-center gap-2 ${Be>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:Be===0,children:[n.jsx("span",{className:"text-lg",children:B.emoji}),n.jsx("span",{className:"hidden sm:inline",children:B.name}),n.jsx("span",{className:"sm:hidden",children:B.name.split(" ")[0]}),Be>0&&n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${B.color} ml-1`,children:Be})]},B.id)})}),n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su una categoria per vedere le relative etichette"})]}),Q.length>0&&n.jsx("div",{className:"border-t border-gray-200 my-4"}),Q.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(Fu,{className:"h-4 w-4"}),"Gruppi Personalizzati (Scelte Rapide)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Q.map(B=>{const ke=B.labelIds.length;return n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>ze(B),className:`flex items-center gap-2 ${ke>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:ke===0,children:[n.jsx(Ui,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:B.name}),n.jsx("span",{className:"sm:hidden",children:B.name.split(" ")[0]}),ke>0&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 ml-1",children:ke})]},B.id)})}),n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su un gruppo per vedere le relative etichette"})]}),!$t&&n.jsx("div",{className:"border-t border-gray-200 my-4"}),!$t&&n.jsx("div",{children:n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(br,{className:"h-4 w-4"}),"Gestione Gruppi Personalizzati"]})}),!$t&&n.jsx("div",{className:"grid gap-3",children:Q.map(B=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 hover:shadow-md cursor-pointer transition-all",onClick:()=>ze(B),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ui,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:B.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[B.labelCount," etichett",B.labelCount===1?"a":"e","  Ultimo aggiornamento: ",new Date(B.lastUpdate).toLocaleDateString("it-IT")]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{variant:"outline",size:"sm",onClick:ke=>{ke.stopPropagation(),ti(B)},title:"Modifica gruppo",children:n.jsx(br,{className:"h-4 w-4"})}),n.jsx(pe,{variant:"outline",size:"sm",onClick:ke=>{if(ke.stopPropagation(),confirm(`Eliminare il gruppo "${B.name}"? Le etichette non verranno eliminate.`)){const Be=Q.filter(jt=>jt.id!==B.id);_e(Be)}},title:"Elimina gruppo",children:n.jsx(Wn,{className:"h-4 w-4"})})]})]},B.id))}),!$t&&Q.length===0&&n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo personalizzato creato ancora."}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Usa "Seleziona Etichette" per creare gruppi dalle etichette esistenti'})]})]})]}),n.jsxs(n.Fragment,{children:[ie&&n.jsx(He,{children:n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Ui,{className:"h-5 w-5 text-blue-600"}),"Gruppo: ",n.jsx("span",{className:"text-blue-600",children:ie.name}),n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",ie.labelIds.length," etichette)"]})]})})}),Ht&&n.jsx(He,{children:n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Fu,{className:"h-5 w-5 text-green-600"}),"Categoria: ",n.jsx("span",{className:"text-green-600",children:(Zs=Dn.find(B=>B.id===Ht))==null?void 0:Zs.name}),n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",ea.length," etichette)"]})]})})}),n.jsx(He,{children:n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Etichette Registrate",n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",ea.length," totali)"]})]})})})]}),n.jsxs("div",{className:"grid gap-4",children:[ea.map(B=>{var fn,Fi;const ke=new Date(B.expiryDate),Be=new Date,jt=Math.ceil((ke-Be)/(1e3*60*60*24)),ft=ke<Be,Nt=jt<=7&&jt>=0,It=D.includes(B.id);return n.jsx(He,{className:`${ft?"border-red-200 bg-red-50":Nt?"border-yellow-200 bg-yellow-50":""} ${It?"ring-2 ring-blue-500":""} ${ee?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>ee&&bt(B.id),children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex justify-between items-start",children:[ee&&n.jsx("div",{className:"mr-3 mt-1",children:n.jsx("input",{type:"checkbox",checked:It,onChange:()=>bt(B.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:B.productName}),B.photo&&n.jsx(So,{className:"h-4 w-4 text-blue-500"}),ft&&n.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"SCADUTO"}),Nt&&!ft&&n.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"IN SCADENZA"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",B.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",B.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(B.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Categoria:"})," ",((fn=Dn.find(Ft=>Ft.id===B.category))==null?void 0:fn.name)||((Fi=Q.find(Ft=>Ft.id===B.category))==null?void 0:Fi.name)||B.category||"Non specificata"]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("strong",{children:"Gruppo:"})," ",(()=>{const Ft=qt(B.id);return Ft?n.jsxs("span",{className:"inline-flex items-center gap-1 ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[n.jsx(Ui,{className:"h-3 w-3"}),Ft.name]}):n.jsx("span",{className:"text-gray-400 ml-2",children:"Nessun gruppo"})})()]})]}),B.location&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("strong",{children:"Posizione:"})," ",B.location]}),B.notes&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("strong",{children:"Note:"})," ",B.notes]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Creata da ",B.createdBy," il ",new Date(B.createdAt).toLocaleDateString("it-IT")]})]}),n.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[n.jsxs(pe,{size:"sm",variant:"outline",onClick:Ft=>{Ft.stopPropagation(),N(B),w(!0)},className:"flex items-center gap-1",children:[n.jsx(tf,{className:"h-3 w-3"}),"Visualizza"]}),n.jsxs(pe,{size:"sm",onClick:Ft=>{Ft.stopPropagation(),hl(B)},className:"flex items-center gap-1",children:[n.jsx(Gs,{className:"h-3 w-3"}),"Download"]}),B.photo&&n.jsxs(pe,{size:"sm",variant:"outline",onClick:Ft=>{Ft.stopPropagation(),ne(B.photo),L(!0)},className:"flex items-center gap-1",children:[n.jsx(So,{className:"h-3 w-3"}),"Foto"]}),n.jsxs(pe,{size:"sm",variant:"destructive",onClick:Ft=>{Ft.stopPropagation(),Lr(B.id)},className:"flex items-center gap-1",children:[n.jsx(Wn,{className:"h-3 w-3"}),"Elimina"]})]})]})})},B.id)}),ea.length===0&&n.jsx(He,{children:n.jsxs(Je,{className:"pt-6 text-center",children:[n.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:ie?`Nessuna etichetta nel gruppo "${ie.name}"`:Ht?`Nessuna etichetta nella categoria "${(Pr=Dn.find(B=>B.id===Ht))==null?void 0:Pr.name}"`:u?"Nessuna etichetta trovata":"Nessuna etichetta creata ancora"})]})})]})]}),a==="photos"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca per nome, codice, lotto...",value:te,onChange:B=>me(B.target.value),className:"pl-10"})]}),n.jsx(st,{type:"date",placeholder:"Filtra per data creazione",value:xe,onChange:B=>C(B.target.value)}),n.jsxs("select",{value:K,onChange:B=>R(B.target.value),className:"p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"fresh",children:"Prodotti freschi (>7 giorni)"}),n.jsx("option",{value:"expiring",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"expired",children:"Scaduti"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(pe,{onClick:ja,variant:P?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(ig,{className:"h-4 w-4"}),P?"Annulla Selezione":"Seleziona Foto"]}),P&&n.jsxs(n.Fragment,{children:[n.jsxs(pe,{onClick:Sa,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Tu,{className:"h-4 w-4"}),"Seleziona Tutte (",ni.length,")"]}),n.jsxs(pe,{onClick:mn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Tu,{className:"h-4 w-4"}),"Solo Pagina Corrente (",ri.length,")"]}),n.jsxs(pe,{onClick:Ca,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),n.jsxs(pe,{variant:"destructive",size:"sm",className:"flex items-center gap-2",disabled:W.length===0,onClick:()=>{if(confirm(`Eliminare ${W.length} foto selezionate?`)){const B=e.map(ke=>W.includes(ke.id)?{...ke,photo:null}:ke);t(B),localStorage.setItem("haccp-product-labels",JSON.stringify(B)),H([]),$(!1)}},children:[n.jsx(Wn,{className:"h-4 w-4"}),"Elimina Selezionate (",W.length,")"]})]}),(te||xe||K)&&n.jsxs(pe,{onClick:()=>{me(""),C(""),R("")},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),"Cancella Filtri"]})]}),P&&W.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[W.length," foto selezionat",W.length===1?"a":"e"]})}),(te||xe||K)&&n.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:n.jsxs("p",{className:"text-yellow-700 text-sm",children:["Filtri attivi: ",ni.length," foto di ",e.filter(B=>B.photo).length]})}),(()=>{const B=Ks();return B.isLargeDataset?n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-700 text-sm font-semibold",children:["Dataset grande: ",B.totalPhotos," foto"]}),n.jsxs("p",{className:"text-blue-600 text-xs",children:["Modalit ottimizzata attiva  Pagina ",he," di ",Tn]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:Re,onChange:ke=>{Ne(Number(ke.target.value)),Ce(1)},className:"text-xs p-1 border rounded",children:[n.jsx("option",{value:12,children:"12 foto/pagina"}),n.jsx("option",{value:20,children:"20 foto/pagina"}),n.jsx("option",{value:50,children:"50 foto/pagina"}),n.jsx("option",{value:100,children:"100 foto/pagina"})]}),n.jsxs("select",{value:Qe,onChange:ke=>Fe(ke.target.value),className:"text-xs p-1 border rounded",children:[n.jsx("option",{value:"low",children:"Qualit Bassa"}),n.jsx("option",{value:"medium",children:"Qualit Media"}),n.jsx("option",{value:"high",children:"Qualit Alta"})]})]})]})}):null})()]})})}),Tn>1&&n.jsx(He,{children:n.jsxs(Je,{className:"pt-6",children:[n.jsxs("div",{className:"flex justify-center items-center gap-4",children:[n.jsx(pe,{onClick:()=>Ce(B=>Math.max(1,B-1)),disabled:he===1,variant:"outline",size:"sm",children:" Precedente"}),n.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,Tn))].map((B,ke)=>{let Be;return Tn<=5?Be=ke+1:(Be=Math.max(1,he-2)+ke,Be>Tn&&(Be=Tn-(4-ke))),n.jsx(pe,{onClick:()=>Ce(Be),variant:he===Be?"default":"outline",size:"sm",className:"w-8 h-8 p-0",children:Be},Be)})}),n.jsx(pe,{onClick:()=>Ce(B=>Math.min(Tn,B+1)),disabled:he===Tn,variant:"outline",size:"sm",children:"Successiva "})]}),n.jsx("div",{className:"text-center mt-2",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Pagina ",he," di ",Tn,"  Mostrando ",ri.length," di ",ni.length," foto"]})})]})}),n.jsx("div",{className:`grid gap-4 ${Re<=12?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":Re<=20?"grid-cols-2 md:grid-cols-4 lg:grid-cols-5":"grid-cols-3 md:grid-cols-5 lg:grid-cols-6"}`,children:ri.map(B=>{const ke=W.includes(B.id),Be=new Date(B.expiryDate),jt=new Date,ft=Math.ceil((Be-jt)/(1e3*60*60*24)),Nt=Be<jt,It=ft<=7&&ft>=0;return n.jsxs(He,{className:`overflow-hidden ${ke?"ring-2 ring-blue-500":""} ${P?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>P&&Zi(B.id),children:[n.jsxs("div",{className:"relative",children:[P&&n.jsx("div",{className:"absolute top-2 left-2 z-10",children:n.jsx("input",{type:"checkbox",checked:ke,onChange:()=>Zi(B.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),(Nt||It)&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded ${Nt?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:Nt?"SCADUTO":"SCADENZA"})}),n.jsxs("div",{className:"aspect-square bg-gray-100 cursor-pointer overflow-hidden",onClick:fn=>{P||(fn.stopPropagation(),ne(B.photo),L(!0))},children:[n.jsx("img",{src:ml(B.photo),alt:B.productName,className:"w-full h-full object-cover transition-opacity duration-200",loading:"lazy",onError:fn=>{fn.target.style.display="none",fn.target.nextSibling.style.display="flex"}}),n.jsx("div",{className:"w-full h-full hidden items-center justify-center bg-red-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx(tr,{className:"h-6 w-6 text-red-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-red-600",children:"Errore caricamento"})]})})]})]}),n.jsxs(Je,{className:"pt-4",children:[n.jsx("h4",{className:"font-semibold text-sm truncate",children:B.productName}),n.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[n.jsxs("p",{children:["Scad: ",new Date(B.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("p",{children:["Creata: ",new Date(B.createdAt).toLocaleDateString("it-IT")]}),B.lotNumber&&n.jsxs("p",{children:["Lotto: ",B.lotNumber]})]})]})]},B.id)})}),Tn>1&&ri.length>0&&n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex justify-center items-center gap-2",children:[n.jsx(pe,{onClick:()=>Ce(1),disabled:he===1,variant:"outline",size:"sm",children:"Prima"}),n.jsx(pe,{onClick:()=>Ce(B=>Math.max(1,B-1)),disabled:he===1,variant:"outline",size:"sm",children:""}),n.jsxs("span",{className:"px-4 py-2 text-sm bg-gray-100 rounded",children:[he," / ",Tn]}),n.jsx(pe,{onClick:()=>Ce(B=>Math.min(Tn,B+1)),disabled:he===Tn,variant:"outline",size:"sm",children:""}),n.jsx(pe,{onClick:()=>Ce(Tn),disabled:he===Tn,variant:"outline",size:"sm",children:"Ultima"})]})})}),ni.length===0&&e.filter(B=>B.photo).length>0&&n.jsx(He,{children:n.jsxs(Je,{className:"pt-6 text-center",children:[n.jsx(Jy,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Nessuna foto trovata con i filtri attuali"})]})}),e.filter(B=>B.photo).length===0&&n.jsx(He,{children:n.jsxs(Je,{className:"pt-6 text-center",children:[n.jsx(So,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Nessuna foto caricata ancora"})]})})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Nuova Etichetta Prodotto"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{c(!1),M({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"productName",children:"Nome Prodotto *"}),n.jsx(st,{id:"productName",value:We.productName,onChange:B=>M(ke=>({...ke,productName:B.target.value})),placeholder:"es. Mozzarella di Bufala"})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"barcode",children:"Codice a Barre"}),n.jsx(st,{id:"barcode",value:We.barcode,onChange:B=>M(ke=>({...ke,barcode:B.target.value})),placeholder:"Scansiona o inserisci manualmente"})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"expiryDate",children:"Data Scadenza *"}),n.jsx(st,{id:"expiryDate",type:"date",value:We.expiryDate,onChange:B=>M(ke=>({...ke,expiryDate:B.target.value}))})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"lotNumber",children:"Numero Lotto"}),n.jsx(st,{id:"lotNumber",value:We.lotNumber,onChange:B=>M(ke=>({...ke,lotNumber:B.target.value})),placeholder:"es. L240315A"})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"category",children:"Categoria"}),n.jsxs("select",{id:"category",value:We.category,onChange:B=>M(ke=>({...ke,category:B.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),n.jsxs("optgroup",{label:" Categorie Standard",children:[n.jsx("option",{value:"latticini",children:"Latticini e Formaggi"}),n.jsx("option",{value:"carni",children:"Carni e Salumi"}),n.jsx("option",{value:"verdure",children:"Verdure e Ortaggi"}),n.jsx("option",{value:"frutta",children:"Frutta Fresca"}),n.jsx("option",{value:"pesce",children:"Pesce e Frutti di Mare"}),n.jsx("option",{value:"surgelati",children:"Surgelati"}),n.jsx("option",{value:"dispensa",children:"Dispensa Secca"}),n.jsx("option",{value:"condimenti",children:"Oli e Condimenti"})]}),Q.length>0&&n.jsx("optgroup",{label:" I Miei Gruppi di Etichette",children:Q.map(B=>n.jsxs("option",{value:`group_${B.id}`,children:[B.name," (",B.labelCount," etichett",B.labelCount===1?"a":"e",")"]},B.id))})]})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"location",children:"Posizione"}),n.jsx(st,{id:"location",value:We.location,onChange:B=>M(ke=>({...ke,location:B.target.value})),placeholder:"es. Frigo A - Ripiano intermedio"})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Allergeni"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2 mt-2",children:ALLERGENS.map(B=>n.jsx("button",{type:"button",onClick:()=>{const ke=We.allergens.includes(B.id);M(Be=>({...Be,allergens:ke?Be.allergens.filter(jt=>jt!==B.id):[...Be.allergens,B.id]}))},className:`px-2 py-1 text-xs rounded transition-colors ${We.allergens.includes(B.id)?B.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:B.name},B.id))})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"notes",children:"Note"}),n.jsx("textarea",{id:"notes",value:We.notes,onChange:B=>M(ke=>({...ke,notes:B.target.value})),placeholder:"Note aggiuntive...",className:"w-full p-2 border border-gray-300 rounded-md h-20 resize-none"})]}),n.jsxs("div",{children:[n.jsx(et,{children:"Foto Prodotto"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:Qs,className:"w-full p-2 border border-gray-300 rounded-md"}),We.photo&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:We.photo,alt:"Preview",className:"w-full h-32 object-cover rounded-md border"}),n.jsx(pe,{size:"sm",variant:"outline",onClick:()=>M(B=>({...B,photo:null})),className:"absolute top-2 right-2",children:n.jsx(un,{className:"h-3 w-3"})})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(pe,{onClick:dl,className:"flex-1",children:[n.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Salva Etichetta"]}),n.jsx(pe,{variant:"outline",onClick:()=>{c(!1),M({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:"Annulla"})]})]})]})}),j&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-md",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Anteprima Etichetta"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>w(!1),children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsxs(Je,{children:[n.jsx("div",{className:"border-2 border-dashed border-gray-300 p-4 rounded-lg bg-white",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h2",{className:"text-lg font-bold",children:A.productName}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",A.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",A.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(A.expiryDate).toLocaleDateString("it-IT")]}),A.location&&n.jsxs("div",{children:[n.jsx("strong",{children:"Posizione:"})," ",A.location]})]}),n.jsx("div",{className:"flex justify-center my-4",children:n.jsx("div",{className:"w-16 h-16 bg-black border-2 border-gray-300 flex items-center justify-center",children:n.jsx(nc,{className:"h-12 w-12 text-white"})})}),n.jsxs("div",{className:"text-xs text-gray-600",children:["Creata il ",new Date(A.createdAt).toLocaleDateString("it-IT")]})]})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs(pe,{onClick:()=>alert("Funzione stampa in sviluppo"),children:[n.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Scarica Etichetta PDF"]})})]})]})}),b&&G&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>L(!1),className:"absolute top-4 right-4 z-10",children:n.jsx(un,{className:"h-4 w-4"})}),n.jsx("img",{src:G,alt:"Foto prodotto",className:"max-w-full max-h-full object-contain rounded-lg"})]})}),ce&&O.length>0&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-md",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5 text-orange-500"}),"Pulizia Automatica"]})}),n.jsxs(Je,{children:[n.jsxs("p",{className:"mb-4",children:["Trovati ",n.jsx("strong",{children:O.length})," prodotti scaduti con foto. Vuoi eliminare le foto per liberare spazio in memoria?"]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto mb-4",children:O.map(B=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-50 rounded",children:[n.jsx("span",{className:"text-sm",children:B.productName}),n.jsxs("span",{className:"text-xs text-red-600",children:["Scad: ",new Date(B.expiryDate).toLocaleDateString("it-IT")]})]},B.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:xs,className:"flex-1",variant:"destructive",children:[n.jsx(Wn,{className:"h-4 w-4 mr-2"}),"Elimina Foto"]}),n.jsx(pe,{variant:"outline",onClick:()=>V(!1),children:"Mantieni"})]})]})]})}),q&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-md",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Crea Nuovo Gruppo"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{ae(!1),we("")},children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"groupName",children:"Nome del Gruppo"}),n.jsx(st,{id:"groupName",value:ue,onChange:B=>we(B.target.value),placeholder:"es. Etichette Salumi",onKeyPress:B=>B.key==="Enter"&&Wt()})]}),n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo conterr ",D.length," etichett",D.length===1?"a":"e"," selezionat",D.length===1?"a":"e"]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:Wt,className:"flex-1",disabled:!ue.trim(),children:[n.jsx(ag,{className:"h-4 w-4 mr-2"}),"Crea Gruppo"]}),n.jsx(pe,{variant:"outline",onClick:()=>{ae(!1),we("")},children:"Annulla"})]})]})]})}),ge&&ie&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsxs("span",{children:['Aggiungi Etichette al Gruppo "',ie.name,'"']}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{Pe(!1),Ke([]),yt("")},children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsxs(Je,{className:"space-y-4 overflow-y-auto",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(st,{placeholder:"Cerca etichette da aggiungere...",value:ot,onChange:B=>yt(B.target.value),className:"pl-10"})]})}),n.jsxs(pe,{onClick:$r,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Tu,{className:"h-4 w-4"}),"Seleziona Tutte"]}),n.jsxs(pe,{onClick:()=>Ke([]),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(un,{className:"h-4 w-4"}),"Deseleziona"]})]}),$e.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[$e.length," etichett",$e.length===1?"a selezionata":"e selezionate"]})}),n.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxs("p",{className:"text-gray-700 text-sm",children:["Etichette disponibili: ",Se.filter(B=>B.productName.toLowerCase().includes(ot.toLowerCase())||B.barcode.includes(ot)||B.lotNumber.toLowerCase().includes(ot.toLowerCase())).length," di ",Se.length]})})]}),n.jsxs("div",{className:"max-h-96 overflow-y-auto space-y-2",children:[Se.filter(B=>B.productName.toLowerCase().includes(ot.toLowerCase())||B.barcode.includes(ot)||B.lotNumber.toLowerCase().includes(ot.toLowerCase())).map(B=>{const ke=$e.includes(B.id),Be=qt(B.id);return n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors hover:shadow-md ${ke?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-400"}`,onClick:()=>pr(B.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:ke,onChange:()=>pr(B.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold",children:B.productName}),B.photo&&n.jsx(So,{className:"h-4 w-4 text-blue-500"}),Be&&n.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:['In "',Be.name,'"']})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",B.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",B.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(B.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Categoria:"})," ",B.category]})]})]})]})},B.id)}),Se.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Fn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Tutte le etichette sono gi in questo gruppo"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsxs(pe,{onClick:qr,className:"flex-1",disabled:$e.length===0,children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Aggiungi ",$e.length," Etichett",$e.length===1?"a":"e"]}),n.jsx(pe,{variant:"outline",onClick:()=>{Pe(!1),Ke([]),yt("")},children:"Annulla"})]})]})]})}),Pt&&mt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(He,{className:"w-full max-w-md",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Modifica Gruppo"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{lt(!1),Ve(null),kt("")},children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"editGroupName",children:"Nome del Gruppo"}),n.jsx(st,{id:"editGroupName",value:Vt,onChange:B=>kt(B.target.value),placeholder:"es. Etichette Salumi",onKeyPress:B=>B.key==="Enter"&&Ar()})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo contiene ",mt.labelCount," etichett",mt.labelCount===1?"a":"e"]}),n.jsxs("p",{className:"text-blue-600 text-xs mt-1",children:["Creato da ",mt.createdBy," il ",new Date(mt.createdAt).toLocaleDateString("it-IT")]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:Ar,className:"flex-1",disabled:!Vt.trim()||Vt.trim()===mt.name,children:[n.jsx(br,{className:"h-4 w-4 mr-2"}),"Salva Modifiche"]}),n.jsx(pe,{variant:"outline",onClick:()=>{lt(!1),Ve(null),kt("")},children:"Annulla"})]})]})]})}),zt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(He,{className:"w-full max-w-md mx-4",children:[n.jsx(ct,{children:n.jsx(ut,{className:"text-center text-orange-600",children:" Conferma Salvataggio Etichetta"})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Stai per salvare l'etichetta con questi dati:"}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Prodotto:"})," ",We.productName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Scadenza:"})," ",We.expiryDate]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Lotto:"})," ",We.lotNumber||"Non specificato"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Categoria:"})," ",((na=Dn.find(B=>B.id===We.category))==null?void 0:na.name)||((Xn=Q.find(B=>B.id===We.category))==null?void 0:Xn.name)||"Non specificata"]}),We.photo&&n.jsxs("p",{children:[n.jsx("strong",{children:"Foto:"}),"  Allegata"]})]}),n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:" ATTENZIONE:"}),n.jsx("br",{}),"Una volta salvata, l'etichetta ",n.jsx("strong",{children:"NON potr essere modificata"}),". In caso di errore sar necessario:"]}),n.jsxs("ul",{className:"text-xs text-red-600 mt-2 text-left",children:[n.jsx("li",{children:" Caricare una nuova foto"}),n.jsx("li",{children:" Rifare completamente la registrazione"})]}),n.jsx("p",{className:"text-sm text-red-700 mt-2",children:n.jsx("strong",{children:"Ricontrolla attentamente tutte le informazioni!"})})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(pe,{variant:"outline",onClick:()=>fr(!1),className:"flex-1",children:" Modifica Dati"}),n.jsx(pe,{onClick:ka,className:"flex-1 bg-green-600 hover:bg-green-700",children:" Conferma e Salva"})]})]})})]})}),j&&A&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(He,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(tf,{className:"h-5 w-5"}),"Visualizzazione Etichetta"]}),n.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>{w(!1),N(null)},children:n.jsx(un,{className:"h-4 w-4"})})]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[A.photo&&n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Foto Prodotto"}),n.jsxs("div",{className:"relative inline-block",children:[n.jsx("img",{src:A.photo,alt:"Foto prodotto",className:"w-32 h-32 object-cover rounded-lg border cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>hn(!0)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg",children:n.jsx("span",{className:"text-white text-xs",children:"Clicca per ingrandire"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Nome Prodotto"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.productName})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Codice/Barcode"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.barcode||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Data Scadenza"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.expiryDate})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Numero Lotto"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.lotNumber||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Categoria"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:((La=Dn.find(B=>B.id===A.category))==null?void 0:La.name)||((ys=Q.find(B=>B.id===A.category))==null?void 0:ys.name)||"Non specificata"})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Posizione"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.location||"Non specificata"})]})]}),A.notes&&n.jsxs("div",{children:[n.jsx(et,{className:"text-sm font-medium",children:"Note"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:A.notes})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-500",children:[n.jsxs("div",{children:[n.jsx(et,{className:"text-xs font-medium",children:"Creata da"}),n.jsx("p",{children:A.createdBy})]}),n.jsxs("div",{children:[n.jsx(et,{className:"text-xs font-medium",children:"Data Creazione"}),n.jsx("p",{children:new Date(A.createdAt).toLocaleString()})]})]})}),n.jsx("div",{className:"border-t pt-4 flex justify-center",children:n.jsx(pe,{variant:"outline",onClick:()=>{w(!1),N(null)},className:"px-8",children:"Chiudi"})})]})})]})}),vt&&(A==null?void 0:A.photo)&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:()=>hn(!1),children:n.jsxs("div",{className:"relative max-w-4xl max-h-4xl p-4",children:[n.jsx(pe,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 text-white hover:bg-white hover:bg-opacity-20",onClick:()=>hn(!1),children:n.jsx(un,{className:"h-6 w-6"})}),n.jsx("img",{src:A.photo,alt:"Foto prodotto ingrandita",className:"max-w-full max-h-full object-contain rounded-lg",onClick:B=>B.stopPropagation()})]})}),nn&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(He,{className:"w-full max-w-md mx-4",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Ui,{className:"h-5 w-5"}),"Sposta Etichette nel Gruppo"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Seleziona il gruppo dove spostare le ",D.length," etichette selezionate:"]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Q.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo disponibile."}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Crea prima un gruppo per spostare le etichette."})]}):Q.map(B=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{const ke=Q.map(Be=>{if(Be.id===B.id){const jt=[...new Set([...Be.labelIds,...D])];return{...Be,labelIds:jt,labelCount:jt.length,lastUpdate:new Date().toISOString()}}else{const jt=Be.labelIds.filter(ft=>!D.includes(ft));return{...Be,labelIds:jt,labelCount:jt.length,lastUpdate:jt.length!==Be.labelIds.length?new Date().toISOString():Be.lastUpdate}}});_e(ke),E([]),_(!1),Bn(!1)},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:B.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[B.labelIds.length," etichette"]})]}),n.jsx(Ui,{className:"h-4 w-4 text-gray-400"})]},B.id))}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsx(pe,{variant:"outline",onClick:()=>{Bn(!1)},className:"flex-1",children:"Annulla"}),n.jsxs(pe,{onClick:()=>{Bn(!1),ae(!0)},variant:"default",className:"flex-1",children:[n.jsx(wr,{className:"h-4 w-4 mr-2"}),"Nuovo Gruppo"]})]})]})})]})})]})}function v4({currentUser:e,currentSection:t,products:r=[],temperatures:i=[],cleaning:a=[],staff:s=[],onAction:l}){const[c,u]=re.useState([]),[m,x]=re.useState(""),[g,v]=re.useState(!1);re.useState([]);const[p,j]=re.useState(!1),[w,A]=re.useState(!1),[N,b]=re.useState(null),[L,G]=re.useState(!0),[ne,ce]=re.useState(!1),[V,O]=re.useState(!1),J=re.useRef(null),ee=re.useRef(!0),_=re.useRef(!0);console.log(" AIAssistant: Component rendering, isMinimized:",L,"isMounted:",ne,"isVisible:",V),re.useEffect(()=>{console.log(" AIAssistant: useEffect triggered - setting up component"),G(!0),ee.current=!0,_.current=!0,O(!1),console.log(" AIAssistant: Starting mount timer (500ms)"),setTimeout(()=>{console.log(" AIAssistant: Mount timer complete - making visible"),ce(!0),G(!0),ee.current=!0,O(!0)},500),console.log(" AIAssistant: Starting grace period (2000ms)"),setTimeout(()=>{_.current=!1,console.log(" AIAssistant: Grace period ended, chat can now be opened by user")},2e3)},[]),re.useEffect(()=>{console.log(" AIAssistant: State changed - isMinimized:",L,"isMounted:",ne,"isVisible:",V,"forceMinimized:",ee.current,"gracePeriod:",_.current)},[L,ne,V]);const D=H=>{if(console.log("AIAssistant: handleSetMinimized called with:",H,"gracePeriod:",_.current,"forceMinimized:",ee.current),H===!1&&_.current){console.log("AIAssistant: BLOCKED - Still in grace period, no opening allowed");return}if(H===!1&&ee.current){console.log("AIAssistant: Preventing auto-open, first user click required");return}ee.current=!1,G(H)},E=()=>{var H;(H=J.current)==null||H.scrollIntoView({behavior:"smooth"})};re.useEffect(()=>{E()},[c]),re.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const H=window.SpeechRecognition||window.webkitSpeechRecognition,te=new H;te.continuous=!1,te.interimResults=!1,te.lang="it-IT",te.onstart=()=>{A(!0),q("assistant"," Ti sto ascoltando... Parla ora!","system")},te.onresult=me=>{const xe=me.results[0][0].transcript;x(xe),q("assistant",` Ho sentito: "${xe}"`,"system")},te.onerror=me=>{console.error("Speech recognition error:",me.error),A(!1),q("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},te.onend=()=>{A(!1)},b(te)}},[]),re.useEffect(()=>{},[]);const q=(H,te,me="text",xe=null)=>{const C={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:H,content:te,type:me,data:xe,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};u(K=>[...K,C])},ae=async()=>{if(!m.trim())return;const H=m.trim();x(""),q("user",H),v(!0),setTimeout(()=>{const te=ue(H,t);q("assistant",te.content,te.type,te.data),v(!1)},1e3)},ue=(H,te)=>{const me=H.toLowerCase();switch(te){case"inventory":return we(me);case"cleaning":return Q(me);case"temperature":return de();case"staff":return ie();case"dashboard":return ze();default:return P(me)}},we=H=>{if(H.includes("aggiungere")||H.includes("nuovo prodotto"))return{content:`Per aggiungere un nuovo prodotto:

1. **Vai alla sezione "Inventario"**
2. **Clicca "Aggiungi Prodotto"**
3. **Compila i campi richiesti:**
   - Nome prodotto
   - Categoria
   - Posizione
   - Data scadenza
   - Allergeni (se presenti)

**Suggerimento**: Puoi anche usare le categorie predefinite per aggiunta rapida!`,type:"text"};if(H.includes("scadenza")||H.includes("scaduti")){const te=r.filter(me=>{const xe=Math.ceil((new Date(me.expiryDate)-new Date)/864e5);return xe<=7&&xe>0});return te.length>0?{content:` **Prodotti in scadenza** (${te.length} prodotti):

${te.map(me=>` ${me.name} - Scade il ${me.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:te}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}return{content:`Per l'inventario posso aiutarti con:
 Aggiungere prodotti
 Controllare scadenze
 Gestire categorie
 Suggerimenti ricette

Cosa ti serve?`,type:"text"}},Q=H=>{if(H.includes("attivit")||H.includes("mansioni")){const te=a.filter(me=>!me.completed);return{content:` **Attivit da svolgere** (${te.length} totali):

${te.slice(0,5).map(me=>` ${me.task} - Assegnato a: ${me.assignee}`).join(`
`)}
${te.length>5?`
... e altre ${te.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza (Giornaliere/Settimanali/Mensili/Annuali)`,type:"text"}}return H.includes("temperatura")||H.includes("frigo")?{content:` **Ultime temperature registrate**:

${i.slice(-3).map(me=>` ${me.location}: ${me.temperature}C (${me.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:`Per la sezione pulizia posso aiutarti con:
 Gestione attivit
 Controlli temperatura
 Frequenze mansioni
 Report completamento

Cosa ti serve?`,type:"text"}},de=H=>({content:`Per i controlli temperatura posso aiutarti con:
 Registrare nuove temperature
 Monitorare trend
 Alert automatici
 Report periodici

Cosa ti serve?`,type:"text"}),ie=H=>({content:`Per la gestione del personale posso aiutarti con:
 Aggiungere dipendenti
 Gestire ruoli
 Assegnare mansioni
 Report attivit

Cosa ti serve?`,type:"text"}),ze=H=>({content:`Per la dashboard posso aiutarti con:
 Panoramica generale
 Statistiche rapide
 Alert importanti
 Navigazione sezioni

Cosa ti serve?`,type:"text"}),P=H=>H.includes("aiuto")||H.includes("help")?{content:` **Come posso aiutarti:**

** Inventario:**
 Aggiungere prodotti
 Controllare scadenze
 Suggerimenti ricette

** Pulizia:**
 Gestire attivit
 Controlli temperatura
 Frequenze mansioni

** Personale:**
 Gestire dipendenti
 Assegnare ruoli

** Dashboard:**
 Panoramica generale
 Statistiche

** Automatizzazioni:**
 Alert scadenze
 Ordini settimanali
 Suggerimenti ricette

Dimmi in quale sezione ti trovi o cosa ti serve!`,type:"text"}:{content:"Non sono sicuro di aver capito. Puoi essere pi specifico? Oppure dimmi in quale sezione ti trovi per ricevere aiuto mirato!",type:"text"},$=H=>{H.key==="Enter"&&!H.shiftKey&&(H.preventDefault(),ae())},W=()=>{if(!N){q("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}w?N.stop():N.start()};return n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:!ne||!V?null:L?n.jsx(pe,{onClick:()=>D(!1),className:"w-12 h-12 rounded-full bg-blue-600 hover:bg-blue-700 shadow-lg",children:n.jsx(es,{className:"h-6 w-6 text-white"})}):n.jsxs(He,{className:"w-80 h-96 flex flex-col",children:[n.jsx(ct,{className:"pb-3",children:n.jsxs(ut,{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(es,{className:"h-4 w-4 text-blue-600"}),"Assistente IA",w&&n.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[n.jsx(Pd,{className:"h-3 w-3 animate-pulse"}),n.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>D(!0),className:"h-6 w-6 p-0",children:n.jsx(Zy,{className:"h-3 w-3"})}),n.jsx(pe,{variant:"ghost",size:"sm",onClick:()=>j(!p),className:"h-6 w-6 p-0",children:n.jsx(br,{className:"h-3 w-3"})})]})]})}),n.jsxs(Je,{className:"flex-1 flex flex-col p-0",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[c.map(H=>n.jsx("div",{className:`flex ${H.sender==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${H.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[H.sender==="assistant"&&n.jsx(es,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm whitespace-pre-wrap",children:H.content}),n.jsx("div",{className:`text-xs mt-1 ${H.sender==="user"?"text-blue-100":"text-gray-500"}`,children:H.timestamp})]})]})})},H.id)),g&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(es,{className:"h-4 w-4 text-blue-600"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),n.jsx("div",{ref:J})]}),n.jsx("div",{className:"p-4 border-t bg-white",children:n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx(st,{value:m,onChange:H=>x(H.target.value),onKeyPress:$,placeholder:"Scrivi un messaggio...",className:"flex-1 min-h-[40px]"}),n.jsx(pe,{onClick:W,disabled:g,size:"sm",className:`px-3 h-10 ${w?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:w?n.jsx(Q2,{className:"h-4 w-4"}):n.jsx(Pd,{className:"h-4 w-4"})}),n.jsx(pe,{onClick:ae,disabled:!m.trim()||g,size:"sm",className:"px-3 h-10",children:n.jsx(K2,{className:"h-4 w-4"})})]})})]})]})})}function y4({currentUser:e,products:t=[],temperatures:r=[],cleaning:i=[],staff:a=[],onAction:s}){const[l,c]=re.useState([]),[u,m]=re.useState(""),[x,g]=re.useState(!1),[v,p]=re.useState(!1),[j,w]=re.useState(null),[A,N]=re.useState(!1),[b,L]=re.useState([{id:1,name:"Alert Scadenze",enabled:!0,description:"Avvisa sui prodotti in scadenza"},{id:2,name:"Suggerimenti Ricette",enabled:!0,description:"Genera ricette per ingredienti in scadenza"},{id:3,name:"Ordini Settimanali",enabled:!1,description:"Crea ordini automatici ogni luned"},{id:4,name:"Alert Temperature",enabled:!0,description:"Avvisa su temperature critiche"}]),[G,ne]=re.useState(()=>{const E=localStorage.getItem("haccp-show-chat-icon");return E!==null?JSON.parse(E):!0});re.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const E=window.SpeechRecognition||window.webkitSpeechRecognition,q=new E;q.continuous=!1,q.interimResults=!1,q.lang="it-IT",q.onstart=()=>{p(!0),ce("assistant"," Ti sto ascoltando... Parla ora!","system")},q.onresult=ae=>{const ue=ae.results[0][0].transcript;m(ue),ce("assistant",` Ho sentito: "${ue}"`,"system")},q.onerror=ae=>{console.error("Speech recognition error:",ae.error),p(!1),ce("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},q.onend=()=>{p(!1)},w(q)}},[]),re.useEffect(()=>{l.length===0&&ce("assistant",`Ciao ${(e==null?void 0:e.name)||"utente"}!  Sono il tuo assistente IA per il sistema HACCP.

** Cosa posso fare:**
 **Gestione inventario** - Aggiungere prodotti, controllare scadenze
 **Controlli temperatura** - Registrare e monitorare temperature
 **Attivit di pulizia** - Gestire mansioni e frequenze
 **Automatizzazioni** - Alert intelligenti e suggerimenti
 ** Riconoscimento vocale** - Parla invece di scrivere!

** Automatizzazioni attive:**
${b.filter(E=>E.enabled).map(E=>` ${E.name}`).join(`
`)}

Dimmi cosa ti serve!`)},[]);const ce=(E,q,ae="text",ue=null)=>{const we={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:E,content:q,type:ae,data:ue,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};c(Q=>[...Q,we])},V=async()=>{if(!u.trim())return;const E=u.trim();m(""),ce("user",E),g(!0),setTimeout(()=>{const q=O(E);ce("assistant",q.content,q.type,q.data),g(!1)},1e3)},O=E=>{const q=E.toLowerCase();if(q.includes("aiuto")||q.includes("help"))return{content:` **Come posso aiutarti:**

** Inventario:**
 "Aggiungi un nuovo prodotto"
 "Controlla le scadenze"
 "Mostra i prodotti in scadenza"

** Temperature:**
 "Registra una temperatura"
 "Mostra le ultime temperature"
 "Controlla i frigoriferi"

** Pulizia:**
 "Mostra le attivit da svolgere"
 "Aggiungi una nuova attivit"
 "Controlla le mansioni"

** Automatizzazioni:**
 "Attiva alert scadenze"
 "Genera ricette"
 "Configura automatizzazioni"

** Comandi vocali:**
 Parla chiaramente in italiano
 Usa frasi semplici e dirette
 Clicca il microfono per iniziare`,type:"text"};if(q.includes("scadenza")||q.includes("scaduti")){const ae=t.filter(ue=>{const we=Math.ceil((new Date(ue.expiryDate)-new Date)/864e5);return we<=7&&we>0});return ae.length>0?{content:` **Prodotti in scadenza** (${ae.length} prodotti):

${ae.map(ue=>` ${ue.name} - Scade il ${ue.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:ae}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}if(q.includes("attivit")||q.includes("mansioni")){const ae=i.filter(ue=>!ue.completed);return{content:` **Attivit da svolgere** (${ae.length} totali):

${ae.slice(0,5).map(ue=>` ${ue.task} - Assegnato a: ${ue.assignee}`).join(`
`)}
${ae.length>5?`
... e altre ${ae.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza!`,type:"text"}}return q.includes("temperatura")||q.includes("frigo")?{content:` **Ultime temperature registrate**:

${r.slice(-3).map(ue=>` ${ue.location}: ${ue.temperature}C (${ue.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:'Non sono sicuro di aver capito. Prova a dire "aiuto" per vedere tutti i comandi disponibili!',type:"text"}},J=()=>{if(!j){ce("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}v?j.stop():j.start()},ee=E=>{L(q=>q.map(ae=>ae.id===E?{...ae,enabled:!ae.enabled}:ae))},_=()=>{const E=!G;ne(E),localStorage.setItem("haccp-show-chat-icon",JSON.stringify(E))};re.useEffect(()=>{localStorage.setItem("haccp-show-chat-icon",JSON.stringify(G))},[G]);const D=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),V())};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IA Assistant"}),n.jsx("p",{className:"text-gray-600",children:"Il tuo assistente intelligente per la gestione HACCP"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(pe,{onClick:J,disabled:x,className:`${v?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[v?n.jsx(Q2,{className:"h-4 w-4 mr-2"}):n.jsx(Pd,{className:"h-4 w-4 mr-2"}),v?"Ferma Ascolto":"Parla"]}),n.jsxs(pe,{variant:"outline",onClick:()=>N(!A),children:[n.jsx(br,{className:"h-4 w-4 mr-2"}),"Impostazioni"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(He,{className:"h-96",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(es,{className:"h-5 w-5 text-blue-600"}),"Chat con l'IA",v&&n.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[n.jsx(Pd,{className:"h-3 w-3 animate-pulse"}),n.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]})}),n.jsxs(Je,{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[l.map(E=>n.jsx("div",{className:`flex ${E.sender==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${E.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[E.sender==="assistant"&&n.jsx(es,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm whitespace-pre-wrap",children:E.content}),n.jsx("div",{className:`text-xs mt-1 ${E.sender==="user"?"text-blue-100":"text-gray-500"}`,children:E.timestamp})]})]})})},E.id)),x&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(es,{className:"h-4 w-4 text-blue-600"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(st,{value:u,onChange:E=>m(E.target.value),onKeyPress:D,placeholder:"Scrivi un messaggio o parla...",className:"flex-1"}),n.jsx(pe,{onClick:V,disabled:!u.trim()||x,children:n.jsx(K2,{className:"h-4 w-4"})})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(oN,{className:"h-5 w-5 text-yellow-600"}),"Automatizzazioni"]})}),n.jsx(Je,{children:n.jsx("div",{className:"space-y-3",children:b.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:E.name}),n.jsx("p",{className:"text-xs text-gray-600",children:E.description})]}),n.jsx(pe,{size:"sm",variant:E.enabled?"default":"outline",onClick:()=>ee(E.id),children:E.enabled?"Attiva":"Disattiva"})]},E.id))})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Jd,{className:"h-5 w-5 text-purple-600"}),"Azioni Rapide"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(pe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>m("Controlla le scadenze"),children:[n.jsx(Fn,{className:"h-4 w-4 mr-2"}),"Controlla Scadenze"]}),n.jsxs(pe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>m("Mostra le attivit da svolgere"),children:[n.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Attivit da Svolgere"]}),n.jsxs(pe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>m("Mostra le ultime temperature"),children:[n.jsx(gn,{className:"h-4 w-4 mr-2"}),"Ultime Temperature"]}),n.jsxs(pe,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>m("Aiuto"),children:[n.jsx(Yy,{className:"h-4 w-4 mr-2"}),"Aiuto"]})]})})]}),A&&n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5 text-gray-600"}),"Impostazioni Chat IA"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Mostra Icona Chat"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Visualizza l'icona della chat IA nell'app"})]}),n.jsx(pe,{size:"sm",variant:G?"default":"outline",onClick:_,children:G?"Attiva":"Disattiva"})]}),n.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-3 rounded-lg",children:[" ",n.jsx("strong",{children:"Suggerimento:"}),` Se disattivi l'icona della chat, potrai sempre accedere all'IA dalla sezione "Assistente IA" nel menu principale.`]})]})})]})]})]})]})}function N4({products:e=[],onRecipeSuggestion:t}){const[r,i]=re.useState([]),[a,s]=re.useState(!1),[l,c]=re.useState([]);re.useEffect(()=>{(()=>{const g=new Date,v=e.filter(p=>{if(!p.expiryDate)return!1;const j=new Date(p.expiryDate),w=Math.ceil((j-g)/(1e3*60*60*24));return w<=7&&w>0});i(v)})()},[e]);const u=()=>{const x=[];r.forEach(g=>{const v=m(g);v&&x.push(v)}),c(x),s(!0)},m=x=>({"Mozzarella di Bufala":{name:"Insalata Caprese",ingredients:["Mozzarella di Bufala","Pomodoro","Basilico","Olio EVO"],instructions:"Taglia mozzarella e pomodoro a fette, alterna su piatto, guarnisci con basilico e olio.",difficulty:"Facile",time:"10 minuti"},"Parmigiano Reggiano":{name:"Risotto al Parmigiano",ingredients:["Riso Carnaroli","Parmigiano Reggiano","Burro","Brodo"],instructions:"Prepara risotto classico, manteca con parmigiano e burro.",difficulty:"Media",time:"25 minuti"},"Prosciutto Crudo":{name:"Antipasto Prosciutto e Melone",ingredients:["Prosciutto Crudo","Melone","Rucola"],instructions:"Avvolgi fette di prosciutto su cubetti di melone, guarnisci con rucola.",difficulty:"Facile",time:"5 minuti"},Salmone:{name:"Salmone al Forno con Erbe",ingredients:["Salmone","Limone","Erbe aromatiche","Olio EVO"],instructions:"Condisci salmone con erbe, limone e olio, cuoci in forno a 180C per 15 min.",difficulty:"Facile",time:"20 minuti"},"Basilico Fresco":{name:"Pesto alla Genovese",ingredients:["Basilico Fresco","Parmigiano","Pine Nuts","Olio EVO","Aglio"],instructions:"Frulla tutti gli ingredienti fino a ottenere una crema omogenea.",difficulty:"Facile",time:"10 minuti"}})[x.name]||{name:`Ricetta con ${x.name}`,ingredients:[x.name,"Altri ingredienti disponibili"],instructions:"Crea una ricetta utilizzando questo ingrediente prima che scada.",difficulty:"Media",time:"15 minuti"};return r.length===0?null:n.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:n.jsxs(He,{className:"border-orange-200 bg-orange-50",children:[n.jsx(ct,{className:"pb-3",children:n.jsxs(ut,{className:"flex items-center gap-2 text-orange-800",children:[n.jsx(tr,{className:"h-5 w-5"}),"Prodotti in Scadenza"]})}),n.jsxs(Je,{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm text-orange-700",children:[n.jsxs("p",{className:"font-medium mb-2",children:[r.length," prodotto",r.length>1?"i":""," in scadenza:"]}),n.jsx("ul",{className:"space-y-1",children:r.map(x=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(up,{className:"h-3 w-3"}),n.jsx("span",{children:x.name}),n.jsxs("span",{className:"text-xs",children:["(scade il ",new Date(x.expiryDate).toLocaleDateString("it-IT"),")"]})]},x.id))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:u,className:"bg-orange-600 hover:bg-orange-700 text-white",size:"sm",children:[n.jsx(qy,{className:"h-4 w-4 mr-1"}),"Suggerisci Ricette"]}),n.jsxs(pe,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-300",children:[n.jsx(Wn,{className:"h-4 w-4 mr-1"}),"Rimuovi Alert"]})]}),a&&l.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Ricette Suggerite:"}),n.jsx("div",{className:"space-y-2",children:l.map((x,g)=>n.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[n.jsx("h5",{className:"font-medium text-sm",children:x.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Tempo: ",x.time,"  Difficolt: ",x.difficulty]}),n.jsx("p",{className:"text-xs text-gray-700 mt-1",children:x.instructions})]},g))})]})]})]})})}function w4({temperatures:e,cleaning:t,products:r,refrigerators:i,setTemperatures:a,setCleaning:s,setProducts:l,setRefrigerators:c}){const[u,m]=re.useState(!1),[x,g]=re.useState({temperatures:0,cleaning:0,products:0,refrigerators:0,totalSize:0});re.useEffect(()=>{(()=>{const N=e||[],b=t||[],L=r||[],G=i||[],ne=JSON.stringify(N).length,ce=JSON.stringify(b).length,V=JSON.stringify(L).length,O=JSON.stringify(G).length;g({temperatures:N.length,cleaning:b.length,products:L.length,refrigerators:G.length,totalSize:ne+ce+V+O})})()},[e,t,r,i]);const v=()=>{if(!u)return;const A=new Date;A.setDate(A.getDate()-30);const N=e||[],b=t||[],L=N.filter(_=>new Date(_.timestamp)<A),G=N.filter(_=>new Date(_.timestamp)>=A),ne=b.filter(_=>_.completed&&new Date(_.createdAt)<A),ce=b.filter(_=>!_.completed||new Date(_.createdAt)>=A);let V=[];const O={temperatures:L,cleaning:ne,expiredLabels:V,archivedAt:new Date().toISOString()},J=JSON.parse(localStorage.getItem("haccp-archives")||"[]");J.push(O),localStorage.setItem("haccp-archives",JSON.stringify(J)),a(G),s(ce),L.length+ne.length+V.length>0?alert(` Archiviazione completata!

 Elementi archiviati:
 ${L.length} registrazioni temperature
 ${ne.length} attivit completate
 ${V.length} etichette prodotti scaduti

 Controllo scadenze temporaneamente disabilitato`):alert(` Archiviazione completata!

 Elementi archiviati:
 ${L.length} registrazioni temperature
 ${ne.length} attivit completate
 Controllo etichette scadute: disabilitato`)};re.useEffect(()=>{if(!u)return;const A=setInterval(()=>{v()},24*60*60*1e3);return()=>clearInterval(A)},[u]);const p=A=>Math.min(A/5242880*100,100),j=A=>A<50?"text-green-600":A<80?"text-yellow-600":"text-red-600",w=A=>{if(A===0)return"0 Bytes";const N=1024,b=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(A)/Math.log(N));return parseFloat((A/Math.pow(N,L)).toFixed(2))+" "+b[L]};return n.jsx("div",{className:"space-y-6",children:n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(tc,{className:"h-5 w-5"}),"Gestione Storage"]})}),n.jsxs(Je,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Utilizzo Storage"}),n.jsxs("div",{className:"relative w-48 h-48 mx-auto",children:[n.jsxs("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 100 100",children:[n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3B82F6",strokeWidth:"8",strokeDasharray:`${x.temperatures/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:"0"}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10B981",strokeWidth:"8",strokeDasharray:`${x.cleaning/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${x.temperatures/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#F59E0B",strokeWidth:"8",strokeDasharray:`${x.products/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(x.temperatures+x.cleaning)/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#8B5CF6",strokeWidth:"8",strokeDasharray:`${x.refrigerators/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(x.temperatures+x.cleaning+x.products)/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${j(p(x.totalSize))}`,children:w(x.totalSize)}),n.jsx("div",{className:"text-sm text-gray-600",children:"Utilizzato"})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Dettaglio Dati"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Temperature"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.temperatures," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Attivit"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.cleaning," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Prodotti"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.products," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Frigoriferi"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.refrigerators," record"]})]})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[n.jsx(tg,{className:"h-4 w-4"}),"Archiviazione Automatica"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Rimuove automaticamente i dati vecchi per mantenere l'app veloce"})]}),n.jsx(pe,{variant:u?"default":"outline",onClick:()=>m(!u),className:"flex items-center gap-2",children:u?n.jsxs(n.Fragment,{children:[n.jsx(Zn,{className:"h-4 w-4"}),"Abilitata"]}):n.jsxs(n.Fragment,{children:[n.jsx(br,{className:"h-4 w-4"}),"Disabilitata"]})})]}),u&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Cosa fa l'archiviazione automatica:"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Rimuove le registrazioni temperature pi vecchie di 30 giorni"}),n.jsx("li",{children:" Archivia le attivit completate pi vecchie di 30 giorni"}),n.jsx("li",{children:" Chiede conferma per rimuovere etichette di prodotti scaduti OGGI"}),n.jsx("li",{children:" Mantiene tutti i prodotti e frigoriferi attivi"}),n.jsx("li",{children:" Crea un backup completo dei dati rimossi"}),n.jsx("li",{children:" Libera spazio solo con conferma utente per le foto"}),n.jsx("li",{children:" Si esegue automaticamente ogni 24 ore"})]}),n.jsx("div",{className:"mt-3",children:n.jsxs(pe,{onClick:v,className:"flex items-center gap-2",size:"sm",children:[n.jsx(tg,{className:"h-4 w-4"}),"Archivia Ora"]})})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Azioni Manuali"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs(pe,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const A={temperatures:e,cleaning:t,products:r,refrigerators:i,exportedAt:new Date().toISOString()},N=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),b=URL.createObjectURL(N),L=document.createElement("a");L.href=b,L.download=`haccp-backup-${new Date().toISOString().split("T")[0]}.json`,L.click()},children:[n.jsx(Gs,{className:"h-4 w-4"}),"Esporta Tutti i Dati"]}),n.jsxs(pe,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{confirm("Sei sicuro di voler eliminare tutti i dati? Questa azione non pu essere annullata.")&&(a([]),s([]),l([]),c([]),alert("Tutti i dati sono stati eliminati."))},children:[n.jsx(Wn,{className:"h-4 w-4"}),"Elimina Tutti i Dati"]})]})]})]})]})})}function b4(){const[e,t]=re.useState(null),[r,i]=re.useState(!1),[a,s]=re.useState(!1);re.useEffect(()=>{const u=()=>window.matchMedia("(display-mode: standalone)").matches?(s(!0),!0):!1,m=localStorage.getItem("pwa-install-rejected");return!u()&&!m&&(window.addEventListener("beforeinstallprompt",x=>{x.preventDefault(),t(x),i(!0)}),window.addEventListener("appinstalled",()=>{s(!0),i(!1),t(null)})),()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})}},[]);const l=async()=>{if(!e)return;e.prompt();const{outcome:u}=await e.userChoice;u==="accepted"?(console.log("PWA installata con successo!"),s(!0)):(console.log("Installazione PWA rifiutata"),localStorage.setItem("pwa-install-rejected","true")),t(null),i(!1)},c=()=>{i(!1),localStorage.setItem("pwa-install-rejected","true")};return a||!r?null:n.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Gs,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Installa l'App"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Installa Mini-ePackPro sul tuo dispositivo per un accesso pi veloce e funzionalit offline."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:l,size:"sm",className:"flex items-center gap-2",children:[n.jsx(Gs,{className:"h-4 w-4"}),"Installa"]}),n.jsxs(pe,{onClick:c,variant:"outline",size:"sm",children:[n.jsx(un,{className:"h-4 w-4"}),"Non ora"]})]})]})})})}class j4{constructor(t){this.companyId=t,this.storagePrefix=`cloud-sim-${t}`,console.log(" CloudSimulator attivo per:",t)}async saveToCloud(t,r,i){return new Promise((a,s)=>{try{setTimeout(()=>{const l=`${this.storagePrefix}-${t}`,c={data:r,lastModified:new Date().toISOString(),modifiedBy:i,companyId:this.companyId,version:Date.now()};localStorage.setItem(l,JSON.stringify(c)),console.log(` [SIMULATO] Salvato in cloud: ${t}`),a({success:!0,message:` ${t} condiviso con tutti!`,timestamp:c.lastModified})},800+Math.random()*400)}catch{s({success:!1,message:` Errore simulato nel salvare ${t}`})}})}async loadFromCloud(t){return new Promise((r,i)=>{try{setTimeout(()=>{const a=`${this.storagePrefix}-${t}`,s=localStorage.getItem(a);if(s){const l=JSON.parse(s);console.log(` [SIMULATO] Scaricato dal cloud: ${t}`),r({success:!0,data:l.data,lastModified:l.lastModified,message:` Ricevuti aggiornamenti di ${t}!`})}else r({success:!0,data:null,message:` Nessun dato di ${t} nel cloud`})},600+Math.random()*300)}catch{i({success:!1,message:` Errore nel scaricare ${t}`})}})}isOnline(){return navigator.onLine}async getCompanyInfo(){return new Promise(t=>{setTimeout(()=>{t({id:this.companyId,name:"Demo Pizzeria Da Mario",plan:"free",users:5,maxUsers:25,storageUsed:"45 MB",storageMax:"1 GB"})},300)})}async getRecentChanges(){return new Promise(t=>{setTimeout(()=>{t({success:!0,changes:[{type:"inventory",user:"Luca (Magazzino)",action:"Aggiunto: Mozzarella di Bufala",time:"5 min fa"},{type:"temperatures",user:"Sara (Cucina)",action:"Temperatura Frigo A: 4.2C",time:"12 min fa"},{type:"cleaning",user:"Marco (Pulizie)",action:"Completata: Sanificazione tavoli",time:"25 min fa"}],hasUpdates:Math.random()>.5})},400)})}getStorageStats(){return{localSpace:"45 MB",cloudSpace:"12 MB",photosCount:23,documentsCount:156,lastSync:localStorage.getItem("haccp-last-sync")||"Mai",syncCount:parseInt(localStorage.getItem("cloud-sim-sync-count")||"0")}}incrementSyncCount(){const t=parseInt(localStorage.getItem("cloud-sim-sync-count")||"0");localStorage.setItem("cloud-sim-sync-count",(t+1).toString())}async cleanupCloudStorage(){return new Promise(t=>{setTimeout(()=>{const r=Math.floor(Math.random()*20)+5;t({success:!0,message:` Liberati ${r} MB dal cloud!`,spaceSaved:`${r} MB`})},1e3)})}}const S4=(e="demo-company")=>new j4(e),pi={version:"2.0",lastUpdated:"2024-12-19",principles:[{id:"data-collection",title:"Raccolta Dati Pertinenti",description:"Raccogliere dati pertinenti (temperature, pulizie, controlli, fornitori, prodotti) in formato tracciabile",critical:!0,implementation:"Ogni funzione deve salvare timestamp, operatore e dati completi"},{id:"data-archiving",title:"Archiviazione 12 Mesi",description:"Archiviare i dati per almeno 12 mesi in formato esportabile (PDF o JSON) leggibile da terzi (ASL, NAS, auditor)",critical:!0,implementation:"Sistema di backup automatico e export manuale"},{id:"data-integrity",title:"Integrit Dati",description:"Garantire integrit dei dati (nessuna modifica senza tracciamento, log azioni con data e ora)",critical:!0,implementation:"Log di tutte le modifiche con timestamp e operatore"},{id:"prerequisites",title:"Prerequisiti Normativi",description:"Facilitare il rispetto dei prerequisiti normativi: igiene personale, controllo infestanti, manutenzione impianti, formazione personale",critical:!0,implementation:"Checklist e promemoria per prerequisiti"},{id:"ccp-management",title:"Gestione CCP",description:"Gestire i CCP (Critical Control Points) con controlli programmati e azioni correttive",critical:!0,implementation:"Sistema di allarmi e azioni correttive automatiche"}],guidelines:{temperature:{id:"temperature-control",title:"Registrazione Temperature",frequency:"Almeno 2 volte al giorno (inizio e met turno)",criticalPoints:[{name:"Frigorifero positivo",range:{min:0,max:4,unit:"C"},description:"Latticini, formaggi freschi, salumi"},{name:"Banco ingredienti",range:{min:0,max:8,unit:"C"},description:"Pomodoro, mozzarella, verdure fresche"},{name:"Freezer",range:{min:-18,max:null,unit:"C"},description:"Surgelati e prodotti congelati"}],correctiveActions:["Isolare prodotto e segnalarlo immediatamente","Riparare/controllare apparecchio","Registrare azione correttiva e prodotto isolato","Verificare temperatura prima di riutilizzare"],whyMatters:"Le temperature fuori range favoriscono la proliferazione batterica e compromettono la sicurezza alimentare"},cleaning:{id:"cleaning-sanitization",title:"Pulizie e Sanificazioni",zones:[{name:"Superfici di lavoro",frequency:"Dopo ogni uso",products:["Detergente neutro","Disinfettante alimentare"]},{name:"Celle e frigoriferi",frequency:"Settimanale",products:["Detergente specifico","Disinfettante alimentare"]},{name:"Pavimenti",frequency:"Quotidiano",products:["Detergente pavimenti","Disinfettante"]},{name:"Attrezzature",frequency:"Secondo manuale tecnico",products:["Detergente specifico per attrezzature"]}],recording:"Indicare operatore, orario, detergente/disinfettante usato",whyMatters:"La pulizia regolare previene contaminazioni e mantiene standard igienici"},staff:{id:"staff-management",title:"Gestione Personale",roles:[{name:"Amministratore",level:1,responsibilities:["Gestione completa sistema","Responsabilit legale","Approvazione procedure"]},{name:"Responsabile",level:2,responsibilities:["Supervisione operativa","Controllo procedure","Formazione staff"]},{name:"Dipendente",level:3,responsibilities:["Esecuzione procedure","Registrazione dati","Segnalazione problemi"]},{name:"Collaboratore occasionale",level:4,responsibilities:["Esecuzione procedure base","Seguire istruzioni responsabile"]}],requirements:["Mansioni assegnate e documentate","Formazione HACCP registrata e aggiornata","Conoscenza procedure operative","Responsabilit chiare per ogni ruolo"],whyMatters:"Personale formato e responsabilizzato garantisce applicazione corretta delle procedure HACCP"},products:{id:"product-management",title:"Gestione Prodotti",scheda:["Nome commerciale e nome scientifico","Categoria (carne, latticini, verdure, ecc.)","Data di ricezione e scadenza","Fornitore e documentazione","Etichetta interna se necessario (es. preparazioni interne con TMC)","Condizioni di conservazione","Allergeni presenti"],whyMatters:"Tracciabilit completa garantisce sicurezza e conformit normativa"},suppliers:{id:"supplier-management",title:"Gestione Fornitori",registration:["Nome e categoria merceologica","Contatti e documentazione","DDT/fatture con data di consegna","Valutazione periodica affidabilit","Controllo documenti di trasporto","Verifica certificazioni HACCP"],whyMatters:"Fornitori qualificati garantiscono materie prime sicure e conformi"},nonConformity:{id:"non-conformity",title:"Gestione Non Conformit",recording:["Data e ora del rilevamento","Descrizione dettagliata del problema","Azione correttiva intrapresa","Responsabile dell'azione","Verifica efficacia azione correttiva","Prevenzione ricorrenza"],examples:["Temperatura fuori range per pi di 2 ore","Presenza infestanti in magazzino","Prodotto scaduto in vendita","Dispositivo di controllo non funzionante","Personale non formato per mansione"],whyMatters:"Gestione corretta delle non conformit previene rischi e migliora il sistema"}},requirements:{refrigerators:{mandatory:["nome","tipo","range-temperatura","posizione"],validation:"Minimo 1 registrato per sbloccare registrazione temperature",blocking:["temperatures"],whyMatters:"I frigoriferi sono punti di controllo critici per la catena del freddo"},temperature:{mandatory:["punto-controllo","valore","ora","operatore"],validation:"Se valore fuori range  mostra alert e richiede azione correttiva",blocking:[],whyMatters:"Le temperature fuori range compromettono la sicurezza alimentare"},staff:{mandatory:["nome","ruolo","mansioni","formazione-haccp"],validation:"Minimo 1 per sbloccare pulizie e controlli",blocking:["cleaning","inventory"],whyMatters:"Il personale formato  responsabile dell'applicazione delle procedure"},cleaning:{mandatory:["area","frequenza","prodotto-usato","operatore","data-ora"],validation:"Blocco se area non associata a un reparto",blocking:[],whyMatters:"Le pulizie regolari prevengono contaminazioni"},products:{mandatory:["nome","categoria","data-ricezione","scadenza","fornitore"],validation:"Alert se scadenza imminente (<3 giorni)",blocking:[],whyMatters:"La tracciabilit garantisce sicurezza e conformit"},suppliers:{mandatory:["nome","categoria","contatto","documentazione"],validation:"Minimo 1 per associare prodotti",blocking:["products"],whyMatters:"I fornitori qualificati garantiscono materie prime sicure"},nonConformity:{mandatory:["data","descrizione","azione-correttiva","responsabile"],validation:"Blocco salvataggio se mancano dettagli essenziali",blocking:[],whyMatters:"La gestione delle non conformit previene rischi futuri"}},educationalMessages:{welcome:"Benvenuto nel sistema HACCP! Questo sistema ti guider nella gestione della sicurezza alimentare.",whyHaccp:"L'HACCP  un sistema preventivo richiesto per legge che garantisce la sicurezza alimentare.",dataImportance:"Ogni dato registrato contribuisce alla sicurezza e alla conformit normativa.",responsibility:"La sicurezza alimentare  responsabilit di tutti i membri dello staff."},getRequirement:e=>pi.requirements[e]||null,getGuideline:e=>pi.guidelines[e]||null,getPrinciple:e=>pi.principles.find(t=>t.id===e)||null,validateRequirement:(e,t)=>{const r=pi.getRequirement(e);if(!r)return{valid:!1,error:"Sezione non trovata"};const i=r.mandatory.filter(a=>!t[a]);return{valid:i.length===0,missing:i,message:i.length>0?`Campi mancanti: ${i.join(", ")}`:"Tutti i campi obbligatori sono compilati"}},getBlockingSections:e=>{const t=pi.getRequirement(e);return t?t.blocking:[]},isSectionBlocked:(e,t)=>{if(!pi.getRequirement(e))return!1;switch(e){case"temperatures":return!t.refrigerators||t.refrigerators.length===0;case"cleaning":return!t.refrigerators||t.refrigerators.length===0||!t.staff||t.staff.length===0;case"inventory":return!t.departments||t.departments.length===0||!t.refrigerators||t.refrigerators.length===0;case"products":return!t.suppliers||t.suppliers.length===0;default:return!1}}};function C4(){re.useState(new Set(["principles"]));const[e,t]=re.useState("principles"),[r,i]=re.useState(""),a=pi.principles.filter(g=>g.title.toLowerCase().includes(r.toLowerCase())||g.description.toLowerCase().includes(r.toLowerCase())),s=Object.entries(pi.guidelines).filter(([g,v])=>v.title.toLowerCase().includes(r.toLowerCase())||v.whyMatters&&v.whyMatters.toLowerCase().includes(r.toLowerCase())),l=g=>n.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(og,{className:"h-5 w-5"}),g.title]}),n.jsx("p",{className:"text-blue-800 mb-2",children:g.description}),n.jsxs("div",{className:"bg-blue-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Implementazione:"}),n.jsx("p",{className:"text-sm text-blue-800",children:g.implementation})]})]}),n.jsx(Zn,{className:"h-6 w-6 text-blue-600 flex-shrink-0 ml-2"})]})},g.id),c=(g,v)=>n.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:[n.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[m(g),v.title]}),v.frequency&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Frequenza:"}),n.jsx("p",{className:"text-green-700",children:v.frequency})]}),v.criticalPoints&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Punti di Controllo:"}),n.jsx("div",{className:"space-y-2",children:v.criticalPoints.map((p,j)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:p.name}),n.jsxs("p",{className:"text-sm text-green-800",children:["Range: ",p.range.min,"C - ",p.range.max||"","C"]}),n.jsx("p",{className:"text-sm text-green-700",children:p.description})]},j))})]}),v.zones&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Zone e Frequenza:"}),n.jsx("div",{className:"space-y-2",children:v.zones.map((p,j)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:p.name}),n.jsxs("p",{className:"text-sm text-green-800",children:["Frequenza: ",p.frequency]}),n.jsxs("p",{className:"text-sm text-green-700",children:["Prodotti: ",p.products.join(", ")]})]},j))})]}),v.roles&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Ruoli e Responsabilit:"}),n.jsx("div",{className:"space-y-2",children:v.roles.map((p,j)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:p.name}),n.jsxs("div",{className:"text-sm text-green-800",children:[n.jsx("p",{children:"Responsabilit:"}),n.jsx("ul",{className:"list-disc list-inside ml-2",children:p.responsibilities.map((w,A)=>n.jsx("li",{children:w},A))})]})]},j))})]}),v.correctiveActions&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Azioni Correttive:"}),n.jsx("ul",{className:"list-disc list-inside space-y-1",children:v.correctiveActions.map((p,j)=>n.jsx("li",{className:"text-green-700",children:p},j))})]}),v.whyMatters&&n.jsxs("div",{className:"bg-green-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Perch  importante:"}),n.jsx("p",{className:"text-sm text-green-800",children:v.whyMatters})]})]},v.id),u=(g,v)=>n.jsxs("div",{className:"mb-4 p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[n.jsxs("h4",{className:"font-semibold text-orange-900 mb-3 flex items-center gap-2",children:[n.jsx(Sr,{className:"h-5 w-5"}),x(g)]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Dati obbligatori:"}),n.jsx("ul",{className:"list-disc list-inside space-y-1",children:v.mandatory.map((p,j)=>n.jsx("li",{className:"text-orange-700",children:p},j))})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Validazione:"}),n.jsx("p",{className:"text-orange-700",children:v.validation})]}),v.blocking&&v.blocking.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Blocca sezioni:"}),n.jsx("p",{className:"text-orange-700",children:v.blocking.join(", ")})]}),n.jsxs("div",{className:"bg-orange-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-orange-900 mb-1",children:"Perch  importante:"}),n.jsx("p",{className:"text-sm text-orange-800",children:v.whyMatters})]})]},g),m=g=>({temperature:n.jsx(gn,{className:"h-5 w-5"}),cleaning:n.jsx(Jd,{className:"h-5 w-5"}),staff:n.jsx(_i,{className:"h-5 w-5"}),products:n.jsx(Fn,{className:"h-5 w-5"}),suppliers:n.jsx(dp,{className:"h-5 w-5"}),nonConformity:n.jsx(tr,{className:"h-5 w-5"})})[g]||n.jsx(Sr,{className:"h-5 w-5"}),x=g=>({refrigerators:"Gestione Frigoriferi",temperature:"Registrazione Temperature",staff:"Gestione Personale",cleaning:"Gestione Pulizie",products:"Gestione Prodotti",suppliers:"Gestione Fornitori",nonConformity:"Gestione Non Conformit"})[g]||g;return n.jsxs("div",{className:"space-y-6",children:[n.jsx(He,{children:n.jsxs(ct,{children:[n.jsxs(ut,{className:"flex items-center gap-3 text-2xl",children:[n.jsx(al,{className:"h-8 w-8 text-blue-600"}),"Manuale HACCP - Guida Completa"]}),n.jsx("p",{className:"text-gray-600",children:"Riferimento completo per normative HACCP e procedure operative"})]})}),n.jsxs(nx,{value:e,onValueChange:t,className:"w-full",children:[n.jsxs(hp,{className:"grid w-full grid-cols-3",children:[n.jsx(di,{value:"principles",children:"Principi Base"}),n.jsx(di,{value:"guidelines",children:"Linee Guida"}),n.jsx(di,{value:"requirements",children:"Requisiti"})]}),n.jsx(hi,{value:"principles",className:"space-y-4",children:n.jsxs(He,{children:[n.jsxs(ct,{children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(og,{className:"h-6 w-6 text-blue-600"}),"Principi Fondamentali HACCP"]}),n.jsx("p",{className:"text-gray-600",children:"Questi principi garantiscono la conformit alle normative di sicurezza alimentare"}),n.jsxs("div",{className:"mt-4 relative",children:[n.jsx("input",{type:"text",placeholder:"Cerca nei principi...",value:r,onChange:g=>i(g.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r&&n.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(X,{className:"h-4 w-4"})})]})]}),n.jsx(Je,{children:a.map(l)})]})}),n.jsx(hi,{value:"guidelines",className:"space-y-4",children:n.jsxs(He,{children:[n.jsxs(ct,{children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(al,{className:"h-6 w-6 text-green-600"}),"Linee Guida Operative"]}),n.jsx("p",{className:"text-gray-600",children:"Procedure dettagliate per ogni area operativa"})]}),n.jsx(Je,{children:s.map(([g,v])=>c(g,v))})]})}),n.jsx(hi,{value:"requirements",className:"space-y-4",children:n.jsxs(He,{children:[n.jsxs(ct,{children:[n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Zn,{className:"h-6 w-6 text-orange-600"}),"Requisiti Minimi e Validazioni"]}),n.jsx("p",{className:"text-gray-600",children:"Dati obbligatori e controlli automatici per ogni sezione"})]}),n.jsx(Je,{children:Object.entries(pi.requirements).map(([g,v])=>u(g,v))})]})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(Sr,{className:"h-6 w-6 text-purple-600"}),"Informazioni Importanti"]})}),n.jsx(Je,{children:n.jsx("div",{className:"space-y-3",children:Object.entries(pi.educationalMessages).map(([g,v])=>n.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500",children:n.jsx("p",{className:"text-purple-800",children:v})},g))})})]}),n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-sm text-gray-500",children:[n.jsxs("p",{children:["Versione ",pi.version,"  Ultimo aggiornamento: ",pi.lastUpdated]}),n.jsx("p",{className:"mt-1",children:"Questo manuale  conforme alle normative HACCP vigenti"})]})})})]})}function k4({currentUser:e,isAdmin:t=!1,onSettingsChange:r}){const[i,a]=re.useState(!1),[s,l]=re.useState({keepPhotosLocal:!1,keepDocsLocal:!0,keepDataLocal:!0,autoShareTemperatures:!0,autoShareInventory:!0,autoShareCleaning:!0,autoShareStaff:t,keepDaysLocal:7,maxPhotosLocal:t?100:20}),[c,u]=re.useState({usedSpace:"45 MB",availableSpace:"2.1 GB",photosCount:23,docsCount:156}),[m]=re.useState(()=>S4("demo-pizzeria"));re.useEffect(()=>{const p=localStorage.getItem("haccp-data-settings");p&&l({...s,...JSON.parse(p)});const j=m.getStorageStats();u({usedSpace:j.localSpace,availableSpace:"2.1 GB",photosCount:j.photosCount,docsCount:j.documentsCount})},[m]);const x=(p,j)=>{const w={...s,[p]:j};l(w),localStorage.setItem("haccp-data-settings",JSON.stringify(w)),r==null||r(w)},g=({title:p,description:j,value:w,onChange:A,icon:N,adminOnly:b=!1})=>b&&!t?null:n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(N,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:p}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j}),b&&n.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:[n.jsx(br,{className:"h-3 w-3"}),"Solo Amministratore"]})]})]}),n.jsx(pe,{variant:"ghost",onClick:()=>A(!w),className:"p-1",children:w?n.jsx(sN,{className:"h-6 w-6 text-green-600"}):n.jsx(aN,{className:"h-6 w-6 text-gray-400"})})]}),v=({title:p,description:j,current:w,options:A,onChange:N,icon:b})=>n.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx(b,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:p}),n.jsx("p",{className:"text-sm text-gray-600",children:j})]})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:A.map(L=>n.jsx(pe,{variant:w===L.value?"default":"outline",onClick:()=>N(L.value),className:"text-sm py-2",children:L.label},L.value))})]});return n.jsxs(re.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Gestione Dati"}),n.jsx("p",{className:"text-gray-600",children:"Decidi cosa tenere sul tuo telefono e cosa condividere"})]}),n.jsxs(He,{className:"bg-gradient-to-r from-green-50 to-blue-50",children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(iN,{className:"h-5 w-5"}),"Spazio sul Tuo Telefono"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.usedSpace}),n.jsx("p",{className:"text-xs text-gray-600",children:"Usato dall'app"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.availableSpace}),n.jsx("p",{className:"text-xs text-gray-600",children:"Spazio libero"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.photosCount}),n.jsx("p",{className:"text-xs text-gray-600",children:"Foto salvate"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:c.docsCount}),n.jsx("p",{className:"text-xs text-gray-600",children:"Documenti"})]})]})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(So,{className:"h-5 w-5"}),"Foto e Documenti"]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsx(g,{icon:Y2,title:"Salva Foto sul Telefono",description:"Le foto delle etichette rimangono sul tuo telefono anche senza internet. Occupa pi spazio ma  pi veloce.",value:s.keepPhotosLocal,onChange:p=>x("keepPhotosLocal",p)}),n.jsx(g,{icon:Wy,title:"Salva Documenti sul Telefono",description:"Tieni una copia di ricette, procedure e documenti sul telefono per consultarli anche offline.",value:s.keepDocsLocal,onChange:p=>x("keepDocsLocal",p)}),n.jsx(v,{icon:tc,title:"Quante Foto Tenere",description:"Numero massimo di foto da tenere salvate sul telefono",current:s.maxPhotosLocal,onChange:p=>x("maxPhotosLocal",p),options:[{value:10,label:"10 foto"},{value:50,label:"50 foto"},{value:100,label:"100 foto"}]})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(ug,{className:"h-5 w-5"}),"Condivisione Automatica"]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[" ",n.jsx("strong",{children:"Cosa significa:"})," Se attivi queste opzioni, le modifiche che fai verranno condivise automaticamente con i colleghi appena hai internet."]})}),n.jsx(g,{icon:gn,title:"Condividi Temperature Automaticamente",description:"Le temperature dei frigoriferi vengono condivise subito con tutti. Importante per la sicurezza alimentare.",value:s.autoShareTemperatures,onChange:p=>x("autoShareTemperatures",p)}),n.jsx(g,{icon:Fn,title:"Condividi Inventario Automaticamente",description:"Quando aggiungi o modifichi prodotti, tutti vedono subito le modifiche.",value:s.autoShareInventory,onChange:p=>x("autoShareInventory",p)}),n.jsx(g,{icon:Zn,title:"Condividi Pulizie Automaticamente",description:"Le attivit di pulizia completate vengono condivise subito con il team.",value:s.autoShareCleaning,onChange:p=>x("autoShareCleaning",p)}),n.jsx(g,{icon:_i,title:"Condividi Gestione Staff",description:"Modifiche a dipendenti, ruoli e permessi vengono condivise automaticamente.",value:s.autoShareStaff,onChange:p=>x("autoShareStaff",p),adminOnly:!0})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(tc,{className:"h-5 w-5"}),"Quanto Tenere sul Telefono"]})}),n.jsxs(Je,{className:"space-y-4",children:[n.jsx(v,{icon:tc,title:"Giorni di Dati da Tenere",description:"Quanti giorni di temperature, pulizie e inventario tenere salvati sul telefono",current:s.keepDaysLocal,onChange:p=>x("keepDaysLocal",p),options:[{value:3,label:"3 giorni"},{value:7,label:"1 settimana"},{value:30,label:"1 mese"}]}),n.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Sr,{className:"h-4 w-4 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Perch  importante?"}),n.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:[n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Meno giorni"})," = telefono pi veloce e pi spazio libero"]}),n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Pi giorni"})," = puoi vedere dati anche senza internet"]}),n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Tutti i dati"})," rimangono sempre salvati online"]})]})]})]})})]})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsx(ut,{children:" Azioni Rapide"})}),n.jsx(Je,{children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs(pe,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{try{const p=await m.cleanupCloudStorage();if(p.success){alert(` ${p.message}
 Spazio liberato: ${p.spaceSaved}`);const j=m.getStorageStats();u(w=>({...w,usedSpace:j.localSpace}))}}catch{alert(" Errore durante la pulizia dello spazio")}},children:[n.jsx(tc,{className:"h-4 w-4"}),"Libera Spazio"]}),n.jsxs(pe,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{var p;try{alert(" Sto sincronizzando tutto..."),await new Promise(w=>setTimeout(w,1500));const j=await m.getRecentChanges();j.success&&alert(` Sincronizzazione completata!
 Trovate ${((p=j.changes)==null?void 0:p.length)||0} modifiche dai colleghi`)}catch{alert(" Errore durante la sincronizzazione")}},children:[n.jsx(ug,{className:"h-4 w-4"}),"Sincronizza Ora"]})]})})]}),n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(al,{className:"h-5 w-5"}),"Manuale HACCP"]})}),n.jsx(Je,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:"Consulta la guida completa per normative HACCP e procedure operative. Questo manuale ti aiuter a comprendere i requisiti e implementare correttamente le procedure."}),n.jsxs(pe,{variant:"outline",className:"flex items-center gap-2 w-full",onClick:()=>a(!0),children:[n.jsx(al,{className:"h-4 w-4"}),"Apri Manuale HACCP"]})]})})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Manuale HACCP"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>a(!1),children:" Chiudi"})]}),n.jsx("div",{className:"overflow-y-auto h-full p-4",children:n.jsx(C4,{})})]})})]})}function A4({isOpen:e,onClose:t,onLogin:r,users:i,onAddUser:a}){const[s,l]=re.useState(""),[c,u]=re.useState(""),[m,x]=re.useState(!1),[g,v]=re.useState(!1),[p,j]=re.useState(""),[w,A]=re.useState({name:"",pin:"",role:"employee",department:""}),[N,b]=re.useState([]),[L,G]=re.useState([]);re.useEffect(()=>{const J=localStorage.getItem("haccp-departments"),ee=localStorage.getItem("haccp-departments-version"),_=["Banconisti","Cuochi","Amministrazione"];if(ee!=="2.0"||!J)b(_),G(_);else try{const E=JSON.parse(J).filter(ae=>ae.isCustom).map(ae=>ae.name),q=[...E];_.forEach(ae=>{E.includes(ae)||q.push(ae)}),b(q),G(_)}catch(D){console.error("Errore nel caricamento reparti:",D),b(_),G(_)}},[]);const ne=()=>{if(!s||!c){j("Seleziona utente e inserisci PIN");return}const J=i.find(ee=>ee.id===s);if(!J){j("Utente non trovato");return}if(J.pin!==c){j("PIN non corretto");return}r(J),V()},ce=()=>{if(!w.name.trim()||!w.pin.trim()){j("Nome e PIN sono obbligatori");return}if(w.pin.length!==4){j("Il PIN deve essere di 4 cifre");return}if(i.some(J=>J.pin===w.pin)){j("PIN gi in uso, scegline un altro");return}a(w),x(!1),A({name:"",pin:"",role:"employee",department:""}),j("")},V=()=>{l(""),u(""),j(""),x(!1),v(!1)},O=()=>{V(),t()};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:m?"Aggiungi Nuovo Utente":"Inizia il Turno"}),n.jsx(pe,{variant:"ghost",size:"sm",onClick:O,children:n.jsx(un,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"p-6",children:[p&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:p}),m?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"new-name",children:"Nome Completo"}),n.jsx(st,{id:"new-name",value:w.name,onChange:J=>A({...w,name:J.target.value}),placeholder:"es. Mario Rossi"})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"new-pin",children:"PIN (4 cifre)"}),n.jsx(st,{id:"new-pin",type:"password",value:w.pin,onChange:J=>{const ee=J.target.value.replace(/\D/g,"").slice(0,4);A({...w,pin:ee})},maxLength:4,placeholder:""})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"new-role",children:"Ruolo"}),n.jsxs("select",{id:"new-role",value:w.role,onChange:J=>A({...w,role:J.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona ruolo --"}),n.jsx("option",{value:"dipendente",children:"Dipendente (Staff Fisso) (Consigliato)"}),n.jsx("option",{value:"responsabile",children:"Responsabile (Consigliato)"}),n.jsx("option",{value:"collaboratore",children:"Collaboratore Occasionale (Consigliato)"}),n.jsx("option",{value:"admin",children:"Amministratore (Consigliato)"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I ruoli contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"new-department",children:"Reparto"}),n.jsxs("select",{id:"new-department",value:w.department,onChange:J=>A({...w,department:J.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona reparto --"}),N.map(J=>{const ee=L.includes(J);return n.jsxs("option",{value:J,children:[J," ",ee?"(Consigliato)":""]},J)})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I reparti contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(pe,{onClick:ce,className:"flex-1",disabled:!w.name.trim()||w.pin.length!==4,children:[n.jsx(wr,{className:"mr-2 h-4 w-4"}),"Crea Utente"]}),n.jsx(pe,{variant:"outline",onClick:()=>{x(!1),j("")},children:"Indietro"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(et,{htmlFor:"user-select",children:"Seleziona Utente"}),n.jsxs("select",{id:"user-select",value:s,onChange:J=>{l(J.target.value),j("")},className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Scegli utente --"}),i.map(J=>n.jsxs("option",{value:J.id,children:[J.name," (",J.department,")",J.role==="admin"&&" - Admin"]},J.id))]})]}),n.jsxs("div",{children:[n.jsx(et,{htmlFor:"pin",children:"PIN (4 cifre)"}),n.jsxs("div",{className:"relative",children:[n.jsx(st,{id:"pin",type:g?"text":"password",value:c,onChange:J=>{const ee=J.target.value.replace(/\D/g,"").slice(0,4);u(ee),j("")},maxLength:4,placeholder:"",className:"pr-10"}),n.jsx(pe,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>v(!g),children:g?n.jsx(Hy,{className:"h-4 w-4"}):n.jsx(tf,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(pe,{onClick:ne,className:"flex-1",disabled:!s||c.length!==4,children:[n.jsx(Z2,{className:"mr-2 h-4 w-4"}),"Entra"]}),n.jsx(pe,{variant:"outline",onClick:O,children:"Annulla"})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>x(!0),className:"w-full",children:[n.jsx(wr,{className:"mr-2 h-4 w-4"}),"Aggiungi Nuovo Utente"]})})]})]})]})}):null}function L4({activeTab:e,temperatures:t}){const[r,i]=re.useState(!1);re.useEffect(()=>{i(e==="temperature")},[e]);const a=()=>{if(typeof window.jspdf>"u"){alert("Errore: Librerie PDF non caricate. Ricarica la pagina e riprova.");return}if(t.length===0){alert("Nessuna temperatura registrata da esportare.");return}try{const s=["Posizione","Temperatura","Orario"],l=[];t.forEach(v=>{l.push([v.location,`${v.temperature}C`,v.time])});const{jsPDF:c}=window.jspdf,u=new c;u.setFontSize(18),u.text("Report: Temperature HACCP",14,22),u.setFontSize(12);const m=new Date().toLocaleDateString("it-IT");u.text(`Data esportazione: ${m}`,14,32),u.text(`Totale rilevazioni: ${t.length}`,14,40),u.autoTable({startY:50,head:[s],body:l,theme:"striped",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[25,118,210],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:60},1:{cellWidth:40,halign:"center"},2:{cellWidth:50}}});const x=u.internal.getNumberOfPages();u.setFontSize(8);for(let v=1;v<=x;v++)u.setPage(v),u.text(`Mini-ePackPro HACCP - Pagina ${v} di ${x}`,14,u.internal.pageSize.height-10);const g=`report_Temperature_${new Date().toISOString().slice(0,10)}.pdf`;u.save(g)}catch(s){console.error("PDF export error:",s),alert("Errore durante l'esportazione del PDF. Riprova.")}};return r?n.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:n.jsxs(pe,{onClick:a,className:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-xl",size:"lg",children:[n.jsx(Gy,{className:"h-5 w-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Esporta Temperature in PDF"}),n.jsx("span",{className:"sm:hidden",children:"PDF"})]})}):null}const P4=()=>({"haccp-roles":[],"haccp-suppliers":[],"haccp-onboarding":{currentStep:"preset",completedSteps:[],progress:0,startedAt:new Date().toISOString(),lastActivity:new Date().toISOString()},"haccp-presets":[],"haccp-dev-mode":{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:new Date().toISOString()}}),_4=()=>{try{if(new URLSearchParams(window.location.search).get("dev")==="1"){const t={enabled:!0,features:["bypass-onboarding","show-debug-info"],bypassOnboarding:!0,showDebugInfo:!0,lastToggled:new Date().toISOString(),reason:"Attivato via URL parameter"};return localStorage.setItem("haccp-dev-mode",JSON.stringify(t)),console.log(" Dev mode attivato via URL parameter"),!0}}catch(e){console.warn("Errore nell'inizializzazione dev mode:",e)}return!1},gp="haccp-dev-mode",cl=()=>{if(new URLSearchParams(window.location.search).get("dev")==="1")return!0;try{const t=localStorage.getItem(gp);if(t)return JSON.parse(t).enabled===!0}catch(t){console.warn("Errore nel parsing dev mode:",t)}return!1},z4=(e=null,t="")=>{const r=cl(),i=e!==null?e:!r,a={enabled:i,features:i?["bypass-onboarding","show-debug-info"]:[],bypassOnboarding:i,showDebugInfo:i,lastToggled:new Date().toISOString(),reason:t||(i?"Attivato manualmente":"Disattivato manualmente")};try{return localStorage.setItem(gp,JSON.stringify(a)),i&&!r&&window.location.reload(),i}catch(s){return console.error("Errore nel salvataggio dev mode:",s),!1}},xp=()=>{try{const e=localStorage.getItem(gp);if(e)return JSON.parse(e)}catch(e){console.warn("Errore nel parsing dev mode settings:",e)}return{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:null,reason:null}},Sx=e=>cl()?xp().features.includes(e):!1,Cx=()=>cl()&&Sx("bypass-onboarding"),I4=()=>cl()&&Sx("show-debug-info"),M4=()=>I4()?{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,localStorage:{keys:Object.keys(localStorage),size:new Blob(Object.values(localStorage)).size},sessionStorage:{keys:Object.keys(sessionStorage),size:new Blob(Object.values(sessionStorage)).size},url:window.location.href,devMode:xp()}:null,D4=()=>{if(!cl())return!1;try{return["haccp-dev-mode","haccp-onboarding","haccp-presets"].forEach(t=>{localStorage.removeItem(t)}),!0}catch(e){return console.error("Errore nella pulizia dati dev:",e),!1}};function Dg(){const[e,t]=re.useState(!1),[r,i]=re.useState(!1),[a,s]=re.useState(!1),[l,c]=re.useState(null);if(re.useEffect(()=>{const v=()=>{const j=cl();t(j),j&&c(xp())};v();const p=j=>{j.key==="haccp-dev-mode"&&v()};return window.addEventListener("storage",p),()=>{window.removeEventListener("storage",p)}},[]),!e)return null;const u=()=>{z4(!1,"Disattivato via banner")},m=async()=>{confirm(` ATTENZIONE: Stai per rimuovere tutti i dati di sviluppo.

Questo rimuover:
 Modalit dev
 Onboarding
 Preset

I dati HACCP (temperature, pulizie, inventario) NON verranno toccati.

Procedere?`)&&(D4()?(alert(` Dati di sviluppo rimossi con successo!

La modalit dev  stata disattivata.`),window.location.reload()):alert(" Errore nella rimozione dei dati di sviluppo"))},x=()=>{window.location.reload()},g=M4();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-yellow-900 px-4 py-2 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(tr,{className:"h-5 w-5"}),n.jsx("span",{className:"font-bold",children:"DEV MODE ATTIVO"}),n.jsx("span",{className:"text-sm opacity-75",children:" Onboarding bypassato  Debug info  Testing features"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>s(!a),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Mostra info debug",children:n.jsx(Sr,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Impostazioni dev",children:n.jsx(br,{className:"h-4 w-4"})}),n.jsx("button",{onClick:x,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Ricarica pagina",children:n.jsx(rN,{className:"h-4 w-4"})}),n.jsx("button",{onClick:u,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Disattiva dev mode",children:n.jsx(un,{className:"h-4 w-4"})})]})]})}),a&&g&&n.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[n.jsx(Sr,{className:"h-5 w-5"}),"Debug Info"]}),n.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-gray-100 rounded",children:n.jsx(un,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Timestamp:"})," ",g.timestamp]}),n.jsxs("div",{children:[n.jsx("strong",{children:"URL:"})," ",g.url]}),n.jsxs("div",{children:[n.jsx("strong",{children:"User Agent:"})," ",g.userAgent]}),n.jsxs("div",{children:[n.jsx("strong",{children:"LocalStorage:"})," ",g.localStorage.keys.length," chiavi, ",Math.round(g.localStorage.size/1024)," KB"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"SessionStorage:"})," ",g.sessionStorage.keys.length," chiavi, ",Math.round(g.sessionStorage.size/1024)," KB"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Dev Mode Settings:"}),n.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(g.devMode,null,2)})]})]})]}),r&&n.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5"}),"Impostazioni Dev Mode"]}),n.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded",children:n.jsx(un,{className:"h-4 w-4"})})]}),l&&n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Stato:"}),n.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"ATTIVO"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Attivato il:"})," ",new Date(l.lastToggled).toLocaleString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Motivo:"})," ",l.reason]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Features:"}),n.jsx("div",{className:"mt-1 space-y-1",children:l.features.map(v=>n.jsx("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:v},v))})]}),n.jsxs("div",{className:"pt-3 border-t",children:[n.jsxs("button",{onClick:m,className:"w-full px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[n.jsx(Wn,{className:"h-4 w-4"}),"Rimuovi Dati Dev"]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Rimuove solo i dati di sviluppo, mantiene i dati HACCP"})]})]})]}),n.jsx("div",{className:"h-16"})]})}const T4={pizzeria:{name:"Pizzeria",description:"Ristorante con cucina, pizzeria e servizio al tavolo",icon:nN,iconColor:"text-red-600",features:["Frigo A: Verdure, Salumi, Formaggi, Latticini (2-4C)","Frigo B: Surgelati (-19 a -16C)","Dipartimenti: Cucina, Pizzeria","Ruoli: Pizzaiolo, Cameriere, Cassiere"],whyMatters:"Configura automaticamente i punti di conservazione e la struttura organizzativa specifica per pizzerie, garantendo la conformit HACCP fin dall'inizio."},bar:{name:"Bar",description:"Bar con servizio bevande e snack",icon:Vy,iconColor:"text-amber-600",features:["Frigo A: Latticini (2-4C)","Frigo B: Surgelati (-19 a -16C)","Dipartimenti: Banco Bar, Magazzino","Ruoli: Cameriere, Cassiere"],whyMatters:"Configura automaticamente i punti di conservazione e la struttura organizzativa specifica per bar, garantendo la conformit HACCP fin dall'inizio."}};function E4({onPresetSelect:e,currentPreset:t=null}){const[r,i]=re.useState(t);re.useState(!1),re.useEffect(()=>{t&&i(t)},[t]);const a=c=>{i(c)},s=()=>{r&&e(r)},l=c=>{try{const u=localStorage.getItem("haccp-presets");if(u){const m=JSON.parse(u);return m.selected===c&&m.applied===!0}}catch(u){console.warn("Errore nel parsing preset:",u)}return!1};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Seleziona il Tipo di Attivit"}),n.jsx("p",{className:"text-gray-600",children:"Scegli il preset pi adatto per configurare automaticamente le impostazioni base"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Object.entries(T4).map(([c,u])=>{const m=u.icon,x=l(c),g=r===c;return n.jsxs(He,{className:`cursor-pointer transition-all hover:shadow-lg border-2 ${g?"ring-2 ring-blue-500 border-blue-200 bg-blue-50":"border-gray-200 hover:border-gray-300"} ${x?"bg-green-50 border-green-200":""}`,onClick:()=>a(c),children:[n.jsx(ct,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(m,{className:`h-8 w-8 ${u.iconColor}`}),n.jsxs("div",{children:[n.jsx(ut,{className:"text-lg",children:u.name}),n.jsx("p",{className:"text-sm text-gray-600",children:u.description})]})]}),x&&n.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[n.jsx(Zn,{className:"h-5 w-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Applicato"})]})]})}),n.jsx(Je,{className:"pt-0",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm text-gray-700",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Include automaticamente:"}),n.jsx("ul",{className:"space-y-1",children:u.features.map((v,p)=>n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),n.jsx("span",{className:"text-xs",children:v})]},p))})]}),n.jsx("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Sr,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900 text-xs mb-1",children:"Perch  importante?"}),n.jsx("p",{className:"text-xs text-blue-800",children:u.whyMatters})]})]})})]})})]},c)})}),n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Sr,{className:"h-5 w-5 text-gray-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"Cosa succede dopo la selezione?"}),n.jsx("p",{className:"text-sm text-gray-700",children:"Il preset selezionato creer automaticamente i punti di conservazione, i dipartimenti e i ruoli base. Potrai sempre modificarli o aggiungerne di nuovi in seguito."})]})]})}),n.jsx("div",{className:"flex justify-center gap-4",children:n.jsxs(pe,{onClick:s,disabled:!r,className:"px-8 py-3",children:[n.jsx(Zn,{className:"h-5 w-5 mr-2"}),"Conferma Selezione"]})})]})}const F4={id:"",name:"",tempMin:0,tempMax:0,allowedCategories:[],shelfMap:{},notes:"",createdAt:"",updatedAt:""},O4={pizzeria:{refrigerators:[{name:"Frigo A",tempMin:2,tempMax:4,allowedCategories:["Verdure","Salumi","Formaggi","Latticini"],notes:"Frigorifero per prodotti freschi - temperatura critica per sicurezza alimentare",shelfMap:{"Shelf 1":"Verdure (2-4C)","Shelf 2":"Salumi (2-4C)","Shelf 3":"Formaggi (2-4C)","Shelf 4":"Latticini (2-4C)"}},{name:"Frigo B",tempMin:-19,tempMax:-16,allowedCategories:["Surgelati"],notes:"Freezer per surgelati - temperatura critica per mantenere qualit",shelfMap:{"Shelf 1":"Surgelati (-19 a -16C)","Shelf 2":"Surgelati (-19 a -16C)","Shelf 3":"Surgelati (-19 a -16C)"}}],departments:[{name:"Cucina",description:"Preparazione piatti e gestione ingredienti",responsibilities:["Controllo temperature","Gestione scadenze","Pulizia superfici"]},{name:"Pizzeria",description:"Preparazione pizze e impasti",responsibilities:["Controllo temperature","Gestione lievitazione","Pulizia attrezzature"]}],staff:[{name:"Pizzaiolo",role:"dipendente",department:"Pizzeria",responsibilities:["Preparazione pizze","Controllo temperature","Pulizia attrezzature"]},{name:"Cameriere",role:"dipendente",department:"Cucina",responsibilities:["Servizio al tavolo","Controllo temperature","Pulizia superfici"]},{name:"Cassiere",role:"dipendente",department:"Cucina",responsibilities:["Gestione cassa","Controllo scadenze","Pulizia area cassa"]}]},bar:{refrigerators:[{name:"Frigo A",tempMin:2,tempMax:4,allowedCategories:["Latticini"],notes:"Frigorifero per latticini - temperatura critica per sicurezza alimentare",shelfMap:{"Shelf 1":"Latticini (2-4C)","Shelf 2":"Latticini (2-4C)","Shelf 3":"Latticini (2-4C)"}},{name:"Frigo B",tempMin:-19,tempMax:-16,allowedCategories:["Surgelati"],notes:"Freezer per surgelati - temperatura critica per mantenere qualit",shelfMap:{"Shelf 1":"Surgelati (-19 a -16C)","Shelf 2":"Surgelati (-19 a -16C)","Shelf 3":"Surgelati (-19 a -16C)"}}],departments:[{name:"Banco Bar",description:"Preparazione bevande e servizio clienti",responsibilities:["Controllo temperature","Gestione scadenze","Pulizia banco"]},{name:"Magazzino",description:"Gestione scorte e approvvigionamenti",responsibilities:["Controllo temperature","Gestione scadenze","Pulizia magazzino"]}],staff:[{name:"Cameriere",role:"dipendente",department:"Banco Bar",responsibilities:["Servizio clienti","Controllo temperature","Pulizia banco"]},{name:"Cassiere",role:"dipendente",department:"Banco Bar",responsibilities:["Gestione cassa","Controllo scadenze","Pulizia area cassa"]}]}},R4=e=>{try{const t=O4[e];if(!t)throw new Error(`Preset '${e}' non trovato`);const r={success:!0,preset:e,created:{refrigerators:0,departments:0,staff:0},errors:[]};try{const a=JSON.parse(localStorage.getItem("haccp-refrigerators")||"[]"),s=[];if(t.refrigerators.forEach((l,c)=>{if(!a.find(m=>m.name===l.name)){const m={...F4,id:`fridge_${e}_${c+1}_${Date.now()}`,...l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.push(m),r.created.refrigerators++}}),s.length>0){const l=[...a,...s];localStorage.setItem("haccp-refrigerators",JSON.stringify(l))}}catch(a){r.errors.push(`Errore frigoriferi: ${a.message}`)}try{const a=JSON.parse(localStorage.getItem("haccp-departments")||"[]"),s=[];if(t.departments.forEach((l,c)=>{if(!a.find(m=>m.name===l.name)){const m={id:`dept_${e}_${c+1}_${Date.now()}`,...l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.push(m),r.created.departments++}}),s.length>0){const l=[...a,...s];localStorage.setItem("haccp-departments",JSON.stringify(l))}}catch(a){r.errors.push(`Errore dipartimenti: ${a.message}`)}try{const a=JSON.parse(localStorage.getItem("haccp-staff")||"[]"),s=[];if(t.staff.forEach((l,c)=>{if(!a.find(m=>m.name===l.name&&m.department===l.department)){const m={id:`staff_${e}_${c+1}_${Date.now()}`,...l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};s.push(m),r.created.staff++}}),s.length>0){const l=[...a,...s];localStorage.setItem("haccp-staff",JSON.stringify(l))}}catch(a){r.errors.push(`Errore staff: ${a.message}`)}const i={selected:e,applied:!0,appliedAt:new Date().toISOString(),created:r.created};return localStorage.setItem("haccp-presets",JSON.stringify(i)),r.errors.length>0&&(r.success=!1),r}catch(t){return{success:!1,preset:e,created:{refrigerators:0,departments:0,staff:0},errors:[t.message]}}},ha=[{id:"preset",title:"Selezione Attivit",description:"Scegli il tipo di attivit per configurare automaticamente le impostazioni base",icon:rg,required:!0},{id:"departments",title:"Dipartimenti",description:"Organizza la struttura operativa della tua azienda",icon:rg,required:!0},{id:"refrigerators",title:"Punti di Conservazione",description:"Configura frigoriferi e freezer per il controllo temperature",icon:gn,required:!0},{id:"staff",title:"Personale e Ruoli",description:"Registra il personale e assegna responsabilit",icon:_i,required:!0},{id:"suppliers",title:"Fornitori (Opzionale)",description:"Gestisci i fornitori per la tracciabilit dei prodotti",icon:dp,required:!1},{id:"manual",title:"Manuale HACCP (Opzionale)",description:"Consulta la guida operativa per le procedure HACCP",icon:al,required:!1}];function B4({isOpen:e,onClose:t,onComplete:r,currentData:i={}}){const[a,s]=re.useState(0),[l,c]=re.useState(new Set),[u,m]=re.useState({preset:"",departments:[],refrigerators:[],staff:[],suppliers:[],manual:!1});re.useEffect(()=>{if(Cx()){r&&r();return}},[r]),re.useEffect(()=>{const J=localStorage.getItem("haccp-onboarding");if(J)try{const ee=JSON.parse(J);s(ee.currentStep||0),c(new Set(ee.completedSteps||[])),m(ee.formData||u)}catch(ee){console.warn("Errore nel caricamento progresso onboarding:",ee)}},[]);const x=()=>{const J={currentStep:a,completedSteps:Array.from(l),formData:u,lastActivity:new Date().toISOString()};localStorage.setItem("haccp-onboarding",JSON.stringify(J))},g=()=>{if(a<ha.length-1){const J=a+1;s(J),c(ee=>new Set([...ee,ha[a].id])),x()}},v=()=>{a>0&&(s(a-1),x())},p=async()=>{if(c(J=>new Set([...J,ha[a].id])),x(),u.preset)try{const J=await R4(u.preset);J.success?console.log(` Preset ${u.preset} applicato con successo:`,J.created):console.warn(` Preset ${u.preset} applicato con errori:`,J.errors)}catch(J){console.error(` Errore nell'applicazione preset ${u.preset}:`,J)}r&&r(u)},j=(J,ee)=>{m(_=>({..._,[J]:ee})),x()},w=()=>{switch(ha[a].id){case"preset":return A();case"departments":return N();case"refrigerators":return b();case"staff":return L();case"suppliers":return G();case"manual":return ne();default:return null}},A=()=>n.jsx("div",{className:"space-y-6",children:n.jsx(E4,{onPresetSelect:J=>j("preset",J),currentPreset:u.preset})}),N=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Organizza i tuoi dipartimenti"}),n.jsx("p",{className:"text-gray-600",children:"I dipartimenti organizzano la struttura operativa e facilitano la gestione HACCP"})]}),n.jsxs("div",{className:"space-y-4",children:[u.departments.map((J,ee)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx(st,{value:J,onChange:_=>{const D=[...u.departments];D[ee]=_.target.value,j("departments",D)},placeholder:"Nome dipartimento",className:"flex-1"}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{const _=u.departments.filter((D,E)=>E!==ee);j("departments",_)},children:"Rimuovi"})]},ee)),n.jsx(pe,{variant:"outline",onClick:()=>{const J=[...u.departments,""];j("departments",J)},className:"w-full",children:"+ Aggiungi Dipartimento"})]}),n.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Sr,{className:"h-5 w-5 text-green-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-900",children:"Perch  importante?"}),n.jsx("p",{className:"text-sm text-green-800 mt-1",children:"I dipartimenti organizzano le responsabilit, facilitano la gestione HACCP e garantiscono che ogni area abbia procedure specifiche per la sicurezza alimentare."})]})]})})]}),b=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Configura i punti di conservazione"}),n.jsx("p",{className:"text-gray-600",children:"I frigoriferi e freezer sono punti di controllo critici per la sicurezza alimentare"})]}),n.jsxs("div",{className:"space-y-4",children:[u.refrigerators.map((J,ee)=>n.jsxs(He,{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsx(st,{value:J.name,onChange:_=>{const D=[...u.refrigerators];D[ee]={...J,name:_.target.value},j("refrigerators",D)},placeholder:"Nome (es. Frigo A)"}),n.jsx(st,{type:"number",value:J.tempMin,onChange:_=>{const D=[...u.refrigerators];D[ee]={...J,tempMin:_.target.value},j("refrigerators",D)},placeholder:"Temp. min (C)"}),n.jsx(st,{type:"number",value:J.tempMax,onChange:_=>{const D=[...u.refrigerators];D[ee]={...J,tempMax:_.target.value},j("refrigerators",D)},placeholder:"Temp. max (C)"})]}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{const _=u.refrigerators.filter((D,E)=>E!==ee);j("refrigerators",_)},className:"mt-3",children:"Rimuovi"})]},ee)),n.jsx(pe,{variant:"outline",onClick:()=>{const J=[...u.refrigerators,{name:"",tempMin:"",tempMax:""}];j("refrigerators",J)},className:"w-full",children:"+ Aggiungi Punto di Conservazione"})]}),n.jsx("div",{className:"bg-orange-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Sr,{className:"h-5 w-5 text-orange-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-orange-900",children:"Perch  importante?"}),n.jsx("p",{className:"text-sm text-orange-800 mt-1",children:"I punti di conservazione controllano le temperature critiche per la catena del freddo. Ogni temperatura registrata contribuisce alla sicurezza alimentare e alla compliance HACCP."})]})]})})]}),L=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Registra il personale"}),n.jsx("p",{className:"text-gray-600",children:"Il personale formato  responsabile dell'applicazione delle procedure HACCP"})]}),n.jsxs("div",{className:"space-y-4",children:[u.staff.map((J,ee)=>n.jsxs(He,{className:"p-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(st,{value:J.name,onChange:_=>{const D=[...u.staff];D[ee]={...J,name:_.target.value},j("staff",D)},placeholder:"Nome completo"}),n.jsxs("select",{value:J.role,onChange:_=>{const D=[...u.staff];D[ee]={...J,role:_.target.value},j("staff",D)},className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"",children:"Seleziona ruolo"}),n.jsx("option",{value:"amministratore",children:"Amministratore"}),n.jsx("option",{value:"responsabile",children:"Responsabile"}),n.jsx("option",{value:"dipendente",children:"Dipendente"}),n.jsx("option",{value:"collaboratore",children:"Collaboratore Occasionale"})]})]}),n.jsx(pe,{variant:"outline",size:"sm",onClick:()=>{const _=u.staff.filter((D,E)=>E!==ee);j("staff",_)},className:"mt-3",children:"Rimuovi"})]},ee)),n.jsx(pe,{variant:"outline",onClick:()=>{const J=[...u.staff,{name:"",role:""}];j("staff",J)},className:"w-full",children:"+ Aggiungi Membro Staff"})]}),n.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Sr,{className:"h-5 w-5 text-purple-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-purple-900",children:"Perch  importante?"}),n.jsx("p",{className:"text-sm text-purple-800 mt-1",children:"Il personale formato e responsabilizzato garantisce l'applicazione corretta delle procedure HACCP. Ogni ruolo ha responsabilit specifiche per la sicurezza alimentare."})]})]})})]}),G=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Gestione Fornitori (Opzionale)"}),n.jsx("p",{className:"text-gray-600",children:"I fornitori qualificati garantiscono materie prime sicure e conformi"})]}),n.jsxs("div",{className:"text-center py-8",children:[n.jsx(dp,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Questa sezione  opzionale e pu essere configurata successivamente."}),n.jsx(pe,{variant:"outline",onClick:()=>{j("suppliers",[]),g()},children:"Salta per ora"})]})]}),ne=()=>n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Manuale HACCP (Opzionale)"}),n.jsx("p",{className:"text-gray-600",children:"Consulta la guida operativa per le procedure HACCP"})]}),n.jsxs("div",{className:"text-center py-8",children:[n.jsx(al,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Il manuale HACCP  sempre disponibile nella sezione Impostazioni e Dati."}),n.jsx(pe,{variant:"outline",onClick:()=>{j("manual",!0),g()},children:"Salta per ora"})]})]}),ce=Math.round(l.size/ha.length*100),V=a===ha.length-1,O=()=>{const J=ha[a];if(!J.required)return!0;switch(J.id){case"preset":return u.preset;case"departments":return u.departments.length>0&&u.departments.every(ee=>ee.trim());case"refrigerators":return u.refrigerators.length>0&&u.refrigerators.every(ee=>ee.name&&ee.tempMin&&ee.tempMax);case"staff":return u.staff.length>0&&u.staff.every(ee=>ee.name&&ee.role);default:return!0}};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Configurazione Iniziale HACCP"}),n.jsx(pe,{variant:"outline",onClick:t,children:"Chiudi"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Progresso: ",ce,"%"]}),n.jsxs("span",{children:["Step ",a+1," di ",ha.length]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${ce}%`}})})]}),n.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:ha.map((J,ee)=>n.jsxs("div",{className:"flex items-center",children:[ee>0&&n.jsx("div",{className:"w-8 h-px bg-gray-300 mx-2"}),n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${l.has(J.id)?"bg-green-500 text-white":ee===a?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:l.has(J.id)?n.jsx(Zn,{className:"h-4 w-4"}):ee+1})]},J.id))})]}),n.jsx("div",{className:"p-6",children:w()}),n.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[n.jsxs(pe,{variant:"outline",onClick:v,disabled:a===0,children:[n.jsx(Ry,{className:"h-4 w-4 mr-2"}),"Precedente"]}),n.jsx("div",{className:"flex gap-2",children:V?n.jsxs(pe,{onClick:p,disabled:!O(),className:"bg-green-600 hover:bg-green-700",children:[n.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Completa Configurazione"]}):n.jsxs(pe,{onClick:g,disabled:!O(),children:["Avanti",n.jsx(X2,{className:"h-4 w-4 ml-2"})]})})]})]})}):null}function q4({isOpen:e,onClose:t,missingRequirements:r=[],suggestions:i=[],onFixRequirement:a}){if(!e)return null;const s=l=>{a&&a(l),t()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),n.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out",children:[n.jsx("div",{className:"flex justify-center pt-3 pb-2",children:n.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),n.jsx("div",{className:"px-6 pb-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(tr,{className:"h-6 w-6 text-orange-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prerequisiti Richiesti"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completa questi passaggi per accedere alla sezione"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(un,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[n.jsx("div",{className:"space-y-4",children:r.map((l,c)=>{const u=i.find(m=>m.requirement===l);return n.jsx(He,{className:"border-orange-200 bg-orange-50",children:n.jsx(Je,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-sm font-medium text-orange-600",children:c+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-orange-900 mb-2",children:(u==null?void 0:u.action)||`Completa ${l}`}),(u==null?void 0:u.description)&&n.jsx("p",{className:"text-sm text-orange-800 mb-3",children:u.description}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(pe,{size:"sm",onClick:()=>s(l),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[n.jsx(X2,{className:"h-4 w-4 mr-1"}),"Risolvi"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-700",children:[n.jsx(Sr,{className:"h-3 w-3"}),n.jsxs("span",{children:["Priorit: ",(u==null?void 0:u.priority)==="high"?"Alta":"Media"]})]})]})]})]})})},c)})}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Sr,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Perch questi prerequisiti sono importanti?"}),n.jsx("p",{className:"text-sm text-blue-800",children:"I prerequisiti garantiscono che la tua struttura HACCP sia completa e funzionale. Ogni elemento contribuisce alla sicurezza alimentare e alla compliance normativa."})]})]})})]}),n.jsx("div",{className:"px-6 py-4 border-t bg-gray-50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(pe,{variant:"outline",onClick:t,className:"flex-1",children:"Chiudi"}),n.jsxs(pe,{onClick:()=>{a&&a("onboarding"),t()},className:"flex-1",children:[n.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Avvia Onboarding"]})]})})]})]})}const Tg={sequence:[{step:"company",name:"Azienda",description:"Informazioni base dell'azienda",required:!0,whyMatters:"Identifica l'azienda per la tracciabilit HACCP e la compliance normativa"},{step:"departments",name:"Dipartimenti",description:"Almeno 1 dipartimento",required:!0,minCount:1,whyMatters:"Organizza la struttura operativa per la gestione dei processi HACCP"},{step:"refrigerators",name:"Punti di Conservazione",description:"Almeno 1 frigorifero/freezer",required:!0,minCount:1,whyMatters:"Controlla le temperature critiche per la sicurezza alimentare"},{step:"staff",name:"Personale",description:"Almeno 1 membro dello staff",required:!0,minCount:1,whyMatters:"Assicura la responsabilit e la formazione HACCP del personale"}],optional:[{step:"suppliers",name:"Fornitori",description:"Gestione fornitori e approvvigionamenti",whyMatters:"Traccia la provenienza dei prodotti per la sicurezza alimentare"},{step:"manual",name:"Manuale HACCP",description:"Consultazione guida operativa",whyMatters:"Fornisce supporto per le procedure HACCP corrette"}]},Eg={always:["dashboard","data-settings"],conditional:{refrigerators:{requires:["departments"],minCounts:{departments:1},message:"Prima di gestire i punti di conservazione, devi creare almeno un dipartimento per organizzare la struttura operativa.",whyMatters:"I dipartimenti organizzano le responsabilit e facilitano la gestione HACCP"},cleaning:{requires:["departments","refrigerators"],minCounts:{departments:1,refrigerators:1},message:"Per gestire le attivit e mansioni, devi prima creare dipartimenti e punti di conservazione.",whyMatters:"Le attivit HACCP devono essere associate a strutture organizzative e punti di controllo"},inventory:{requires:["departments","refrigerators"],minCounts:{departments:1,refrigerators:1},message:"Per gestire l'inventario, devi prima creare dipartimenti e punti di conservazione.",whyMatters:"I prodotti devono essere assegnati a dipartimenti e conservati in punti controllati"},labels:{requires:["departments","refrigerators"],minCounts:{departments:1,refrigerators:1},message:"Per creare etichette prodotti, devi prima organizzare dipartimenti e punti di conservazione.",whyMatters:"Le etichette devono tracciare la conservazione e la responsabilit HACCP"},staff:{requires:["departments"],minCounts:{departments:1},message:"Per gestire il personale, devi prima creare i dipartimenti di riferimento.",whyMatters:"Il personale deve essere assegnato a dipartimenti per la responsabilit HACCP"}}},$4={temperature:{positive:{min:0,max:8,critical:{min:2,max:6},whyMatters:"Temperature tra 2-6C garantiscono la sicurezza di latticini, salumi e verdure"},negative:{min:-20,max:-18,critical:{min:-19,max:-17},whyMatters:"Temperature tra -19 e -17C mantengono la qualit dei surgelati"},hot:{min:60,max:65,critical:{min:63,max:65},whyMatters:"Temperature sopra 63C prevengono la proliferazione batterica"}},expiry:{warningDays:3,criticalDays:1,whyMatters:"Il controllo delle scadenze previene l'uso di prodotti non sicuri"},frequency:{temperature:"2 volte al giorno",cleaning:"Dopo ogni uso",maintenance:"Settimanale",whyMatters:"La frequenza dei controlli garantisce la continuit della sicurezza alimentare"}},$u=(e,t)=>{if(Eg.always.includes(e))return{isEnabled:!0,requirements:[],message:null};const r=Eg.conditional[e];if(!r)return{isEnabled:!0,requirements:[],message:null};const i=[],a=[];r.requires.forEach(l=>{const u=t[l==="refrigerators"?"refrigerators":l]||[];if(u.length===0)i.push(l);else if(r.minCounts&&r.minCounts[l]){const m=r.minCounts[l];u.length<m&&a.push({requirement:l,current:u.length,required:m})}});const s=i.length===0&&a.length===0;return{isEnabled:s,requirements:r.requires,message:s?null:r.message,missingRequirements:i,unmetCounts:a,whyMatters:r.whyMatters}},U4=e=>{const t=[],r=[];let i=0;return Tg.sequence.forEach((a,s)=>{const l=a.step==="company"?"company":a.step==="departments"?"departments":a.step==="refrigerators"?"refrigerators":a.step==="staff"?"staff":a.step;let c=!1;a.step==="company"?c=e.users&&e.users.length>0:a.minCount?c=(e[l]||[]).length>=a.minCount:c=!!(e[l]&&e[l].length>0),c?(t.push(a.step),i+=100/Tg.sequence.length):r.push(a)}),{completedSteps:t,missingSteps:r,progress:Math.round(i),isComplete:i>=100,nextStep:r[0]||null}},V4=(e,t,r={})=>{const i=$4[e];if(!i)return null;if(e==="temperature"){const a=parseFloat(t);if(isNaN(a))return"Inserisci una temperatura valida";const s=r.isFreezer||a<0,l=r.isHot||a>50;if(s){if(a<i.negative.min||a>i.negative.max)return`Temperature freezer critiche: ${i.negative.min}C a ${i.negative.max}C. ${i.negative.whyMatters}`}else if(l){if(a<i.hot.min)return`Temperature calde critiche: minimo ${i.hot.min}C. ${i.hot.whyMatters}`}else if(a<i.positive.min||a>i.positive.max)return`Temperature positive critiche: ${i.positive.min}C a ${i.positive.max}C. ${i.positive.whyMatters}`}return null},H4=(e={},t=null)=>{const[r,i]=re.useState({isOnboardingComplete:!1,currentSectionAccess:{isEnabled:!0,message:null},missingRequirements:[],onboardingProgress:0}),a=re.useMemo(()=>U4(e),[e]),s=re.useMemo(()=>t?$u(t,e):{isEnabled:!0,message:null},[t,e]);return re.useEffect(()=>{i({isOnboardingComplete:a.isComplete,currentSectionAccess:s,missingRequirements:s.missingRequirements||[],onboardingProgress:a.progress})},[a,s]),{...r,canAccessSection:w=>$u(w,e),areRequirementsMet:w=>$u(w,e).isEnabled,getMissingRequirements:w=>$u(w,e).missingRequirements||[],getNextOnboardingStep:()=>a.nextStep,isOnboardingComplete:()=>a.isComplete,getOnboardingProgress:()=>a.progress,validateField:(w,A,N={})=>V4(w,A,N),getEducationalMessage:w=>({departments:"I dipartimenti organizzano la struttura operativa e facilitano la gestione HACCP",refrigerators:"I punti di conservazione controllano le temperature critiche per la sicurezza alimentare",staff:"Il personale deve essere formato e responsabile per le procedure HACCP",company:"L'identificazione aziendale  necessaria per la tracciabilit e compliance normativa"})[w]||"Questo prerequisito  importante per la sicurezza alimentare HACCP",getSuggestions:(w=[])=>{const A=[];return w.forEach(N=>{switch(N){case"departments":A.push({requirement:N,action:"Crea almeno un dipartimento",description:"Es: Cucina, Pizzeria, Bar, Magazzino",priority:"high"});break;case"refrigerators":A.push({requirement:N,action:"Aggiungi un punto di conservazione",description:"Es: Frigorifero principale, Freezer, Cellar",priority:"high"});break;case"staff":A.push({requirement:N,action:"Registra un membro dello staff",description:"Es: Pizzaiolo, Cameriere, Responsabile",priority:"medium"});break;case"company":A.push({requirement:N,action:"Configura le informazioni aziendali",description:"Nome azienda, indirizzo, responsabile",priority:"high"});break}}),A},onboardingStatus:a,sectionAccess:s}};function G4(){var Fe;const[e,t]=re.useState("dashboard"),[r,i]=re.useState([]),[a,s]=re.useState([]),[l,c]=re.useState([]),[u,m]=re.useState([]),[x,g]=re.useState([]),[v,p]=re.useState([]),[j,w]=re.useState([]),[A,N]=re.useState(null),[b,L]=re.useState([]),[G,ne]=re.useState(!1),[ce,V]=re.useState(!0),[O,J]=re.useState(()=>{const ge=localStorage.getItem("haccp-last-check");return ge?JSON.parse(ge):{}}),[ee,_]=re.useState([]);re.useState(()=>localStorage.getItem("haccp-last-sync")||null),re.useState(()=>localStorage.getItem("haccp-company-id")||"demo-pizzeria");const[D,E]=re.useState(!1),[q,ae]=re.useState(!1),[ue,we]=re.useState(!1),[Q,de]=re.useState({users:[],departments:[],refrigerators:[],staff:[],cleaning:[],inventory:[]}),ie=H4(Q,e),ze=()=>{const ge=JSON.parse(localStorage.getItem("haccp-users")||"[]"),Pe=JSON.parse(localStorage.getItem("haccp-departments")||"[]"),Se=JSON.parse(localStorage.getItem("haccp-refrigerators")||"[]"),qe=JSON.parse(localStorage.getItem("haccp-staff")||"[]"),$e=JSON.parse(localStorage.getItem("haccp-cleaning")||"[]"),Ke=JSON.parse(localStorage.getItem("haccp-products")||"[]");de({users:ge,departments:Pe,refrigerators:Se,staff:qe,cleaning:$e,inventory:Ke})};re.useEffect(()=>{const ge=P4();Object.entries(ge).forEach(([Ve,Vt])=>{localStorage.getItem(Ve)||localStorage.setItem(Ve,Vt)}),_4(),ze();const Pe=localStorage.getItem("haccp-temperatures"),Se=localStorage.getItem("haccp-cleaning"),qe=localStorage.getItem("haccp-refrigerators"),$e=localStorage.getItem("haccp-staff"),Ke=localStorage.getItem("haccp-products"),ot=localStorage.getItem("haccp-departments"),yt=localStorage.getItem("haccp-product-labels"),Pt=localStorage.getItem("haccp-users");if(localStorage.getItem("haccp-current-user"),Pe&&i(JSON.parse(Pe)),Se&&s(JSON.parse(Se)),qe&&c(JSON.parse(qe)),$e&&m(JSON.parse($e)),Ke&&g(JSON.parse(Ke)),ot&&p(JSON.parse(ot)),yt&&w(JSON.parse(yt)),Pt)L(JSON.parse(Pt));else{const Ve={id:"admin_001",name:"Admin",pin:"0000",role:"admin",department:"Amministrazione",createdAt:new Date().toISOString()};L([Ve]),localStorage.setItem("haccp-users",JSON.stringify([Ve]))}const lt=localStorage.getItem("haccp-show-chat-icon");lt!==null&&V(JSON.parse(lt));const mt=Ve=>{Ve.key==="haccp-show-chat-icon"&&V(JSON.parse(Ve.newValue))};return window.addEventListener("storage",mt),()=>{window.removeEventListener("storage",mt)}},[]),re.useEffect(()=>{},[x,r,a,u,j]),re.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(r))},[r]),re.useEffect(()=>{localStorage.setItem("haccp-refrigerators",JSON.stringify(l))},[l]),re.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(a))},[a]),re.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(u))},[u]),re.useEffect(()=>{localStorage.setItem("haccp-products",JSON.stringify(x))},[x]),re.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(v))},[v]),re.useEffect(()=>{localStorage.setItem("haccp-product-labels",JSON.stringify(j))},[j]);const P=ge=>{N(ge),ne(!1),localStorage.setItem("haccp-current-user",JSON.stringify(ge));const Pe={id:Date.now(),timestamp:new Date().toISOString(),user:ge.id,userName:ge.name,type:"login",description:`Accesso di ${ge.name}`},Se=JSON.parse(localStorage.getItem("haccp-actions")||"[]");Se.push(Pe),localStorage.setItem("haccp-actions",JSON.stringify(Se))},$=()=>{const ge={dashboard:0,cleaning:0,inventory:0,labels:0,staff:0,refrigerators:0},Pe=O.cleaning||"2000-01-01T00:00:00.000Z",Se=a.filter(vt=>new Date(vt.createdAt||vt.timestamp)>new Date(Pe)).length;ge.cleaning+=Se;const qe=O.inventory||"2000-01-01T00:00:00.000Z",$e=new Date,Ke=new Date($e.getTime()+3*24*60*60*1e3),ot=new Date($e.getTime()+4*24*60*60*1e3),yt=x.filter(vt=>{const hn=new Date(vt.expiryDate);return hn>=Ke&&hn<=ot}).length,Pt=x.filter(vt=>new Date(vt.createdAt||vt.addedDate)>new Date(qe)).length;ge.inventory+=yt+Pt;const lt=O.labels||"2000-01-01T00:00:00.000Z",mt=j.filter(vt=>new Date(vt.createdAt||"2000-01-01")>new Date(lt)).length;ge.labels+=mt;const Ve=O.staff||"2000-01-01T00:00:00.000Z",Vt=u&&Array.isArray(u)?u.filter(vt=>vt&&new Date(vt.addedDate||vt.createdAt||"2000-01-01")>new Date(Ve)).length:0;ge.staff+=Vt;const kt=O.refrigerators||"2000-01-01T00:00:00.000Z",Ht=r.filter(vt=>{const zt=new Date(vt.timestamp)>new Date(kt),fr=vt.status==="warning"||vt.status==="danger";return zt&&fr}).length;ge.refrigerators+=Ht;const Tt=x.filter(vt=>{const hn=new Date(vt.expiryDate),zt=new Date;return hn.setHours(0,0,0,0),zt.setHours(0,0,0,0),hn.getTime()===zt.getTime()}).length;return ge.dashboard=Tt+Ht,ge},W=ge=>{const Pe={...O,[ge]:new Date().toISOString()};J(Pe),localStorage.setItem("haccp-last-check",JSON.stringify(Pe))},H=$(),te=({hasNotification:ge,className:Pe=""})=>ge?n.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full ${Pe}`}):null,me=(ge,Pe,Se=null)=>{const qe={id:Se||`${ge}_${Date.now()}`,type:ge,data:Pe,timestamp:new Date().toISOString(),userId:A==null?void 0:A.id,userName:A==null?void 0:A.name};_($e=>[...$e.filter(ot=>!(ot.type===ge&&ot.id===qe.id)),qe])},xe=(ge,Pe,Se)=>{console.log(" TRACKING:",ge,"with",(Pe==null?void 0:Pe.length)||0,"items"),me(ge,Pe,Se)};re.useEffect(()=>{x.length>0&&A&&(console.log(" Products changed:",x.length,"items"),xe("inventory",x,"auto-inventory"))},[x,A]),re.useEffect(()=>{r.length>0&&A&&(console.log(" Temperatures changed:",r.length,"items"),xe("temperatures",r,"auto-temperatures"))},[r,A]),re.useEffect(()=>{a.length>0&&A&&(console.log(" Cleaning changed:",a.length,"items"),xe("cleaning",a,"auto-cleaning"))},[a,A]),re.useEffect(()=>{u.length>0&&A&&(console.log(" Staff changed:",u.length,"items"),xe("staff",u,"auto-staff"))},[u,A]),re.useEffect(()=>{console.log(" PENDING CHANGES:",ee.length,ee)},[ee]);const C=()=>{if(A){const ge={id:Date.now(),timestamp:new Date().toISOString(),user:A.id,userName:A.name,type:"logout",description:`Disconnessione di ${A.name}`},Pe=JSON.parse(localStorage.getItem("haccp-actions")||"[]");Pe.push(ge),localStorage.setItem("haccp-actions",JSON.stringify(Pe))}N(null),t("dashboard"),localStorage.removeItem("haccp-current-user")},K=ge=>{const Pe={...ge,id:`user_${Date.now()}`,createdAt:new Date().toISOString()},Se=[...b,Pe];L(Se),localStorage.setItem("haccp-users",JSON.stringify(Se));const qe={id:`staff_${Date.now()}`,name:ge.name,role:ge.role==="admin"?"Amministratore":ge.role==="dipendente"?"Dipendente":ge.role==="responsabile"?"Responsabile":ge.role==="collaboratore"?"Collaboratore Occasionale":"Dipendente",department:ge.department||"Non assegnato",certification:"",notes:`Utente registrato il ${new Date().toLocaleDateString("it-IT")}`,addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT"),isRegisteredUser:!0,userId:Pe.id},$e=[...u,qe];m($e),localStorage.setItem("haccp-staff",JSON.stringify($e))},R=()=>A&&A.role==="admin",Ce=(()=>{const ge=r.filter(Ke=>Ke.status==="ok").length,Pe=r.filter(Ke=>Ke.status==="danger").length,Se=a.filter(Ke=>!Ke.completed).length,qe=new Date,$e=x.filter(Ke=>{const yt=new Date(Ke.expiryDate)-qe,Pt=Math.ceil(yt/(1e3*60*60*24));return Pt<=7&&Pt>=0}).length;return{temperatureOk:ge,temperatureProblems:Pe,cleaningPending:Se,expiringToday:$e}})(),Re=()=>{const ge={temperatures:r,cleaningTasks:a,staff:u,products:x,departments:v,productLabels:j,exportDate:new Date().toISOString()},Pe=new Blob([JSON.stringify(ge,null,2)],{type:"application/json"}),Se=URL.createObjectURL(Pe),qe=document.createElement("a");qe.href=Se,qe.download=`haccp-data-${new Date().toISOString().split("T")[0]}.json`,qe.click(),URL.revokeObjectURL(Se)},Ne=ge=>{const Pe=ge.target.files[0];if(!Pe)return;const Se=new FileReader;Se.onload=qe=>{try{const $e=JSON.parse(qe.target.result);$e.temperatures&&(i($e.temperatures),localStorage.setItem("haccp-temperatures",JSON.stringify($e.temperatures))),$e.cleaningTasks&&(s($e.cleaningTasks),localStorage.setItem("haccp-cleaning",JSON.stringify($e.cleaningTasks))),$e.staff&&(m($e.staff),localStorage.setItem("haccp-staff",JSON.stringify($e.staff))),$e.products&&(g($e.products),localStorage.setItem("haccp-products",JSON.stringify($e.products))),$e.departments&&(p($e.departments),localStorage.setItem("haccp-departments",JSON.stringify($e.departments))),$e.productLabels&&(w($e.productLabels),localStorage.setItem("haccp-product-labels",JSON.stringify($e.productLabels))),alert("Dati importati con successo!")}catch($e){alert("Errore durante l'importazione del file"),console.error("Import error:",$e)}},Se.readAsText(Pe)};re.useEffect(()=>{if(A&&!q){if(Cx()){ae(!0);return}const ge=localStorage.getItem("haccp-onboarding");if(ge)try{if(JSON.parse(ge).completed){ae(!0);return}}catch(Pe){console.warn("Errore nel parsing onboarding:",Pe)}E(!0)}},[A,q]);const Y=ge=>{E(!1),ae(!0);const Pe={...ge,completed:!0,completedAt:new Date().toISOString()};localStorage.setItem("haccp-onboarding",JSON.stringify(Pe)),ge.preset&&localStorage.setItem("haccp-presets",JSON.stringify({selected:ge.preset,applied:!0,appliedAt:new Date().toISOString()})),ze()},ht=ge=>{ie.canAccessSection(ge).isEnabled||we(!0)},Qe=ge=>{if(ge==="onboarding")E(!0);else switch(ge){case"departments":t("staff");break;case"refrigerators":t("refrigerators");break;case"staff":t("staff");break;default:t("dashboard")}};return A?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Dg,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business HACCP Manager"}),n.jsxs("p",{className:"text-gray-600",children:["Benvenuto, ",n.jsxs("span",{className:"font-['Dancing_Script'] font-semibold text-2xl text-purple-600",children:[A.name," - ",A.role==="admin"?"Admin":"Dipendente"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(pe,{onClick:Re,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Gs,{className:"h-4 w-4"}),"Esporta"]}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(pe,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(cg,{className:"h-4 w-4"}),n.jsx("span",{children:"Importa"})]})}),n.jsx("input",{type:"file",accept:".json",onChange:Ne,className:"hidden"})]})]})]}),n.jsxs(nx,{value:e,onValueChange:ge=>{if(!ie.canAccessSection(ge).isEnabled){ht(ge);return}t(ge),W(ge)},children:[n.jsxs(hp,{className:`grid w-full ${R()?"grid-cols-3 md:grid-cols-9":"grid-cols-3 md:grid-cols-8"} gap-1 mb-8`,children:[n.jsxs(di,{value:"dashboard",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(ng,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Dashboard"}),n.jsx(te,{hasNotification:H.dashboard>0})]}),n.jsxs(di,{value:"refrigerators",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(gn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Frigoriferi"}),n.jsx(te,{hasNotification:H.refrigerators>0})]}),n.jsxs(di,{value:"cleaning",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(Jd,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Attivit e Mansioni"}),n.jsx(te,{hasNotification:H.cleaning>0})]}),n.jsxs(di,{value:"inventory",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(Fn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Inventario"}),n.jsx(te,{hasNotification:H.inventory>0})]}),n.jsxs(di,{value:"labels",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(nc,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Etichette"}),n.jsx(te,{hasNotification:H.labels>0})]}),n.jsxs(di,{value:"ai-assistant",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm",children:[n.jsx(es,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"IA Assistant"})]}),n.jsxs(di,{value:"data-settings",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm",children:[n.jsx(br,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Dati"})]}),R()&&n.jsxs(di,{value:"staff",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(_i,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Gestione"}),n.jsx(te,{hasNotification:H.staff>0})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[R()&&n.jsxs(pe,{variant:"outline",size:"sm",onClick:()=>t("staff"),className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm h-9 px-3",children:[n.jsx(br,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Impostazioni"})]}),n.jsxs(pe,{variant:"outline",size:"sm",onClick:C,className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm h-9 px-3",children:[n.jsx(Ky,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Esci"})]})]})]}),n.jsx(hi,{value:"dashboard",children:n.jsx("div",{className:"space-y-6",children:n.jsx(lN,{temperatures:r,cleaning:a,products:x,staff:u,currentUser:A})})}),n.jsx(hi,{value:"refrigerators",children:n.jsx(mN,{temperatures:r,setTemperatures:ge=>{i(ge),xe("temperatures",ge)},currentUser:A,refrigerators:l,setRefrigerators:ge=>{c(ge),xe("refrigerators",ge)}})}),n.jsx(hi,{value:"cleaning",children:n.jsx(dN,{cleaning:a,setCleaning:ge=>{s(ge),xe("cleaning",ge)},currentUser:A,departments:v})}),n.jsx(hi,{value:"inventory",children:n.jsx(g4,{products:x,setProducts:ge=>{g(ge),xe("inventory",ge)},currentUser:A,refrigerators:l})}),n.jsx(hi,{value:"labels",children:n.jsx(x4,{productLabels:j,setProductLabels:w,products:x,currentUser:A})}),n.jsx(hi,{value:"ai-assistant",children:n.jsx(y4,{currentUser:A,products:x,temperatures:r,cleaning:a,staff:u,onAction:ge=>{console.log("AI Action:",ge)}})}),n.jsx(hi,{value:"data-settings",children:n.jsx(k4,{currentUser:A,isAdmin:R(),onSettingsChange:ge=>{console.log(" Impostazioni dati aggiornate:",ge)}})}),R()&&n.jsx(hi,{value:"staff",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx(fN,{staff:u,setStaff:ge=>{m(ge),xe("staff",ge)},users:b,setUsers:L,currentUser:A,isAdmin:R()}),n.jsx(w4,{temperatures:r,setTemperatures:i,cleaning:a,setCleaning:s,products:x,setProducts:g,refrigerators:l,setRefrigerators:c})]})})]}),n.jsx(L4,{activeTab:e,temperatures:r}),A&&ce&&n.jsx(v4,{currentUser:A,currentSection:e,products:x,temperatures:r,cleaning:a,staff:u,onAction:ge=>{console.log("AI Action:",ge)}}),A&&n.jsx(N4,{products:x,onRecipeSuggestion:ge=>{console.log("Recipe suggestions:",ge)}}),n.jsx(b4,{}),D&&n.jsx(B4,{isOpen:D,onClose:()=>E(!1),onComplete:Y,currentData:Q}),n.jsx(q4,{isOpen:ue,onClose:()=>we(!1),missingRequirements:ie.missingRequirements,suggestions:ie.getSuggestions(),onFixRequirement:Qe})]})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Dg,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Business HACCP Manager"}),n.jsx("p",{className:"text-gray-600",children:"Sistema di Gestione HACCP per Ristoranti"})]}),n.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:n.jsxs(He,{children:[n.jsx(ct,{children:n.jsxs(ut,{className:"flex items-center gap-2",children:[n.jsx(ng,{className:"h-5 w-5"}),"Report Giornalieri - ",new Date().toLocaleDateString("it-IT")]})}),n.jsx(Je,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ce.temperatureOk}),n.jsx("div",{className:"text-sm text-green-700",children:"Temperature OK"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ce.temperatureProblems}),n.jsx("div",{className:"text-sm text-red-700",children:"Problemi Temp."})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ce.cleaningPending}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Pulizie Pending"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ce.expiringToday}),n.jsx("div",{className:"text-sm text-blue-700",children:"Scadenze Prodotti"})]})]})})]})}),n.jsx("div",{className:"max-w-md mx-auto mb-4",children:n.jsx(He,{children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(pe,{onClick:Re,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Gs,{className:"h-4 w-4"}),"Esporta"]}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(pe,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(cg,{className:"h-4 w-4"}),"Importa"]})}),n.jsx("input",{type:"file",accept:".json",onChange:Ne,className:"hidden"})]})]})})})}),n.jsxs("div",{className:"max-w-md mx-auto",children:[b.length>1&&n.jsx(He,{className:"mb-4",children:n.jsx(Je,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-gray-600",children:[n.jsx("div",{className:"text-sm",children:"Ultimo accesso:"}),n.jsx("div",{className:"font-semibold",children:(Fe=b[b.length-1])==null?void 0:Fe.name})]})})}),n.jsx("div",{className:"text-center",children:n.jsxs(pe,{size:"lg",className:"text-lg px-8 py-4",onClick:()=>ne(!0),children:[n.jsx(Qy,{className:"mr-2 h-5 w-5"})," INIZIA TURNO"]})})]})]}),n.jsx(A4,{isOpen:G,onClose:()=>ne(!1),onLogin:P,users:b,onAddUser:K})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&confirm("Nuova versione disponibile. Ricaricare la pagina?")&&window.location.reload()})})}).catch(e=>{console.log("SW registration failed: ",e)})});lm.createRoot(document.getElementById("root")).render(n.jsx(qo.StrictMode,{children:n.jsx(G4,{})}));export{Qt as _,W4 as c,c5 as g};
