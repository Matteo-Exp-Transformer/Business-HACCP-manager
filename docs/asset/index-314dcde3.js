(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const ts of document.querySelectorAll('link[rel="modulepreload"]'))es(ts);new MutationObserver(ts=>{for(const ss of ts)if(ss.type==="childList")for(const rs of ss.addedNodes)rs.tagName==="LINK"&&rs.rel==="modulepreload"&&es(rs)}).observe(document,{childList:!0,subtree:!0});function St(ts){const ss={};return ts.integrity&&(ss.integrity=ts.integrity),ts.referrerPolicy&&(ss.referrerPolicy=ts.referrerPolicy),ts.crossOrigin==="use-credentials"?ss.credentials="include":ts.crossOrigin==="anonymous"?ss.credentials="omit":ss.credentials="same-origin",ss}function es(ts){if(ts.ep)return;ts.ep=!0;const ss=St(ts);fetch(ts.href,ss)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function getAugmentedNamespace(_e){if(_e.__esModule)return _e;var e=_e.default;if(typeof e=="function"){var St=function es(){return this instanceof es?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};St.prototype=e.prototype}else St={};return Object.defineProperty(St,"__esModule",{value:!0}),Object.keys(_e).forEach(function(es){var ts=Object.getOwnPropertyDescriptor(_e,es);Object.defineProperty(St,es,ts.get?ts:{enumerable:!0,get:function(){return _e[es]}})}),St}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$2=Symbol.for("react.forward_ref"),w$1=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(_e){return _e===null||typeof _e!="object"?null:(_e=z$2&&_e[z$2]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$2={};function E$2(_e,e,St){this.props=_e,this.context=e,this.refs=D$2,this.updater=St||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,e){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,e,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$1(){}F$1.prototype=E$2.prototype;function G$2(_e,e,St){this.props=_e,this.context=e,this.refs=D$2,this.updater=St||B$2}var H$2=G$2.prototype=new F$1;H$2.constructor=G$2;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$2(_e,e,St){var es,ts={},ss=null,rs=null;if(e!=null)for(es in e.ref!==void 0&&(rs=e.ref),e.key!==void 0&&(ss=""+e.key),e)J$1.call(e,es)&&!L$2.hasOwnProperty(es)&&(ts[es]=e[es]);var ns=arguments.length-2;if(ns===1)ts.children=St;else if(1<ns){for(var is=Array(ns),os=0;os<ns;os++)is[os]=arguments[os+2];ts.children=is}if(_e&&_e.defaultProps)for(es in ns=_e.defaultProps,ns)ts[es]===void 0&&(ts[es]=ns[es]);return{$$typeof:l$2,type:_e,key:ss,ref:rs,props:ts,_owner:K$2.current}}function N$2(_e,e){return{$$typeof:l$2,type:_e.type,key:e,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$2(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$2}function escape(_e){var e={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(St){return e[St]})}var P$2=/\/+/g;function Q$2(_e,e){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape(""+_e.key):e.toString(36)}function R$2(_e,e,St,es,ts){var ss=typeof _e;(ss==="undefined"||ss==="boolean")&&(_e=null);var rs=!1;if(_e===null)rs=!0;else switch(ss){case"string":case"number":rs=!0;break;case"object":switch(_e.$$typeof){case l$2:case n$2:rs=!0}}if(rs)return rs=_e,ts=ts(rs),_e=es===""?"."+Q$2(rs,0):es,I$2(ts)?(St="",_e!=null&&(St=_e.replace(P$2,"$&/")+"/"),R$2(ts,e,St,"",function(os){return os})):ts!=null&&(O$2(ts)&&(ts=N$2(ts,St+(!ts.key||rs&&rs.key===ts.key?"":(""+ts.key).replace(P$2,"$&/")+"/")+_e)),e.push(ts)),1;if(rs=0,es=es===""?".":es+":",I$2(_e))for(var ns=0;ns<_e.length;ns++){ss=_e[ns];var is=es+Q$2(ss,ns);rs+=R$2(ss,e,St,is,ts)}else if(is=A$2(_e),typeof is=="function")for(_e=is.call(_e),ns=0;!(ss=_e.next()).done;)ss=ss.value,is=es+Q$2(ss,ns++),rs+=R$2(ss,e,St,is,ts);else if(ss==="object")throw e=String(_e),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return rs}function S$2(_e,e,St){if(_e==null)return _e;var es=[],ts=0;return R$2(_e,es,"","",function(ss){return e.call(St,ss,ts++)}),es}function T$2(_e){if(_e._status===-1){var e=_e._result;e=e(),e.then(function(St){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=St)},function(St){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=St)}),_e._status===-1&&(_e._status=0,_e._result=e)}if(_e._status===1)return _e._result.default;throw _e._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};function X$4(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$2,forEach:function(_e,e,St){S$2(_e,function(){e.apply(this,arguments)},St)},count:function(_e){var e=0;return S$2(_e,function(){e++}),e},toArray:function(_e){return S$2(_e,function(e){return e})||[]},only:function(_e){if(!O$2(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$1;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.act=X$4;react_production_min.cloneElement=function(_e,e,St){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var es=C$2({},_e.props),ts=_e.key,ss=_e.ref,rs=_e._owner;if(e!=null){if(e.ref!==void 0&&(ss=e.ref,rs=K$2.current),e.key!==void 0&&(ts=""+e.key),_e.type&&_e.type.defaultProps)var ns=_e.type.defaultProps;for(is in e)J$1.call(e,is)&&!L$2.hasOwnProperty(is)&&(es[is]=e[is]===void 0&&ns!==void 0?ns[is]:e[is])}var is=arguments.length-2;if(is===1)es.children=St;else if(1<is){ns=Array(is);for(var os=0;os<is;os++)ns[os]=arguments[os+2];es.children=ns}return{$$typeof:l$2,type:_e.type,key:ts,ref:ss,props:es,_owner:rs}};react_production_min.createContext=function(_e){return _e={$$typeof:u$1,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$2;react_production_min.createFactory=function(_e){var e=M$2.bind(null,_e);return e.type=_e,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$2,render:_e}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(_e){return{$$typeof:y$1,_payload:{_status:-1,_result:_e},_init:T$2}};react_production_min.memo=function(_e,e){return{$$typeof:x$2,type:_e,compare:e===void 0?null:e}};react_production_min.startTransition=function(_e){var e=V$2.transition;V$2.transition={};try{_e()}finally{V$2.transition=e}};react_production_min.unstable_act=X$4;react_production_min.useCallback=function(_e,e){return U$2.current.useCallback(_e,e)};react_production_min.useContext=function(_e){return U$2.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$2.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,e){return U$2.current.useEffect(_e,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(_e,e,St){return U$2.current.useImperativeHandle(_e,e,St)};react_production_min.useInsertionEffect=function(_e,e){return U$2.current.useInsertionEffect(_e,e)};react_production_min.useLayoutEffect=function(_e,e){return U$2.current.useLayoutEffect(_e,e)};react_production_min.useMemo=function(_e,e){return U$2.current.useMemo(_e,e)};react_production_min.useReducer=function(_e,e,St){return U$2.current.useReducer(_e,e,St)};react_production_min.useRef=function(_e){return U$2.current.useRef(_e)};react_production_min.useState=function(_e){return U$2.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,e,St){return U$2.current.useSyncExternalStore(_e,e,St)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$1=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$2=Object.prototype.hasOwnProperty,n$1=f$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(_e,e,St){var es,ts={},ss=null,rs=null;St!==void 0&&(ss=""+St),e.key!==void 0&&(ss=""+e.key),e.ref!==void 0&&(rs=e.ref);for(es in e)m$2.call(e,es)&&!p$2.hasOwnProperty(es)&&(ts[es]=e[es]);if(_e&&_e.defaultProps)for(es in e=_e.defaultProps,e)ts[es]===void 0&&(ts[es]=e[es]);return{$$typeof:k$1,type:_e,key:ss,ref:rs,props:ts,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function e(Ps,er){var tr=Ps.length;Ps.push(er);e:for(;0<tr;){var vr=tr-1>>>1,ws=Ps[vr];if(0<ts(ws,er))Ps[vr]=er,Ps[tr]=ws,tr=vr;else break e}}function St(Ps){return Ps.length===0?null:Ps[0]}function es(Ps){if(Ps.length===0)return null;var er=Ps[0],tr=Ps.pop();if(tr!==er){Ps[0]=tr;e:for(var vr=0,ws=Ps.length,Vs=ws>>>1;vr<Vs;){var Ys=2*(vr+1)-1,Ws=Ps[Ys],sr=Ys+1,nr=Ps[sr];if(0>ts(Ws,tr))sr<ws&&0>ts(nr,Ws)?(Ps[vr]=nr,Ps[sr]=tr,vr=sr):(Ps[vr]=Ws,Ps[Ys]=tr,vr=Ys);else if(sr<ws&&0>ts(nr,tr))Ps[vr]=nr,Ps[sr]=tr,vr=sr;else break e}}return er}function ts(Ps,er){var tr=Ps.sortIndex-er.sortIndex;return tr!==0?tr:Ps.id-er.id}if(typeof performance=="object"&&typeof performance.now=="function"){var ss=performance;_e.unstable_now=function(){return ss.now()}}else{var rs=Date,ns=rs.now();_e.unstable_now=function(){return rs.now()-ns}}var is=[],os=[],us=1,ps=null,xs=3,cs=!1,ys=!1,gs=!1,vs=typeof setTimeout=="function"?setTimeout:null,ds=typeof clearTimeout=="function"?clearTimeout:null,fs=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Es(Ps){for(var er=St(os);er!==null;){if(er.callback===null)es(os);else if(er.startTime<=Ps)es(os),er.sortIndex=er.expirationTime,e(is,er);else break;er=St(os)}}function Os(Ps){if(gs=!1,Es(Ps),!ys)if(St(is)!==null)ys=!0,Cs(Hs);else{var er=St(os);er!==null&&Us(Os,er.startTime-Ps)}}function Hs(Ps,er){ys=!1,gs&&(gs=!1,ds(Ls),Ls=-1),cs=!0;var tr=xs;try{for(Es(er),ps=St(is);ps!==null&&(!(ps.expirationTime>er)||Ps&&!bs());){var vr=ps.callback;if(typeof vr=="function"){ps.callback=null,xs=ps.priorityLevel;var ws=vr(ps.expirationTime<=er);er=_e.unstable_now(),typeof ws=="function"?ps.callback=ws:ps===St(is)&&es(is),Es(er)}else es(is);ps=St(is)}if(ps!==null)var Vs=!0;else{var Ys=St(os);Ys!==null&&Us(Os,Ys.startTime-er),Vs=!1}return Vs}finally{ps=null,xs=tr,cs=!1}}var Qs=!1,zs=null,Ls=-1,Bs=5,Gs=-1;function bs(){return!(_e.unstable_now()-Gs<Bs)}function As(){if(zs!==null){var Ps=_e.unstable_now();Gs=Ps;var er=!0;try{er=zs(!0,Ps)}finally{er?ks():(Qs=!1,zs=null)}}else Qs=!1}var ks;if(typeof fs=="function")ks=function(){fs(As)};else if(typeof MessageChannel<"u"){var $s=new MessageChannel,qs=$s.port2;$s.port1.onmessage=As,ks=function(){qs.postMessage(null)}}else ks=function(){vs(As,0)};function Cs(Ps){zs=Ps,Qs||(Qs=!0,ks())}function Us(Ps,er){Ls=vs(function(){Ps(_e.unstable_now())},er)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Ps){Ps.callback=null},_e.unstable_continueExecution=function(){ys||cs||(ys=!0,Cs(Hs))},_e.unstable_forceFrameRate=function(Ps){0>Ps||125<Ps?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Bs=0<Ps?Math.floor(1e3/Ps):5},_e.unstable_getCurrentPriorityLevel=function(){return xs},_e.unstable_getFirstCallbackNode=function(){return St(is)},_e.unstable_next=function(Ps){switch(xs){case 1:case 2:case 3:var er=3;break;default:er=xs}var tr=xs;xs=er;try{return Ps()}finally{xs=tr}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Ps,er){switch(Ps){case 1:case 2:case 3:case 4:case 5:break;default:Ps=3}var tr=xs;xs=Ps;try{return er()}finally{xs=tr}},_e.unstable_scheduleCallback=function(Ps,er,tr){var vr=_e.unstable_now();switch(typeof tr=="object"&&tr!==null?(tr=tr.delay,tr=typeof tr=="number"&&0<tr?vr+tr:vr):tr=vr,Ps){case 1:var ws=-1;break;case 2:ws=250;break;case 5:ws=1073741823;break;case 4:ws=1e4;break;default:ws=5e3}return ws=tr+ws,Ps={id:us++,callback:er,priorityLevel:Ps,startTime:tr,expirationTime:ws,sortIndex:-1},tr>vr?(Ps.sortIndex=tr,e(os,Ps),St(is)===null&&Ps===St(os)&&(gs?(ds(Ls),Ls=-1):gs=!0,Us(Os,tr-vr))):(Ps.sortIndex=ws,e(is,Ps),ys||cs||(ys=!0,Cs(Hs))),Ps},_e.unstable_shouldYield=bs,_e.unstable_wrapCallback=function(Ps){var er=xs;return function(){var tr=xs;xs=er;try{return Ps.apply(this,arguments)}finally{xs=tr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$1(_e){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+_e,St=1;St<arguments.length;St++)e+="&args[]="+encodeURIComponent(arguments[St]);return"Minified React error #"+_e+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,e){ha(_e,e),ha(_e+"Capture",e)}function ha(_e,e){for(ea[_e]=e,_e=0;_e<e.length;_e++)da.add(e[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,e,St,es){if(St!==null&&St.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return es?!1:St!==null?!St.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,e,St,es){if(e===null||typeof e>"u"||pa(_e,e,St,es))return!0;if(es)return!1;if(St!==null)switch(St.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$1(_e,e,St,es,ts,ss,rs){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=es,this.attributeNamespace=ts,this.mustUseProperty=St,this.propertyName=_e,this.type=e,this.sanitizeURL=ss,this.removeEmptyString=rs}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var e=_e[0];z$1[e]=new v$1(e,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$1[_e]=new v$1(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$1[_e]=new v$1(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$1[_e]=new v$1(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$1[_e]=new v$1(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$1[_e]=new v$1(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$1[_e]=new v$1(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var e=_e.replace(ra,sa);z$1[e]=new v$1(e,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var e=_e.replace(ra,sa);z$1[e]=new v$1(e,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var e=_e.replace(ra,sa);z$1[e]=new v$1(e,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$1("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$1[_e]=new v$1(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,e,St,es){var ts=z$1.hasOwnProperty(e)?z$1[e]:null;(ts!==null?ts.type!==0:es||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa(e,St,ts,es)&&(St=null),es||ts===null?oa(e)&&(St===null?_e.removeAttribute(e):_e.setAttribute(e,""+St)):ts.mustUseProperty?_e[ts.propertyName]=St===null?ts.type===3?!1:"":St:(e=ts.attributeName,es=ts.attributeNamespace,St===null?_e.removeAttribute(e):(ts=ts.type,St=ts===3||ts===4&&St===!0?"":""+St,es?_e.setAttributeNS(es,e,St):_e.setAttribute(e,St))))}var ua=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$1=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(St){var e=St.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,e){if(!_e||Na)return"";Na=!0;var St=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(os){var es=os}Reflect.construct(_e,[],e)}else{try{e.call()}catch(os){es=os}_e.call(e.prototype)}else{try{throw Error()}catch(os){es=os}_e()}}catch(os){if(os&&es&&typeof os.stack=="string"){for(var ts=os.stack.split(`
`),ss=es.stack.split(`
`),rs=ts.length-1,ns=ss.length-1;1<=rs&&0<=ns&&ts[rs]!==ss[ns];)ns--;for(;1<=rs&&0<=ns;rs--,ns--)if(ts[rs]!==ss[ns]){if(rs!==1||ns!==1)do if(rs--,ns--,0>ns||ts[rs]!==ss[ns]){var is=`
`+ts[rs].replace(" at new "," at ");return _e.displayName&&is.includes("<anonymous>")&&(is=is.replace("<anonymous>",_e.displayName)),is}while(1<=rs&&0<=ns);break}}}finally{Na=!1,Error.prepareStackTrace=St}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var e=_e.render;return _e=_e.displayName,_e||(_e=e.displayName||e.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return e=_e.displayName||null,e!==null?e:Qa(_e.type)||"Memo";case Ha:e=_e._payload,_e=_e._init;try{return Qa(_e(e))}catch{}}return null}function Ra(_e){var e=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=e.render,_e=_e.displayName||_e.name||"",e.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(e);case 8:return e===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var e=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua(_e){var e=Ta(_e)?"checked":"value",St=Object.getOwnPropertyDescriptor(_e.constructor.prototype,e),es=""+_e[e];if(!_e.hasOwnProperty(e)&&typeof St<"u"&&typeof St.get=="function"&&typeof St.set=="function"){var ts=St.get,ss=St.set;return Object.defineProperty(_e,e,{configurable:!0,get:function(){return ts.call(this)},set:function(rs){es=""+rs,ss.call(this,rs)}}),Object.defineProperty(_e,e,{enumerable:St.enumerable}),{getValue:function(){return es},setValue:function(rs){es=""+rs},stopTracking:function(){_e._valueTracker=null,delete _e[e]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var e=_e._valueTracker;if(!e)return!0;var St=e.getValue(),es="";return _e&&(es=Ta(_e)?_e.checked?"true":"false":_e.value),_e=es,_e!==St?(e.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,e){var St=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:St??_e._wrapperState.initialChecked})}function Za(_e,e){var St=e.defaultValue==null?"":e.defaultValue,es=e.checked!=null?e.checked:e.defaultChecked;St=Sa(e.value!=null?e.value:St),_e._wrapperState={initialChecked:es,initialValue:St,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab(_e,e){e=e.checked,e!=null&&ta(_e,"checked",e,!1)}function bb(_e,e){ab(_e,e);var St=Sa(e.value),es=e.type;if(St!=null)es==="number"?(St===0&&_e.value===""||_e.value!=St)&&(_e.value=""+St):_e.value!==""+St&&(_e.value=""+St);else if(es==="submit"||es==="reset"){_e.removeAttribute("value");return}e.hasOwnProperty("value")?cb(_e,e.type,St):e.hasOwnProperty("defaultValue")&&cb(_e,e.type,Sa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(_e.defaultChecked=!!e.defaultChecked)}function db(_e,e,St){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var es=e.type;if(!(es!=="submit"&&es!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+_e._wrapperState.initialValue,St||e===_e.value||(_e.value=e),_e.defaultValue=e}St=_e.name,St!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,St!==""&&(_e.name=St)}function cb(_e,e,St){(e!=="number"||Xa(_e.ownerDocument)!==_e)&&(St==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+St&&(_e.defaultValue=""+St))}var eb=Array.isArray;function fb(_e,e,St,es){if(_e=_e.options,e){e={};for(var ts=0;ts<St.length;ts++)e["$"+St[ts]]=!0;for(St=0;St<_e.length;St++)ts=e.hasOwnProperty("$"+_e[St].value),_e[St].selected!==ts&&(_e[St].selected=ts),ts&&es&&(_e[St].defaultSelected=!0)}else{for(St=""+Sa(St),e=null,ts=0;ts<_e.length;ts++){if(_e[ts].value===St){_e[ts].selected=!0,es&&(_e[ts].defaultSelected=!0);return}e!==null||_e[ts].disabled||(e=_e[ts])}e!==null&&(e.selected=!0)}}function gb(_e,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,e){var St=e.value;if(St==null){if(St=e.children,e=e.defaultValue,St!=null){if(e!=null)throw Error(p$1(92));if(eb(St)){if(1<St.length)throw Error(p$1(93));St=St[0]}e=St}e==null&&(e=""),St=e}_e._wrapperState={initialValue:Sa(St)}}function ib(_e,e){var St=Sa(e.value),es=Sa(e.defaultValue);St!=null&&(St=""+St,St!==_e.value&&(_e.value=St),e.defaultValue==null&&_e.defaultValue!==St&&(_e.defaultValue=St)),es!=null&&(_e.defaultValue=""+es)}function jb(_e){var e=_e.textContent;e===_e._wrapperState.initialValue&&e!==""&&e!==null&&(_e.value=e)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,e){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(e):_e==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,St,es,ts){MSApp.execUnsafeLocalFunction(function(){return _e(e,St,es,ts)})}:_e}(function(_e,e){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=e;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;e.firstChild;)_e.appendChild(e.firstChild)}});function ob(_e,e){if(e){var St=_e.firstChild;if(St&&St===_e.lastChild&&St.nodeType===3){St.nodeValue=e;return}}_e.textContent=e}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(e){e=e+_e.charAt(0).toUpperCase()+_e.substring(1),pb[e]=pb[_e]})});function rb(_e,e,St){return e==null||typeof e=="boolean"||e===""?"":St||typeof e!="number"||e===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+e).trim():e+"px"}function sb(_e,e){_e=_e.style;for(var St in e)if(e.hasOwnProperty(St)){var es=St.indexOf("--")===0,ts=rb(St,e[St],es);St==="float"&&(St="cssFloat"),es?_e.setProperty(St,ts):_e[St]=ts}}var tb=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,e){if(e){if(tb[_e]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,_e));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb(_e,e){if(_e.indexOf("-")===-1)return typeof e.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$1(280));var e=_e.stateNode;e&&(e=Db(e),yb(_e.stateNode,_e.type,e))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,e=Ab;if(Ab=zb=null,Bb(_e),e)for(_e=0;_e<e.length;_e++)Bb(e[_e])}}function Gb(_e,e){return _e(e)}function Hb(){}var Ib=!1;function Jb(_e,e,St){if(Ib)return _e(e,St);Ib=!0;try{return Gb(_e,e,St)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,e){var St=_e.stateNode;if(St===null)return null;var es=Db(St);if(es===null)return null;St=es[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(es=!es.disabled)||(_e=_e.type,es=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!es;break e;default:_e=!1}if(_e)return null;if(St&&typeof St!="function")throw Error(p$1(231,e,typeof St));return St}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,e,St,es,ts,ss,rs,ns,is){var os=Array.prototype.slice.call(arguments,3);try{e.apply(St,os)}catch(us){this.onError(us)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,e,St,es,ts,ss,rs,ns,is){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,e,St,es,ts,ss,rs,ns,is){if(Tb.apply(this,arguments),Ob){if(Ob){var os=Pb;Ob=!1,Pb=null}else throw Error(p$1(198));Qb||(Qb=!0,Rb=os)}}function Vb(_e){var e=_e,St=_e;if(_e.alternate)for(;e.return;)e=e.return;else{_e=e;do e=_e,e.flags&4098&&(St=e.return),_e=e.return;while(_e)}return e.tag===3?St:null}function Wb(_e){if(_e.tag===13){var e=_e.memoizedState;if(e===null&&(_e=_e.alternate,_e!==null&&(e=_e.memoizedState)),e!==null)return e.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$1(188))}function Yb(_e){var e=_e.alternate;if(!e){if(e=Vb(_e),e===null)throw Error(p$1(188));return e!==_e?null:_e}for(var St=_e,es=e;;){var ts=St.return;if(ts===null)break;var ss=ts.alternate;if(ss===null){if(es=ts.return,es!==null){St=es;continue}break}if(ts.child===ss.child){for(ss=ts.child;ss;){if(ss===St)return Xb(ts),_e;if(ss===es)return Xb(ts),e;ss=ss.sibling}throw Error(p$1(188))}if(St.return!==es.return)St=ts,es=ss;else{for(var rs=!1,ns=ts.child;ns;){if(ns===St){rs=!0,St=ts,es=ss;break}if(ns===es){rs=!0,es=ts,St=ss;break}ns=ns.sibling}if(!rs){for(ns=ss.child;ns;){if(ns===St){rs=!0,St=ss,es=ts;break}if(ns===es){rs=!0,es=ss,St=ts;break}ns=ns.sibling}if(!rs)throw Error(p$1(189))}}if(St.alternate!==es)throw Error(p$1(190))}if(St.tag!==3)throw Error(p$1(188));return St.stateNode.current===St?_e:e}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var e=$b(_e);if(e!==null)return e;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec$1=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc$1=null;function mc(_e){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,e){var St=_e.pendingLanes;if(St===0)return 0;var es=0,ts=_e.suspendedLanes,ss=_e.pingedLanes,rs=St&268435455;if(rs!==0){var ns=rs&~ts;ns!==0?es=tc(ns):(ss&=rs,ss!==0&&(es=tc(ss)))}else rs=St&~ts,rs!==0?es=tc(rs):ss!==0&&(es=tc(ss));if(es===0)return 0;if(e!==0&&e!==es&&!(e&ts)&&(ts=es&-es,ss=e&-e,ts>=ss||ts===16&&(ss&4194240)!==0))return e;if(es&4&&(es|=St&16),e=_e.entangledLanes,e!==0)for(_e=_e.entanglements,e&=es;0<e;)St=31-oc(e),ts=1<<St,es|=_e[St],e&=~ts;return es}function vc(_e,e){switch(_e){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,e){for(var St=_e.suspendedLanes,es=_e.pingedLanes,ts=_e.expirationTimes,ss=_e.pendingLanes;0<ss;){var rs=31-oc(ss),ns=1<<rs,is=ts[rs];is===-1?(!(ns&St)||ns&es)&&(ts[rs]=vc(ns,e)):is<=e&&(_e.expiredLanes|=ns),ss&=~ns}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var e=[],St=0;31>St;St++)e.push(_e);return e}function Ac(_e,e,St){_e.pendingLanes|=e,e!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,e=31-oc(e),_e[e]=St}function Bc(_e,e){var St=_e.pendingLanes&~e;_e.pendingLanes=e,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=e,_e.mutableReadLanes&=e,_e.entangledLanes&=e,e=_e.entanglements;var es=_e.eventTimes;for(_e=_e.expirationTimes;0<St;){var ts=31-oc(St),ss=1<<ts;e[ts]=0,es[ts]=-1,_e[ts]=-1,St&=~ss}}function Cc(_e,e){var St=_e.entangledLanes|=e;for(_e=_e.entanglements;St;){var es=31-oc(St),ts=1<<es;ts&e|_e[es]&e&&(_e[es]|=e),St&=~ts}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,e){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(e.pointerId)}}function Tc(_e,e,St,es,ts,ss){return _e===null||_e.nativeEvent!==ss?(_e={blockedOn:e,domEventName:St,eventSystemFlags:es,nativeEvent:ss,targetContainers:[ts]},e!==null&&(e=Cb(e),e!==null&&Fc(e)),_e):(_e.eventSystemFlags|=es,e=_e.targetContainers,ts!==null&&e.indexOf(ts)===-1&&e.push(ts),_e)}function Uc(_e,e,St,es,ts){switch(e){case"focusin":return Lc=Tc(Lc,_e,e,St,es,ts),!0;case"dragenter":return Mc=Tc(Mc,_e,e,St,es,ts),!0;case"mouseover":return Nc=Tc(Nc,_e,e,St,es,ts),!0;case"pointerover":var ss=ts.pointerId;return Oc.set(ss,Tc(Oc.get(ss)||null,_e,e,St,es,ts)),!0;case"gotpointercapture":return ss=ts.pointerId,Pc.set(ss,Tc(Pc.get(ss)||null,_e,e,St,es,ts)),!0}return!1}function Vc(_e){var e=Wc(_e.target);if(e!==null){var St=Vb(e);if(St!==null){if(e=St.tag,e===13){if(e=Wb(St),e!==null){_e.blockedOn=e,Ic(_e.priority,function(){Gc(St)});return}}else if(e===3&&St.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=St.tag===3?St.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var e=_e.targetContainers;0<e.length;){var St=Yc(_e.domEventName,_e.eventSystemFlags,e[0],_e.nativeEvent);if(St===null){St=_e.nativeEvent;var es=new St.constructor(St.type,St);wb=es,St.target.dispatchEvent(es),wb=null}else return e=Cb(St),e!==null&&Fc(e),_e.blockedOn=St,!1;e.shift()}return!0}function Zc(_e,e,St){Xc(_e)&&St.delete(e)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,e){_e.blockedOn===e&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function e(ts){return ad(ts,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var St=1;St<Kc.length;St++){var es=Kc[St];es.blockedOn===_e&&(es.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(e),Pc.forEach(e),St=0;St<Qc.length;St++)es=Qc[St],es.blockedOn===_e&&(es.blockedOn=null);for(;0<Qc.length&&(St=Qc[0],St.blockedOn===null);)Vc(St),St.blockedOn===null&&Qc.shift()}var cd=ua.ReactCurrentBatchConfig,dd=!0;function ed(_e,e,St,es){var ts=C$1,ss=cd.transition;cd.transition=null;try{C$1=1,fd$1(_e,e,St,es)}finally{C$1=ts,cd.transition=ss}}function gd(_e,e,St,es){var ts=C$1,ss=cd.transition;cd.transition=null;try{C$1=4,fd$1(_e,e,St,es)}finally{C$1=ts,cd.transition=ss}}function fd$1(_e,e,St,es){if(dd){var ts=Yc(_e,e,St,es);if(ts===null)hd(_e,e,es,id,St),Sc(_e,es);else if(Uc(ts,_e,e,St,es))es.stopPropagation();else if(Sc(_e,es),e&4&&-1<Rc.indexOf(_e)){for(;ts!==null;){var ss=Cb(ts);if(ss!==null&&Ec(ss),ss=Yc(_e,e,St,es),ss===null&&hd(_e,e,es,id,St),ss===ts)break;ts=ss}ts!==null&&es.stopPropagation()}else hd(_e,e,es,null,St)}}var id=null;function Yc(_e,e,St,es){if(id=null,_e=xb(es),_e=Wc(_e),_e!==null)if(e=Vb(_e),e===null)_e=null;else if(St=e.tag,St===13){if(_e=Wb(e),_e!==null)return _e;_e=null}else if(St===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;_e=null}else e!==_e&&(_e=null);return id=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,e=ld,St=e.length,es,ts="value"in kd?kd.value:kd.textContent,ss=ts.length;for(_e=0;_e<St&&e[_e]===ts[_e];_e++);var rs=St-_e;for(es=1;es<=rs&&e[St-es]===ts[ss-es];es++);return md=ts.slice(_e,1<es?1-es:void 0)}function od(_e){var e=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&e===13&&(_e=13)):_e=e,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function e(St,es,ts,ss,rs){this._reactName=St,this._targetInst=ts,this.type=es,this.nativeEvent=ss,this.target=rs,this.currentTarget=null;for(var ns in _e)_e.hasOwnProperty(ns)&&(St=_e[ns],this[ns]=St?St(ss):ss[ns]);return this.isDefaultPrevented=(ss.defaultPrevented!=null?ss.defaultPrevented:ss.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var St=this.nativeEvent;St&&(St.preventDefault?St.preventDefault():typeof St.returnValue!="unknown"&&(St.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var St=this.nativeEvent;St&&(St.stopPropagation?St.stopPropagation():typeof St.cancelBubble!="unknown"&&(St.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd(sd),ud=A$1({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$1({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$1({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$1({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$1({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$1({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$1({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(_e):(_e=Od[_e])?!!e[_e]:!1}function zd(){return Pd}var Qd=A$1({},ud,{key:function(_e){if(_e.key){var e=Md[_e.key]||_e.key;if(e!=="Unidentified")return e}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$1({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$1({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$1({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$1({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$1=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce$1=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae$1||be$1&&8<be$1&&11>=be$1),ee$1=String.fromCharCode(32),fe$1=!1;function ge$1(_e,e){switch(_e){case"keyup":return $d.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie$1=!1;function je(_e,e){switch(_e){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe$1=!0,ee$1);case"textInput":return _e=e.data,_e===ee$1&&fe$1?null:_e;default:return null}}function ke(_e,e){if(ie$1)return _e==="compositionend"||!ae$1&&ge$1(_e,e)?(_e=nd(),md=ld=kd=null,ie$1=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de$1&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(_e){var e=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return e==="input"?!!le$1[_e.type]:e==="textarea"}function ne$1(_e,e,St,es){Eb(es),e=oe$1(e,"onChange"),0<e.length&&(St=new td$1("onChange","change",null,St,es),_e.push({event:St,listeners:e}))}var pe$1=null,qe=null;function re$1(_e){se$1(_e,0)}function te$1(_e){var e=ue$1(_e);if(Wa(e))return _e}function ve$1(_e,e){if(_e==="change")return e}var we$1=!1;if(ia){var xe;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe=ye$1}else xe=!1;we$1=xe&&(!document.documentMode||9<document.documentMode)}function Ae(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(_e){if(_e.propertyName==="value"&&te$1(qe)){var e=[];ne$1(e,qe,_e,xb(_e)),Jb(re$1,e)}}function Ce(_e,e,St){_e==="focusin"?(Ae(),pe$1=e,qe=St,pe$1.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te$1(qe)}function Ee(_e,e){if(_e==="click")return te$1(e)}function Fe(_e,e){if(_e==="input"||_e==="change")return te$1(e)}function Ge(_e,e){return _e===e&&(_e!==0||1/_e===1/e)||_e!==_e&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie(_e,e){if(He(_e,e))return!0;if(typeof _e!="object"||_e===null||typeof e!="object"||e===null)return!1;var St=Object.keys(_e),es=Object.keys(e);if(St.length!==es.length)return!1;for(es=0;es<St.length;es++){var ts=St[es];if(!ja.call(e,ts)||!He(_e[ts],e[ts]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,e){var St=Je(_e);_e=0;for(var es;St;){if(St.nodeType===3){if(es=_e+St.textContent.length,_e<=e&&es>=e)return{node:St,offset:e-_e};_e=es}e:{for(;St;){if(St.nextSibling){St=St.nextSibling;break e}St=St.parentNode}St=void 0}St=Je(St)}}function Le$1(_e,e){return _e&&e?_e===e?!0:_e&&_e.nodeType===3?!1:e&&e.nodeType===3?Le$1(_e,e.parentNode):"contains"in _e?_e.contains(e):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var _e=window,e=Xa();e instanceof _e.HTMLIFrameElement;){try{var St=typeof e.contentWindow.location.href=="string"}catch{St=!1}if(St)_e=e.contentWindow;else break;e=Xa(_e.document)}return e}function Ne$1(_e){var e=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return e&&(e==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||e==="textarea"||_e.contentEditable==="true")}function Oe(_e){var e=Me(),St=_e.focusedElem,es=_e.selectionRange;if(e!==St&&St&&St.ownerDocument&&Le$1(St.ownerDocument.documentElement,St)){if(es!==null&&Ne$1(St)){if(e=es.start,_e=es.end,_e===void 0&&(_e=e),"selectionStart"in St)St.selectionStart=e,St.selectionEnd=Math.min(_e,St.value.length);else if(_e=(e=St.ownerDocument||document)&&e.defaultView||window,_e.getSelection){_e=_e.getSelection();var ts=St.textContent.length,ss=Math.min(es.start,ts);es=es.end===void 0?ss:Math.min(es.end,ts),!_e.extend&&ss>es&&(ts=es,es=ss,ss=ts),ts=Ke(St,ss);var rs=Ke(St,es);ts&&rs&&(_e.rangeCount!==1||_e.anchorNode!==ts.node||_e.anchorOffset!==ts.offset||_e.focusNode!==rs.node||_e.focusOffset!==rs.offset)&&(e=e.createRange(),e.setStart(ts.node,ts.offset),_e.removeAllRanges(),ss>es?(_e.addRange(e),_e.extend(rs.node,rs.offset)):(e.setEnd(rs.node,rs.offset),_e.addRange(e)))}}for(e=[],_e=St;_e=_e.parentNode;)_e.nodeType===1&&e.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof St.focus=="function"&&St.focus(),St=0;St<e.length;St++)_e=e[St],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re=null,Se=null,Te=!1;function Ue(_e,e,St){var es=St.window===St?St.document:St.nodeType===9?St:St.ownerDocument;Te||Qe==null||Qe!==Xa(es)||(es=Qe,"selectionStart"in es&&Ne$1(es)?es={start:es.selectionStart,end:es.selectionEnd}:(es=(es.ownerDocument&&es.ownerDocument.defaultView||window).getSelection(),es={anchorNode:es.anchorNode,anchorOffset:es.anchorOffset,focusNode:es.focusNode,focusOffset:es.focusOffset}),Se&&Ie(Se,es)||(Se=es,es=oe$1(Re,"onSelect"),0<es.length&&(e=new td$1("onSelect","select",null,e,St),_e.push({event:e,listeners:es}),e.target=Qe)))}function Ve(_e,e){var St={};return St[_e.toLowerCase()]=e.toLowerCase(),St["Webkit"+_e]="webkit"+e,St["Moz"+_e]="moz"+e,St}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var e=We[_e],St;for(St in e)if(e.hasOwnProperty(St)&&St in Ye)return Xe[_e]=e[St];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,e){df.set(_e,e),fa(e,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,e,St){var es=_e.type||"unknown-event";_e.currentTarget=St,Ub(es,e,void 0,_e),_e.currentTarget=null}function se$1(_e,e){e=(e&4)!==0;for(var St=0;St<_e.length;St++){var es=_e[St],ts=es.event;es=es.listeners;e:{var ss=void 0;if(e)for(var rs=es.length-1;0<=rs;rs--){var ns=es[rs],is=ns.instance,os=ns.currentTarget;if(ns=ns.listener,is!==ss&&ts.isPropagationStopped())break e;nf(ts,ns,os),ss=is}else for(rs=0;rs<es.length;rs++){if(ns=es[rs],is=ns.instance,os=ns.currentTarget,ns=ns.listener,is!==ss&&ts.isPropagationStopped())break e;nf(ts,ns,os),ss=is}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$1(_e,e){var St=e[of];St===void 0&&(St=e[of]=new Set);var es=_e+"__bubble";St.has(es)||(pf(e,_e,2,!1),St.add(es))}function qf(_e,e,St){var es=0;e&&(es|=4),pf(St,_e,es,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(St){St!=="selectionchange"&&(mf.has(St)||qf(St,!1,_e),qf(St,!0,_e))});var e=_e.nodeType===9?_e:_e.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(_e,e,St,es){switch(jd(e)){case 1:var ts=ed;break;case 4:ts=gd;break;default:ts=fd$1}St=ts.bind(null,e,St,_e),ts=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(ts=!0),es?ts!==void 0?_e.addEventListener(e,St,{capture:!0,passive:ts}):_e.addEventListener(e,St,!0):ts!==void 0?_e.addEventListener(e,St,{passive:ts}):_e.addEventListener(e,St,!1)}function hd(_e,e,St,es,ts){var ss=es;if(!(e&1)&&!(e&2)&&es!==null)e:for(;;){if(es===null)return;var rs=es.tag;if(rs===3||rs===4){var ns=es.stateNode.containerInfo;if(ns===ts||ns.nodeType===8&&ns.parentNode===ts)break;if(rs===4)for(rs=es.return;rs!==null;){var is=rs.tag;if((is===3||is===4)&&(is=rs.stateNode.containerInfo,is===ts||is.nodeType===8&&is.parentNode===ts))return;rs=rs.return}for(;ns!==null;){if(rs=Wc(ns),rs===null)return;if(is=rs.tag,is===5||is===6){es=ss=rs;continue e}ns=ns.parentNode}}es=es.return}Jb(function(){var os=ss,us=xb(St),ps=[];e:{var xs=df.get(_e);if(xs!==void 0){var cs=td$1,ys=_e;switch(_e){case"keypress":if(od(St)===0)break e;case"keydown":case"keyup":cs=Rd;break;case"focusin":ys="focus",cs=Fd;break;case"focusout":ys="blur",cs=Fd;break;case"beforeblur":case"afterblur":cs=Fd;break;case"click":if(St.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":cs=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":cs=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":cs=Vd;break;case $e:case af:case bf:cs=Hd;break;case cf:cs=Xd;break;case"scroll":cs=vd;break;case"wheel":cs=Zd;break;case"copy":case"cut":case"paste":cs=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":cs=Td}var gs=(e&4)!==0,vs=!gs&&_e==="scroll",ds=gs?xs!==null?xs+"Capture":null:xs;gs=[];for(var fs=os,Es;fs!==null;){Es=fs;var Os=Es.stateNode;if(Es.tag===5&&Os!==null&&(Es=Os,ds!==null&&(Os=Kb(fs,ds),Os!=null&&gs.push(tf(fs,Os,Es)))),vs)break;fs=fs.return}0<gs.length&&(xs=new cs(xs,ys,null,St,us),ps.push({event:xs,listeners:gs}))}}if(!(e&7)){e:{if(xs=_e==="mouseover"||_e==="pointerover",cs=_e==="mouseout"||_e==="pointerout",xs&&St!==wb&&(ys=St.relatedTarget||St.fromElement)&&(Wc(ys)||ys[uf]))break e;if((cs||xs)&&(xs=us.window===us?us:(xs=us.ownerDocument)?xs.defaultView||xs.parentWindow:window,cs?(ys=St.relatedTarget||St.toElement,cs=os,ys=ys?Wc(ys):null,ys!==null&&(vs=Vb(ys),ys!==vs||ys.tag!==5&&ys.tag!==6)&&(ys=null)):(cs=null,ys=os),cs!==ys)){if(gs=Bd,Os="onMouseLeave",ds="onMouseEnter",fs="mouse",(_e==="pointerout"||_e==="pointerover")&&(gs=Td,Os="onPointerLeave",ds="onPointerEnter",fs="pointer"),vs=cs==null?xs:ue$1(cs),Es=ys==null?xs:ue$1(ys),xs=new gs(Os,fs+"leave",cs,St,us),xs.target=vs,xs.relatedTarget=Es,Os=null,Wc(us)===os&&(gs=new gs(ds,fs+"enter",ys,St,us),gs.target=Es,gs.relatedTarget=vs,Os=gs),vs=Os,cs&&ys)t:{for(gs=cs,ds=ys,fs=0,Es=gs;Es;Es=vf(Es))fs++;for(Es=0,Os=ds;Os;Os=vf(Os))Es++;for(;0<fs-Es;)gs=vf(gs),fs--;for(;0<Es-fs;)ds=vf(ds),Es--;for(;fs--;){if(gs===ds||ds!==null&&gs===ds.alternate)break t;gs=vf(gs),ds=vf(ds)}gs=null}else gs=null;cs!==null&&wf(ps,xs,cs,gs,!1),ys!==null&&vs!==null&&wf(ps,vs,ys,gs,!0)}}e:{if(xs=os?ue$1(os):window,cs=xs.nodeName&&xs.nodeName.toLowerCase(),cs==="select"||cs==="input"&&xs.type==="file")var Hs=ve$1;else if(me$1(xs))if(we$1)Hs=Fe;else{Hs=De;var Qs=Ce}else(cs=xs.nodeName)&&cs.toLowerCase()==="input"&&(xs.type==="checkbox"||xs.type==="radio")&&(Hs=Ee);if(Hs&&(Hs=Hs(_e,os))){ne$1(ps,Hs,St,us);break e}Qs&&Qs(_e,xs,os),_e==="focusout"&&(Qs=xs._wrapperState)&&Qs.controlled&&xs.type==="number"&&cb(xs,"number",xs.value)}switch(Qs=os?ue$1(os):window,_e){case"focusin":(me$1(Qs)||Qs.contentEditable==="true")&&(Qe=Qs,Re=os,Se=null);break;case"focusout":Se=Re=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(ps,St,us);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(ps,St,us)}var zs;if(ae$1)e:{switch(_e){case"compositionstart":var Ls="onCompositionStart";break e;case"compositionend":Ls="onCompositionEnd";break e;case"compositionupdate":Ls="onCompositionUpdate";break e}Ls=void 0}else ie$1?ge$1(_e,St)&&(Ls="onCompositionEnd"):_e==="keydown"&&St.keyCode===229&&(Ls="onCompositionStart");Ls&&(de$1&&St.locale!=="ko"&&(ie$1||Ls!=="onCompositionStart"?Ls==="onCompositionEnd"&&ie$1&&(zs=nd()):(kd=us,ld="value"in kd?kd.value:kd.textContent,ie$1=!0)),Qs=oe$1(os,Ls),0<Qs.length&&(Ls=new Ld(Ls,_e,null,St,us),ps.push({event:Ls,listeners:Qs}),zs?Ls.data=zs:(zs=he$1(St),zs!==null&&(Ls.data=zs)))),(zs=ce$1?je(_e,St):ke(_e,St))&&(os=oe$1(os,"onBeforeInput"),0<os.length&&(us=new Ld("onBeforeInput","beforeinput",null,St,us),ps.push({event:us,listeners:os}),us.data=zs))}se$1(ps,e)})}function tf(_e,e,St){return{instance:_e,listener:e,currentTarget:St}}function oe$1(_e,e){for(var St=e+"Capture",es=[];_e!==null;){var ts=_e,ss=ts.stateNode;ts.tag===5&&ss!==null&&(ts=ss,ss=Kb(_e,St),ss!=null&&es.unshift(tf(_e,ss,ts)),ss=Kb(_e,e),ss!=null&&es.push(tf(_e,ss,ts))),_e=_e.return}return es}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,e,St,es,ts){for(var ss=e._reactName,rs=[];St!==null&&St!==es;){var ns=St,is=ns.alternate,os=ns.stateNode;if(is!==null&&is===es)break;ns.tag===5&&os!==null&&(ns=os,ts?(is=Kb(St,ss),is!=null&&rs.unshift(tf(St,is,ns))):ts||(is=Kb(St,ss),is!=null&&rs.push(tf(St,is,ns)))),St=St.return}rs.length!==0&&_e.push({event:e,listeners:rs})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,e,St){if(e=zf(e),zf(_e)!==e&&St)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,e){return _e==="textarea"||_e==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,e){var St=e,es=0;do{var ts=St.nextSibling;if(_e.removeChild(St),ts&&ts.nodeType===8)if(St=ts.data,St==="/$"){if(es===0){_e.removeChild(ts),bd(e);return}es--}else St!=="$"&&St!=="$?"&&St!=="$!"||es++;St=ts}while(St);bd(e)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var e=_e.nodeType;if(e===1||e===3)break;if(e===8){if(e=_e.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var e=0;_e;){if(_e.nodeType===8){var St=_e.data;if(St==="$"||St==="$!"||St==="$?"){if(e===0)return _e;e--}else St==="/$"&&e++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var e=_e[Of];if(e)return e;for(var St=_e.parentNode;St;){if(e=St[uf]||St[Of]){if(St=e.alternate,e.child!==null||St!==null&&St.child!==null)for(_e=Mf(_e);_e!==null;){if(St=_e[Of])return St;_e=Mf(_e)}return e}_e=St,St=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue$1(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$1(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(_e,e){Tf++,Sf[Tf]=_e.current,_e.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,e){var St=_e.type.contextTypes;if(!St)return Vf;var es=_e.stateNode;if(es&&es.__reactInternalMemoizedUnmaskedChildContext===e)return es.__reactInternalMemoizedMaskedChildContext;var ts={},ss;for(ss in St)ts[ss]=e[ss];return es&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=e,_e.__reactInternalMemoizedMaskedChildContext=ts),ts}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(_e,e,St){if(H$1.current!==Vf)throw Error(p$1(168));G$1(H$1,e),G$1(Wf,St)}function bg(_e,e,St){var es=_e.stateNode;if(e=e.childContextTypes,typeof es.getChildContext!="function")return St;es=es.getChildContext();for(var ts in es)if(!(ts in e))throw Error(p$1(108,Ra(_e)||"Unknown",ts));return A$1({},St,es)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,_e),G$1(Wf,Wf.current),!0}function dg(_e,e,St){var es=_e.stateNode;if(!es)throw Error(p$1(169));St?(_e=bg(_e,e,Xf),es.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$1),G$1(H$1,_e)):E$1(Wf),G$1(Wf,St)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,e=C$1;try{var St=eg;for(C$1=1;_e<St.length;_e++){var es=St[_e];do es=es(!0);while(es!==null)}eg=null,fg=!1}catch(ts){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),ts}finally{C$1=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,e){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=e}function ug(_e,e,St){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var es=rg;_e=sg;var ts=32-oc(es)-1;es&=~(1<<ts),St+=1;var ss=32-oc(e)+ts;if(30<ss){var rs=ts-ts%5;ss=(es&(1<<rs)-1).toString(32),es>>=rs,ts-=rs,rg=1<<32-oc(e)+ts|St<<ts|es,sg=ss+_e}else rg=1<<ss|St<<ts|es,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(_e,e){var St=Bg(5,null,null,0);St.elementType="DELETED",St.stateNode=e,St.return=_e,e=_e.deletions,e===null?(_e.deletions=[St],_e.flags|=16):e.push(St)}function Cg(_e,e){switch(_e.tag){case 5:var St=_e.type;return e=e.nodeType!==1||St.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(_e.stateNode=e,xg=_e,yg=Lf(e.firstChild),!0):!1;case 6:return e=_e.pendingProps===""||e.nodeType!==3?null:e,e!==null?(_e.stateNode=e,xg=_e,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(St=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:e,treeContext:St,retryLane:1073741824},St=Bg(18,null,null,0),St.stateNode=e,St.return=_e,_e.child=St,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$1){var e=yg;if(e){var St=e;if(!Cg(_e,e)){if(Dg(_e))throw Error(p$1(418));e=Lf(St.nextSibling);var es=xg;e&&Cg(_e,e)?Ag(es,St):(_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$1(418));_e.flags=_e.flags&-4097|2,I$1=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$1)return Fg(_e),I$1=!0,!1;var e;if((e=_e.tag!==3)&&!(e=_e.tag!==5)&&(e=_e.type,e=e!=="head"&&e!=="body"&&!Ef(_e.type,_e.memoizedProps)),e&&(e=yg)){if(Dg(_e))throw Hg(),Error(p$1(418));for(;e;)Ag(_e,e),e=Lf(e.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$1(317));e:{for(_e=_e.nextSibling,e=0;_e;){if(_e.nodeType===8){var St=_e.data;if(St==="/$"){if(e===0){yg=Lf(_e.nextSibling);break e}e--}else St!=="$"&&St!=="$!"&&St!=="$?"||e++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua.ReactCurrentBatchConfig;function Lg(_e,e,St){if(_e=St.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(St._owner){if(St=St._owner,St){if(St.tag!==1)throw Error(p$1(309));var es=St.stateNode}if(!es)throw Error(p$1(147,_e));var ts=es,ss=""+_e;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===ss?e.ref:(e=function(rs){var ns=ts.refs;rs===null?delete ns[ss]:ns[ss]=rs},e._stringRef=ss,e)}if(typeof _e!="string")throw Error(p$1(284));if(!St._owner)throw Error(p$1(290,_e))}return _e}function Mg(_e,e){throw _e=Object.prototype.toString.call(e),Error(p$1(31,_e==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":_e))}function Ng(_e){var e=_e._init;return e(_e._payload)}function Og(_e){function e(ds,fs){if(_e){var Es=ds.deletions;Es===null?(ds.deletions=[fs],ds.flags|=16):Es.push(fs)}}function St(ds,fs){if(!_e)return null;for(;fs!==null;)e(ds,fs),fs=fs.sibling;return null}function es(ds,fs){for(ds=new Map;fs!==null;)fs.key!==null?ds.set(fs.key,fs):ds.set(fs.index,fs),fs=fs.sibling;return ds}function ts(ds,fs){return ds=Pg(ds,fs),ds.index=0,ds.sibling=null,ds}function ss(ds,fs,Es){return ds.index=Es,_e?(Es=ds.alternate,Es!==null?(Es=Es.index,Es<fs?(ds.flags|=2,fs):Es):(ds.flags|=2,fs)):(ds.flags|=1048576,fs)}function rs(ds){return _e&&ds.alternate===null&&(ds.flags|=2),ds}function ns(ds,fs,Es,Os){return fs===null||fs.tag!==6?(fs=Qg(Es,ds.mode,Os),fs.return=ds,fs):(fs=ts(fs,Es),fs.return=ds,fs)}function is(ds,fs,Es,Os){var Hs=Es.type;return Hs===ya?us(ds,fs,Es.props.children,Os,Es.key):fs!==null&&(fs.elementType===Hs||typeof Hs=="object"&&Hs!==null&&Hs.$$typeof===Ha&&Ng(Hs)===fs.type)?(Os=ts(fs,Es.props),Os.ref=Lg(ds,fs,Es),Os.return=ds,Os):(Os=Rg(Es.type,Es.key,Es.props,null,ds.mode,Os),Os.ref=Lg(ds,fs,Es),Os.return=ds,Os)}function os(ds,fs,Es,Os){return fs===null||fs.tag!==4||fs.stateNode.containerInfo!==Es.containerInfo||fs.stateNode.implementation!==Es.implementation?(fs=Sg(Es,ds.mode,Os),fs.return=ds,fs):(fs=ts(fs,Es.children||[]),fs.return=ds,fs)}function us(ds,fs,Es,Os,Hs){return fs===null||fs.tag!==7?(fs=Tg(Es,ds.mode,Os,Hs),fs.return=ds,fs):(fs=ts(fs,Es),fs.return=ds,fs)}function ps(ds,fs,Es){if(typeof fs=="string"&&fs!==""||typeof fs=="number")return fs=Qg(""+fs,ds.mode,Es),fs.return=ds,fs;if(typeof fs=="object"&&fs!==null){switch(fs.$$typeof){case va:return Es=Rg(fs.type,fs.key,fs.props,null,ds.mode,Es),Es.ref=Lg(ds,null,fs),Es.return=ds,Es;case wa:return fs=Sg(fs,ds.mode,Es),fs.return=ds,fs;case Ha:var Os=fs._init;return ps(ds,Os(fs._payload),Es)}if(eb(fs)||Ka(fs))return fs=Tg(fs,ds.mode,Es,null),fs.return=ds,fs;Mg(ds,fs)}return null}function xs(ds,fs,Es,Os){var Hs=fs!==null?fs.key:null;if(typeof Es=="string"&&Es!==""||typeof Es=="number")return Hs!==null?null:ns(ds,fs,""+Es,Os);if(typeof Es=="object"&&Es!==null){switch(Es.$$typeof){case va:return Es.key===Hs?is(ds,fs,Es,Os):null;case wa:return Es.key===Hs?os(ds,fs,Es,Os):null;case Ha:return Hs=Es._init,xs(ds,fs,Hs(Es._payload),Os)}if(eb(Es)||Ka(Es))return Hs!==null?null:us(ds,fs,Es,Os,null);Mg(ds,Es)}return null}function cs(ds,fs,Es,Os,Hs){if(typeof Os=="string"&&Os!==""||typeof Os=="number")return ds=ds.get(Es)||null,ns(fs,ds,""+Os,Hs);if(typeof Os=="object"&&Os!==null){switch(Os.$$typeof){case va:return ds=ds.get(Os.key===null?Es:Os.key)||null,is(fs,ds,Os,Hs);case wa:return ds=ds.get(Os.key===null?Es:Os.key)||null,os(fs,ds,Os,Hs);case Ha:var Qs=Os._init;return cs(ds,fs,Es,Qs(Os._payload),Hs)}if(eb(Os)||Ka(Os))return ds=ds.get(Es)||null,us(fs,ds,Os,Hs,null);Mg(fs,Os)}return null}function ys(ds,fs,Es,Os){for(var Hs=null,Qs=null,zs=fs,Ls=fs=0,Bs=null;zs!==null&&Ls<Es.length;Ls++){zs.index>Ls?(Bs=zs,zs=null):Bs=zs.sibling;var Gs=xs(ds,zs,Es[Ls],Os);if(Gs===null){zs===null&&(zs=Bs);break}_e&&zs&&Gs.alternate===null&&e(ds,zs),fs=ss(Gs,fs,Ls),Qs===null?Hs=Gs:Qs.sibling=Gs,Qs=Gs,zs=Bs}if(Ls===Es.length)return St(ds,zs),I$1&&tg(ds,Ls),Hs;if(zs===null){for(;Ls<Es.length;Ls++)zs=ps(ds,Es[Ls],Os),zs!==null&&(fs=ss(zs,fs,Ls),Qs===null?Hs=zs:Qs.sibling=zs,Qs=zs);return I$1&&tg(ds,Ls),Hs}for(zs=es(ds,zs);Ls<Es.length;Ls++)Bs=cs(zs,ds,Ls,Es[Ls],Os),Bs!==null&&(_e&&Bs.alternate!==null&&zs.delete(Bs.key===null?Ls:Bs.key),fs=ss(Bs,fs,Ls),Qs===null?Hs=Bs:Qs.sibling=Bs,Qs=Bs);return _e&&zs.forEach(function(bs){return e(ds,bs)}),I$1&&tg(ds,Ls),Hs}function gs(ds,fs,Es,Os){var Hs=Ka(Es);if(typeof Hs!="function")throw Error(p$1(150));if(Es=Hs.call(Es),Es==null)throw Error(p$1(151));for(var Qs=Hs=null,zs=fs,Ls=fs=0,Bs=null,Gs=Es.next();zs!==null&&!Gs.done;Ls++,Gs=Es.next()){zs.index>Ls?(Bs=zs,zs=null):Bs=zs.sibling;var bs=xs(ds,zs,Gs.value,Os);if(bs===null){zs===null&&(zs=Bs);break}_e&&zs&&bs.alternate===null&&e(ds,zs),fs=ss(bs,fs,Ls),Qs===null?Hs=bs:Qs.sibling=bs,Qs=bs,zs=Bs}if(Gs.done)return St(ds,zs),I$1&&tg(ds,Ls),Hs;if(zs===null){for(;!Gs.done;Ls++,Gs=Es.next())Gs=ps(ds,Gs.value,Os),Gs!==null&&(fs=ss(Gs,fs,Ls),Qs===null?Hs=Gs:Qs.sibling=Gs,Qs=Gs);return I$1&&tg(ds,Ls),Hs}for(zs=es(ds,zs);!Gs.done;Ls++,Gs=Es.next())Gs=cs(zs,ds,Ls,Gs.value,Os),Gs!==null&&(_e&&Gs.alternate!==null&&zs.delete(Gs.key===null?Ls:Gs.key),fs=ss(Gs,fs,Ls),Qs===null?Hs=Gs:Qs.sibling=Gs,Qs=Gs);return _e&&zs.forEach(function(As){return e(ds,As)}),I$1&&tg(ds,Ls),Hs}function vs(ds,fs,Es,Os){if(typeof Es=="object"&&Es!==null&&Es.type===ya&&Es.key===null&&(Es=Es.props.children),typeof Es=="object"&&Es!==null){switch(Es.$$typeof){case va:e:{for(var Hs=Es.key,Qs=fs;Qs!==null;){if(Qs.key===Hs){if(Hs=Es.type,Hs===ya){if(Qs.tag===7){St(ds,Qs.sibling),fs=ts(Qs,Es.props.children),fs.return=ds,ds=fs;break e}}else if(Qs.elementType===Hs||typeof Hs=="object"&&Hs!==null&&Hs.$$typeof===Ha&&Ng(Hs)===Qs.type){St(ds,Qs.sibling),fs=ts(Qs,Es.props),fs.ref=Lg(ds,Qs,Es),fs.return=ds,ds=fs;break e}St(ds,Qs);break}else e(ds,Qs);Qs=Qs.sibling}Es.type===ya?(fs=Tg(Es.props.children,ds.mode,Os,Es.key),fs.return=ds,ds=fs):(Os=Rg(Es.type,Es.key,Es.props,null,ds.mode,Os),Os.ref=Lg(ds,fs,Es),Os.return=ds,ds=Os)}return rs(ds);case wa:e:{for(Qs=Es.key;fs!==null;){if(fs.key===Qs)if(fs.tag===4&&fs.stateNode.containerInfo===Es.containerInfo&&fs.stateNode.implementation===Es.implementation){St(ds,fs.sibling),fs=ts(fs,Es.children||[]),fs.return=ds,ds=fs;break e}else{St(ds,fs);break}else e(ds,fs);fs=fs.sibling}fs=Sg(Es,ds.mode,Os),fs.return=ds,ds=fs}return rs(ds);case Ha:return Qs=Es._init,vs(ds,fs,Qs(Es._payload),Os)}if(eb(Es))return ys(ds,fs,Es,Os);if(Ka(Es))return gs(ds,fs,Es,Os);Mg(ds,Es)}return typeof Es=="string"&&Es!==""||typeof Es=="number"?(Es=""+Es,fs!==null&&fs.tag===6?(St(ds,fs.sibling),fs=ts(fs,Es),fs.return=ds,ds=fs):(St(ds,fs),fs=Qg(Es,ds.mode,Os),fs.return=ds,ds=fs),rs(ds)):St(ds,fs)}return vs}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var e=Wg.current;E$1(Wg),_e._currentValue=e}function bh(_e,e,St){for(;_e!==null;){var es=_e.alternate;if((_e.childLanes&e)!==e?(_e.childLanes|=e,es!==null&&(es.childLanes|=e)):es!==null&&(es.childLanes&e)!==e&&(es.childLanes|=e),_e===St)break;_e=_e.return}}function ch(_e,e){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&e&&(dh=!0),_e.firstContext=null)}function eh(_e){var e=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:e,next:null},Yg===null){if(Xg===null)throw Error(p$1(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return e}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,e,St,es){var ts=e.interleaved;return ts===null?(St.next=St,gh(e)):(St.next=ts.next,ts.next=St),e.interleaved=St,ih(_e,es)}function ih(_e,e){_e.lanes|=e;var St=_e.alternate;for(St!==null&&(St.lanes|=e),St=_e,_e=_e.return;_e!==null;)_e.childLanes|=e,St=_e.alternate,St!==null&&(St.childLanes|=e),St=_e,_e=_e.return;return St.tag===3?St.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,e){_e=_e.updateQueue,e.updateQueue===_e&&(e.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,e){return{eventTime:_e,lane:e,tag:0,payload:null,callback:null,next:null}}function nh(_e,e,St){var es=_e.updateQueue;if(es===null)return null;if(es=es.shared,K$1&2){var ts=es.pending;return ts===null?e.next=e:(e.next=ts.next,ts.next=e),es.pending=e,ih(_e,St)}return ts=es.interleaved,ts===null?(e.next=e,gh(es)):(e.next=ts.next,ts.next=e),es.interleaved=e,ih(_e,St)}function oh(_e,e,St){if(e=e.updateQueue,e!==null&&(e=e.shared,(St&4194240)!==0)){var es=e.lanes;es&=_e.pendingLanes,St|=es,e.lanes=St,Cc(_e,St)}}function ph(_e,e){var St=_e.updateQueue,es=_e.alternate;if(es!==null&&(es=es.updateQueue,St===es)){var ts=null,ss=null;if(St=St.firstBaseUpdate,St!==null){do{var rs={eventTime:St.eventTime,lane:St.lane,tag:St.tag,payload:St.payload,callback:St.callback,next:null};ss===null?ts=ss=rs:ss=ss.next=rs,St=St.next}while(St!==null);ss===null?ts=ss=e:ss=ss.next=e}else ts=ss=e;St={baseState:es.baseState,firstBaseUpdate:ts,lastBaseUpdate:ss,shared:es.shared,effects:es.effects},_e.updateQueue=St;return}_e=St.lastBaseUpdate,_e===null?St.firstBaseUpdate=e:_e.next=e,St.lastBaseUpdate=e}function qh(_e,e,St,es){var ts=_e.updateQueue;jh=!1;var ss=ts.firstBaseUpdate,rs=ts.lastBaseUpdate,ns=ts.shared.pending;if(ns!==null){ts.shared.pending=null;var is=ns,os=is.next;is.next=null,rs===null?ss=os:rs.next=os,rs=is;var us=_e.alternate;us!==null&&(us=us.updateQueue,ns=us.lastBaseUpdate,ns!==rs&&(ns===null?us.firstBaseUpdate=os:ns.next=os,us.lastBaseUpdate=is))}if(ss!==null){var ps=ts.baseState;rs=0,us=os=is=null,ns=ss;do{var xs=ns.lane,cs=ns.eventTime;if((es&xs)===xs){us!==null&&(us=us.next={eventTime:cs,lane:0,tag:ns.tag,payload:ns.payload,callback:ns.callback,next:null});e:{var ys=_e,gs=ns;switch(xs=e,cs=St,gs.tag){case 1:if(ys=gs.payload,typeof ys=="function"){ps=ys.call(cs,ps,xs);break e}ps=ys;break e;case 3:ys.flags=ys.flags&-65537|128;case 0:if(ys=gs.payload,xs=typeof ys=="function"?ys.call(cs,ps,xs):ys,xs==null)break e;ps=A$1({},ps,xs);break e;case 2:jh=!0}}ns.callback!==null&&ns.lane!==0&&(_e.flags|=64,xs=ts.effects,xs===null?ts.effects=[ns]:xs.push(ns))}else cs={eventTime:cs,lane:xs,tag:ns.tag,payload:ns.payload,callback:ns.callback,next:null},us===null?(os=us=cs,is=ps):us=us.next=cs,rs|=xs;if(ns=ns.next,ns===null){if(ns=ts.shared.pending,ns===null)break;xs=ns,ns=xs.next,xs.next=null,ts.lastBaseUpdate=xs,ts.shared.pending=null}}while(1);if(us===null&&(is=ps),ts.baseState=is,ts.firstBaseUpdate=os,ts.lastBaseUpdate=us,e=ts.shared.interleaved,e!==null){ts=e;do rs|=ts.lane,ts=ts.next;while(ts!==e)}else ss===null&&(ts.shared.lanes=0);rh|=rs,_e.lanes=rs,_e.memoizedState=ps}}function sh(_e,e,St){if(_e=e.effects,e.effects=null,_e!==null)for(e=0;e<_e.length;e++){var es=_e[e],ts=es.callback;if(ts!==null){if(es.callback=null,es=St,typeof ts!="function")throw Error(p$1(191,ts));ts.call(es)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$1(174));return _e}function yh(_e,e){switch(G$1(wh,e),G$1(vh,_e),G$1(uh,th),_e=e.nodeType,_e){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb(null,"");break;default:_e=_e===8?e.parentNode:e,e=_e.namespaceURI||null,_e=_e.tagName,e=lb(e,_e)}E$1(uh),G$1(uh,e)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(_e){xh(wh.current);var e=xh(uh.current),St=lb(e,_e.type);e!==St&&(G$1(vh,_e),G$1(uh,St))}function Bh(_e){vh.current===_e&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(_e){for(var e=_e;e!==null;){if(e.tag===13){var St=e.memoizedState;if(St!==null&&(St=St.dehydrated,St===null||St.data==="$?"||St.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===_e)break;for(;e.sibling===null;){if(e.return===null||e.return===_e)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua.ReactCurrentDispatcher,Gh=ua.ReactCurrentBatchConfig,Hh=0,M$1=null,N$1=null,O$1=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$1(){throw Error(p$1(321))}function Mh(_e,e){if(e===null)return!1;for(var St=0;St<e.length&&St<_e.length;St++)if(!He(_e[St],e[St]))return!1;return!0}function Nh(_e,e,St,es,ts,ss){if(Hh=ss,M$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=St(es,ts),Jh){ss=0;do{if(Jh=!1,Kh=0,25<=ss)throw Error(p$1(301));ss+=1,O$1=N$1=null,e.updateQueue=null,Fh.current=Qh,_e=St(es,ts)}while(Jh)}if(Fh.current=Rh,e=N$1!==null&&N$1.next!==null,Hh=0,O$1=N$1=M$1=null,Ih=!1,e)throw Error(p$1(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$1===null?M$1.memoizedState=O$1=_e:O$1=O$1.next=_e,O$1}function Uh(){if(N$1===null){var _e=M$1.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var e=O$1===null?M$1.memoizedState:O$1.next;if(e!==null)O$1=e,N$1=_e;else{if(_e===null)throw Error(p$1(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$1===null?M$1.memoizedState=O$1=_e:O$1=O$1.next=_e}return O$1}function Vh(_e,e){return typeof e=="function"?e(_e):e}function Wh(_e){var e=Uh(),St=e.queue;if(St===null)throw Error(p$1(311));St.lastRenderedReducer=_e;var es=N$1,ts=es.baseQueue,ss=St.pending;if(ss!==null){if(ts!==null){var rs=ts.next;ts.next=ss.next,ss.next=rs}es.baseQueue=ts=ss,St.pending=null}if(ts!==null){ss=ts.next,es=es.baseState;var ns=rs=null,is=null,os=ss;do{var us=os.lane;if((Hh&us)===us)is!==null&&(is=is.next={lane:0,action:os.action,hasEagerState:os.hasEagerState,eagerState:os.eagerState,next:null}),es=os.hasEagerState?os.eagerState:_e(es,os.action);else{var ps={lane:us,action:os.action,hasEagerState:os.hasEagerState,eagerState:os.eagerState,next:null};is===null?(ns=is=ps,rs=es):is=is.next=ps,M$1.lanes|=us,rh|=us}os=os.next}while(os!==null&&os!==ss);is===null?rs=es:is.next=ns,He(es,e.memoizedState)||(dh=!0),e.memoizedState=es,e.baseState=rs,e.baseQueue=is,St.lastRenderedState=es}if(_e=St.interleaved,_e!==null){ts=_e;do ss=ts.lane,M$1.lanes|=ss,rh|=ss,ts=ts.next;while(ts!==_e)}else ts===null&&(St.lanes=0);return[e.memoizedState,St.dispatch]}function Xh(_e){var e=Uh(),St=e.queue;if(St===null)throw Error(p$1(311));St.lastRenderedReducer=_e;var es=St.dispatch,ts=St.pending,ss=e.memoizedState;if(ts!==null){St.pending=null;var rs=ts=ts.next;do ss=_e(ss,rs.action),rs=rs.next;while(rs!==ts);He(ss,e.memoizedState)||(dh=!0),e.memoizedState=ss,e.baseQueue===null&&(e.baseState=ss),St.lastRenderedState=ss}return[ss,es]}function Yh(){}function Zh(_e,e){var St=M$1,es=Uh(),ts=e(),ss=!He(es.memoizedState,ts);if(ss&&(es.memoizedState=ts,dh=!0),es=es.queue,$h(ai.bind(null,St,es,_e),[_e]),es.getSnapshot!==e||ss||O$1!==null&&O$1.memoizedState.tag&1){if(St.flags|=2048,bi(9,ci.bind(null,St,es,ts,e),void 0,null),Q$1===null)throw Error(p$1(349));Hh&30||di(St,e,ts)}return ts}function di(_e,e,St){_e.flags|=16384,_e={getSnapshot:e,value:St},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.stores=[_e]):(St=e.stores,St===null?e.stores=[_e]:St.push(_e))}function ci(_e,e,St,es){e.value=St,e.getSnapshot=es,ei(e)&&fi(_e)}function ai(_e,e,St){return St(function(){ei(e)&&fi(_e)})}function ei(_e){var e=_e.getSnapshot;_e=_e.value;try{var St=e();return!He(_e,St)}catch{return!0}}function fi(_e){var e=ih(_e,1);e!==null&&gi(e,_e,1,-1)}function hi(_e){var e=Th();return typeof _e=="function"&&(_e=_e()),e.memoizedState=e.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},e.queue=_e,_e=_e.dispatch=ii.bind(null,M$1,_e),[e.memoizedState,_e]}function bi(_e,e,St,es){return _e={tag:_e,create:e,destroy:St,deps:es,next:null},e=M$1.updateQueue,e===null?(e={lastEffect:null,stores:null},M$1.updateQueue=e,e.lastEffect=_e.next=_e):(St=e.lastEffect,St===null?e.lastEffect=_e.next=_e:(es=St.next,St.next=_e,_e.next=es,e.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,e,St,es){var ts=Th();M$1.flags|=_e,ts.memoizedState=bi(1|e,St,void 0,es===void 0?null:es)}function li(_e,e,St,es){var ts=Uh();es=es===void 0?null:es;var ss=void 0;if(N$1!==null){var rs=N$1.memoizedState;if(ss=rs.destroy,es!==null&&Mh(es,rs.deps)){ts.memoizedState=bi(e,St,ss,es);return}}M$1.flags|=_e,ts.memoizedState=bi(1|e,St,ss,es)}function mi(_e,e){return ki(8390656,8,_e,e)}function $h(_e,e){return li(2048,8,_e,e)}function ni(_e,e){return li(4,2,_e,e)}function oi(_e,e){return li(4,4,_e,e)}function pi(_e,e){if(typeof e=="function")return _e=_e(),e(_e),function(){e(null)};if(e!=null)return _e=_e(),e.current=_e,function(){e.current=null}}function qi(_e,e,St){return St=St!=null?St.concat([_e]):null,li(4,4,pi.bind(null,e,_e),St)}function ri(){}function si(_e,e){var St=Uh();e=e===void 0?null:e;var es=St.memoizedState;return es!==null&&e!==null&&Mh(e,es[1])?es[0]:(St.memoizedState=[_e,e],_e)}function ti(_e,e){var St=Uh();e=e===void 0?null:e;var es=St.memoizedState;return es!==null&&e!==null&&Mh(e,es[1])?es[0]:(_e=_e(),St.memoizedState=[_e,e],_e)}function ui(_e,e,St){return Hh&21?(He(St,e)||(St=yc(),M$1.lanes|=St,rh|=St,_e.baseState=!0),e):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=St)}function vi(_e,e){var St=C$1;C$1=St!==0&&4>St?St:4,_e(!0);var es=Gh.transition;Gh.transition={};try{_e(!1),e()}finally{C$1=St,Gh.transition=es}}function wi(){return Uh().memoizedState}function xi(_e,e,St){var es=yi(_e);if(St={lane:es,action:St,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(e,St);else if(St=hh(_e,e,St,es),St!==null){var ts=R$1();gi(St,_e,es,ts),Bi(St,e,es)}}function ii(_e,e,St){var es=yi(_e),ts={lane:es,action:St,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(e,ts);else{var ss=_e.alternate;if(_e.lanes===0&&(ss===null||ss.lanes===0)&&(ss=e.lastRenderedReducer,ss!==null))try{var rs=e.lastRenderedState,ns=ss(rs,St);if(ts.hasEagerState=!0,ts.eagerState=ns,He(ns,rs)){var is=e.interleaved;is===null?(ts.next=ts,gh(e)):(ts.next=is.next,is.next=ts),e.interleaved=ts;return}}catch{}finally{}St=hh(_e,e,ts,es),St!==null&&(ts=R$1(),gi(St,_e,es,ts),Bi(St,e,es))}}function zi(_e){var e=_e.alternate;return _e===M$1||e!==null&&e===M$1}function Ai(_e,e){Jh=Ih=!0;var St=_e.pending;St===null?e.next=e:(e.next=St.next,St.next=e),_e.pending=e}function Bi(_e,e,St){if(St&4194240){var es=e.lanes;es&=_e.pendingLanes,St|=es,e.lanes=St,Cc(_e,St)}}var Rh={readContext:eh,useCallback:P$1,useContext:P$1,useEffect:P$1,useImperativeHandle:P$1,useInsertionEffect:P$1,useLayoutEffect:P$1,useMemo:P$1,useReducer:P$1,useRef:P$1,useState:P$1,useDebugValue:P$1,useDeferredValue:P$1,useTransition:P$1,useMutableSource:P$1,useSyncExternalStore:P$1,useId:P$1,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,e){return Th().memoizedState=[_e,e===void 0?null:e],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,e,St){return St=St!=null?St.concat([_e]):null,ki(4194308,4,pi.bind(null,e,_e),St)},useLayoutEffect:function(_e,e){return ki(4194308,4,_e,e)},useInsertionEffect:function(_e,e){return ki(4,2,_e,e)},useMemo:function(_e,e){var St=Th();return e=e===void 0?null:e,_e=_e(),St.memoizedState=[_e,e],_e},useReducer:function(_e,e,St){var es=Th();return e=St!==void 0?St(e):e,es.memoizedState=es.baseState=e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:e},es.queue=_e,_e=_e.dispatch=xi.bind(null,M$1,_e),[es.memoizedState,_e]},useRef:function(_e){var e=Th();return _e={current:_e},e.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),e=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[e,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,e,St){var es=M$1,ts=Th();if(I$1){if(St===void 0)throw Error(p$1(407));St=St()}else{if(St=e(),Q$1===null)throw Error(p$1(349));Hh&30||di(es,e,St)}ts.memoizedState=St;var ss={value:St,getSnapshot:e};return ts.queue=ss,mi(ai.bind(null,es,ss,_e),[_e]),es.flags|=2048,bi(9,ci.bind(null,es,ss,St,e),void 0,null),St},useId:function(){var _e=Th(),e=Q$1.identifierPrefix;if(I$1){var St=sg,es=rg;St=(es&~(1<<32-oc(es)-1)).toString(32)+St,e=":"+e+"R"+St,St=Kh++,0<St&&(e+="H"+St.toString(32)),e+=":"}else St=Lh++,e=":"+e+"r"+St.toString(32)+":";return _e.memoizedState=e},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var e=Uh();return ui(e,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],e=Uh().memoizedState;return[_e,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var e=Uh();return N$1===null?e.memoizedState=_e:ui(e,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],e=Uh().memoizedState;return[_e,e]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,e){if(_e&&_e.defaultProps){e=A$1({},e),_e=_e.defaultProps;for(var St in _e)e[St]===void 0&&(e[St]=_e[St]);return e}return e}function Di(_e,e,St,es){e=_e.memoizedState,St=St(es,e),St=St==null?e:A$1({},e,St),_e.memoizedState=St,_e.lanes===0&&(_e.updateQueue.baseState=St)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,e,St){_e=_e._reactInternals;var es=R$1(),ts=yi(_e),ss=mh(es,ts);ss.payload=e,St!=null&&(ss.callback=St),e=nh(_e,ss,ts),e!==null&&(gi(e,_e,ts,es),oh(e,_e,ts))},enqueueReplaceState:function(_e,e,St){_e=_e._reactInternals;var es=R$1(),ts=yi(_e),ss=mh(es,ts);ss.tag=1,ss.payload=e,St!=null&&(ss.callback=St),e=nh(_e,ss,ts),e!==null&&(gi(e,_e,ts,es),oh(e,_e,ts))},enqueueForceUpdate:function(_e,e){_e=_e._reactInternals;var St=R$1(),es=yi(_e),ts=mh(St,es);ts.tag=2,e!=null&&(ts.callback=e),e=nh(_e,ts,es),e!==null&&(gi(e,_e,es,St),oh(e,_e,es))}};function Fi(_e,e,St,es,ts,ss,rs){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(es,ss,rs):e.prototype&&e.prototype.isPureReactComponent?!Ie(St,es)||!Ie(ts,ss):!0}function Gi(_e,e,St){var es=!1,ts=Vf,ss=e.contextType;return typeof ss=="object"&&ss!==null?ss=eh(ss):(ts=Zf(e)?Xf:H$1.current,es=e.contextTypes,ss=(es=es!=null)?Yf(_e,ts):Vf),e=new e(St,ss),_e.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ei,_e.stateNode=e,e._reactInternals=_e,es&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=ts,_e.__reactInternalMemoizedMaskedChildContext=ss),e}function Hi(_e,e,St,es){_e=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(St,es),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(St,es),e.state!==_e&&Ei.enqueueReplaceState(e,e.state,null)}function Ii(_e,e,St,es){var ts=_e.stateNode;ts.props=St,ts.state=_e.memoizedState,ts.refs={},kh(_e);var ss=e.contextType;typeof ss=="object"&&ss!==null?ts.context=eh(ss):(ss=Zf(e)?Xf:H$1.current,ts.context=Yf(_e,ss)),ts.state=_e.memoizedState,ss=e.getDerivedStateFromProps,typeof ss=="function"&&(Di(_e,e,ss,St),ts.state=_e.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof ts.getSnapshotBeforeUpdate=="function"||typeof ts.UNSAFE_componentWillMount!="function"&&typeof ts.componentWillMount!="function"||(e=ts.state,typeof ts.componentWillMount=="function"&&ts.componentWillMount(),typeof ts.UNSAFE_componentWillMount=="function"&&ts.UNSAFE_componentWillMount(),e!==ts.state&&Ei.enqueueReplaceState(ts,ts.state,null),qh(_e,St,ts,es),ts.state=_e.memoizedState),typeof ts.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,e){try{var St="",es=e;do St+=Pa(es),es=es.return;while(es);var ts=St}catch(ss){ts=`
Error generating stack: `+ss.message+`
`+ss.stack}return{value:_e,source:e,stack:ts,digest:null}}function Ki(_e,e,St){return{value:_e,source:null,stack:St??null,digest:e??null}}function Li(_e,e){try{console.error(e.value)}catch(St){setTimeout(function(){throw St})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,e,St){St=mh(-1,St),St.tag=3,St.payload={element:null};var es=e.value;return St.callback=function(){Oi||(Oi=!0,Pi=es),Li(_e,e)},St}function Qi(_e,e,St){St=mh(-1,St),St.tag=3;var es=_e.type.getDerivedStateFromError;if(typeof es=="function"){var ts=e.value;St.payload=function(){return es(ts)},St.callback=function(){Li(_e,e)}}var ss=_e.stateNode;return ss!==null&&typeof ss.componentDidCatch=="function"&&(St.callback=function(){Li(_e,e),typeof es!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var rs=e.stack;this.componentDidCatch(e.value,{componentStack:rs!==null?rs:""})}),St}function Si(_e,e,St){var es=_e.pingCache;if(es===null){es=_e.pingCache=new Mi;var ts=new Set;es.set(e,ts)}else ts=es.get(e),ts===void 0&&(ts=new Set,es.set(e,ts));ts.has(St)||(ts.add(St),_e=Ti.bind(null,_e,e,St),e.then(_e,_e))}function Ui(_e){do{var e;if((e=_e.tag===13)&&(e=_e.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,e,St,es,ts){return _e.mode&1?(_e.flags|=65536,_e.lanes=ts,_e):(_e===e?_e.flags|=65536:(_e.flags|=128,St.flags|=131072,St.flags&=-52805,St.tag===1&&(St.alternate===null?St.tag=17:(e=mh(-1,1),e.tag=2,nh(St,e,1))),St.lanes|=1),_e)}var Wi=ua.ReactCurrentOwner,dh=!1;function Xi(_e,e,St,es){e.child=_e===null?Vg(e,null,St,es):Ug(e,_e.child,St,es)}function Yi(_e,e,St,es,ts){St=St.render;var ss=e.ref;return ch(e,ts),es=Nh(_e,e,St,es,ss,ts),St=Sh(),_e!==null&&!dh?(e.updateQueue=_e.updateQueue,e.flags&=-2053,_e.lanes&=~ts,Zi(_e,e,ts)):(I$1&&St&&vg(e),e.flags|=1,Xi(_e,e,es,ts),e.child)}function $i(_e,e,St,es,ts){if(_e===null){var ss=St.type;return typeof ss=="function"&&!aj(ss)&&ss.defaultProps===void 0&&St.compare===null&&St.defaultProps===void 0?(e.tag=15,e.type=ss,bj(_e,e,ss,es,ts)):(_e=Rg(St.type,null,es,e,e.mode,ts),_e.ref=e.ref,_e.return=e,e.child=_e)}if(ss=_e.child,!(_e.lanes&ts)){var rs=ss.memoizedProps;if(St=St.compare,St=St!==null?St:Ie,St(rs,es)&&_e.ref===e.ref)return Zi(_e,e,ts)}return e.flags|=1,_e=Pg(ss,es),_e.ref=e.ref,_e.return=e,e.child=_e}function bj(_e,e,St,es,ts){if(_e!==null){var ss=_e.memoizedProps;if(Ie(ss,es)&&_e.ref===e.ref)if(dh=!1,e.pendingProps=es=ss,(_e.lanes&ts)!==0)_e.flags&131072&&(dh=!0);else return e.lanes=_e.lanes,Zi(_e,e,ts)}return cj(_e,e,St,es,ts)}function dj(_e,e,St){var es=e.pendingProps,ts=es.children,ss=_e!==null?_e.memoizedState:null;if(es.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(ej,fj),fj|=St;else{if(!(St&1073741824))return _e=ss!==null?ss.baseLanes|St:St,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:_e,cachePool:null,transitions:null},e.updateQueue=null,G$1(ej,fj),fj|=_e,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},es=ss!==null?ss.baseLanes:St,G$1(ej,fj),fj|=es}else ss!==null?(es=ss.baseLanes|St,e.memoizedState=null):es=St,G$1(ej,fj),fj|=es;return Xi(_e,e,ts,St),e.child}function gj(_e,e){var St=e.ref;(_e===null&&St!==null||_e!==null&&_e.ref!==St)&&(e.flags|=512,e.flags|=2097152)}function cj(_e,e,St,es,ts){var ss=Zf(St)?Xf:H$1.current;return ss=Yf(e,ss),ch(e,ts),St=Nh(_e,e,St,es,ss,ts),es=Sh(),_e!==null&&!dh?(e.updateQueue=_e.updateQueue,e.flags&=-2053,_e.lanes&=~ts,Zi(_e,e,ts)):(I$1&&es&&vg(e),e.flags|=1,Xi(_e,e,St,ts),e.child)}function hj(_e,e,St,es,ts){if(Zf(St)){var ss=!0;cg(e)}else ss=!1;if(ch(e,ts),e.stateNode===null)ij(_e,e),Gi(e,St,es),Ii(e,St,es,ts),es=!0;else if(_e===null){var rs=e.stateNode,ns=e.memoizedProps;rs.props=ns;var is=rs.context,os=St.contextType;typeof os=="object"&&os!==null?os=eh(os):(os=Zf(St)?Xf:H$1.current,os=Yf(e,os));var us=St.getDerivedStateFromProps,ps=typeof us=="function"||typeof rs.getSnapshotBeforeUpdate=="function";ps||typeof rs.UNSAFE_componentWillReceiveProps!="function"&&typeof rs.componentWillReceiveProps!="function"||(ns!==es||is!==os)&&Hi(e,rs,es,os),jh=!1;var xs=e.memoizedState;rs.state=xs,qh(e,es,rs,ts),is=e.memoizedState,ns!==es||xs!==is||Wf.current||jh?(typeof us=="function"&&(Di(e,St,us,es),is=e.memoizedState),(ns=jh||Fi(e,St,ns,es,xs,is,os))?(ps||typeof rs.UNSAFE_componentWillMount!="function"&&typeof rs.componentWillMount!="function"||(typeof rs.componentWillMount=="function"&&rs.componentWillMount(),typeof rs.UNSAFE_componentWillMount=="function"&&rs.UNSAFE_componentWillMount()),typeof rs.componentDidMount=="function"&&(e.flags|=4194308)):(typeof rs.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=es,e.memoizedState=is),rs.props=es,rs.state=is,rs.context=os,es=ns):(typeof rs.componentDidMount=="function"&&(e.flags|=4194308),es=!1)}else{rs=e.stateNode,lh(_e,e),ns=e.memoizedProps,os=e.type===e.elementType?ns:Ci(e.type,ns),rs.props=os,ps=e.pendingProps,xs=rs.context,is=St.contextType,typeof is=="object"&&is!==null?is=eh(is):(is=Zf(St)?Xf:H$1.current,is=Yf(e,is));var cs=St.getDerivedStateFromProps;(us=typeof cs=="function"||typeof rs.getSnapshotBeforeUpdate=="function")||typeof rs.UNSAFE_componentWillReceiveProps!="function"&&typeof rs.componentWillReceiveProps!="function"||(ns!==ps||xs!==is)&&Hi(e,rs,es,is),jh=!1,xs=e.memoizedState,rs.state=xs,qh(e,es,rs,ts);var ys=e.memoizedState;ns!==ps||xs!==ys||Wf.current||jh?(typeof cs=="function"&&(Di(e,St,cs,es),ys=e.memoizedState),(os=jh||Fi(e,St,os,es,xs,ys,is)||!1)?(us||typeof rs.UNSAFE_componentWillUpdate!="function"&&typeof rs.componentWillUpdate!="function"||(typeof rs.componentWillUpdate=="function"&&rs.componentWillUpdate(es,ys,is),typeof rs.UNSAFE_componentWillUpdate=="function"&&rs.UNSAFE_componentWillUpdate(es,ys,is)),typeof rs.componentDidUpdate=="function"&&(e.flags|=4),typeof rs.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof rs.componentDidUpdate!="function"||ns===_e.memoizedProps&&xs===_e.memoizedState||(e.flags|=4),typeof rs.getSnapshotBeforeUpdate!="function"||ns===_e.memoizedProps&&xs===_e.memoizedState||(e.flags|=1024),e.memoizedProps=es,e.memoizedState=ys),rs.props=es,rs.state=ys,rs.context=is,es=os):(typeof rs.componentDidUpdate!="function"||ns===_e.memoizedProps&&xs===_e.memoizedState||(e.flags|=4),typeof rs.getSnapshotBeforeUpdate!="function"||ns===_e.memoizedProps&&xs===_e.memoizedState||(e.flags|=1024),es=!1)}return jj(_e,e,St,es,ss,ts)}function jj(_e,e,St,es,ts,ss){gj(_e,e);var rs=(e.flags&128)!==0;if(!es&&!rs)return ts&&dg(e,St,!1),Zi(_e,e,ss);es=e.stateNode,Wi.current=e;var ns=rs&&typeof St.getDerivedStateFromError!="function"?null:es.render();return e.flags|=1,_e!==null&&rs?(e.child=Ug(e,_e.child,null,ss),e.child=Ug(e,null,ns,ss)):Xi(_e,e,ns,ss),e.memoizedState=es.state,ts&&dg(e,St,!0),e.child}function kj(_e){var e=_e.stateNode;e.pendingContext?ag(_e,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(_e,e.context,!1),yh(_e,e.containerInfo)}function lj(_e,e,St,es,ts){return Ig(),Jg(ts),e.flags|=256,Xi(_e,e,St,es),e.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,e,St){var es=e.pendingProps,ts=L$1.current,ss=!1,rs=(e.flags&128)!==0,ns;if((ns=rs)||(ns=_e!==null&&_e.memoizedState===null?!1:(ts&2)!==0),ns?(ss=!0,e.flags&=-129):(_e===null||_e.memoizedState!==null)&&(ts|=1),G$1(L$1,ts&1),_e===null)return Eg(e),_e=e.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(e.mode&1?_e.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(rs=es.children,_e=es.fallback,ss?(es=e.mode,ss=e.child,rs={mode:"hidden",children:rs},!(es&1)&&ss!==null?(ss.childLanes=0,ss.pendingProps=rs):ss=pj(rs,es,0,null),_e=Tg(_e,es,St,null),ss.return=e,_e.return=e,ss.sibling=_e,e.child=ss,e.child.memoizedState=nj(St),e.memoizedState=mj,_e):qj(e,rs));if(ts=_e.memoizedState,ts!==null&&(ns=ts.dehydrated,ns!==null))return rj(_e,e,rs,es,ns,ts,St);if(ss){ss=es.fallback,rs=e.mode,ts=_e.child,ns=ts.sibling;var is={mode:"hidden",children:es.children};return!(rs&1)&&e.child!==ts?(es=e.child,es.childLanes=0,es.pendingProps=is,e.deletions=null):(es=Pg(ts,is),es.subtreeFlags=ts.subtreeFlags&14680064),ns!==null?ss=Pg(ns,ss):(ss=Tg(ss,rs,St,null),ss.flags|=2),ss.return=e,es.return=e,es.sibling=ss,e.child=es,es=ss,ss=e.child,rs=_e.child.memoizedState,rs=rs===null?nj(St):{baseLanes:rs.baseLanes|St,cachePool:null,transitions:rs.transitions},ss.memoizedState=rs,ss.childLanes=_e.childLanes&~St,e.memoizedState=mj,es}return ss=_e.child,_e=ss.sibling,es=Pg(ss,{mode:"visible",children:es.children}),!(e.mode&1)&&(es.lanes=St),es.return=e,es.sibling=null,_e!==null&&(St=e.deletions,St===null?(e.deletions=[_e],e.flags|=16):St.push(_e)),e.child=es,e.memoizedState=null,es}function qj(_e,e){return e=pj({mode:"visible",children:e},_e.mode,0,null),e.return=_e,_e.child=e}function sj(_e,e,St,es){return es!==null&&Jg(es),Ug(e,_e.child,null,St),_e=qj(e,e.pendingProps.children),_e.flags|=2,e.memoizedState=null,_e}function rj(_e,e,St,es,ts,ss,rs){if(St)return e.flags&256?(e.flags&=-257,es=Ki(Error(p$1(422))),sj(_e,e,rs,es)):e.memoizedState!==null?(e.child=_e.child,e.flags|=128,null):(ss=es.fallback,ts=e.mode,es=pj({mode:"visible",children:es.children},ts,0,null),ss=Tg(ss,ts,rs,null),ss.flags|=2,es.return=e,ss.return=e,es.sibling=ss,e.child=es,e.mode&1&&Ug(e,_e.child,null,rs),e.child.memoizedState=nj(rs),e.memoizedState=mj,ss);if(!(e.mode&1))return sj(_e,e,rs,null);if(ts.data==="$!"){if(es=ts.nextSibling&&ts.nextSibling.dataset,es)var ns=es.dgst;return es=ns,ss=Error(p$1(419)),es=Ki(ss,es,void 0),sj(_e,e,rs,es)}if(ns=(rs&_e.childLanes)!==0,dh||ns){if(es=Q$1,es!==null){switch(rs&-rs){case 4:ts=2;break;case 16:ts=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:ts=32;break;case 536870912:ts=268435456;break;default:ts=0}ts=ts&(es.suspendedLanes|rs)?0:ts,ts!==0&&ts!==ss.retryLane&&(ss.retryLane=ts,ih(_e,ts),gi(es,_e,ts,-1))}return tj(),es=Ki(Error(p$1(421))),sj(_e,e,rs,es)}return ts.data==="$?"?(e.flags|=128,e.child=_e.child,e=uj.bind(null,_e),ts._reactRetry=e,null):(_e=ss.treeContext,yg=Lf(ts.nextSibling),xg=e,I$1=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=e),e=qj(e,es.children),e.flags|=4096,e)}function vj(_e,e,St){_e.lanes|=e;var es=_e.alternate;es!==null&&(es.lanes|=e),bh(_e.return,e,St)}function wj(_e,e,St,es,ts){var ss=_e.memoizedState;ss===null?_e.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:es,tail:St,tailMode:ts}:(ss.isBackwards=e,ss.rendering=null,ss.renderingStartTime=0,ss.last=es,ss.tail=St,ss.tailMode=ts)}function xj(_e,e,St){var es=e.pendingProps,ts=es.revealOrder,ss=es.tail;if(Xi(_e,e,es.children,St),es=L$1.current,es&2)es=es&1|2,e.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=e.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,St,e);else if(_e.tag===19)vj(_e,St,e);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===e)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===e)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}es&=1}if(G$1(L$1,es),!(e.mode&1))e.memoizedState=null;else switch(ts){case"forwards":for(St=e.child,ts=null;St!==null;)_e=St.alternate,_e!==null&&Ch(_e)===null&&(ts=St),St=St.sibling;St=ts,St===null?(ts=e.child,e.child=null):(ts=St.sibling,St.sibling=null),wj(e,!1,ts,St,ss);break;case"backwards":for(St=null,ts=e.child,e.child=null;ts!==null;){if(_e=ts.alternate,_e!==null&&Ch(_e)===null){e.child=ts;break}_e=ts.sibling,ts.sibling=St,St=ts,ts=_e}wj(e,!0,St,null,ss);break;case"together":wj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ij(_e,e){!(e.mode&1)&&_e!==null&&(_e.alternate=null,e.alternate=null,e.flags|=2)}function Zi(_e,e,St){if(_e!==null&&(e.dependencies=_e.dependencies),rh|=e.lanes,!(St&e.childLanes))return null;if(_e!==null&&e.child!==_e.child)throw Error(p$1(153));if(e.child!==null){for(_e=e.child,St=Pg(_e,_e.pendingProps),e.child=St,St.return=e;_e.sibling!==null;)_e=_e.sibling,St=St.sibling=Pg(_e,_e.pendingProps),St.return=e;St.sibling=null}return e.child}function yj(_e,e,St){switch(e.tag){case 3:kj(e),Ig();break;case 5:Ah(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:yh(e,e.stateNode.containerInfo);break;case 10:var es=e.type._context,ts=e.memoizedProps.value;G$1(Wg,es._currentValue),es._currentValue=ts;break;case 13:if(es=e.memoizedState,es!==null)return es.dehydrated!==null?(G$1(L$1,L$1.current&1),e.flags|=128,null):St&e.child.childLanes?oj(_e,e,St):(G$1(L$1,L$1.current&1),_e=Zi(_e,e,St),_e!==null?_e.sibling:null);G$1(L$1,L$1.current&1);break;case 19:if(es=(St&e.childLanes)!==0,_e.flags&128){if(es)return xj(_e,e,St);e.flags|=128}if(ts=e.memoizedState,ts!==null&&(ts.rendering=null,ts.tail=null,ts.lastEffect=null),G$1(L$1,L$1.current),es)break;return null;case 22:case 23:return e.lanes=0,dj(_e,e,St)}return Zi(_e,e,St)}var zj,Aj,Bj,Cj;zj=function(_e,e){for(var St=e.child;St!==null;){if(St.tag===5||St.tag===6)_e.appendChild(St.stateNode);else if(St.tag!==4&&St.child!==null){St.child.return=St,St=St.child;continue}if(St===e)break;for(;St.sibling===null;){if(St.return===null||St.return===e)return;St=St.return}St.sibling.return=St.return,St=St.sibling}};Aj=function(){};Bj=function(_e,e,St,es){var ts=_e.memoizedProps;if(ts!==es){_e=e.stateNode,xh(uh.current);var ss=null;switch(St){case"input":ts=Ya(_e,ts),es=Ya(_e,es),ss=[];break;case"select":ts=A$1({},ts,{value:void 0}),es=A$1({},es,{value:void 0}),ss=[];break;case"textarea":ts=gb(_e,ts),es=gb(_e,es),ss=[];break;default:typeof ts.onClick!="function"&&typeof es.onClick=="function"&&(_e.onclick=Bf)}ub(St,es);var rs;St=null;for(os in ts)if(!es.hasOwnProperty(os)&&ts.hasOwnProperty(os)&&ts[os]!=null)if(os==="style"){var ns=ts[os];for(rs in ns)ns.hasOwnProperty(rs)&&(St||(St={}),St[rs]="")}else os!=="dangerouslySetInnerHTML"&&os!=="children"&&os!=="suppressContentEditableWarning"&&os!=="suppressHydrationWarning"&&os!=="autoFocus"&&(ea.hasOwnProperty(os)?ss||(ss=[]):(ss=ss||[]).push(os,null));for(os in es){var is=es[os];if(ns=ts!=null?ts[os]:void 0,es.hasOwnProperty(os)&&is!==ns&&(is!=null||ns!=null))if(os==="style")if(ns){for(rs in ns)!ns.hasOwnProperty(rs)||is&&is.hasOwnProperty(rs)||(St||(St={}),St[rs]="");for(rs in is)is.hasOwnProperty(rs)&&ns[rs]!==is[rs]&&(St||(St={}),St[rs]=is[rs])}else St||(ss||(ss=[]),ss.push(os,St)),St=is;else os==="dangerouslySetInnerHTML"?(is=is?is.__html:void 0,ns=ns?ns.__html:void 0,is!=null&&ns!==is&&(ss=ss||[]).push(os,is)):os==="children"?typeof is!="string"&&typeof is!="number"||(ss=ss||[]).push(os,""+is):os!=="suppressContentEditableWarning"&&os!=="suppressHydrationWarning"&&(ea.hasOwnProperty(os)?(is!=null&&os==="onScroll"&&D$1("scroll",_e),ss||ns===is||(ss=[])):(ss=ss||[]).push(os,is))}St&&(ss=ss||[]).push("style",St);var os=ss;(e.updateQueue=os)&&(e.flags|=4)}};Cj=function(_e,e,St,es){St!==es&&(e.flags|=4)};function Dj(_e,e){if(!I$1)switch(_e.tailMode){case"hidden":e=_e.tail;for(var St=null;e!==null;)e.alternate!==null&&(St=e),e=e.sibling;St===null?_e.tail=null:St.sibling=null;break;case"collapsed":St=_e.tail;for(var es=null;St!==null;)St.alternate!==null&&(es=St),St=St.sibling;es===null?e||_e.tail===null?_e.tail=null:_e.tail.sibling=null:es.sibling=null}}function S$1(_e){var e=_e.alternate!==null&&_e.alternate.child===_e.child,St=0,es=0;if(e)for(var ts=_e.child;ts!==null;)St|=ts.lanes|ts.childLanes,es|=ts.subtreeFlags&14680064,es|=ts.flags&14680064,ts.return=_e,ts=ts.sibling;else for(ts=_e.child;ts!==null;)St|=ts.lanes|ts.childLanes,es|=ts.subtreeFlags,es|=ts.flags,ts.return=_e,ts=ts.sibling;return _e.subtreeFlags|=es,_e.childLanes=St,e}function Ej(_e,e,St){var es=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$1(e),null;case 1:return Zf(e.type)&&$f(),S$1(e),null;case 3:return es=e.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),es.pendingContext&&(es.context=es.pendingContext,es.pendingContext=null),(_e===null||_e.child===null)&&(Gg(e)?e.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,e),S$1(e),null;case 5:Bh(e);var ts=xh(wh.current);if(St=e.type,_e!==null&&e.stateNode!=null)Bj(_e,e,St,es,ts),_e.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!es){if(e.stateNode===null)throw Error(p$1(166));return S$1(e),null}if(_e=xh(uh.current),Gg(e)){es=e.stateNode,St=e.type;var ss=e.memoizedProps;switch(es[Of]=e,es[Pf]=ss,_e=(e.mode&1)!==0,St){case"dialog":D$1("cancel",es),D$1("close",es);break;case"iframe":case"object":case"embed":D$1("load",es);break;case"video":case"audio":for(ts=0;ts<lf.length;ts++)D$1(lf[ts],es);break;case"source":D$1("error",es);break;case"img":case"image":case"link":D$1("error",es),D$1("load",es);break;case"details":D$1("toggle",es);break;case"input":Za(es,ss),D$1("invalid",es);break;case"select":es._wrapperState={wasMultiple:!!ss.multiple},D$1("invalid",es);break;case"textarea":hb(es,ss),D$1("invalid",es)}ub(St,ss),ts=null;for(var rs in ss)if(ss.hasOwnProperty(rs)){var ns=ss[rs];rs==="children"?typeof ns=="string"?es.textContent!==ns&&(ss.suppressHydrationWarning!==!0&&Af(es.textContent,ns,_e),ts=["children",ns]):typeof ns=="number"&&es.textContent!==""+ns&&(ss.suppressHydrationWarning!==!0&&Af(es.textContent,ns,_e),ts=["children",""+ns]):ea.hasOwnProperty(rs)&&ns!=null&&rs==="onScroll"&&D$1("scroll",es)}switch(St){case"input":Va(es),db(es,ss,!0);break;case"textarea":Va(es),jb(es);break;case"select":case"option":break;default:typeof ss.onClick=="function"&&(es.onclick=Bf)}es=ts,e.updateQueue=es,es!==null&&(e.flags|=4)}else{rs=ts.nodeType===9?ts:ts.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(St)),_e==="http://www.w3.org/1999/xhtml"?St==="script"?(_e=rs.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof es.is=="string"?_e=rs.createElement(St,{is:es.is}):(_e=rs.createElement(St),St==="select"&&(rs=_e,es.multiple?rs.multiple=!0:es.size&&(rs.size=es.size))):_e=rs.createElementNS(_e,St),_e[Of]=e,_e[Pf]=es,zj(_e,e,!1,!1),e.stateNode=_e;e:{switch(rs=vb(St,es),St){case"dialog":D$1("cancel",_e),D$1("close",_e),ts=es;break;case"iframe":case"object":case"embed":D$1("load",_e),ts=es;break;case"video":case"audio":for(ts=0;ts<lf.length;ts++)D$1(lf[ts],_e);ts=es;break;case"source":D$1("error",_e),ts=es;break;case"img":case"image":case"link":D$1("error",_e),D$1("load",_e),ts=es;break;case"details":D$1("toggle",_e),ts=es;break;case"input":Za(_e,es),ts=Ya(_e,es),D$1("invalid",_e);break;case"option":ts=es;break;case"select":_e._wrapperState={wasMultiple:!!es.multiple},ts=A$1({},es,{value:void 0}),D$1("invalid",_e);break;case"textarea":hb(_e,es),ts=gb(_e,es),D$1("invalid",_e);break;default:ts=es}ub(St,ts),ns=ts;for(ss in ns)if(ns.hasOwnProperty(ss)){var is=ns[ss];ss==="style"?sb(_e,is):ss==="dangerouslySetInnerHTML"?(is=is?is.__html:void 0,is!=null&&nb(_e,is)):ss==="children"?typeof is=="string"?(St!=="textarea"||is!=="")&&ob(_e,is):typeof is=="number"&&ob(_e,""+is):ss!=="suppressContentEditableWarning"&&ss!=="suppressHydrationWarning"&&ss!=="autoFocus"&&(ea.hasOwnProperty(ss)?is!=null&&ss==="onScroll"&&D$1("scroll",_e):is!=null&&ta(_e,ss,is,rs))}switch(St){case"input":Va(_e),db(_e,es,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":es.value!=null&&_e.setAttribute("value",""+Sa(es.value));break;case"select":_e.multiple=!!es.multiple,ss=es.value,ss!=null?fb(_e,!!es.multiple,ss,!1):es.defaultValue!=null&&fb(_e,!!es.multiple,es.defaultValue,!0);break;default:typeof ts.onClick=="function"&&(_e.onclick=Bf)}switch(St){case"button":case"input":case"select":case"textarea":es=!!es.autoFocus;break e;case"img":es=!0;break e;default:es=!1}}es&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$1(e),null;case 6:if(_e&&e.stateNode!=null)Cj(_e,e,_e.memoizedProps,es);else{if(typeof es!="string"&&e.stateNode===null)throw Error(p$1(166));if(St=xh(wh.current),xh(uh.current),Gg(e)){if(es=e.stateNode,St=e.memoizedProps,es[Of]=e,(ss=es.nodeValue!==St)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(es.nodeValue,St,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(es.nodeValue,St,(_e.mode&1)!==0)}ss&&(e.flags|=4)}else es=(St.nodeType===9?St:St.ownerDocument).createTextNode(es),es[Of]=e,e.stateNode=es}return S$1(e),null;case 13:if(E$1(L$1),es=e.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,ss=!1;else if(ss=Gg(e),es!==null&&es.dehydrated!==null){if(_e===null){if(!ss)throw Error(p$1(318));if(ss=e.memoizedState,ss=ss!==null?ss.dehydrated:null,!ss)throw Error(p$1(317));ss[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$1(e),ss=!1}else zg!==null&&(Fj(zg),zg=null),ss=!0;if(!ss)return e.flags&65536?e:null}return e.flags&128?(e.lanes=St,e):(es=es!==null,es!==(_e!==null&&_e.memoizedState!==null)&&es&&(e.child.flags|=8192,e.mode&1&&(_e===null||L$1.current&1?T$1===0&&(T$1=3):tj())),e.updateQueue!==null&&(e.flags|=4),S$1(e),null);case 4:return zh(),Aj(_e,e),_e===null&&sf(e.stateNode.containerInfo),S$1(e),null;case 10:return ah(e.type._context),S$1(e),null;case 17:return Zf(e.type)&&$f(),S$1(e),null;case 19:if(E$1(L$1),ss=e.memoizedState,ss===null)return S$1(e),null;if(es=(e.flags&128)!==0,rs=ss.rendering,rs===null)if(es)Dj(ss,!1);else{if(T$1!==0||_e!==null&&_e.flags&128)for(_e=e.child;_e!==null;){if(rs=Ch(_e),rs!==null){for(e.flags|=128,Dj(ss,!1),es=rs.updateQueue,es!==null&&(e.updateQueue=es,e.flags|=4),e.subtreeFlags=0,es=St,St=e.child;St!==null;)ss=St,_e=es,ss.flags&=14680066,rs=ss.alternate,rs===null?(ss.childLanes=0,ss.lanes=_e,ss.child=null,ss.subtreeFlags=0,ss.memoizedProps=null,ss.memoizedState=null,ss.updateQueue=null,ss.dependencies=null,ss.stateNode=null):(ss.childLanes=rs.childLanes,ss.lanes=rs.lanes,ss.child=rs.child,ss.subtreeFlags=0,ss.deletions=null,ss.memoizedProps=rs.memoizedProps,ss.memoizedState=rs.memoizedState,ss.updateQueue=rs.updateQueue,ss.type=rs.type,_e=rs.dependencies,ss.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),St=St.sibling;return G$1(L$1,L$1.current&1|2),e.child}_e=_e.sibling}ss.tail!==null&&B$1()>Gj&&(e.flags|=128,es=!0,Dj(ss,!1),e.lanes=4194304)}else{if(!es)if(_e=Ch(rs),_e!==null){if(e.flags|=128,es=!0,St=_e.updateQueue,St!==null&&(e.updateQueue=St,e.flags|=4),Dj(ss,!0),ss.tail===null&&ss.tailMode==="hidden"&&!rs.alternate&&!I$1)return S$1(e),null}else 2*B$1()-ss.renderingStartTime>Gj&&St!==1073741824&&(e.flags|=128,es=!0,Dj(ss,!1),e.lanes=4194304);ss.isBackwards?(rs.sibling=e.child,e.child=rs):(St=ss.last,St!==null?St.sibling=rs:e.child=rs,ss.last=rs)}return ss.tail!==null?(e=ss.tail,ss.rendering=e,ss.tail=e.sibling,ss.renderingStartTime=B$1(),e.sibling=null,St=L$1.current,G$1(L$1,es?St&1|2:St&1),e):(S$1(e),null);case 22:case 23:return Hj(),es=e.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==es&&(e.flags|=8192),es&&e.mode&1?fj&1073741824&&(S$1(e),e.subtreeFlags&6&&(e.flags|=8192)):S$1(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Ij(_e,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),_e=e.flags,_e&65536?(e.flags=_e&-65537|128,e):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),_e=e.flags,_e&65536&&!(_e&128)?(e.flags=_e&-65537|128,e):null;case 5:return Bh(e),null;case 13:if(E$1(L$1),_e=e.memoizedState,_e!==null&&_e.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return _e=e.flags,_e&65536?(e.flags=_e&-65537|128,e):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(e.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$1=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Lj(_e,e){var St=_e.ref;if(St!==null)if(typeof St=="function")try{St(null)}catch(es){W$1(_e,e,es)}else St.current=null}function Mj(_e,e,St){try{St()}catch(es){W$1(_e,e,es)}}var Nj=!1;function Oj(_e,e){if(Cf=dd,_e=Me(),Ne$1(_e)){if("selectionStart"in _e)var St={start:_e.selectionStart,end:_e.selectionEnd};else e:{St=(St=_e.ownerDocument)&&St.defaultView||window;var es=St.getSelection&&St.getSelection();if(es&&es.rangeCount!==0){St=es.anchorNode;var ts=es.anchorOffset,ss=es.focusNode;es=es.focusOffset;try{St.nodeType,ss.nodeType}catch{St=null;break e}var rs=0,ns=-1,is=-1,os=0,us=0,ps=_e,xs=null;t:for(;;){for(var cs;ps!==St||ts!==0&&ps.nodeType!==3||(ns=rs+ts),ps!==ss||es!==0&&ps.nodeType!==3||(is=rs+es),ps.nodeType===3&&(rs+=ps.nodeValue.length),(cs=ps.firstChild)!==null;)xs=ps,ps=cs;for(;;){if(ps===_e)break t;if(xs===St&&++os===ts&&(ns=rs),xs===ss&&++us===es&&(is=rs),(cs=ps.nextSibling)!==null)break;ps=xs,xs=ps.parentNode}ps=cs}St=ns===-1||is===-1?null:{start:ns,end:is}}else St=null}St=St||{start:0,end:0}}else St=null;for(Df={focusedElem:_e,selectionRange:St},dd=!1,V$1=e;V$1!==null;)if(e=V$1,_e=e.child,(e.subtreeFlags&1028)!==0&&_e!==null)_e.return=e,V$1=_e;else for(;V$1!==null;){e=V$1;try{var ys=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(ys!==null){var gs=ys.memoizedProps,vs=ys.memoizedState,ds=e.stateNode,fs=ds.getSnapshotBeforeUpdate(e.elementType===e.type?gs:Ci(e.type,gs),vs);ds.__reactInternalSnapshotBeforeUpdate=fs}break;case 3:var Es=e.stateNode.containerInfo;Es.nodeType===1?Es.textContent="":Es.nodeType===9&&Es.documentElement&&Es.removeChild(Es.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(Os){W$1(e,e.return,Os)}if(_e=e.sibling,_e!==null){_e.return=e.return,V$1=_e;break}V$1=e.return}return ys=Nj,Nj=!1,ys}function Pj(_e,e,St){var es=e.updateQueue;if(es=es!==null?es.lastEffect:null,es!==null){var ts=es=es.next;do{if((ts.tag&_e)===_e){var ss=ts.destroy;ts.destroy=void 0,ss!==void 0&&Mj(e,St,ss)}ts=ts.next}while(ts!==es)}}function Qj(_e,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var St=e=e.next;do{if((St.tag&_e)===_e){var es=St.create;St.destroy=es()}St=St.next}while(St!==e)}}function Rj(_e){var e=_e.ref;if(e!==null){var St=_e.stateNode;switch(_e.tag){case 5:_e=St;break;default:_e=St}typeof e=="function"?e(_e):e.current=_e}}function Sj(_e){var e=_e.alternate;e!==null&&(_e.alternate=null,Sj(e)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(e=_e.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,e,St){var es=_e.tag;if(es===5||es===6)_e=_e.stateNode,e?St.nodeType===8?St.parentNode.insertBefore(_e,e):St.insertBefore(_e,e):(St.nodeType===8?(e=St.parentNode,e.insertBefore(_e,St)):(e=St,e.appendChild(_e)),St=St._reactRootContainer,St!=null||e.onclick!==null||(e.onclick=Bf));else if(es!==4&&(_e=_e.child,_e!==null))for(Vj(_e,e,St),_e=_e.sibling;_e!==null;)Vj(_e,e,St),_e=_e.sibling}function Wj(_e,e,St){var es=_e.tag;if(es===5||es===6)_e=_e.stateNode,e?St.insertBefore(_e,e):St.appendChild(_e);else if(es!==4&&(_e=_e.child,_e!==null))for(Wj(_e,e,St),_e=_e.sibling;_e!==null;)Wj(_e,e,St),_e=_e.sibling}var X$3=null,Xj=!1;function Yj(_e,e,St){for(St=St.child;St!==null;)Zj(_e,e,St),St=St.sibling}function Zj(_e,e,St){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc,St)}catch{}switch(St.tag){case 5:U$1||Lj(St,e);case 6:var es=X$3,ts=Xj;X$3=null,Yj(_e,e,St),X$3=es,Xj=ts,X$3!==null&&(Xj?(_e=X$3,St=St.stateNode,_e.nodeType===8?_e.parentNode.removeChild(St):_e.removeChild(St)):X$3.removeChild(St.stateNode));break;case 18:X$3!==null&&(Xj?(_e=X$3,St=St.stateNode,_e.nodeType===8?Kf(_e.parentNode,St):_e.nodeType===1&&Kf(_e,St),bd(_e)):Kf(X$3,St.stateNode));break;case 4:es=X$3,ts=Xj,X$3=St.stateNode.containerInfo,Xj=!0,Yj(_e,e,St),X$3=es,Xj=ts;break;case 0:case 11:case 14:case 15:if(!U$1&&(es=St.updateQueue,es!==null&&(es=es.lastEffect,es!==null))){ts=es=es.next;do{var ss=ts,rs=ss.destroy;ss=ss.tag,rs!==void 0&&(ss&2||ss&4)&&Mj(St,e,rs),ts=ts.next}while(ts!==es)}Yj(_e,e,St);break;case 1:if(!U$1&&(Lj(St,e),es=St.stateNode,typeof es.componentWillUnmount=="function"))try{es.props=St.memoizedProps,es.state=St.memoizedState,es.componentWillUnmount()}catch(ns){W$1(St,e,ns)}Yj(_e,e,St);break;case 21:Yj(_e,e,St);break;case 22:St.mode&1?(U$1=(es=U$1)||St.memoizedState!==null,Yj(_e,e,St),U$1=es):Yj(_e,e,St);break;default:Yj(_e,e,St)}}function ak(_e){var e=_e.updateQueue;if(e!==null){_e.updateQueue=null;var St=_e.stateNode;St===null&&(St=_e.stateNode=new Kj),e.forEach(function(es){var ts=bk.bind(null,_e,es);St.has(es)||(St.add(es),es.then(ts,ts))})}}function ck(_e,e){var St=e.deletions;if(St!==null)for(var es=0;es<St.length;es++){var ts=St[es];try{var ss=_e,rs=e,ns=rs;e:for(;ns!==null;){switch(ns.tag){case 5:X$3=ns.stateNode,Xj=!1;break e;case 3:X$3=ns.stateNode.containerInfo,Xj=!0;break e;case 4:X$3=ns.stateNode.containerInfo,Xj=!0;break e}ns=ns.return}if(X$3===null)throw Error(p$1(160));Zj(ss,rs,ts),X$3=null,Xj=!1;var is=ts.alternate;is!==null&&(is.return=null),ts.return=null}catch(os){W$1(ts,e,os)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dk(e,_e),e=e.sibling}function dk(_e,e){var St=_e.alternate,es=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(e,_e),ek(_e),es&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(gs){W$1(_e,_e.return,gs)}try{Pj(5,_e,_e.return)}catch(gs){W$1(_e,_e.return,gs)}}break;case 1:ck(e,_e),ek(_e),es&512&&St!==null&&Lj(St,St.return);break;case 5:if(ck(e,_e),ek(_e),es&512&&St!==null&&Lj(St,St.return),_e.flags&32){var ts=_e.stateNode;try{ob(ts,"")}catch(gs){W$1(_e,_e.return,gs)}}if(es&4&&(ts=_e.stateNode,ts!=null)){var ss=_e.memoizedProps,rs=St!==null?St.memoizedProps:ss,ns=_e.type,is=_e.updateQueue;if(_e.updateQueue=null,is!==null)try{ns==="input"&&ss.type==="radio"&&ss.name!=null&&ab(ts,ss),vb(ns,rs);var os=vb(ns,ss);for(rs=0;rs<is.length;rs+=2){var us=is[rs],ps=is[rs+1];us==="style"?sb(ts,ps):us==="dangerouslySetInnerHTML"?nb(ts,ps):us==="children"?ob(ts,ps):ta(ts,us,ps,os)}switch(ns){case"input":bb(ts,ss);break;case"textarea":ib(ts,ss);break;case"select":var xs=ts._wrapperState.wasMultiple;ts._wrapperState.wasMultiple=!!ss.multiple;var cs=ss.value;cs!=null?fb(ts,!!ss.multiple,cs,!1):xs!==!!ss.multiple&&(ss.defaultValue!=null?fb(ts,!!ss.multiple,ss.defaultValue,!0):fb(ts,!!ss.multiple,ss.multiple?[]:"",!1))}ts[Pf]=ss}catch(gs){W$1(_e,_e.return,gs)}}break;case 6:if(ck(e,_e),ek(_e),es&4){if(_e.stateNode===null)throw Error(p$1(162));ts=_e.stateNode,ss=_e.memoizedProps;try{ts.nodeValue=ss}catch(gs){W$1(_e,_e.return,gs)}}break;case 3:if(ck(e,_e),ek(_e),es&4&&St!==null&&St.memoizedState.isDehydrated)try{bd(e.containerInfo)}catch(gs){W$1(_e,_e.return,gs)}break;case 4:ck(e,_e),ek(_e);break;case 13:ck(e,_e),ek(_e),ts=_e.child,ts.flags&8192&&(ss=ts.memoizedState!==null,ts.stateNode.isHidden=ss,!ss||ts.alternate!==null&&ts.alternate.memoizedState!==null||(fk=B$1())),es&4&&ak(_e);break;case 22:if(us=St!==null&&St.memoizedState!==null,_e.mode&1?(U$1=(os=U$1)||us,ck(e,_e),U$1=os):ck(e,_e),ek(_e),es&8192){if(os=_e.memoizedState!==null,(_e.stateNode.isHidden=os)&&!us&&_e.mode&1)for(V$1=_e,us=_e.child;us!==null;){for(ps=V$1=us;V$1!==null;){switch(xs=V$1,cs=xs.child,xs.tag){case 0:case 11:case 14:case 15:Pj(4,xs,xs.return);break;case 1:Lj(xs,xs.return);var ys=xs.stateNode;if(typeof ys.componentWillUnmount=="function"){es=xs,St=xs.return;try{e=es,ys.props=e.memoizedProps,ys.state=e.memoizedState,ys.componentWillUnmount()}catch(gs){W$1(es,St,gs)}}break;case 5:Lj(xs,xs.return);break;case 22:if(xs.memoizedState!==null){gk(ps);continue}}cs!==null?(cs.return=xs,V$1=cs):gk(ps)}us=us.sibling}e:for(us=null,ps=_e;;){if(ps.tag===5){if(us===null){us=ps;try{ts=ps.stateNode,os?(ss=ts.style,typeof ss.setProperty=="function"?ss.setProperty("display","none","important"):ss.display="none"):(ns=ps.stateNode,is=ps.memoizedProps.style,rs=is!=null&&is.hasOwnProperty("display")?is.display:null,ns.style.display=rb("display",rs))}catch(gs){W$1(_e,_e.return,gs)}}}else if(ps.tag===6){if(us===null)try{ps.stateNode.nodeValue=os?"":ps.memoizedProps}catch(gs){W$1(_e,_e.return,gs)}}else if((ps.tag!==22&&ps.tag!==23||ps.memoizedState===null||ps===_e)&&ps.child!==null){ps.child.return=ps,ps=ps.child;continue}if(ps===_e)break e;for(;ps.sibling===null;){if(ps.return===null||ps.return===_e)break e;us===ps&&(us=null),ps=ps.return}us===ps&&(us=null),ps.sibling.return=ps.return,ps=ps.sibling}}break;case 19:ck(e,_e),ek(_e),es&4&&ak(_e);break;case 21:break;default:ck(e,_e),ek(_e)}}function ek(_e){var e=_e.flags;if(e&2){try{e:{for(var St=_e.return;St!==null;){if(Tj(St)){var es=St;break e}St=St.return}throw Error(p$1(160))}switch(es.tag){case 5:var ts=es.stateNode;es.flags&32&&(ob(ts,""),es.flags&=-33);var ss=Uj(_e);Wj(_e,ss,ts);break;case 3:case 4:var rs=es.stateNode.containerInfo,ns=Uj(_e);Vj(_e,ns,rs);break;default:throw Error(p$1(161))}}catch(is){W$1(_e,_e.return,is)}_e.flags&=-3}e&4096&&(_e.flags&=-4097)}function hk(_e,e,St){V$1=_e,ik(_e)}function ik(_e,e,St){for(var es=(_e.mode&1)!==0;V$1!==null;){var ts=V$1,ss=ts.child;if(ts.tag===22&&es){var rs=ts.memoizedState!==null||Jj;if(!rs){var ns=ts.alternate,is=ns!==null&&ns.memoizedState!==null||U$1;ns=Jj;var os=U$1;if(Jj=rs,(U$1=is)&&!os)for(V$1=ts;V$1!==null;)rs=V$1,is=rs.child,rs.tag===22&&rs.memoizedState!==null?jk(ts):is!==null?(is.return=rs,V$1=is):jk(ts);for(;ss!==null;)V$1=ss,ik(ss),ss=ss.sibling;V$1=ts,Jj=ns,U$1=os}kk(_e)}else ts.subtreeFlags&8772&&ss!==null?(ss.return=ts,V$1=ss):kk(_e)}}function kk(_e){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var St=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Qj(5,e);break;case 1:var es=e.stateNode;if(e.flags&4&&!U$1)if(St===null)es.componentDidMount();else{var ts=e.elementType===e.type?St.memoizedProps:Ci(e.type,St.memoizedProps);es.componentDidUpdate(ts,St.memoizedState,es.__reactInternalSnapshotBeforeUpdate)}var ss=e.updateQueue;ss!==null&&sh(e,ss,es);break;case 3:var rs=e.updateQueue;if(rs!==null){if(St=null,e.child!==null)switch(e.child.tag){case 5:St=e.child.stateNode;break;case 1:St=e.child.stateNode}sh(e,rs,St)}break;case 5:var ns=e.stateNode;if(St===null&&e.flags&4){St=ns;var is=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":is.autoFocus&&St.focus();break;case"img":is.src&&(St.src=is.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var os=e.alternate;if(os!==null){var us=os.memoizedState;if(us!==null){var ps=us.dehydrated;ps!==null&&bd(ps)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||e.flags&512&&Rj(e)}catch(xs){W$1(e,e.return,xs)}}if(e===_e){V$1=null;break}if(St=e.sibling,St!==null){St.return=e.return,V$1=St;break}V$1=e.return}}function gk(_e){for(;V$1!==null;){var e=V$1;if(e===_e){V$1=null;break}var St=e.sibling;if(St!==null){St.return=e.return,V$1=St;break}V$1=e.return}}function jk(_e){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var St=e.return;try{Qj(4,e)}catch(is){W$1(e,St,is)}break;case 1:var es=e.stateNode;if(typeof es.componentDidMount=="function"){var ts=e.return;try{es.componentDidMount()}catch(is){W$1(e,ts,is)}}var ss=e.return;try{Rj(e)}catch(is){W$1(e,ss,is)}break;case 5:var rs=e.return;try{Rj(e)}catch(is){W$1(e,rs,is)}}}catch(is){W$1(e,e.return,is)}if(e===_e){V$1=null;break}var ns=e.sibling;if(ns!==null){ns.return=e.return,V$1=ns;break}V$1=e.return}}var lk=Math.ceil,mk=ua.ReactCurrentDispatcher,nk=ua.ReactCurrentOwner,ok=ua.ReactCurrentBatchConfig,K$1=0,Q$1=null,Y$1=null,Z$1=0,fj=0,ej=Uf(0),T$1=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(_e){return _e.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,e,St,es){if(50<yk)throw yk=0,zk=null,Error(p$1(185));Ac(_e,St,es),(!(K$1&2)||_e!==Q$1)&&(_e===Q$1&&(!(K$1&2)&&(qk|=St),T$1===4&&Ck(_e,Z$1)),Dk(_e,es),St===1&&K$1===0&&!(e.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(_e,e){var St=_e.callbackNode;wc(_e,e);var es=uc(_e,_e===Q$1?Z$1:0);if(es===0)St!==null&&bc(St),_e.callbackNode=null,_e.callbackPriority=0;else if(e=es&-es,_e.callbackPriority!==e){if(St!=null&&bc(St),e===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K$1&6)&&jg()}),St=null;else{switch(Dc(es)){case 1:St=fc;break;case 4:St=gc;break;case 16:St=hc;break;case 536870912:St=jc;break;default:St=hc}St=Fk(St,Gk.bind(null,_e))}_e.callbackPriority=e,_e.callbackNode=St}}function Gk(_e,e){if(Ak=-1,Bk=0,K$1&6)throw Error(p$1(327));var St=_e.callbackNode;if(Hk()&&_e.callbackNode!==St)return null;var es=uc(_e,_e===Q$1?Z$1:0);if(es===0)return null;if(es&30||es&_e.expiredLanes||e)e=Ik(_e,es);else{e=es;var ts=K$1;K$1|=2;var ss=Jk();(Q$1!==_e||Z$1!==e)&&(uk=null,Gj=B$1()+500,Kk(_e,e));do try{Lk();break}catch(ns){Mk(_e,ns)}while(1);$g(),mk.current=ss,K$1=ts,Y$1!==null?e=0:(Q$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(ts=xc(_e),ts!==0&&(es=ts,e=Nk(_e,ts))),e===1)throw St=pk,Kk(_e,0),Ck(_e,es),Dk(_e,B$1()),St;if(e===6)Ck(_e,es);else{if(ts=_e.current.alternate,!(es&30)&&!Ok(ts)&&(e=Ik(_e,es),e===2&&(ss=xc(_e),ss!==0&&(es=ss,e=Nk(_e,ss))),e===1))throw St=pk,Kk(_e,0),Ck(_e,es),Dk(_e,B$1()),St;switch(_e.finishedWork=ts,_e.finishedLanes=es,e){case 0:case 1:throw Error(p$1(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,es),(es&130023424)===es&&(e=fk+500-B$1(),10<e)){if(uc(_e,0)!==0)break;if(ts=_e.suspendedLanes,(ts&es)!==es){R$1(),_e.pingedLanes|=_e.suspendedLanes&ts;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),e);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,es),(es&4194240)===es)break;for(e=_e.eventTimes,ts=-1;0<es;){var rs=31-oc(es);ss=1<<rs,rs=e[rs],rs>ts&&(ts=rs),es&=~ss}if(es=ts,es=B$1()-es,es=(120>es?120:480>es?480:1080>es?1080:1920>es?1920:3e3>es?3e3:4320>es?4320:1960*lk(es/1960))-es,10<es){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),es);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$1(329))}}}return Dk(_e,B$1()),_e.callbackNode===St?Gk.bind(null,_e):null}function Nk(_e,e){var St=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,e).flags|=256),_e=Ik(_e,e),_e!==2&&(e=tk,tk=St,e!==null&&Fj(e)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var e=_e;;){if(e.flags&16384){var St=e.updateQueue;if(St!==null&&(St=St.stores,St!==null))for(var es=0;es<St.length;es++){var ts=St[es],ss=ts.getSnapshot;ts=ts.value;try{if(!He(ss(),ts))return!1}catch{return!1}}}if(St=e.child,e.subtreeFlags&16384&&St!==null)St.return=e,e=St;else{if(e===_e)break;for(;e.sibling===null;){if(e.return===null||e.return===_e)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ck(_e,e){for(e&=~rk,e&=~qk,_e.suspendedLanes|=e,_e.pingedLanes&=~e,_e=_e.expirationTimes;0<e;){var St=31-oc(e),es=1<<St;_e[St]=-1,e&=~es}}function Ek(_e){if(K$1&6)throw Error(p$1(327));Hk();var e=uc(_e,0);if(!(e&1))return Dk(_e,B$1()),null;var St=Ik(_e,e);if(_e.tag!==0&&St===2){var es=xc(_e);es!==0&&(e=es,St=Nk(_e,es))}if(St===1)throw St=pk,Kk(_e,0),Ck(_e,e),Dk(_e,B$1()),St;if(St===6)throw Error(p$1(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=e,Pk(_e,tk,uk),Dk(_e,B$1()),null}function Qk(_e,e){var St=K$1;K$1|=1;try{return _e(e)}finally{K$1=St,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var e=K$1;K$1|=1;var St=ok.transition,es=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=es,ok.transition=St,K$1=e,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(_e,e){_e.finishedWork=null,_e.finishedLanes=0;var St=_e.timeoutHandle;if(St!==-1&&(_e.timeoutHandle=-1,Gf(St)),Y$1!==null)for(St=Y$1.return;St!==null;){var es=St;switch(wg(es),es.tag){case 1:es=es.type.childContextTypes,es!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(es);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(es.type._context);break;case 22:case 23:Hj()}St=St.return}if(Q$1=_e,Y$1=_e=Pg(_e.current,null),Z$1=fj=e,T$1=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(e=0;e<fh.length;e++)if(St=fh[e],es=St.interleaved,es!==null){St.interleaved=null;var ts=es.next,ss=St.pending;if(ss!==null){var rs=ss.next;ss.next=ts,es.next=rs}St.pending=es}fh=null}return _e}function Mk(_e,e){do{var St=Y$1;try{if($g(),Fh.current=Rh,Ih){for(var es=M$1.memoizedState;es!==null;){var ts=es.queue;ts!==null&&(ts.pending=null),es=es.next}Ih=!1}if(Hh=0,O$1=N$1=M$1=null,Jh=!1,Kh=0,nk.current=null,St===null||St.return===null){T$1=1,pk=e,Y$1=null;break}e:{var ss=_e,rs=St.return,ns=St,is=e;if(e=Z$1,ns.flags|=32768,is!==null&&typeof is=="object"&&typeof is.then=="function"){var os=is,us=ns,ps=us.tag;if(!(us.mode&1)&&(ps===0||ps===11||ps===15)){var xs=us.alternate;xs?(us.updateQueue=xs.updateQueue,us.memoizedState=xs.memoizedState,us.lanes=xs.lanes):(us.updateQueue=null,us.memoizedState=null)}var cs=Ui(rs);if(cs!==null){cs.flags&=-257,Vi(cs,rs,ns,ss,e),cs.mode&1&&Si(ss,os,e),e=cs,is=os;var ys=e.updateQueue;if(ys===null){var gs=new Set;gs.add(is),e.updateQueue=gs}else ys.add(is);break e}else{if(!(e&1)){Si(ss,os,e),tj();break e}is=Error(p$1(426))}}else if(I$1&&ns.mode&1){var vs=Ui(rs);if(vs!==null){!(vs.flags&65536)&&(vs.flags|=256),Vi(vs,rs,ns,ss,e),Jg(Ji(is,ns));break e}}ss=is=Ji(is,ns),T$1!==4&&(T$1=2),sk===null?sk=[ss]:sk.push(ss),ss=rs;do{switch(ss.tag){case 3:ss.flags|=65536,e&=-e,ss.lanes|=e;var ds=Ni(ss,is,e);ph(ss,ds);break e;case 1:ns=is;var fs=ss.type,Es=ss.stateNode;if(!(ss.flags&128)&&(typeof fs.getDerivedStateFromError=="function"||Es!==null&&typeof Es.componentDidCatch=="function"&&(Ri===null||!Ri.has(Es)))){ss.flags|=65536,e&=-e,ss.lanes|=e;var Os=Qi(ss,ns,e);ph(ss,Os);break e}}ss=ss.return}while(ss!==null)}Sk(St)}catch(Hs){e=Hs,Y$1===St&&St!==null&&(Y$1=St=St.return);continue}break}while(1)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),Q$1===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$1,Z$1)}function Ik(_e,e){var St=K$1;K$1|=2;var es=Jk();(Q$1!==_e||Z$1!==e)&&(uk=null,Kk(_e,e));do try{Tk();break}catch(ts){Mk(_e,ts)}while(1);if($g(),K$1=St,mk.current=es,Y$1!==null)throw Error(p$1(261));return Q$1=null,Z$1=0,T$1}function Tk(){for(;Y$1!==null;)Uk(Y$1)}function Lk(){for(;Y$1!==null&&!cc();)Uk(Y$1)}function Uk(_e){var e=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,e===null?Sk(_e):Y$1=e,nk.current=null}function Sk(_e){var e=_e;do{var St=e.alternate;if(_e=e.return,e.flags&32768){if(St=Ij(St,e),St!==null){St.flags&=32767,Y$1=St;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$1=6,Y$1=null;return}}else if(St=Ej(St,e,fj),St!==null){Y$1=St;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=_e}while(e!==null);T$1===0&&(T$1=5)}function Pk(_e,e,St){var es=C$1,ts=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,e,St,es)}finally{ok.transition=ts,C$1=es}return null}function Wk(_e,e,St,es){do Hk();while(wk!==null);if(K$1&6)throw Error(p$1(327));St=_e.finishedWork;var ts=_e.finishedLanes;if(St===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,St===_e.current)throw Error(p$1(177));_e.callbackNode=null,_e.callbackPriority=0;var ss=St.lanes|St.childLanes;if(Bc(_e,ss),_e===Q$1&&(Y$1=Q$1=null,Z$1=0),!(St.subtreeFlags&2064)&&!(St.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),ss=(St.flags&15990)!==0,St.subtreeFlags&15990||ss){ss=ok.transition,ok.transition=null;var rs=C$1;C$1=1;var ns=K$1;K$1|=4,nk.current=null,Oj(_e,St),dk(St,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=St,hk(St),dc(),K$1=ns,C$1=rs,ok.transition=ss}else _e.current=St;if(vk&&(vk=!1,wk=_e,xk=ts),ss=_e.pendingLanes,ss===0&&(Ri=null),mc(St.stateNode),Dk(_e,B$1()),e!==null)for(es=_e.onRecoverableError,St=0;St<e.length;St++)ts=e[St],es(ts.value,{componentStack:ts.stack,digest:ts.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),ss=_e.pendingLanes,ss&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),e=ok.transition,St=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var es=!1;else{if(_e=wk,wk=null,xk=0,K$1&6)throw Error(p$1(331));var ts=K$1;for(K$1|=4,V$1=_e.current;V$1!==null;){var ss=V$1,rs=ss.child;if(V$1.flags&16){var ns=ss.deletions;if(ns!==null){for(var is=0;is<ns.length;is++){var os=ns[is];for(V$1=os;V$1!==null;){var us=V$1;switch(us.tag){case 0:case 11:case 15:Pj(8,us,ss)}var ps=us.child;if(ps!==null)ps.return=us,V$1=ps;else for(;V$1!==null;){us=V$1;var xs=us.sibling,cs=us.return;if(Sj(us),us===os){V$1=null;break}if(xs!==null){xs.return=cs,V$1=xs;break}V$1=cs}}}var ys=ss.alternate;if(ys!==null){var gs=ys.child;if(gs!==null){ys.child=null;do{var vs=gs.sibling;gs.sibling=null,gs=vs}while(gs!==null)}}V$1=ss}}if(ss.subtreeFlags&2064&&rs!==null)rs.return=ss,V$1=rs;else e:for(;V$1!==null;){if(ss=V$1,ss.flags&2048)switch(ss.tag){case 0:case 11:case 15:Pj(9,ss,ss.return)}var ds=ss.sibling;if(ds!==null){ds.return=ss.return,V$1=ds;break e}V$1=ss.return}}var fs=_e.current;for(V$1=fs;V$1!==null;){rs=V$1;var Es=rs.child;if(rs.subtreeFlags&2064&&Es!==null)Es.return=rs,V$1=Es;else e:for(rs=fs;V$1!==null;){if(ns=V$1,ns.flags&2048)try{switch(ns.tag){case 0:case 11:case 15:Qj(9,ns)}}catch(Hs){W$1(ns,ns.return,Hs)}if(ns===rs){V$1=null;break e}var Os=ns.sibling;if(Os!==null){Os.return=ns.return,V$1=Os;break e}V$1=ns.return}}if(K$1=ts,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc,_e)}catch{}es=!0}return es}finally{C$1=St,ok.transition=e}}return!1}function Xk(_e,e,St){e=Ji(St,e),e=Ni(_e,e,1),_e=nh(_e,e,1),e=R$1(),_e!==null&&(Ac(_e,1,e),Dk(_e,e))}function W$1(_e,e,St){if(_e.tag===3)Xk(_e,_e,St);else for(;e!==null;){if(e.tag===3){Xk(e,_e,St);break}else if(e.tag===1){var es=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof es.componentDidCatch=="function"&&(Ri===null||!Ri.has(es))){_e=Ji(St,_e),_e=Qi(e,_e,1),e=nh(e,_e,1),_e=R$1(),e!==null&&(Ac(e,1,_e),Dk(e,_e));break}}e=e.return}}function Ti(_e,e,St){var es=_e.pingCache;es!==null&&es.delete(e),e=R$1(),_e.pingedLanes|=_e.suspendedLanes&St,Q$1===_e&&(Z$1&St)===St&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-fk?Kk(_e,0):rk|=St),Dk(_e,e)}function Yk(_e,e){e===0&&(_e.mode&1?(e=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):e=1);var St=R$1();_e=ih(_e,e),_e!==null&&(Ac(_e,e,St),Dk(_e,St))}function uj(_e){var e=_e.memoizedState,St=0;e!==null&&(St=e.retryLane),Yk(_e,St)}function bk(_e,e){var St=0;switch(_e.tag){case 13:var es=_e.stateNode,ts=_e.memoizedState;ts!==null&&(St=ts.retryLane);break;case 19:es=_e.stateNode;break;default:throw Error(p$1(314))}es!==null&&es.delete(e),Yk(_e,St)}var Vk;Vk=function(_e,e,St){if(_e!==null)if(_e.memoizedProps!==e.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&St)&&!(e.flags&128))return dh=!1,yj(_e,e,St);dh=!!(_e.flags&131072)}else dh=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var es=e.type;ij(_e,e),_e=e.pendingProps;var ts=Yf(e,H$1.current);ch(e,St),ts=Nh(null,e,es,_e,ts,St);var ss=Sh();return e.flags|=1,typeof ts=="object"&&ts!==null&&typeof ts.render=="function"&&ts.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(es)?(ss=!0,cg(e)):ss=!1,e.memoizedState=ts.state!==null&&ts.state!==void 0?ts.state:null,kh(e),ts.updater=Ei,e.stateNode=ts,ts._reactInternals=e,Ii(e,es,_e,St),e=jj(null,e,es,!0,ss,St)):(e.tag=0,I$1&&ss&&vg(e),Xi(null,e,ts,St),e=e.child),e;case 16:es=e.elementType;e:{switch(ij(_e,e),_e=e.pendingProps,ts=es._init,es=ts(es._payload),e.type=es,ts=e.tag=Zk(es),_e=Ci(es,_e),ts){case 0:e=cj(null,e,es,_e,St);break e;case 1:e=hj(null,e,es,_e,St);break e;case 11:e=Yi(null,e,es,_e,St);break e;case 14:e=$i(null,e,es,Ci(es.type,_e),St);break e}throw Error(p$1(306,es,""))}return e;case 0:return es=e.type,ts=e.pendingProps,ts=e.elementType===es?ts:Ci(es,ts),cj(_e,e,es,ts,St);case 1:return es=e.type,ts=e.pendingProps,ts=e.elementType===es?ts:Ci(es,ts),hj(_e,e,es,ts,St);case 3:e:{if(kj(e),_e===null)throw Error(p$1(387));es=e.pendingProps,ss=e.memoizedState,ts=ss.element,lh(_e,e),qh(e,es,null,St);var rs=e.memoizedState;if(es=rs.element,ss.isDehydrated)if(ss={element:es,isDehydrated:!1,cache:rs.cache,pendingSuspenseBoundaries:rs.pendingSuspenseBoundaries,transitions:rs.transitions},e.updateQueue.baseState=ss,e.memoizedState=ss,e.flags&256){ts=Ji(Error(p$1(423)),e),e=lj(_e,e,es,St,ts);break e}else if(es!==ts){ts=Ji(Error(p$1(424)),e),e=lj(_e,e,es,St,ts);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,St=Vg(e,null,es,St),e.child=St;St;)St.flags=St.flags&-3|4096,St=St.sibling;else{if(Ig(),es===ts){e=Zi(_e,e,St);break e}Xi(_e,e,es,St)}e=e.child}return e;case 5:return Ah(e),_e===null&&Eg(e),es=e.type,ts=e.pendingProps,ss=_e!==null?_e.memoizedProps:null,rs=ts.children,Ef(es,ts)?rs=null:ss!==null&&Ef(es,ss)&&(e.flags|=32),gj(_e,e),Xi(_e,e,rs,St),e.child;case 6:return _e===null&&Eg(e),null;case 13:return oj(_e,e,St);case 4:return yh(e,e.stateNode.containerInfo),es=e.pendingProps,_e===null?e.child=Ug(e,null,es,St):Xi(_e,e,es,St),e.child;case 11:return es=e.type,ts=e.pendingProps,ts=e.elementType===es?ts:Ci(es,ts),Yi(_e,e,es,ts,St);case 7:return Xi(_e,e,e.pendingProps,St),e.child;case 8:return Xi(_e,e,e.pendingProps.children,St),e.child;case 12:return Xi(_e,e,e.pendingProps.children,St),e.child;case 10:e:{if(es=e.type._context,ts=e.pendingProps,ss=e.memoizedProps,rs=ts.value,G$1(Wg,es._currentValue),es._currentValue=rs,ss!==null)if(He(ss.value,rs)){if(ss.children===ts.children&&!Wf.current){e=Zi(_e,e,St);break e}}else for(ss=e.child,ss!==null&&(ss.return=e);ss!==null;){var ns=ss.dependencies;if(ns!==null){rs=ss.child;for(var is=ns.firstContext;is!==null;){if(is.context===es){if(ss.tag===1){is=mh(-1,St&-St),is.tag=2;var os=ss.updateQueue;if(os!==null){os=os.shared;var us=os.pending;us===null?is.next=is:(is.next=us.next,us.next=is),os.pending=is}}ss.lanes|=St,is=ss.alternate,is!==null&&(is.lanes|=St),bh(ss.return,St,e),ns.lanes|=St;break}is=is.next}}else if(ss.tag===10)rs=ss.type===e.type?null:ss.child;else if(ss.tag===18){if(rs=ss.return,rs===null)throw Error(p$1(341));rs.lanes|=St,ns=rs.alternate,ns!==null&&(ns.lanes|=St),bh(rs,St,e),rs=ss.sibling}else rs=ss.child;if(rs!==null)rs.return=ss;else for(rs=ss;rs!==null;){if(rs===e){rs=null;break}if(ss=rs.sibling,ss!==null){ss.return=rs.return,rs=ss;break}rs=rs.return}ss=rs}Xi(_e,e,ts.children,St),e=e.child}return e;case 9:return ts=e.type,es=e.pendingProps.children,ch(e,St),ts=eh(ts),es=es(ts),e.flags|=1,Xi(_e,e,es,St),e.child;case 14:return es=e.type,ts=Ci(es,e.pendingProps),ts=Ci(es.type,ts),$i(_e,e,es,ts,St);case 15:return bj(_e,e,e.type,e.pendingProps,St);case 17:return es=e.type,ts=e.pendingProps,ts=e.elementType===es?ts:Ci(es,ts),ij(_e,e),e.tag=1,Zf(es)?(_e=!0,cg(e)):_e=!1,ch(e,St),Gi(e,es,ts),Ii(e,es,ts,St),jj(null,e,es,!0,_e,St);case 19:return xj(_e,e,St);case 22:return dj(_e,e,St)}throw Error(p$1(156,e.tag))};function Fk(_e,e){return ac(_e,e)}function $k(_e,e,St,es){this.tag=_e,this.key=St,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=es,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,e,St,es){return new $k(_e,e,St,es)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,e){var St=_e.alternate;return St===null?(St=Bg(_e.tag,e,_e.key,_e.mode),St.elementType=_e.elementType,St.type=_e.type,St.stateNode=_e.stateNode,St.alternate=_e,_e.alternate=St):(St.pendingProps=e,St.type=_e.type,St.flags=0,St.subtreeFlags=0,St.deletions=null),St.flags=_e.flags&14680064,St.childLanes=_e.childLanes,St.lanes=_e.lanes,St.child=_e.child,St.memoizedProps=_e.memoizedProps,St.memoizedState=_e.memoizedState,St.updateQueue=_e.updateQueue,e=_e.dependencies,St.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},St.sibling=_e.sibling,St.index=_e.index,St.ref=_e.ref,St}function Rg(_e,e,St,es,ts,ss){var rs=2;if(es=_e,typeof _e=="function")aj(_e)&&(rs=1);else if(typeof _e=="string")rs=5;else e:switch(_e){case ya:return Tg(St.children,ts,ss,e);case za:rs=8,ts|=8;break;case Aa:return _e=Bg(12,St,e,ts|2),_e.elementType=Aa,_e.lanes=ss,_e;case Ea:return _e=Bg(13,St,e,ts),_e.elementType=Ea,_e.lanes=ss,_e;case Fa:return _e=Bg(19,St,e,ts),_e.elementType=Fa,_e.lanes=ss,_e;case Ia:return pj(St,ts,ss,e);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:rs=10;break e;case Ca:rs=9;break e;case Da:rs=11;break e;case Ga:rs=14;break e;case Ha:rs=16,es=null;break e}throw Error(p$1(130,_e==null?_e:typeof _e,""))}return e=Bg(rs,St,e,ts),e.elementType=_e,e.type=es,e.lanes=ss,e}function Tg(_e,e,St,es){return _e=Bg(7,_e,es,e),_e.lanes=St,_e}function pj(_e,e,St,es){return _e=Bg(22,_e,es,e),_e.elementType=Ia,_e.lanes=St,_e.stateNode={isHidden:!1},_e}function Qg(_e,e,St){return _e=Bg(6,_e,null,e),_e.lanes=St,_e}function Sg(_e,e,St){return e=Bg(4,_e.children!==null?_e.children:[],_e.key,e),e.lanes=St,e.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},e}function al(_e,e,St,es,ts){this.tag=e,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=es,this.onRecoverableError=ts,this.mutableSourceEagerHydrationData=null}function bl(_e,e,St,es,ts,ss,rs,ns,is){return _e=new al(_e,e,St,ns,is),e===1?(e=1,ss===!0&&(e|=8)):e=0,ss=Bg(3,null,null,e),_e.current=ss,ss.stateNode=_e,ss.memoizedState={element:es,isDehydrated:St,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(ss),_e}function cl(_e,e,St){var es=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:es==null?null:""+es,children:_e,containerInfo:e,implementation:St}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$1(170));var e=_e;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(_e.tag===1){var St=_e.type;if(Zf(St))return bg(_e,St,e)}return e}function el(_e,e,St,es,ts,ss,rs,ns,is){return _e=bl(St,es,!0,_e,ts,ss,rs,ns,is),_e.context=dl(null),St=_e.current,es=R$1(),ts=yi(St),ss=mh(es,ts),ss.callback=e??null,nh(St,ss,ts),_e.current.lanes=ts,Ac(_e,ts,es),Dk(_e,es),_e}function fl$1(_e,e,St,es){var ts=e.current,ss=R$1(),rs=yi(ts);return St=dl(St),e.context===null?e.context=St:e.pendingContext=St,e=mh(ss,rs),e.payload={element:_e},es=es===void 0?null:es,es!==null&&(e.callback=es),_e=nh(ts,e,rs),_e!==null&&(gi(_e,ts,rs,ss),oh(_e,ts,rs)),rs}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,e){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var St=_e.retryLane;_e.retryLane=St!==0&&St<e?St:e}}function il(_e,e){hl(_e,e),(_e=_e.alternate)&&hl(_e,e)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var e=this._internalRoot;if(e===null)throw Error(p$1(409));fl$1(_e,e,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var e=_e.containerInfo;Rk(function(){fl$1(null,_e,null,null)}),e[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var e=Hc();_e={blockedOn:null,target:_e,priority:e};for(var St=0;St<Qc.length&&e!==0&&e<Qc[St].priority;St++);Qc.splice(St,0,_e),St===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,e,St,es,ts){if(ts){if(typeof es=="function"){var ss=es;es=function(){var os=gl(rs);ss.call(os)}}var rs=el(e,es,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=rs,_e[uf]=rs.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),rs}for(;ts=_e.lastChild;)_e.removeChild(ts);if(typeof es=="function"){var ns=es;es=function(){var os=gl(is);ns.call(os)}}var is=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=is,_e[uf]=is.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl$1(e,is,St,es)}),is}function rl(_e,e,St,es,ts){var ss=St._reactRootContainer;if(ss){var rs=ss;if(typeof ts=="function"){var ns=ts;ts=function(){var is=gl(rs);ns.call(is)}}fl$1(e,rs,_e,ts)}else rs=ql(St,e,_e,ts,es);return gl(rs)}Ec=function(_e){switch(_e.tag){case 3:var e=_e.stateNode;if(e.current.memoizedState.isDehydrated){var St=tc(e.pendingLanes);St!==0&&(Cc(e,St|1),Dk(e,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var es=ih(_e,1);if(es!==null){var ts=R$1();gi(es,_e,1,ts)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var e=ih(_e,134217728);if(e!==null){var St=R$1();gi(e,_e,134217728,St)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var e=yi(_e),St=ih(_e,e);if(St!==null){var es=R$1();gi(St,_e,e,es)}il(_e,e)}};Hc=function(){return C$1};Ic=function(_e,e){var St=C$1;try{return C$1=_e,e()}finally{C$1=St}};yb=function(_e,e,St){switch(e){case"input":if(bb(_e,St),e=St.name,St.type==="radio"&&e!=null){for(St=_e;St.parentNode;)St=St.parentNode;for(St=St.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<St.length;e++){var es=St[e];if(es!==_e&&es.form===_e.form){var ts=Db(es);if(!ts)throw Error(p$1(90));Wa(es),bb(es,ts)}}}break;case"textarea":ib(_e,St);break;case"select":e=St.value,e!=null&&fb(_e,!!St.multiple,e,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc$1=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,e){var St=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(e))throw Error(p$1(200));return cl(_e,e,null,St)};reactDom_production_min.createRoot=function(_e,e){if(!nl(_e))throw Error(p$1(299));var St=!1,es="",ts=kl;return e!=null&&(e.unstable_strictMode===!0&&(St=!0),e.identifierPrefix!==void 0&&(es=e.identifierPrefix),e.onRecoverableError!==void 0&&(ts=e.onRecoverableError)),e=bl(_e,1,!1,null,null,St,!1,es,ts),_e[uf]=e.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(e)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var e=_e._reactInternals;if(e===void 0)throw typeof _e.render=="function"?Error(p$1(188)):(_e=Object.keys(_e).join(","),Error(p$1(268,_e)));return _e=Zb(e),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,e,St){if(!ol(e))throw Error(p$1(200));return rl(null,_e,e,!0,St)};reactDom_production_min.hydrateRoot=function(_e,e,St){if(!nl(_e))throw Error(p$1(405));var es=St!=null&&St.hydratedSources||null,ts=!1,ss="",rs=kl;if(St!=null&&(St.unstable_strictMode===!0&&(ts=!0),St.identifierPrefix!==void 0&&(ss=St.identifierPrefix),St.onRecoverableError!==void 0&&(rs=St.onRecoverableError)),e=el(e,null,_e,1,St??null,ts,!1,ss,rs),_e[uf]=e.current,sf(_e),es)for(_e=0;_e<es.length;_e++)St=es[_e],ts=St._getVersion,ts=ts(St._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[St,ts]:e.mutableSourceEagerHydrationData.push(St,ts);return new ml(e)};reactDom_production_min.render=function(_e,e,St){if(!ol(e))throw Error(p$1(200));return rl(null,_e,e,!1,St)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$1(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,e,St,es){if(!ol(St))throw Error(p$1(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$1(38));return rl(_e,e,St,!1,es)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports,m$1=reactDomExports;client.createRoot=m$1.createRoot,client.hydrateRoot=m$1.hydrateRoot;var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(_e,e)=>{const St=reactExports.forwardRef(({color:es="currentColor",size:ts=24,strokeWidth:ss=2,absoluteStrokeWidth:rs,children:ns,...is},os)=>reactExports.createElement("svg",{ref:os,...defaultAttributes,width:ts,height:ts,stroke:es,strokeWidth:rs?Number(ss)*24/Number(ts):ss,className:`lucide lucide-${toKebabCase(_e)}`,...is},[...e.map(([us,ps])=>reactExports.createElement(us,ps)),...(Array.isArray(ns)?ns:[ns])||[]]));return St.displayName=`${_e}`,St};var createLucideIcon$1=createLucideIcon;const AlertCircle=createLucideIcon$1("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),AlertTriangle=createLucideIcon$1("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Archive=createLucideIcon$1("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),ArrowLeft=createLucideIcon$1("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ArrowRightLeft=createLucideIcon$1("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),ArrowRight=createLucideIcon$1("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),BarChart3=createLucideIcon$1("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),BookOpen=createLucideIcon$1("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Bot=createLucideIcon$1("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),Building2=createLucideIcon$1("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Calendar=createLucideIcon$1("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Camera=createLucideIcon$1("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),CheckCircle=createLucideIcon$1("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),CheckSquare=createLucideIcon$1("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Check=createLucideIcon$1("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ChefHat=createLucideIcon$1("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),ChevronDown=createLucideIcon$1("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ChevronUp=createLucideIcon$1("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ClipboardList=createLucideIcon$1("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Clock=createLucideIcon$1("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Database=createLucideIcon$1("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Download=createLucideIcon$1("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Droplets=createLucideIcon$1("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]),EyeOff=createLucideIcon$1("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Eye=createLucideIcon$1("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),FileDown=createLucideIcon$1("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),FileText=createLucideIcon$1("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Filter=createLucideIcon$1("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),FolderPlus=createLucideIcon$1("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),Folder=createLucideIcon$1("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),GraduationCap=createLucideIcon$1("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),HardDrive=createLucideIcon$1("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),HelpCircle=createLucideIcon$1("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Image$1=createLucideIcon$1("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Info=createLucideIcon$1("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Lock=createLucideIcon$1("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),LogIn=createLucideIcon$1("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),LogOut=createLucideIcon$1("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Mail=createLucideIcon$1("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),MapPin=createLucideIcon$1("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),MicOff=createLucideIcon$1("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Mic=createLucideIcon$1("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Minus=createLucideIcon$1("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),Move=createLucideIcon$1("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),Package=createLucideIcon$1("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),PenLine=createLucideIcon$1("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),PenSquare=createLucideIcon$1("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Phone=createLucideIcon$1("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Plus=createLucideIcon$1("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),QrCode=createLucideIcon$1("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),RefreshCw=createLucideIcon$1("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Save=createLucideIcon$1("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Scan=createLucideIcon$1("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Search=createLucideIcon$1("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Send=createLucideIcon$1("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Settings=createLucideIcon$1("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Shield=createLucideIcon$1("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),Smartphone=createLucideIcon$1("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Snowflake=createLucideIcon$1("Snowflake",[["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"m20 16-4-4 4-4",key:"rquw4f"}],["path",{d:"m4 8 4 4-4 4",key:"12s3z9"}],["path",{d:"m16 4-4 4-4-4",key:"1tumq1"}],["path",{d:"m8 20 4-4 4 4",key:"9p200w"}]]),Sparkles=createLucideIcon$1("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),StickyNote=createLucideIcon$1("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),Tag=createLucideIcon$1("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Thermometer=createLucideIcon$1("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),ToggleLeft=createLucideIcon$1("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),ToggleRight=createLucideIcon$1("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),Trash2=createLucideIcon$1("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Truck=createLucideIcon$1("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),Upload=createLucideIcon$1("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),User=createLucideIcon$1("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Users=createLucideIcon$1("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Wifi=createLucideIcon$1("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),XCircle=createLucideIcon$1("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),X$2=createLucideIcon$1("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Zap=createLucideIcon$1("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function Card({className:_e,...e}){return jsxRuntimeExports.jsx("div",{className:`rounded-lg border bg-white text-card-foreground shadow-sm ${_e}`,...e})}function CardHeader({className:_e,...e}){return jsxRuntimeExports.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${_e}`,...e})}function CardTitle({className:_e,...e}){return jsxRuntimeExports.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${_e}`,...e})}function CardContent({className:_e,...e}){return jsxRuntimeExports.jsx("div",{className:`p-6 pt-0 ${_e}`,...e})}function Dashboard({temperatures:_e=[],cleaning:e=[],staff:St=[],products:es=[],currentUser:ts}){const ss=_e.filter(is=>is.status==="ok").length,rs=_e.filter(is=>is.status==="danger").length,ns=e.filter(is=>!is.completed).length;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-8 w-8 text-green-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600",children:ss}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Temperature OK"})]})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-8 w-8 text-red-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-600",children:rs}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Problemi Temp."})]})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Package,{className:"h-8 w-8 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ns}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Pulizie Pending"})]})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-8 w-8 text-purple-600"}),jsxRuntimeExports.jsxs("div",{className:"ml-4",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-purple-600",children:es.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Prodotti"})]})]})})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{children:["Benvenuto, ",ts==null?void 0:ts.name,"!"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Dashboard Business HACCP Manager"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Ruolo: ",(ts==null?void 0:ts.role)==="admin"?"Amministratore":"Dipendente","  Reparto: ",ts==null?void 0:ts.department]}),(()=>{const is=localStorage.getItem("haccp-onboarding");if(!is||is==="[object Object]")return null;let os={};try{os=JSON.parse(is)}catch(us){return console.error("Errore parsing onboarding data:",us),null}return os.businessInfo?jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Informazioni Azienda"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[os.businessInfo.businessName&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"Nome Azienda:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.businessName})]}),os.businessInfo.businessType&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"Tipo Attivit:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.businessType})]}),os.businessInfo.address&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"Indirizzo:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.address})]}),os.businessInfo.phone&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"Telefono:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.phone})]}),os.businessInfo.email&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"Email:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.email})]}),os.businessInfo.vatNumber&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-blue-700 font-medium",children:"P.IVA:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-blue-600",children:os.businessInfo.vatNumber})]})]})]}):null})()]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-blue-600"})," Nuove Funzionalit HACCP"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Validazione Automatica Prodotti-Frigoriferi"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700",children:"L'applicazione ora verifica automaticamente la compatibilit tra categorie di prodotti e punti di conservazione, prevenendo errori di conservazione e migliorando la sicurezza alimentare."})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Gestione Categorie Personalizzate"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700",children:"Puoi creare nuove categorie di prodotti direttamente dall'interfaccia, rendendo il sistema pi flessibile e adattabile alle tue esigenze specifiche."})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Prevenzione Contaminazioni"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-700",children:"I frigoriferi possono essere dedicati a categorie specifiche, riducendo il rischio di contaminazioni incrociate e migliorando la tracciabilit."})]})]})})]})]})}const buttonVariants={default:"bg-primary-500 text-white hover:bg-primary-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100",link:"text-primary-500 underline-offset-4 hover:underline"},buttonSizes={default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"};function Button({className:_e,variant:e="default",size:St="default",asChild:es=!1,...ts}){const ss=es?"span":"button";return jsxRuntimeExports.jsx(ss,{className:`
        inline-flex items-center justify-center rounded-md text-sm font-medium
        ring-offset-background transition-colors focus-visible:outline-none
        focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2
        disabled:pointer-events-none disabled:opacity-50
        ${buttonVariants[e]}
        ${buttonSizes[St]}
        ${_e}
      `,...ts})}function Input({className:_e,type:e,...St}){return jsxRuntimeExports.jsx("input",{type:e,className:`
        flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2
        text-sm ring-offset-background file:border-0 file:bg-transparent
        file:text-sm file:font-medium placeholder:text-gray-500
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500
        focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50
        ${_e}
      `,...St})}function Label({className:_e,...e}){return jsxRuntimeExports.jsx("label",{className:`
        text-sm font-medium leading-none peer-disabled:cursor-not-allowed
        peer-disabled:opacity-70 ${_e}
      `,...e})}function TemperatureInput({label:_e="Range Temperatura (C)",minValue:e,maxValue:St,onMinChange:es,onMaxChange:ts,minPlaceholder:ss="min",maxPlaceholder:rs="max",required:ns=!1,showValidation:is=!0,showSuggestions:os=!0,compactMode:us=!1,className:ps="",id:xs="temperature-range"}){const[cs,ys]=reactExports.useState(!1),gs=parseFloat(e),vs=parseFloat(St),ds=e&&St&&!isNaN(gs)&&!isNaN(vs),fs=ds&&gs<vs,Es=(Hs,Qs)=>{const zs=(Hs+Qs)/2;return zs<=-13.5?"Surgelato":zs>=15?"Temperatura Ambiente":"Refrigerato"},Os=(Hs,Qs)=>{const zs=(Hs+Qs)/2;return zs<0||zs>8?"danger":zs>=6&&zs<=8?"warning":"ok"};return us?jsxRuntimeExports.jsxs("div",{className:ps,children:[jsxRuntimeExports.jsxs(Label,{htmlFor:xs,children:[_e," ",ns&&"*"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"da"}),jsxRuntimeExports.jsx(Input,{id:`${xs}-min`,type:"number",step:"0.1",value:e||"",onChange:es,placeholder:ss,className:"w-20 text-center font-medium text-sm",required:ns}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"a"}),jsxRuntimeExports.jsx(Input,{id:`${xs}-max`,type:"number",step:"0.1",value:St||"",onChange:ts,placeholder:rs,className:"w-20 text-center font-medium text-sm",required:ns}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"})]}),is&&ds&&!fs&&jsxRuntimeExports.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" Min < Max"}),os&&jsxRuntimeExports.jsx("div",{className:"mt-1 text-xs text-gray-500",children:" Carne (2-4C), Pesce (0-2C), Surgelati (-18C)"})]}):jsxRuntimeExports.jsxs("div",{className:ps,children:[jsxRuntimeExports.jsxs(Label,{htmlFor:xs,children:[_e," ",ns&&"*"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"da"}),jsxRuntimeExports.jsx(Input,{id:`${xs}-min`,type:"number",step:"0.1",value:e||"",onChange:es,placeholder:ss,className:"w-24 text-center font-medium",required:ns}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"a"}),jsxRuntimeExports.jsx(Input,{id:`${xs}-max`,type:"number",step:"0.1",value:St||"",onChange:ts,placeholder:rs,className:"w-24 text-center font-medium",required:ns}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"})]}),is&&ds&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>ys(!cs),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[cs?jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"}),jsxRuntimeExports.jsx(Info,{className:"h-4 w-4"}),"Dettagli temperatura"]}),cs&&jsxRuntimeExports.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Tipo: "}),jsxRuntimeExports.jsx("span",{children:Es(gs,vs)})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Stato: "}),jsxRuntimeExports.jsx("span",{children:Os(gs,vs)==="ok"?" Normale":Os(gs,vs)==="warning"?" Attenzione":" Critica"})]}),!fs&&jsxRuntimeExports.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" La temperatura minima deve essere inferiore alla massima"})]})})]}),os&&jsxRuntimeExports.jsx("div",{className:"mt-2 text-xs text-gray-500",children:" Suggerimenti: Carne fresca (2-4C), Pesce (0-2C), Surgelati (-18C), Ambiente (15-25C)"})]})}function Cleaning({cleaning:_e,setCleaning:e,temperatures:St,setTemperatures:es,currentUser:ts,refrigerators:ss=[],setRefrigerators:rs}){const ns=_e||[],is=St||[];reactExports.useEffect(()=>{if(ns.some($s=>!$s.date||!$s.frequency)){const $s=ns.map(qs=>({...qs,date:qs.date||new Date().toLocaleDateString("it-IT"),frequency:qs.frequency||"daily",completed:qs.completed||!1,completedAt:qs.completedAt||null,completedBy:qs.completedBy||null}));e($s)}},[]);const[os,us]=reactExports.useState({task:"",assignee:"",frequency:""}),[ps,xs]=reactExports.useState({location:"",temperatureMin:"",temperatureMax:""}),[cs,ys]=reactExports.useState("daily");reactExports.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(ns))},[ns]),reactExports.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(is))},[is]);const gs=(ks,$s)=>{const qs=(ks+$s)/2;return qs<0||qs>8?"danger":qs>=6&&qs<=8?"warning":"ok"},vs=ks=>{if(ks.preventDefault(),!os.task||!os.assignee||!os.frequency){alert(` Attenzione: Per aggiungere una nuova attivit devi compilare tutti i campi richiesti.

 Attivit: descrivi cosa fare
 Assegnato a: chi  responsabile
 Frequenza: ogni quanto ripetere`);return}const $s={id:Date.now().toString(),task:os.task,assignee:os.assignee,frequency:os.frequency,date:new Date().toLocaleDateString("it-IT"),completed:!1,completedAt:null,completedBy:null},qs=[...ns,$s];e(qs),localStorage.setItem("haccp-cleaning",JSON.stringify(qs)),us({task:"",assignee:"",frequency:""}),alert(` Perfetto! La nuova attivit  stata aggiunta con successo.

Ora apparir nella lista delle attivit da svolgere e potrai monitorarne il progresso.`)},ds=ks=>{if(ks.preventDefault(),!ps.location||!ps.temperatureMin||!ps.temperatureMax){alert(` Attenzione: Per registrare una temperatura devi compilare tutti i campi richiesti.

 Frigorifero/Freezer: seleziona il punto di conservazione
 Range Temperatura: inserisci i valori minimo e massimo`);return}const $s=parseFloat(ps.temperatureMin),qs=parseFloat(ps.temperatureMax);if(isNaN($s)||isNaN(qs)){alert(` Errore: I valori delle temperature devono essere numeri validi.

Esempi corretti:
 Min: -2, Max: 4
 Min: 0, Max: 8
 Min: -18, Max: -15`);return}if($s>qs){alert(` Attenzione: La temperatura minima non pu essere maggiore della massima.

Correggi i valori:
 Min: deve essere inferiore o uguale a Max
 Esempio: Min: -2, Max: 4`);return}const Cs={id:Date.now().toString(),temperature:($s+qs)/2,temperatureMin:$s,temperatureMax:qs,refrigeratorId:ps.location,refrigeratorName:ps.location,date:new Date().toLocaleString("it-IT"),status:gs($s,qs),recordedBy:(ts==null?void 0:ts.name)||"Unknown"},Us=[...is,Cs];es(Us),localStorage.setItem("haccp-temperatures",JSON.stringify(Us)),xs({location:"",temperatureMin:"",temperatureMax:""});const Ps=Cs.status==="ok"?" Temperatura nella norma":Cs.status==="warning"?" Attenzione: temperatura al limite":" Attenzione: temperatura critica";alert(` Temperatura registrata con successo!

${Ps}

 Frigorifero: ${Cs.refrigeratorName}
 Range: ${$s}C - ${qs}C
 Data: ${Cs.date}`)},fs=ks=>{const $s=ns.map(qs=>qs.id===ks?{...qs,completed:!qs.completed,completedAt:qs.completed?null:new Date().toLocaleString("it-IT"),completedBy:qs.completed?null:(ts==null?void 0:ts.name)||"Unknown"}:qs);e($s),localStorage.setItem("haccp-cleaning",JSON.stringify($s))},Es=ks=>{const $s=ns.filter(qs=>qs.id!==ks);e($s),localStorage.setItem("haccp-cleaning",JSON.stringify($s))},Os=ns.filter(ks=>!ks.completed),Hs=ns.filter(ks=>ks.completed),zs=(()=>{const ks=new Date,$s=new Date(ks.getFullYear(),ks.getMonth(),ks.getDate());return ns.filter(qs=>{if(qs.completed||!qs.date||typeof qs.date!="string")return!1;const Cs=new Date(qs.date.split("/").reverse().join("-"));switch(qs.frequency){case"daily":const Us=new Date($s);return Us.setDate(Us.getDate()-1),Cs<=Us;case"weekly":const Ps=new Date($s);return Ps.setDate(Ps.getDate()-7),Cs<=Ps;case"monthly":const er=new Date($s);return er.setMonth(er.getMonth()-1),Cs<=er;case"yearly":const tr=new Date($s);return tr.setFullYear(tr.getFullYear()-1),Cs<=tr;default:const vr=new Date($s);return vr.setDate(vr.getDate()-7),Cs<=vr}})})(),Ls=(Os||[]).filter(ks=>ks.frequency==="daily"),Bs=(Os||[]).filter(ks=>ks.frequency==="weekly"),Gs=(Os||[]).filter(ks=>ks.frequency==="monthly"),bs=(Os||[]).filter(ks=>ks.frequency==="yearly"),As=(ts==null?void 0:ts.role)==="admin";return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5"}),"Nuove Attivit / Mansioni"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:" Crea nuove attivit di pulizia e sanificazione per mantenere la conformit HACCP"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:vs,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"task",className:"flex items-center gap-2",children:["Attivit",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Descrivi in modo chiaro e specifico l'attivit da svolgere",children:""})]}),jsxRuntimeExports.jsx(Input,{id:"task",placeholder:"Es: Pulizia frigorifero, Sanificazione piano lavoro...",value:os.task,onChange:ks=>us({...os,task:ks.target.value}),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:' Suggerimento: Sii specifico (es. "Pulizia mensile frigorifero principale" invece di solo "Pulizia")'})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"assignee",className:"flex items-center gap-2",children:["Assegnato a",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Specifica chi  responsabile dell'esecuzione dell'attivit",children:""})]}),jsxRuntimeExports.jsx(Input,{id:"assignee",placeholder:"Nome del responsabile",value:os.assignee,onChange:ks=>us({...os,assignee:ks.target.value}),required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:' Esempio: "Mario Rossi" o "Team Cucina"'})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"frequency",className:"flex items-center gap-2",children:["Frequenza",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Seleziona con quale frequenza l'attivit deve essere ripetuta",children:""})]}),jsxRuntimeExports.jsxs("select",{id:"frequency",value:os.frequency,onChange:ks=>us({...os,frequency:ks.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona Frequenza --"}),jsxRuntimeExports.jsx("option",{value:"daily",children:" Giornalmente"}),jsxRuntimeExports.jsx("option",{value:"weekly",children:" Settimanalmente"}),jsxRuntimeExports.jsx("option",{value:"monthly",children:" Mensilmente"}),jsxRuntimeExports.jsx("option",{value:"yearly",children:" Annualmente"}),(ts==null?void 0:ts.role)==="admin"&&jsxRuntimeExports.jsx("option",{value:"all",children:" Tutti"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:" La frequenza aiuta a pianificare e monitorare le attivit"})]})]}),jsxRuntimeExports.jsx(Button,{type:"submit",className:"w-full",children:" Aggiungi Attivit"})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5 text-yellow-600"}),"Attivit da Svolgere (",Os.length,")"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:" Organizza e monitora le attivit di pulizia e sanificazione per mantenere la conformit HACCP"})]}),jsxRuntimeExports.jsx(CardContent,{children:Os.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:" Nessuna attivit da svolgere"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Tutte le attivit sono completate! Ottimo lavoro nel mantenere la conformit HACCP."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-2",children:" Suggerimento: Crea nuove attivit per mantenere sempre aggiornato il piano di pulizia"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>ys("daily"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${cs==="daily"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Giornaliere (",Ls.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ys("weekly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${cs==="weekly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Settimanali (",Bs.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ys("monthly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${cs==="monthly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Mensili (",Gs.length,")"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>ys("yearly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${cs==="yearly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Annuali (",bs.length,")"]}),(ts==null?void 0:ts.role)==="admin"&&jsxRuntimeExports.jsxs("button",{onClick:()=>ys("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${cs==="all"?"bg-white text-gray-700 border-2 border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Tutti (",Os.length,")"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:" Clicca sulle schede per filtrare le attivit per frequenza e organizzare meglio il lavoro"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:(()=>{let ks=[];switch(cs){case"daily":ks=Ls;break;case"weekly":ks=Bs;break;case"monthly":ks=Gs;break;case"yearly":ks=bs;break;case"all":ks=Os;break;default:ks=Ls}return ks.map($s=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:$s.task}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Assegnato a: ",$s.assignee,"  ",$s.date]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:()=>fs($s.id),className:"bg-green-600 hover:bg-green-700 p-2 md:p-1",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-6 w-6 md:h-4 md:w-4 mr-1"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Completata"})]}),As&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Es($s.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:jsxRuntimeExports.jsx(Trash2,{className:"h-6 w-6 md:h-4 md:w-4"})})]})]},$s.id))})()})]})})]}),Hs.length>0&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-5 w-5 text-green-600"}),"Attivit Completate (",Hs.length,")"]}),As&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>{confirm(` Attenzione: Sei sicuro di voler eliminare tutte le attivit completate?

Questa azione non pu essere annullata e rimuover la cronologia delle attivit svolte.`)&&e(ns.filter(ks=>!ks.completed))},className:"text-red-600 hover:text-red-700",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 mr-2"}),"Elimina Tutte"]})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:" Storico delle attivit completate - Mantiene traccia di tutto il lavoro svolto per la conformit HACCP"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Hs.map(ks=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium line-through",children:ks.task}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:[" Assegnato a: ",ks.assignee,"   Completata: ",ks.completedAt,ks.completedBy&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-blue-600",children:["  Completata da: ",ks.completedBy]})]})]}),As&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Es(ks.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:jsxRuntimeExports.jsx(Trash2,{className:"h-6 w-6 md:h-4 md:w-4"})})]},ks.id))})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-5 w-5"}),"Registra Temperatura Frigorifero/Freezer"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:" Monitora le temperature per garantire la sicurezza alimentare e la conformit HACCP"}),ts&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:[" Registrando come: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:ts.name})," (",ts.department,")"]})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:ds,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"temp-location",className:"flex items-center gap-2",children:["Frigorifero / Freezer",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Seleziona il punto di conservazione dove hai misurato la temperatura",children:""})]}),ss.length===0?jsxRuntimeExports.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-800",children:" Nessun punto di conservazione registrato."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:' Per registrare le temperature, devi prima aggiungere un frigorifero o freezer nella sezione "Punti di Conservazione".'})]}):jsxRuntimeExports.jsxs("select",{id:"temp-location",value:ps.location,onChange:ks=>xs({...ps,location:ks.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona Frigorifero/Freezer --"}),ss.map(ks=>jsxRuntimeExports.jsxs("option",{value:ks.name,children:[ks.name," (",ks.location||"Posizione non specificata",")"]},ks.id))]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Seleziona il frigorifero o freezer dove hai misurato la temperatura"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"temp-temperature-range",className:"flex items-center gap-2",children:["Range Temperatura (C)",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Inserisci la temperatura minima e massima rilevata nel punto di conservazione",children:""})]}),jsxRuntimeExports.jsx(TemperatureInput,{label:"Range Temperatura (C)",minValue:ps.temperatureMin,maxValue:ps.temperatureMax,onMinChange:ks=>xs({...ps,temperatureMin:ks.target.value}),onMaxChange:ks=>xs({...ps,temperatureMax:ks.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temp-temperature-range"}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[jsxRuntimeExports.jsxs("p",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Frigoriferi:"})," 0C - 8C (ideale: 2C - 6C)"]}),jsxRuntimeExports.jsxs("p",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Freezer:"})," -18C o inferiore"]}),jsxRuntimeExports.jsxs("p",{children:[" ",jsxRuntimeExports.jsx("strong",{children:"Suggerimento:"})," Misura in diversi punti per avere un range completo"]})]})]})]}),jsxRuntimeExports.jsxs(Button,{type:"submit",className:"w-full md:w-auto",disabled:ss.length===0,children:[jsxRuntimeExports.jsx(Thermometer,{className:"mr-2 h-4 w-4"})," Registra Temperatura"]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni da Svolgere"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Os.length}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Os.length===0?" Tutto sotto controllo!":" Richiedono la tua attenzione"})]}),jsxRuntimeExports.jsx(Clock,{className:"h-10 w-10 md:h-8 md:w-8 text-yellow-500"})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Completate"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600",children:Hs.length}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Hs.length===0?" Inizia con la prima attivit!":" Buon lavoro!"})]}),jsxRuntimeExports.jsx(CheckCircle,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Mancate"}),jsxRuntimeExports.jsx("p",{className:`text-2xl font-bold ${zs.length>0?"text-red-600":"text-green-600"}`,children:zs.length}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:zs.length===0?" Perfetto! Nessuna scadenza mancata":" Richiedono attenzione immediata"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"(ultimi 7 giorni)"})]}),zs.length>0?jsxRuntimeExports.jsx(AlertTriangle,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"}):jsxRuntimeExports.jsx(CheckCircle,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Temperature da Monitorare"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-red-600",children:is.filter(ks=>ks.status==="danger"||ks.status==="warning").length}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:is.filter(ks=>ks.status==="danger"||ks.status==="warning").length===0?" Temperature nella norma":" Richiedono verifica"})]}),jsxRuntimeExports.jsx(AlertTriangle,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"})]})})})]})]})}const SHELF_CONFIGS={"pizzeria-frigoA":{title:"Frigo A - Pizzeria",subtitle:"Prodotti freschi (2-4C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Verdure fresche","Insalate","Erbe aromatiche"],temperature:"2-4C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 2",products:["Salumi","Prosciutti","Mortadelle"],temperature:"2-4C",color:"bg-red-100",borderColor:"border-red-300"},{name:"Scaffale 3",products:["Formaggi freschi","Mozzarella","Ricotta"],temperature:"2-4C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale 4 (Inferiore)",products:["Latticini","Yogurt","Panna"],temperature:"2-4C",color:"bg-blue-100",borderColor:"border-blue-300"}],notes:["Mantenere sempre la temperatura tra 2-4C","Non mescolare prodotti cotti e crudi","Controllare le scadenze ogni giorno","Pulire gli scaffali settimanalmente"]},"pizzeria-frigoB":{title:"Frigo B - Pizzeria",subtitle:"Surgelati (-19 a -16C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Pizze surgelate","Impasti surgelati"],temperature:"-19 a -16C",color:"bg-purple-100",borderColor:"border-purple-300"},{name:"Scaffale 2",products:["Verdure surgelate","Frutta surgelata"],temperature:"-19 a -16C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 3 (Inferiore)",products:["Carne surgelata","Pesce surgelato"],temperature:"-19 a -16C",color:"bg-red-100",borderColor:"border-red-300"}],notes:["Mantenere sempre la temperatura tra -19 e -16C","Non scongelare e ricongelare prodotti","Controllare la formazione di brina","Organizzare per data di scadenza"]},"bar-frigoA":{title:"Frigo A - Bar",subtitle:"Latticini (2-4C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Latte","Panna da caff"],temperature:"2-4C",color:"bg-blue-100",borderColor:"border-blue-300"},{name:"Scaffale 2",products:["Yogurt","Formaggi freschi"],temperature:"2-4C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale 3 (Inferiore)",products:["Burro","Margarina"],temperature:"2-4C",color:"bg-orange-100",borderColor:"border-orange-300"}],notes:["Mantenere sempre la temperatura tra 2-4C","Controllare le scadenze ogni giorno","Non esporre alla luce diretta","Pulire gli scaffali settimanalmente"]},"bar-frigoB":{title:"Frigo B - Bar",subtitle:"Surgelati (-19 a -16C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Gelati","Dolci surgelati"],temperature:"-19 a -16C",color:"bg-pink-100",borderColor:"border-pink-300"},{name:"Scaffale 2",products:["Frutta surgelata","Verdure surgelate"],temperature:"-19 a -16C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 3 (Inferiore)",products:["Snack surgelati","Ingredienti surgelati"],temperature:"-19 a -16C",color:"bg-gray-100",borderColor:"border-gray-300"}],notes:["Mantenere sempre la temperatura tra -19 e -16C","Non scongelare e ricongelare prodotti","Controllare la formazione di brina","Organizzare per data di scadenza"]},abbattitore:{title:"Abbattitore di Temperatura",subtitle:"Raffreddamento rapido (-13.5C a -80C)",shelves:[{name:"Zona Superiore",products:["Piatti pronti caldi","Salse calde"],temperature:"-13.5C a -80C",color:"bg-red-100",borderColor:"border-red-300"},{name:"Zona Centrale",products:["Carne cotta","Pesce cotto"],temperature:"-13.5C a -80C",color:"bg-orange-100",borderColor:"border-orange-300"},{name:"Zona Inferiore",products:["Verdure cotte","Legumi cotti"],temperature:"-13.5C a -80C",color:"bg-green-100",borderColor:"border-green-300"}],notes:["Raffreddamento rapido per prevenire proliferazione batterica","Non superare mai i 4C entro 2 ore","Controllare la formazione di cristalli di ghiaccio","Pulire dopo ogni ciclo di raffreddamento"]},ambiente:{title:"Conservazione a Temperatura Ambiente",subtitle:"Prodotti secchi (15C a 25C)",shelves:[{name:"Scaffale Superiore",products:["Farine","Pasta","Riso"],temperature:"15C a 25C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale Centrale",products:["Conserve","Oli","Aceti"],temperature:"15C a 25C",color:"bg-blue-100",borderColor:"border-blue-300"},{name:"Scaffale Inferiore",products:["Spezie","Sale","Zucchero"],temperature:"15C a 25C",color:"bg-purple-100",borderColor:"border-purple-300"}],notes:["Mantenere ambiente asciutto e ben ventilato","Evitare esposizione diretta alla luce solare","Controllare la data di scadenza regolarmente","Organizzare per tipo di prodotto"]}};function HelpOverlay({isOpen:_e,onClose:e,fridgeType:St="pizzeria-frigoA",showTemperatureInfo:es=!0}){var ss;if(!_e)return null;const ts=SHELF_CONFIGS[St]||SHELF_CONFIGS["pizzeria-frigoA"];return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e}),jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:jsxRuntimeExports.jsx(Info,{className:"h-6 w-6 text-blue-600"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:ts.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:ts.subtitle})]})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X$2,{className:"h-6 w-6"})})]}),es&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 bg-blue-100 px-3 py-2 rounded-lg",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Temperatura critica:"}),jsxRuntimeExports.jsx("span",{children:(ss=ts.shelves[0])==null?void 0:ss.temperature})]})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Organizzazione Scaffali"}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ts.shelves.map((rs,ns)=>jsxRuntimeExports.jsx(Card,{className:`border-2 ${rs.borderColor}`,children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:`${rs.color} p-3 rounded-lg`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:rs.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600 bg-white px-2 py-1 rounded",children:rs.temperature})]}),jsxRuntimeExports.jsx("div",{className:"space-y-1",children:rs.products.map((is,os)=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:is})]},os))})]})})},ns))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Note Importanti"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[ts.notes.map((rs,ns)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-yellow-800",children:rs})]},ns)),jsxRuntimeExports.jsx(Card,{className:"bg-blue-50 border-blue-200",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-4 w-4"}),"Best Practices HACCP"]}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Controllare le temperature 2 volte al giorno"}),jsxRuntimeExports.jsx("li",{children:" Registrare sempre le letture temperature"}),jsxRuntimeExports.jsx("li",{children:" Segnalare immediatamente temperature fuori range"}),jsxRuntimeExports.jsx("li",{children:" Mantenere la catena del freddo"})]})]})})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-6 border-t bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"HACCP:"})," Questa organizzazione garantisce la sicurezza alimentare"]}),jsxRuntimeExports.jsx(Button,{onClick:e,children:"Ho Capito"})]})})]})})]})}const CONSERVATION_POINT_RULES={categories:[{id:"fresh_dairy",name:"Latticini e Formaggi",minTemp:2,maxTemp:4,description:"Latte, formaggi freschi, yogurt",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_meat",name:"Carni Fresche",minTemp:0,maxTemp:4,description:"Carni crude, pollame, salumi freschi",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_fish",name:"Pesce Fresco",minTemp:0,maxTemp:2,description:"Pesce fresco, molluschi, crostacei",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_produce",name:"Verdure e Ortaggi",minTemp:2,maxTemp:8,description:"Verdure fresche, insalate, ortaggi",incompatibleWith:["frozen","hot_holding"]},{id:"fresh_fruits",name:"Frutta Fresca",minTemp:2,maxTemp:8,description:"Frutta fresca di stagione",incompatibleWith:["frozen","hot_holding"]},{id:"frozen",name:"Surgelati",minTemp:-20,maxTemp:-16,description:"Tutti i prodotti surgelati",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","hot_holding","fresh_beverages"]},{id:"deep_frozen",name:"Ultra Surgelati",minTemp:-25,maxTemp:-18,description:"Prodotti ultra surgelati (es. gelati)",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","hot_holding","fresh_beverages"]},{id:"dry_goods",name:"Dispensa Secca",minTemp:15,maxTemp:25,description:"Pasta, riso, farina, conserve",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","frozen","deep_frozen"]},{id:"hot_holding",name:"Mantenimento Caldo",minTemp:60,maxTemp:70,description:"Piatti pronti caldi, mantenuti a temperatura",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","frozen","deep_frozen","fresh_beverages"]},{id:"chilled_ready",name:"Pronti Freddi",minTemp:2,maxTemp:8,description:"Piatti pronti freddi, insalate pronte",incompatibleWith:["frozen","deep_frozen","hot_holding"]},{id:"fresh_beverages",name:"Bevande Fresche",minTemp:2,maxTemp:10,description:"Bibite, succhi, acqua, bevande fresche",incompatibleWith:["frozen","deep_frozen","hot_holding"]}],tolerance:.5,validateConservationPoint:_e=>{var St;const e=[];if((St=_e.name)!=null&&St.trim()||e.push("Nome punto di conservazione obbligatorio"),_e.location||e.push("Posizione obbligatoria"),(!_e.minTemp||!_e.maxTemp)&&e.push("Range temperature obbligatorio"),_e.assignedRole||e.push("Ruolo assegnato obbligatorio"),_e.minTemp&&_e.maxTemp){const es=parseFloat(_e.minTemp),ts=parseFloat(_e.maxTemp);isNaN(es)||isNaN(ts)?e.push("Temperature non valide"):es>=ts&&e.push("Temperatura minima deve essere inferiore alla massima")}return{isValid:e.length===0,errors:e}},validateTemperatureCompatibility:(_e,e,St)=>{if(!St||St.length===0)return{compatible:!0,message:"Nessuna categoria selezionata"};const es=parseFloat(_e),ts=parseFloat(e);if(isNaN(es)||isNaN(ts))return{compatible:!1,message:"Temperature non valide"};const ss=CONSERVATION_POINT_RULES.tolerance;for(const rs of St){const ns=CONSERVATION_POINT_RULES.categories.find(us=>us.id===rs);if(!ns)continue;const is=ns.minTemp-ss,os=ns.maxTemp+ss;if(es<is||ts>os)return{compatible:!1,message:`Temperature non compatibili con ${ns.name}. Range consentito: ${ns.minTemp}C - ${ns.maxTemp}C (${ss}C)`,category:ns.name,requiredRange:{min:ns.minTemp,max:ns.maxTemp}}}return{compatible:!0,message:"Temperature compatibili con tutte le categorie selezionate"}},getOptimalTemperatureSuggestions:_e=>{if(!_e||_e.length===0)return null;const e=CONSERVATION_POINT_RULES.categories.filter(rs=>_e.includes(rs.id));if(e.length===0)return null;if(e.length===1){const rs=e[0];return{minTemp:rs.minTemp,maxTemp:rs.maxTemp,message:`Range ottimale per ${rs.name}: ${rs.minTemp}C - ${rs.maxTemp}C`}}const St=e.map(rs=>rs.minTemp),es=e.map(rs=>rs.maxTemp),ts=Math.max(...St),ss=Math.min(...es);return ts<=ss?{minTemp:ts,maxTemp:ss,message:`Range ottimale per tutte le categorie: ${ts}C - ${ss}C`}:{compatible:!1,message:"Le categorie selezionate richiedono range di temperatura incompatibili",categories:e.map(rs=>rs.name)}}},MAINTENANCE_TASK_TYPES={TEMPERATURE_MONITORING:"temperature_monitoring",SANITIZATION:"sanitization",DEFROSTING:"defrosting"},MAINTENANCE_TASK_NAMES={[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:"Rilevamento Temperatura",[MAINTENANCE_TASK_TYPES.SANITIZATION]:"Sanificazione",[MAINTENANCE_TASK_TYPES.DEFROSTING]:"Sbrinamento"},MAINTENANCE_FREQUENCIES={[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:[{value:"daily",label:"Giornalmente"},{value:"weekly",label:"Settimanale"},{value:"monthly",label:"Mensile"}],[MAINTENANCE_TASK_TYPES.SANITIZATION]:[{value:"daily",label:"Giornalmente"},{value:"weekly",label:"Settimanale"}],[MAINTENANCE_TASK_TYPES.DEFROSTING]:[{value:"semiannual",label:"Semestrale (ogni 6 mesi)"},{value:"annual",label:"Annuale"}]},WEEKDAYS=[{value:"monday",label:"Luned"},{value:"tuesday",label:"Marted"},{value:"wednesday",label:"Mercoled"},{value:"thursday",label:"Gioved"},{value:"friday",label:"Venerd"},{value:"saturday",label:"Sabato"},{value:"sunday",label:"Domenica"}],MAINTENANCE_ROLES=[{value:"amministratore",label:"Amministratore"},{value:"responsabile",label:"Responsabile"},{value:"dipendente",label:"Dipendente"},{value:"collaboratore",label:"Collaboratore Occasionale"}],MAINTENANCE_CATEGORIES=[{value:"amministratore",label:"Amministratore"},{value:"cuochi",label:"Cuochi"},{value:"banconisti",label:"Banconisti"},{value:"camerieri",label:"Camerieri"},{value:"social_media_manager",label:"Social & Media Manager"},{value:"altro",label:"Altro"}],MAINTENANCE_VALIDATIONS={[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:{requiredFields:["frequency"],optionalFields:["assigned_role","assigned_category","assigned_staff_ids","selected_days"],frequencyOptions:[...MAINTENANCE_FREQUENCIES[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING].map(_e=>_e.value),"custom_days"]},[MAINTENANCE_TASK_TYPES.SANITIZATION]:{requiredFields:["frequency"],optionalFields:["assigned_role","assigned_category","assigned_staff_ids","selected_days"],frequencyOptions:[...MAINTENANCE_FREQUENCIES[MAINTENANCE_TASK_TYPES.SANITIZATION].map(_e=>_e.value),"custom_days"]},[MAINTENANCE_TASK_TYPES.DEFROSTING]:{requiredFields:["frequency"],optionalFields:["assigned_role","assigned_category","assigned_staff_ids","selected_days"],frequencyOptions:MAINTENANCE_FREQUENCIES[MAINTENANCE_TASK_TYPES.DEFROSTING].map(_e=>_e.value)}},validateMaintenanceConfig=(_e,e)=>{const St=MAINTENANCE_VALIDATIONS[_e],es=[];St.requiredFields.forEach(rs=>{(!e[rs]||Array.isArray(e[rs])&&e[rs].length===0)&&es.push(`${rs}  obbligatorio per ${MAINTENANCE_TASK_NAMES[_e]}`)}),e.frequency&&!St.frequencyOptions.includes(e.frequency)&&es.push(`Frequenza non valida per ${MAINTENANCE_TASK_NAMES[_e]}`),e.frequency==="custom_days"&&(!e.selected_days||e.selected_days.length===0)&&es.push(`Devi selezionare almeno un giorno per ${MAINTENANCE_TASK_NAMES[_e]}`);const ts=!!e.assigned_role,ss=e.assigned_staff_ids&&e.assigned_staff_ids.length>0;return!ts&&!ss&&es.push(`Devi selezionare almeno Ruolo o Dipendenti Specifici per ${MAINTENANCE_TASK_NAMES[_e]}`),{isValid:es.length===0,errors:es}},getFrequenciesForTaskType=_e=>MAINTENANCE_FREQUENCIES[_e]||[],getTaskTypeDisplayName=_e=>MAINTENANCE_TASK_NAMES[_e]||_e,MaintenanceSection=({conservationPointId:_e,staffMembers:e=[],onMaintenanceChange:St,initialData:es={},errors:ts={},isRequired:ss=!0})=>{const[rs,ns]=reactExports.useState({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:{frequency:"",assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.SANITIZATION]:{frequency:"",assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.DEFROSTING]:{frequency:"",assigned_role:"",assigned_category:"",assigned_staff_ids:[]}}),[is,os]=reactExports.useState({});reactExports.useEffect(()=>{es&&Object.keys(es).length>0&&ns(es)},[es]),reactExports.useEffect(()=>{St&&St(rs)},[rs]);const us=(gs,vs,ds)=>{ns(fs=>({...fs,[gs]:{...fs[gs],[vs]:ds}}))},ps=(gs,vs)=>{ns(ds=>{const fs=ds[gs].assigned_staff_ids||[],Es=fs.includes(vs)?fs.filter(Os=>Os!==vs):[...fs,vs];return{...ds,[gs]:{...ds[gs],assigned_staff_ids:Es}}})},xs=gs=>{const vs=rs[gs],ds=vs.assigned_role,fs=vs.assigned_category;return!ds||!fs?[]:e.filter(Es=>Es.role===ds&&Es.categories&&Es.categories.includes(fs))},cs=gs=>{switch(gs){case MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING:return jsxRuntimeExports.jsx(Thermometer,{className:"w-5 h-5 text-blue-500"});case MAINTENANCE_TASK_TYPES.SANITIZATION:return jsxRuntimeExports.jsx(Droplets,{className:"w-5 h-5 text-green-500"});case MAINTENANCE_TASK_TYPES.DEFROSTING:return jsxRuntimeExports.jsx(Snowflake,{className:"w-5 h-5 text-cyan-500"});default:return jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-gray-500"})}},ys=gs=>{const vs=rs[gs],ds=is[gs]||[],fs=xs(gs),Es=getFrequenciesForTaskType(gs);return jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[cs(gs),jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:getTaskTypeDisplayName(gs)}),ds.length===0&&vs.frequency&&vs.assigned_role&&vs.assigned_category&&jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-green-500"})]}),ds.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-700 font-medium",children:"Configurazione incompleta"})]}),jsxRuntimeExports.jsx("ul",{className:"mt-2 text-sm text-red-600",children:ds.map((Os,Hs)=>jsxRuntimeExports.jsxs("li",{children:[" ",Os]},Hs))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${gs}-frequency`,className:"text-sm font-medium text-gray-700",children:"Frequenza *"}),jsxRuntimeExports.jsxs("select",{id:`${gs}-frequency`,value:vs.frequency,onChange:Os=>us(gs,"frequency",Os.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona frequenza"}),Es.map(Os=>jsxRuntimeExports.jsx("option",{value:Os.value,children:Os.label},Os.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${gs}-role`,className:"text-sm font-medium text-gray-700",children:"Ruolo *"}),jsxRuntimeExports.jsxs("select",{id:`${gs}-role`,value:vs.assigned_role,onChange:Os=>us(gs,"assigned_role",Os.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona ruolo"}),MAINTENANCE_ROLES.map(Os=>jsxRuntimeExports.jsx("option",{value:Os.value,children:Os.label},Os.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${gs}-category`,className:"text-sm font-medium text-gray-700",children:"Categoria *"}),jsxRuntimeExports.jsxs("select",{id:`${gs}-category`,value:vs.assigned_category,onChange:Os=>us(gs,"assigned_category",Os.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona categoria"}),MAINTENANCE_CATEGORIES.map(Os=>jsxRuntimeExports.jsx("option",{value:Os.value,children:Os.label},Os.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium text-gray-700",children:"Dipendenti Specifici (Opzionale)"}),fs.length>0?jsxRuntimeExports.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2 bg-white",children:fs.map(Os=>{var Hs;return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 p-1 hover:bg-gray-50 rounded",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((Hs=vs.assigned_staff_ids)==null?void 0:Hs.includes(Os.id))||!1,onChange:()=>ps(gs,Os.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-700",children:[Os.name," ",Os.surname]})]},Os.id)})}):jsxRuntimeExports.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:vs.assigned_role&&vs.assigned_category?"Nessun dipendente trovato per la combinazione ruolo/categoria selezionata":"Seleziona prima ruolo e categoria per vedere i dipendenti disponibili"})})]})]})]},gs)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Manutenzione"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700",children:"Configura le tre attivit di manutenzione obbligatorie per questo punto di conservazione. Ogni attivit deve avere frequenza, ruolo e categoria assegnati."})]}),ys(MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING),ys(MAINTENANCE_TASK_TYPES.SANITIZATION),ys(MAINTENANCE_TASK_TYPES.DEFROSTING),ss&&jsxRuntimeExports.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-yellow-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-yellow-800",children:"Validazione Critica: Attivit di Manutenzione"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-700",children:"Tutte e tre le attivit di manutenzione (Rilevamento Temperatura, Sanificazione, Sbrinamento) devono essere configurate per completare la creazione del punto di conservazione."})]})]})},scriptRel="modulepreload",assetsURL=function(_e,e){return new URL(_e,e).href},seen={},__vitePreload=function(e,St,es){if(!St||St.length===0)return e();const ts=document.getElementsByTagName("link");return Promise.all(St.map(ss=>{if(ss=assetsURL(ss,es),ss in seen)return;seen[ss]=!0;const rs=ss.endsWith(".css"),ns=rs?'[rel="stylesheet"]':"";if(!!es)for(let us=ts.length-1;us>=0;us--){const ps=ts[us];if(ps.href===ss&&(!rs||ps.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ss}"]${ns}`))return;const os=document.createElement("link");if(os.rel=rs?"stylesheet":scriptRel,rs||(os.as="script",os.crossOrigin=""),os.href=ss,document.head.appendChild(os),rs)return new Promise((us,ps)=>{os.addEventListener("load",us),os.addEventListener("error",()=>ps(new Error(`Unable to preload CSS for ${ss}`)))})})).then(()=>e()).catch(ss=>{const rs=new Event("vite:preloadError",{cancelable:!0});if(rs.payload=ss,window.dispatchEvent(rs),!rs.defaultPrevented)throw ss})},resolveFetch$3=_e=>{let e;return _e?e=_e:typeof fetch>"u"?e=(...St)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0,import.meta.url).then(({default:es})=>es(...St)):e=fetch,(...St)=>e(...St)};class FunctionsError extends Error{constructor(e,St="FunctionsError",es){super(e),this.name=St,this.context=es}}class FunctionsFetchError extends FunctionsError{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class FunctionsRelayError extends FunctionsError{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class FunctionsHttpError extends FunctionsError{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var FunctionRegion;(function(_e){_e.Any="any",_e.ApNortheast1="ap-northeast-1",_e.ApNortheast2="ap-northeast-2",_e.ApSouth1="ap-south-1",_e.ApSoutheast1="ap-southeast-1",_e.ApSoutheast2="ap-southeast-2",_e.CaCentral1="ca-central-1",_e.EuCentral1="eu-central-1",_e.EuWest1="eu-west-1",_e.EuWest2="eu-west-2",_e.EuWest3="eu-west-3",_e.SaEast1="sa-east-1",_e.UsEast1="us-east-1",_e.UsWest1="us-west-1",_e.UsWest2="us-west-2"})(FunctionRegion||(FunctionRegion={}));var __awaiter$7=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};class FunctionsClient{constructor(e,{headers:St={},customFetch:es,region:ts=FunctionRegion.Any}={}){this.url=e,this.headers=St,this.region=ts,this.fetch=resolveFetch$3(es)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,St={}){var es;return __awaiter$7(this,void 0,void 0,function*(){try{const{headers:ts,method:ss,body:rs}=St;let ns={},{region:is}=St;is||(is=this.region);const os=new URL(`${this.url}/${e}`);is&&is!=="any"&&(ns["x-region"]=is,os.searchParams.set("forceFunctionRegion",is));let us;rs&&(ts&&!Object.prototype.hasOwnProperty.call(ts,"Content-Type")||!ts)&&(typeof Blob<"u"&&rs instanceof Blob||rs instanceof ArrayBuffer?(ns["Content-Type"]="application/octet-stream",us=rs):typeof rs=="string"?(ns["Content-Type"]="text/plain",us=rs):typeof FormData<"u"&&rs instanceof FormData?us=rs:(ns["Content-Type"]="application/json",us=JSON.stringify(rs)));const ps=yield this.fetch(os.toString(),{method:ss||"POST",headers:Object.assign(Object.assign(Object.assign({},ns),this.headers),ts),body:us}).catch(gs=>{throw new FunctionsFetchError(gs)}),xs=ps.headers.get("x-relay-error");if(xs&&xs==="true")throw new FunctionsRelayError(ps);if(!ps.ok)throw new FunctionsHttpError(ps);let cs=((es=ps.headers.get("Content-Type"))!==null&&es!==void 0?es:"text/plain").split(";")[0].trim(),ys;return cs==="application/json"?ys=yield ps.json():cs==="application/octet-stream"?ys=yield ps.blob():cs==="text/event-stream"?ys=ps:cs==="multipart/form-data"?ys=yield ps.formData():ys=yield ps.text(),{data:ys,error:null,response:ps}}catch(ts){return{data:null,error:ts,response:ts instanceof FunctionsHttpError||ts instanceof FunctionsRelayError?ts.context:void 0}}})}}var cjs={},PostgrestClient$2={},PostgrestQueryBuilder$2={},PostgrestFilterBuilder$2={},PostgrestTransformBuilder$2={},PostgrestBuilder$2={},getGlobal=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},globalObject=getGlobal();const fetch$1=globalObject.fetch,nodeFetch=globalObject.fetch.bind(globalObject),Headers$1=globalObject.Headers,Request=globalObject.Request,Response$1=globalObject.Response,browser=Object.freeze(Object.defineProperty({__proto__:null,Headers:Headers$1,Request,Response:Response$1,default:nodeFetch,fetch:fetch$1},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(browser);var PostgrestError$2={};Object.defineProperty(PostgrestError$2,"__esModule",{value:!0});let PostgrestError$1=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};PostgrestError$2.default=PostgrestError$1;var __importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(PostgrestBuilder$2,"__esModule",{value:!0});const node_fetch_1=__importDefault$5(require$$0),PostgrestError_1$1=__importDefault$5(PostgrestError$2);let PostgrestBuilder$1=class{constructor(e){var St,es;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(St=e.shouldThrowOnError)!==null&&St!==void 0?St:!1,this.signal=e.signal,this.isMaybeSingle=(es=e.isMaybeSingle)!==null&&es!==void 0?es:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=node_fetch_1.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,St){return this.headers=new Headers(this.headers),this.headers.set(e,St),this}then(e,St){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const es=this.fetch;let ts=es(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async ss=>{var rs,ns,is,os;let us=null,ps=null,xs=null,cs=ss.status,ys=ss.statusText;if(ss.ok){if(this.method!=="HEAD"){const fs=await ss.text();fs===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((rs=this.headers.get("Accept"))===null||rs===void 0)&&rs.includes("application/vnd.pgrst.plan+text"))?ps=fs:ps=JSON.parse(fs))}const vs=(ns=this.headers.get("Prefer"))===null||ns===void 0?void 0:ns.match(/count=(exact|planned|estimated)/),ds=(is=ss.headers.get("content-range"))===null||is===void 0?void 0:is.split("/");vs&&ds&&ds.length>1&&(xs=parseInt(ds[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(ps)&&(ps.length>1?(us={code:"PGRST116",details:`Results contain ${ps.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},ps=null,xs=null,cs=406,ys="Not Acceptable"):ps.length===1?ps=ps[0]:ps=null)}else{const vs=await ss.text();try{us=JSON.parse(vs),Array.isArray(us)&&ss.status===404&&(ps=[],us=null,cs=200,ys="OK")}catch{ss.status===404&&vs===""?(cs=204,ys="No Content"):us={message:vs}}if(us&&this.isMaybeSingle&&(!((os=us==null?void 0:us.details)===null||os===void 0)&&os.includes("0 rows"))&&(us=null,cs=200,ys="OK"),us&&this.shouldThrowOnError)throw new PostgrestError_1$1.default(us)}return{error:us,data:ps,count:xs,status:cs,statusText:ys}});return this.shouldThrowOnError||(ts=ts.catch(ss=>{var rs,ns,is;return{error:{message:`${(rs=ss==null?void 0:ss.name)!==null&&rs!==void 0?rs:"FetchError"}: ${ss==null?void 0:ss.message}`,details:`${(ns=ss==null?void 0:ss.stack)!==null&&ns!==void 0?ns:""}`,hint:"",code:`${(is=ss==null?void 0:ss.code)!==null&&is!==void 0?is:""}`},data:null,count:null,status:0,statusText:""}})),ts.then(e,St)}returns(){return this}overrideTypes(){return this}};PostgrestBuilder$2.default=PostgrestBuilder$1;var __importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(PostgrestTransformBuilder$2,"__esModule",{value:!0});const PostgrestBuilder_1$1=__importDefault$4(PostgrestBuilder$2);let PostgrestTransformBuilder$1=class extends PostgrestBuilder_1$1.default{select(e){let St=!1;const es=(e??"*").split("").map(ts=>/\s/.test(ts)&&!St?"":(ts==='"'&&(St=!St),ts)).join("");return this.url.searchParams.set("select",es),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:St=!0,nullsFirst:es,foreignTable:ts,referencedTable:ss=ts}={}){const rs=ss?`${ss}.order`:"order",ns=this.url.searchParams.get(rs);return this.url.searchParams.set(rs,`${ns?`${ns},`:""}${e}.${St?"asc":"desc"}${es===void 0?"":es?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:St,referencedTable:es=St}={}){const ts=typeof es>"u"?"limit":`${es}.limit`;return this.url.searchParams.set(ts,`${e}`),this}range(e,St,{foreignTable:es,referencedTable:ts=es}={}){const ss=typeof ts>"u"?"offset":`${ts}.offset`,rs=typeof ts>"u"?"limit":`${ts}.limit`;return this.url.searchParams.set(ss,`${e}`),this.url.searchParams.set(rs,`${St-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:St=!1,settings:es=!1,buffers:ts=!1,wal:ss=!1,format:rs="text"}={}){var ns;const is=[e?"analyze":null,St?"verbose":null,es?"settings":null,ts?"buffers":null,ss?"wal":null].filter(Boolean).join("|"),os=(ns=this.headers.get("Accept"))!==null&&ns!==void 0?ns:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${rs}; for="${os}"; options=${is};`),rs==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};PostgrestTransformBuilder$2.default=PostgrestTransformBuilder$1;var __importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(PostgrestFilterBuilder$2,"__esModule",{value:!0});const PostgrestTransformBuilder_1$1=__importDefault$3(PostgrestTransformBuilder$2);let PostgrestFilterBuilder$1=class extends PostgrestTransformBuilder_1$1.default{eq(e,St){return this.url.searchParams.append(e,`eq.${St}`),this}neq(e,St){return this.url.searchParams.append(e,`neq.${St}`),this}gt(e,St){return this.url.searchParams.append(e,`gt.${St}`),this}gte(e,St){return this.url.searchParams.append(e,`gte.${St}`),this}lt(e,St){return this.url.searchParams.append(e,`lt.${St}`),this}lte(e,St){return this.url.searchParams.append(e,`lte.${St}`),this}like(e,St){return this.url.searchParams.append(e,`like.${St}`),this}likeAllOf(e,St){return this.url.searchParams.append(e,`like(all).{${St.join(",")}}`),this}likeAnyOf(e,St){return this.url.searchParams.append(e,`like(any).{${St.join(",")}}`),this}ilike(e,St){return this.url.searchParams.append(e,`ilike.${St}`),this}ilikeAllOf(e,St){return this.url.searchParams.append(e,`ilike(all).{${St.join(",")}}`),this}ilikeAnyOf(e,St){return this.url.searchParams.append(e,`ilike(any).{${St.join(",")}}`),this}is(e,St){return this.url.searchParams.append(e,`is.${St}`),this}in(e,St){const es=Array.from(new Set(St)).map(ts=>typeof ts=="string"&&new RegExp("[,()]").test(ts)?`"${ts}"`:`${ts}`).join(",");return this.url.searchParams.append(e,`in.(${es})`),this}contains(e,St){return typeof St=="string"?this.url.searchParams.append(e,`cs.${St}`):Array.isArray(St)?this.url.searchParams.append(e,`cs.{${St.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(St)}`),this}containedBy(e,St){return typeof St=="string"?this.url.searchParams.append(e,`cd.${St}`):Array.isArray(St)?this.url.searchParams.append(e,`cd.{${St.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(St)}`),this}rangeGt(e,St){return this.url.searchParams.append(e,`sr.${St}`),this}rangeGte(e,St){return this.url.searchParams.append(e,`nxl.${St}`),this}rangeLt(e,St){return this.url.searchParams.append(e,`sl.${St}`),this}rangeLte(e,St){return this.url.searchParams.append(e,`nxr.${St}`),this}rangeAdjacent(e,St){return this.url.searchParams.append(e,`adj.${St}`),this}overlaps(e,St){return typeof St=="string"?this.url.searchParams.append(e,`ov.${St}`):this.url.searchParams.append(e,`ov.{${St.join(",")}}`),this}textSearch(e,St,{config:es,type:ts}={}){let ss="";ts==="plain"?ss="pl":ts==="phrase"?ss="ph":ts==="websearch"&&(ss="w");const rs=es===void 0?"":`(${es})`;return this.url.searchParams.append(e,`${ss}fts${rs}.${St}`),this}match(e){return Object.entries(e).forEach(([St,es])=>{this.url.searchParams.append(St,`eq.${es}`)}),this}not(e,St,es){return this.url.searchParams.append(e,`not.${St}.${es}`),this}or(e,{foreignTable:St,referencedTable:es=St}={}){const ts=es?`${es}.or`:"or";return this.url.searchParams.append(ts,`(${e})`),this}filter(e,St,es){return this.url.searchParams.append(e,`${St}.${es}`),this}};PostgrestFilterBuilder$2.default=PostgrestFilterBuilder$1;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(PostgrestQueryBuilder$2,"__esModule",{value:!0});const PostgrestFilterBuilder_1$2=__importDefault$2(PostgrestFilterBuilder$2);let PostgrestQueryBuilder$1=class{constructor(e,{headers:St={},schema:es,fetch:ts}){this.url=e,this.headers=new Headers(St),this.schema=es,this.fetch=ts}select(e,{head:St=!1,count:es}={}){const ts=St?"HEAD":"GET";let ss=!1;const rs=(e??"*").split("").map(ns=>/\s/.test(ns)&&!ss?"":(ns==='"'&&(ss=!ss),ns)).join("");return this.url.searchParams.set("select",rs),es&&this.headers.append("Prefer",`count=${es}`),new PostgrestFilterBuilder_1$2.default({method:ts,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:St,defaultToNull:es=!0}={}){var ts;const ss="POST";if(St&&this.headers.append("Prefer",`count=${St}`),es||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const rs=e.reduce((ns,is)=>ns.concat(Object.keys(is)),[]);if(rs.length>0){const ns=[...new Set(rs)].map(is=>`"${is}"`);this.url.searchParams.set("columns",ns.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:ss,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(ts=this.fetch)!==null&&ts!==void 0?ts:fetch})}upsert(e,{onConflict:St,ignoreDuplicates:es=!1,count:ts,defaultToNull:ss=!0}={}){var rs;const ns="POST";if(this.headers.append("Prefer",`resolution=${es?"ignore":"merge"}-duplicates`),St!==void 0&&this.url.searchParams.set("on_conflict",St),ts&&this.headers.append("Prefer",`count=${ts}`),ss||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const is=e.reduce((os,us)=>os.concat(Object.keys(us)),[]);if(is.length>0){const os=[...new Set(is)].map(us=>`"${us}"`);this.url.searchParams.set("columns",os.join(","))}}return new PostgrestFilterBuilder_1$2.default({method:ns,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(rs=this.fetch)!==null&&rs!==void 0?rs:fetch})}update(e,{count:St}={}){var es;const ts="PATCH";return St&&this.headers.append("Prefer",`count=${St}`),new PostgrestFilterBuilder_1$2.default({method:ts,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(es=this.fetch)!==null&&es!==void 0?es:fetch})}delete({count:e}={}){var St;const es="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new PostgrestFilterBuilder_1$2.default({method:es,url:this.url,headers:this.headers,schema:this.schema,fetch:(St=this.fetch)!==null&&St!==void 0?St:fetch})}};PostgrestQueryBuilder$2.default=PostgrestQueryBuilder$1;var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(PostgrestClient$2,"__esModule",{value:!0});const PostgrestQueryBuilder_1$1=__importDefault$1(PostgrestQueryBuilder$2),PostgrestFilterBuilder_1$1=__importDefault$1(PostgrestFilterBuilder$2);let PostgrestClient$1=class Op{constructor(e,{headers:St={},schema:es,fetch:ts}={}){this.url=e,this.headers=new Headers(St),this.schemaName=es,this.fetch=ts}from(e){const St=new URL(`${this.url}/${e}`);return new PostgrestQueryBuilder_1$1.default(St,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Op(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,St={},{head:es=!1,get:ts=!1,count:ss}={}){var rs;let ns;const is=new URL(`${this.url}/rpc/${e}`);let os;es||ts?(ns=es?"HEAD":"GET",Object.entries(St).filter(([ps,xs])=>xs!==void 0).map(([ps,xs])=>[ps,Array.isArray(xs)?`{${xs.join(",")}}`:`${xs}`]).forEach(([ps,xs])=>{is.searchParams.append(ps,xs)})):(ns="POST",os=St);const us=new Headers(this.headers);return ss&&us.set("Prefer",`count=${ss}`),new PostgrestFilterBuilder_1$1.default({method:ns,url:is,headers:us,schema:this.schemaName,body:os,fetch:(rs=this.fetch)!==null&&rs!==void 0?rs:fetch})}};PostgrestClient$2.default=PostgrestClient$1;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(_e){return _e&&_e.__esModule?_e:{default:_e}};Object.defineProperty(cjs,"__esModule",{value:!0});cjs.PostgrestError=cjs.PostgrestBuilder=cjs.PostgrestTransformBuilder=cjs.PostgrestFilterBuilder=cjs.PostgrestQueryBuilder=cjs.PostgrestClient=void 0;const PostgrestClient_1=__importDefault(PostgrestClient$2);cjs.PostgrestClient=PostgrestClient_1.default;const PostgrestQueryBuilder_1=__importDefault(PostgrestQueryBuilder$2);cjs.PostgrestQueryBuilder=PostgrestQueryBuilder_1.default;const PostgrestFilterBuilder_1=__importDefault(PostgrestFilterBuilder$2);cjs.PostgrestFilterBuilder=PostgrestFilterBuilder_1.default;const PostgrestTransformBuilder_1=__importDefault(PostgrestTransformBuilder$2);cjs.PostgrestTransformBuilder=PostgrestTransformBuilder_1.default;const PostgrestBuilder_1=__importDefault(PostgrestBuilder$2);cjs.PostgrestBuilder=PostgrestBuilder_1.default;const PostgrestError_1=__importDefault(PostgrestError$2);cjs.PostgrestError=PostgrestError_1.default;var _default=cjs.default={PostgrestClient:PostgrestClient_1.default,PostgrestQueryBuilder:PostgrestQueryBuilder_1.default,PostgrestFilterBuilder:PostgrestFilterBuilder_1.default,PostgrestTransformBuilder:PostgrestTransformBuilder_1.default,PostgrestBuilder:PostgrestBuilder_1.default,PostgrestError:PostgrestError_1.default};const{PostgrestClient,PostgrestQueryBuilder,PostgrestFilterBuilder,PostgrestTransformBuilder,PostgrestBuilder,PostgrestError}=_default;class WebSocketFactory{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const St=parseInt(process.versions.node.split(".")[0]);return St>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${St} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${St} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let St=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(St+=`

Suggested solution: ${e.workaround}`),new Error(St)}static createWebSocket(e,St){const es=this.getWebSocketConstructor();return new es(e,St)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const version$3="2.15.4",DEFAULT_VERSION=`realtime-js/${version$3}`,VSN="1.0.0",DEFAULT_TIMEOUT=1e4,WS_CLOSE_NORMAL=1e3,MAX_PUSH_BUFFER_SIZE=100;var SOCKET_STATES;(function(_e){_e[_e.connecting=0]="connecting",_e[_e.open=1]="open",_e[_e.closing=2]="closing",_e[_e.closed=3]="closed"})(SOCKET_STATES||(SOCKET_STATES={}));var CHANNEL_STATES;(function(_e){_e.closed="closed",_e.errored="errored",_e.joined="joined",_e.joining="joining",_e.leaving="leaving"})(CHANNEL_STATES||(CHANNEL_STATES={}));var CHANNEL_EVENTS;(function(_e){_e.close="phx_close",_e.error="phx_error",_e.join="phx_join",_e.reply="phx_reply",_e.leave="phx_leave",_e.access_token="access_token"})(CHANNEL_EVENTS||(CHANNEL_EVENTS={}));var TRANSPORTS;(function(_e){_e.websocket="websocket"})(TRANSPORTS||(TRANSPORTS={}));var CONNECTION_STATE;(function(_e){_e.Connecting="connecting",_e.Open="open",_e.Closing="closing",_e.Closed="closed"})(CONNECTION_STATE||(CONNECTION_STATE={}));class Serializer{constructor(){this.HEADER_LENGTH=1}decode(e,St){return e.constructor===ArrayBuffer?St(this._binaryDecode(e)):St(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const St=new DataView(e),es=new TextDecoder;return this._decodeBroadcast(e,St,es)}_decodeBroadcast(e,St,es){const ts=St.getUint8(1),ss=St.getUint8(2);let rs=this.HEADER_LENGTH+2;const ns=es.decode(e.slice(rs,rs+ts));rs=rs+ts;const is=es.decode(e.slice(rs,rs+ss));rs=rs+ss;const os=JSON.parse(es.decode(e.slice(rs,e.byteLength)));return{ref:null,topic:ns,event:is,payload:os}}}class Timer{constructor(e,St){this.callback=e,this.timerCalc=St,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=St}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var PostgresTypes;(function(_e){_e.abstime="abstime",_e.bool="bool",_e.date="date",_e.daterange="daterange",_e.float4="float4",_e.float8="float8",_e.int2="int2",_e.int4="int4",_e.int4range="int4range",_e.int8="int8",_e.int8range="int8range",_e.json="json",_e.jsonb="jsonb",_e.money="money",_e.numeric="numeric",_e.oid="oid",_e.reltime="reltime",_e.text="text",_e.time="time",_e.timestamp="timestamp",_e.timestamptz="timestamptz",_e.timetz="timetz",_e.tsrange="tsrange",_e.tstzrange="tstzrange"})(PostgresTypes||(PostgresTypes={}));const convertChangeData=(_e,e,St={})=>{var es;const ts=(es=St.skipTypes)!==null&&es!==void 0?es:[];return Object.keys(e).reduce((ss,rs)=>(ss[rs]=convertColumn(rs,_e,e,ts),ss),{})},convertColumn=(_e,e,St,es)=>{const ts=e.find(ns=>ns.name===_e),ss=ts==null?void 0:ts.type,rs=St[_e];return ss&&!es.includes(ss)?convertCell(ss,rs):noop$1(rs)},convertCell=(_e,e)=>{if(_e.charAt(0)==="_"){const St=_e.slice(1,_e.length);return toArray(e,St)}switch(_e){case PostgresTypes.bool:return toBoolean(e);case PostgresTypes.float4:case PostgresTypes.float8:case PostgresTypes.int2:case PostgresTypes.int4:case PostgresTypes.int8:case PostgresTypes.numeric:case PostgresTypes.oid:return toNumber(e);case PostgresTypes.json:case PostgresTypes.jsonb:return toJson(e);case PostgresTypes.timestamp:return toTimestampString(e);case PostgresTypes.abstime:case PostgresTypes.date:case PostgresTypes.daterange:case PostgresTypes.int4range:case PostgresTypes.int8range:case PostgresTypes.money:case PostgresTypes.reltime:case PostgresTypes.text:case PostgresTypes.time:case PostgresTypes.timestamptz:case PostgresTypes.timetz:case PostgresTypes.tsrange:case PostgresTypes.tstzrange:return noop$1(e);default:return noop$1(e)}},noop$1=_e=>_e,toBoolean=_e=>{switch(_e){case"t":return!0;case"f":return!1;default:return _e}},toNumber=_e=>{if(typeof _e=="string"){const e=parseFloat(_e);if(!Number.isNaN(e))return e}return _e},toJson=_e=>{if(typeof _e=="string")try{return JSON.parse(_e)}catch(e){return console.log(`JSON parse error: ${e}`),_e}return _e},toArray=(_e,e)=>{if(typeof _e!="string")return _e;const St=_e.length-1,es=_e[St];if(_e[0]==="{"&&es==="}"){let ss;const rs=_e.slice(1,St);try{ss=JSON.parse("["+rs+"]")}catch{ss=rs?rs.split(","):[]}return ss.map(ns=>convertCell(e,ns))}return _e},toTimestampString=_e=>typeof _e=="string"?_e.replace(" ","T"):_e,httpEndpointURL=_e=>{let e=_e;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Push{constructor(e,St,es={},ts=DEFAULT_TIMEOUT){this.channel=e,this.event=St,this.payload=es,this.timeout=ts,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,St){var es;return this._hasReceived(e)&&St((es=this.receivedResp)===null||es===void 0?void 0:es.response),this.recHooks.push({status:e,callback:St}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=St=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=St,this._matchReceive(St)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,St){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:St})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:St}){this.recHooks.filter(es=>es.status===e).forEach(es=>es.callback(St))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var REALTIME_PRESENCE_LISTEN_EVENTS;(function(_e){_e.SYNC="sync",_e.JOIN="join",_e.LEAVE="leave"})(REALTIME_PRESENCE_LISTEN_EVENTS||(REALTIME_PRESENCE_LISTEN_EVENTS={}));class RealtimePresence{constructor(e,St){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const es=(St==null?void 0:St.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(es.state,{},ts=>{const{onJoin:ss,onLeave:rs,onSync:ns}=this.caller;this.joinRef=this.channel._joinRef(),this.state=RealtimePresence.syncState(this.state,ts,ss,rs),this.pendingDiffs.forEach(is=>{this.state=RealtimePresence.syncDiff(this.state,is,ss,rs)}),this.pendingDiffs=[],ns()}),this.channel._on(es.diff,{},ts=>{const{onJoin:ss,onLeave:rs,onSync:ns}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(ts):(this.state=RealtimePresence.syncDiff(this.state,ts,ss,rs),ns())}),this.onJoin((ts,ss,rs)=>{this.channel._trigger("presence",{event:"join",key:ts,currentPresences:ss,newPresences:rs})}),this.onLeave((ts,ss,rs)=>{this.channel._trigger("presence",{event:"leave",key:ts,currentPresences:ss,leftPresences:rs})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,St,es,ts){const ss=this.cloneDeep(e),rs=this.transformState(St),ns={},is={};return this.map(ss,(os,us)=>{rs[os]||(is[os]=us)}),this.map(rs,(os,us)=>{const ps=ss[os];if(ps){const xs=us.map(vs=>vs.presence_ref),cs=ps.map(vs=>vs.presence_ref),ys=us.filter(vs=>cs.indexOf(vs.presence_ref)<0),gs=ps.filter(vs=>xs.indexOf(vs.presence_ref)<0);ys.length>0&&(ns[os]=ys),gs.length>0&&(is[os]=gs)}else ns[os]=us}),this.syncDiff(ss,{joins:ns,leaves:is},es,ts)}static syncDiff(e,St,es,ts){const{joins:ss,leaves:rs}={joins:this.transformState(St.joins),leaves:this.transformState(St.leaves)};return es||(es=()=>{}),ts||(ts=()=>{}),this.map(ss,(ns,is)=>{var os;const us=(os=e[ns])!==null&&os!==void 0?os:[];if(e[ns]=this.cloneDeep(is),us.length>0){const ps=e[ns].map(cs=>cs.presence_ref),xs=us.filter(cs=>ps.indexOf(cs.presence_ref)<0);e[ns].unshift(...xs)}es(ns,us,is)}),this.map(rs,(ns,is)=>{let os=e[ns];if(!os)return;const us=is.map(ps=>ps.presence_ref);os=os.filter(ps=>us.indexOf(ps.presence_ref)<0),e[ns]=os,ts(ns,os,is),os.length===0&&delete e[ns]}),e}static map(e,St){return Object.getOwnPropertyNames(e).map(es=>St(es,e[es]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((St,es)=>{const ts=e[es];return"metas"in ts?St[es]=ts.metas.map(ss=>(ss.presence_ref=ss.phx_ref,delete ss.phx_ref,delete ss.phx_ref_prev,ss)):St[es]=ts,St},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var REALTIME_POSTGRES_CHANGES_LISTEN_EVENT;(function(_e){_e.ALL="*",_e.INSERT="INSERT",_e.UPDATE="UPDATE",_e.DELETE="DELETE"})(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT||(REALTIME_POSTGRES_CHANGES_LISTEN_EVENT={}));var REALTIME_LISTEN_TYPES;(function(_e){_e.BROADCAST="broadcast",_e.PRESENCE="presence",_e.POSTGRES_CHANGES="postgres_changes",_e.SYSTEM="system"})(REALTIME_LISTEN_TYPES||(REALTIME_LISTEN_TYPES={}));var REALTIME_SUBSCRIBE_STATES;(function(_e){_e.SUBSCRIBED="SUBSCRIBED",_e.TIMED_OUT="TIMED_OUT",_e.CLOSED="CLOSED",_e.CHANNEL_ERROR="CHANNEL_ERROR"})(REALTIME_SUBSCRIBE_STATES||(REALTIME_SUBSCRIBE_STATES={}));class RealtimeChannel{constructor(e,St={config:{}},es){this.topic=e,this.params=St,this.socket=es,this.bindings={},this.state=CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},St.config),this.timeout=this.socket.timeout,this.joinPush=new Push(this,CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new Timer(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(ts=>ts.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(ts=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,ts),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",ts=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,ts),this.state=CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(CHANNEL_EVENTS.reply,{},(ts,ss)=>{this._trigger(this._replyEventName(ss),ts)}),this.presence=new RealtimePresence(this),this.broadcastEndpointURL=httpEndpointURL(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,St=this.timeout){var es,ts,ss;if(this.socket.isConnected()||this.socket.connect(),this.state==CHANNEL_STATES.closed){const{config:{broadcast:rs,presence:ns,private:is}}=this.params,os=(ts=(es=this.bindings.postgres_changes)===null||es===void 0?void 0:es.map(cs=>cs.filter))!==null&&ts!==void 0?ts:[],us=!!this.bindings[REALTIME_LISTEN_TYPES.PRESENCE]&&this.bindings[REALTIME_LISTEN_TYPES.PRESENCE].length>0||((ss=this.params.config.presence)===null||ss===void 0?void 0:ss.enabled)===!0,ps={},xs={broadcast:rs,presence:Object.assign(Object.assign({},ns),{enabled:us}),postgres_changes:os,private:is};this.socket.accessTokenValue&&(ps.access_token=this.socket.accessTokenValue),this._onError(cs=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,cs)),this._onClose(()=>e==null?void 0:e(REALTIME_SUBSCRIBE_STATES.CLOSED)),this.updateJoinPayload(Object.assign({config:xs},ps)),this.joinedOnce=!0,this._rejoin(St),this.joinPush.receive("ok",async({postgres_changes:cs})=>{var ys;if(this.socket.setAuth(),cs===void 0){e==null||e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}else{const gs=this.bindings.postgres_changes,vs=(ys=gs==null?void 0:gs.length)!==null&&ys!==void 0?ys:0,ds=[];for(let fs=0;fs<vs;fs++){const Es=gs[fs],{filter:{event:Os,schema:Hs,table:Qs,filter:zs}}=Es,Ls=cs&&cs[fs];if(Ls&&Ls.event===Os&&Ls.schema===Hs&&Ls.table===Qs&&Ls.filter===zs)ds.push(Object.assign(Object.assign({},Es),{id:Ls.id}));else{this.unsubscribe(),this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ds,e&&e(REALTIME_SUBSCRIBE_STATES.SUBSCRIBED);return}}).receive("error",cs=>{this.state=CHANNEL_STATES.errored,e==null||e(REALTIME_SUBSCRIBE_STATES.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(cs).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(REALTIME_SUBSCRIBE_STATES.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,St={}){return await this.send({type:"presence",event:"track",payload:e},St.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,St,es){return this.state===CHANNEL_STATES.joined&&e===REALTIME_LISTEN_TYPES.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,St,es)}async send(e,St={}){var es,ts;if(!this._canPush()&&e.type==="broadcast"){const{event:ss,payload:rs}=e,is={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:ss,payload:rs,private:this.private}]})};try{const os=await this._fetchWithTimeout(this.broadcastEndpointURL,is,(es=St.timeout)!==null&&es!==void 0?es:this.timeout);return await((ts=os.body)===null||ts===void 0?void 0:ts.cancel()),os.ok?"ok":"error"}catch(os){return os.name==="AbortError"?"timed out":"error"}}else return new Promise(ss=>{var rs,ns,is;const os=this._push(e.type,e,St.timeout||this.timeout);e.type==="broadcast"&&!(!((is=(ns=(rs=this.params)===null||rs===void 0?void 0:rs.config)===null||ns===void 0?void 0:ns.broadcast)===null||is===void 0)&&is.ack)&&ss("ok"),os.receive("ok",()=>ss("ok")),os.receive("error",()=>ss("error")),os.receive("timeout",()=>ss("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=CHANNEL_STATES.leaving;const St=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(CHANNEL_EVENTS.close,"leave",this._joinRef())};this.joinPush.destroy();let es=null;return new Promise(ts=>{es=new Push(this,CHANNEL_EVENTS.leave,{},e),es.receive("ok",()=>{St(),ts("ok")}).receive("timeout",()=>{St(),ts("timed out")}).receive("error",()=>{ts("error")}),es.send(),this._canPush()||es.trigger("ok",{})}).finally(()=>{es==null||es.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=CHANNEL_STATES.closed,this.bindings={}}async _fetchWithTimeout(e,St,es){const ts=new AbortController,ss=setTimeout(()=>ts.abort(),es),rs=await this.socket.fetch(e,Object.assign(Object.assign({},St),{signal:ts.signal}));return clearTimeout(ss),rs}_push(e,St,es=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let ts=new Push(this,e,St,es);return this._canPush()?ts.send():this._addToPushBuffer(ts),ts}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>MAX_PUSH_BUFFER_SIZE){const St=this.pushBuffer.shift();St&&(St.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${St.event}`,St.payload))}}_onMessage(e,St,es){return St}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,St,es){var ts,ss;const rs=e.toLocaleLowerCase(),{close:ns,error:is,leave:os,join:us}=CHANNEL_EVENTS;if(es&&[ns,is,os,us].indexOf(rs)>=0&&es!==this._joinRef())return;let xs=this._onMessage(rs,St,es);if(St&&!xs)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(rs)?(ts=this.bindings.postgres_changes)===null||ts===void 0||ts.filter(cs=>{var ys,gs,vs;return((ys=cs.filter)===null||ys===void 0?void 0:ys.event)==="*"||((vs=(gs=cs.filter)===null||gs===void 0?void 0:gs.event)===null||vs===void 0?void 0:vs.toLocaleLowerCase())===rs}).map(cs=>cs.callback(xs,es)):(ss=this.bindings[rs])===null||ss===void 0||ss.filter(cs=>{var ys,gs,vs,ds,fs,Es;if(["broadcast","presence","postgres_changes"].includes(rs))if("id"in cs){const Os=cs.id,Hs=(ys=cs.filter)===null||ys===void 0?void 0:ys.event;return Os&&((gs=St.ids)===null||gs===void 0?void 0:gs.includes(Os))&&(Hs==="*"||(Hs==null?void 0:Hs.toLocaleLowerCase())===((vs=St.data)===null||vs===void 0?void 0:vs.type.toLocaleLowerCase()))}else{const Os=(fs=(ds=cs==null?void 0:cs.filter)===null||ds===void 0?void 0:ds.event)===null||fs===void 0?void 0:fs.toLocaleLowerCase();return Os==="*"||Os===((Es=St==null?void 0:St.event)===null||Es===void 0?void 0:Es.toLocaleLowerCase())}else return cs.type.toLocaleLowerCase()===rs}).map(cs=>{if(typeof xs=="object"&&"ids"in xs){const ys=xs.data,{schema:gs,table:vs,commit_timestamp:ds,type:fs,errors:Es}=ys;xs=Object.assign(Object.assign({},{schema:gs,table:vs,commit_timestamp:ds,eventType:fs,new:{},old:{},errors:Es}),this._getPayloadRecords(ys))}cs.callback(xs,es)})}_isClosed(){return this.state===CHANNEL_STATES.closed}_isJoined(){return this.state===CHANNEL_STATES.joined}_isJoining(){return this.state===CHANNEL_STATES.joining}_isLeaving(){return this.state===CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,St,es){const ts=e.toLocaleLowerCase(),ss={type:ts,filter:St,callback:es};return this.bindings[ts]?this.bindings[ts].push(ss):this.bindings[ts]=[ss],this}_off(e,St){const es=e.toLocaleLowerCase();return this.bindings[es]&&(this.bindings[es]=this.bindings[es].filter(ts=>{var ss;return!(((ss=ts.type)===null||ss===void 0?void 0:ss.toLocaleLowerCase())===es&&RealtimeChannel.isEqual(ts.filter,St))})),this}static isEqual(e,St){if(Object.keys(e).length!==Object.keys(St).length)return!1;for(const es in e)if(e[es]!==St[es])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(CHANNEL_EVENTS.close,{},e)}_onError(e){this._on(CHANNEL_EVENTS.error,{},St=>e(St))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=CHANNEL_STATES.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const St={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(St.new=convertChangeData(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(St.old=convertChangeData(e.columns,e.old_record)),St}}const noop=()=>{},CONNECTION_TIMEOUTS={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},RECONNECT_INTERVALS=[1e3,2e3,5e3,1e4],DEFAULT_RECONNECT_FALLBACK=1e4,WORKER_SCRIPT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class RealtimeClient{constructor(e,St){var es;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=DEFAULT_TIMEOUT,this.transport=null,this.heartbeatIntervalMs=CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=noop,this.ref=0,this.reconnectTimer=null,this.logger=noop,this.conn=null,this.sendBuffer=[],this.serializer=new Serializer,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=ts=>{let ss;return ts?ss=ts:typeof fetch>"u"?ss=(...rs)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0,import.meta.url).then(({default:ns})=>ns(...rs)).catch(ns=>{throw new Error(`Failed to load @supabase/node-fetch: ${ns.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):ss=fetch,(...rs)=>ss(...rs)},!(!((es=St==null?void 0:St.params)===null||es===void 0)&&es.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=St.params.apikey,this.endPoint=`${e}/${TRANSPORTS.websocket}`,this.httpEndpoint=httpEndpointURL(e),this._initializeOptions(St),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(St==null?void 0:St.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=WebSocketFactory.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const St=e.message;throw St.includes("Node.js")?new Error(`${St}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${St}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:VSN}))}disconnect(e,St){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const es=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(es),this._setConnectionState("disconnected")},e?this.conn.close(e,St??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const St=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),St}async removeAllChannels(){const e=await Promise.all(this.channels.map(St=>St.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,St,es){this.logger(e,St,es)}connectionState(){switch(this.conn&&this.conn.readyState){case SOCKET_STATES.connecting:return CONNECTION_STATE.Connecting;case SOCKET_STATES.open:return CONNECTION_STATE.Open;case SOCKET_STATES.closing:return CONNECTION_STATE.Closing;default:return CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===CONNECTION_STATE.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,St={config:{}}){const es=`realtime:${e}`,ts=this.getChannels().find(ss=>ss.topic===es);if(ts)return ts;{const ss=new RealtimeChannel(`realtime:${e}`,St,this);return this.channels.push(ss),ss}}push(e){const{topic:St,event:es,payload:ts,ref:ss}=e,rs=()=>{this.encode(e,ns=>{var is;(is=this.conn)===null||is===void 0||is.send(ns)})};this.log("push",`${St} ${es} (${ss})`,ts),this.isConnected()?rs():this.sendBuffer.push(rs)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(St){this.log("error","error in heartbeat callback",St)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(St){this.log("error","error in heartbeat callback",St)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(WS_CLOSE_NORMAL,"heartbeat timeout"),setTimeout(()=>{var St;this.isConnected()||(St=this.reconnectTimer)===null||St===void 0||St.scheduleTimeout()},CONNECTION_TIMEOUTS.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(St){this.log("error","error in heartbeat callback",St)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let St=this.channels.find(es=>es.topic===e&&(es._isJoined()||es._isJoining()));St&&(this.log("transport",`leaving duplicate topic "${e}"`),St.unsubscribe())}_remove(e){this.channels=this.channels.filter(St=>St.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,St=>{if(St.topic==="phoenix"&&St.event==="phx_reply")try{this.heartbeatCallback(St.payload.status==="ok"?"ok":"error")}catch(os){this.log("error","error in heartbeat callback",os)}St.ref&&St.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:es,event:ts,payload:ss,ref:rs}=St,ns=rs?`(${rs})`:"",is=ss.status||"";this.log("receive",`${is} ${es} ${ts} ${ns}`.trim(),ss),this.channels.filter(os=>os._isMember(es)).forEach(os=>os._trigger(ts,ss,rs)),this._triggerStateCallbacks("message",St)})}_clearTimer(e){var St;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((St=this.reconnectTimer)===null||St===void 0||St.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=St=>{this.log("worker","worker error",St.message),this.workerRef.terminate()},this.workerRef.onmessage=St=>{St.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var St;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(St=this.reconnectTimer)===null||St===void 0||St.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(CHANNEL_EVENTS.error))}_appendParams(e,St){if(Object.keys(St).length===0)return e;const es=e.match(/\?/)?"&":"?",ts=new URLSearchParams(St);return`${e}${es}${ts}`}_workerObjectUrl(e){let St;if(e)St=e;else{const es=new Blob([WORKER_SCRIPT],{type:"application/javascript"});St=URL.createObjectURL(es)}return St}_setConnectionState(e,St=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=St)}async _performAuth(e=null){let St;e?St=e:this.accessToken?St=await this.accessToken():St=this.accessTokenValue,this.accessTokenValue!=St&&(this.accessTokenValue=St,this.channels.forEach(es=>{const ts={access_token:St,version:DEFAULT_VERSION};St&&es.updateJoinPayload(ts),es.joinedOnce&&es._isJoined()&&es._push(CHANNEL_EVENTS.access_token,{access_token:St})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(St=>{this.log("error",`error setting auth in ${e}`,St)})}_triggerStateCallbacks(e,St){try{this.stateChangeCallbacks[e].forEach(es=>{try{es(St)}catch(ts){this.log("error",`error in ${e} callback`,ts)}})}catch(es){this.log("error",`error triggering ${e} callbacks`,es)}}_setupReconnectionTimer(){this.reconnectTimer=new Timer(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},CONNECTION_TIMEOUTS.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var St,es,ts,ss,rs,ns,is,os,us;if(this.transport=(St=e==null?void 0:e.transport)!==null&&St!==void 0?St:null,this.timeout=(es=e==null?void 0:e.timeout)!==null&&es!==void 0?es:DEFAULT_TIMEOUT,this.heartbeatIntervalMs=(ts=e==null?void 0:e.heartbeatIntervalMs)!==null&&ts!==void 0?ts:CONNECTION_TIMEOUTS.HEARTBEAT_INTERVAL,this.worker=(ss=e==null?void 0:e.worker)!==null&&ss!==void 0?ss:!1,this.accessToken=(rs=e==null?void 0:e.accessToken)!==null&&rs!==void 0?rs:null,this.heartbeatCallback=(ns=e==null?void 0:e.heartbeatCallback)!==null&&ns!==void 0?ns:noop,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(is=e==null?void 0:e.reconnectAfterMs)!==null&&is!==void 0?is:ps=>RECONNECT_INTERVALS[ps-1]||DEFAULT_RECONNECT_FALLBACK,this.encode=(os=e==null?void 0:e.encode)!==null&&os!==void 0?os:(ps,xs)=>xs(JSON.stringify(ps)),this.decode=(us=e==null?void 0:e.decode)!==null&&us!==void 0?us:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class StorageError extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function isStorageError(_e){return typeof _e=="object"&&_e!==null&&"__isStorageError"in _e}class StorageApiError extends StorageError{constructor(e,St,es){super(e),this.name="StorageApiError",this.status=St,this.statusCode=es}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class StorageUnknownError extends StorageError{constructor(e,St){super(e),this.name="StorageUnknownError",this.originalError=St}}var __awaiter$6=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};const resolveFetch$2=_e=>{let e;return _e?e=_e:typeof fetch>"u"?e=(...St)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0,import.meta.url).then(({default:es})=>es(...St)):e=fetch,(...St)=>e(...St)},resolveResponse=()=>__awaiter$6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield __vitePreload(()=>Promise.resolve().then(()=>browser),void 0,import.meta.url)).Response:Response}),recursiveToCamel=_e=>{if(Array.isArray(_e))return _e.map(St=>recursiveToCamel(St));if(typeof _e=="function"||_e!==Object(_e))return _e;const e={};return Object.entries(_e).forEach(([St,es])=>{const ts=St.replace(/([-_][a-z])/gi,ss=>ss.toUpperCase().replace(/[-_]/g,""));e[ts]=recursiveToCamel(es)}),e},isPlainObject=_e=>{if(typeof _e!="object"||_e===null)return!1;const e=Object.getPrototypeOf(_e);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in _e)&&!(Symbol.iterator in _e)};var __awaiter$5=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};const _getErrorMessage$1=_e=>_e.msg||_e.message||_e.error_description||_e.error||JSON.stringify(_e),handleError$1=(_e,e,St)=>__awaiter$5(void 0,void 0,void 0,function*(){const es=yield resolveResponse();_e instanceof es&&!(St!=null&&St.noResolveJson)?_e.json().then(ts=>{const ss=_e.status||500,rs=(ts==null?void 0:ts.statusCode)||ss+"";e(new StorageApiError(_getErrorMessage$1(ts),ss,rs))}).catch(ts=>{e(new StorageUnknownError(_getErrorMessage$1(ts),ts))}):e(new StorageUnknownError(_getErrorMessage$1(_e),_e))}),_getRequestParams$1=(_e,e,St,es)=>{const ts={method:_e,headers:(e==null?void 0:e.headers)||{}};return _e==="GET"||!es?ts:(isPlainObject(es)?(ts.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),ts.body=JSON.stringify(es)):ts.body=es,e!=null&&e.duplex&&(ts.duplex=e.duplex),Object.assign(Object.assign({},ts),St))};function _handleRequest$1(_e,e,St,es,ts,ss){return __awaiter$5(this,void 0,void 0,function*(){return new Promise((rs,ns)=>{_e(St,_getRequestParams$1(e,es,ts,ss)).then(is=>{if(!is.ok)throw is;return es!=null&&es.noResolveJson?is:is.json()}).then(is=>rs(is)).catch(is=>handleError$1(is,ns,es))})})}function get(_e,e,St,es){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(_e,"GET",e,St,es)})}function post(_e,e,St,es,ts){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(_e,"POST",e,es,ts,St)})}function put(_e,e,St,es,ts){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(_e,"PUT",e,es,ts,St)})}function head(_e,e,St,es){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(_e,"HEAD",e,Object.assign(Object.assign({},St),{noResolveJson:!0}),es)})}function remove(_e,e,St,es,ts){return __awaiter$5(this,void 0,void 0,function*(){return _handleRequest$1(_e,"DELETE",e,es,ts,St)})}var __awaiter$4=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};const DEFAULT_SEARCH_OPTIONS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},DEFAULT_FILE_OPTIONS={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class StorageFileApi{constructor(e,St={},es,ts){this.url=e,this.headers=St,this.bucketId=es,this.fetch=resolveFetch$2(ts)}uploadOrUpdate(e,St,es,ts){return __awaiter$4(this,void 0,void 0,function*(){try{let ss;const rs=Object.assign(Object.assign({},DEFAULT_FILE_OPTIONS),ts);let ns=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(rs.upsert)});const is=rs.metadata;typeof Blob<"u"&&es instanceof Blob?(ss=new FormData,ss.append("cacheControl",rs.cacheControl),is&&ss.append("metadata",this.encodeMetadata(is)),ss.append("",es)):typeof FormData<"u"&&es instanceof FormData?(ss=es,ss.append("cacheControl",rs.cacheControl),is&&ss.append("metadata",this.encodeMetadata(is))):(ss=es,ns["cache-control"]=`max-age=${rs.cacheControl}`,ns["content-type"]=rs.contentType,is&&(ns["x-metadata"]=this.toBase64(this.encodeMetadata(is)))),ts!=null&&ts.headers&&(ns=Object.assign(Object.assign({},ns),ts.headers));const os=this._removeEmptyFolders(St),us=this._getFinalPath(os),ps=yield(e=="PUT"?put:post)(this.fetch,`${this.url}/object/${us}`,ss,Object.assign({headers:ns},rs!=null&&rs.duplex?{duplex:rs.duplex}:{}));return{data:{path:os,id:ps.Id,fullPath:ps.Key},error:null}}catch(ss){if(isStorageError(ss))return{data:null,error:ss};throw ss}})}upload(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,St,es)})}uploadToSignedUrl(e,St,es,ts){return __awaiter$4(this,void 0,void 0,function*(){const ss=this._removeEmptyFolders(e),rs=this._getFinalPath(ss),ns=new URL(this.url+`/object/upload/sign/${rs}`);ns.searchParams.set("token",St);try{let is;const os=Object.assign({upsert:DEFAULT_FILE_OPTIONS.upsert},ts),us=Object.assign(Object.assign({},this.headers),{"x-upsert":String(os.upsert)});typeof Blob<"u"&&es instanceof Blob?(is=new FormData,is.append("cacheControl",os.cacheControl),is.append("",es)):typeof FormData<"u"&&es instanceof FormData?(is=es,is.append("cacheControl",os.cacheControl)):(is=es,us["cache-control"]=`max-age=${os.cacheControl}`,us["content-type"]=os.contentType);const ps=yield put(this.fetch,ns.toString(),is,{headers:us});return{data:{path:ss,fullPath:ps.Key},error:null}}catch(is){if(isStorageError(is))return{data:null,error:is};throw is}})}createSignedUploadUrl(e,St){return __awaiter$4(this,void 0,void 0,function*(){try{let es=this._getFinalPath(e);const ts=Object.assign({},this.headers);St!=null&&St.upsert&&(ts["x-upsert"]="true");const ss=yield post(this.fetch,`${this.url}/object/upload/sign/${es}`,{},{headers:ts}),rs=new URL(this.url+ss.url),ns=rs.searchParams.get("token");if(!ns)throw new StorageError("No token returned by API");return{data:{signedUrl:rs.toString(),path:e,token:ns},error:null}}catch(es){if(isStorageError(es))return{data:null,error:es};throw es}})}update(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,St,es)})}move(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:St,destinationBucket:es==null?void 0:es.destinationBucket},{headers:this.headers}),error:null}}catch(ts){if(isStorageError(ts))return{data:null,error:ts};throw ts}})}copy(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:{path:(yield post(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:St,destinationBucket:es==null?void 0:es.destinationBucket},{headers:this.headers})).Key},error:null}}catch(ts){if(isStorageError(ts))return{data:null,error:ts};throw ts}})}createSignedUrl(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){try{let ts=this._getFinalPath(e),ss=yield post(this.fetch,`${this.url}/object/sign/${ts}`,Object.assign({expiresIn:St},es!=null&&es.transform?{transform:es.transform}:{}),{headers:this.headers});const rs=es!=null&&es.download?`&download=${es.download===!0?"":es.download}`:"";return ss={signedUrl:encodeURI(`${this.url}${ss.signedURL}${rs}`)},{data:ss,error:null}}catch(ts){if(isStorageError(ts))return{data:null,error:ts};throw ts}})}createSignedUrls(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){try{const ts=yield post(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:St,paths:e},{headers:this.headers}),ss=es!=null&&es.download?`&download=${es.download===!0?"":es.download}`:"";return{data:ts.map(rs=>Object.assign(Object.assign({},rs),{signedUrl:rs.signedURL?encodeURI(`${this.url}${rs.signedURL}${ss}`):null})),error:null}}catch(ts){if(isStorageError(ts))return{data:null,error:ts};throw ts}})}download(e,St){return __awaiter$4(this,void 0,void 0,function*(){const ts=typeof(St==null?void 0:St.transform)<"u"?"render/image/authenticated":"object",ss=this.transformOptsToQueryString((St==null?void 0:St.transform)||{}),rs=ss?`?${ss}`:"";try{const ns=this._getFinalPath(e);return{data:yield(yield get(this.fetch,`${this.url}/${ts}/${ns}${rs}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(ns){if(isStorageError(ns))return{data:null,error:ns};throw ns}})}info(e){return __awaiter$4(this,void 0,void 0,function*(){const St=this._getFinalPath(e);try{const es=yield get(this.fetch,`${this.url}/object/info/${St}`,{headers:this.headers});return{data:recursiveToCamel(es),error:null}}catch(es){if(isStorageError(es))return{data:null,error:es};throw es}})}exists(e){return __awaiter$4(this,void 0,void 0,function*(){const St=this._getFinalPath(e);try{return yield head(this.fetch,`${this.url}/object/${St}`,{headers:this.headers}),{data:!0,error:null}}catch(es){if(isStorageError(es)&&es instanceof StorageUnknownError){const ts=es.originalError;if([400,404].includes(ts==null?void 0:ts.status))return{data:!1,error:es}}throw es}})}getPublicUrl(e,St){const es=this._getFinalPath(e),ts=[],ss=St!=null&&St.download?`download=${St.download===!0?"":St.download}`:"";ss!==""&&ts.push(ss);const ns=typeof(St==null?void 0:St.transform)<"u"?"render/image":"object",is=this.transformOptsToQueryString((St==null?void 0:St.transform)||{});is!==""&&ts.push(is);let os=ts.join("&");return os!==""&&(os=`?${os}`),{data:{publicUrl:encodeURI(`${this.url}/${ns}/public/${es}${os}`)}}}remove(e){return __awaiter$4(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(St){if(isStorageError(St))return{data:null,error:St};throw St}})}list(e,St,es){return __awaiter$4(this,void 0,void 0,function*(){try{const ts=Object.assign(Object.assign(Object.assign({},DEFAULT_SEARCH_OPTIONS),St),{prefix:e||""});return{data:yield post(this.fetch,`${this.url}/object/list/${this.bucketId}`,ts,{headers:this.headers},es),error:null}}catch(ts){if(isStorageError(ts))return{data:null,error:ts};throw ts}})}listV2(e,St){return __awaiter$4(this,void 0,void 0,function*(){try{const es=Object.assign({},e);return{data:yield post(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,es,{headers:this.headers},St),error:null}}catch(es){if(isStorageError(es))return{data:null,error:es};throw es}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const St=[];return e.width&&St.push(`width=${e.width}`),e.height&&St.push(`height=${e.height}`),e.resize&&St.push(`resize=${e.resize}`),e.format&&St.push(`format=${e.format}`),e.quality&&St.push(`quality=${e.quality}`),St.join("&")}}const version$2="2.11.0",DEFAULT_HEADERS$2={"X-Client-Info":`storage-js/${version$2}`};var __awaiter$3=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};class StorageBucketApi{constructor(e,St={},es,ts){const ss=new URL(e);ts!=null&&ts.useNewHostname&&/supabase\.(co|in|red)$/.test(ss.hostname)&&!ss.hostname.includes("storage.supabase.")&&(ss.hostname=ss.hostname.replace("supabase.","storage.supabase.")),this.url=ss.href,this.headers=Object.assign(Object.assign({},DEFAULT_HEADERS$2),St),this.fetch=resolveFetch$2(es)}listBuckets(){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(isStorageError(e))return{data:null,error:e};throw e}})}getBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield get(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(St){if(isStorageError(St))return{data:null,error:St};throw St}})}createBucket(e,St={public:!1}){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:St.type,public:St.public,file_size_limit:St.fileSizeLimit,allowed_mime_types:St.allowedMimeTypes},{headers:this.headers}),error:null}}catch(es){if(isStorageError(es))return{data:null,error:es};throw es}})}updateBucket(e,St){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield put(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:St.public,file_size_limit:St.fileSizeLimit,allowed_mime_types:St.allowedMimeTypes},{headers:this.headers}),error:null}}catch(es){if(isStorageError(es))return{data:null,error:es};throw es}})}emptyBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield post(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(St){if(isStorageError(St))return{data:null,error:St};throw St}})}deleteBucket(e){return __awaiter$3(this,void 0,void 0,function*(){try{return{data:yield remove(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(St){if(isStorageError(St))return{data:null,error:St};throw St}})}}class StorageClient extends StorageBucketApi{constructor(e,St={},es,ts){super(e,St,es,ts)}from(e){return new StorageFileApi(this.url,this.headers,e,this.fetch)}}const version$1="2.57.0";let JS_ENV="";typeof Deno<"u"?JS_ENV="deno":typeof document<"u"?JS_ENV="web":typeof navigator<"u"&&navigator.product==="ReactNative"?JS_ENV="react-native":JS_ENV="node";const DEFAULT_HEADERS$1={"X-Client-Info":`supabase-js-${JS_ENV}/${version$1}`},DEFAULT_GLOBAL_OPTIONS={headers:DEFAULT_HEADERS$1},DEFAULT_DB_OPTIONS={schema:"public"},DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},DEFAULT_REALTIME_OPTIONS={};var __awaiter$2=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};const resolveFetch$1=_e=>{let e;return _e?e=_e:typeof fetch>"u"?e=nodeFetch:e=fetch,(...St)=>e(...St)},resolveHeadersConstructor=()=>typeof Headers>"u"?Headers$1:Headers,fetchWithAuth=(_e,e,St)=>{const es=resolveFetch$1(St),ts=resolveHeadersConstructor();return(ss,rs)=>__awaiter$2(void 0,void 0,void 0,function*(){var ns;const is=(ns=yield e())!==null&&ns!==void 0?ns:_e;let os=new ts(rs==null?void 0:rs.headers);return os.has("apikey")||os.set("apikey",_e),os.has("Authorization")||os.set("Authorization",`Bearer ${is}`),es(ss,Object.assign(Object.assign({},rs),{headers:os}))})};var __awaiter$1=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};function ensureTrailingSlash(_e){return _e.endsWith("/")?_e:_e+"/"}function applySettingDefaults(_e,e){var St,es;const{db:ts,auth:ss,realtime:rs,global:ns}=_e,{db:is,auth:os,realtime:us,global:ps}=e,xs={db:Object.assign(Object.assign({},is),ts),auth:Object.assign(Object.assign({},os),ss),realtime:Object.assign(Object.assign({},us),rs),storage:{},global:Object.assign(Object.assign(Object.assign({},ps),ns),{headers:Object.assign(Object.assign({},(St=ps==null?void 0:ps.headers)!==null&&St!==void 0?St:{}),(es=ns==null?void 0:ns.headers)!==null&&es!==void 0?es:{})}),accessToken:()=>__awaiter$1(this,void 0,void 0,function*(){return""})};return _e.accessToken?xs.accessToken=_e.accessToken:delete xs.accessToken,xs}const version="2.71.1",AUTO_REFRESH_TICK_DURATION_MS=30*1e3,AUTO_REFRESH_TICK_THRESHOLD=3,EXPIRY_MARGIN_MS=AUTO_REFRESH_TICK_THRESHOLD*AUTO_REFRESH_TICK_DURATION_MS,GOTRUE_URL="http://localhost:9999",STORAGE_KEY="supabase.auth.token",DEFAULT_HEADERS={"X-Client-Info":`gotrue-js/${version}`},API_VERSION_HEADER_NAME="X-Supabase-Api-Version",API_VERSIONS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},BASE64URL_REGEX=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JWKS_TTL=10*60*1e3;class AuthError extends Error{constructor(e,St,es){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=St,this.code=es}}function isAuthError(_e){return typeof _e=="object"&&_e!==null&&"__isAuthError"in _e}class AuthApiError extends AuthError{constructor(e,St,es){super(e,St,es),this.name="AuthApiError",this.status=St,this.code=es}}function isAuthApiError(_e){return isAuthError(_e)&&_e.name==="AuthApiError"}class AuthUnknownError extends AuthError{constructor(e,St){super(e),this.name="AuthUnknownError",this.originalError=St}}class CustomAuthError extends AuthError{constructor(e,St,es,ts){super(e,es,ts),this.name=St,this.status=es}}class AuthSessionMissingError extends CustomAuthError{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function isAuthSessionMissingError(_e){return isAuthError(_e)&&_e.name==="AuthSessionMissingError"}class AuthInvalidTokenResponseError extends CustomAuthError{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class AuthInvalidCredentialsError extends CustomAuthError{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class AuthImplicitGrantRedirectError extends CustomAuthError{constructor(e,St=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=St}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function isAuthImplicitGrantRedirectError(_e){return isAuthError(_e)&&_e.name==="AuthImplicitGrantRedirectError"}class AuthPKCEGrantCodeExchangeError extends CustomAuthError{constructor(e,St=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=St}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AuthRetryableFetchError extends CustomAuthError{constructor(e,St){super(e,"AuthRetryableFetchError",St,void 0)}}function isAuthRetryableFetchError(_e){return isAuthError(_e)&&_e.name==="AuthRetryableFetchError"}class AuthWeakPasswordError extends CustomAuthError{constructor(e,St,es){super(e,"AuthWeakPasswordError",St,"weak_password"),this.reasons=es}}class AuthInvalidJwtError extends CustomAuthError{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const TO_BASE64URL="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),IGNORE_BASE64URL=` 	
\r=`.split(""),FROM_BASE64URL=(()=>{const _e=new Array(128);for(let e=0;e<_e.length;e+=1)_e[e]=-1;for(let e=0;e<IGNORE_BASE64URL.length;e+=1)_e[IGNORE_BASE64URL[e].charCodeAt(0)]=-2;for(let e=0;e<TO_BASE64URL.length;e+=1)_e[TO_BASE64URL[e].charCodeAt(0)]=e;return _e})();function byteToBase64URL(_e,e,St){if(_e!==null)for(e.queue=e.queue<<8|_e,e.queuedBits+=8;e.queuedBits>=6;){const es=e.queue>>e.queuedBits-6&63;St(TO_BASE64URL[es]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const es=e.queue>>e.queuedBits-6&63;St(TO_BASE64URL[es]),e.queuedBits-=6}}function byteFromBase64URL(_e,e,St){const es=FROM_BASE64URL[_e];if(es>-1)for(e.queue=e.queue<<6|es,e.queuedBits+=6;e.queuedBits>=8;)St(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(es===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(_e)}"`)}}function stringFromBase64URL(_e){const e=[],St=rs=>{e.push(String.fromCodePoint(rs))},es={utf8seq:0,codepoint:0},ts={queue:0,queuedBits:0},ss=rs=>{stringFromUTF8(rs,es,St)};for(let rs=0;rs<_e.length;rs+=1)byteFromBase64URL(_e.charCodeAt(rs),ts,ss);return e.join("")}function codepointToUTF8(_e,e){if(_e<=127){e(_e);return}else if(_e<=2047){e(192|_e>>6),e(128|_e&63);return}else if(_e<=65535){e(224|_e>>12),e(128|_e>>6&63),e(128|_e&63);return}else if(_e<=1114111){e(240|_e>>18),e(128|_e>>12&63),e(128|_e>>6&63),e(128|_e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${_e.toString(16)}`)}function stringToUTF8(_e,e){for(let St=0;St<_e.length;St+=1){let es=_e.charCodeAt(St);if(es>55295&&es<=56319){const ts=(es-55296)*1024&65535;es=(_e.charCodeAt(St+1)-56320&65535|ts)+65536,St+=1}codepointToUTF8(es,e)}}function stringFromUTF8(_e,e,St){if(e.utf8seq===0){if(_e<=127){St(_e);return}for(let es=1;es<6;es+=1)if(!(_e>>7-es&1)){e.utf8seq=es;break}if(e.utf8seq===2)e.codepoint=_e&31;else if(e.utf8seq===3)e.codepoint=_e&15;else if(e.utf8seq===4)e.codepoint=_e&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(_e<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|_e&63,e.utf8seq-=1,e.utf8seq===0&&St(e.codepoint)}}function base64UrlToUint8Array(_e){const e=[],St={queue:0,queuedBits:0},es=ts=>{e.push(ts)};for(let ts=0;ts<_e.length;ts+=1)byteFromBase64URL(_e.charCodeAt(ts),St,es);return new Uint8Array(e)}function stringToUint8Array(_e){const e=[];return stringToUTF8(_e,St=>e.push(St)),new Uint8Array(e)}function bytesToBase64URL(_e){const e=[],St={queue:0,queuedBits:0},es=ts=>{e.push(ts)};return _e.forEach(ts=>byteToBase64URL(ts,St,es)),byteToBase64URL(null,St,es),e.join("")}function expiresAt(_e){return Math.round(Date.now()/1e3)+_e}function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(_e){const e=Math.random()*16|0;return(_e=="x"?e:e&3|8).toString(16)})}const isBrowser=()=>typeof window<"u"&&typeof document<"u",localStorageWriteTests={tested:!1,writable:!1},supportsLocalStorage=()=>{if(!isBrowser())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(localStorageWriteTests.tested)return localStorageWriteTests.writable;const _e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(_e,_e),globalThis.localStorage.removeItem(_e),localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!0}catch{localStorageWriteTests.tested=!0,localStorageWriteTests.writable=!1}return localStorageWriteTests.writable};function parseParametersFromURL(_e){const e={},St=new URL(_e);if(St.hash&&St.hash[0]==="#")try{new URLSearchParams(St.hash.substring(1)).forEach((ts,ss)=>{e[ss]=ts})}catch{}return St.searchParams.forEach((es,ts)=>{e[ts]=es}),e}const resolveFetch=_e=>{let e;return _e?e=_e:typeof fetch>"u"?e=(...St)=>__vitePreload(()=>Promise.resolve().then(()=>browser),void 0,import.meta.url).then(({default:es})=>es(...St)):e=fetch,(...St)=>e(...St)},looksLikeFetchResponse=_e=>typeof _e=="object"&&_e!==null&&"status"in _e&&"ok"in _e&&"json"in _e&&typeof _e.json=="function",setItemAsync=async(_e,e,St)=>{await _e.setItem(e,JSON.stringify(St))},getItemAsync=async(_e,e)=>{const St=await _e.getItem(e);if(!St)return null;try{return JSON.parse(St)}catch{return St}},removeItemAsync=async(_e,e)=>{await _e.removeItem(e)};class Deferred{constructor(){this.promise=new Deferred.promiseConstructor((e,St)=>{this.resolve=e,this.reject=St})}}Deferred.promiseConstructor=Promise;function decodeJWT(_e){const e=_e.split(".");if(e.length!==3)throw new AuthInvalidJwtError("Invalid JWT structure");for(let es=0;es<e.length;es++)if(!BASE64URL_REGEX.test(e[es]))throw new AuthInvalidJwtError("JWT not in base64url format");return{header:JSON.parse(stringFromBase64URL(e[0])),payload:JSON.parse(stringFromBase64URL(e[1])),signature:base64UrlToUint8Array(e[2]),raw:{header:e[0],payload:e[1]}}}async function sleep(_e){return await new Promise(e=>{setTimeout(()=>e(null),_e)})}function retryable(_e,e){return new Promise((es,ts)=>{(async()=>{for(let ss=0;ss<1/0;ss++)try{const rs=await _e(ss);if(!e(ss,null,rs)){es(rs);return}}catch(rs){if(!e(ss,rs)){ts(rs);return}}})()})}function dec2hex(_e){return("0"+_e.toString(16)).substr(-2)}function generatePKCEVerifier(){const e=new Uint32Array(56);if(typeof crypto>"u"){const St="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",es=St.length;let ts="";for(let ss=0;ss<56;ss++)ts+=St.charAt(Math.floor(Math.random()*es));return ts}return crypto.getRandomValues(e),Array.from(e,dec2hex).join("")}async function sha256(_e){const St=new TextEncoder().encode(_e),es=await crypto.subtle.digest("SHA-256",St),ts=new Uint8Array(es);return Array.from(ts).map(ss=>String.fromCharCode(ss)).join("")}async function generatePKCEChallenge(_e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),_e;const St=await sha256(_e);return btoa(St).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function getCodeChallengeAndMethod(_e,e,St=!1){const es=generatePKCEVerifier();let ts=es;St&&(ts+="/PASSWORD_RECOVERY"),await setItemAsync(_e,`${e}-code-verifier`,ts);const ss=await generatePKCEChallenge(es);return[ss,es===ss?"plain":"s256"]}const API_VERSION_REGEX=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function parseResponseAPIVersion(_e){const e=_e.headers.get(API_VERSION_HEADER_NAME);if(!e||!e.match(API_VERSION_REGEX))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function validateExp(_e){if(!_e)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(_e<=e)throw new Error("JWT has expired")}function getAlgorithm(_e){switch(_e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function validateUUID(_e){if(!UUID_REGEX.test(_e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function userNotAvailableProxy(){const _e={};return new Proxy(_e,{get:(e,St)=>{if(St==="__isUserNotAvailableProxy")return!0;if(typeof St=="symbol"){const es=St.toString();if(es==="Symbol(Symbol.toPrimitive)"||es==="Symbol(Symbol.toStringTag)"||es==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${St}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,St)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${St}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,St)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${St}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function deepClone(_e){return JSON.parse(JSON.stringify(_e))}var __rest$1=globalThis&&globalThis.__rest||function(_e,e){var St={};for(var es in _e)Object.prototype.hasOwnProperty.call(_e,es)&&e.indexOf(es)<0&&(St[es]=_e[es]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ts=0,es=Object.getOwnPropertySymbols(_e);ts<es.length;ts++)e.indexOf(es[ts])<0&&Object.prototype.propertyIsEnumerable.call(_e,es[ts])&&(St[es[ts]]=_e[es[ts]]);return St};const _getErrorMessage=_e=>_e.msg||_e.message||_e.error_description||_e.error||JSON.stringify(_e),NETWORK_ERROR_CODES=[502,503,504];async function handleError(_e){var e;if(!looksLikeFetchResponse(_e))throw new AuthRetryableFetchError(_getErrorMessage(_e),0);if(NETWORK_ERROR_CODES.includes(_e.status))throw new AuthRetryableFetchError(_getErrorMessage(_e),_e.status);let St;try{St=await _e.json()}catch(ss){throw new AuthUnknownError(_getErrorMessage(ss),ss)}let es;const ts=parseResponseAPIVersion(_e);if(ts&&ts.getTime()>=API_VERSIONS["2024-01-01"].timestamp&&typeof St=="object"&&St&&typeof St.code=="string"?es=St.code:typeof St=="object"&&St&&typeof St.error_code=="string"&&(es=St.error_code),es){if(es==="weak_password")throw new AuthWeakPasswordError(_getErrorMessage(St),_e.status,((e=St.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(es==="session_not_found")throw new AuthSessionMissingError}else if(typeof St=="object"&&St&&typeof St.weak_password=="object"&&St.weak_password&&Array.isArray(St.weak_password.reasons)&&St.weak_password.reasons.length&&St.weak_password.reasons.reduce((ss,rs)=>ss&&typeof rs=="string",!0))throw new AuthWeakPasswordError(_getErrorMessage(St),_e.status,St.weak_password.reasons);throw new AuthApiError(_getErrorMessage(St),_e.status||500,es)}const _getRequestParams=(_e,e,St,es)=>{const ts={method:_e,headers:(e==null?void 0:e.headers)||{}};return _e==="GET"?ts:(ts.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),ts.body=JSON.stringify(es),Object.assign(Object.assign({},ts),St))};async function _request(_e,e,St,es){var ts;const ss=Object.assign({},es==null?void 0:es.headers);ss[API_VERSION_HEADER_NAME]||(ss[API_VERSION_HEADER_NAME]=API_VERSIONS["2024-01-01"].name),es!=null&&es.jwt&&(ss.Authorization=`Bearer ${es.jwt}`);const rs=(ts=es==null?void 0:es.query)!==null&&ts!==void 0?ts:{};es!=null&&es.redirectTo&&(rs.redirect_to=es.redirectTo);const ns=Object.keys(rs).length?"?"+new URLSearchParams(rs).toString():"",is=await _handleRequest(_e,e,St+ns,{headers:ss,noResolveJson:es==null?void 0:es.noResolveJson},{},es==null?void 0:es.body);return es!=null&&es.xform?es==null?void 0:es.xform(is):{data:Object.assign({},is),error:null}}async function _handleRequest(_e,e,St,es,ts,ss){const rs=_getRequestParams(e,es,ts,ss);let ns;try{ns=await _e(St,Object.assign({},rs))}catch(is){throw console.error(is),new AuthRetryableFetchError(_getErrorMessage(is),0)}if(ns.ok||await handleError(ns),es!=null&&es.noResolveJson)return ns;try{return await ns.json()}catch(is){await handleError(is)}}function _sessionResponse(_e){var e;let St=null;hasSession(_e)&&(St=Object.assign({},_e),_e.expires_at||(St.expires_at=expiresAt(_e.expires_in)));const es=(e=_e.user)!==null&&e!==void 0?e:_e;return{data:{session:St,user:es},error:null}}function _sessionResponsePassword(_e){const e=_sessionResponse(_e);return!e.error&&_e.weak_password&&typeof _e.weak_password=="object"&&Array.isArray(_e.weak_password.reasons)&&_e.weak_password.reasons.length&&_e.weak_password.message&&typeof _e.weak_password.message=="string"&&_e.weak_password.reasons.reduce((St,es)=>St&&typeof es=="string",!0)&&(e.data.weak_password=_e.weak_password),e}function _userResponse(_e){var e;return{data:{user:(e=_e.user)!==null&&e!==void 0?e:_e},error:null}}function _ssoResponse(_e){return{data:_e,error:null}}function _generateLinkResponse(_e){const{action_link:e,email_otp:St,hashed_token:es,redirect_to:ts,verification_type:ss}=_e,rs=__rest$1(_e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),ns={action_link:e,email_otp:St,hashed_token:es,redirect_to:ts,verification_type:ss},is=Object.assign({},rs);return{data:{properties:ns,user:is},error:null}}function _noResolveJsonResponse(_e){return _e}function hasSession(_e){return _e.access_token&&_e.refresh_token&&_e.expires_in}const SIGN_OUT_SCOPES=["global","local","others"];var __rest=globalThis&&globalThis.__rest||function(_e,e){var St={};for(var es in _e)Object.prototype.hasOwnProperty.call(_e,es)&&e.indexOf(es)<0&&(St[es]=_e[es]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ts=0,es=Object.getOwnPropertySymbols(_e);ts<es.length;ts++)e.indexOf(es[ts])<0&&Object.prototype.propertyIsEnumerable.call(_e,es[ts])&&(St[es[ts]]=_e[es[ts]]);return St};class GoTrueAdminApi{constructor({url:e="",headers:St={},fetch:es}){this.url=e,this.headers=St,this.fetch=resolveFetch(es),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,St=SIGN_OUT_SCOPES[0]){if(SIGN_OUT_SCOPES.indexOf(St)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${SIGN_OUT_SCOPES.join(", ")}`);try{return await _request(this.fetch,"POST",`${this.url}/logout?scope=${St}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(es){if(isAuthError(es))return{data:null,error:es};throw es}}async inviteUserByEmail(e,St={}){try{return await _request(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:St.data},headers:this.headers,redirectTo:St.redirectTo,xform:_userResponse})}catch(es){if(isAuthError(es))return{data:{user:null},error:es};throw es}}async generateLink(e){try{const{options:St}=e,es=__rest(e,["options"]),ts=Object.assign(Object.assign({},es),St);return"newEmail"in es&&(ts.new_email=es==null?void 0:es.newEmail,delete ts.newEmail),await _request(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:ts,headers:this.headers,xform:_generateLinkResponse,redirectTo:St==null?void 0:St.redirectTo})}catch(St){if(isAuthError(St))return{data:{properties:null,user:null},error:St};throw St}}async createUser(e){try{return await _request(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_userResponse})}catch(St){if(isAuthError(St))return{data:{user:null},error:St};throw St}}async listUsers(e){var St,es,ts,ss,rs,ns,is;try{const os={nextPage:null,lastPage:0,total:0},us=await _request(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(es=(St=e==null?void 0:e.page)===null||St===void 0?void 0:St.toString())!==null&&es!==void 0?es:"",per_page:(ss=(ts=e==null?void 0:e.perPage)===null||ts===void 0?void 0:ts.toString())!==null&&ss!==void 0?ss:""},xform:_noResolveJsonResponse});if(us.error)throw us.error;const ps=await us.json(),xs=(rs=us.headers.get("x-total-count"))!==null&&rs!==void 0?rs:0,cs=(is=(ns=us.headers.get("link"))===null||ns===void 0?void 0:ns.split(","))!==null&&is!==void 0?is:[];return cs.length>0&&(cs.forEach(ys=>{const gs=parseInt(ys.split(";")[0].split("=")[1].substring(0,1)),vs=JSON.parse(ys.split(";")[1].split("=")[1]);os[`${vs}Page`]=gs}),os.total=parseInt(xs)),{data:Object.assign(Object.assign({},ps),os),error:null}}catch(os){if(isAuthError(os))return{data:{users:[]},error:os};throw os}}async getUserById(e){validateUUID(e);try{return await _request(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_userResponse})}catch(St){if(isAuthError(St))return{data:{user:null},error:St};throw St}}async updateUserById(e,St){validateUUID(e);try{return await _request(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:St,headers:this.headers,xform:_userResponse})}catch(es){if(isAuthError(es))return{data:{user:null},error:es};throw es}}async deleteUser(e,St=!1){validateUUID(e);try{return await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:St},xform:_userResponse})}catch(es){if(isAuthError(es))return{data:{user:null},error:es};throw es}}async _listFactors(e){validateUUID(e.userId);try{const{data:St,error:es}=await _request(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:ts=>({data:{factors:ts},error:null})});return{data:St,error:es}}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}async _deleteFactor(e){validateUUID(e.userId),validateUUID(e.id);try{return{data:await _request(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}}function memoryLocalStorageAdapter(_e={}){return{getItem:e=>_e[e]||null,setItem:(e,St)=>{_e[e]=St},removeItem:e=>{delete _e[e]}}}function polyfillGlobalThis(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const internals={debug:!!(globalThis&&supportsLocalStorage()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class LockAcquireTimeoutError extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class NavigatorLockAcquireTimeoutError extends LockAcquireTimeoutError{}async function navigatorLock(_e,e,St){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",_e,e);const es=new globalThis.AbortController;return e>0&&setTimeout(()=>{es.abort(),internals.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",_e)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(_e,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:es.signal},async ts=>{if(ts){internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",_e,ts.name);try{return await St()}finally{internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",_e,ts.name)}}else{if(e===0)throw internals.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",_e),new NavigatorLockAcquireTimeoutError(`Acquiring an exclusive Navigator LockManager lock "${_e}" immediately failed`);if(internals.debug)try{const ss=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(ss,null,"  "))}catch(ss){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",ss)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await St()}}))}polyfillGlobalThis();const DEFAULT_OPTIONS={url:GOTRUE_URL,storageKey:STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:DEFAULT_HEADERS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lockNoOp(_e,e,St){return await St()}const GLOBAL_JWKS={};class GoTrueClient{constructor(e){var St,es;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=GoTrueClient.nextInstanceID,GoTrueClient.nextInstanceID+=1,this.instanceID>0&&isBrowser()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const ts=Object.assign(Object.assign({},DEFAULT_OPTIONS),e);if(this.logDebugMessages=!!ts.debug,typeof ts.debug=="function"&&(this.logger=ts.debug),this.persistSession=ts.persistSession,this.storageKey=ts.storageKey,this.autoRefreshToken=ts.autoRefreshToken,this.admin=new GoTrueAdminApi({url:ts.url,headers:ts.headers,fetch:ts.fetch}),this.url=ts.url,this.headers=ts.headers,this.fetch=resolveFetch(ts.fetch),this.lock=ts.lock||lockNoOp,this.detectSessionInUrl=ts.detectSessionInUrl,this.flowType=ts.flowType,this.hasCustomAuthorizationHeader=ts.hasCustomAuthorizationHeader,ts.lock?this.lock=ts.lock:isBrowser()&&(!((St=globalThis==null?void 0:globalThis.navigator)===null||St===void 0)&&St.locks)?this.lock=navigatorLock:this.lock=lockNoOp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(ts.storage?this.storage=ts.storage:supportsLocalStorage()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),ts.userStorage&&(this.userStorage=ts.userStorage)):(this.memoryStorage={},this.storage=memoryLocalStorageAdapter(this.memoryStorage)),isBrowser()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(ss){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",ss)}(es=this.broadcastChannel)===null||es===void 0||es.addEventListener("message",async ss=>{this._debug("received broadcast notification from other tab or client",ss),await this._notifyAllSubscribers(ss.data.event,ss.data.session,!1)})}this.initialize()}get jwks(){var e,St;return(St=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&St!==void 0?St:{keys:[]}}set jwks(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,St;return(St=(e=GLOBAL_JWKS[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&St!==void 0?St:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){GLOBAL_JWKS[this.storageKey]=Object.assign(Object.assign({},GLOBAL_JWKS[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${version}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const St=parseParametersFromURL(window.location.href);let es="none";if(this._isImplicitGrantCallback(St)?es="implicit":await this._isPKCECallback(St)&&(es="pkce"),isBrowser()&&this.detectSessionInUrl&&es!=="none"){const{data:ts,error:ss}=await this._getSessionFromURL(St,es);if(ss){if(this._debug("#_initialize()","error detecting session from URL",ss),isAuthImplicitGrantRedirectError(ss)){const is=(e=ss.details)===null||e===void 0?void 0:e.code;if(is==="identity_already_exists"||is==="identity_not_found"||is==="single_identity_not_deletable")return{error:ss}}return await this._removeSession(),{error:ss}}const{session:rs,redirectType:ns}=ts;return this._debug("#_initialize()","detected session in URL",rs,"redirect type",ns),await this._saveSession(rs),setTimeout(async()=>{ns==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",rs):await this._notifyAllSubscribers("SIGNED_IN",rs)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(St){return isAuthError(St)?{error:St}:{error:new AuthUnknownError("Unexpected error during initialization",St)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var St,es,ts;try{const ss=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(es=(St=e==null?void 0:e.options)===null||St===void 0?void 0:St.data)!==null&&es!==void 0?es:{},gotrue_meta_security:{captcha_token:(ts=e==null?void 0:e.options)===null||ts===void 0?void 0:ts.captchaToken}},xform:_sessionResponse}),{data:rs,error:ns}=ss;if(ns||!rs)return{data:{user:null,session:null},error:ns};const is=rs.session,os=rs.user;return rs.session&&(await this._saveSession(rs.session),await this._notifyAllSubscribers("SIGNED_IN",is)),{data:{user:os,session:is},error:null}}catch(ss){if(isAuthError(ss))return{data:{user:null,session:null},error:ss};throw ss}}async signUp(e){var St,es,ts;try{let ss;if("email"in e){const{email:us,password:ps,options:xs}=e;let cs=null,ys=null;this.flowType==="pkce"&&([cs,ys]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),ss=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:xs==null?void 0:xs.emailRedirectTo,body:{email:us,password:ps,data:(St=xs==null?void 0:xs.data)!==null&&St!==void 0?St:{},gotrue_meta_security:{captcha_token:xs==null?void 0:xs.captchaToken},code_challenge:cs,code_challenge_method:ys},xform:_sessionResponse})}else if("phone"in e){const{phone:us,password:ps,options:xs}=e;ss=await _request(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:us,password:ps,data:(es=xs==null?void 0:xs.data)!==null&&es!==void 0?es:{},channel:(ts=xs==null?void 0:xs.channel)!==null&&ts!==void 0?ts:"sms",gotrue_meta_security:{captcha_token:xs==null?void 0:xs.captchaToken}},xform:_sessionResponse})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:rs,error:ns}=ss;if(ns||!rs)return{data:{user:null,session:null},error:ns};const is=rs.session,os=rs.user;return rs.session&&(await this._saveSession(rs.session),await this._notifyAllSubscribers("SIGNED_IN",is)),{data:{user:os,session:is},error:null}}catch(ss){if(isAuthError(ss))return{data:{user:null,session:null},error:ss};throw ss}}async signInWithPassword(e){try{let St;if("email"in e){const{email:ss,password:rs,options:ns}=e;St=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:ss,password:rs,gotrue_meta_security:{captcha_token:ns==null?void 0:ns.captchaToken}},xform:_sessionResponsePassword})}else if("phone"in e){const{phone:ss,password:rs,options:ns}=e;St=await _request(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:ss,password:rs,gotrue_meta_security:{captcha_token:ns==null?void 0:ns.captchaToken}},xform:_sessionResponsePassword})}else throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a password");const{data:es,error:ts}=St;return ts?{data:{user:null,session:null},error:ts}:!es||!es.session||!es.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(es.session&&(await this._saveSession(es.session),await this._notifyAllSubscribers("SIGNED_IN",es.session)),{data:Object.assign({user:es.user,session:es.session},es.weak_password?{weakPassword:es.weak_password}:null),error:ts})}catch(St){if(isAuthError(St))return{data:{user:null,session:null},error:St};throw St}}async signInWithOAuth(e){var St,es,ts,ss;return await this._handleProviderSignIn(e.provider,{redirectTo:(St=e.options)===null||St===void 0?void 0:St.redirectTo,scopes:(es=e.options)===null||es===void 0?void 0:es.scopes,queryParams:(ts=e.options)===null||ts===void 0?void 0:ts.queryParams,skipBrowserRedirect:(ss=e.options)===null||ss===void 0?void 0:ss.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:St}=e;if(St==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${St}"`)}async signInWithSolana(e){var St,es,ts,ss,rs,ns,is,os,us,ps,xs,cs;let ys,gs;if("message"in e)ys=e.message,gs=e.signature;else{const{chain:vs,wallet:ds,statement:fs,options:Es}=e;let Os;if(isBrowser())if(typeof ds=="object")Os=ds;else{const Qs=window;if("solana"in Qs&&typeof Qs.solana=="object"&&("signIn"in Qs.solana&&typeof Qs.solana.signIn=="function"||"signMessage"in Qs.solana&&typeof Qs.solana.signMessage=="function"))Os=Qs.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ds!="object"||!(Es!=null&&Es.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Os=ds}const Hs=new URL((St=Es==null?void 0:Es.url)!==null&&St!==void 0?St:window.location.href);if("signIn"in Os&&Os.signIn){const Qs=await Os.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Es==null?void 0:Es.signInWithSolana),{version:"1",domain:Hs.host,uri:Hs.href}),fs?{statement:fs}:null));let zs;if(Array.isArray(Qs)&&Qs[0]&&typeof Qs[0]=="object")zs=Qs[0];else if(Qs&&typeof Qs=="object"&&"signedMessage"in Qs&&"signature"in Qs)zs=Qs;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in zs&&"signature"in zs&&(typeof zs.signedMessage=="string"||zs.signedMessage instanceof Uint8Array)&&zs.signature instanceof Uint8Array)ys=typeof zs.signedMessage=="string"?zs.signedMessage:new TextDecoder().decode(zs.signedMessage),gs=zs.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Os)||typeof Os.signMessage!="function"||!("publicKey"in Os)||typeof Os!="object"||!Os.publicKey||!("toBase58"in Os.publicKey)||typeof Os.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");ys=[`${Hs.host} wants you to sign in with your Solana account:`,Os.publicKey.toBase58(),...fs?["",fs,""]:[""],"Version: 1",`URI: ${Hs.href}`,`Issued At: ${(ts=(es=Es==null?void 0:Es.signInWithSolana)===null||es===void 0?void 0:es.issuedAt)!==null&&ts!==void 0?ts:new Date().toISOString()}`,...!((ss=Es==null?void 0:Es.signInWithSolana)===null||ss===void 0)&&ss.notBefore?[`Not Before: ${Es.signInWithSolana.notBefore}`]:[],...!((rs=Es==null?void 0:Es.signInWithSolana)===null||rs===void 0)&&rs.expirationTime?[`Expiration Time: ${Es.signInWithSolana.expirationTime}`]:[],...!((ns=Es==null?void 0:Es.signInWithSolana)===null||ns===void 0)&&ns.chainId?[`Chain ID: ${Es.signInWithSolana.chainId}`]:[],...!((is=Es==null?void 0:Es.signInWithSolana)===null||is===void 0)&&is.nonce?[`Nonce: ${Es.signInWithSolana.nonce}`]:[],...!((os=Es==null?void 0:Es.signInWithSolana)===null||os===void 0)&&os.requestId?[`Request ID: ${Es.signInWithSolana.requestId}`]:[],...!((ps=(us=Es==null?void 0:Es.signInWithSolana)===null||us===void 0?void 0:us.resources)===null||ps===void 0)&&ps.length?["Resources",...Es.signInWithSolana.resources.map(zs=>`- ${zs}`)]:[]].join(`
`);const Qs=await Os.signMessage(new TextEncoder().encode(ys),"utf8");if(!Qs||!(Qs instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");gs=Qs}}try{const{data:vs,error:ds}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:ys,signature:bytesToBase64URL(gs)},!((xs=e.options)===null||xs===void 0)&&xs.captchaToken?{gotrue_meta_security:{captcha_token:(cs=e.options)===null||cs===void 0?void 0:cs.captchaToken}}:null),xform:_sessionResponse});if(ds)throw ds;return!vs||!vs.session||!vs.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(vs.session&&(await this._saveSession(vs.session),await this._notifyAllSubscribers("SIGNED_IN",vs.session)),{data:Object.assign({},vs),error:ds})}catch(vs){if(isAuthError(vs))return{data:{user:null,session:null},error:vs};throw vs}}async _exchangeCodeForSession(e){const St=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`),[es,ts]=(St??"").split("/");try{const{data:ss,error:rs}=await _request(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:es},xform:_sessionResponse});if(await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`),rs)throw rs;return!ss||!ss.session||!ss.user?{data:{user:null,session:null,redirectType:null},error:new AuthInvalidTokenResponseError}:(ss.session&&(await this._saveSession(ss.session),await this._notifyAllSubscribers("SIGNED_IN",ss.session)),{data:Object.assign(Object.assign({},ss),{redirectType:ts??null}),error:rs})}catch(ss){if(isAuthError(ss))return{data:{user:null,session:null,redirectType:null},error:ss};throw ss}}async signInWithIdToken(e){try{const{options:St,provider:es,token:ts,access_token:ss,nonce:rs}=e,ns=await _request(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:es,id_token:ts,access_token:ss,nonce:rs,gotrue_meta_security:{captcha_token:St==null?void 0:St.captchaToken}},xform:_sessionResponse}),{data:is,error:os}=ns;return os?{data:{user:null,session:null},error:os}:!is||!is.session||!is.user?{data:{user:null,session:null},error:new AuthInvalidTokenResponseError}:(is.session&&(await this._saveSession(is.session),await this._notifyAllSubscribers("SIGNED_IN",is.session)),{data:is,error:os})}catch(St){if(isAuthError(St))return{data:{user:null,session:null},error:St};throw St}}async signInWithOtp(e){var St,es,ts,ss,rs;try{if("email"in e){const{email:ns,options:is}=e;let os=null,us=null;this.flowType==="pkce"&&([os,us]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{error:ps}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:ns,data:(St=is==null?void 0:is.data)!==null&&St!==void 0?St:{},create_user:(es=is==null?void 0:is.shouldCreateUser)!==null&&es!==void 0?es:!0,gotrue_meta_security:{captcha_token:is==null?void 0:is.captchaToken},code_challenge:os,code_challenge_method:us},redirectTo:is==null?void 0:is.emailRedirectTo});return{data:{user:null,session:null},error:ps}}if("phone"in e){const{phone:ns,options:is}=e,{data:os,error:us}=await _request(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:ns,data:(ts=is==null?void 0:is.data)!==null&&ts!==void 0?ts:{},create_user:(ss=is==null?void 0:is.shouldCreateUser)!==null&&ss!==void 0?ss:!0,gotrue_meta_security:{captcha_token:is==null?void 0:is.captchaToken},channel:(rs=is==null?void 0:is.channel)!==null&&rs!==void 0?rs:"sms"}});return{data:{user:null,session:null,messageId:os==null?void 0:os.message_id},error:us}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(ns){if(isAuthError(ns))return{data:{user:null,session:null},error:ns};throw ns}}async verifyOtp(e){var St,es;try{let ts,ss;"options"in e&&(ts=(St=e.options)===null||St===void 0?void 0:St.redirectTo,ss=(es=e.options)===null||es===void 0?void 0:es.captchaToken);const{data:rs,error:ns}=await _request(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:ss}}),redirectTo:ts,xform:_sessionResponse});if(ns)throw ns;if(!rs)throw new Error("An error occurred on token verification.");const is=rs.session,os=rs.user;return is!=null&&is.access_token&&(await this._saveSession(is),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",is)),{data:{user:os,session:is},error:null}}catch(ts){if(isAuthError(ts))return{data:{user:null,session:null},error:ts};throw ts}}async signInWithSSO(e){var St,es,ts;try{let ss=null,rs=null;return this.flowType==="pkce"&&([ss,rs]=await getCodeChallengeAndMethod(this.storage,this.storageKey)),await _request(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(es=(St=e.options)===null||St===void 0?void 0:St.redirectTo)!==null&&es!==void 0?es:void 0}),!((ts=e==null?void 0:e.options)===null||ts===void 0)&&ts.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:ss,code_challenge_method:rs}),headers:this.headers,xform:_ssoResponse})}catch(ss){if(isAuthError(ss))return{data:null,error:ss};throw ss}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:St},error:es}=e;if(es)throw es;if(!St)throw new AuthSessionMissingError;const{error:ts}=await _request(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:St.access_token});return{data:{user:null,session:null},error:ts}})}catch(e){if(isAuthError(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const St=`${this.url}/resend`;if("email"in e){const{email:es,type:ts,options:ss}=e,{error:rs}=await _request(this.fetch,"POST",St,{headers:this.headers,body:{email:es,type:ts,gotrue_meta_security:{captcha_token:ss==null?void 0:ss.captchaToken}},redirectTo:ss==null?void 0:ss.emailRedirectTo});return{data:{user:null,session:null},error:rs}}else if("phone"in e){const{phone:es,type:ts,options:ss}=e,{data:rs,error:ns}=await _request(this.fetch,"POST",St,{headers:this.headers,body:{phone:es,type:ts,gotrue_meta_security:{captcha_token:ss==null?void 0:ss.captchaToken}}});return{data:{user:null,session:null,messageId:rs==null?void 0:rs.message_id},error:ns}}throw new AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(St){if(isAuthError(St))return{data:{user:null,session:null},error:St};throw St}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async St=>St))}async _acquireLock(e,St){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const es=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),ts=(async()=>(await es,await St()))();return this.pendingInLock.push((async()=>{try{await ts}catch{}})()),ts}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const es=St();for(this.pendingInLock.push((async()=>{try{await es}catch{}})()),await es;this.pendingInLock.length;){const ts=[...this.pendingInLock];await Promise.all(ts),this.pendingInLock.splice(0,ts.length)}return await es}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const St=await this.__loadSession();return await e(St)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const St=await getItemAsync(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",St),St!==null&&(this._isValidSession(St)?e=St:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const es=e.expires_at?e.expires_at*1e3-Date.now()<EXPIRY_MARGIN_MS:!1;if(this._debug("#__loadSession()",`session has${es?"":" not"} expired`,"expires_at",e.expires_at),!es){if(this.userStorage){const rs=await getItemAsync(this.userStorage,this.storageKey+"-user");rs!=null&&rs.user?e.user=rs.user:e.user=userNotAvailableProxy()}if(this.storage.isServer&&e.user){let rs=this.suppressGetSessionWarning;e=new Proxy(e,{get:(is,os,us)=>(!rs&&os==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),rs=!0,this.suppressGetSessionWarning=!0),Reflect.get(is,os,us))})}return{data:{session:e},error:null}}const{session:ts,error:ss}=await this._callRefreshToken(e.refresh_token);return ss?{data:{session:null},error:ss}:{data:{session:ts},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_userResponse}):await this._useSession(async St=>{var es,ts,ss;const{data:rs,error:ns}=St;if(ns)throw ns;return!(!((es=rs.session)===null||es===void 0)&&es.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new AuthSessionMissingError}:await _request(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(ss=(ts=rs.session)===null||ts===void 0?void 0:ts.access_token)!==null&&ss!==void 0?ss:void 0,xform:_userResponse})})}catch(St){if(isAuthError(St))return isAuthSessionMissingError(St)&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:St};throw St}}async updateUser(e,St={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,St))}async _updateUser(e,St={}){try{return await this._useSession(async es=>{const{data:ts,error:ss}=es;if(ss)throw ss;if(!ts.session)throw new AuthSessionMissingError;const rs=ts.session;let ns=null,is=null;this.flowType==="pkce"&&e.email!=null&&([ns,is]=await getCodeChallengeAndMethod(this.storage,this.storageKey));const{data:os,error:us}=await _request(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:St==null?void 0:St.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:ns,code_challenge_method:is}),jwt:rs.access_token,xform:_userResponse});if(us)throw us;return rs.user=os.user,await this._saveSession(rs),await this._notifyAllSubscribers("USER_UPDATED",rs),{data:{user:rs.user},error:null}})}catch(es){if(isAuthError(es))return{data:{user:null},error:es};throw es}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new AuthSessionMissingError;const St=Date.now()/1e3;let es=St,ts=!0,ss=null;const{payload:rs}=decodeJWT(e.access_token);if(rs.exp&&(es=rs.exp,ts=es<=St),ts){const{session:ns,error:is}=await this._callRefreshToken(e.refresh_token);if(is)return{data:{user:null,session:null},error:is};if(!ns)return{data:{user:null,session:null},error:null};ss=ns}else{const{data:ns,error:is}=await this._getUser(e.access_token);if(is)throw is;ss={access_token:e.access_token,refresh_token:e.refresh_token,user:ns.user,token_type:"bearer",expires_in:es-St,expires_at:es},await this._saveSession(ss),await this._notifyAllSubscribers("SIGNED_IN",ss)}return{data:{user:ss.user,session:ss},error:null}}catch(St){if(isAuthError(St))return{data:{session:null,user:null},error:St};throw St}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async St=>{var es;if(!e){const{data:rs,error:ns}=St;if(ns)throw ns;e=(es=rs.session)!==null&&es!==void 0?es:void 0}if(!(e!=null&&e.refresh_token))throw new AuthSessionMissingError;const{session:ts,error:ss}=await this._callRefreshToken(e.refresh_token);return ss?{data:{user:null,session:null},error:ss}:ts?{data:{user:ts.user,session:ts},error:null}:{data:{user:null,session:null},error:null}})}catch(St){if(isAuthError(St))return{data:{user:null,session:null},error:St};throw St}}async _getSessionFromURL(e,St){try{if(!isBrowser())throw new AuthImplicitGrantRedirectError("No browser detected.");if(e.error||e.error_description||e.error_code)throw new AuthImplicitGrantRedirectError(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(St){case"implicit":if(this.flowType==="pkce")throw new AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");break;default:}if(St==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new AuthPKCEGrantCodeExchangeError("No code detected.");const{data:fs,error:Es}=await this._exchangeCodeForSession(e.code);if(Es)throw Es;const Os=new URL(window.location.href);return Os.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Os.toString()),{data:{session:fs.session,redirectType:null},error:null}}const{provider_token:es,provider_refresh_token:ts,access_token:ss,refresh_token:rs,expires_in:ns,expires_at:is,token_type:os}=e;if(!ss||!ns||!rs||!os)throw new AuthImplicitGrantRedirectError("No session defined in URL");const us=Math.round(Date.now()/1e3),ps=parseInt(ns);let xs=us+ps;is&&(xs=parseInt(is));const cs=xs-us;cs*1e3<=AUTO_REFRESH_TICK_DURATION_MS&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${cs}s, should have been closer to ${ps}s`);const ys=xs-ps;us-ys>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",ys,xs,us):us-ys<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",ys,xs,us);const{data:gs,error:vs}=await this._getUser(ss);if(vs)throw vs;const ds={provider_token:es,provider_refresh_token:ts,access_token:ss,expires_in:ps,expires_at:xs,refresh_token:rs,token_type:os,user:gs.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ds,redirectType:e.type},error:null}}catch(es){if(isAuthError(es))return{data:{session:null,redirectType:null},error:es};throw es}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const St=await getItemAsync(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&St)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async St=>{var es;const{data:ts,error:ss}=St;if(ss)return{error:ss};const rs=(es=ts.session)===null||es===void 0?void 0:es.access_token;if(rs){const{error:ns}=await this.admin.signOut(rs,e);if(ns&&!(isAuthApiError(ns)&&(ns.status===404||ns.status===401||ns.status===403)))return{error:ns}}return e!=="others"&&(await this._removeSession(),await removeItemAsync(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const St=uuid(),es={id:St,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",St),this.stateChangeEmitters.delete(St)}};return this._debug("#onAuthStateChange()","registered callback with id",St),this.stateChangeEmitters.set(St,es),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(St)})))(),{data:{subscription:es}}}async _emitInitialSession(e){return await this._useSession(async St=>{var es,ts;try{const{data:{session:ss},error:rs}=St;if(rs)throw rs;await((es=this.stateChangeEmitters.get(e))===null||es===void 0?void 0:es.callback("INITIAL_SESSION",ss)),this._debug("INITIAL_SESSION","callback id",e,"session",ss)}catch(ss){await((ts=this.stateChangeEmitters.get(e))===null||ts===void 0?void 0:ts.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",ss),console.error(ss)}})}async resetPasswordForEmail(e,St={}){let es=null,ts=null;this.flowType==="pkce"&&([es,ts]=await getCodeChallengeAndMethod(this.storage,this.storageKey,!0));try{return await _request(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:es,code_challenge_method:ts,gotrue_meta_security:{captcha_token:St.captchaToken}},headers:this.headers,redirectTo:St.redirectTo})}catch(ss){if(isAuthError(ss))return{data:null,error:ss};throw ss}}async getUserIdentities(){var e;try{const{data:St,error:es}=await this.getUser();if(es)throw es;return{data:{identities:(e=St.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}async linkIdentity(e){var St;try{const{data:es,error:ts}=await this._useSession(async ss=>{var rs,ns,is,os,us;const{data:ps,error:xs}=ss;if(xs)throw xs;const cs=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(rs=e.options)===null||rs===void 0?void 0:rs.redirectTo,scopes:(ns=e.options)===null||ns===void 0?void 0:ns.scopes,queryParams:(is=e.options)===null||is===void 0?void 0:is.queryParams,skipBrowserRedirect:!0});return await _request(this.fetch,"GET",cs,{headers:this.headers,jwt:(us=(os=ps.session)===null||os===void 0?void 0:os.access_token)!==null&&us!==void 0?us:void 0})});if(ts)throw ts;return isBrowser()&&!(!((St=e.options)===null||St===void 0)&&St.skipBrowserRedirect)&&window.location.assign(es==null?void 0:es.url),{data:{provider:e.provider,url:es==null?void 0:es.url},error:null}}catch(es){if(isAuthError(es))return{data:{provider:e.provider,url:null},error:es};throw es}}async unlinkIdentity(e){try{return await this._useSession(async St=>{var es,ts;const{data:ss,error:rs}=St;if(rs)throw rs;return await _request(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(ts=(es=ss.session)===null||es===void 0?void 0:es.access_token)!==null&&ts!==void 0?ts:void 0})})}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}async _refreshAccessToken(e){const St=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(St,"begin");try{const es=Date.now();return await retryable(async ts=>(ts>0&&await sleep(200*Math.pow(2,ts-1)),this._debug(St,"refreshing attempt",ts),await _request(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_sessionResponse})),(ts,ss)=>{const rs=200*Math.pow(2,ts);return ss&&isAuthRetryableFetchError(ss)&&Date.now()+rs-es<AUTO_REFRESH_TICK_DURATION_MS})}catch(es){if(this._debug(St,"error",es),isAuthError(es))return{data:{session:null,user:null},error:es};throw es}finally{this._debug(St,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,St){const es=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:St.redirectTo,scopes:St.scopes,queryParams:St.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",St,"url",es),isBrowser()&&!St.skipBrowserRedirect&&window.location.assign(es),{data:{provider:e,url:es},error:null}}async _recoverAndRefresh(){var e,St;const es="#_recoverAndRefresh()";this._debug(es,"begin");try{const ts=await getItemAsync(this.storage,this.storageKey);if(ts&&this.userStorage){let rs=await getItemAsync(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!rs&&(rs={user:ts.user},await setItemAsync(this.userStorage,this.storageKey+"-user",rs)),ts.user=(e=rs==null?void 0:rs.user)!==null&&e!==void 0?e:userNotAvailableProxy()}else if(ts&&!ts.user&&!ts.user){const rs=await getItemAsync(this.storage,this.storageKey+"-user");rs&&(rs!=null&&rs.user)?(ts.user=rs.user,await removeItemAsync(this.storage,this.storageKey+"-user"),await setItemAsync(this.storage,this.storageKey,ts)):ts.user=userNotAvailableProxy()}if(this._debug(es,"session from storage",ts),!this._isValidSession(ts)){this._debug(es,"session is not valid"),ts!==null&&await this._removeSession();return}const ss=((St=ts.expires_at)!==null&&St!==void 0?St:1/0)*1e3-Date.now()<EXPIRY_MARGIN_MS;if(this._debug(es,`session has${ss?"":" not"} expired with margin of ${EXPIRY_MARGIN_MS}s`),ss){if(this.autoRefreshToken&&ts.refresh_token){const{error:rs}=await this._callRefreshToken(ts.refresh_token);rs&&(console.error(rs),isAuthRetryableFetchError(rs)||(this._debug(es,"refresh failed with a non-retryable error, removing the session",rs),await this._removeSession()))}}else if(ts.user&&ts.user.__isUserNotAvailableProxy===!0)try{const{data:rs,error:ns}=await this._getUser(ts.access_token);!ns&&(rs!=null&&rs.user)?(ts.user=rs.user,await this._saveSession(ts),await this._notifyAllSubscribers("SIGNED_IN",ts)):this._debug(es,"could not get user data, skipping SIGNED_IN notification")}catch(rs){console.error("Error getting user data:",rs),this._debug(es,"error getting user data, skipping SIGNED_IN notification",rs)}else await this._notifyAllSubscribers("SIGNED_IN",ts)}catch(ts){this._debug(es,"error",ts),console.error(ts);return}finally{this._debug(es,"end")}}async _callRefreshToken(e){var St,es;if(!e)throw new AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const ts=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(ts,"begin");try{this.refreshingDeferred=new Deferred;const{data:ss,error:rs}=await this._refreshAccessToken(e);if(rs)throw rs;if(!ss.session)throw new AuthSessionMissingError;await this._saveSession(ss.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",ss.session);const ns={session:ss.session,error:null};return this.refreshingDeferred.resolve(ns),ns}catch(ss){if(this._debug(ts,"error",ss),isAuthError(ss)){const rs={session:null,error:ss};return isAuthRetryableFetchError(ss)||await this._removeSession(),(St=this.refreshingDeferred)===null||St===void 0||St.resolve(rs),rs}throw(es=this.refreshingDeferred)===null||es===void 0||es.reject(ss),ss}finally{this.refreshingDeferred=null,this._debug(ts,"end")}}async _notifyAllSubscribers(e,St,es=!0){const ts=`#_notifyAllSubscribers(${e})`;this._debug(ts,"begin",St,`broadcast = ${es}`);try{this.broadcastChannel&&es&&this.broadcastChannel.postMessage({event:e,session:St});const ss=[],rs=Array.from(this.stateChangeEmitters.values()).map(async ns=>{try{await ns.callback(e,St)}catch(is){ss.push(is)}});if(await Promise.all(rs),ss.length>0){for(let ns=0;ns<ss.length;ns+=1)console.error(ss[ns]);throw ss[0]}}finally{this._debug(ts,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const St=Object.assign({},e),es=St.user&&St.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!es&&St.user&&await setItemAsync(this.userStorage,this.storageKey+"-user",{user:St.user});const ts=Object.assign({},St);delete ts.user;const ss=deepClone(ts);await setItemAsync(this.storage,this.storageKey,ss)}else{const ts=deepClone(St);await setItemAsync(this.storage,this.storageKey,ts)}}async _removeSession(){this._debug("#_removeSession()"),await removeItemAsync(this.storage,this.storageKey),await removeItemAsync(this.storage,this.storageKey+"-code-verifier"),await removeItemAsync(this.storage,this.storageKey+"-user"),this.userStorage&&await removeItemAsync(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&isBrowser()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(St){console.error("removing visibilitychange callback failed",St)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),AUTO_REFRESH_TICK_DURATION_MS);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async St=>{const{data:{session:es}}=St;if(!es||!es.refresh_token||!es.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const ts=Math.floor((es.expires_at*1e3-e)/AUTO_REFRESH_TICK_DURATION_MS);this._debug("#_autoRefreshTokenTick()",`access token expires in ${ts} ticks, a tick lasts ${AUTO_REFRESH_TICK_DURATION_MS}ms, refresh threshold is ${AUTO_REFRESH_TICK_THRESHOLD} ticks`),ts<=AUTO_REFRESH_TICK_THRESHOLD&&await this._callRefreshToken(es.refresh_token)})}catch(St){console.error("Auto refresh tick failed with error. This is likely a transient error.",St)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof LockAcquireTimeoutError)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!isBrowser()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const St=`#_onVisibilityChanged(${e})`;this._debug(St,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(St,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,St,es){const ts=[`provider=${encodeURIComponent(St)}`];if(es!=null&&es.redirectTo&&ts.push(`redirect_to=${encodeURIComponent(es.redirectTo)}`),es!=null&&es.scopes&&ts.push(`scopes=${encodeURIComponent(es.scopes)}`),this.flowType==="pkce"){const[ss,rs]=await getCodeChallengeAndMethod(this.storage,this.storageKey),ns=new URLSearchParams({code_challenge:`${encodeURIComponent(ss)}`,code_challenge_method:`${encodeURIComponent(rs)}`});ts.push(ns.toString())}if(es!=null&&es.queryParams){const ss=new URLSearchParams(es.queryParams);ts.push(ss.toString())}return es!=null&&es.skipBrowserRedirect&&ts.push(`skip_http_redirect=${es.skipBrowserRedirect}`),`${e}?${ts.join("&")}`}async _unenroll(e){try{return await this._useSession(async St=>{var es;const{data:ts,error:ss}=St;return ss?{data:null,error:ss}:await _request(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(es=ts==null?void 0:ts.session)===null||es===void 0?void 0:es.access_token})})}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}async _enroll(e){try{return await this._useSession(async St=>{var es,ts;const{data:ss,error:rs}=St;if(rs)return{data:null,error:rs};const ns=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:is,error:os}=await _request(this.fetch,"POST",`${this.url}/factors`,{body:ns,headers:this.headers,jwt:(es=ss==null?void 0:ss.session)===null||es===void 0?void 0:es.access_token});return os?{data:null,error:os}:(e.factorType==="totp"&&(!((ts=is==null?void 0:is.totp)===null||ts===void 0)&&ts.qr_code)&&(is.totp.qr_code=`data:image/svg+xml;utf-8,${is.totp.qr_code}`),{data:is,error:null})})}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async St=>{var es;const{data:ts,error:ss}=St;if(ss)return{data:null,error:ss};const{data:rs,error:ns}=await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(es=ts==null?void 0:ts.session)===null||es===void 0?void 0:es.access_token});return ns?{data:null,error:ns}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+rs.expires_in},rs)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",rs),{data:rs,error:ns})})}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async St=>{var es;const{data:ts,error:ss}=St;return ss?{data:null,error:ss}:await _request(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(es=ts==null?void 0:ts.session)===null||es===void 0?void 0:es.access_token})})}catch(St){if(isAuthError(St))return{data:null,error:St};throw St}})}async _challengeAndVerify(e){const{data:St,error:es}=await this._challenge({factorId:e.factorId});return es?{data:null,error:es}:await this._verify({factorId:e.factorId,challengeId:St.id,code:e.code})}async _listFactors(){const{data:{user:e},error:St}=await this.getUser();if(St)return{data:null,error:St};const es=(e==null?void 0:e.factors)||[],ts=es.filter(rs=>rs.factor_type==="totp"&&rs.status==="verified"),ss=es.filter(rs=>rs.factor_type==="phone"&&rs.status==="verified");return{data:{all:es,totp:ts,phone:ss},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var St,es;const{data:{session:ts},error:ss}=e;if(ss)return{data:null,error:ss};if(!ts)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:rs}=decodeJWT(ts.access_token);let ns=null;rs.aal&&(ns=rs.aal);let is=ns;((es=(St=ts.user.factors)===null||St===void 0?void 0:St.filter(ps=>ps.status==="verified"))!==null&&es!==void 0?es:[]).length>0&&(is="aal2");const us=rs.amr||[];return{data:{currentLevel:ns,nextLevel:is,currentAuthenticationMethods:us},error:null}}))}async fetchJwk(e,St={keys:[]}){let es=St.keys.find(ns=>ns.kid===e);if(es)return es;const ts=Date.now();if(es=this.jwks.keys.find(ns=>ns.kid===e),es&&this.jwks_cached_at+JWKS_TTL>ts)return es;const{data:ss,error:rs}=await _request(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(rs)throw rs;return!ss.keys||ss.keys.length===0||(this.jwks=ss,this.jwks_cached_at=ts,es=ss.keys.find(ns=>ns.kid===e),!es)?null:es}async getClaims(e,St={}){try{let es=e;if(!es){const{data:cs,error:ys}=await this.getSession();if(ys||!cs.session)return{data:null,error:ys};es=cs.session.access_token}const{header:ts,payload:ss,signature:rs,raw:{header:ns,payload:is}}=decodeJWT(es);St!=null&&St.allowExpired||validateExp(ss.exp);const os=!ts.alg||ts.alg.startsWith("HS")||!ts.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(ts.kid,St!=null&&St.keys?{keys:St.keys}:St==null?void 0:St.jwks);if(!os){const{error:cs}=await this.getUser(es);if(cs)throw cs;return{data:{claims:ss,header:ts,signature:rs},error:null}}const us=getAlgorithm(ts.alg),ps=await crypto.subtle.importKey("jwk",os,us,!0,["verify"]);if(!await crypto.subtle.verify(us,ps,rs,stringToUint8Array(`${ns}.${is}`)))throw new AuthInvalidJwtError("Invalid JWT signature");return{data:{claims:ss,header:ts,signature:rs},error:null}}catch(es){if(isAuthError(es))return{data:null,error:es};throw es}}}GoTrueClient.nextInstanceID=0;const AuthClient=GoTrueClient;class SupabaseAuthClient extends AuthClient{constructor(e){super(e)}}var __awaiter=globalThis&&globalThis.__awaiter||function(_e,e,St,es){function ts(ss){return ss instanceof St?ss:new St(function(rs){rs(ss)})}return new(St||(St=Promise))(function(ss,rs){function ns(us){try{os(es.next(us))}catch(ps){rs(ps)}}function is(us){try{os(es.throw(us))}catch(ps){rs(ps)}}function os(us){us.done?ss(us.value):ts(us.value).then(ns,is)}os((es=es.apply(_e,e||[])).next())})};class SupabaseClient{constructor(e,St,es){var ts,ss,rs;if(this.supabaseUrl=e,this.supabaseKey=St,!e)throw new Error("supabaseUrl is required.");if(!St)throw new Error("supabaseKey is required.");const ns=ensureTrailingSlash(e),is=new URL(ns);this.realtimeUrl=new URL("realtime/v1",is),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",is),this.storageUrl=new URL("storage/v1",is),this.functionsUrl=new URL("functions/v1",is);const os=`sb-${is.hostname.split(".")[0]}-auth-token`,us={db:DEFAULT_DB_OPTIONS,realtime:DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},DEFAULT_AUTH_OPTIONS),{storageKey:os}),global:DEFAULT_GLOBAL_OPTIONS},ps=applySettingDefaults(es??{},us);this.storageKey=(ts=ps.auth.storageKey)!==null&&ts!==void 0?ts:"",this.headers=(ss=ps.global.headers)!==null&&ss!==void 0?ss:{},ps.accessToken?(this.accessToken=ps.accessToken,this.auth=new Proxy({},{get:(xs,cs)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(cs)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((rs=ps.auth)!==null&&rs!==void 0?rs:{},this.headers,ps.global.fetch),this.fetch=fetchWithAuth(St,this._getAccessToken.bind(this),ps.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},ps.realtime)),this.rest=new PostgrestClient(new URL("rest/v1",is).href,{headers:this.headers,schema:ps.db.schema,fetch:this.fetch}),this.storage=new StorageClient(this.storageUrl.href,this.headers,this.fetch,es==null?void 0:es.storage),ps.accessToken||this._listenForAuthEvents()}get functions(){return new FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,St={},es={}){return this.rest.rpc(e,St,es)}channel(e,St={config:{}}){return this.realtime.channel(e,St)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,St;return __awaiter(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:es}=yield this.auth.getSession();return(St=(e=es.session)===null||e===void 0?void 0:e.access_token)!==null&&St!==void 0?St:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:St,detectSessionInUrl:es,storage:ts,userStorage:ss,storageKey:rs,flowType:ns,lock:is,debug:os},us,ps){const xs={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},xs),us),storageKey:rs,autoRefreshToken:e,persistSession:St,detectSessionInUrl:es,storage:ts,userStorage:ss,flowType:ns,lock:is,debug:os,fetch:ps,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((St,es)=>{this._handleTokenChanged(St,"CLIENT",es==null?void 0:es.access_token)})}_handleTokenChanged(e,St,es){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==es?this.changedAccessToken=es:e==="SIGNED_OUT"&&(this.realtime.setAuth(),St=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const createClient=(_e,e,St)=>new SupabaseClient(_e,e,St);function shouldShowDeprecationWarning(){if(typeof window<"u"||typeof process>"u")return!1;const _e=process.version;if(_e==null)return!1;const e=_e.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}shouldShowDeprecationWarning()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const supabaseUrl$1={}.VITE_SUPABASE_URL||"https://your-project.supabase.co",supabaseAnonKey={}.VITE_SUPABASE_ANON_KEY||"your-anon-key",supabase=createClient(supabaseUrl$1,supabaseAnonKey),TABLES={COMPANIES:"companies",USERS:"users",DEPARTMENTS:"departments",STAFF:"staff",REFRIGERATORS:"refrigerators",TEMPERATURES:"temperatures",CLEANING:"cleaning",INVENTORY:"inventory",PRODUCT_LABELS:"product_labels",ONBOARDING:"onboarding",MAINTENANCE_TASKS:"maintenance_tasks"},createCompanyStructure=_e=>({id:_e,name:"",type:"",address:"",email:"",phone:"",vat_number:"",settings:{allow_photo_storage:!0,max_users:25,plan:"free",features:{inventory_sync:!0,temperature_sync:!0,staff_sync:!0,label_sync:!1}},created_at:new Date().toISOString(),updated_at:new Date().toISOString(),last_sync:null}),supabaseUrl={}.VITE_SUPABASE_URL||"https://your-project.supabase.co";class SupabaseService{constructor(){this.companyId=this.getCompanyId()}getCompanyId(){let e=localStorage.getItem("haccp-company-id");return e||(e=`company_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,localStorage.setItem("haccp-company-id",e)),e}handleError(e,St){return console.error(` Supabase ${St} error:`,e),{success:!1,error:e.message,data:null}}handleSuccess(e,St){return console.log(` Supabase ${St} success:`,e),{success:!0,error:null,data:e}}async createCompany(e){try{const St={...createCompanyStructure(this.companyId),...e,id:this.companyId},{data:es,error:ts}=await supabase.from(TABLES.COMPANIES).insert([St]).select();if(ts)throw ts;return this.handleSuccess(es[0],"createCompany")}catch(St){return this.handleError(St,"createCompany")}}async getCompany(){try{const{data:e,error:St}=await supabase.from(TABLES.COMPANIES).select("*").eq("id",this.companyId).single();if(St&&St.code!=="PGRST116")throw St;return this.handleSuccess(e,"getCompany")}catch(e){return this.handleError(e,"getCompany")}}async saveUsers(e){try{const{data:St,error:es}=await supabase.from(TABLES.USERS).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveUsers")}catch(St){return this.handleError(St,"saveUsers")}}async getUsers(){try{const{data:e,error:St}=await supabase.from(TABLES.USERS).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getUsers")}catch(e){return this.handleError(e,"getUsers")}}async saveDepartments(e){try{const{data:St,error:es}=await supabase.from(TABLES.DEPARTMENTS).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveDepartments")}catch(St){return this.handleError(St,"saveDepartments")}}async getDepartments(){try{const{data:e,error:St}=await supabase.from(TABLES.DEPARTMENTS).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getDepartments")}catch(e){return this.handleError(e,"getDepartments")}}async saveStaff(e){try{const{data:St,error:es}=await supabase.from(TABLES.STAFF).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveStaff")}catch(St){return this.handleError(St,"saveStaff")}}async getStaff(){try{const{data:e,error:St}=await supabase.from(TABLES.STAFF).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getStaff")}catch(e){return this.handleError(e,"getStaff")}}async saveRefrigerators(e){try{const{data:St,error:es}=await supabase.from(TABLES.REFRIGERATORS).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveRefrigerators")}catch(St){return this.handleError(St,"saveRefrigerators")}}async getRefrigerators(){try{const{data:e,error:St}=await supabase.from(TABLES.REFRIGERATORS).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getRefrigerators")}catch(e){return this.handleError(e,"getRefrigerators")}}async saveTemperatures(e){try{const{data:St,error:es}=await supabase.from(TABLES.TEMPERATURES).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveTemperatures")}catch(St){return this.handleError(St,"saveTemperatures")}}async getTemperatures(){try{const{data:e,error:St}=await supabase.from(TABLES.TEMPERATURES).select("*").eq("company_id",this.companyId).order("timestamp",{ascending:!1});if(St)throw St;return this.handleSuccess(e||[],"getTemperatures")}catch(e){return this.handleError(e,"getTemperatures")}}async saveCleaning(e){try{const{data:St,error:es}=await supabase.from(TABLES.CLEANING).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveCleaning")}catch(St){return this.handleError(St,"saveCleaning")}}async getCleaning(){try{const{data:e,error:St}=await supabase.from(TABLES.CLEANING).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getCleaning")}catch(e){return this.handleError(e,"getCleaning")}}async saveInventory(e){try{const{data:St,error:es}=await supabase.from(TABLES.INVENTORY).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveInventory")}catch(St){return this.handleError(St,"saveInventory")}}async getInventory(){try{const{data:e,error:St}=await supabase.from(TABLES.INVENTORY).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getInventory")}catch(e){return this.handleError(e,"getInventory")}}async saveOnboarding(e){try{const{data:St,error:es}=await supabase.from(TABLES.ONBOARDING).upsert([{id:this.companyId,company_id:this.companyId,data:e,completed:!0,completed_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select();if(es)throw es;return this.handleSuccess(St[0],"saveOnboarding")}catch(St){return this.handleError(St,"saveOnboarding")}}async getOnboarding(){try{const{data:e,error:St}=await supabase.from(TABLES.ONBOARDING).select("*").eq("company_id",this.companyId).single();if(St&&St.code!=="PGRST116")throw St;return this.handleSuccess(e,"getOnboarding")}catch(e){return this.handleError(e,"getOnboarding")}}async saveMaintenanceTasks(e){try{if(!supabase||supabaseUrl.includes("your-project.supabase.co")){console.warn(" Supabase non configurato, salvataggio in localStorage");const ts=JSON.parse(localStorage.getItem("haccp-maintenance-tasks")||"[]"),ss=e.map(ns=>({...ns,company_id:this.companyId,updated_at:new Date().toISOString()})),rs=[...ts.filter(ns=>!e.some(is=>is.conservation_point_id===ns.conservation_point_id)),...ss];return localStorage.setItem("haccp-maintenance-tasks",JSON.stringify(rs)),this.handleSuccess(ss,"saveMaintenanceTasks (localStorage)")}const{data:St,error:es}=await supabase.from(TABLES.MAINTENANCE_TASKS).upsert(e.map(ts=>({...ts,company_id:this.companyId,updated_at:new Date().toISOString()}))).select();if(es)throw es;return this.handleSuccess(St,"saveMaintenanceTasks")}catch(St){return this.handleError(St,"saveMaintenanceTasks")}}async getMaintenanceTasks(){try{if(!supabase||supabaseUrl.includes("your-project.supabase.co")){console.warn(" Supabase non configurato, caricamento da localStorage");const ts=JSON.parse(localStorage.getItem("haccp-maintenance-tasks")||"[]").filter(ss=>ss.company_id===this.companyId);return this.handleSuccess(ts,"getMaintenanceTasks (localStorage)")}const{data:e,error:St}=await supabase.from(TABLES.MAINTENANCE_TASKS).select("*").eq("company_id",this.companyId).order("created_at",{ascending:!0});if(St)throw St;return this.handleSuccess(e||[],"getMaintenanceTasks")}catch(e){return this.handleError(e,"getMaintenanceTasks")}}async getMaintenanceTasksByConservationPoint(e){try{if(!supabase||supabaseUrl.includes("your-project.supabase.co")){console.warn(" Supabase non configurato, caricamento da localStorage");const ss=JSON.parse(localStorage.getItem("haccp-maintenance-tasks")||"[]").filter(rs=>rs.company_id===this.companyId&&rs.conservation_point_id===e);return this.handleSuccess(ss,"getMaintenanceTasksByConservationPoint (localStorage)")}const{data:St,error:es}=await supabase.from(TABLES.MAINTENANCE_TASKS).select("*").eq("company_id",this.companyId).eq("conservation_point_id",e).order("created_at",{ascending:!0});if(es)throw es;return this.handleSuccess(St||[],"getMaintenanceTasksByConservationPoint")}catch(St){return this.handleError(St,"getMaintenanceTasksByConservationPoint")}}async deleteMaintenanceTasksByConservationPoint(e){try{if(!supabase||supabaseUrl.includes("your-project.supabase.co")){console.warn(" Supabase non configurato, eliminazione da localStorage");const ss=JSON.parse(localStorage.getItem("haccp-maintenance-tasks")||"[]").filter(rs=>!(rs.company_id===this.companyId&&rs.conservation_point_id===e));return localStorage.setItem("haccp-maintenance-tasks",JSON.stringify(ss)),this.handleSuccess(ss,"deleteMaintenanceTasksByConservationPoint (localStorage)")}const{data:St,error:es}=await supabase.from(TABLES.MAINTENANCE_TASKS).delete().eq("company_id",this.companyId).eq("conservation_point_id",e);if(es)throw es;return this.handleSuccess(St,"deleteMaintenanceTasksByConservationPoint")}catch(St){return this.handleError(St,"deleteMaintenanceTasksByConservationPoint")}}async migrateFromLocalStorage(){try{console.log(" Starting migration from localStorage to Supabase...");const e={users:JSON.parse(localStorage.getItem("haccp-users")||"[]"),departments:JSON.parse(localStorage.getItem("haccp-departments")||"[]"),staff:JSON.parse(localStorage.getItem("haccp-staff")||"[]"),refrigerators:JSON.parse(localStorage.getItem("haccp-refrigerators")||"[]"),temperatures:JSON.parse(localStorage.getItem("haccp-temperatures")||"[]"),cleaning:JSON.parse(localStorage.getItem("haccp-cleaning")||"[]"),products:JSON.parse(localStorage.getItem("haccp-products")||"[]"),onboarding:JSON.parse(localStorage.getItem("haccp-onboarding")||"null")},St=await this.getCompany();(!St.success||!St.data)&&await this.createCompany({name:"Migrated Company",type:"pizzeria"});const es=[];e.users.length>0&&es.push(this.saveUsers(e.users)),e.departments.length>0&&es.push(this.saveDepartments(e.departments)),e.staff.length>0&&es.push(this.saveStaff(e.staff)),e.refrigerators.length>0&&es.push(this.saveRefrigerators(e.refrigerators)),e.temperatures.length>0&&es.push(this.saveTemperatures(e.temperatures)),e.cleaning.length>0&&es.push(this.saveCleaning(e.cleaning)),e.products.length>0&&es.push(this.saveInventory(e.products)),e.onboarding&&es.push(this.saveOnboarding(e.onboarding));const ts=await Promise.all(es),ss=ts.filter(ns=>!ns.success);return ss.length>0?(console.error(" Some migrations failed:",ss),this.handleError(new Error("Migration failed"),"migrateFromLocalStorage")):(["haccp-users","haccp-departments","haccp-staff","haccp-refrigerators","haccp-temperatures","haccp-cleaning","haccp-products","haccp-onboarding"].forEach(ns=>localStorage.removeItem(ns)),console.log(" Migration completed successfully!"),this.handleSuccess(ts,"migrateFromLocalStorage"))}catch(e){return this.handleError(e,"migrateFromLocalStorage")}}}const supabaseService=new SupabaseService,STORAGE_CATEGORIES=CONSERVATION_POINT_RULES.categories;function PuntidiConservazione({temperatures:_e,setTemperatures:e,currentUser:St,refrigerators:es,setRefrigerators:ts,departments:ss,setDepartments:rs}){var Kr;const[ns,is]=reactExports.useState(!1),[os,us]=reactExports.useState(!1),[ps,xs]=reactExports.useState(null),[cs,ys]=reactExports.useState({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[],maintenanceData:{}}),[gs,vs]=reactExports.useState(""),[ds,fs]=reactExports.useState(null),[Es,Os]=reactExports.useState(!1),[Hs,Qs]=reactExports.useState(null),[zs,Ls]=reactExports.useState([]),[Bs,Gs]=reactExports.useState([]),[bs,As]=reactExports.useState(!1),[ks,$s]=reactExports.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:"",isAmbiente:!1}),[qs,Cs]=reactExports.useState(!1),[Us,Ps]=reactExports.useState(""),er=[...STORAGE_CATEGORIES,...Bs],tr=_s=>{Ps(_s),Cs(!0)},vr=_s=>{ys(Ks=>{const yr=Ks.selectedCategories||[];return yr.includes(_s)?{...Ks,selectedCategories:yr.filter(Or=>Or!==_s)}:yr.length<5?{...Ks,selectedCategories:[...yr,_s]}:(alert("Puoi selezionare al massimo 5 categorie"),Ks)})},ws=(_s,Ks=[])=>{let yr,Ur=!1;if(_s.toLowerCase().trim()==="ambiente"?(yr=20,Ur=!0):yr=parseFloat(_s),isNaN(yr))return{compliant:!1,message:"Temperatura non valida",type:"error"};if(Ks.length>0){const Or=CONSERVATION_POINT_RULES.tolerance;let Ir=!1;for(let nn=0;nn<Ks.length;nn++){for(let tn=nn+1;tn<Ks.length;tn++){let en=CONSERVATION_POINT_RULES.categories.find(Qr=>Qr.id===Ks[nn]);en||(en=Bs.find(Qr=>Qr.id===Ks[nn]));let un=CONSERVATION_POINT_RULES.categories.find(Qr=>Qr.id===Ks[tn]);if(un||(un=Bs.find(Qr=>Qr.id===Ks[tn])),en&&un){const Qr=(en.minTemp||en.temperatureMin)-Or,Un=(en.maxTemp||en.temperatureMax)+Or,Sn=(un.minTemp||un.temperatureMin)-Or,Hn=(un.maxTemp||un.temperatureMax)+Or;if(Un<Sn||Hn<Qr){Ir=!0;break}}}if(Ir)break}if(Ir)return{compliant:!1,message:" Categorie incompatibili selezionate",type:"error",color:"red"};let kr=!1,Zr=!1,Gr=null;for(const nn of Ks){let tn=CONSERVATION_POINT_RULES.categories.find(en=>en.id===nn);if(tn||(tn=Bs.find(en=>en.id===nn)),tn){Gr||(Gr=tn);const en=tn.minTemp||tn.temperatureMin,un=tn.maxTemp||tn.temperatureMax;if(Ur){const Qr=Vs();if(en<=Qr.max&&un>=Qr.min){kr=!0;break}}else if(yr>=en&&yr<=un){kr=!0;break}}}if(!kr)for(const nn of Ks){let tn=CONSERVATION_POINT_RULES.categories.find(en=>en.id===nn);if(tn||(tn=Bs.find(en=>en.id===nn)),tn){Gr||(Gr=tn);const en=tn.minTemp||tn.temperatureMin,un=tn.maxTemp||tn.temperatureMax,Qr=en-Or,Un=un+Or;if(Ur){const Sn=Vs(),Hn=Sn.min-Or,$n=Sn.max+Or;if(en<=$n&&un>=Hn){Zr=!0;break}}else if(yr>=Qr&&yr<=Un){Zr=!0;break}}}return kr?{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}:Zr?{compliant:!1,message:`La temperatura impostata  in tolleranza (fino a ${Or}C di differenza)`,type:"warning",color:"yellow"}:{compliant:!1,message:` Fuori range HACCP per ${(Gr==null?void 0:Gr.name)||"categorie selezionate"}`,type:"error",color:"red"}}return yr<-30||yr>80?{compliant:!1,message:"Range temperatura fuori limiti operativi",type:"error",color:"red"}:{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}},Vs=()=>({min:15,max:25,description:"Temperatura ambiente (15-25C)",isAmbiente:!0}),Ys=_s=>{let Ks=CONSERVATION_POINT_RULES.categories.find(yr=>yr.id===_s);return Ks?{min:Ks.minTemp,max:Ks.maxTemp}:(Ks=Bs.find(yr=>yr.id===_s),Ks?{min:Ks.temperatureMin,max:Ks.temperatureMax}:null)},Ws=_s=>{if(!_s||_s.length===0)return{message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"};const Ks=[];if(_s.forEach(Or=>{const Ir=Ys(Or);if(Ir){const kr=er.find(Zr=>Zr.id===Or);Ks.push({name:(kr==null?void 0:kr.name)||Or,min:Ir.min,max:Ir.max})}}),Ks.length===0)return{message:"Nessuna informazione di temperatura disponibile per le categorie selezionate"};const yr=Math.max(...Ks.map(Or=>Or.min)),Ur=Math.min(...Ks.map(Or=>Or.max));return yr<=Ur?{compatible:!0,message:`Range ottimale per le categorie selezionate: da ${yr}C a ${Ur}C`}:{compatible:!1,message:" Conflitto di temperature: Le categorie selezionate hanno range incompatibili. Verifica i requisiti HACCP."}},sr=(_s,Ks,yr)=>{if(Ks.includes(_s))return"selected";if(!yr||yr.trim()==="")return"neutral";let Ur,Or=!1;if(yr.toLowerCase().trim()==="ambiente"?(Ur=20,Or=!0):Ur=parseFloat(yr),isNaN(Ur))return"neutral";let Ir=CONSERVATION_POINT_RULES.categories.find(en=>en.id===_s);if(Ir||(Ir=Bs.find(en=>en.id===_s)),!Ir)return"neutral";const kr=CONSERVATION_POINT_RULES.tolerance,Zr=(Ir.minTemp||Ir.temperatureMin)-kr,Gr=(Ir.maxTemp||Ir.temperatureMax)+kr,nn=Ir.minTemp||Ir.temperatureMin,tn=Ir.maxTemp||Ir.temperatureMax;if(Or){const en=Vs();return nn<=en.max&&tn>=en.min?"compatible":"incompatible"}else if(Ur>=nn&&Ur<=tn){if(Ks.length===0)return"compatible";for(const en of Ks){let un=CONSERVATION_POINT_RULES.categories.find(Qr=>Qr.id===en);if(un||(un=Bs.find(Qr=>Qr.id===en)),un){const Qr=(un.minTemp||un.temperatureMin)-kr,Un=(un.maxTemp||un.temperatureMax)+kr;if(Qr<=Gr&&Un>=Zr)return"compatible"}}return"incompatible"}else if(Or){const en=Vs(),un=en.min-kr,Qr=en.max+kr;return nn<=Qr&&tn>=un?"tolerance":"incompatible"}else if(Ur>=Zr&&Ur<=Gr){if(Ks.length===0)return"tolerance";for(const en of Ks){let un=CONSERVATION_POINT_RULES.categories.find(Qr=>Qr.id===en);if(un||(un=Bs.find(Qr=>Qr.id===en)),un){const Qr=(un.minTemp||un.temperatureMin)-kr,Un=(un.maxTemp||un.temperatureMax)+kr;if(Qr<=Gr&&Un>=Zr)return"tolerance"}}return"incompatible"}return"incompatible"},nr=(_s,Ks)=>{const yr=[];return Ks.forEach(Ur=>{const Or=er.find(Ir=>Ir.id===Ur);if(Or){const Ir=Ys(Ur);if(Ir){const kr=_s.toLowerCase().trim()==="ambiente"?20:parseFloat(_s);if(!isNaN(kr)){const Zr=CONSERVATION_POINT_RULES.tolerance,Gr=Ir.min-Zr,nn=Ir.max+Zr;if(kr>=Ir.min&&kr<=Ir.max)return;kr>=Gr&&kr<=nn?yr.push({category:Or.name,optimal:`${Ir.min}-${Ir.max}C`,current:_s,severity:"warning",message:`Temperatura in tolleranza (fino a ${Zr}C di differenza)`}):yr.push({category:Or.name,optimal:`${Ir.min}-${Ir.max}C`,current:_s,severity:"error",message:"Temperatura fuori range HACCP"})}}}}),yr};reactExports.useEffect(()=>{const _s=localStorage.getItem("onboardingData");if(_s&&_s!=="[object Object]")try{const Ks=JSON.parse(_s);Qs(Ks),Ks.departments&&Array.isArray(Ks.departments)&&rs(Ks.departments),Ks.staff&&Array.isArray(Ks.staff)&&Ls(Ks.staff)}catch(Ks){console.error("Errore nel caricamento dei dati onboarding:",Ks)}},[]),reactExports.useEffect(()=>{const _s=localStorage.getItem("customStorageCategories");if(_s)try{Gs(JSON.parse(_s))}catch(Ks){console.error("Errore nel caricamento delle categorie personalizzate:",Ks)}},[]),reactExports.useEffect(()=>{localStorage.setItem("customStorageCategories",JSON.stringify(Bs))},[Bs]);const pr=()=>{if(!ks.name.trim()||!ks.description.trim()){alert("Nome e descrizione sono obbligatori");return}let _s,Ks;if(ks.isAmbiente)_s=15,Ks=25;else if(ks.temperatureMin&&ks.temperatureMax){if(_s=parseFloat(ks.temperatureMin),Ks=parseFloat(ks.temperatureMax),isNaN(_s)||isNaN(Ks)){alert("Inserisci temperature valide");return}if(_s>=Ks){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}}else _s=null,Ks=null;const yr={id:`custom_${Date.now()}`,name:ks.name.trim(),description:ks.description.trim(),temperatureMin:_s,temperatureMax:Ks,temperatureRange:ks.isAmbiente?"15-25C (Ambiente)":_s&&Ks?`${_s}-${Ks}C`:"",notes:ks.notes.trim(),isCustom:!0,isAmbiente:ks.isAmbiente,createdAt:new Date().toISOString()};Gs(Ur=>{const Or=[...Ur,yr];return console.log(" Categorie aggiornate:",Or),Or}),$s({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:"",isAmbiente:!1}),As(!1),alert(`Categoria "${yr.name}" aggiunta con successo!`)},xr=_s=>{confirm("Sei sicuro di voler eliminare questa categoria? I frigoriferi che la utilizzano non avranno pi una categoria assegnata.")&&(ts(Ks=>Ks.map(yr=>yr.dedicatedTo===_s?{...yr,dedicatedTo:""}:yr)),Gs(Ks=>Ks.filter(yr=>yr.id!==_s)))},Tr=_s=>{let Ks=0;if(typeof _s=="object"&&_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(typeof _s=="string"){const yr=_s.replace("C","").trim();Ks=parseFloat(yr)}else typeof _s=="number"&&(Ks=_s);return isNaN(Ks)?"N/A":Ks<-13.5&&Ks>=-80?"Abbattitore":Ks<-2.5&&Ks>=-13.5?"Freezer":Ks>=-2.5&&Ks<=0||Ks>0&&Ks<=14?"Frigo":Ks>=15&&Ks<=25?"Ambiente":"N/A"},Dr=_s=>{fs(_s),Os(!0)},zr=_s=>_e.filter(Ks=>Ks.location.toLowerCase().includes(_s.name.toLowerCase())).sort((Ks,yr)=>new Date(yr.timestamp)-new Date(Ks.timestamp)),or=async _s=>{if(_s.preventDefault(),!cs.name.trim()||!cs.setTemperature.trim()||!cs.location.trim()||!cs.selectedCategories||cs.selectedCategories.length===0)return;if(cs.maintenanceData){let Ir=!1;if(Object.values(MAINTENANCE_TASK_TYPES).forEach(kr=>{const Zr=cs.maintenanceData[kr];Zr&&(validateMaintenanceConfig(kr,Zr).isValid||(Ir=!0))}),Ir){alert("Configurazione manutenzione incompleta. Verifica che tutte e tre le attivit (Rilevamento Temperatura, Sanificazione, Sbrinamento) abbiano frequenza, ruolo e categoria assegnati.");return}}const Ks=es.find(Ir=>Ir.name.toLowerCase()===cs.name.trim().toLowerCase());if(Ks){alert(`Un punto di conservazione con questo nome esiste gi: "${Ks.name}" (creato il ${new Date(Ks.createdAt).toLocaleDateString("it-IT")}). Scegli un nome diverso.`);return}let yr,Ur="";if(cs.setTemperature.toLowerCase().trim()==="ambiente")yr=20,Ur="da 15C a 25C";else{if(yr=parseFloat(cs.setTemperature),isNaN(yr)){alert('Inserisci una temperatura valida o scrivi "ambiente" per temperatura ambiente');return}Ur=`${yr}C`}if(cs.selectedCategories&&cs.selectedCategories.length>0){const Ir=nr(cs.setTemperature,cs.selectedCategories);if(Ir.length>0){const kr=Ir.map(Gr=>` ${Gr.category}: ottimale ${Gr.optimal}, impostata ${Gr.current}`).join(`
`);if(!confirm(` ATTENZIONE: Conflitti temperatura-categorie rilevati!

Temperatura impostata: ${Ur}

Conflitti rilevati:
${kr}

Questa temperatura potrebbe non essere adatta per la conservazione ottimale di alcune categorie selezionate.

Vuoi continuare comunque?`))return}}const Or={id:Date.now(),name:cs.name.trim(),setTemperature:Ur,location:cs.location.trim(),dedicatedTo:cs.dedicatedTo.trim(),nextMaintenance:cs.nextMaintenance.trim(),selectedCategories:cs.selectedCategories||[],maintenanceData:cs.maintenanceData||{},createdAt:new Date().toISOString(),createdBy:(St==null?void 0:St.name)||"Unknown"};if(ts([...es,Or]),cs.maintenanceData&&Object.keys(cs.maintenanceData).length>0)try{const Ir=Object.values(MAINTENANCE_TASK_TYPES).map(Zr=>{const Gr=cs.maintenanceData[Zr];return{id:`${Or.id}_${Zr}_${Date.now()}`,company_id:supabaseService.getCompanyId(),conservation_point_id:Or.id,task_type:Zr,frequency:Gr.frequency,assigned_role:Gr.assigned_role,assigned_category:Gr.assigned_category,assigned_staff_ids:Gr.assigned_staff_ids||[],is_active:!0,created_at:new Date().toISOString()}}),kr=await supabaseService.saveMaintenanceTasks(Ir);kr.success?console.log(" Attivit di manutenzione salvate:",kr.data):console.error(" Errore nel salvataggio manutenzione:",kr.error)}catch(Ir){console.error(" Errore durante il salvataggio delle attivit di manutenzione:",Ir)}ys({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",selectedCategories:[],maintenanceData:{}}),is(!1)},Nr=async _s=>{if(confirm("Sei sicuro di voler eliminare questo punto di conservazione?")){try{const Ks=await supabaseService.deleteMaintenanceTasksByConservationPoint(_s);Ks.success?console.log(" Attivit di manutenzione eliminate per il punto:",_s):console.error(" Errore nell'eliminazione manutenzione:",Ks.error)}catch(Ks){console.error(" Errore durante l'eliminazione delle attivit di manutenzione:",Ks)}ts(es.filter(Ks=>Ks.id!==_s))}},cr=_s=>{xs(_s);let Ks="";if(_s.setTemperature){const yr=_s.setTemperature.toString();yr.includes("da 15C a 25C")?Ks="ambiente":Ks=yr.replace("C","").trim()}ys({name:_s.name,setTemperature:Ks,location:_s.location||"",dedicatedTo:_s.dedicatedTo||"",nextMaintenance:_s.nextMaintenance||"",selectedCategories:_s.selectedCategories||[],maintenanceData:_s.maintenanceData||{}}),us(!0)},Ns=async _s=>{if(_s.preventDefault(),!cs.name.trim()||!cs.setTemperature.trim()||!cs.location.trim()||!cs.selectedCategories||cs.selectedCategories.length===0)return;if(cs.maintenanceData){let Ir=!1;if(Object.values(MAINTENANCE_TASK_TYPES).forEach(kr=>{const Zr=cs.maintenanceData[kr];Zr&&(validateMaintenanceConfig(kr,Zr).isValid||(Ir=!0))}),Ir){alert("Configurazione manutenzione incompleta. Verifica che tutte e tre le attivit (Rilevamento Temperatura, Sanificazione, Sbrinamento) abbiano frequenza, ruolo e categoria assegnati.");return}}if(es.find(Ir=>Ir.id!==ps.id&&Ir.name.toLowerCase()===cs.name.trim().toLowerCase())){alert("Un punto di conservazione con questo nome esiste gi. Scegli un nome diverso.");return}let yr,Ur="";if(cs.setTemperature.toLowerCase().trim()==="ambiente")yr=20,Ur="da 15C a 25C";else{if(yr=parseFloat(cs.setTemperature),isNaN(yr)){alert('Inserisci una temperatura valida o scrivi "ambiente" per temperatura ambiente');return}Ur=`${yr}C`}if(cs.selectedCategories&&cs.selectedCategories.length>0){const Ir=nr(cs.setTemperature,cs.selectedCategories);if(Ir.length>0){const kr=Ir.map(Gr=>` ${Gr.category}: ottimale ${Gr.optimal}, impostata ${Gr.current}`).join(`
`);if(!confirm(` ATTENZIONE: Conflitti temperatura-categorie rilevati!

Temperatura impostata: ${Ur}

Conflitti rilevati:
${kr}

Questa temperatura potrebbe non essere adatta per la conservazione ottimale di alcune categorie selezionate.

Vuoi continuare comunque?`))return}}const Or={...ps,name:cs.name.trim(),setTemperature:Ur,location:cs.location.trim(),dedicatedTo:cs.dedicatedTo.trim(),nextMaintenance:cs.nextMaintenance.trim(),selectedCategories:cs.selectedCategories||[],maintenanceData:cs.maintenanceData||{},updatedAt:new Date().toISOString(),updatedBy:(St==null?void 0:St.name)||"Unknown"};if(ts(es.map(Ir=>Ir.id===ps.id?Or:Ir)),cs.maintenanceData&&Object.keys(cs.maintenanceData).length>0)try{await supabaseService.deleteMaintenanceTasksByConservationPoint(ps.id);const Ir=Object.values(MAINTENANCE_TASK_TYPES).map(Zr=>{const Gr=cs.maintenanceData[Zr];return{id:`${ps.id}_${Zr}_${Date.now()}`,company_id:supabaseService.getCompanyId(),conservation_point_id:ps.id,task_type:Zr,frequency:Gr.frequency,assigned_role:Gr.assigned_role,assigned_category:Gr.assigned_category,assigned_staff_ids:Gr.assigned_staff_ids||[],is_active:!0,created_at:new Date().toISOString()}}),kr=await supabaseService.saveMaintenanceTasks(Ir);kr.success?console.log(" Attivit di manutenzione aggiornate:",kr.data):console.error(" Errore nell'aggiornamento manutenzione:",kr.error)}catch(Ir){console.error(" Errore durante l'aggiornamento delle attivit di manutenzione:",Ir)}ys({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",selectedCategories:[],maintenanceData:{}}),xs(null),us(!1)},jr=_s=>_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0?`${_s.setTemperatureMin}-${_s.setTemperatureMax}C`:_s.setTemperature?_s.setTemperature:"N/A",wr=_s=>{if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)return(_s.setTemperatureMin+_s.setTemperatureMax)/2;if(_s.setTemperature){const Ks=_s.setTemperature.toString().replace("C","").trim();return parseFloat(Ks)}return 0},dr=_s=>{const Ks=_e.filter(Or=>Or.location.toLowerCase().includes(_s.name.toLowerCase())).sort((Or,Ir)=>new Date(Ir.timestamp)-new Date(Or.timestamp))[0];if(!Ks)return"no-data";const yr=wr(_s);if(isNaN(yr)||yr===0)return"no-data";const Ur=Math.abs(Ks.temperature-yr);return Ur<=1?"green":Ur<=1.5?"orange":Ur>=2?"red":"orange"},lr=_s=>{const Ks={green:"bg-green-500",orange:"bg-orange-500",red:"bg-red-500","no-data":"bg-gray-400"};return jsxRuntimeExports.jsx("div",{className:`w-3 h-3 rounded-full ${Ks[_s]}`})},_r=_s=>({green:"Temperatura OK",orange:"Attenzione",red:"Critica","no-data":"Nessun dato"})[_s],Ar=es.filter(_s=>_s.name.toLowerCase().includes(gs.toLowerCase())||_s.location.toLowerCase().includes(gs.toLowerCase())),Vr=_e.filter(_s=>es.some(Ks=>_s.location.toLowerCase().includes(Ks.name.toLowerCase()))).sort((_s,Ks)=>new Date(Ks.timestamp)-new Date(_s.timestamp));return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-5 w-5"}),"Punti di Conservazione"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>is(!0),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Aggiungi Punto di Conservazione"]})})]})}),jsxRuntimeExports.jsxs(CardContent,{children:[Bs.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-green-600",children:jsxRuntimeExports.jsx(Plus,{className:"h-5 w-5"})}),jsxRuntimeExports.jsx("h3",{className:"font-medium text-green-800",children:" Categorie Personalizzate"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded-full",children:[Bs.length," categoria",Bs.length===1?"a":"e"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Bs.map(_s=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-white border border-green-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-green-800",children:_s.name||"Categoria non disponibile"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700",children:_s.description}),_s.temperatureRange&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",_s.temperatureRange]}),_s.notes&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",_s.notes]})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>xr(_s.id),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Elimina categoria",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-green-500",children:["Creata il ",new Date(_s.createdAt).toLocaleDateString("it-IT")]})]},_s.id))})]}),es.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessun punto di conservazione registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Aggiungi il primo punto di conservazione per iniziare"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),"Frigoriferi",jsxRuntimeExports.jsx("button",{onClick:()=>tr("pizzeria-frigoA"),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Guida posizionamento prodotti",children:jsxRuntimeExports.jsx(HelpCircle,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&(Ks>=-2.5&&Ks<=0||Ks>0&&Ks<=14)}).map(_s=>{var yr;const Ks=dr(_s);return jsxRuntimeExports.jsxs("div",{className:`p-3 border rounded-lg ${Ks==="green"?"bg-green-50 border-green-200":Ks==="orange"?"bg-orange-50 border-orange-200":Ks==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[lr(Ks),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:_s.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${Ks==="green"?"text-green-600":Ks==="orange"?"text-orange-600":Ks==="red"?"text-red-600":"text-gray-600"}`,children:_r(Ks)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[(St==null?void 0:St.role)==="admin"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>cr(_s),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Nr(_s.id),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[_s.location&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:_s.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:jr(_s)})]})]}),_s.dedicatedTo&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Categoria: "}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:((yr=er.find(Ur=>Ur.id===_s.dedicatedTo))==null?void 0:yr.name)||_s.dedicatedTo})]})]},_s.id)}),Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&(Ks>=-2.5&&Ks<=0||Ks>0&&Ks<=14)}).length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun frigorifero"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-purple-50",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),"Freezer",jsxRuntimeExports.jsx("button",{onClick:()=>tr("pizzeria-frigoB"),className:"text-purple-600 hover:text-purple-800 transition-colors",title:"Guida posizionamento prodotti",children:jsxRuntimeExports.jsx(HelpCircle,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks<-2.5&&Ks>=-13.5}).map(_s=>{var yr;const Ks=dr(_s);return jsxRuntimeExports.jsxs("div",{className:`p-3 border rounded-lg ${Ks==="green"?"bg-green-50 border-green-200":Ks==="orange"?"bg-orange-50 border-orange-200":Ks==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[lr(Ks),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:_s.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${Ks==="green"?"text-green-600":Ks==="orange"?"text-orange-600":Ks==="red"?"text-red-600":"text-gray-600"}`,children:_r(Ks)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[(St==null?void 0:St.role)==="admin"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>cr(_s),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Nr(_s.id),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[_s.location&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:_s.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:jr(_s)})]})]}),_s.dedicatedTo&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Categoria: "}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:((yr=STORAGE_CATEGORIES.find(Ur=>Ur.id===_s.dedicatedTo))==null?void 0:yr.name)||_s.dedicatedTo})]})]},_s.id)}),Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks<-2.5&&Ks>=-13.5}).length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun freezer"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-red-50",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-red-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),"Abbattitore",jsxRuntimeExports.jsx("button",{onClick:()=>tr("abbattitore"),className:"text-red-600 hover:text-red-800 transition-colors",title:"Guida posizionamento prodotti",children:jsxRuntimeExports.jsx(HelpCircle,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks<-13.5&&Ks>=-80}).map(_s=>{var yr;const Ks=dr(_s);return jsxRuntimeExports.jsxs("div",{className:`p-3 border rounded-lg ${Ks==="green"?"bg-green-50 border-green-200":Ks==="orange"?"bg-orange-50 border-orange-200":Ks==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[lr(Ks),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:_s.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${Ks==="green"?"text-green-600":Ks==="orange"?"text-orange-600":Ks==="red"?"text-red-600":"text-gray-600"}`,children:_r(Ks)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[(St==null?void 0:St.role)==="admin"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>cr(_s),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Nr(_s.id),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[_s.location&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:_s.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:jr(_s)})]})]}),_s.dedicatedTo&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Categoria: "}),jsxRuntimeExports.jsx("span",{className:"font-medium text-gray-700",children:((yr=STORAGE_CATEGORIES.find(Ur=>Ur.id===_s.dedicatedTo))==null?void 0:yr.name)||_s.dedicatedTo})]})]},_s.id)}),Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks<-13.5&&Ks>=-80}).length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun abbattitore"})]})]}),jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-green-50",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),"Ambiente",jsxRuntimeExports.jsx("button",{onClick:()=>tr("ambiente"),className:"text-green-600 hover:text-green-800 transition-colors",title:"Guida posizionamento prodotti",children:jsxRuntimeExports.jsx(HelpCircle,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks>=15&&Ks<=25}).map(_s=>{var yr;const Ks=dr(_s);return jsxRuntimeExports.jsxs("div",{className:`p-3 border rounded-lg ${Ks==="green"?"bg-green-50 border-green-200":Ks==="orange"?"bg-orange-50 border-orange-200":Ks==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[lr(Ks),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:_s.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:`text-xs ${Ks==="green"?"text-green-600":Ks==="orange"?"text-orange-600":Ks==="red"?"text-red-600":"text-gray-600"}`,children:_r(Ks)})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[(St==null?void 0:St.role)==="admin"&&jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>cr(_s),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>Nr(_s.id),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[_s.location&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(MapPin,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:_s.location})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-3 w-3 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:jr(_s)})]})]}),_s.dedicatedTo&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Categoria: "}),jsxRuntimeExports.jsx("span",{className:"text-gray-700",children:((yr=STORAGE_CATEGORIES.find(Ur=>Ur.id===_s.dedicatedTo))==null?void 0:yr.name)||_s.dedicatedTo})]})]},_s.id)}),Ar.filter(_s=>{let Ks=0;if(_s.setTemperatureMin!==void 0&&_s.setTemperatureMax!==void 0)Ks=(_s.setTemperatureMin+_s.setTemperatureMax)/2;else if(_s.setTemperature){const yr=_s.setTemperature.toString().replace("C","").trim();Ks=parseFloat(yr)}return!isNaN(Ks)&&Ks>=15&&Ks<=25}).length===0&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun punto ambiente"})]})]})]})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"h-5 w-5"}),"Attivit Registro Temperature"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cerca per nome frigorifero, utente, data...",value:gs,onChange:_s=>vs(_s.target.value),className:"pl-10"})]}),Vr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessuna attivit di registrazione temperatura"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo aver aggiunto frigoriferi"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Vr.map(_s=>{const Ks=es.find(yr=>_s.location.toLowerCase().includes(yr.name.toLowerCase()));return jsxRuntimeExports.jsx("div",{className:"p-3 border rounded-lg",children:jsxRuntimeExports.jsx("div",{className:"flex justify-between items-start",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:_s.location}),Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:Ks.name})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Temperatura rilevata:"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-lg",children:[_s.temperature,"C"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Data rilevamento:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:_s.time})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Operatore:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(User,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:_s.userName||"N/A"}),_s.userDepartment&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["(",_s.userDepartment,")"]})]})]})]})]})})},_s.id)})})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5"}),"Stato Punti di Conservazione"]})}),jsxRuntimeExports.jsx(CardContent,{children:es.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Settings,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessun punto di conservazione registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Aggiungi punti di conservazione per visualizzare lo stato"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:es.map(_s=>{const Ks=dr(_s),yr=_e.filter(Ur=>Ur.location.toLowerCase().includes(_s.name.toLowerCase())).sort((Ur,Or)=>new Date(Or.timestamp)-new Date(Ur.timestamp))[0];return jsxRuntimeExports.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:shadow-md transition-shadow ${Ks==="green"?"bg-green-50 border-green-200 hover:bg-green-100":Ks==="orange"?"bg-orange-50 border-orange-200 hover:bg-orange-100":Ks==="red"?"bg-red-50 border-red-200 hover:bg-red-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>Dr(_s),title:"Clicca per vedere la cronologia temperature",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:_s.name}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:Tr(_s)}),lr(Ks),jsxRuntimeExports.jsx("span",{className:`text-sm font-medium ${Ks==="green"?"text-green-700":Ks==="orange"?"text-orange-700":Ks==="red"?"text-red-700":"text-gray-600"}`,children:_r(Ks)})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[jr(_s)," (",Tr(_s),")"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:_s.location||"Non specificato"})]})]}),yr&&jsxRuntimeExports.jsx("div",{className:`mt-3 p-3 rounded-lg ${Ks==="green"?"bg-green-100":Ks==="orange"?"bg-orange-100":Ks==="red"?"bg-red-100":"bg-gray-100"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Ultima registrazione:"}),jsxRuntimeExports.jsxs("span",{className:"font-medium",children:[yr.temperature,"C"]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["il ",yr.time]})]})})]})})},_s.id)})})})]}),ns&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-6xl mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Aggiungi Punto di Conservazione"}),jsxRuntimeExports.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-600 mt-0.5",children:jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700",children:[jsxRuntimeExports.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),jsxRuntimeExports.jsxs("form",{onSubmit:or,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informazioni Base"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",className:"text-base font-medium text-gray-700",children:"Nome punto di conservazione *"}),jsxRuntimeExports.jsx(Input,{id:"name",type:"text",value:cs.name,onChange:_s=>ys({...cs,name:_s.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",className:"mt-1",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"location",className:"text-base font-medium text-gray-700",children:"Posizionamento *"}),jsxRuntimeExports.jsxs("select",{id:"location",value:cs.location,onChange:_s=>ys({...cs,location:_s.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona reparto"}),ss.map((_s,Ks)=>jsxRuntimeExports.jsx("option",{value:_s.name||_s,children:_s.name||_s},_s.id||Ks))]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Categorie di Prodotti (Max 5)"}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>As(!bs),className:"flex items-center gap-1 text-xs px-2 py-1",children:[jsxRuntimeExports.jsx(Plus,{className:"h-3 w-3"}),"Nuova"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:er.map(_s=>{var Or;const Ks=((Or=cs.selectedCategories)==null?void 0:Or.includes(_s.id))||!1,yr=sr(_s.id,cs.selectedCategories||[],cs.setTemperature),Ur=()=>{switch(yr){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";case"neutral":return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}};return jsxRuntimeExports.jsx("div",{onClick:()=>vr(_s.id),className:`p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 ${Ur()}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-xs truncate",children:_s.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:_s.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[Ks&&jsxRuntimeExports.jsx(CheckCircle,{className:"h-3 w-3 text-blue-600 flex-shrink-0"}),yr==="compatible"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),yr==="incompatible"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),yr==="tolerance"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""})]})]})},_s.id)})}),cs.selectedCategories&&cs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white rounded border",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categorie selezionate:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:cs.selectedCategories.map(_s=>{const Ks=er.find(yr=>yr.id===_s);return jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:Ks==null?void 0:Ks.name},_s)})})]}),cs.selectedCategories.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-2",children:" Seleziona almeno una categoria per procedere"}),bs&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border-2 border-blue-300 rounded-lg shadow-sm",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Crea Nuova Categoria"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categoryName",className:"text-xs",children:"Nome Categoria *"}),jsxRuntimeExports.jsx(Input,{id:"categoryName",type:"text",value:ks.name,onChange:_s=>$s({...ks,name:_s.target.value}),placeholder:"es. Prodotti Biologici...",className:"text-sm",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categoryDescription",className:"text-xs",children:"Descrizione *"}),jsxRuntimeExports.jsx(Input,{id:"categoryDescription",type:"text",value:ks.description,onChange:_s=>$s({...ks,description:_s.target.value}),placeholder:"Descrizione della categoria...",className:"text-sm",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"categoryIsAmbiente",checked:ks.isAmbiente,onChange:_s=>$s({...ks,isAmbiente:_s.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),jsxRuntimeExports.jsx(Label,{htmlFor:"categoryIsAmbiente",className:"text-xs font-medium text-gray-700",children:"Temperatura ambiente (15-25C)"})]}),!ks.isAmbiente&&jsxRuntimeExports.jsx(TemperatureInput,{label:"Range Temperatura (C)",minValue:ks.temperatureMin,maxValue:ks.temperatureMax,onMinChange:_s=>$s({...ks,temperatureMin:_s.target.value}),onMaxChange:_s=>$s({...ks,temperatureMax:_s.target.value}),required:!1,showValidation:!0,showSuggestions:!0,compactMode:!0,className:"w-full",id:"category-temperature-range"}),ks.isAmbiente&&jsxRuntimeExports.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-3 w-3 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-blue-800 font-medium",children:"Temperatura ambiente: 15-25C"})]}),jsxRuntimeExports.jsx("p",{className:"text-blue-600 mt-1",children:"Questa categoria utilizzer automaticamente il range di temperatura ambiente."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categoryNotes",className:"text-xs",children:"Note"}),jsxRuntimeExports.jsx(Input,{id:"categoryNotes",type:"text",value:ks.notes,onChange:_s=>$s({...ks,notes:_s.target.value}),placeholder:"Note aggiuntive...",className:"text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",size:"sm",className:"flex-1 text-xs",onClick:pr,children:"Crea Categoria"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>As(!1),className:"flex-1 text-xs",children:"Annulla"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Temperatura di Conservazione"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"setTemperature",className:"text-sm font-medium text-gray-700",children:"Temperatura Impostata (C) *"}),jsxRuntimeExports.jsx(Input,{id:"setTemperature",type:"text",value:cs.setTemperature,onChange:_s=>ys({...cs,setTemperature:_s.target.value}),placeholder:"es. 4, -18, 2.5, ambiente...",className:`mt-1 p-3 ${cs.setTemperature&&cs.selectedCategories.length>0?(()=>{const _s=ws(cs.setTemperature,cs.selectedCategories);return _s.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":_s.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":_s.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`,required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-2 p-2 bg-white rounded border",children:'Inserisci la temperatura di conservazione (es. 4 per frigorifero, -18 per freezer, "ambiente" per temperatura ambiente)'})]}),cs.setTemperature&&cs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const _s=ws(cs.setTemperature,cs.selectedCategories);return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 ${_s.color==="green"?"text-green-600":_s.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[_s.type==="compliant"?"":_s.type==="warning"?"":"",jsxRuntimeExports.jsx("span",{className:"text-sm",children:_s.message})]})})(),cs.selectedCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const _s=Ws(cs.selectedCategories);return _s&&!_s.compatible||_s?_s.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]})]}),jsxRuntimeExports.jsx(MaintenanceSection,{conservationPointId:null,staffMembers:zs,onMaintenanceChange:_s=>ys({...cs,maintenanceData:_s}),initialData:cs.maintenanceData,isRequired:!0}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[jsxRuntimeExports.jsx(Button,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3",disabled:!cs.name.trim()||!cs.setTemperature.trim()||!cs.location.trim()||!cs.selectedCategories||cs.selectedCategories.length===0,children:"Aggiungi Punto di Conservazione"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>is(!1),className:"flex-1 py-3",children:"Annulla"})]})]})]})}),os&&ps&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-6xl mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:"Modifica Punto di Conservazione"}),jsxRuntimeExports.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("div",{className:"text-blue-600 mt-0.5",children:jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700",children:[jsxRuntimeExports.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),jsxRuntimeExports.jsxs("form",{onSubmit:Ns,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informazioni Base"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"edit-name",className:"text-sm font-medium text-gray-700",children:"Nome punto di conservazione *"}),jsxRuntimeExports.jsx(Input,{id:"edit-name",type:"text",value:cs.name,onChange:_s=>ys({...cs,name:_s.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",className:"mt-1",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"edit-location",className:"text-sm font-medium text-gray-700",children:"Posizionamento *"}),jsxRuntimeExports.jsxs("select",{id:"edit-location",value:cs.location,onChange:_s=>ys({...cs,location:_s.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona reparto"}),ss.map((_s,Ks)=>jsxRuntimeExports.jsx("option",{value:_s.name||_s,children:_s.name||_s},_s.id||Ks))]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Categorie di Prodotti (Max 5)"}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>As(!bs),className:"flex items-center gap-1 text-xs px-2 py-1",children:[jsxRuntimeExports.jsx(Plus,{className:"h-3 w-3"}),"Nuova"]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:er.map(_s=>{var Or;const Ks=((Or=cs.selectedCategories)==null?void 0:Or.includes(_s.id))||!1,yr=sr(_s.id,cs.selectedCategories||[],cs.setTemperature),Ur=()=>{switch(yr){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";case"neutral":return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}};return jsxRuntimeExports.jsx("div",{onClick:()=>vr(_s.id),className:`p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 ${Ur()}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-xs truncate",children:_s.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:_s.description})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[Ks&&jsxRuntimeExports.jsx(CheckCircle,{className:"h-3 w-3 text-blue-600 flex-shrink-0"}),yr==="compatible"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),yr==="incompatible"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),yr==="tolerance"&&!Ks&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""})]})]})},_s.id)})}),cs.selectedCategories&&cs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white rounded border",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categorie selezionate:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:cs.selectedCategories.map(_s=>{const Ks=er.find(yr=>yr.id===_s);return jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:Ks==null?void 0:Ks.name},_s)})})]}),cs.selectedCategories.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-2",children:" Seleziona almeno una categoria per procedere"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Temperatura di Conservazione"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"edit-setTemperature",className:"text-sm font-medium text-gray-700",children:"Temperatura Impostata (C) *"}),jsxRuntimeExports.jsx(Input,{id:"edit-setTemperature",type:"text",value:cs.setTemperature,onChange:_s=>ys({...cs,setTemperature:_s.target.value}),placeholder:"es. 4, -18, 2.5, ambiente...",className:`mt-1 p-3 ${cs.setTemperature&&cs.selectedCategories.length>0?(()=>{const _s=ws(cs.setTemperature,cs.selectedCategories);return _s.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":_s.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":_s.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`,required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-2 p-2 bg-white rounded border",children:'Inserisci la temperatura di conservazione (es. 4 per frigorifero, -18 per freezer, "ambiente" per temperatura ambiente)'})]}),cs.setTemperature&&cs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 border",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const _s=ws(cs.setTemperature,cs.selectedCategories);return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-2 ${_s.color==="green"?"text-green-600":_s.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[_s.type==="compliant"?"":_s.type==="warning"?"":"",jsxRuntimeExports.jsx("span",{className:"text-sm",children:_s.message})]})})(),cs.selectedCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const _s=Ws(cs.selectedCategories);return _s&&!_s.compatible||_s?_s.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Posizionamento"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"edit-location",className:"text-sm font-medium text-gray-700",children:"Reparto *"}),jsxRuntimeExports.jsxs("select",{id:"edit-location",value:cs.location,onChange:_s=>ys({...cs,location:_s.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona un reparto"}),ss.map(_s=>jsxRuntimeExports.jsx("option",{value:_s.name,children:_s.name},_s.id))]})]})]}),jsxRuntimeExports.jsx(MaintenanceSection,{conservationPointId:ps==null?void 0:ps.id,staffMembers:zs,onMaintenanceChange:_s=>ys({...cs,maintenanceData:_s}),initialData:cs.maintenanceData,isRequired:!0}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"submit",className:"flex-1",disabled:!cs.name.trim()||!cs.setTemperature.trim()||!cs.location.trim()||!cs.selectedCategories||cs.selectedCategories.length===0,children:"Aggiorna"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>{us(!1),xs(null),ys({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[]})},className:"flex-1",children:"Annulla"})]})]})]})}),Es&&ds&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-6",children:[jsxRuntimeExports.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-5 w-5"}),"Cronologia Temperature - ",ds.name]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{Os(!1),fs(null)},className:"p-2",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),jsxRuntimeExports.jsxs("div",{className:"font-medium",children:[jr(ds)," (",Tr(ds),")"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:ds.location||"Non specificato"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Categoria punto di Conservazione:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:ds.dedicatedTo?((Kr=er.find(_s=>_s.id===ds.dedicatedTo))==null?void 0:Kr.name)||ds.dedicatedTo:"Non specificato"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Prossima manutenzione:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:ds.nextMaintenance||"Non programmata"})]})]})}),(()=>{const _s=zr(ds);return _s.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessuna registrazione di temperatura"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo le prime misurazioni"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Totale registrazioni: ",_s.length]}),_s.map((Ks,yr)=>{const Ur=Math.abs(Ks.temperature-wr(ds)),Or=Ur>2?"danger":Ur>1?"warning":"ok";return jsxRuntimeExports.jsxs("div",{className:`p-4 border rounded-lg ${Or==="ok"?"bg-green-50 border-green-200":Or==="warning"?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-lg font-bold",children:[Ks.temperature,"C"]}),jsxRuntimeExports.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${Or==="ok"?"bg-green-100 text-green-700":Or==="warning"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:Or==="ok"?" OK":Or==="warning"?" Attenzione":" Critico"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Differenza: ",Ur.toFixed(1),"C"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-right text-sm text-gray-600",children:[jsxRuntimeExports.jsx("div",{children:Ks.time}),jsxRuntimeExports.jsx("div",{className:"text-xs",children:Ks.user||"Utente sconosciuto"})]})]}),Ks.notes&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:[" ",Ks.notes]})]},Ks.id||yr)})]})})()]})}),qs&&jsxRuntimeExports.jsx(HelpOverlay,{isOpen:qs,onClose:()=>Cs(!1),fridgeType:Us}),jsxRuntimeExports.jsxs(Card,{className:"mt-6",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(HelpCircle,{className:"h-5 w-5 text-blue-600"})," Riferimenti Normativi EU/ASL"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-700 space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-gray-800",children:"Le temperature di conservazione suggerite sono basate sulle seguenti normative europee e italiane:"}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:" Regolamento (CE) 853/2004"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:"Allegato III - Requisiti specifici per alimenti di origine animale"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni fresche: 7C (frattaglie 3C)"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pollame: 4C"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni macinate: 2C"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pesce fresco: vicino al ghiaccio in fusione"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Latte crudo: 6C"}),jsxRuntimeExports.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Ovoprodotti: 4C"}),jsxRuntimeExports.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800",children:" Leggi il regolamento completo"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-green-800 mb-2",children:" DPR 327/80 (Italia)"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:"Prassi storiche richiamate da ASL"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti cotti da mantenere caldi: +6065C"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti facilmente deperibili: +4C"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Uova in guscio: temperatura costante"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Evitare sbalzi termici"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Proteggere da sole e odori"}),jsxRuntimeExports.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Rispettare etichette produttore"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:" Direttiva 89/108/CEE (Surgelati)"}),jsxRuntimeExports.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Catena del freddo continua a -18C"}),jsxRuntimeExports.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Non ricongelare dopo decongelamento"}),jsxRuntimeExports.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Brevi fluttuazioni ammesse nel trasporto"}),jsxRuntimeExports.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 underline text-xs hover:text-purple-800",children:" Leggi la direttiva completa"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:" Note Importanti"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Le temperature suggerite sono indicative e basate su normative EU/ASL"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Rispettare sempre le indicazioni specifiche del produttore"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" In caso di dubbi, consultare le autorit sanitarie locali (ASL)"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Mantenere aggiornate le procedure HACCP aziendali"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Documentare eventuali deviazioni dalle temperature standard"})]})]})})]})]})}function Tabs({value:_e,onValueChange:e,children:St}){return jsxRuntimeExports.jsx("div",{className:"w-full",children:React.Children.map(St,es=>!es||!es.type?es:es.type===TabsList?React.cloneElement(es,{value:_e,onValueChange:e}):es.type===TabsContent?React.cloneElement(es,{currentValue:_e}):es)})}function TabsList({value:_e,onValueChange:e,children:St,className:es=""}){return jsxRuntimeExports.jsx("div",{className:`flex p-1 bg-gray-100 rounded-xl shadow-sm ${es}`,children:React.Children.map(St,ts=>!ts||!ts.type?ts:ts.type===TabsTrigger?React.cloneElement(ts,{currentValue:_e,onValueChange:e,isActive:_e===ts.props.value}):ts)})}function TabsTrigger({value:_e,currentValue:e,onValueChange:St,isActive:es,children:ts,className:ss=""}){return jsxRuntimeExports.jsx("button",{onClick:()=>St(_e),className:`
        flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ease-in-out
        ${es?"bg-white text-blue-600 shadow-md transform scale-[1.02]":"text-gray-600 hover:text-gray-900 hover:bg-white/60 active:scale-[0.98]"}
        ${ss}
      `,children:ts})}function TabsContent({value:_e,currentValue:e,children:St}){return e!==_e?null:jsxRuntimeExports.jsx("div",{className:"mt-6 animate-in fade-in-50 duration-200",children:St})}const createStandardDepartments=()=>[{id:"cucina",name:"Cucina",description:"Area di preparazione e cottura",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"bancone",name:"Bancone",description:"Area di servizio e preparazione",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"sala",name:"Sala",description:"Area di servizio clienti",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"magazzino",name:"Magazzino",description:"Area di stoccaggio e conservazione",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"}];function Departments({currentUser:_e,departments:e,setDepartments:St}){const[es,ts]=reactExports.useState(!1),[ss,rs]=reactExports.useState(null),[ns,is]=reactExports.useState({name:"",description:"",location:"",manager:"",notes:""});reactExports.useEffect(()=>{const gs=localStorage.getItem("haccp-onboarding");let vs=!1;if(gs)try{const ds=JSON.parse(gs);vs=ds&&ds.completed===!0}catch(ds){console.warn("Errore nel parsing dati onboarding:",ds),vs=!1}vs?(console.log(" Onboarding completato, caricamento reparti..."),os()):(console.log(" Onboarding in corso, sezione reparti vuota"),St([]))},[]);const os=()=>{var vs;const gs=localStorage.getItem("haccp-onboarding");if(gs)try{const ds=JSON.parse(gs);if((vs=ds.departments)!=null&&vs.list){const fs=ds.departments.list.filter(Es=>Es&&Es.enabled).map(Es=>({id:Es.id||Date.now()+Math.random(),name:Es.name||"Reparto non disponibile",description:Es.description||"",location:Es.location||"",manager:Es.manager||"",notes:Es.notes||"",enabled:!0,isCustom:Es.isCustom||!1,createdAt:new Date().toISOString(),createdBy:"Onboarding"}));if(fs.length>0){console.log(" Reparti caricati dall'onboarding:",fs),St(fs),localStorage.setItem("haccp-departments",JSON.stringify(fs));return}}}catch(ds){console.warn("Errore nel caricamento reparti dall'onboarding:",ds)}console.log(" Nessun reparto dall'onboarding, creando reparti standard"),St(createStandardDepartments())},us=()=>{console.log(" Pulizia reparti corrotti..."),localStorage.removeItem("haccp-departments"),os()};reactExports.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(e))},[e]);const ps=()=>{is({name:"",description:"",location:"",manager:"",notes:""}),rs(null)},xs=gs=>{if(gs.preventDefault(),!ns.name.trim()){alert("Il nome del reparto  obbligatorio");return}const vs=e.find(ds=>ds.name.toLowerCase()===ns.name.trim().toLowerCase());if(vs&&(!ss||vs.id!==ss.id)){alert("Un reparto con questo nome esiste gi");return}if(ss){const ds=e.map(fs=>fs.id===ss.id?{...fs,name:ns.name.trim(),updatedAt:new Date().toISOString(),updatedBy:(_e==null?void 0:_e.name)||"Unknown"}:fs);St(ds)}else{const ds={id:`dept_${Date.now()}`,name:ns.name.trim(),description:"",location:"",manager:"",notes:"",enabled:!0,isCustom:!0,createdAt:new Date().toISOString(),createdBy:(_e==null?void 0:_e.name)||"Unknown"};St([...e,ds])}ps(),ts(!1)},cs=gs=>{rs(gs),is({name:gs.name,description:gs.description||"",location:gs.location||"",manager:gs.manager||"",notes:gs.notes||""}),ts(!0)},ys=gs=>{confirm("Sei sicuro di voler eliminare questo reparto? Questa azione non pu essere annullata.")&&St(e.filter(vs=>vs.id!==gs))};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"h-6 w-6 text-blue-600"}),"Gestione Reparti"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Visualizza e gestisci i reparti configurati durante l'onboarding"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{ps(),ts(!0)},className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Aggiungi Reparto"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Reparti Attivi (",e.length,")"]}),jsxRuntimeExports.jsxs(Button,{onClick:us,variant:"outline",size:"sm",className:"flex items-center gap-2 text-orange-600 border-orange-300 hover:bg-orange-50",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"h-4 w-4"}),"Ricarica dall'Onboarding"]})]}),e.length===0?jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-8 text-center",children:[jsxRuntimeExports.jsx(Building2,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun reparto configurato"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"I reparti vengono configurati durante l'onboarding dell'applicazione."})]})}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.filter(gs=>gs&&gs.id&&gs.name&&typeof gs.name=="string").map(gs=>jsxRuntimeExports.jsx(Card,{className:"hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:gs.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Attivo"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>cs(gs),className:"h-8 w-8 p-0",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>ys(gs.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]})})},gs.id))})]}),es&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"h-5 w-5"}),ss?"Modifica Reparto":"Nuovo Reparto"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:xs,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Reparto *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:ns.name,onChange:gs=>is({...ns,name:gs.target.value}),placeholder:"es. Cucina, Sala, Magazzino...",required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",className:"flex-1",children:ss?"Aggiorna Reparto":"Aggiungi Reparto"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>{ts(!1),ps()},className:"flex-1",children:"Annulla"})]})]})})]})]})}function Gestione({staff:_e,setStaff:e,users:St,setUsers:es,currentUser:ts,isAdmin:ss,departments:rs,setDepartments:ns}){const[is,os]=reactExports.useState({name:"",roles:[""],certification:"",notes:""}),[us,ps]=reactExports.useState(!1),[xs,cs]=reactExports.useState(null),[ys,gs]=reactExports.useState({name:"",description:"",members:[],assignedTasks:[]}),[vs,ds]=reactExports.useState(null),[fs,Es]=reactExports.useState(!1),[Os,Hs]=reactExports.useState("staff"),[Qs,zs]=reactExports.useState({}),[Ls,Bs]=reactExports.useState(!1),[Gs,bs]=reactExports.useState(null),[As,ks]=reactExports.useState(""),[$s,qs]=reactExports.useState(!1);reactExports.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(_e))},[_e]),reactExports.useEffect(()=>{const Ns=localStorage.getItem("haccp-departments"),jr=localStorage.getItem("haccp-departments-version"),wr=[{id:"amministratori",name:"Amministratori",description:"Gestione e supervisione completa",members:[],assignedTasks:[]},{id:"responsabili",name:"Responsabili",description:"Responsabili di reparto e coordinamento",members:[],assignedTasks:[]},{id:"dipendenti",name:"Dipendenti",description:"Staff fisso e personale regolare",members:[],assignedTasks:[]},{id:"collaboratori",name:"Collaboratore Occasionale",description:"Personale temporaneo e collaborazioni esterne",members:[],assignedTasks:[]}];if(jr!=="2.0"||!Ns)ns(wr),localStorage.setItem("haccp-departments",JSON.stringify(wr)),localStorage.setItem("haccp-departments-version","2.0");else{const dr=JSON.parse(Ns),lr=[...wr];dr.forEach(_r=>{wr.find(Ar=>Ar.id===_r.id)||lr.push(_r)}),ns(lr)}},[]),reactExports.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(rs))},[rs]),reactExports.useEffect(()=>{if(rs.length>0&&_e&&Array.isArray(_e)&&_e.length>=0){const Ns=rs.map(wr=>({...wr,members:_e.filter(dr=>dr&&(dr.roles&&dr.roles.includes(wr.name)||dr.role===wr.name||dr.primaryRole===wr.name)).map(dr=>dr.id)}));Ns.some((wr,dr)=>{var lr;return JSON.stringify(wr.members)!==JSON.stringify(((lr=rs[dr])==null?void 0:lr.members)||[])})&&ns(Ns)}},[_e]);const Cs=Ns=>{if(Ns.preventDefault(),!is.name.trim()||is.roles.every(lr=>!lr.trim()))return;if(_e&&Array.isArray(_e)?_e.some(lr=>lr&&lr.name&&lr.name.toLowerCase().trim()===is.name.toLowerCase().trim()):!1){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la registrazione.`);return}const wr=[...new Set(is.roles.filter(lr=>lr.trim()))],dr={id:Date.now(),name:is.name.trim(),roles:wr,primaryRole:wr[0],certification:is.certification.trim(),notes:is.notes.trim(),addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT")};e([..._e,dr]),os({name:"",roles:[""],certification:"",notes:""})},Us=Ns=>{confirm("Sei sicuro di voler rimuovere questo membro del personale?")&&e(_e&&Array.isArray(_e)?_e.filter(jr=>jr&&jr.id!==Ns):[])},Ps=()=>{os(Ns=>({...Ns,roles:[...Ns.roles,""]}))},er=Ns=>{is.roles.length>1&&os(jr=>({...jr,roles:jr.roles.filter((wr,dr)=>dr!==Ns)}))},tr=(Ns,jr)=>{os(wr=>({...wr,roles:wr.roles.map((dr,lr)=>lr===Ns?jr:dr)}))};_e&&Array.isArray(_e)&&[...new Set(_e.map(Ns=>Ns==null?void 0:Ns.role).filter(Boolean))],_e&&Array.isArray(_e)&&_e.filter(Ns=>Ns&&Ns.certification&&Ns.certification.trim()!=="");const vr={Amministratori:"bg-red-100 text-red-800",Responsabili:"bg-purple-100 text-purple-800",Dipendenti:"bg-blue-100 text-blue-800","Collaboratore Occasionale":"bg-yellow-100 text-yellow-800",Cuoco:"bg-blue-100 text-blue-800","Sous Chef":"bg-purple-100 text-purple-800",Chef:"bg-red-100 text-red-800",Cameriere:"bg-green-100 text-green-800","Addetto cucina":"bg-yellow-100 text-yellow-800",Manager:"bg-gray-100 text-gray-800",default:"bg-gray-100 text-gray-800"},ws=Ns=>{if(!Ns||typeof Ns!="string")return"bg-gray-100 text-gray-800";if(vr[Ns])return vr[Ns];const jr=["bg-indigo-100 text-indigo-800","bg-pink-100 text-pink-800","bg-teal-100 text-teal-800","bg-orange-100 text-orange-800","bg-emerald-100 text-emerald-800","bg-violet-100 text-violet-800","bg-cyan-100 text-cyan-800","bg-rose-100 text-rose-800","bg-lime-100 text-lime-800","bg-amber-100 text-amber-800","bg-sky-100 text-sky-800","bg-fuchsia-100 text-fuchsia-800","bg-slate-100 text-slate-800","bg-stone-100 text-stone-800","bg-zinc-100 text-zinc-800","bg-neutral-100 text-neutral-800","bg-red-200 text-red-900","bg-blue-200 text-blue-900","bg-green-200 text-green-900","bg-purple-200 text-purple-900","bg-yellow-200 text-yellow-900","bg-indigo-200 text-indigo-900","bg-pink-200 text-pink-900","bg-teal-200 text-teal-900"],wr=Ns.split("").reduce((dr,lr)=>(dr=(dr<<5)-dr+lr.charCodeAt(0),dr&dr),0);return jr[Math.abs(wr)%jr.length]},Vs=Ns=>{const jr=ws(Ns);return jr.includes("text-red-800")?"bg-red-50 border-red-200":jr.includes("text-purple-800")?"bg-purple-50 border-purple-200":jr.includes("text-blue-800")?"bg-blue-50 border-blue-200":jr.includes("text-yellow-800")?"bg-yellow-50 border-yellow-200":jr.includes("text-green-800")?"bg-green-50 border-green-200":jr.includes("text-indigo-800")?"bg-indigo-50 border-indigo-200":jr.includes("text-pink-800")?"bg-pink-50 border-pink-200":jr.includes("text-teal-800")?"bg-teal-50 border-teal-200":jr.includes("text-orange-800")?"bg-orange-50 border-orange-200":jr.includes("text-emerald-800")?"bg-emerald-50 border-emerald-200":jr.includes("text-violet-800")?"bg-violet-50 border-violet-200":jr.includes("text-cyan-800")?"bg-cyan-50 border-cyan-200":jr.includes("text-rose-800")?"bg-rose-50 border-rose-200":jr.includes("text-lime-800")?"bg-lime-50 border-lime-200":jr.includes("text-amber-800")?"bg-amber-50 border-amber-200":jr.includes("text-sky-800")?"bg-sky-50 border-sky-200":jr.includes("text-fuchsia-800")?"bg-fuchsia-50 border-fuchsia-200":jr.includes("text-slate-800")?"bg-slate-50 border-slate-200":jr.includes("text-stone-800")?"bg-stone-50 border-stone-200":jr.includes("text-zinc-800")?"bg-zinc-50 border-zinc-200":jr.includes("text-neutral-800")?"bg-neutral-50 border-neutral-200":jr.includes("text-red-900")?"bg-red-100 border-red-300":jr.includes("text-blue-900")?"bg-blue-100 border-blue-300":jr.includes("text-green-900")?"bg-green-100 border-green-300":jr.includes("text-purple-900")?"bg-purple-100 border-purple-300":jr.includes("text-yellow-900")?"bg-yellow-100 border-yellow-300":jr.includes("text-indigo-900")?"bg-indigo-100 border-indigo-300":jr.includes("text-pink-900")?"bg-pink-100 border-pink-300":jr.includes("text-teal-900")?"bg-teal-100 border-teal-300":"bg-gray-50 border-gray-200"},Ys=Ns=>{if(Ns.preventDefault(),!ys.name.trim())return;const jr={id:Date.now(),name:ys.name.trim(),description:ys.description.trim(),members:[],assignedTasks:[],createdAt:new Date().toISOString()};ns([...rs,jr]),gs({name:"",description:"",members:[],assignedTasks:[]}),ps(!1)},Ws=Ns=>{cs(Ns),gs({name:Ns.name,description:Ns.description,members:Ns.members||[],assignedTasks:Ns.assignedTasks||[]}),ps(!0)},sr=Ns=>{if(Ns.preventDefault(),!ys.name.trim())return;const jr=rs.map(wr=>wr.id===xs.id?{...wr,name:ys.name.trim(),description:ys.description.trim()}:wr);ns(jr),gs({name:"",description:"",members:[],assignedTasks:[]}),cs(null),ps(!1)},nr=Ns=>{confirm("Sei sicuro di voler eliminare questa categoria?")&&ns(rs.filter(jr=>jr.id!==Ns))},pr=Ns=>{ds(Ns),os({name:Ns.name,roles:Ns.roles&&Ns.roles.length>0?Ns.roles:[Ns.role||""],certification:Ns.certification||"",notes:Ns.notes||""}),Es(!0)},xr=Ns=>{if(Ns.preventDefault(),!is.name.trim()||is.roles.every(lr=>!lr.trim()))return;if(_e.some(lr=>lr.id!==vs.id&&lr.name.toLowerCase().trim()===is.name.toLowerCase().trim())){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la modifica.`);return}const wr=[...new Set(is.roles.filter(lr=>lr.trim()))],dr=_e.map(lr=>lr.id===vs.id?{...lr,name:is.name.trim(),roles:wr,primaryRole:wr[0],certification:is.certification.trim(),notes:is.notes.trim(),lastModified:new Date().toLocaleString("it-IT")}:lr);e(dr),os({name:"",roles:[""],certification:"",notes:""}),ds(null),Es(!1)},Tr=()=>{ds(null),Es(!1),os({name:"",roles:[""],certification:"",notes:""})},Dr=Ns=>{bs(Ns),ks(""),Bs(!0)},zr=()=>{if(Gs&&As){const Ns=_e.map(jr=>jr.id===Gs.id?{...jr,role:As,lastModified:new Date().toLocaleString("it-IT")}:jr);e(Ns),Bs(!1),bs(null),ks("")}},or=()=>{qs(!0)},Nr=()=>{Gs&&(e(_e&&Array.isArray(_e)?_e.filter(Ns=>Ns&&Ns.id!==Gs.id):[]),Bs(!1),qs(!1),bs(null),ks(""))},cr=()=>{Bs(!1),qs(!1),bs(null),ks("")};return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Tabs,{value:Os,onValueChange:Hs,children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-2",children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"staff",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4"}),"Staff"]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"departments",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"h-4 w-4"}),"Reparti"]})]}),jsxRuntimeExports.jsxs(TabsContent,{value:"staff",className:"space-y-6",children:[ts&&ts.role==="admin"&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5"}),"Gestione Categorie Ruoli"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[us&&jsxRuntimeExports.jsxs("form",{onSubmit:xs?sr:Ys,className:"space-y-4 mb-6 p-4 bg-blue-50 rounded-lg border",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categoryName",children:"Nome Categoria"}),jsxRuntimeExports.jsx(Input,{id:"categoryName",value:ys.name,onChange:Ns=>gs({...ys,name:Ns.target.value}),placeholder:"es. Cucina, Sala, Amministrazione",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categoryDescription",children:"Descrizione"}),jsxRuntimeExports.jsx(Input,{id:"categoryDescription",value:ys.description,onChange:Ns=>gs({...ys,description:Ns.target.value}),placeholder:"Descrizione della categoria"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",size:"sm",children:xs?"Aggiorna Categoria":"Aggiungi Categoria"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{ps(!1),cs(null),gs({name:"",description:"",members:[],assignedTasks:[]})},children:"Annulla"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium",children:["Categorie Disponibili (",rs.length,")"]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ps(!0),size:"sm",variant:"outline",children:"Nuova Categoria"})]}),rs.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-6 text-gray-500",children:[jsxRuntimeExports.jsx(Users,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessuna categoria creata"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Crea la prima categoria per organizzare i ruoli"})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:rs.filter(Ns=>Ns&&Ns.id&&Ns.name&&typeof Ns.name=="string").map(Ns=>{var jr;return jsxRuntimeExports.jsxs("div",{className:`p-4 border rounded-lg ${Vs(Ns.name)}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-lg",children:Ns.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ws(Ns.name||"")}`,children:Ns.name||"Nome non disponibile"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Ws(Ns),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:""}),jsxRuntimeExports.jsx(Button,{onClick:()=>nr(Ns.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]})]}),Ns.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-2",children:Ns.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("span",{children:[" ",_e&&Array.isArray(_e)?_e.filter(wr=>wr&&(wr.roles&&wr.roles.includes(Ns.name)||wr.role===Ns.name||wr.primaryRole===Ns.name)).length:0," membri"]}),jsxRuntimeExports.jsxs("span",{children:[" ",((jr=Ns.assignedTasks)==null?void 0:jr.length)||0," compiti"]})]})]},Ns.id)})})]})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"h-5 w-5"}),vs?"Modifica Membro del Personale":"Aggiungi Membro del Personale"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[fs&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:"Stai modificando:"})," ",vs==null?void 0:vs.name]})}),jsxRuntimeExports.jsxs("form",{onSubmit:vs?xr:Cs,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Completo"}),jsxRuntimeExports.jsx(Input,{id:"name",placeholder:"Es: Mario Rossi",value:is.name,onChange:Ns=>os({...is,name:Ns.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"roles",children:"Ruoli"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[is.roles.map((Ns,jr)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsxs("select",{value:Ns,onChange:wr=>tr(jr,wr.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:jr===0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona un ruolo..."}),rs.filter(wr=>wr&&wr.id&&wr.name&&typeof wr.name=="string").map(wr=>jsxRuntimeExports.jsx("option",{value:wr.name,children:wr.name},wr.id))]}),is.roles.length>1&&jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>er(jr),variant:"outline",size:"sm",className:"h-10 w-10 p-0 text-red-600 hover:text-red-800",children:""})]},jr)),jsxRuntimeExports.jsx(Button,{type:"button",onClick:Ps,variant:"outline",size:"sm",className:"w-full",children:"+ Aggiungi Ruolo"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"certification",children:"Certificazioni HACCP (opzionale)"}),jsxRuntimeExports.jsx(Input,{id:"certification",placeholder:"Es: Certificato HACCP livello 2, Corso sicurezza alimentare...",value:is.certification,onChange:Ns=>os({...is,certification:Ns.target.value})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"notes",children:"Note (opzionale)"}),jsxRuntimeExports.jsx(Input,{id:"notes",placeholder:"Es: Turno preferito, competenze particolari...",value:is.notes,onChange:Ns=>os({...is,notes:Ns.target.value})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"submit",className:"flex-1",children:vs?"Salva Modifiche":"Aggiungi al Team"}),vs&&jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:Tr,className:"flex-1",children:"Annulla"})]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Totale Personale"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold",children:_e.length})]}),jsxRuntimeExports.jsx(Users,{className:"h-8 w-8 text-blue-500"})]})})})}),rs.length>0&&jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:rs.filter(Ns=>Ns&&Ns.id&&Ns.name&&typeof Ns.name=="string").slice().sort((Ns,jr)=>{const wr=Ns&&Ns.name?String(Ns.name):"",dr=jr&&jr.name?String(jr.name):"";return wr.localeCompare(dr)}).map(Ns=>{const jr=_e&&Array.isArray(_e)?_e.filter(lr=>lr&&(lr.roles&&lr.roles.includes(Ns.name)||lr.role===Ns.name||lr.primaryRole===Ns.name)):[],wr=jr.length,dr=Qs[Ns.name];return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Card,{className:"cursor-pointer hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("button",{onClick:()=>zs(lr=>({...lr,[Ns.name]:!lr[Ns.name]})),className:"w-full text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Ns.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-600",children:wr})]}),jsxRuntimeExports.jsx(Users,{className:"h-8 w-8 text-blue-500"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:wr===1?"utente":"utenti"}),jsxRuntimeExports.jsx("span",{children:dr?"":""})]})]})})}),dr&&jsxRuntimeExports.jsx(Card,{className:"mt-2",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-4",children:wr===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-4 text-gray-500",children:[jsxRuntimeExports.jsx(Users,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Nessun dipendente in questa categoria"}),jsxRuntimeExports.jsxs("p",{className:"text-xs",children:['Aggiungi membri selezionando "',Ns.name||"questo reparto",'" nel form sopra']})]}):jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jr.map(lr=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:lr.fullName||lr.name}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:(lr.roles&&lr.roles.length>0?lr.roles:[lr.role||"Non assegnato"]).map((_r,Ar)=>jsxRuntimeExports.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${ws(_r)}`,children:_r},Ar))})}),lr.certification&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[jsxRuntimeExports.jsx(GraduationCap,{className:"h-3 w-3"}),lr.certification]}),lr.notes&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[jsxRuntimeExports.jsx(StickyNote,{className:"h-3 w-3"}),lr.notes]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center",children:jsxRuntimeExports.jsx(Button,{onClick:()=>Dr(lr),variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-orange-700 border-orange-300 hover:bg-orange-100 hover:border-orange-400 bg-white shadow-sm",title:"Rimuovi da questo ruolo o riassegna",children:jsxRuntimeExports.jsx(ArrowRightLeft,{className:"h-7.5 w-7.5 stroke-1.5"})})})]},lr.id))})})})]},Ns.id)})}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{children:["Elenco Staff Completo (",_e.length,")"]})}),jsxRuntimeExports.jsx(CardContent,{children:_e.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Users,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-2",children:"Nessun membro del personale registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Aggiungi il primo membro del team per iniziare la gestione del personale HACCP"})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-100 rounded text-xs font-medium text-gray-600",children:[jsxRuntimeExports.jsx("div",{className:"col-span-3",children:"Nome"}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:"Ruolo"}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:"Categoria"}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:"Data Registrazione"}),jsxRuntimeExports.jsx("div",{className:"col-span-2",children:"Note"}),jsxRuntimeExports.jsx("div",{className:"col-span-1",children:"Azioni"})]}),_e.map(Ns=>jsxRuntimeExports.jsxs("div",{className:`grid grid-cols-12 gap-2 px-3 py-2 rounded border transition-colors text-sm ${Ns.isRegisteredUser?"bg-blue-50 border-blue-200 hover:bg-blue-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[jsxRuntimeExports.jsx("div",{className:"col-span-3 flex items-center",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"font-medium flex items-center gap-2",children:[Ns.name||"Nome non disponibile",Ns.isRegisteredUser&&jsxRuntimeExports.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Utente"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[Ns.addedDate,Ns.lastModified&&"  Mod."]})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1",children:(Ns.roles&&Ns.roles.length>0?Ns.roles:[Ns.role||"Non assegnato"]).map((jr,wr)=>jsxRuntimeExports.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${ws(jr)}`,children:jr},wr))})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 flex items-center",children:jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-600",children:Ns.roles&&Ns.roles.length>1?`${Ns.roles.length} ruoli`:"1 ruolo"})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 flex items-center",children:jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600",children:[Ns.addedDate,Ns.addedTime&&jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:Ns.addedTime.split(" ")[1]})]})}),jsxRuntimeExports.jsx("div",{className:"col-span-2 flex items-center",children:Ns.notes?jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[jsxRuntimeExports.jsx(StickyNote,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"truncate text-xs",children:Ns.notes})]}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),jsxRuntimeExports.jsx("div",{className:"col-span-1 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>pr(Ns),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-blue-700 border-blue-300 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-400 bg-white shadow-sm",title:"Modifica dipendente",children:jsxRuntimeExports.jsx(PenLine,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Us(Ns.id),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-red-700 border-red-300 hover:bg-red-100 hover:text-red-800 hover:border-red-400 bg-white shadow-sm",title:"Elimina dipendente",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})})]},Ns.id))]})})]}),_e.length===0&&jsxRuntimeExports.jsxs(Card,{className:"border-blue-200 bg-blue-50",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-blue-800",children:"Suggerimenti Ruoli Comuni"})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Ecco alcuni ruoli comuni nella ristorazione che potresti voler aggiungere:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:["Chef","Sous Chef","Cuoco","Addetto cucina","Cameriere","Barista","Manager"].map(Ns=>jsxRuntimeExports.jsx("button",{onClick:()=>os({...is,role:Ns}),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm hover:bg-blue-200 transition-colors",children:Ns},Ns))})]})]}),Ls&&Gs&&!$s&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-4",children:['Rimuovi "',Gs.name,'" da "',Gs.role,'"']}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Scegliere ",jsxRuntimeExports.jsx("strong",{children:"obbligatoriamente"})," un altro ruolo per questo dipendente, oppure rimuovi dipendente dall'applicazione."]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nuovo ruolo per ",Gs.name,":"]}),jsxRuntimeExports.jsxs("select",{value:As,onChange:Ns=>ks(Ns.target.value),className:"w-full h-10 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona nuovo ruolo --"}),rs.filter(Ns=>Ns&&Ns.id&&Ns.name&&typeof Ns.name=="string"&&Ns.name!==Gs.role).map(Ns=>jsxRuntimeExports.jsx("option",{value:Ns.name,children:Ns.name},Ns.id))]})]}),As&&jsxRuntimeExports.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-800",children:[jsxRuntimeExports.jsx("strong",{children:" Confermato:"})," ",Gs.name,' verr spostato da "',Gs.role,'" a "',jsxRuntimeExports.jsx("strong",{children:As}),'".']})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-6",children:[jsxRuntimeExports.jsx(Button,{onClick:zr,className:"flex-1",disabled:!As,variant:As?"default":"outline",children:As?"Conferma":"Seleziona un ruolo"}),jsxRuntimeExports.jsx(Button,{onClick:or,variant:"destructive",className:"flex-1",children:"Rimuovi Dipendente"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsx(Button,{onClick:cr,variant:"outline",className:"w-full",size:"sm",children:"Annulla"})})]})}),$s&&Gs&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Conferma Eliminazione"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Sei sicuro di voler ",jsxRuntimeExports.jsx("strong",{children:"eliminare definitivamente"})," il dipendente",jsxRuntimeExports.jsxs("strong",{className:"text-red-600",children:[' "',Gs.name,'"']})," dall'applicazione?"]}),jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-4",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-800",children:[jsxRuntimeExports.jsx("strong",{children:" Attenzione:"})," Questa azione  ",jsxRuntimeExports.jsx("strong",{children:"irreversibile"}),". Tutti i dati associati a questo dipendente verranno persi permanentemente."]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>qs(!1),variant:"outline",className:"flex-1",children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:Nr,variant:"destructive",className:"flex-1",children:"Elimina Definitivamente"})]})]})})]}),jsxRuntimeExports.jsx(TabsContent,{value:"departments",children:jsxRuntimeExports.jsx(Departments,{currentUser:ts,departments:rs,setDepartments:ns})})]})})}function CustomCategoryManager({customCategories:_e=[],setCustomCategories:e,currentUser:St,showCustomCategoryManager:es,setShowCustomCategoryManager:ts}){const[ss,rs]=reactExports.useState(!1),[ns,is]=reactExports.useState(null),[os,us]=reactExports.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800",isAmbiente:!1}),ps=["bg-blue-100 text-blue-800","bg-red-100 text-red-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-indigo-100 text-indigo-800","bg-orange-100 text-orange-800","bg-teal-100 text-teal-800","bg-cyan-100 text-cyan-800"];reactExports.useEffect(()=>{localStorage.setItem("haccp-custom-categories",JSON.stringify(_e))},[_e]);const xs=()=>{us({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800",isAmbiente:!1}),is(null)},cs=ds=>{if(ds.preventDefault(),!os.name.trim()){alert("Compila il nome della categoria");return}let fs,Es;if(os.isAmbiente)fs=15,Es=25;else{if(!os.temperatureMin.trim()||!os.temperatureMax.trim()){alert('Compila i campi temperatura o seleziona "Temperatura ambiente"');return}if(fs=parseFloat(os.temperatureMin),Es=parseFloat(os.temperatureMax),isNaN(fs)||isNaN(Es)){alert("Inserisci temperature valide");return}if(fs>=Es){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}}if(ns){const Os=_e.map(Hs=>Hs.id===ns.id?{...Hs,name:os.name.trim(),description:os.description.trim(),temperatureMin:fs,temperatureMax:Es,temperature:os.isAmbiente?"15-25C (Ambiente)":`${fs}-${Es}C`,storageLocation:os.storageLocation.trim(),color:os.color,isAmbiente:os.isAmbiente,updatedAt:new Date().toISOString(),updatedBy:St==null?void 0:St.id,updatedByName:St==null?void 0:St.name}:Hs);e(Os)}else{const Os={id:Date.now().toString(),name:os.name.trim(),description:os.description.trim(),temperatureMin:fs,temperatureMax:Es,temperature:os.isAmbiente?"15-25C (Ambiente)":`${fs}-${Es}C`,storageLocation:os.storageLocation.trim(),color:os.color,isAmbiente:os.isAmbiente,createdAt:new Date().toISOString(),createdBy:St==null?void 0:St.id,createdByName:St==null?void 0:St.name,updatedAt:new Date().toISOString(),updatedBy:St==null?void 0:St.id,updatedByName:St==null?void 0:St.name};e([..._e,Os])}xs(),rs(!1)},ys=ds=>{is(ds),us({name:ds.name,description:ds.description||"",temperatureMin:ds.temperatureMin.toString(),temperatureMax:ds.temperatureMax.toString(),storageLocation:ds.storageLocation||"",color:ds.color,isAmbiente:ds.isAmbiente||!1}),rs(!0)},gs=ds=>{confirm("Sei sicuro di voler eliminare questa categoria? Questa azione non pu essere annullata.")&&e(_e.filter(fs=>fs.id!==ds))},vs=(ds,fs)=>{const Es=(ds+fs)/2;return Es<=-13.5?"Surgelato":Es>=15?"Temperatura Ambiente":"Refrigerato"};return jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),"Categorie Personalizzate"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Crea nuove categorie di prodotti specifiche per la tua attivit"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>{xs(),rs(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[jsxRuntimeExports.jsx(Plus,{className:"mr-2 h-4 w-4"}),"Nuova Categoria"]})}),ss&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsx(CardTitle,{children:ns?"Modifica Categoria":"Nuova Categoria Personalizzata"}),St&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:[ns?"Modificando come: ":"Creando come: ",jsxRuntimeExports.jsx("span",{className:"font-medium",children:St.name})," (",St.department,")"]})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:cs,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Categoria *"}),jsxRuntimeExports.jsx(Input,{id:"name",type:"text",value:os.name,onChange:ds=>us({...os,name:ds.target.value}),placeholder:"es. Prodotti Freschi, Specialit Regionali...",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"color",children:"Colore Identificativo"}),jsxRuntimeExports.jsx("select",{value:os.color,onChange:ds=>us({...os,color:ds.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:ps.map((ds,fs)=>jsxRuntimeExports.jsx("option",{value:ds,children:ds.replace("bg-","").replace("-100 text-"," - ").replace("-800","")},fs))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"description",children:"Descrizione"}),jsxRuntimeExports.jsx(Input,{id:"description",type:"text",value:os.description,onChange:ds=>us({...os,description:ds.target.value}),placeholder:"es. Prodotti freschi di produzione locale..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"isAmbiente",checked:os.isAmbiente,onChange:ds=>us({...os,isAmbiente:ds.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),jsxRuntimeExports.jsx(Label,{htmlFor:"isAmbiente",className:"text-sm font-medium text-gray-700",children:"Temperatura ambiente (15-25C)"})]}),!os.isAmbiente&&jsxRuntimeExports.jsx(TemperatureInput,{label:"Range Temperatura (C) *",minValue:os.temperatureMin,maxValue:os.temperatureMax,onMinChange:ds=>us({...os,temperatureMin:ds.target.value}),onMaxChange:ds=>us({...os,temperatureMax:ds.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temperature-range"}),os.isAmbiente&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4 text-blue-600"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-blue-800 font-medium",children:"Temperatura ambiente: 15-25C"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Questa categoria utilizzer automaticamente il range di temperatura ambiente per il monitoraggio HACCP."})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"storageLocation",children:"Posizione di Conservazione Suggerita"}),jsxRuntimeExports.jsx(Input,{id:"storageLocation",type:"text",value:os.storageLocation,onChange:ds=>us({...os,storageLocation:ds.target.value}),placeholder:"es. Ripiano superiore frigo, Scaffale dispensa..."})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4",children:[jsxRuntimeExports.jsxs(Button,{type:"submit",className:"flex-1",children:[ns?"Aggiorna":"Crea"," Categoria"]}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"outline",onClick:()=>{rs(!1),xs()},className:"flex-1",children:"Annulla"})]})]})})]}),_e.length>0?jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_e.map(ds=>jsxRuntimeExports.jsx(Card,{className:"hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start mb-3",children:[jsxRuntimeExports.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${ds.color}`,children:ds.name}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>ys(ds),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>gs(ds.id),className:"text-red-600 hover:text-red-700 hover:bg-red-100",children:jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"})})]})]}),ds.description&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:ds.description}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Temperatura:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.temperature}),ds.isAmbiente&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Ambiente"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Tipo:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:vs(ds.temperatureMin,ds.temperatureMax)})]}),ds.storageLocation&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Posizione:"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.storageLocation})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Creata da: ",ds.createdByName||"N/A"]}),jsxRuntimeExports.jsxs("p",{children:["Aggiornata: ",new Date(ds.updatedAt).toLocaleDateString("it-IT")]})]})]})},ds.id))}):jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-8 text-center text-gray-500",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium mb-2",children:"Nessuna categoria personalizzata"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Crea la tua prima categoria personalizzata per gestire prodotti specifici"})]})})]})})]})}function _typeof(_e){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(_e)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(_e,e){for(var St=new u16(31),es=0;es<31;++es)St[es]=e+=1<<_e[es-1];for(var ts=new i32(St[30]),es=1;es<30;++es)for(var ss=St[es];ss<St[es+1];++ss)ts[ss]=ss-St[es]<<5|es;return{b:St,r:ts}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(_e,e,St){for(var es=_e.length,ts=0,ss=new u16(e);ts<es;++ts)_e[ts]&&++ss[_e[ts]-1];var rs=new u16(e);for(ts=1;ts<e;++ts)rs[ts]=rs[ts-1]+ss[ts-1]<<1;var ns;if(St){ns=new u16(1<<e);var is=15-e;for(ts=0;ts<es;++ts)if(_e[ts])for(var os=ts<<4|_e[ts],us=e-_e[ts],ps=rs[_e[ts]-1]++<<us,xs=ps|(1<<us)-1;ps<=xs;++ps)ns[rev[ps]>>is]=os}else for(ns=new u16(es),ts=0;ts<es;++ts)_e[ts]&&(ns[ts]=rev[rs[_e[ts]-1]++]>>15-_e[ts]);return ns},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(_e){for(var e=_e[0],St=1;St<_e.length;++St)_e[St]>e&&(e=_e[St]);return e},bits=function(_e,e,St){var es=e/8|0;return(_e[es]|_e[es+1]<<8)>>(e&7)&St},bits16=function(_e,e){var St=e/8|0;return(_e[St]|_e[St+1]<<8|_e[St+2]<<16)>>(e&7)},shft=function(_e){return(_e+7)/8|0},slc=function(_e,e,St){return(e==null||e<0)&&(e=0),(St==null||St>_e.length)&&(St=_e.length),new u8(_e.subarray(e,St))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(_e,e,St){var es=new Error(e||ec[_e]);if(es.code=_e,Error.captureStackTrace&&Error.captureStackTrace(es,err),!St)throw es;return es},inflt=function(_e,e,St,es){var ts=_e.length,ss=es?es.length:0;if(!ts||e.f&&!e.l)return St||new u8(0);var rs=!St,ns=rs||e.i!=2,is=e.i;rs&&(St=new u8(ts*3));var os=function(Dr){var zr=St.length;if(Dr>zr){var or=new u8(Math.max(zr*2,Dr));or.set(St),St=or}},us=e.f||0,ps=e.p||0,xs=e.b||0,cs=e.l,ys=e.d,gs=e.m,vs=e.n,ds=ts*8;do{if(!cs){us=bits(_e,ps,1);var fs=bits(_e,ps+1,3);if(ps+=3,fs)if(fs==1)cs=flrm,ys=fdrm,gs=9,vs=5;else if(fs==2){var Qs=bits(_e,ps,31)+257,zs=bits(_e,ps+10,15)+4,Ls=Qs+bits(_e,ps+5,31)+1;ps+=14;for(var Bs=new u8(Ls),Gs=new u8(19),bs=0;bs<zs;++bs)Gs[clim[bs]]=bits(_e,ps+bs*3,7);ps+=zs*3;for(var As=max(Gs),ks=(1<<As)-1,$s=hMap(Gs,As,1),bs=0;bs<Ls;){var qs=$s[bits(_e,ps,ks)];ps+=qs&15;var Es=qs>>4;if(Es<16)Bs[bs++]=Es;else{var Cs=0,Us=0;for(Es==16?(Us=3+bits(_e,ps,3),ps+=2,Cs=Bs[bs-1]):Es==17?(Us=3+bits(_e,ps,7),ps+=3):Es==18&&(Us=11+bits(_e,ps,127),ps+=7);Us--;)Bs[bs++]=Cs}}var Ps=Bs.subarray(0,Qs),er=Bs.subarray(Qs);gs=max(Ps),vs=max(er),cs=hMap(Ps,gs,1),ys=hMap(er,vs,1)}else err(1);else{var Es=shft(ps)+4,Os=_e[Es-4]|_e[Es-3]<<8,Hs=Es+Os;if(Hs>ts){is&&err(0);break}ns&&os(xs+Os),St.set(_e.subarray(Es,Hs),xs),e.b=xs+=Os,e.p=ps=Hs*8,e.f=us;continue}if(ps>ds){is&&err(0);break}}ns&&os(xs+131072);for(var tr=(1<<gs)-1,vr=(1<<vs)-1,ws=ps;;ws=ps){var Cs=cs[bits16(_e,ps)&tr],Vs=Cs>>4;if(ps+=Cs&15,ps>ds){is&&err(0);break}if(Cs||err(2),Vs<256)St[xs++]=Vs;else if(Vs==256){ws=ps,cs=null;break}else{var Ys=Vs-254;if(Vs>264){var bs=Vs-257,Ws=fleb[bs];Ys=bits(_e,ps,(1<<Ws)-1)+fl[bs],ps+=Ws}var sr=ys[bits16(_e,ps)&vr],nr=sr>>4;sr||err(3),ps+=sr&15;var er=fd[nr];if(nr>3){var Ws=fdeb[nr];er+=bits16(_e,ps)&(1<<Ws)-1,ps+=Ws}if(ps>ds){is&&err(0);break}ns&&os(xs+131072);var pr=xs+Ys;if(xs<er){var xr=ss-er,Tr=Math.min(er,pr);for(xr+xs<0&&err(3);xs<Tr;++xs)St[xs]=es[xr+xs]}for(;xs<pr;++xs)St[xs]=St[xs-er]}}e.l=cs,e.p=ws,e.b=xs,e.f=us,cs&&(us=1,e.m=gs,e.d=ys,e.n=vs)}while(!us);return xs!=St.length&&rs?slc(St,0,xs):St.subarray(0,xs)},wbits=function(_e,e,St){St<<=e&7;var es=e/8|0;_e[es]|=St,_e[es+1]|=St>>8},wbits16=function(_e,e,St){St<<=e&7;var es=e/8|0;_e[es]|=St,_e[es+1]|=St>>8,_e[es+2]|=St>>16},hTree=function(_e,e){for(var St=[],es=0;es<_e.length;++es)_e[es]&&St.push({s:es,f:_e[es]});var ts=St.length,ss=St.slice();if(!ts)return{t:et$1,l:0};if(ts==1){var rs=new u8(St[0].s+1);return rs[St[0].s]=1,{t:rs,l:1}}St.sort(function(Hs,Qs){return Hs.f-Qs.f}),St.push({s:-1,f:25001});var ns=St[0],is=St[1],os=0,us=1,ps=2;for(St[0]={s:-1,f:ns.f+is.f,l:ns,r:is};us!=ts-1;)ns=St[St[os].f<St[ps].f?os++:ps++],is=St[os!=us&&St[os].f<St[ps].f?os++:ps++],St[us++]={s:-1,f:ns.f+is.f,l:ns,r:is};for(var xs=ss[0].s,es=1;es<ts;++es)ss[es].s>xs&&(xs=ss[es].s);var cs=new u16(xs+1),ys=ln(St[us-1],cs,0);if(ys>e){var es=0,gs=0,vs=ys-e,ds=1<<vs;for(ss.sort(function(Qs,zs){return cs[zs.s]-cs[Qs.s]||Qs.f-zs.f});es<ts;++es){var fs=ss[es].s;if(cs[fs]>e)gs+=ds-(1<<ys-cs[fs]),cs[fs]=e;else break}for(gs>>=vs;gs>0;){var Es=ss[es].s;cs[Es]<e?gs-=1<<e-cs[Es]++-1:++es}for(;es>=0&&gs;--es){var Os=ss[es].s;cs[Os]==e&&(--cs[Os],++gs)}ys=e}return{t:new u8(cs),l:ys}},ln=function(_e,e,St){return _e.s==-1?Math.max(ln(_e.l,e,St+1),ln(_e.r,e,St+1)):e[_e.s]=St},lc=function(_e){for(var e=_e.length;e&&!_e[--e];);for(var St=new u16(++e),es=0,ts=_e[0],ss=1,rs=function(is){St[es++]=is},ns=1;ns<=e;++ns)if(_e[ns]==ts&&ns!=e)++ss;else{if(!ts&&ss>2){for(;ss>138;ss-=138)rs(32754);ss>2&&(rs(ss>10?ss-11<<5|28690:ss-3<<5|12305),ss=0)}else if(ss>3){for(rs(ts),--ss;ss>6;ss-=6)rs(8304);ss>2&&(rs(ss-3<<5|8208),ss=0)}for(;ss--;)rs(ts);ss=1,ts=_e[ns]}return{c:St.subarray(0,es),n:e}},clen=function(_e,e){for(var St=0,es=0;es<e.length;++es)St+=_e[es]*e[es];return St},wfblk=function(_e,e,St){var es=St.length,ts=shft(e+2);_e[ts]=es&255,_e[ts+1]=es>>8,_e[ts+2]=_e[ts]^255,_e[ts+3]=_e[ts+1]^255;for(var ss=0;ss<es;++ss)_e[ts+ss+4]=St[ss];return(ts+4+es)*8},wblk=function(_e,e,St,es,ts,ss,rs,ns,is,os,us){wbits(e,us++,St),++ts[256];for(var ps=hTree(ts,15),xs=ps.t,cs=ps.l,ys=hTree(ss,15),gs=ys.t,vs=ys.l,ds=lc(xs),fs=ds.c,Es=ds.n,Os=lc(gs),Hs=Os.c,Qs=Os.n,zs=new u16(19),Ls=0;Ls<fs.length;++Ls)++zs[fs[Ls]&31];for(var Ls=0;Ls<Hs.length;++Ls)++zs[Hs[Ls]&31];for(var Bs=hTree(zs,7),Gs=Bs.t,bs=Bs.l,As=19;As>4&&!Gs[clim[As-1]];--As);var ks=os+5<<3,$s=clen(ts,flt)+clen(ss,fdt)+rs,qs=clen(ts,xs)+clen(ss,gs)+rs+14+3*As+clen(zs,Gs)+2*zs[16]+3*zs[17]+7*zs[18];if(is>=0&&ks<=$s&&ks<=qs)return wfblk(e,us,_e.subarray(is,is+os));var Cs,Us,Ps,er;if(wbits(e,us,1+(qs<$s)),us+=2,qs<$s){Cs=hMap(xs,cs,0),Us=xs,Ps=hMap(gs,vs,0),er=gs;var tr=hMap(Gs,bs,0);wbits(e,us,Es-257),wbits(e,us+5,Qs-1),wbits(e,us+10,As-4),us+=14;for(var Ls=0;Ls<As;++Ls)wbits(e,us+3*Ls,Gs[clim[Ls]]);us+=3*As;for(var vr=[fs,Hs],ws=0;ws<2;++ws)for(var Vs=vr[ws],Ls=0;Ls<Vs.length;++Ls){var Ys=Vs[Ls]&31;wbits(e,us,tr[Ys]),us+=Gs[Ys],Ys>15&&(wbits(e,us,Vs[Ls]>>5&127),us+=Vs[Ls]>>12)}}else Cs=flm,Us=flt,Ps=fdm,er=fdt;for(var Ls=0;Ls<ns;++Ls){var Ws=es[Ls];if(Ws>255){var Ys=Ws>>18&31;wbits16(e,us,Cs[Ys+257]),us+=Us[Ys+257],Ys>7&&(wbits(e,us,Ws>>23&31),us+=fleb[Ys]);var sr=Ws&31;wbits16(e,us,Ps[sr]),us+=er[sr],sr>3&&(wbits16(e,us,Ws>>5&8191),us+=fdeb[sr])}else wbits16(e,us,Cs[Ws]),us+=Us[Ws]}return wbits16(e,us,Cs[256]),us+Us[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(_e,e,St,es,ts,ss){var rs=ss.z||_e.length,ns=new u8(es+rs+5*(1+Math.ceil(rs/7e3))+ts),is=ns.subarray(es,ns.length-ts),os=ss.l,us=(ss.r||0)&7;if(e){us&&(is[0]=ss.r>>3);for(var ps=deo[e-1],xs=ps>>13,cs=ps&8191,ys=(1<<St)-1,gs=ss.p||new u16(32768),vs=ss.h||new u16(ys+1),ds=Math.ceil(St/3),fs=2*ds,Es=function(Nr){return(_e[Nr]^_e[Nr+1]<<ds^_e[Nr+2]<<fs)&ys},Os=new i32(25e3),Hs=new u16(288),Qs=new u16(32),zs=0,Ls=0,Bs=ss.i||0,Gs=0,bs=ss.w||0,As=0;Bs+2<rs;++Bs){var ks=Es(Bs),$s=Bs&32767,qs=vs[ks];if(gs[$s]=qs,vs[ks]=$s,bs<=Bs){var Cs=rs-Bs;if((zs>7e3||Gs>24576)&&(Cs>423||!os)){us=wblk(_e,is,0,Os,Hs,Qs,Ls,Gs,As,Bs-As,us),Gs=zs=Ls=0,As=Bs;for(var Us=0;Us<286;++Us)Hs[Us]=0;for(var Us=0;Us<30;++Us)Qs[Us]=0}var Ps=2,er=0,tr=cs,vr=$s-qs&32767;if(Cs>2&&ks==Es(Bs-vr))for(var ws=Math.min(xs,Cs)-1,Vs=Math.min(32767,Bs),Ys=Math.min(258,Cs);vr<=Vs&&--tr&&$s!=qs;){if(_e[Bs+Ps]==_e[Bs+Ps-vr]){for(var Ws=0;Ws<Ys&&_e[Bs+Ws]==_e[Bs+Ws-vr];++Ws);if(Ws>Ps){if(Ps=Ws,er=vr,Ws>ws)break;for(var sr=Math.min(vr,Ws-2),nr=0,Us=0;Us<sr;++Us){var pr=Bs-vr+Us&32767,xr=gs[pr],Tr=pr-xr&32767;Tr>nr&&(nr=Tr,qs=pr)}}}$s=qs,qs=gs[$s],vr+=$s-qs&32767}if(er){Os[Gs++]=268435456|revfl[Ps]<<18|revfd[er];var Dr=revfl[Ps]&31,zr=revfd[er]&31;Ls+=fleb[Dr]+fdeb[zr],++Hs[257+Dr],++Qs[zr],bs=Bs+Ps,++zs}else Os[Gs++]=_e[Bs],++Hs[_e[Bs]]}}for(Bs=Math.max(Bs,bs);Bs<rs;++Bs)Os[Gs++]=_e[Bs],++Hs[_e[Bs]];us=wblk(_e,is,os,Os,Hs,Qs,Ls,Gs,As,Bs-As,us),os||(ss.r=us&7|is[us/8|0]<<3,us-=7,ss.h=vs,ss.p=gs,ss.i=Bs,ss.w=bs)}else{for(var Bs=ss.w||0;Bs<rs+os;Bs+=65535){var or=Bs+65535;or>=rs&&(is[us/8|0]=os,or=rs),us=wfblk(is,us+1,_e.subarray(Bs,or))}ss.i=rs}return slc(ns,0,es+shft(us)+ts)},adler=function(){var _e=1,e=0;return{p:function(St){for(var es=_e,ts=e,ss=St.length|0,rs=0;rs!=ss;){for(var ns=Math.min(rs+2655,ss);rs<ns;++rs)ts+=es+=St[rs];es=(es&65535)+15*(es>>16),ts=(ts&65535)+15*(ts>>16)}_e=es,e=ts},d:function(){return _e%=65521,e%=65521,(_e&255)<<24|(_e&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(_e,e,St,es,ts){if(!ts&&(ts={l:1},e.dictionary)){var ss=e.dictionary.subarray(-32768),rs=new u8(ss.length+_e.length);rs.set(ss),rs.set(_e,ss.length),_e=rs,ts.w=ss.length}return dflt(_e,e.level==null?6:e.level,e.mem==null?ts.l?Math.ceil(Math.max(8,Math.min(13,Math.log(_e.length)))*1.5):20:12+e.mem,St,es,ts)},wbytes=function(_e,e,St){for(;St;++e)_e[e]=St,St>>>=8},zlh=function(_e,e){var St=e.level,es=St==0?0:St<6?1:St==9?3:2;if(_e[0]=120,_e[1]=es<<6|(e.dictionary&&32),_e[1]|=31-(_e[0]<<8|_e[1])%31,e.dictionary){var ts=adler();ts.p(e.dictionary),wbytes(_e,2,ts.d())}},zls=function(_e,e){return((_e[0]&15)!=8||_e[0]>>4>7||(_e[0]<<8|_e[1])%31)&&err(6,"invalid zlib data"),(_e[1]>>5&1)==+!e&&err(6,"invalid zlib data: "+(_e[1]&32?"need":"unexpected")+" dictionary"),(_e[1]>>3&4)+2};function zlibSync(_e,e){e||(e={});var St=adler();St.p(_e);var es=dopt(_e,e,e.dictionary?6:2,4);return zlh(es,e),wbytes(es,es.length-4,St.d()),es}function unzlibSync(_e,e){return inflt(_e.subarray(zls(_e,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch{}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(_e){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(_e){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(_e))}};function o(_e,e,St){var es=new XMLHttpRequest;es.open("GET",_e),es.responseType="blob",es.onload=function(){l(es.response,e,St)},es.onerror=function(){a.error("could not download file")},es.send()}function s(_e){var e=new XMLHttpRequest;e.open("HEAD",_e,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(_e){try{_e.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_e.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(_e,e,St){var es=n.URL||n.webkitURL,ts=document.createElement("a");e=e||_e.name||"download",ts.download=e,ts.rel="noopener",typeof _e=="string"?(ts.href=_e,ts.origin!==location.origin?s(ts.href)?o(_e,e,St):c(ts,ts.target="_blank"):c(ts)):(ts.href=es.createObjectURL(_e),setTimeout(function(){es.revokeObjectURL(ts.href)},4e4),setTimeout(function(){c(ts)},0))}:"msSaveOrOpenBlob"in navigator?function(_e,e,St){if(e=e||_e.name||"download",typeof _e=="string")if(s(_e))o(_e,e,St);else{var es=document.createElement("a");es.href=_e,es.target="_blank",setTimeout(function(){c(es)})}else navigator.msSaveOrOpenBlob(function(ts,ss){return ss===void 0?ss={autoBom:!1}:_typeof(ss)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),ss={autoBom:!ss}),ss.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ts.type)?new Blob([String.fromCharCode(65279),ts],{type:ts.type}):ts}(_e,St),e)}:function(_e,e,St,es){if((es=es||open("","_blank"))&&(es.document.title=es.document.body.innerText="downloading..."),typeof _e=="string")return o(_e,e,St);var ts=_e.type==="application/octet-stream",ss=/constructor/i.test(n.HTMLElement)||n.safari,rs=/CriOS\/[\d]+/.test(navigator.userAgent);if((rs||ts&&ss)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var ns=new FileReader;ns.onloadend=function(){var us=ns.result;us=rs?us:us.replace(/^data:[^;]*;/,"data:attachment/file;"),es?es.location.href=us:location=us,es=null},ns.readAsDataURL(_e)}else{var is=n.URL||n.webkitURL,os=is.createObjectURL(_e);es?es.location=os:location.href=os,es=null,setTimeout(function(){is.revokeObjectURL(os)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(_e){var e;_e=_e||"",this.ok=!1,_e.charAt(0)=="#"&&(_e=_e.substr(1,6)),_e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[_e=(_e=_e.replace(/ /g,"")).toLowerCase()]||_e;for(var St=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(ns){return[parseInt(ns[1]),parseInt(ns[2]),parseInt(ns[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(ns){return[parseInt(ns[1],16),parseInt(ns[2],16),parseInt(ns[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(ns){return[parseInt(ns[1]+ns[1],16),parseInt(ns[2]+ns[2],16),parseInt(ns[3]+ns[3],16)]}}],es=0;es<St.length;es++){var ts=St[es].re,ss=St[es].process,rs=ts.exec(_e);rs&&(e=ss(rs),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var ns=this.r.toString(16),is=this.g.toString(16),os=this.b.toString(16);return ns.length==1&&(ns="0"+ns),is.length==1&&(is="0"+is),os.length==1&&(os="0"+os),"#"+ns+is+os}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(_e,e){var St=_e[0],es=_e[1],ts=_e[2],ss=_e[3];St=g(St,es,ts,ss,e[0],7,-680876936),ss=g(ss,St,es,ts,e[1],12,-389564586),ts=g(ts,ss,St,es,e[2],17,606105819),es=g(es,ts,ss,St,e[3],22,-1044525330),St=g(St,es,ts,ss,e[4],7,-176418897),ss=g(ss,St,es,ts,e[5],12,1200080426),ts=g(ts,ss,St,es,e[6],17,-1473231341),es=g(es,ts,ss,St,e[7],22,-45705983),St=g(St,es,ts,ss,e[8],7,1770035416),ss=g(ss,St,es,ts,e[9],12,-1958414417),ts=g(ts,ss,St,es,e[10],17,-42063),es=g(es,ts,ss,St,e[11],22,-1990404162),St=g(St,es,ts,ss,e[12],7,1804603682),ss=g(ss,St,es,ts,e[13],12,-40341101),ts=g(ts,ss,St,es,e[14],17,-1502002290),St=m(St,es=g(es,ts,ss,St,e[15],22,1236535329),ts,ss,e[1],5,-165796510),ss=m(ss,St,es,ts,e[6],9,-1069501632),ts=m(ts,ss,St,es,e[11],14,643717713),es=m(es,ts,ss,St,e[0],20,-373897302),St=m(St,es,ts,ss,e[5],5,-701558691),ss=m(ss,St,es,ts,e[10],9,38016083),ts=m(ts,ss,St,es,e[15],14,-660478335),es=m(es,ts,ss,St,e[4],20,-405537848),St=m(St,es,ts,ss,e[9],5,568446438),ss=m(ss,St,es,ts,e[14],9,-1019803690),ts=m(ts,ss,St,es,e[3],14,-187363961),es=m(es,ts,ss,St,e[8],20,1163531501),St=m(St,es,ts,ss,e[13],5,-1444681467),ss=m(ss,St,es,ts,e[2],9,-51403784),ts=m(ts,ss,St,es,e[7],14,1735328473),St=v(St,es=m(es,ts,ss,St,e[12],20,-1926607734),ts,ss,e[5],4,-378558),ss=v(ss,St,es,ts,e[8],11,-2022574463),ts=v(ts,ss,St,es,e[11],16,1839030562),es=v(es,ts,ss,St,e[14],23,-35309556),St=v(St,es,ts,ss,e[1],4,-1530992060),ss=v(ss,St,es,ts,e[4],11,1272893353),ts=v(ts,ss,St,es,e[7],16,-155497632),es=v(es,ts,ss,St,e[10],23,-1094730640),St=v(St,es,ts,ss,e[13],4,681279174),ss=v(ss,St,es,ts,e[0],11,-358537222),ts=v(ts,ss,St,es,e[3],16,-722521979),es=v(es,ts,ss,St,e[6],23,76029189),St=v(St,es,ts,ss,e[9],4,-640364487),ss=v(ss,St,es,ts,e[12],11,-421815835),ts=v(ts,ss,St,es,e[15],16,530742520),St=b(St,es=v(es,ts,ss,St,e[2],23,-995338651),ts,ss,e[0],6,-198630844),ss=b(ss,St,es,ts,e[7],10,1126891415),ts=b(ts,ss,St,es,e[14],15,-1416354905),es=b(es,ts,ss,St,e[5],21,-57434055),St=b(St,es,ts,ss,e[12],6,1700485571),ss=b(ss,St,es,ts,e[3],10,-1894986606),ts=b(ts,ss,St,es,e[10],15,-1051523),es=b(es,ts,ss,St,e[1],21,-2054922799),St=b(St,es,ts,ss,e[8],6,1873313359),ss=b(ss,St,es,ts,e[15],10,-30611744),ts=b(ts,ss,St,es,e[6],15,-1560198380),es=b(es,ts,ss,St,e[13],21,1309151649),St=b(St,es,ts,ss,e[4],6,-145523070),ss=b(ss,St,es,ts,e[11],10,-1120210379),ts=b(ts,ss,St,es,e[2],15,718787259),es=b(es,ts,ss,St,e[9],21,-343485551),_e[0]=_(St,_e[0]),_e[1]=_(es,_e[1]),_e[2]=_(ts,_e[2]),_e[3]=_(ss,_e[3])}function p(_e,e,St,es,ts,ss){return e=_(_(e,_e),_(es,ss)),_(e<<ts|e>>>32-ts,St)}function g(_e,e,St,es,ts,ss,rs){return p(e&St|~e&es,_e,e,ts,ss,rs)}function m(_e,e,St,es,ts,ss,rs){return p(e&es|St&~es,_e,e,ts,ss,rs)}function v(_e,e,St,es,ts,ss,rs){return p(e^St^es,_e,e,ts,ss,rs)}function b(_e,e,St,es,ts,ss,rs){return p(St^(e|~es),_e,e,ts,ss,rs)}function y(_e){var e,St=_e.length,es=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=_e.length;e+=64)d(es,w(_e.substring(e-64,e)));_e=_e.substring(e-64);var ts=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<_e.length;e++)ts[e>>2]|=_e.charCodeAt(e)<<(e%4<<3);if(ts[e>>2]|=128<<(e%4<<3),e>55)for(d(es,ts),e=0;e<16;e++)ts[e]=0;return ts[14]=8*St,d(es,ts),es}function w(_e){var e,St=[];for(e=0;e<64;e+=4)St[e>>2]=_e.charCodeAt(e)+(_e.charCodeAt(e+1)<<8)+(_e.charCodeAt(e+2)<<16)+(_e.charCodeAt(e+3)<<24);return St}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(_e){for(var e="",St=0;St<4;St++)e+=N[_e>>8*St+4&15]+N[_e>>8*St&15];return e}function A(_e){return String.fromCharCode((255&_e)>>0,(65280&_e)>>8,(16711680&_e)>>16,(4278190080&_e)>>24)}function x(_e){return y(_e).map(A).join("")}var S=function(_e){for(var e=0;e<_e.length;e++)_e[e]=L(_e[e]);return _e.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(_e,e){if(S){var St=(65535&_e)+(65535&e);return(_e>>16)+(e>>16)+(St>>16)<<16|65535&St}return _e+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(_e,e){var St,es,ts,ss;if(_e!==St){for(var rs=(ts=_e,ss=1+(256/_e.length>>0),new Array(ss+1).join(ts)),ns=[],is=0;is<256;is++)ns[is]=is;var os=0;for(is=0;is<256;is++){var us=ns[is];os=(os+us+rs.charCodeAt(is))%256,ns[is]=ns[os],ns[os]=us}St=_e,es=ns}else ns=es;var ps=e.length,xs=0,cs=0,ys="";for(is=0;is<ps;is++)cs=(cs+(us=ns[xs=(xs+1)%256]))%256,ns[xs]=ns[cs],ns[cs]=us,rs=ns[(ns[xs]+ns[cs])%256],ys+=String.fromCharCode(e.charCodeAt(is)^rs);return ys}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(_e,e,St,es){this.v=1,this.r=2;var ts=192;_e.forEach(function(ns){if(k.perm!==void 0)throw new Error("Invalid permission: "+ns);ts+=k[ns]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var ss=(e+this.padding).substr(0,32),rs=(St+this.padding).substr(0,32);this.O=this.processOwnerPassword(ss,rs),this.P=-(1+(255^ts)),this.encryptionKey=x(ss+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(es)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(_e){if(/[^\u0000-\u00ff]/.test(_e))throw new Error("Invalid PDF Name Object: "+_e+", Only accept ASCII characters.");for(var e="",St=_e.length,es=0;es<St;es++){var ts=_e.charCodeAt(es);ts<33||ts===35||ts===37||ts===40||ts===41||ts===47||ts===60||ts===62||ts===91||ts===93||ts===123||ts===125||ts>126?e+="#"+("0"+ts.toString(16)).slice(-2):e+=_e[es]}return e}function C(_e){if(_typeof(_e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(St,es,ts){if(ts=ts||!1,typeof St!="string"||typeof es!="function"||typeof ts!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(St)||(e[St]={});var ss=Math.random().toString(35);return e[St][ss]=[es,!!ts],ss},this.unsubscribe=function(St){for(var es in e)if(e[es][St])return delete e[es][St],Object.keys(e[es]).length===0&&delete e[es],!0;return!1},this.publish=function(St){if(e.hasOwnProperty(St)){var es=Array.prototype.slice.call(arguments,1),ts=[];for(var ss in e[St]){var rs=e[St][ss];try{rs[0].apply(_e,es)}catch(ns){n.console&&a.error("jsPDF PubSub Error",ns.message,ns)}rs[1]&&ts.push(ss)}ts.length&&ts.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(_e){if(!(this instanceof j))return new j(_e);var e="opacity,stroke-opacity".split(",");for(var St in _e)_e.hasOwnProperty(St)&&e.indexOf(St)>=0&&(this[St]=_e[St]);this.id="",this.objectNumber=-1}function O(_e,e){this.gState=_e,this.matrix=e,this.id="",this.objectNumber=-1}function B(_e,e,St,es,ts){if(!(this instanceof B))return new B(_e,e,St,es,ts);this.type=_e==="axial"?2:3,this.coords=e,this.colors=St,O.call(this,es,ts)}function M(_e,e,St,es,ts){if(!(this instanceof M))return new M(_e,e,St,es,ts);this.boundingBox=_e,this.xStep=e,this.yStep=St,this.stream="",this.cloneIndex=0,O.call(this,es,ts)}function E(_e){var e,St=typeof arguments[0]=="string"?arguments[0]:"p",es=arguments[1],ts=arguments[2],ss=arguments[3],rs=[],ns=1,is=16,os="S",us=null;_typeof(_e=_e||{})==="object"&&(St=_e.orientation,es=_e.unit||es,ts=_e.format||ts,ss=_e.compress||_e.compressPdf||ss,(us=_e.encryption||null)!==null&&(us.userPassword=us.userPassword||"",us.ownerPassword=us.ownerPassword||"",us.userPermissions=us.userPermissions||[]),ns=typeof _e.userUnit=="number"?Math.abs(_e.userUnit):1,_e.precision!==void 0&&(e=_e.precision),_e.floatPrecision!==void 0&&(is=_e.floatPrecision),os=_e.defaultPathOperation||"S"),rs=_e.filters||(ss===!0?["FlateEncode"]:rs),es=es||"mm",St=(""+(St||"P")).toLowerCase();var ps=_e.putOnlyUsedFonts||!1,xs={},cs={internal:{},__private__:{}};cs.__private__.PubSub=C;var ys="1.3",gs=cs.__private__.getPdfVersion=function(){return ys};cs.__private__.setPdfVersion=function(ms){ys=ms};var vs={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};cs.__private__.getPageFormats=function(){return vs};var ds=cs.__private__.getPageFormat=function(ms){return vs[ms]};ts=ts||"a4";var fs={COMPAT:"compat",ADVANCED:"advanced"},Es=fs.COMPAT;function Os(){this.saveGraphicsState(),Ns(new an(kr,0,0,-kr,0,Ll()*kr).toString()+" cm"),this.setFontSize(this.getFontSize()/kr),os="n",Es=fs.ADVANCED}function Hs(){this.restoreGraphicsState(),os="S",Es=fs.COMPAT}var Qs=cs.__private__.combineFontStyleAndFontWeight=function(ms,Ss){if(ms=="bold"&&Ss=="normal"||ms=="bold"&&Ss==400||ms=="normal"&&Ss=="italic"||ms=="bold"&&Ss=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ss&&(ms=Ss==400||Ss==="normal"?ms==="italic"?"italic":"normal":Ss!=700&&Ss!=="bold"||ms!=="normal"?(Ss==700?"bold":Ss)+""+ms:"bold"),ms};cs.advancedAPI=function(ms){var Ss=Es===fs.COMPAT;return Ss&&Os.call(this),typeof ms!="function"||(ms(this),Ss&&Hs.call(this)),this},cs.compatAPI=function(ms){var Ss=Es===fs.ADVANCED;return Ss&&Hs.call(this),typeof ms!="function"||(ms(this),Ss&&Os.call(this)),this},cs.isAdvancedAPI=function(){return Es===fs.ADVANCED};var zs,Ls=function(ms){if(Es!==fs.ADVANCED)throw new Error(ms+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Bs=cs.roundToPrecision=cs.__private__.roundToPrecision=function(ms,Ss){var Zs=e||Ss;if(isNaN(ms)||isNaN(Zs))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ms.toFixed(Zs).replace(/0+$/,"")};zs=cs.hpf=cs.__private__.hpf=typeof is=="number"?function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.hpf");return Bs(ms,is)}:is==="smart"?function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.hpf");return Bs(ms,ms>-1&&ms<1?16:5)}:function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.hpf");return Bs(ms,16)};var Gs=cs.f2=cs.__private__.f2=function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.f2");return Bs(ms,2)},bs=cs.__private__.f3=function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.f3");return Bs(ms,3)},As=cs.scale=cs.__private__.scale=function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.scale");return Es===fs.COMPAT?ms*kr:Es===fs.ADVANCED?ms:void 0},ks=function(ms){return Es===fs.COMPAT?Ll()-ms:Es===fs.ADVANCED?ms:void 0},$s=function(ms){return As(ks(ms))};cs.__private__.setPrecision=cs.setPrecision=function(ms){typeof parseInt(ms,10)=="number"&&(e=parseInt(ms,10))};var qs,Cs="00000000000000000000000000000000",Us=cs.__private__.getFileId=function(){return Cs},Ps=cs.__private__.setFileId=function(ms){return Cs=ms!==void 0&&/^[a-fA-F0-9]{32}$/.test(ms)?ms.toUpperCase():Cs.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),us!==null&&(io=new I(us.userPermissions,us.userPassword,us.ownerPassword,Cs)),Cs};cs.setFileId=function(ms){return Ps(ms),this},cs.getFileId=function(){return Us()};var er=cs.__private__.convertDateToPDFDate=function(ms){var Ss=ms.getTimezoneOffset(),Zs=Ss<0?"+":"-",rr=Math.floor(Math.abs(Ss/60)),hr=Math.abs(Ss%60),Cr=[Zs,Ys(rr),"'",Ys(hr),"'"].join("");return["D:",ms.getFullYear(),Ys(ms.getMonth()+1),Ys(ms.getDate()),Ys(ms.getHours()),Ys(ms.getMinutes()),Ys(ms.getSeconds()),Cr].join("")},tr=cs.__private__.convertPDFDateToDate=function(ms){var Ss=parseInt(ms.substr(2,4),10),Zs=parseInt(ms.substr(6,2),10)-1,rr=parseInt(ms.substr(8,2),10),hr=parseInt(ms.substr(10,2),10),Cr=parseInt(ms.substr(12,2),10),Fr=parseInt(ms.substr(14,2),10);return new Date(Ss,Zs,rr,hr,Cr,Fr,0)},vr=cs.__private__.setCreationDate=function(ms){var Ss;if(ms===void 0&&(ms=new Date),ms instanceof Date)Ss=er(ms);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ms))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ss=ms}return qs=Ss},ws=cs.__private__.getCreationDate=function(ms){var Ss=qs;return ms==="jsDate"&&(Ss=tr(qs)),Ss};cs.setCreationDate=function(ms){return vr(ms),this},cs.getCreationDate=function(ms){return ws(ms)};var Vs,Ys=cs.__private__.padd2=function(ms){return("0"+parseInt(ms)).slice(-2)},Ws=cs.__private__.padd2Hex=function(ms){return("00"+(ms=ms.toString())).substr(ms.length)},sr=0,nr=[],pr=[],xr=0,Tr=[],Dr=[],zr=!1,or=pr,Nr=function(){sr=0,xr=0,pr=[],nr=[],Tr=[],ho=On(),no=On()};cs.__private__.setCustomOutputDestination=function(ms){zr=!0,or=ms};var cr=function(ms){zr||(or=ms)};cs.__private__.resetCustomOutputDestination=function(){zr=!1,or=pr};var Ns=cs.__private__.out=function(ms){return ms=ms.toString(),xr+=ms.length+1,or.push(ms),or},jr=cs.__private__.write=function(ms){return Ns(arguments.length===1?ms.toString():Array.prototype.join.call(arguments," "))},wr=cs.__private__.getArrayBuffer=function(ms){for(var Ss=ms.length,Zs=new ArrayBuffer(Ss),rr=new Uint8Array(Zs);Ss--;)rr[Ss]=ms.charCodeAt(Ss);return Zs},dr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];cs.__private__.getStandardFonts=function(){return dr};var lr=_e.fontSize||16;cs.__private__.setFontSize=cs.setFontSize=function(ms){return lr=Es===fs.ADVANCED?ms/kr:ms,this};var _r,Ar=cs.__private__.getFontSize=cs.getFontSize=function(){return Es===fs.COMPAT?lr:lr*kr},Vr=_e.R2L||!1;cs.__private__.setR2L=cs.setR2L=function(ms){return Vr=ms,this},cs.__private__.getR2L=cs.getR2L=function(){return Vr};var Kr,_s=cs.__private__.setZoomMode=function(ms){var Ss=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ms))_r=ms;else if(isNaN(ms)){if(Ss.indexOf(ms)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ms+'" is not recognized.');_r=ms}else _r=parseInt(ms,10)};cs.__private__.getZoomMode=function(){return _r};var Ks,yr=cs.__private__.setPageMode=function(ms){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ms)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ms+'" is not recognized.');Kr=ms};cs.__private__.getPageMode=function(){return Kr};var Ur=cs.__private__.setLayoutMode=function(ms){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ms)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ms+'" is not recognized.');Ks=ms};cs.__private__.getLayoutMode=function(){return Ks},cs.__private__.setDisplayMode=cs.setDisplayMode=function(ms,Ss,Zs){return _s(ms),Ur(Ss),yr(Zs),this};var Or={title:"",subject:"",author:"",keywords:"",creator:""};cs.__private__.getDocumentProperty=function(ms){if(Object.keys(Or).indexOf(ms)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Or[ms]},cs.__private__.getDocumentProperties=function(){return Or},cs.__private__.setDocumentProperties=cs.setProperties=cs.setDocumentProperties=function(ms){for(var Ss in Or)Or.hasOwnProperty(Ss)&&ms[Ss]&&(Or[Ss]=ms[Ss]);return this},cs.__private__.setDocumentProperty=function(ms,Ss){if(Object.keys(Or).indexOf(ms)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Or[ms]=Ss};var Ir,kr,Zr,Gr,nn,tn={},en={},un=[],Qr={},Un={},Sn={},Hn={},$n=null,An=0,Hr=[],dn=new C(cs),So=_e.hotfixes||[],vn={},oo={},Jn=[],an=function ms(Ss,Zs,rr,hr,Cr,Fr){if(!(this instanceof ms))return new ms(Ss,Zs,rr,hr,Cr,Fr);isNaN(Ss)&&(Ss=1),isNaN(Zs)&&(Zs=0),isNaN(rr)&&(rr=0),isNaN(hr)&&(hr=1),isNaN(Cr)&&(Cr=0),isNaN(Fr)&&(Fr=0),this._matrix=[Ss,Zs,rr,hr,Cr,Fr]};Object.defineProperty(an.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ms){this._matrix[0]=ms}}),Object.defineProperty(an.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ms){this._matrix[1]=ms}}),Object.defineProperty(an.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ms){this._matrix[2]=ms}}),Object.defineProperty(an.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ms){this._matrix[3]=ms}}),Object.defineProperty(an.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ms){this._matrix[4]=ms}}),Object.defineProperty(an.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ms){this._matrix[5]=ms}}),Object.defineProperty(an.prototype,"a",{get:function(){return this._matrix[0]},set:function(ms){this._matrix[0]=ms}}),Object.defineProperty(an.prototype,"b",{get:function(){return this._matrix[1]},set:function(ms){this._matrix[1]=ms}}),Object.defineProperty(an.prototype,"c",{get:function(){return this._matrix[2]},set:function(ms){this._matrix[2]=ms}}),Object.defineProperty(an.prototype,"d",{get:function(){return this._matrix[3]},set:function(ms){this._matrix[3]=ms}}),Object.defineProperty(an.prototype,"e",{get:function(){return this._matrix[4]},set:function(ms){this._matrix[4]=ms}}),Object.defineProperty(an.prototype,"f",{get:function(){return this._matrix[5]},set:function(ms){this._matrix[5]=ms}}),Object.defineProperty(an.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(an.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(an.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(an.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),an.prototype.join=function(ms){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(zs).join(ms)},an.prototype.multiply=function(ms){var Ss=ms.sx*this.sx+ms.shy*this.shx,Zs=ms.sx*this.shy+ms.shy*this.sy,rr=ms.shx*this.sx+ms.sy*this.shx,hr=ms.shx*this.shy+ms.sy*this.sy,Cr=ms.tx*this.sx+ms.ty*this.shx+this.tx,Fr=ms.tx*this.shy+ms.ty*this.sy+this.ty;return new an(Ss,Zs,rr,hr,Cr,Fr)},an.prototype.decompose=function(){var ms=this.sx,Ss=this.shy,Zs=this.shx,rr=this.sy,hr=this.tx,Cr=this.ty,Fr=Math.sqrt(ms*ms+Ss*Ss),Yr=(ms/=Fr)*Zs+(Ss/=Fr)*rr;Zs-=ms*Yr,rr-=Ss*Yr;var rn=Math.sqrt(Zs*Zs+rr*rr);return Yr/=rn,ms*(rr/=rn)<Ss*(Zs/=rn)&&(ms=-ms,Ss=-Ss,Yr=-Yr,Fr=-Fr),{scale:new an(Fr,0,0,rn,0,0),translate:new an(1,0,0,1,hr,Cr),rotate:new an(ms,Ss,-Ss,ms,0,0),skew:new an(1,0,Yr,1,0,0)}},an.prototype.toString=function(ms){return this.join(" ")},an.prototype.inversed=function(){var ms=this.sx,Ss=this.shy,Zs=this.shx,rr=this.sy,hr=this.tx,Cr=this.ty,Fr=1/(ms*rr-Ss*Zs),Yr=rr*Fr,rn=-Ss*Fr,gn=-Zs*Fr,fn=ms*Fr;return new an(Yr,rn,gn,fn,-Yr*hr-gn*Cr,-rn*hr-fn*Cr)},an.prototype.applyToPoint=function(ms){var Ss=ms.x*this.sx+ms.y*this.shx+this.tx,Zs=ms.x*this.shy+ms.y*this.sy+this.ty;return new uu(Ss,Zs)},an.prototype.applyToRectangle=function(ms){var Ss=this.applyToPoint(ms),Zs=this.applyToPoint(new uu(ms.x+ms.w,ms.y+ms.h));return new Iu(Ss.x,Ss.y,Zs.x-Ss.x,Zs.y-Ss.y)},an.prototype.clone=function(){var ms=this.sx,Ss=this.shy,Zs=this.shx,rr=this.sy,hr=this.tx,Cr=this.ty;return new an(ms,Ss,Zs,rr,hr,Cr)},cs.Matrix=an;var lo=cs.matrixMult=function(ms,Ss){return Ss.multiply(ms)},ro=new an(1,0,0,1,0,0);cs.unitMatrix=cs.identityMatrix=ro;var Yn=function(ms,Ss){if(!Un[ms]){var Zs=(Ss instanceof B?"Sh":"P")+(Object.keys(Qr).length+1).toString(10);Ss.id=Zs,Un[ms]=Zs,Qr[Zs]=Ss,dn.publish("addPattern",Ss)}};cs.ShadingPattern=B,cs.TilingPattern=M,cs.addShadingPattern=function(ms,Ss){return Ls("addShadingPattern()"),Yn(ms,Ss),this},cs.beginTilingPattern=function(ms){Ls("beginTilingPattern()"),om(ms.boundingBox[0],ms.boundingBox[1],ms.boundingBox[2]-ms.boundingBox[0],ms.boundingBox[3]-ms.boundingBox[1],ms.matrix)},cs.endTilingPattern=function(ms,Ss){Ls("endTilingPattern()"),Ss.stream=Dr[Vs].join(`
`),Yn(ms,Ss),dn.publish("endTilingPattern",Ss),Jn.pop().restore()};var Mn=cs.__private__.newObject=function(){var ms=On();return $a(ms,!0),ms},On=cs.__private__.newObjectDeferred=function(){return sr++,nr[sr]=function(){return xr},sr},$a=function(ms,Ss){return Ss=typeof Ss=="boolean"&&Ss,nr[ms]=xr,Ss&&Ns(ms+" 0 obj"),ms},Bo=cs.__private__.newAdditionalObject=function(){var ms={objId:On(),content:""};return Tr.push(ms),ms},ho=On(),no=On(),Ds=cs.__private__.decodeColorString=function(ms){var Ss=ms.split(" ");if(Ss.length!==2||Ss[1]!=="g"&&Ss[1]!=="G")Ss.length===5&&(Ss[4]==="k"||Ss[4]==="K")&&(Ss=[(1-Ss[0])*(1-Ss[3]),(1-Ss[1])*(1-Ss[3]),(1-Ss[2])*(1-Ss[3]),"r"]);else{var Zs=parseFloat(Ss[0]);Ss=[Zs,Zs,Zs,"r"]}for(var rr="#",hr=0;hr<3;hr++)rr+=("0"+Math.floor(255*parseFloat(Ss[hr])).toString(16)).slice(-2);return rr},Er=cs.__private__.encodeColorString=function(ms){var Ss;typeof ms=="string"&&(ms={ch1:ms});var Zs=ms.ch1,rr=ms.ch2,hr=ms.ch3,Cr=ms.ch4,Fr=ms.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Zs=="string"&&Zs.charAt(0)!=="#"){var Yr=new f(Zs);if(Yr.ok)Zs=Yr.toHex();else if(!/^\d*\.?\d*$/.test(Zs))throw new Error('Invalid color "'+Zs+'" passed to jsPDF.encodeColorString.')}if(typeof Zs=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Zs)&&(Zs="#"+Zs[1]+Zs[1]+Zs[2]+Zs[2]+Zs[3]+Zs[3]),typeof Zs=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Zs)){var rn=parseInt(Zs.substr(1),16);Zs=rn>>16&255,rr=rn>>8&255,hr=255&rn}if(rr===void 0||Cr===void 0&&Zs===rr&&rr===hr)if(typeof Zs=="string")Ss=Zs+" "+Fr[0];else switch(ms.precision){case 2:Ss=Gs(Zs/255)+" "+Fr[0];break;case 3:default:Ss=bs(Zs/255)+" "+Fr[0]}else if(Cr===void 0||_typeof(Cr)==="object"){if(Cr&&!isNaN(Cr.a)&&Cr.a===0)return Ss=["1.","1.","1.",Fr[1]].join(" ");if(typeof Zs=="string")Ss=[Zs,rr,hr,Fr[1]].join(" ");else switch(ms.precision){case 2:Ss=[Gs(Zs/255),Gs(rr/255),Gs(hr/255),Fr[1]].join(" ");break;default:case 3:Ss=[bs(Zs/255),bs(rr/255),bs(hr/255),Fr[1]].join(" ")}}else if(typeof Zs=="string")Ss=[Zs,rr,hr,Cr,Fr[2]].join(" ");else switch(ms.precision){case 2:Ss=[Gs(Zs),Gs(rr),Gs(hr),Gs(Cr),Fr[2]].join(" ");break;case 3:default:Ss=[bs(Zs),bs(rr),bs(hr),bs(Cr),Fr[2]].join(" ")}return Ss},br=cs.__private__.getFilters=function(){return rs},qr=cs.__private__.putStream=function(ms){var Ss=(ms=ms||{}).data||"",Zs=ms.filters||br(),rr=ms.alreadyAppliedFilters||[],hr=ms.addLength1||!1,Cr=Ss.length,Fr=ms.objectId,Yr=function(ao){return ao};if(us!==null&&Fr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");us!==null&&(Yr=io.encryptor(Fr,0));var rn={};Zs===!0&&(Zs=["FlateEncode"]);var gn=ms.additionalKeyValues||[],fn=(rn=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Ss,Zs):{data:Ss,reverseChain:[]}).reverseChain+(Array.isArray(rr)?rr.join(" "):rr.toString());if(rn.data.length!==0&&(gn.push({key:"Length",value:rn.data.length}),hr===!0&&gn.push({key:"Length1",value:Cr})),fn.length!=0)if(fn.split("/").length-1==1)gn.push({key:"Filter",value:fn});else{gn.push({key:"Filter",value:"["+fn+"]"});for(var bn=0;bn<gn.length;bn+=1)if(gn[bn].key==="DecodeParms"){for(var qn=[],Vn=0;Vn<rn.reverseChain.split("/").length-1;Vn+=1)qn.push("null");qn.push(gn[bn].value),gn[bn].value="["+qn.join(" ")+"]"}}Ns("<<");for(var Xn=0;Xn<gn.length;Xn++)Ns("/"+gn[Xn].key+" "+gn[Xn].value);Ns(">>"),rn.data.length!==0&&(Ns("stream"),Ns(Yr(rn.data)),Ns("endstream"))},sn=cs.__private__.putPage=function(ms){var Ss=ms.number,Zs=ms.data,rr=ms.objId,hr=ms.contentsObjId;$a(rr,!0),Ns("<</Type /Page"),Ns("/Parent "+ms.rootDictionaryObjId+" 0 R"),Ns("/Resources "+ms.resourceDictionaryObjId+" 0 R"),Ns("/MediaBox ["+parseFloat(zs(ms.mediaBox.bottomLeftX))+" "+parseFloat(zs(ms.mediaBox.bottomLeftY))+" "+zs(ms.mediaBox.topRightX)+" "+zs(ms.mediaBox.topRightY)+"]"),ms.cropBox!==null&&Ns("/CropBox ["+zs(ms.cropBox.bottomLeftX)+" "+zs(ms.cropBox.bottomLeftY)+" "+zs(ms.cropBox.topRightX)+" "+zs(ms.cropBox.topRightY)+"]"),ms.bleedBox!==null&&Ns("/BleedBox ["+zs(ms.bleedBox.bottomLeftX)+" "+zs(ms.bleedBox.bottomLeftY)+" "+zs(ms.bleedBox.topRightX)+" "+zs(ms.bleedBox.topRightY)+"]"),ms.trimBox!==null&&Ns("/TrimBox ["+zs(ms.trimBox.bottomLeftX)+" "+zs(ms.trimBox.bottomLeftY)+" "+zs(ms.trimBox.topRightX)+" "+zs(ms.trimBox.topRightY)+"]"),ms.artBox!==null&&Ns("/ArtBox ["+zs(ms.artBox.bottomLeftX)+" "+zs(ms.artBox.bottomLeftY)+" "+zs(ms.artBox.topRightX)+" "+zs(ms.artBox.topRightY)+"]"),typeof ms.userUnit=="number"&&ms.userUnit!==1&&Ns("/UserUnit "+ms.userUnit),dn.publish("putPage",{objId:rr,pageContext:Hr[Ss],pageNumber:Ss,page:Zs}),Ns("/Contents "+hr+" 0 R"),Ns(">>"),Ns("endobj");var Cr=Zs.join(`
`);return Es===fs.ADVANCED&&(Cr+=`
Q`),$a(hr,!0),qr({data:Cr,filters:br(),objectId:hr}),Ns("endobj"),rr},hn=cs.__private__.putPages=function(){var ms,Ss,Zs=[];for(ms=1;ms<=An;ms++)Hr[ms].objId=On(),Hr[ms].contentsObjId=On();for(ms=1;ms<=An;ms++)Zs.push(sn({number:ms,data:Dr[ms],objId:Hr[ms].objId,contentsObjId:Hr[ms].contentsObjId,mediaBox:Hr[ms].mediaBox,cropBox:Hr[ms].cropBox,bleedBox:Hr[ms].bleedBox,trimBox:Hr[ms].trimBox,artBox:Hr[ms].artBox,userUnit:Hr[ms].userUnit,rootDictionaryObjId:ho,resourceDictionaryObjId:no}));$a(ho,!0),Ns("<</Type /Pages");var rr="/Kids [";for(Ss=0;Ss<An;Ss++)rr+=Zs[Ss]+" 0 R ";Ns(rr+"]"),Ns("/Count "+An),Ns(">>"),Ns("endobj"),dn.publish("postPutPages")},_n=function(ms){dn.publish("putFont",{font:ms,out:Ns,newObject:Mn,putStream:qr}),ms.isAlreadyPutted!==!0&&(ms.objectNumber=Mn(),Ns("<<"),Ns("/Type /Font"),Ns("/BaseFont /"+F(ms.postScriptName)),Ns("/Subtype /Type1"),typeof ms.encoding=="string"&&Ns("/Encoding /"+ms.encoding),Ns("/FirstChar 32"),Ns("/LastChar 255"),Ns(">>"),Ns("endobj"))},Pn=function(){for(var ms in tn)tn.hasOwnProperty(ms)&&(ps===!1||ps===!0&&xs.hasOwnProperty(ms))&&_n(tn[ms])},Nn=function(ms){ms.objectNumber=Mn();var Ss=[];Ss.push({key:"Type",value:"/XObject"}),Ss.push({key:"Subtype",value:"/Form"}),Ss.push({key:"BBox",value:"["+[zs(ms.x),zs(ms.y),zs(ms.x+ms.width),zs(ms.y+ms.height)].join(" ")+"]"}),Ss.push({key:"Matrix",value:"["+ms.matrix.toString()+"]"});var Zs=ms.pages[1].join(`
`);qr({data:Zs,additionalKeyValues:Ss,objectId:ms.objectNumber}),Ns("endobj")},xo=function(){for(var ms in vn)vn.hasOwnProperty(ms)&&Nn(vn[ms])},fo=function(ms,Ss){var Zs,rr=[],hr=1/(Ss-1);for(Zs=0;Zs<1;Zs+=hr)rr.push(Zs);if(rr.push(1),ms[0].offset!=0){var Cr={offset:0,color:ms[0].color};ms.unshift(Cr)}if(ms[ms.length-1].offset!=1){var Fr={offset:1,color:ms[ms.length-1].color};ms.push(Fr)}for(var Yr="",rn=0,gn=0;gn<rr.length;gn++){for(Zs=rr[gn];Zs>ms[rn+1].offset;)rn++;var fn=ms[rn].offset,bn=(Zs-fn)/(ms[rn+1].offset-fn),qn=ms[rn].color,Vn=ms[rn+1].color;Yr+=Ws(Math.round((1-bn)*qn[0]+bn*Vn[0]).toString(16))+Ws(Math.round((1-bn)*qn[1]+bn*Vn[1]).toString(16))+Ws(Math.round((1-bn)*qn[2]+bn*Vn[2]).toString(16))}return Yr.trim()},wl=function(ms,Ss){Ss||(Ss=21);var Zs=Mn(),rr=fo(ms.colors,Ss),hr=[];hr.push({key:"FunctionType",value:"0"}),hr.push({key:"Domain",value:"[0.0 1.0]"}),hr.push({key:"Size",value:"["+Ss+"]"}),hr.push({key:"BitsPerSample",value:"8"}),hr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),hr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qr({data:rr,additionalKeyValues:hr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Zs}),Ns("endobj"),ms.objectNumber=Mn(),Ns("<< /ShadingType "+ms.type),Ns("/ColorSpace /DeviceRGB");var Cr="/Coords ["+zs(parseFloat(ms.coords[0]))+" "+zs(parseFloat(ms.coords[1]))+" ";ms.type===2?Cr+=zs(parseFloat(ms.coords[2]))+" "+zs(parseFloat(ms.coords[3])):Cr+=zs(parseFloat(ms.coords[2]))+" "+zs(parseFloat(ms.coords[3]))+" "+zs(parseFloat(ms.coords[4]))+" "+zs(parseFloat(ms.coords[5])),Ns(Cr+="]"),ms.matrix&&Ns("/Matrix ["+ms.matrix.toString()+"]"),Ns("/Function "+Zs+" 0 R"),Ns("/Extend [true true]"),Ns(">>"),Ns("endobj")},Rl=function(ms,Ss){var Zs=On(),rr=Mn();Ss.push({resourcesOid:Zs,objectOid:rr}),ms.objectNumber=rr;var hr=[];hr.push({key:"Type",value:"/Pattern"}),hr.push({key:"PatternType",value:"1"}),hr.push({key:"PaintType",value:"1"}),hr.push({key:"TilingType",value:"1"}),hr.push({key:"BBox",value:"["+ms.boundingBox.map(zs).join(" ")+"]"}),hr.push({key:"XStep",value:zs(ms.xStep)}),hr.push({key:"YStep",value:zs(ms.yStep)}),hr.push({key:"Resources",value:Zs+" 0 R"}),ms.matrix&&hr.push({key:"Matrix",value:"["+ms.matrix.toString()+"]"}),qr({data:ms.stream,additionalKeyValues:hr,objectId:ms.objectNumber}),Ns("endobj")},Oo=function(ms){var Ss;for(Ss in Qr)Qr.hasOwnProperty(Ss)&&(Qr[Ss]instanceof B?wl(Qr[Ss]):Qr[Ss]instanceof M&&Rl(Qr[Ss],ms))},ru=function(ms){for(var Ss in ms.objectNumber=Mn(),Ns("<<"),ms)switch(Ss){case"opacity":Ns("/ca "+Gs(ms[Ss]));break;case"stroke-opacity":Ns("/CA "+Gs(ms[Ss]))}Ns(">>"),Ns("endobj")},Su=function(){var ms;for(ms in Sn)Sn.hasOwnProperty(ms)&&ru(Sn[ms])},Vl=function(){for(var ms in Ns("/XObject <<"),vn)vn.hasOwnProperty(ms)&&vn[ms].objectNumber>=0&&Ns("/"+ms+" "+vn[ms].objectNumber+" 0 R");dn.publish("putXobjectDict"),Ns(">>")},Wo=function(){io.oid=Mn(),Ns("<<"),Ns("/Filter /Standard"),Ns("/V "+io.v),Ns("/R "+io.r),Ns("/U <"+io.toHexString(io.U)+">"),Ns("/O <"+io.toHexString(io.O)+">"),Ns("/P "+io.P),Ns(">>"),Ns("endobj")},Co=function(){for(var ms in Ns("/Font <<"),tn)tn.hasOwnProperty(ms)&&(ps===!1||ps===!0&&xs.hasOwnProperty(ms))&&Ns("/"+ms+" "+tn[ms].objectNumber+" 0 R");Ns(">>")},_i=function(){if(Object.keys(Qr).length>0){for(var ms in Ns("/Shading <<"),Qr)Qr.hasOwnProperty(ms)&&Qr[ms]instanceof B&&Qr[ms].objectNumber>=0&&Ns("/"+ms+" "+Qr[ms].objectNumber+" 0 R");dn.publish("putShadingPatternDict"),Ns(">>")}},_o=function(ms){if(Object.keys(Qr).length>0){for(var Ss in Ns("/Pattern <<"),Qr)Qr.hasOwnProperty(Ss)&&Qr[Ss]instanceof cs.TilingPattern&&Qr[Ss].objectNumber>=0&&Qr[Ss].objectNumber<ms&&Ns("/"+Ss+" "+Qr[Ss].objectNumber+" 0 R");dn.publish("putTilingPatternDict"),Ns(">>")}},Cu=function(){if(Object.keys(Sn).length>0){var ms;for(ms in Ns("/ExtGState <<"),Sn)Sn.hasOwnProperty(ms)&&Sn[ms].objectNumber>=0&&Ns("/"+ms+" "+Sn[ms].objectNumber+" 0 R");dn.publish("putGStateDict"),Ns(">>")}},Fn=function(ms){$a(ms.resourcesOid,!0),Ns("<<"),Ns("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Co(),_i(),_o(ms.objectOid),Cu(),Vl(),Ns(">>"),Ns("endobj")},nu=function(){var ms=[];Pn(),Su(),xo(),Oo(ms),dn.publish("putResources"),ms.forEach(Fn),Fn({resourcesOid:no,objectOid:Number.MAX_SAFE_INTEGER}),dn.publish("postPutResources")},Ko=function(){dn.publish("putAdditionalObjects");for(var ms=0;ms<Tr.length;ms++){var Ss=Tr[ms];$a(Ss.objId,!0),Ns(Ss.content),Ns("endobj")}dn.publish("postPutAdditionalObjects")},Gl=function(ms){en[ms.fontName]=en[ms.fontName]||{},en[ms.fontName][ms.fontStyle]=ms.id},Sl=function(ms,Ss,Zs,rr,hr){var Cr={id:"F"+(Object.keys(tn).length+1).toString(10),postScriptName:ms,fontName:Ss,fontStyle:Zs,encoding:rr,isStandardFont:hr||!1,metadata:{}};return dn.publish("addFont",{font:Cr,instance:this}),tn[Cr.id]=Cr,Gl(Cr),Cr.id},iu=function(ms){for(var Ss=0,Zs=dr.length;Ss<Zs;Ss++){var rr=Sl.call(this,ms[Ss][0],ms[Ss][1],ms[Ss][2],dr[Ss][3],!0);ps===!1&&(xs[rr]=!0);var hr=ms[Ss][0].split("-");Gl({id:rr,fontName:hr[0],fontStyle:hr[1]||""})}dn.publish("addFonts",{fonts:tn,dictionary:en})},go=function(ms){return ms.foo=function(){try{return ms.apply(this,arguments)}catch(rr){var Ss=rr.stack||"";~Ss.indexOf(" at ")&&(Ss=Ss.split(" at ")[1]);var Zs="Error in function "+Ss.split(`
`)[0].split("<")[0]+": "+rr.message;if(!n.console)throw new Error(Zs);n.console.error(Zs,rr),n.alert&&alert(Zs)}},ms.foo.bar=ms,ms.foo},Jo=function(ms,Ss){var Zs,rr,hr,Cr,Fr,Yr,rn,gn,fn;if(hr=(Ss=Ss||{}).sourceEncoding||"Unicode",Fr=Ss.outputEncoding,(Ss.autoencode||Fr)&&tn[Ir].metadata&&tn[Ir].metadata[hr]&&tn[Ir].metadata[hr].encoding&&(Cr=tn[Ir].metadata[hr].encoding,!Fr&&tn[Ir].encoding&&(Fr=tn[Ir].encoding),!Fr&&Cr.codePages&&(Fr=Cr.codePages[0]),typeof Fr=="string"&&(Fr=Cr[Fr]),Fr)){for(rn=!1,Yr=[],Zs=0,rr=ms.length;Zs<rr;Zs++)(gn=Fr[ms.charCodeAt(Zs)])?Yr.push(String.fromCharCode(gn)):Yr.push(ms[Zs]),Yr[Zs].charCodeAt(0)>>8&&(rn=!0);ms=Yr.join("")}for(Zs=ms.length;rn===void 0&&Zs!==0;)ms.charCodeAt(Zs-1)>>8&&(rn=!0),Zs--;if(!rn)return ms;for(Yr=Ss.noBOM?[]:[254,255],Zs=0,rr=ms.length;Zs<rr;Zs++){if((fn=(gn=ms.charCodeAt(Zs))>>8)>>8)throw new Error("Character at position "+Zs+" of string '"+ms+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Yr.push(fn),Yr.push(gn-(fn<<8))}return String.fromCharCode.apply(void 0,Yr)},eo=cs.__private__.pdfEscape=cs.pdfEscape=function(ms,Ss){return Jo(ms,Ss).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cl=cs.__private__.beginPage=function(ms){Dr[++An]=[],Hr[An]={objId:0,contentsObjId:0,userUnit:Number(ns),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ms[0]),topRightY:Number(ms[1])}},Rr(An),cr(Dr[Vs])},Wl=function(ms,Ss){var Zs,rr,hr;switch(St=Ss||St,typeof ms=="string"&&(Zs=ds(ms.toLowerCase()),Array.isArray(Zs)&&(rr=Zs[0],hr=Zs[1])),Array.isArray(ms)&&(rr=ms[0]*kr,hr=ms[1]*kr),isNaN(rr)&&(rr=ts[0],hr=ts[1]),(rr>14400||hr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),rr=Math.min(14400,rr),hr=Math.min(14400,hr)),ts=[rr,hr],St.substr(0,1)){case"l":hr>rr&&(ts=[hr,rr]);break;case"p":rr>hr&&(ts=[hr,rr])}Cl(ts),sm(ku),Ns(Do),Lu!==0&&Ns(Lu+" J"),Pu!==0&&Ns(Pu+" j"),dn.publish("addPage",{pageNumber:An})},Js=function(ms){ms>0&&ms<=An&&(Dr.splice(ms,1),Hr.splice(ms,1),An--,Vs>An&&(Vs=An),this.setPage(Vs))},Rr=function(ms){ms>0&&ms<=An&&(Vs=ms)},Br=cs.__private__.getNumberOfPages=cs.getNumberOfPages=function(){return Dr.length-1},xn=function(ms,Ss,Zs){var rr,hr=void 0;return Zs=Zs||{},ms=ms!==void 0?ms:tn[Ir].fontName,Ss=Ss!==void 0?Ss:tn[Ir].fontStyle,rr=ms.toLowerCase(),en[rr]!==void 0&&en[rr][Ss]!==void 0?hr=en[rr][Ss]:en[ms]!==void 0&&en[ms][Ss]!==void 0?hr=en[ms][Ss]:Zs.disableWarning===!1&&a.warn("Unable to look up font label for font '"+ms+"', '"+Ss+"'. Refer to getFontList() for available fonts."),hr||Zs.noFallback||(hr=en.times[Ss])==null&&(hr=en.times.normal),hr},on=cs.__private__.putInfo=function(){var ms=Mn(),Ss=function(rr){return rr};for(var Zs in us!==null&&(Ss=io.encryptor(ms,0)),Ns("<<"),Ns("/Producer ("+eo(Ss("jsPDF "+E.version))+")"),Or)Or.hasOwnProperty(Zs)&&Or[Zs]&&Ns("/"+Zs.substr(0,1).toUpperCase()+Zs.substr(1)+" ("+eo(Ss(Or[Zs]))+")");Ns("/CreationDate ("+eo(Ss(qs))+")"),Ns(">>"),Ns("endobj")},mn=cs.__private__.putCatalog=function(ms){var Ss=(ms=ms||{}).rootDictionaryObjId||ho;switch(Mn(),Ns("<<"),Ns("/Type /Catalog"),Ns("/Pages "+Ss+" 0 R"),_r||(_r="fullwidth"),_r){case"fullwidth":Ns("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ns("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ns("/OpenAction [3 0 R /Fit]");break;case"original":Ns("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Zs=""+_r;Zs.substr(Zs.length-1)==="%"&&(_r=parseInt(_r)/100),typeof _r=="number"&&Ns("/OpenAction [3 0 R /XYZ null null "+Gs(_r)+"]")}switch(Ks||(Ks="continuous"),Ks){case"continuous":Ns("/PageLayout /OneColumn");break;case"single":Ns("/PageLayout /SinglePage");break;case"two":case"twoleft":Ns("/PageLayout /TwoColumnLeft");break;case"tworight":Ns("/PageLayout /TwoColumnRight")}Kr&&Ns("/PageMode /"+Kr),dn.publish("putCatalog"),Ns(">>"),Ns("endobj")},yn=cs.__private__.putTrailer=function(){Ns("trailer"),Ns("<<"),Ns("/Size "+(sr+1)),Ns("/Root "+sr+" 0 R"),Ns("/Info "+(sr-1)+" 0 R"),us!==null&&Ns("/Encrypt "+io.oid+" 0 R"),Ns("/ID [ <"+Cs+"> <"+Cs+"> ]"),Ns(">>")},Bn=cs.__private__.putHeader=function(){Ns("%PDF-"+ys),Ns("%")},qo=cs.__private__.putXRef=function(){var ms="0000000000";Ns("xref"),Ns("0 "+(sr+1)),Ns("0000000000 65535 f ");for(var Ss=1;Ss<=sr;Ss++)typeof nr[Ss]=="function"?Ns((ms+nr[Ss]()).slice(-10)+" 00000 n "):nr[Ss]!==void 0?Ns((ms+nr[Ss]).slice(-10)+" 00000 n "):Ns("0000000000 00000 n ")},wn=cs.__private__.buildDocument=function(){Nr(),cr(pr),dn.publish("buildDocument"),Bn(),hn(),Ko(),nu(),us!==null&&Wo(),on(),mn();var ms=xr;return qo(),yn(),Ns("startxref"),Ns(""+ms),Ns("%%EOF"),cr(Dr[Vs]),pr.join(`
`)},co=cs.__private__.getBlob=function(ms){return new Blob([wr(ms)],{type:"application/pdf"})},_l=cs.output=cs.__private__.output=go(function(ms,Ss){switch(typeof(Ss=Ss||{})=="string"?Ss={filename:Ss}:Ss.filename=Ss.filename||"generated.pdf",ms){case void 0:return wn();case"save":cs.save(Ss.filename);break;case"arraybuffer":return wr(wn());case"blob":return co(wn());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(co(wn()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Zs="",rr=wn();try{Zs=h(rr)}catch{Zs=h(unescape(encodeURIComponent(rr)))}return"data:application/pdf;filename="+Ss.filename+";base64,"+Zs;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var hr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Cr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ss.pdfObjectUrl&&(hr=Ss.pdfObjectUrl,Cr="");var Fr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+hr+'"'+Cr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ss)+");<\/script></body></html>",Yr=n.open();return Yr!==null&&Yr.document.write(Fr),Yr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ss.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ss.filename+'" width="500px" height="400px" /></body></html>',gn=n.open();if(gn!==null){gn.document.write(rn);var fn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=Ss.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(fn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var bn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ss)+'"></iframe></body></html>',qn=n.open();if(qn!==null&&(qn.document.write(bn),qn.document.title=Ss.filename),qn||typeof safari>"u")return qn;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Ss);default:return null}}),au=function(ms){return Array.isArray(So)===!0&&So.indexOf(ms)>-1};switch(es){case"pt":kr=1;break;case"mm":kr=72/25.4;break;case"cm":kr=72/2.54;break;case"in":kr=72;break;case"px":kr=au("px_scaling")==1?.75:96/72;break;case"pc":case"em":kr=12;break;case"ex":kr=6;break;default:if(typeof es!="number")throw new Error("Invalid unit: "+es);kr=es}var io=null;vr(),Ps();var Pm=function(ms){return us!==null?io.encryptor(ms,0):function(Ss){return Ss}},_d=cs.__private__.getPageInfo=cs.getPageInfo=function(ms){if(isNaN(ms)||ms%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Hr[ms].objId,pageNumber:ms,pageContext:Hr[ms]}},pn=cs.__private__.getPageInfoByObjId=function(ms){if(isNaN(ms)||ms%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ss in Hr)if(Hr[Ss].objId===ms)break;return _d(Ss)},Im=cs.__private__.getCurrentPageInfo=cs.getCurrentPageInfo=function(){return{objId:Hr[Vs].objId,pageNumber:Vs,pageContext:Hr[Vs]}};cs.addPage=function(){return Wl.apply(this,arguments),this},cs.setPage=function(){return Rr.apply(this,arguments),cr.call(this,Dr[Vs]),this},cs.insertPage=function(ms){return this.addPage(),this.movePage(Vs,ms),this},cs.movePage=function(ms,Ss){var Zs,rr;if(ms>Ss){Zs=Dr[ms],rr=Hr[ms];for(var hr=ms;hr>Ss;hr--)Dr[hr]=Dr[hr-1],Hr[hr]=Hr[hr-1];Dr[Ss]=Zs,Hr[Ss]=rr,this.setPage(Ss)}else if(ms<Ss){Zs=Dr[ms],rr=Hr[ms];for(var Cr=ms;Cr<Ss;Cr++)Dr[Cr]=Dr[Cr+1],Hr[Cr]=Hr[Cr+1];Dr[Ss]=Zs,Hr[Ss]=rr,this.setPage(Ss)}return this},cs.deletePage=function(){return Js.apply(this,arguments),this},cs.__private__.text=cs.text=function(ms,Ss,Zs,rr,hr){var Cr,Fr,Yr,rn,gn,fn,bn,qn,Vn,Xn=(rr=rr||{}).scope||this;if(typeof ms=="number"&&typeof Ss=="number"&&(typeof Zs=="string"||Array.isArray(Zs))){var ao=Zs;Zs=Ss,Ss=ms,ms=ao}if(arguments[3]instanceof an?(Ls("The transform parameter of text() with a Matrix value"),Vn=hr):(Yr=arguments[4],rn=arguments[5],_typeof(bn=arguments[3])==="object"&&bn!==null||(typeof Yr=="string"&&(rn=Yr,Yr=null),typeof bn=="string"&&(rn=bn,bn=null),typeof bn=="number"&&(Yr=bn,bn=null),rr={flags:bn,angle:Yr,align:rn})),isNaN(Ss)||isNaN(Zs)||ms==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ms.length===0)return Xn;var xa="",zo=!1,bo=typeof rr.lineHeightFactor=="number"?rr.lineHeightFactor:Jl,Vo=Xn.internal.scaleFactor;function lm(Dn){return Dn=Dn.split("	").join(Array(rr.TabLen||9).join(" ")),eo(Dn,bn)}function zu(Dn){for(var zn,Kn=Dn.concat(),na=[],xl=Kn.length;xl--;)typeof(zn=Kn.shift())=="string"?na.push(zn):Array.isArray(Dn)&&(zn.length===1||zn[1]===void 0&&zn[2]===void 0)?na.push(zn[0]):na.push([zn[0],zn[1],zn[2]]);return na}function Mu(Dn,zn){var Kn;if(typeof Dn=="string")Kn=zn(Dn)[0];else if(Array.isArray(Dn)){for(var na,xl,Wu=Dn.concat(),Eu=[],pm=Wu.length;pm--;)typeof(na=Wu.shift())=="string"?Eu.push(zn(na)[0]):Array.isArray(na)&&typeof na[0]=="string"&&(xl=zn(na[0],na[1],na[2]),Eu.push([xl[0],xl[1],xl[2]]));Kn=Eu}return Kn}var mu=!1,Fu=!0;if(typeof ms=="string")mu=!0;else if(Array.isArray(ms)){var Bu=ms.concat();Fr=[];for(var pu,to=Bu.length;to--;)(typeof(pu=Bu.shift())!="string"||Array.isArray(pu)&&typeof pu[0]!="string")&&(Fu=!1);mu=Fu}if(mu===!1)throw new Error('Type of text must be string or Array. "'+ms+'" is not recognized.');typeof ms=="string"&&(ms=ms.match(/[\r?\n]/)?ms.split(/\r\n|\r|\n/g):[ms]);var hu=lr/Xn.internal.scaleFactor,xu=hu*(bo-1);switch(rr.baseline){case"bottom":Zs-=xu;break;case"top":Zs+=hu-xu;break;case"hanging":Zs+=hu-2*xu;break;case"middle":Zs+=hu/2-xu}if((fn=rr.maxWidth||0)>0&&(typeof ms=="string"?ms=Xn.splitTextToSize(ms,fn):Object.prototype.toString.call(ms)==="[object Array]"&&(ms=ms.reduce(function(Dn,zn){return Dn.concat(Xn.splitTextToSize(zn,fn))},[]))),Cr={text:ms,x:Ss,y:Zs,options:rr,mutex:{pdfEscape:eo,activeFontKey:Ir,fonts:tn,activeFontSize:lr}},dn.publish("preProcessText",Cr),ms=Cr.text,Yr=(rr=Cr.options).angle,!(Vn instanceof an)&&Yr&&typeof Yr=="number"){Yr*=Math.PI/180,rr.rotationDirection===0&&(Yr=-Yr),Es===fs.ADVANCED&&(Yr=-Yr);var fu=Math.cos(Yr),qu=Math.sin(Yr);Vn=new an(fu,qu,-qu,fu,0,0)}else Yr&&Yr instanceof an&&(Vn=Yr);Es!==fs.ADVANCED||Vn||(Vn=ro),(gn=rr.charSpace||cu)!==void 0&&(xa+=zs(As(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qn=rr.horizontalScale)!==void 0&&(xa+=zs(100*qn)+` Tz
`),rr.lang;var jo=-1,Hm=rr.renderingMode!==void 0?rr.renderingMode:rr.stroke,Uu=Xn.internal.getCurrentPageInfo().pageContext;switch(Hm){case 0:case!1:case"fill":jo=0;break;case 1:case!0:case"stroke":jo=1;break;case 2:case"fillThenStroke":jo=2;break;case 3:case"invisible":jo=3;break;case 4:case"fillAndAddForClipping":jo=4;break;case 5:case"strokeAndAddPathForClipping":jo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":jo=6;break;case 7:case"addToPathForClipping":jo=7}var cm=Uu.usedRenderingMode!==void 0?Uu.usedRenderingMode:-1;jo!==-1?xa+=jo+` Tr
`:cm!==-1&&(xa+=`0 Tr
`),jo!==-1&&(Uu.usedRenderingMode=jo),rn=rr.align||"left";var Ao,gu=lr*bo,um=Xn.internal.pageSize.getWidth(),dm=tn[Ir];gn=rr.charSpace||cu,fn=rr.maxWidth||0,bn=Object.assign({autoencode:!0,noBOM:!0},rr.flags);var Pl=[],Ql=function(Dn){return Xn.getStringUnitWidth(Dn,{font:dm,charSpace:gn,fontSize:lr,doKerning:!1})*lr/Vo};if(Object.prototype.toString.call(ms)==="[object Array]"){var vo;Fr=zu(ms),rn!=="left"&&(Ao=Fr.map(Ql));var uo,Il=0;if(rn==="right"){Ss-=Ao[0],ms=[],to=Fr.length;for(var Xo=0;Xo<to;Xo++)Xo===0?(uo=Ho(Ss),vo=Yo(Zs)):(uo=As(Il-Ao[Xo]),vo=-gu),ms.push([Fr[Xo],uo,vo]),Il=Ao[Xo]}else if(rn==="center"){Ss-=Ao[0]/2,ms=[],to=Fr.length;for(var Qo=0;Qo<to;Qo++)Qo===0?(uo=Ho(Ss),vo=Yo(Zs)):(uo=As((Il-Ao[Qo])/2),vo=-gu),ms.push([Fr[Qo],uo,vo]),Il=Ao[Qo]}else if(rn==="left"){ms=[],to=Fr.length;for(var ju=0;ju<to;ju++)ms.push(Fr[ju])}else if(rn==="justify"&&dm.encoding==="Identity-H"){ms=[],to=Fr.length,fn=fn!==0?fn:um;for(var Zo=0,Wn=0;Wn<to;Wn++)if(vo=Wn===0?Yo(Zs):-gu,uo=Wn===0?Ho(Ss):Zo,Wn<to-1){var Hu=As((fn-Ao[Wn])/(Fr[Wn].split(" ").length-1)),mo=Fr[Wn].split(" ");ms.push([mo[0]+" ",uo,vo]),Zo=0;for(var ko=1;ko<mo.length;ko++){var vu=(Ql(mo[ko-1]+" "+mo[ko])-Ql(mo[ko]))*Vo+Hu;ko==mo.length-1?ms.push([mo[ko],vu,0]):ms.push([mo[ko]+" ",vu,0]),Zo-=vu}}else ms.push([Fr[Wn],uo,vo]);ms.push(["",Zo,0])}else{if(rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ms=[],to=Fr.length,fn=fn!==0?fn:um,Wn=0;Wn<to;Wn++)vo=Wn===0?Yo(Zs):-gu,uo=Wn===0?Ho(Ss):0,Wn<to-1?Pl.push(zs(As((fn-Ao[Wn])/(Fr[Wn].split(" ").length-1)))):Pl.push(0),ms.push([Fr[Wn],uo,vo])}}var mm=typeof rr.R2L=="boolean"?rr.R2L:Vr;mm===!0&&(ms=Mu(ms,function(Dn,zn,Kn){return[Dn.split("").reverse().join(""),zn,Kn]})),Cr={text:ms,x:Ss,y:Zs,options:rr,mutex:{pdfEscape:eo,activeFontKey:Ir,fonts:tn,activeFontSize:lr}},dn.publish("postProcessText",Cr),ms=Cr.text,zo=Cr.mutex.isHex||!1;var Vu=tn[Ir].encoding;Vu!=="WinAnsiEncoding"&&Vu!=="StandardEncoding"||(ms=Mu(ms,function(Dn,zn,Kn){return[lm(Dn),zn,Kn]})),Fr=zu(ms),ms=[];for(var Zl,_c,$l,eu=0,yu=1,tu=Array.isArray(Fr[0])?yu:eu,Ol="",Gu=function(Dn,zn,Kn){var na="";return Kn instanceof an?(Kn=typeof rr.angle=="number"?lo(Kn,new an(1,0,0,1,Dn,zn)):lo(new an(1,0,0,1,Dn,zn),Kn),Es===fs.ADVANCED&&(Kn=lo(new an(1,0,0,-1,0,0),Kn)),na=Kn.join(" ")+` Tm
`):na=zs(Dn)+" "+zs(zn)+` Td
`,na},To=0;To<Fr.length;To++){switch(Ol="",tu){case yu:$l=(zo?"<":"(")+Fr[To][0]+(zo?">":")"),Zl=parseFloat(Fr[To][1]),_c=parseFloat(Fr[To][2]);break;case eu:$l=(zo?"<":"(")+Fr[To]+(zo?">":")"),Zl=Ho(Ss),_c=Yo(Zs)}Pl!==void 0&&Pl[To]!==void 0&&(Ol=Pl[To]+` Tw
`),To===0?ms.push(Ol+Gu(Zl,_c,Vn)+$l):tu===eu?ms.push(Ol+$l):tu===yu&&ms.push(Ol+Gu(Zl,_c,Vn)+$l)}ms=tu===eu?ms.join(` Tj
T* `):ms.join(` Tj
`),ms+=` Tj
`;var Lo=`BT
/`;return Lo+=Ir+" "+lr+` Tf
`,Lo+=zs(lr*bo)+` TL
`,Lo+=Yl+`
`,Lo+=xa,Lo+=ms,Ns(Lo+="ET"),xs[Ir]=!0,Xn};var $m=cs.__private__.clip=cs.clip=function(ms){return Ns(ms==="evenodd"?"W*":"W"),this};cs.clipEvenOdd=function(){return $m("evenodd")},cs.__private__.discardPath=cs.discardPath=function(){return Ns("n"),this};var Uo=cs.__private__.isValidStyle=function(ms){var Ss=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ms)!==-1&&(Ss=!0),Ss};cs.__private__.setDefaultPathOperation=cs.setDefaultPathOperation=function(ms){return Uo(ms)&&(os=ms),this};var em=cs.__private__.getStyle=cs.getStyle=function(ms){var Ss=os;switch(ms){case"D":case"S":Ss="S";break;case"F":Ss="f";break;case"FD":case"DF":Ss="B";break;case"f":case"f*":case"B":case"B*":Ss=ms}return Ss},tm=cs.close=function(){return Ns("h"),this};cs.stroke=function(){return Ns("S"),this},cs.fill=function(ms){return ou("f",ms),this},cs.fillEvenOdd=function(ms){return ou("f*",ms),this},cs.fillStroke=function(ms){return ou("B",ms),this},cs.fillStrokeEvenOdd=function(ms){return ou("B*",ms),this};var ou=function(ms,Ss){_typeof(Ss)==="object"?Dm(Ss,ms):Ns(ms)},_u=function(ms){ms===null||Es===fs.ADVANCED&&ms===void 0||(ms=em(ms),Ns(ms))};function Om(ms,Ss,Zs,rr,hr){var Cr=new M(Ss||this.boundingBox,Zs||this.xStep,rr||this.yStep,this.gState,hr||this.matrix);Cr.stream=this.stream;var Fr=ms+"$$"+this.cloneIndex+++"$$";return Yn(Fr,Cr),Cr}var Dm=function(ms,Ss){var Zs=Un[ms.key],rr=Qr[Zs];if(rr instanceof B)Ns("q"),Ns(zm(Ss)),rr.gState&&cs.setGState(rr.gState),Ns(ms.matrix.toString()+" cm"),Ns("/"+Zs+" sh"),Ns("Q");else if(rr instanceof M){var hr=new an(1,0,0,-1,0,Ll());ms.matrix&&(hr=hr.multiply(ms.matrix||ro),Zs=Om.call(rr,ms.key,ms.boundingBox,ms.xStep,ms.yStep,hr).id),Ns("q"),Ns("/Pattern cs"),Ns("/"+Zs+" scn"),rr.gState&&cs.setGState(rr.gState),Ns(Ss),Ns("Q")}},zm=function(ms){switch(ms){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Au=cs.moveTo=function(ms,Ss){return Ns(zs(As(ms))+" "+zs($s(Ss))+" m"),this},Kl=cs.lineTo=function(ms,Ss){return Ns(zs(As(ms))+" "+zs($s(Ss))+" l"),this},Al=cs.curveTo=function(ms,Ss,Zs,rr,hr,Cr){return Ns([zs(As(ms)),zs($s(Ss)),zs(As(Zs)),zs($s(rr)),zs(As(hr)),zs($s(Cr)),"c"].join(" ")),this};cs.__private__.line=cs.line=function(ms,Ss,Zs,rr,hr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||isNaN(rr)||!Uo(hr))throw new Error("Invalid arguments passed to jsPDF.line");return Es===fs.COMPAT?this.lines([[Zs-ms,rr-Ss]],ms,Ss,[1,1],hr||"S"):this.lines([[Zs-ms,rr-Ss]],ms,Ss,[1,1]).stroke()},cs.__private__.lines=cs.lines=function(ms,Ss,Zs,rr,hr,Cr){var Fr,Yr,rn,gn,fn,bn,qn,Vn,Xn,ao,xa,zo;if(typeof ms=="number"&&(zo=Zs,Zs=Ss,Ss=ms,ms=zo),rr=rr||[1,1],Cr=Cr||!1,isNaN(Ss)||isNaN(Zs)||!Array.isArray(ms)||!Array.isArray(rr)||!Uo(hr)||typeof Cr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Au(Ss,Zs),Fr=rr[0],Yr=rr[1],gn=ms.length,ao=Ss,xa=Zs,rn=0;rn<gn;rn++)(fn=ms[rn]).length===2?(ao=fn[0]*Fr+ao,xa=fn[1]*Yr+xa,Kl(ao,xa)):(bn=fn[0]*Fr+ao,qn=fn[1]*Yr+xa,Vn=fn[2]*Fr+ao,Xn=fn[3]*Yr+xa,ao=fn[4]*Fr+ao,xa=fn[5]*Yr+xa,Al(bn,qn,Vn,Xn,ao,xa));return Cr&&tm(),_u(hr),this},cs.path=function(ms){for(var Ss=0;Ss<ms.length;Ss++){var Zs=ms[Ss],rr=Zs.c;switch(Zs.op){case"m":Au(rr[0],rr[1]);break;case"l":Kl(rr[0],rr[1]);break;case"c":Al.apply(this,rr);break;case"h":tm()}}return this},cs.__private__.rect=cs.rect=function(ms,Ss,Zs,rr,hr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||isNaN(rr)||!Uo(hr))throw new Error("Invalid arguments passed to jsPDF.rect");return Es===fs.COMPAT&&(rr=-rr),Ns([zs(As(ms)),zs($s(Ss)),zs(As(Zs)),zs(As(rr)),"re"].join(" ")),_u(hr),this},cs.__private__.triangle=cs.triangle=function(ms,Ss,Zs,rr,hr,Cr,Fr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||isNaN(rr)||isNaN(hr)||isNaN(Cr)||!Uo(Fr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Zs-ms,rr-Ss],[hr-Zs,Cr-rr],[ms-hr,Ss-Cr]],ms,Ss,[1,1],Fr,!0),this},cs.__private__.roundedRect=cs.roundedRect=function(ms,Ss,Zs,rr,hr,Cr,Fr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||isNaN(rr)||isNaN(hr)||isNaN(Cr)||!Uo(Fr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Yr=4/3*(Math.SQRT2-1);return hr=Math.min(hr,.5*Zs),Cr=Math.min(Cr,.5*rr),this.lines([[Zs-2*hr,0],[hr*Yr,0,hr,Cr-Cr*Yr,hr,Cr],[0,rr-2*Cr],[0,Cr*Yr,-hr*Yr,Cr,-hr,Cr],[2*hr-Zs,0],[-hr*Yr,0,-hr,-Cr*Yr,-hr,-Cr],[0,2*Cr-rr],[0,-Cr*Yr,hr*Yr,-Cr,hr,-Cr]],ms+hr,Ss,[1,1],Fr,!0),this},cs.__private__.ellipse=cs.ellipse=function(ms,Ss,Zs,rr,hr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||isNaN(rr)||!Uo(hr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Cr=4/3*(Math.SQRT2-1)*Zs,Fr=4/3*(Math.SQRT2-1)*rr;return Au(ms+Zs,Ss),Al(ms+Zs,Ss-Fr,ms+Cr,Ss-rr,ms,Ss-rr),Al(ms-Cr,Ss-rr,ms-Zs,Ss-Fr,ms-Zs,Ss),Al(ms-Zs,Ss+Fr,ms-Cr,Ss+rr,ms,Ss+rr),Al(ms+Cr,Ss+rr,ms+Zs,Ss+Fr,ms+Zs,Ss),_u(hr),this},cs.__private__.circle=cs.circle=function(ms,Ss,Zs,rr){if(isNaN(ms)||isNaN(Ss)||isNaN(Zs)||!Uo(rr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ms,Ss,Zs,Zs,rr)},cs.setFont=function(ms,Ss,Zs){return Zs&&(Ss=Qs(Ss,Zs)),Ir=xn(ms,Ss,{disableWarning:!1}),this};var Mm=cs.__private__.getFont=cs.getFont=function(){return tn[xn.apply(cs,arguments)]};cs.__private__.getFontList=cs.getFontList=function(){var ms,Ss,Zs={};for(ms in en)if(en.hasOwnProperty(ms))for(Ss in Zs[ms]=[],en[ms])en[ms].hasOwnProperty(Ss)&&Zs[ms].push(Ss);return Zs},cs.addFont=function(ms,Ss,Zs,rr,hr){var Cr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Cr.indexOf(arguments[3])!==-1?hr=arguments[3]:arguments[3]&&Cr.indexOf(arguments[3])==-1&&(Zs=Qs(Zs,rr)),hr=hr||"Identity-H",Sl.call(this,ms,Ss,Zs,hr)};var Jl,ku=_e.lineWidth||.200025,lu=cs.__private__.getLineWidth=cs.getLineWidth=function(){return ku},sm=cs.__private__.setLineWidth=cs.setLineWidth=function(ms){return ku=ms,Ns(zs(As(ms))+" w"),this};cs.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(ms,Ss){if(ms=ms||[],Ss=Ss||0,isNaN(Ss)||!Array.isArray(ms))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ms=ms.map(function(Zs){return zs(As(Zs))}).join(" "),Ss=zs(As(Ss)),Ns("["+ms+"] "+Ss+" d"),this};var rm=cs.__private__.getLineHeight=cs.getLineHeight=function(){return lr*Jl};cs.__private__.getLineHeight=cs.getLineHeight=function(){return lr*Jl};var nm=cs.__private__.setLineHeightFactor=cs.setLineHeightFactor=function(ms){return typeof(ms=ms||1.15)=="number"&&(Jl=ms),this},im=cs.__private__.getLineHeightFactor=cs.getLineHeightFactor=function(){return Jl};nm(_e.lineHeight);var Ho=cs.__private__.getHorizontalCoordinate=function(ms){return As(ms)},Yo=cs.__private__.getVerticalCoordinate=function(ms){return Es===fs.ADVANCED?ms:Hr[Vs].mediaBox.topRightY-Hr[Vs].mediaBox.bottomLeftY-As(ms)},Fm=cs.__private__.getHorizontalCoordinateString=cs.getHorizontalCoordinateString=function(ms){return zs(Ho(ms))},Tl=cs.__private__.getVerticalCoordinateString=cs.getVerticalCoordinateString=function(ms){return zs(Yo(ms))},Do=_e.strokeColor||"0 G";cs.__private__.getStrokeColor=cs.getDrawColor=function(){return Ds(Do)},cs.__private__.setStrokeColor=cs.setDrawColor=function(ms,Ss,Zs,rr){return Do=Er({ch1:ms,ch2:Ss,ch3:Zs,ch4:rr,pdfColorType:"draw",precision:2}),Ns(Do),this};var Tu=_e.fillColor||"0 g";cs.__private__.getFillColor=cs.getFillColor=function(){return Ds(Tu)},cs.__private__.setFillColor=cs.setFillColor=function(ms,Ss,Zs,rr){return Tu=Er({ch1:ms,ch2:Ss,ch3:Zs,ch4:rr,pdfColorType:"fill",precision:2}),Ns(Tu),this};var Yl=_e.textColor||"0 g",Bm=cs.__private__.getTextColor=cs.getTextColor=function(){return Ds(Yl)};cs.__private__.setTextColor=cs.setTextColor=function(ms,Ss,Zs,rr){return Yl=Er({ch1:ms,ch2:Ss,ch3:Zs,ch4:rr,pdfColorType:"text",precision:3}),this};var cu=_e.charSpace,qm=cs.__private__.getCharSpace=cs.getCharSpace=function(){return parseFloat(cu||0)};cs.__private__.setCharSpace=cs.setCharSpace=function(ms){if(isNaN(ms))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cu=ms,this};var Lu=0;cs.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},cs.__private__.setLineCap=cs.setLineCap=function(ms){var Ss=cs.CapJoinStyles[ms];if(Ss===void 0)throw new Error("Line cap style of '"+ms+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lu=Ss,Ns(Ss+" J"),this};var Pu=0;cs.__private__.setLineJoin=cs.setLineJoin=function(ms){var Ss=cs.CapJoinStyles[ms];if(Ss===void 0)throw new Error("Line join style of '"+ms+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pu=Ss,Ns(Ss+" j"),this},cs.__private__.setLineMiterLimit=cs.__private__.setMiterLimit=cs.setLineMiterLimit=cs.setMiterLimit=function(ms){if(ms=ms||0,isNaN(ms))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ns(zs(As(ms))+" M"),this},cs.GState=j,cs.setGState=function(ms){(ms=typeof ms=="string"?Sn[Hn[ms]]:am(null,ms)).equals($n)||(Ns("/"+ms.id+" gs"),$n=ms)};var am=function(ms,Ss){if(!ms||!Hn[ms]){var Zs=!1;for(var rr in Sn)if(Sn.hasOwnProperty(rr)&&Sn[rr].equals(Ss)){Zs=!0;break}if(Zs)Ss=Sn[rr];else{var hr="GS"+(Object.keys(Sn).length+1).toString(10);Sn[hr]=Ss,Ss.id=hr}return ms&&(Hn[ms]=Ss.id),dn.publish("addGState",Ss),Ss}};cs.addGState=function(ms,Ss){return am(ms,Ss),this},cs.saveGraphicsState=function(){return Ns("q"),un.push({key:Ir,size:lr,color:Yl}),this},cs.restoreGraphicsState=function(){Ns("Q");var ms=un.pop();return Ir=ms.key,lr=ms.size,Yl=ms.color,$n=null,this},cs.setCurrentTransformationMatrix=function(ms){return Ns(ms.toString()+" cm"),this},cs.comment=function(ms){return Ns("#"+ms),this};var uu=function(ms,Ss){var Zs=ms||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Zs},set:function(Cr){isNaN(Cr)||(Zs=parseFloat(Cr))}});var rr=Ss||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return rr},set:function(Cr){isNaN(Cr)||(rr=parseFloat(Cr))}});var hr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return hr},set:function(Cr){hr=Cr.toString()}}),this},Iu=function(ms,Ss,Zs,rr){uu.call(this,ms,Ss),this.type="rect";var hr=Zs||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return hr},set:function(Fr){isNaN(Fr)||(hr=parseFloat(Fr))}});var Cr=rr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Cr},set:function(Fr){isNaN(Fr)||(Cr=parseFloat(Fr))}}),this},$u=function(){this.page=An,this.currentPage=Vs,this.pages=Dr.slice(0),this.pagesContext=Hr.slice(0),this.x=Zr,this.y=Gr,this.matrix=nn,this.width=Xl(Vs),this.height=Ll(Vs),this.outputDestination=or,this.id="",this.objectNumber=-1};$u.prototype.restore=function(){An=this.page,Vs=this.currentPage,Hr=this.pagesContext,Dr=this.pages,Zr=this.x,Gr=this.y,nn=this.matrix,Ou(Vs,this.width),Du(Vs,this.height),or=this.outputDestination};var om=function(ms,Ss,Zs,rr,hr){Jn.push(new $u),An=Vs=0,Dr=[],Zr=ms,Gr=Ss,nn=hr,Cl([Zs,rr])},Um=function(ms){if(oo[ms])Jn.pop().restore();else{var Ss=new $u,Zs="Xo"+(Object.keys(vn).length+1).toString(10);Ss.id=Zs,oo[ms]=Zs,vn[Zs]=Ss,dn.publish("addFormObject",Ss),Jn.pop().restore()}};for(var du in cs.beginFormObject=function(ms,Ss,Zs,rr,hr){return om(ms,Ss,Zs,rr,hr),this},cs.endFormObject=function(ms){return Um(ms),this},cs.doFormObject=function(ms,Ss){var Zs=vn[oo[ms]];return Ns("q"),Ns(Ss.toString()+" cm"),Ns("/"+Zs.id+" Do"),Ns("Q"),this},cs.getFormObject=function(ms){var Ss=vn[oo[ms]];return{x:Ss.x,y:Ss.y,width:Ss.width,height:Ss.height,matrix:Ss.matrix}},cs.save=function(ms,Ss){return ms=ms||"generated.pdf",(Ss=Ss||{}).returnPromise=Ss.returnPromise||!1,Ss.returnPromise===!1?(l(co(wn()),ms),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Zs,rr){try{var hr=l(co(wn()),ms);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Zs(hr)}catch(Cr){rr(Cr.message)}})},E.API)E.API.hasOwnProperty(du)&&(du==="events"&&E.API.events.length?function(ms,Ss){var Zs,rr,hr;for(hr=Ss.length-1;hr!==-1;hr--)Zs=Ss[hr][0],rr=Ss[hr][1],ms.subscribe.apply(ms,[Zs].concat(typeof rr=="function"?[rr]:rr))}(dn,E.API.events):cs[du]=E.API[du]);var Xl=cs.getPageWidth=function(ms){return(Hr[ms=ms||Vs].mediaBox.topRightX-Hr[ms].mediaBox.bottomLeftX)/kr},Ou=cs.setPageWidth=function(ms,Ss){Hr[ms].mediaBox.topRightX=Ss*kr+Hr[ms].mediaBox.bottomLeftX},Ll=cs.getPageHeight=function(ms){return(Hr[ms=ms||Vs].mediaBox.topRightY-Hr[ms].mediaBox.bottomLeftY)/kr},Du=cs.setPageHeight=function(ms,Ss){Hr[ms].mediaBox.topRightY=Ss*kr+Hr[ms].mediaBox.bottomLeftY};return cs.internal={pdfEscape:eo,getStyle:em,getFont:Mm,getFontSize:Ar,getCharSpace:qm,getTextColor:Bm,getLineHeight:rm,getLineHeightFactor:im,getLineWidth:lu,write:jr,getHorizontalCoordinate:Ho,getVerticalCoordinate:Yo,getCoordinateString:Fm,getVerticalCoordinateString:Tl,collections:{},newObject:Mn,newAdditionalObject:Bo,newObjectDeferred:On,newObjectDeferredBegin:$a,getFilters:br,putStream:qr,events:dn,scaleFactor:kr,pageSize:{getWidth:function(){return Xl(Vs)},setWidth:function(ms){Ou(Vs,ms)},getHeight:function(){return Ll(Vs)},setHeight:function(ms){Du(Vs,ms)}},encryptionOptions:us,encryption:io,getEncryptor:Pm,output:_l,getNumberOfPages:Br,pages:Dr,out:Ns,f2:Gs,f3:bs,getPageInfo:_d,getPageInfoByObjId:pn,getCurrentPageInfo:Im,getPDFVersion:gs,Point:uu,Rectangle:Iu,Matrix:an,hasHotfix:au},Object.defineProperty(cs.internal.pageSize,"width",{get:function(){return Xl(Vs)},set:function(ms){Ou(Vs,ms)},enumerable:!0,configurable:!0}),Object.defineProperty(cs.internal.pageSize,"height",{get:function(){return Ll(Vs)},set:function(ms){Du(Vs,ms)},enumerable:!0,configurable:!0}),iu.call(cs,dr),Ir="F1",Wl(ts,St),dn.publish("initialized"),cs}I.prototype.lsbFirstWord=function(_e){return String.fromCharCode(_e>>0&255,_e>>8&255,_e>>16&255,_e>>24&255)},I.prototype.toHexString=function(_e){return _e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(_e){for(var e=[],St=0;St<_e.length;St+=2)e.push(String.fromCharCode(parseInt(_e.substr(St,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(_e,e){return P(x(e).substr(0,5),_e)},I.prototype.encryptor=function(_e,e){var St=x(this.encryptionKey+String.fromCharCode(255&_e,_e>>8&255,_e>>16&255,255&e,e>>8&255)).substr(0,10);return function(es){return P(St,es)}},j.prototype.equals=function(_e){var e,St="id,objectNumber,equals";if(!_e||_typeof(_e)!==_typeof(this))return!1;var es=0;for(e in this)if(!(St.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!_e.hasOwnProperty(e)||this[e]!==_e[e])return!1;es++}for(e in _e)_e.hasOwnProperty(e)&&St.indexOf(e)<0&&es--;return es===0},E.API={events:[]},E.version="3.0.1";var q=E.API,D=1,R=function(_e){return _e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(_e){return _e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(_e){return _e.toFixed(2)},z=function(_e){return _e.toFixed(5)};q.__acroform__={};var H=function(_e,e){_e.prototype=Object.create(e.prototype),_e.prototype.constructor=_e},W=function(_e){return _e*D},V=function(_e){var e=new ut,St=At.internal.getHeight(_e)||0,es=At.internal.getWidth(_e)||0;return e.BBox=[0,0,Number(U(es)),Number(U(St))],e},G=q.__acroform__.setBit=function(_e,e){if(_e=_e||0,e=e||0,isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return _e|=1<<e},Y=q.__acroform__.clearBit=function(_e,e){if(_e=_e||0,e=e||0,isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return _e&=~(1<<e)},J=q.__acroform__.getBit=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return _e&1<<e?1:0},X$1=q.__acroform__.getBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(_e,e-1)},K=q.__acroform__.setBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(_e,e-1)},Z=q.__acroform__.clearBitForPdf=function(_e,e){if(isNaN(_e)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(_e,e-1)},$=q.__acroform__.calculateCoordinates=function(_e,e){var St=e.internal.getHorizontalCoordinate,es=e.internal.getVerticalCoordinate,ts=_e[0],ss=_e[1],rs=_e[2],ns=_e[3],is={};return is.lowerLeft_X=St(ts)||0,is.lowerLeft_Y=es(ss+ns)||0,is.upperRight_X=St(ts+rs)||0,is.upperRight_Y=es(ss)||0,[Number(U(is.lowerLeft_X)),Number(U(is.lowerLeft_Y)),Number(U(is.upperRight_X)),Number(U(is.upperRight_Y))]},Q=function(_e){if(_e.appearanceStreamContent)return _e.appearanceStreamContent;if(_e.V||_e.DV){var e=[],St=_e._V||_e.DV,es=tt(_e,St),ts=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(_e.scope.__private__.encodeColorString(_e.color)),e.push("/"+ts+" "+U(es.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(es.text),e.push("ET"),e.push("Q"),e.push("EMC");var ss=V(_e);return ss.scope=_e.scope,ss.stream=e.join(`
`),ss}},tt=function(_e,e){var St=_e.fontSize===0?_e.maxFontSize:_e.fontSize,es={text:"",fontSize:""},ts=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");ts=_e.multiline?ts.map(function(bs){return bs.split(`
`)}):ts.map(function(bs){return[bs]});var ss=St,rs=At.internal.getHeight(_e)||0;rs=rs<0?-rs:rs;var ns=At.internal.getWidth(_e)||0;ns=ns<0?-ns:ns;var is=function(bs,As,ks){if(bs+1<ts.length){var $s=As+" "+ts[bs+1][0];return et($s,_e,ks).width<=ns-4}return!1};ss++;e:for(;ss>0;){e="",ss--;var os,us,ps=et("3",_e,ss).height,xs=_e.multiline?rs-ss:(rs-ps)/2,cs=xs+=2,ys=0,gs=0,vs=0;if(ss<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,_e,ss=12).width+", FieldWidth:"+ns+`
`;break}for(var ds="",fs=0,Es=0;Es<ts.length;Es++)if(ts.hasOwnProperty(Es)){var Os=!1;if(ts[Es].length!==1&&vs!==ts[Es].length-1){if((ps+2)*(fs+2)+2>rs)continue e;ds+=ts[Es][vs],Os=!0,gs=Es,Es--}else{ds=(ds+=ts[Es][vs]+" ").substr(ds.length-1)==" "?ds.substr(0,ds.length-1):ds;var Hs=parseInt(Es),Qs=is(Hs,ds,ss),zs=Es>=ts.length-1;if(Qs&&!zs){ds+=" ",vs=0;continue}if(Qs||zs){if(zs)gs=Hs;else if(_e.multiline&&(ps+2)*(fs+2)+2>rs)continue e}else{if(!_e.multiline||(ps+2)*(fs+2)+2>rs)continue e;gs=Hs}}for(var Ls="",Bs=ys;Bs<=gs;Bs++){var Gs=ts[Bs];if(_e.multiline){if(Bs===gs){Ls+=Gs[vs]+" ",vs=(vs+1)%Gs.length;continue}if(Bs===ys){Ls+=Gs[Gs.length-1]+" ";continue}}Ls+=Gs[0]+" "}switch(Ls=Ls.substr(Ls.length-1)==" "?Ls.substr(0,Ls.length-1):Ls,us=et(Ls,_e,ss).width,_e.textAlign){case"right":os=ns-us-2;break;case"center":os=(ns-us)/2;break;case"left":default:os=2}e+=U(os)+" "+U(cs)+` Td
`,e+="("+R(Ls)+`) Tj
`,e+=-U(os)+` 0 Td
`,cs=-(ss+2),us=0,ys=Os?gs:gs+1,fs++,ds=""}break}return es.text=e,es.fontSize=ss,es},et=function(_e,e,St){var es=e.scope.internal.getFont(e.fontName,e.fontStyle),ts=e.scope.getStringUnitWidth(_e,{font:es,fontSize:parseFloat(St),charSpace:0})*parseFloat(St);return{height:e.scope.getStringUnitWidth("3",{font:es,fontSize:parseFloat(St),charSpace:0})*parseFloat(St)*1.5,width:ts}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(_e,e){var St={type:"reference",object:_e};e.internal.getPageInfo(_e.page).pageContext.annotations.find(function(es){return es.type===St.type&&es.object===St.object})===void 0&&e.internal.getPageInfo(_e.page).pageContext.annotations.push(St)},it=function(_e,e){for(var St in _e)if(_e.hasOwnProperty(St)){var es=St,ts=_e[St];e.internal.newObjectDeferredBegin(ts.objId,!0),_typeof(ts)==="object"&&typeof ts.putStream=="function"&&ts.putStream(),delete _e[es]}},at=function(_e,e){if(e.scope=_e,_e.internal!==void 0&&(_e.internal.acroformPlugin===void 0||_e.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,_e.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),_e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=_e.internal.scaleFactor,_e.internal.acroformPlugin.acroFormDictionaryRoot=new ht,_e.internal.acroformPlugin.acroFormDictionaryRoot.scope=_e,_e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=_e.internal.events.subscribe("postPutResources",function(){(function(St){St.internal.events.unsubscribe(St.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete St.internal.acroformPlugin.acroFormDictionaryRoot._eventID,St.internal.acroformPlugin.printedOut=!0})(_e)}),_e.internal.events.subscribe("buildDocument",function(){(function(St){St.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var es=St.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var ts in es)if(es.hasOwnProperty(ts)){var ss=es[ts];ss.objId=void 0,ss.hasAnnotation&&nt(ss,St)}})(_e)}),_e.internal.events.subscribe("putCatalog",function(){(function(St){if(St.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");St.internal.write("/AcroForm "+St.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(_e)}),_e.internal.events.subscribe("postPutPages",function(St){(function(es,ts){var ss=!es;for(var rs in es||(ts.internal.newObjectDeferredBegin(ts.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),ts.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),es=es||ts.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(es.hasOwnProperty(rs)){var ns=es[rs],is=[],os=ns.Rect;if(ns.Rect&&(ns.Rect=$(ns.Rect,ts)),ts.internal.newObjectDeferredBegin(ns.objId,!0),ns.DA=At.createDefaultAppearanceStream(ns),_typeof(ns)==="object"&&typeof ns.getKeyValueListForStream=="function"&&(is=ns.getKeyValueListForStream()),ns.Rect=os,ns.hasAppearanceStream&&!ns.appearanceStreamContent){var us=Q(ns);is.push({key:"AP",value:"<</N "+us+">>"}),ts.internal.acroformPlugin.xForms.push(us)}if(ns.appearanceStreamContent){var ps="";for(var xs in ns.appearanceStreamContent)if(ns.appearanceStreamContent.hasOwnProperty(xs)){var cs=ns.appearanceStreamContent[xs];if(ps+="/"+xs+" ",ps+="<<",Object.keys(cs).length>=1||Array.isArray(cs)){for(var rs in cs)if(cs.hasOwnProperty(rs)){var ys=cs[rs];typeof ys=="function"&&(ys=ys.call(ts,ns)),ps+="/"+rs+" "+ys+" ",ts.internal.acroformPlugin.xForms.indexOf(ys)>=0||ts.internal.acroformPlugin.xForms.push(ys)}}else typeof(ys=cs)=="function"&&(ys=ys.call(ts,ns)),ps+="/"+rs+" "+ys,ts.internal.acroformPlugin.xForms.indexOf(ys)>=0||ts.internal.acroformPlugin.xForms.push(ys);ps+=">>"}is.push({key:"AP",value:`<<
`+ps+">>"})}ts.internal.putStream({additionalKeyValues:is,objectId:ns.objId}),ts.internal.out("endobj")}ss&&it(ts.internal.acroformPlugin.xForms,ts)})(St,_e)}),_e.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(_e,e,St){var es=function(rs){return rs};if(Array.isArray(_e)){for(var ts="[",ss=0;ss<_e.length;ss++)switch(ss!==0&&(ts+=" "),_typeof(_e[ss])){case"boolean":case"number":case"object":ts+=_e[ss].toString();break;case"string":_e[ss].substr(0,1)!=="/"?(e!==void 0&&St&&(es=St.internal.getEncryptor(e)),ts+="("+R(es(_e[ss].toString()))+")"):ts+=_e[ss].toString()}return ts+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(_e,e,St){var es=function(ts){return ts};return e!==void 0&&St&&(es=St.internal.getEncryptor(e)),(_e=_e||"").toString(),_e="("+R(es(_e))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(_e){this._objId=_e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var _e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:_e,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var _e=[],e=Object.getOwnPropertyNames(this).filter(function(ss){return ss!="content"&&ss!="appearanceStreamContent"&&ss!="scope"&&ss!="objId"&&ss.substring(0,1)!="_"});for(var St in e)if(Object.getOwnPropertyDescriptor(this,e[St]).configurable===!1){var es=e[St],ts=this[es];ts&&(Array.isArray(ts)?_e.push({key:es,value:ot(ts,this.objId,this.scope)}):ts instanceof ct?(ts.scope=this.scope,_e.push({key:es,value:ts.objId+" 0 R"})):typeof ts!="function"&&_e.push({key:es,value:ts}))}return _e};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var _e,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(St){e=St}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(St){_e=St.trim()},get:function(){return _e||null}})};H(ut,ct);var ht=function(){ct.call(this);var _e,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(_e){var St=function(es){return es};return this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),"("+R(St(_e))+")"}},set:function(St){_e=St}})};H(ht,ct);var lt=function _e(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(ds){if(isNaN(ds))throw new Error('Invalid value "'+ds+'" for attribute F supplied.');e=ds}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X$1(e,3)},set:function(ds){ds?this.F=K(e,3):this.F=Z(e,3)}});var St=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return St},set:function(ds){if(isNaN(ds))throw new Error('Invalid value "'+ds+'" for attribute Ff supplied.');St=ds}});var es=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(es.length!==0)return es},set:function(ds){es=ds!==void 0?ds:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!es||isNaN(es[0])?0:es[0]},set:function(ds){es[0]=ds}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!es||isNaN(es[1])?0:es[1]},set:function(ds){es[1]=ds}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!es||isNaN(es[2])?0:es[2]},set:function(ds){es[2]=ds}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!es||isNaN(es[3])?0:es[3]},set:function(ds){es[3]=ds}});var ts="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return ts},set:function(ds){switch(ds){case"/Btn":case"/Tx":case"/Ch":case"/Sig":ts=ds;break;default:throw new Error('Invalid value "'+ds+'" for attribute FT supplied.')}}});var ss=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!ss||ss.length<1){if(this instanceof yt)return;ss="FieldObject"+_e.FieldNum++}var ds=function(fs){return fs};return this.scope&&(ds=this.scope.internal.getEncryptor(this.objId)),"("+R(ds(ss))+")"},set:function(ds){ss=ds.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return ss},set:function(ds){ss=ds}});var rs="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return rs},set:function(ds){rs=ds}});var ns="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return ns},set:function(ds){ns=ds}});var is=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return is},set:function(ds){is=ds}});var os=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return os===void 0?50/D:os},set:function(ds){os=ds}});var us="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return us},set:function(ds){us=ds}});var ps="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!ps||this instanceof yt||this instanceof Nt))return st(ps,this.objId,this.scope)},set:function(ds){ds=ds.toString(),ps=ds}});var xs=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(xs)return this instanceof mt?xs:st(xs,this.objId,this.scope)},set:function(ds){ds=ds.toString(),xs=this instanceof mt?ds:ds.substr(0,1)==="("?T(ds.substr(1,ds.length-2)):T(ds)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(xs.substr(1,xs.length-1)):xs},set:function(ds){ds=ds.toString(),xs=this instanceof mt?"/"+ds:ds}});var cs=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(cs)return cs},set:function(ds){this.V=ds}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(cs)return this instanceof mt?cs:st(cs,this.objId,this.scope)},set:function(ds){ds=ds.toString(),cs=this instanceof mt?ds:ds.substr(0,1)==="("?T(ds.substr(1,ds.length-2)):T(ds)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(cs.substr(1,cs.length-1)):cs},set:function(ds){ds=ds.toString(),cs=this instanceof mt?"/"+ds:ds}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var ys,gs=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return gs},set:function(ds){ds=!!ds,gs=ds}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(ys)return ys},set:function(ds){ys=ds}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,1)},set:function(ds){ds?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,2)},set:function(ds){ds?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,3)},set:function(ds){ds?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var vs=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(vs!==null)return vs},set:function(ds){if([0,1,2].indexOf(ds)===-1)throw new Error('Invalid value "'+ds+'" for attribute Q supplied.');vs=ds}}),Object.defineProperty(this,"textAlign",{get:function(){var ds;switch(vs){case 0:default:ds="left";break;case 1:ds="center";break;case 2:ds="right"}return ds},configurable:!0,enumerable:!0,set:function(ds){switch(ds){case"right":case 2:vs=2;break;case"center":case 1:vs=1;break;case"left":case 0:default:vs=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var _e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(St){_e=St}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(St){_e=St}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(St){var es,ts;ts=[],typeof(es=St)=="string"&&(ts=function(ss,rs,ns){ns||(ns=1);for(var is,os=[];is=rs.exec(ss);)os.push(is[ns]);return os}(es,/\((.*?)\)/g)),e=ts}}),this.getOptions=function(){return e},this.setOptions=function(St){e=St,this.sort&&e.sort()},this.addOption=function(St){St=(St=St||"").toString(),e.push(St),this.sort&&e.sort()},this.removeOption=function(St,es){for(es=es||!1,St=(St=St||"").toString();e.indexOf(St)!==-1&&(e.splice(e.indexOf(St),1),es!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,18)},set:function(St){St?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,19)},set:function(St){this.combo===!0&&(St?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,20)},set:function(St){St?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,22)},set:function(St){St?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,23)},set:function(St){St?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,27)},set:function(St){St?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,15)},set:function(St){St?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,16)},set:function(St){St?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,17)},set:function(St){St?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,26)},set:function(St){St?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var _e,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var St=function(ss){return ss};if(this.scope&&(St=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var es,ts=[];for(es in ts.push("<<"),e)ts.push("/"+es+" ("+R(St(e[es]))+")");return ts.push(">>"),ts.join(`
`)}},set:function(St){_typeof(St)==="object"&&(e=St)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(St){typeof St=="string"&&(e.CA=St)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(St){_e=St}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return _e.substr(1,_e.length-1)},set:function(St){_e="/"+St}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var _e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(e){_e=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var _e,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return _e},set:function(ts){_e=ts}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(ts){e=ts}});var St,es={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var ts=function(ns){return ns};this.scope&&(ts=this.scope.internal.getEncryptor(this.objId));var ss,rs=[];for(ss in rs.push("<<"),es)rs.push("/"+ss+" ("+R(ts(es[ss]))+")");return rs.push(">>"),rs.join(`
`)},set:function(ts){_typeof(ts)==="object"&&(es=ts)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return es.CA||""},set:function(ts){typeof ts=="string"&&(es.CA=ts)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return St},set:function(ts){St=ts}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return St.substr(1,St.length-1)},set:function(ts){St="/"+ts}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(_e){if(!("createAppearanceStream"in _e)||!("getCA"in _e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var St=this.Kids[e];St.appearanceStreamContent=_e.createAppearanceStream(St.optionName),St.caption=_e.getCA()}},bt.prototype.createOption=function(_e){var e=new yt;return e.Parent=this,e.optionName=_e,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var _e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return _e},set:function(e){_e=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return _e},set:function(e){Number.isInteger(e)&&(_e=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X$1(this.Ff,14)},set:function(_e){_e?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=[],es=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,ts=_e.scope.__private__.encodeColorString(_e.color),ss=tt(_e,_e.caption);return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),St.push("f"),St.push("BMC"),St.push("q"),St.push("0 0 1 rg"),St.push("/"+es+" "+U(ss.fontSize)+" Tf "+ts),St.push("BT"),St.push(ss.text),St.push("ET"),St.push("Q"),St.push("EMC"),e.stream=St.join(`
`),e},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var St=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,es=_e.scope.__private__.encodeColorString(_e.color),ts=[],ss=At.internal.getHeight(_e),rs=At.internal.getWidth(_e),ns=tt(_e,_e.caption);return ts.push("1 g"),ts.push("0 0 "+U(rs)+" "+U(ss)+" re"),ts.push("f"),ts.push("q"),ts.push("0 0 1 rg"),ts.push("0 0 "+U(rs-1)+" "+U(ss-1)+" re"),ts.push("W"),ts.push("n"),ts.push("0 g"),ts.push("BT"),ts.push("/"+St+" "+U(ns.fontSize)+" Tf "+es),ts.push(ns.text),ts.push("ET"),ts.push("Q"),e.stream=ts.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),St.push("f"),e.stream=St.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(_e){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[_e]=At.RadioButton.Circle.YesNormal,e.D[_e]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var St=[],es=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;es=Number((.9*es).toFixed(5));var ts=At.internal.Bezier_C,ss=Number((es*ts).toFixed(5));return St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),St.push(es+" 0 m"),St.push(es+" "+ss+" "+ss+" "+es+" 0 "+es+" c"),St.push("-"+ss+" "+es+" -"+es+" "+ss+" -"+es+" 0 c"),St.push("-"+es+" -"+ss+" -"+ss+" -"+es+" 0 -"+es+" c"),St.push(ss+" -"+es+" "+es+" -"+ss+" "+es+" 0 c"),St.push("f"),St.push("Q"),e.stream=St.join(`
`),e},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=[],es=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;es=Number((.9*es).toFixed(5));var ts=Number((2*es).toFixed(5)),ss=Number((ts*At.internal.Bezier_C).toFixed(5)),rs=Number((es*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),St.push(ts+" 0 m"),St.push(ts+" "+ss+" "+ss+" "+ts+" 0 "+ts+" c"),St.push("-"+ss+" "+ts+" -"+ts+" "+ss+" -"+ts+" 0 c"),St.push("-"+ts+" -"+ss+" -"+ss+" -"+ts+" 0 -"+ts+" c"),St.push(ss+" -"+ts+" "+ts+" -"+ss+" "+ts+" 0 c"),St.push("f"),St.push("Q"),St.push("0 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),St.push(es+" 0 m"),St.push(es+" "+rs+" "+rs+" "+es+" 0 "+es+" c"),St.push("-"+rs+" "+es+" -"+es+" "+rs+" -"+es+" 0 c"),St.push("-"+es+" -"+rs+" -"+rs+" -"+es+" 0 -"+es+" c"),St.push(rs+" -"+es+" "+es+" -"+rs+" "+es+" 0 c"),St.push("f"),St.push("Q"),e.stream=St.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=[],es=At.internal.getWidth(_e)<=At.internal.getHeight(_e)?At.internal.getWidth(_e)/4:At.internal.getHeight(_e)/4;es=Number((.9*es).toFixed(5));var ts=Number((2*es).toFixed(5)),ss=Number((ts*At.internal.Bezier_C).toFixed(5));return St.push("0.749023 g"),St.push("q"),St.push("1 0 0 1 "+z(At.internal.getWidth(_e)/2)+" "+z(At.internal.getHeight(_e)/2)+" cm"),St.push(ts+" 0 m"),St.push(ts+" "+ss+" "+ss+" "+ts+" 0 "+ts+" c"),St.push("-"+ss+" "+ts+" -"+ts+" "+ss+" -"+ts+" 0 c"),St.push("-"+ts+" -"+ss+" -"+ss+" -"+ts+" 0 -"+ts+" c"),St.push(ss+" -"+ts+" "+ts+" -"+ss+" "+ts+" 0 c"),St.push("f"),St.push("Q"),e.stream=St.join(`
`),e}},Cross:{createAppearanceStream:function(_e){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[_e]=At.RadioButton.Cross.YesNormal,e.D[_e]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(_e){var e=V(_e);e.scope=_e.scope;var St=[],es=At.internal.calculateCross(_e);return St.push("q"),St.push("1 1 "+U(At.internal.getWidth(_e)-2)+" "+U(At.internal.getHeight(_e)-2)+" re"),St.push("W"),St.push("n"),St.push(U(es.x1.x)+" "+U(es.x1.y)+" m"),St.push(U(es.x2.x)+" "+U(es.x2.y)+" l"),St.push(U(es.x4.x)+" "+U(es.x4.y)+" m"),St.push(U(es.x3.x)+" "+U(es.x3.y)+" l"),St.push("s"),St.push("Q"),e.stream=St.join(`
`),e},YesPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=At.internal.calculateCross(_e),es=[];return es.push("0.749023 g"),es.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),es.push("f"),es.push("q"),es.push("1 1 "+U(At.internal.getWidth(_e)-2)+" "+U(At.internal.getHeight(_e)-2)+" re"),es.push("W"),es.push("n"),es.push(U(St.x1.x)+" "+U(St.x1.y)+" m"),es.push(U(St.x2.x)+" "+U(St.x2.y)+" l"),es.push(U(St.x4.x)+" "+U(St.x4.y)+" m"),es.push(U(St.x3.x)+" "+U(St.x3.y)+" l"),es.push("s"),es.push("Q"),e.stream=es.join(`
`),e},OffPushDown:function(_e){var e=V(_e);e.scope=_e.scope;var St=[];return St.push("0.749023 g"),St.push("0 0 "+U(At.internal.getWidth(_e))+" "+U(At.internal.getHeight(_e))+" re"),St.push("f"),e.stream=St.join(`
`),e}}},createDefaultAppearanceStream:function(_e){var e=_e.scope.internal.getFont(_e.fontName,_e.fontStyle).id,St=_e.scope.__private__.encodeColorString(_e.color);return"/"+e+" "+_e.fontSize+" Tf "+St}};At.internal={Bezier_C:.551915024494,calculateCross:function(_e){var e=At.internal.getWidth(_e),St=At.internal.getHeight(_e),es=Math.min(e,St);return{x1:{x:(e-es)/2,y:(St-es)/2+es},x2:{x:(e-es)/2+es,y:(St-es)/2},x3:{x:(e-es)/2,y:(St-es)/2},x4:{x:(e-es)/2+es,y:(St-es)/2+es}}}},At.internal.getWidth=function(_e){var e=0;return _typeof(_e)==="object"&&(e=W(_e.Rect[2])),e},At.internal.getHeight=function(_e){var e=0;return _typeof(_e)==="object"&&(e=W(_e.Rect[3])),e};var xt=q.addField=function(_e){if(at(this,_e),!(_e instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=_e).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),_e.page=_e.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(_e){return _e.reduce(function(e,St,es){return e[St]=es,e},{})}(function(_e){_e.__addimage__={};var e="UNKNOWN",St={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},es=_e.__addimage__.getImageFileTypeByImageData=function(bs,As){var ks,$s,qs,Cs,Us,Ps=e;if((As=As||e)==="RGBA"||bs.data!==void 0&&bs.data instanceof Uint8ClampedArray&&"height"in bs&&"width"in bs)return"RGBA";if(Qs(bs))for(Us in St)for(qs=St[Us],ks=0;ks<qs.length;ks+=1){for(Cs=!0,$s=0;$s<qs[ks].length;$s+=1)if(qs[ks][$s]!==void 0&&qs[ks][$s]!==bs[$s]){Cs=!1;break}if(Cs===!0){Ps=Us;break}}else for(Us in St)for(qs=St[Us],ks=0;ks<qs.length;ks+=1){for(Cs=!0,$s=0;$s<qs[ks].length;$s+=1)if(qs[ks][$s]!==void 0&&qs[ks][$s]!==bs.charCodeAt($s)){Cs=!1;break}if(Cs===!0){Ps=Us;break}}return Ps===e&&As!==e&&(Ps=As),Ps},ts=function bs(As){for(var ks=this.internal.write,$s=this.internal.putStream,qs=(0,this.internal.getFilters)();qs.indexOf("FlateEncode")!==-1;)qs.splice(qs.indexOf("FlateEncode"),1);As.objectId=this.internal.newObject();var Cs=[];if(Cs.push({key:"Type",value:"/XObject"}),Cs.push({key:"Subtype",value:"/Image"}),Cs.push({key:"Width",value:As.width}),Cs.push({key:"Height",value:As.height}),As.colorSpace===vs.INDEXED?Cs.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(As.palette.length/3-1)+" "+("sMask"in As&&As.sMask!==void 0?As.objectId+2:As.objectId+1)+" 0 R]"}):(Cs.push({key:"ColorSpace",value:"/"+As.colorSpace}),As.colorSpace===vs.DEVICE_CMYK&&Cs.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Cs.push({key:"BitsPerComponent",value:As.bitsPerComponent}),"decodeParameters"in As&&As.decodeParameters!==void 0&&Cs.push({key:"DecodeParms",value:"<<"+As.decodeParameters+">>"}),"transparency"in As&&Array.isArray(As.transparency)){for(var Us="",Ps=0,er=As.transparency.length;Ps<er;Ps++)Us+=As.transparency[Ps]+" "+As.transparency[Ps]+" ";Cs.push({key:"Mask",value:"["+Us+"]"})}As.sMask!==void 0&&Cs.push({key:"SMask",value:As.objectId+1+" 0 R"});var tr=As.filter!==void 0?["/"+As.filter]:void 0;if($s({data:As.data,additionalKeyValues:Cs,alreadyAppliedFilters:tr,objectId:As.objectId}),ks("endobj"),"sMask"in As&&As.sMask!==void 0){var vr="/Predictor "+As.predictor+" /Colors 1 /BitsPerComponent "+As.bitsPerComponent+" /Columns "+As.width,ws={width:As.width,height:As.height,colorSpace:"DeviceGray",bitsPerComponent:As.bitsPerComponent,decodeParameters:vr,data:As.sMask};"filter"in As&&(ws.filter=As.filter),bs.call(this,ws)}if(As.colorSpace===vs.INDEXED){var Vs=this.internal.newObject();$s({data:Ls(new Uint8Array(As.palette)),objectId:Vs}),ks("endobj")}},ss=function(){var bs=this.internal.collections.addImage_images;for(var As in bs)ts.call(this,bs[As])},rs=function(){var bs,As=this.internal.collections.addImage_images,ks=this.internal.write;for(var $s in As)ks("/I"+(bs=As[$s]).index,bs.objectId,"0","R")},ns=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",ss),this.internal.events.subscribe("putXobjectDict",rs))},is=function(){var bs=this.internal.collections.addImage_images;return ns.call(this),bs},os=function(){return Object.keys(this.internal.collections.addImage_images).length},us=function(bs){return typeof _e["process"+bs.toUpperCase()]=="function"},ps=function(bs){return _typeof(bs)==="object"&&bs.nodeType===1},xs=function(bs,As){if(bs.nodeName==="IMG"&&bs.hasAttribute("src")){var ks=""+bs.getAttribute("src");if(ks.indexOf("data:image/")===0)return u(unescape(ks).split("base64,").pop());var $s=_e.loadFile(ks,!0);if($s!==void 0)return $s}if(bs.nodeName==="CANVAS"){if(bs.width===0||bs.height===0)throw new Error("Given canvas must have data. Canvas width: "+bs.width+", height: "+bs.height);var qs;switch(As){case"PNG":qs="image/png";break;case"WEBP":qs="image/webp";break;case"JPEG":case"JPG":default:qs="image/jpeg"}return u(bs.toDataURL(qs,1).split("base64,").pop())}},cs=function(bs){var As=this.internal.collections.addImage_images;if(As){for(var ks in As)if(bs===As[ks].alias)return As[ks]}},ys=function(bs,As,ks){return bs||As||(bs=-96,As=-96),bs<0&&(bs=-1*ks.width*72/bs/this.internal.scaleFactor),As<0&&(As=-1*ks.height*72/As/this.internal.scaleFactor),bs===0&&(bs=As*ks.width/ks.height),As===0&&(As=bs*ks.height/ks.width),[bs,As]},gs=function(bs,As,ks,$s,qs,Cs){var Us=ys.call(this,ks,$s,qs),Ps=this.internal.getCoordinateString,er=this.internal.getVerticalCoordinateString,tr=is.call(this);if(ks=Us[0],$s=Us[1],tr[qs.index]=qs,Cs){Cs*=Math.PI/180;var vr=Math.cos(Cs),ws=Math.sin(Cs),Vs=function(Ws){return Ws.toFixed(4)},Ys=[Vs(vr),Vs(ws),Vs(-1*ws),Vs(vr),0,0,"cm"]}this.internal.write("q"),Cs?(this.internal.write([1,"0","0",1,Ps(bs),er(As+$s),"cm"].join(" ")),this.internal.write(Ys.join(" ")),this.internal.write([Ps(ks),"0","0",Ps($s),"0","0","cm"].join(" "))):this.internal.write([Ps(ks),"0","0",Ps($s),Ps(bs),er(As+$s),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+qs.index+" Do"),this.internal.write("Q")},vs=_e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};_e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ds=_e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},fs=_e.__addimage__.sHashCode=function(bs){var As,ks,$s=0;if(typeof bs=="string")for(ks=bs.length,As=0;As<ks;As++)$s=($s<<5)-$s+bs.charCodeAt(As),$s|=0;else if(Qs(bs))for(ks=bs.byteLength/2,As=0;As<ks;As++)$s=($s<<5)-$s+bs[As],$s|=0;return $s},Es=_e.__addimage__.validateStringAsBase64=function(bs){(bs=bs||"").toString().trim();var As=!0;return bs.length===0&&(As=!1),bs.length%4!=0&&(As=!1),/^[A-Za-z0-9+/]+$/.test(bs.substr(0,bs.length-2))===!1&&(As=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(bs.substr(-2))===!1&&(As=!1),As},Os=_e.__addimage__.extractImageFromDataUrl=function(bs){if(bs==null||!(bs=bs.trim()).startsWith("data:"))return null;var As=bs.indexOf(",");return As<0?null:bs.substring(0,As).trim().endsWith("base64")?bs.substring(As+1):null},Hs=_e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};_e.__addimage__.isArrayBuffer=function(bs){return Hs()&&bs instanceof ArrayBuffer};var Qs=_e.__addimage__.isArrayBufferView=function(bs){return Hs()&&typeof Uint32Array<"u"&&(bs instanceof Int8Array||bs instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&bs instanceof Uint8ClampedArray||bs instanceof Int16Array||bs instanceof Uint16Array||bs instanceof Int32Array||bs instanceof Uint32Array||bs instanceof Float32Array||bs instanceof Float64Array)},zs=_e.__addimage__.binaryStringToUint8Array=function(bs){for(var As=bs.length,ks=new Uint8Array(As),$s=0;$s<As;$s++)ks[$s]=bs.charCodeAt($s);return ks},Ls=_e.__addimage__.arrayBufferToBinaryString=function(bs){for(var As="",ks=Qs(bs)?bs:new Uint8Array(bs),$s=0;$s<ks.length;$s+=8192)As+=String.fromCharCode.apply(null,ks.subarray($s,$s+8192));return As};_e.addImage=function(){var bs,As,ks,$s,qs,Cs,Us,Ps,er;if(typeof arguments[1]=="number"?(As=e,ks=arguments[1],$s=arguments[2],qs=arguments[3],Cs=arguments[4],Us=arguments[5],Ps=arguments[6],er=arguments[7]):(As=arguments[1],ks=arguments[2],$s=arguments[3],qs=arguments[4],Cs=arguments[5],Us=arguments[6],Ps=arguments[7],er=arguments[8]),_typeof(bs=arguments[0])==="object"&&!ps(bs)&&"imageData"in bs){var tr=bs;bs=tr.imageData,As=tr.format||As||e,ks=tr.x||ks||0,$s=tr.y||$s||0,qs=tr.w||tr.width||qs,Cs=tr.h||tr.height||Cs,Us=tr.alias||Us,Ps=tr.compression||Ps,er=tr.rotation||tr.angle||er}var vr=this.internal.getFilters();if(Ps===void 0&&vr.indexOf("FlateEncode")!==-1&&(Ps="SLOW"),isNaN(ks)||isNaN($s))throw new Error("Invalid coordinates passed to jsPDF.addImage");ns.call(this);var ws=Bs.call(this,bs,As,Us,Ps);return gs.call(this,ks,$s,qs,Cs,ws,er),this};var Bs=function(bs,As,ks,$s){var qs,Cs,Us;if(typeof bs=="string"&&es(bs)===e){bs=unescape(bs);var Ps=Gs(bs,!1);(Ps!==""||(Ps=_e.loadFile(bs,!0))!==void 0)&&(bs=Ps)}if(ps(bs)&&(bs=xs(bs,As)),As=es(bs,As),!us(As))throw new Error("addImage does not support files of type '"+As+"', please ensure that a plugin for '"+As+"' support is added.");if(((Us=ks)==null||Us.length===0)&&(ks=function(er){return typeof er=="string"||Qs(er)?fs(er):Qs(er.data)?fs(er.data):null}(bs)),(qs=cs.call(this,ks))||(Hs()&&(bs instanceof Uint8Array||As==="RGBA"||(Cs=bs,bs=zs(bs))),qs=this["process"+As.toUpperCase()](bs,os.call(this),ks,function(er){return er&&typeof er=="string"&&(er=er.toUpperCase()),er in _e.image_compression?er:ds.NONE}($s),Cs)),!qs)throw new Error("An unknown error occurred whilst processing the image.");return qs},Gs=_e.__addimage__.convertBase64ToBinaryString=function(bs,As){As=typeof As!="boolean"||As;var ks,$s="";if(typeof bs=="string"){var qs;ks=(qs=Os(bs))!==null&&qs!==void 0?qs:bs;try{$s=u(ks)}catch(Cs){if(As)throw Es(ks)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Cs.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $s};_e.getImageProperties=function(bs){var As,ks,$s="";if(ps(bs)&&(bs=xs(bs)),typeof bs=="string"&&es(bs)===e&&(($s=Gs(bs,!1))===""&&($s=_e.loadFile(bs)||""),bs=$s),ks=es(bs),!us(ks))throw new Error("addImage does not support files of type '"+ks+"', please ensure that a plugin for '"+ks+"' support is added.");if(!Hs()||bs instanceof Uint8Array||(bs=zs(bs)),!(As=this["process"+ks.toUpperCase()](bs)))throw new Error("An unknown error occurred whilst processing the image");return As.fileType=ks,As}})(E.API),function(_e){var e=function(St){if(St!==void 0&&St!="")return!0};E.API.events.push(["addPage",function(St){this.internal.getPageInfo(St.pageNumber).pageContext.annotations=[]}]),_e.events.push(["putPage",function(St){for(var es,ts,ss,rs=this.internal.getCoordinateString,ns=this.internal.getVerticalCoordinateString,is=this.internal.getPageInfoByObjId(St.objId),os=St.pageContext.annotations,us=!1,ps=0;ps<os.length&&!us;ps++)switch((es=os[ps]).type){case"link":(e(es.options.url)||e(es.options.pageNumber))&&(us=!0);break;case"reference":case"text":case"freetext":us=!0}if(us!=0){this.internal.write("/Annots [");for(var xs=0;xs<os.length;xs++){es=os[xs];var cs=this.internal.pdfEscape,ys=this.internal.getEncryptor(St.objId);switch(es.type){case"reference":this.internal.write(" "+es.object.objId+" 0 R ");break;case"text":var gs=this.internal.newAdditionalObject(),vs=this.internal.newAdditionalObject(),ds=this.internal.getEncryptor(gs.objId),fs=es.title||"Note";ss="<</Type /Annot /Subtype /Text "+(ts="/Rect ["+rs(es.bounds.x)+" "+ns(es.bounds.y+es.bounds.h)+" "+rs(es.bounds.x+es.bounds.w)+" "+ns(es.bounds.y)+"] ")+"/Contents ("+cs(ds(es.contents))+")",ss+=" /Popup "+vs.objId+" 0 R",ss+=" /P "+is.objId+" 0 R",ss+=" /T ("+cs(ds(fs))+") >>",gs.content=ss;var Es=gs.objId+" 0 R";ss="<</Type /Annot /Subtype /Popup "+(ts="/Rect ["+rs(es.bounds.x+30)+" "+ns(es.bounds.y+es.bounds.h)+" "+rs(es.bounds.x+es.bounds.w+30)+" "+ns(es.bounds.y)+"] ")+" /Parent "+Es,es.open&&(ss+=" /Open true"),ss+=" >>",vs.content=ss,this.internal.write(gs.objId,"0 R",vs.objId,"0 R");break;case"freetext":ts="/Rect ["+rs(es.bounds.x)+" "+ns(es.bounds.y)+" "+rs(es.bounds.x+es.bounds.w)+" "+ns(es.bounds.y+es.bounds.h)+"] ";var Os=es.color||"#000000";ss="<</Type /Annot /Subtype /FreeText "+ts+"/Contents ("+cs(ys(es.contents))+")",ss+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Os+")",ss+=" /Border [0 0 0]",ss+=" >>",this.internal.write(ss);break;case"link":if(es.options.name){var Hs=this.annotations._nameMap[es.options.name];es.options.pageNumber=Hs.page,es.options.top=Hs.y}else es.options.top||(es.options.top=0);if(ts="/Rect ["+es.finalBounds.x+" "+es.finalBounds.y+" "+es.finalBounds.w+" "+es.finalBounds.h+"] ",ss="",es.options.url)ss="<</Type /Annot /Subtype /Link "+ts+"/Border [0 0 0] /A <</S /URI /URI ("+cs(ys(es.options.url))+") >>";else if(es.options.pageNumber)switch(ss="<</Type /Annot /Subtype /Link "+ts+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(es.options.pageNumber).objId+" 0 R",es.options.magFactor=es.options.magFactor||"XYZ",es.options.magFactor){case"Fit":ss+=" /Fit]";break;case"FitH":ss+=" /FitH "+es.options.top+"]";break;case"FitV":es.options.left=es.options.left||0,ss+=" /FitV "+es.options.left+"]";break;case"XYZ":default:var Qs=ns(es.options.top);es.options.left=es.options.left||0,es.options.zoom===void 0&&(es.options.zoom=0),ss+=" /XYZ "+es.options.left+" "+Qs+" "+es.options.zoom+"]"}ss!=""&&(ss+=" >>",this.internal.write(ss))}}this.internal.write("]")}}]),_e.createAnnotation=function(St){var es=this.internal.getCurrentPageInfo();switch(St.type){case"link":this.link(St.bounds.x,St.bounds.y,St.bounds.w,St.bounds.h,St);break;case"text":case"freetext":es.pageContext.annotations.push(St)}},_e.link=function(St,es,ts,ss,rs){var ns=this.internal.getCurrentPageInfo(),is=this.internal.getCoordinateString,os=this.internal.getVerticalCoordinateString;ns.pageContext.annotations.push({finalBounds:{x:is(St),y:os(es),w:is(St+ts),h:os(es+ss)},options:rs,type:"link"})},_e.textWithLink=function(St,es,ts,ss){var rs,ns,is=this.getTextWidth(St),os=this.internal.getLineHeight()/this.internal.scaleFactor;if(ss.maxWidth!==void 0){ns=ss.maxWidth;var us=this.splitTextToSize(St,ns).length;rs=Math.ceil(os*us)}else ns=is,rs=os;return this.text(St,es,ts,ss),ts+=.2*os,ss.align==="center"&&(es-=is/2),ss.align==="right"&&(es-=is),this.link(es,ts-os,ns,rs,ss),is},_e.getTextWidth=function(St){var es=this.internal.getFontSize();return this.getStringUnitWidth(St)*es/this.internal.scaleFactor}}(E.API),function(_e){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},St={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},es={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},ts=[1570,1571,1573,1575];_e.__arabicParser__={};var ss=_e.__arabicParser__.isInArabicSubstitutionA=function(gs){return e[gs.charCodeAt(0)]!==void 0},rs=_e.__arabicParser__.isArabicLetter=function(gs){return typeof gs=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(gs)},ns=_e.__arabicParser__.isArabicEndLetter=function(gs){return rs(gs)&&ss(gs)&&e[gs.charCodeAt(0)].length<=2},is=_e.__arabicParser__.isArabicAlfLetter=function(gs){return rs(gs)&&ts.indexOf(gs.charCodeAt(0))>=0};_e.__arabicParser__.arabicLetterHasIsolatedForm=function(gs){return rs(gs)&&ss(gs)&&e[gs.charCodeAt(0)].length>=1};var os=_e.__arabicParser__.arabicLetterHasFinalForm=function(gs){return rs(gs)&&ss(gs)&&e[gs.charCodeAt(0)].length>=2};_e.__arabicParser__.arabicLetterHasInitialForm=function(gs){return rs(gs)&&ss(gs)&&e[gs.charCodeAt(0)].length>=3};var us=_e.__arabicParser__.arabicLetterHasMedialForm=function(gs){return rs(gs)&&ss(gs)&&e[gs.charCodeAt(0)].length==4},ps=_e.__arabicParser__.resolveLigatures=function(gs){var vs=0,ds=St,fs="",Es=0;for(vs=0;vs<gs.length;vs+=1)ds[gs.charCodeAt(vs)]!==void 0?(Es++,typeof(ds=ds[gs.charCodeAt(vs)])=="number"&&(fs+=String.fromCharCode(ds),ds=St,Es=0),vs===gs.length-1&&(ds=St,fs+=gs.charAt(vs-(Es-1)),vs-=Es-1,Es=0)):(ds=St,fs+=gs.charAt(vs-Es),vs-=Es,Es=0);return fs};_e.__arabicParser__.isArabicDiacritic=function(gs){return gs!==void 0&&es[gs.charCodeAt(0)]!==void 0};var xs=_e.__arabicParser__.getCorrectForm=function(gs,vs,ds){return rs(gs)?ss(gs)===!1?-1:!os(gs)||!rs(vs)&&!rs(ds)||!rs(ds)&&ns(vs)||ns(gs)&&!rs(vs)||ns(gs)&&is(vs)||ns(gs)&&ns(vs)?0:us(gs)&&rs(vs)&&!ns(vs)&&rs(ds)&&os(ds)?3:ns(gs)||!rs(ds)?1:2:-1},cs=function(gs){var vs=0,ds=0,fs=0,Es="",Os="",Hs="",Qs=(gs=gs||"").split("\\s+"),zs=[];for(vs=0;vs<Qs.length;vs+=1){for(zs.push(""),ds=0;ds<Qs[vs].length;ds+=1)Es=Qs[vs][ds],Os=Qs[vs][ds-1],Hs=Qs[vs][ds+1],rs(Es)?(fs=xs(Es,Os,Hs),zs[vs]+=fs!==-1?String.fromCharCode(e[Es.charCodeAt(0)][fs]):Es):zs[vs]+=Es;zs[vs]=ps(zs[vs])}return zs.join(" ")},ys=_e.__arabicParser__.processArabic=_e.processArabic=function(){var gs,vs=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ds=[];if(Array.isArray(vs)){var fs=0;for(ds=[],fs=0;fs<vs.length;fs+=1)Array.isArray(vs[fs])?ds.push([cs(vs[fs][0]),vs[fs][1],vs[fs][2]]):ds.push([cs(vs[fs])]);gs=ds}else gs=cs(vs);return typeof arguments[0]=="string"?gs:(arguments[0].text=gs,arguments[0])};_e.events.push(["preProcessText",ys])}(E.API),E.API.autoPrint=function(_e){var e;switch((_e=_e||{}).variant=_e.variant||"non-conform",_e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(_e){var e=function(){var St=void 0;Object.defineProperty(this,"pdf",{get:function(){return St},set:function(ns){St=ns}});var es=150;Object.defineProperty(this,"width",{get:function(){return es},set:function(ns){es=isNaN(ns)||Number.isInteger(ns)===!1||ns<0?150:ns,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=es+1)}});var ts=300;Object.defineProperty(this,"height",{get:function(){return ts},set:function(ns){ts=isNaN(ns)||Number.isInteger(ns)===!1||ns<0?300:ns,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=ts+1)}});var ss=[];Object.defineProperty(this,"childNodes",{get:function(){return ss},set:function(ns){ss=ns}});var rs={};Object.defineProperty(this,"style",{get:function(){return rs},set:function(ns){rs=ns}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(St,es){var ts;if((St=St||"2d")!=="2d")return null;for(ts in es)this.pdf.context2d.hasOwnProperty(ts)&&(this.pdf.context2d[ts]=es[ts]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},_e.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(_e){var e={left:0,top:0,bottom:0,right:0},St=!1,es=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),ts.call(this))},ts=function(){this.internal.__cell__.lastCell=new ss,this.internal.__cell__.pages=1},ss=function(){var is=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return is},set:function(gs){is=gs}});var os=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return os},set:function(gs){os=gs}});var us=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return us},set:function(gs){us=gs}});var ps=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return ps},set:function(gs){ps=gs}});var xs=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return xs},set:function(gs){xs=gs}});var cs=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return cs},set:function(gs){cs=gs}});var ys=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return ys},set:function(gs){ys=gs}}),this};ss.prototype.clone=function(){return new ss(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},ss.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},_e.setHeaderFunction=function(is){return es.call(this),this.internal.__cell__.headerFunction=typeof is=="function"?is:void 0,this},_e.getTextDimensions=function(is,os){es.call(this);var us=(os=os||{}).fontSize||this.getFontSize(),ps=os.font||this.getFont(),xs=os.scaleFactor||this.internal.scaleFactor,cs=0,ys=0,gs=0,vs=this;if(!Array.isArray(is)&&typeof is!="string"){if(typeof is!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");is=String(is)}var ds=os.maxWidth;ds>0?typeof is=="string"?is=this.splitTextToSize(is,ds):Object.prototype.toString.call(is)==="[object Array]"&&(is=is.reduce(function(Es,Os){return Es.concat(vs.splitTextToSize(Os,ds))},[])):is=Array.isArray(is)?is:[is];for(var fs=0;fs<is.length;fs++)cs<(gs=this.getStringUnitWidth(is[fs],{font:ps})*us)&&(cs=gs);return cs!==0&&(ys=is.length),{w:cs/=xs,h:Math.max((ys*us*this.getLineHeightFactor()-us*(this.getLineHeightFactor()-1))/xs,0)}},_e.cellAddPage=function(){es.call(this),this.addPage();var is=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new ss(is.left,is.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var rs=_e.cell=function(){var is;is=arguments[0]instanceof ss?arguments[0]:new ss(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),es.call(this);var os=this.internal.__cell__.lastCell,us=this.internal.__cell__.padding,ps=this.internal.__cell__.margins||e,xs=this.internal.__cell__.tableHeaderRow,cs=this.internal.__cell__.printHeaders;return os.lineNumber!==void 0&&(os.lineNumber===is.lineNumber?(is.x=(os.x||0)+(os.width||0),is.y=os.y||0):os.y+os.height+is.height+ps.bottom>this.getPageHeight()?(this.cellAddPage(),is.y=ps.top,cs&&xs&&(this.printHeaderRow(is.lineNumber,!0),is.y+=xs[0].height)):is.y=os.y+os.height||is.y),is.text[0]!==void 0&&(this.rect(is.x,is.y,is.width,is.height,St===!0?"FD":void 0),is.align==="right"?this.text(is.text,is.x+is.width-us,is.y+us,{align:"right",baseline:"top"}):is.align==="center"?this.text(is.text,is.x+is.width/2,is.y+us,{align:"center",baseline:"top",maxWidth:is.width-us-us}):this.text(is.text,is.x+us,is.y+us,{align:"left",baseline:"top",maxWidth:is.width-us-us})),this.internal.__cell__.lastCell=is,this};_e.table=function(is,os,us,ps,xs){if(es.call(this),!us)throw new Error("No data for PDF table.");var cs,ys,gs,vs,ds=[],fs=[],Es=[],Os={},Hs={},Qs=[],zs=[],Ls=(xs=xs||{}).autoSize||!1,Bs=xs.printHeaders!==!1,Gs=xs.css&&xs.css["font-size"]!==void 0?16*xs.css["font-size"]:xs.fontSize||12,bs=xs.margins||Object.assign({width:this.getPageWidth()},e),As=typeof xs.padding=="number"?xs.padding:3,ks=xs.headerBackgroundColor||"#c8c8c8",$s=xs.headerTextColor||"#000";if(ts.call(this),this.internal.__cell__.printHeaders=Bs,this.internal.__cell__.margins=bs,this.internal.__cell__.table_font_size=Gs,this.internal.__cell__.padding=As,this.internal.__cell__.headerBackgroundColor=ks,this.internal.__cell__.headerTextColor=$s,this.setFontSize(Gs),ps==null)fs=ds=Object.keys(us[0]),Es=ds.map(function(){return"left"});else if(Array.isArray(ps)&&_typeof(ps[0])==="object")for(ds=ps.map(function(tr){return tr.name}),fs=ps.map(function(tr){return tr.prompt||tr.name||""}),Es=ps.map(function(tr){return tr.align||"left"}),cs=0;cs<ps.length;cs+=1)Hs[ps[cs].name]=ps[cs].width*(19.049976/25.4);else Array.isArray(ps)&&typeof ps[0]=="string"&&(fs=ds=ps,Es=ds.map(function(){return"left"}));if(Ls||Array.isArray(ps)&&typeof ps[0]=="string")for(cs=0;cs<ds.length;cs+=1){for(Os[vs=ds[cs]]=us.map(function(tr){return tr[vs]}),this.setFont(void 0,"bold"),Qs.push(this.getTextDimensions(fs[cs],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),ys=Os[vs],this.setFont(void 0,"normal"),gs=0;gs<ys.length;gs+=1)Qs.push(this.getTextDimensions(ys[gs],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Hs[vs]=Math.max.apply(null,Qs)+As+As,Qs=[]}if(Bs){var qs={};for(cs=0;cs<ds.length;cs+=1)qs[ds[cs]]={},qs[ds[cs]].text=fs[cs],qs[ds[cs]].align=Es[cs];var Cs=ns.call(this,qs,Hs);zs=ds.map(function(tr){return new ss(is,os,Hs[tr],Cs,qs[tr].text,void 0,qs[tr].align)}),this.setTableHeaderRow(zs),this.printHeaderRow(1,!1)}var Us=ps.reduce(function(tr,vr){return tr[vr.name]=vr.align,tr},{});for(cs=0;cs<us.length;cs+=1){"rowStart"in xs&&xs.rowStart instanceof Function&&xs.rowStart({row:cs,data:us[cs]},this);var Ps=ns.call(this,us[cs],Hs);for(gs=0;gs<ds.length;gs+=1){var er=us[cs][ds[gs]];"cellStart"in xs&&xs.cellStart instanceof Function&&xs.cellStart({row:cs,col:gs,data:er},this),rs.call(this,new ss(is,os,Hs[ds[gs]],Ps,er,cs+2,Us[ds[gs]]))}}return this.internal.__cell__.table_x=is,this.internal.__cell__.table_y=os,this};var ns=function(is,os){var us=this.internal.__cell__.padding,ps=this.internal.__cell__.table_font_size,xs=this.internal.scaleFactor;return Object.keys(is).map(function(cs){var ys=is[cs];return this.splitTextToSize(ys.hasOwnProperty("text")?ys.text:ys,os[cs]-us-us)},this).map(function(cs){return this.getLineHeightFactor()*cs.length*ps/xs+us+us},this).reduce(function(cs,ys){return Math.max(cs,ys)},0)};_e.setTableHeaderRow=function(is){es.call(this),this.internal.__cell__.tableHeaderRow=is},_e.printHeaderRow=function(is,os){if(es.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var us;if(St=!0,typeof this.internal.__cell__.headerFunction=="function"){var ps=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new ss(ps[0],ps[1],ps[2],ps[3],void 0,-1)}this.setFont(void 0,"bold");for(var xs=[],cs=0;cs<this.internal.__cell__.tableHeaderRow.length;cs+=1){us=this.internal.__cell__.tableHeaderRow[cs].clone(),os&&(us.y=this.internal.__cell__.margins.top||0,xs.push(us)),us.lineNumber=is;var ys=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),rs.call(this,us),this.setTextColor(ys)}xs.length>0&&this.setTableHeaderRow(xs),this.setFont(void 0,"normal"),St=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(_e){var e=_e.family.replace(/"|'/g,"").toLowerCase(),St=function(ss){return Pt[ss=ss||"normal"]?ss:"normal"}(_e.style),es=function(ss){if(!ss)return 400;if(typeof ss=="number")return ss>=100&&ss<=900&&ss%100==0?ss:400;if(/^\d00$/.test(ss))return parseInt(ss);switch(ss){case"bold":return 700;case"normal":default:return 400}}(_e.weight),ts=function(ss){return typeof It[ss=ss||"normal"]=="number"?ss:"normal"}(_e.stretch);return{family:e,style:St,weight:es,stretch:ts,src:_e.src||[],ref:_e.ref||{name:e,style:[ts,St,es].join(" ")}}}function Ot(_e,e,St,es){var ts;for(ts=St;ts>=0&&ts<e.length;ts+=es)if(_e[e[ts]])return _e[e[ts]];for(ts=St;ts>=0&&ts<e.length;ts-=es)if(_e[e[ts]])return _e[e[ts]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(_e){return[_e.stretch,_e.style,_e.weight,_e.family].join(" ")}function qt(_e,e,St){for(var es=(St=St||{}).defaultFontFamily||"times",ts=Object.assign({},Bt,St.genericFontFamilies||{}),ss=null,rs=null,ns=0;ns<e.length;++ns)if(ts[(ss=jt(e[ns])).family]&&(ss.family=ts[ss.family]),_e.hasOwnProperty(ss.family)){rs=_e[ss.family];break}if(!(rs=rs||_e[es]))throw new Error("Could not find a font-family for the rule '"+Et(ss)+"' and default family '"+es+"'.");if(rs=function(is,os){if(os[is])return os[is];var us=It[is],ps=us<=It.normal?-1:1,xs=Ot(os,kt,us,ps);if(!xs)throw new Error("Could not find a matching font-stretch value for "+is);return xs}(ss.stretch,rs),rs=function(is,os){if(os[is])return os[is];for(var us=Pt[is],ps=0;ps<us.length;++ps)if(os[us[ps]])return os[us[ps]];throw new Error("Could not find a matching font-style for "+is)}(ss.style,rs),!(rs=function(is,os){if(os[is])return os[is];if(is===400&&os[500])return os[500];if(is===500&&os[400])return os[400];var us=Ct[is],ps=Ot(os,Ft,us,is<400?-1:1);if(!ps)throw new Error("Could not find a matching font-weight for value "+is);return ps}(ss.weight,rs)))throw new Error("Failed to resolve a font for the rule '"+Et(ss)+"'.");return rs}function Dt(_e){return _e.trimLeft()}function Rt(_e,e){for(var St=0;St<_e.length;){if(_e.charAt(St)===e)return[_e.substring(0,St),_e.substring(St+1)];St+=1}return null}function Tt(_e){var e=_e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],_e.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(_e){var e,St,es,ts,ss,rs,ns,is,os,us=function(ws){return ws=ws||{},this.isStrokeTransparent=ws.isStrokeTransparent||!1,this.strokeOpacity=ws.strokeOpacity||1,this.strokeStyle=ws.strokeStyle||"#000000",this.fillStyle=ws.fillStyle||"#000000",this.isFillTransparent=ws.isFillTransparent||!1,this.fillOpacity=ws.fillOpacity||1,this.font=ws.font||"10px sans-serif",this.textBaseline=ws.textBaseline||"alphabetic",this.textAlign=ws.textAlign||"left",this.lineWidth=ws.lineWidth||1,this.lineJoin=ws.lineJoin||"miter",this.lineCap=ws.lineCap||"butt",this.path=ws.path||[],this.transform=ws.transform!==void 0?ws.transform.clone():new is,this.globalCompositeOperation=ws.globalCompositeOperation||"normal",this.globalAlpha=ws.globalAlpha||1,this.clip_path=ws.clip_path||[],this.currentPoint=ws.currentPoint||new rs,this.miterLimit=ws.miterLimit||10,this.lastPoint=ws.lastPoint||new rs,this.lineDashOffset=ws.lineDashOffset||0,this.lineDash=ws.lineDash||[],this.margin=ws.margin||[0,0,0,0],this.prevPageLastElemOffset=ws.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ws.ignoreClearRect!="boolean"||ws.ignoreClearRect,this};_e.events.push(["initialized",function(){this.context2d=new ps(this),e=this.internal.f2,St=this.internal.getCoordinateString,es=this.internal.getVerticalCoordinateString,ts=this.internal.getHorizontalCoordinate,ss=this.internal.getVerticalCoordinate,rs=this.internal.Point,ns=this.internal.Rectangle,is=this.internal.Matrix,os=new us}]);var ps=function(ws){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Vs=ws;Object.defineProperty(this,"pdf",{get:function(){return Vs}});var Ys=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ys},set:function(cr){Ys=!!cr}});var Ws=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ws},set:function(cr){Ws=!!cr}});var sr=0;Object.defineProperty(this,"posX",{get:function(){return sr},set:function(cr){isNaN(cr)||(sr=cr)}});var nr=0;Object.defineProperty(this,"posY",{get:function(){return nr},set:function(cr){isNaN(cr)||(nr=cr)}}),Object.defineProperty(this,"margin",{get:function(){return os.margin},set:function(cr){var Ns;typeof cr=="number"?Ns=[cr,cr,cr,cr]:((Ns=new Array(4))[0]=cr[0],Ns[1]=cr.length>=2?cr[1]:Ns[0],Ns[2]=cr.length>=3?cr[2]:Ns[0],Ns[3]=cr.length>=4?cr[3]:Ns[1]),os.margin=Ns}});var pr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pr},set:function(cr){pr=cr}});var xr=0;Object.defineProperty(this,"lastBreak",{get:function(){return xr},set:function(cr){xr=cr}});var Tr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Tr},set:function(cr){Tr=cr}}),Object.defineProperty(this,"ctx",{get:function(){return os},set:function(cr){cr instanceof us&&(os=cr)}}),Object.defineProperty(this,"path",{get:function(){return os.path},set:function(cr){os.path=cr}});var Dr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Dr},set:function(cr){Dr=cr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(cr){var Ns;Ns=xs(cr),this.ctx.fillStyle=Ns.style,this.ctx.isFillTransparent=Ns.a===0,this.ctx.fillOpacity=Ns.a,this.pdf.setFillColor(Ns.r,Ns.g,Ns.b,{a:Ns.a}),this.pdf.setTextColor(Ns.r,Ns.g,Ns.b,{a:Ns.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(cr){var Ns=xs(cr);this.ctx.strokeStyle=Ns.style,this.ctx.isStrokeTransparent=Ns.a===0,this.ctx.strokeOpacity=Ns.a,Ns.a===0?this.pdf.setDrawColor(255,255,255):(Ns.a,this.pdf.setDrawColor(Ns.r,Ns.g,Ns.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(cr){["butt","round","square"].indexOf(cr)!==-1&&(this.ctx.lineCap=cr,this.pdf.setLineCap(cr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(cr){isNaN(cr)||(this.ctx.lineWidth=cr,this.pdf.setLineWidth(cr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(cr){["bevel","round","miter"].indexOf(cr)!==-1&&(this.ctx.lineJoin=cr,this.pdf.setLineJoin(cr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(cr){isNaN(cr)||(this.ctx.miterLimit=cr,this.pdf.setMiterLimit(cr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(cr){this.ctx.textBaseline=cr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(cr){["right","end","center","left","start"].indexOf(cr)!==-1&&(this.ctx.textAlign=cr)}});var zr=null;function or(cr,Ns){if(zr===null){var jr=function(wr){var dr=[];return Object.keys(wr).forEach(function(lr){wr[lr].forEach(function(_r){var Ar=null;switch(_r){case"bold":Ar={family:lr,weight:"bold"};break;case"italic":Ar={family:lr,style:"italic"};break;case"bolditalic":Ar={family:lr,weight:"bold",style:"italic"};break;case"":case"normal":Ar={family:lr}}Ar!==null&&(Ar.ref={name:lr,style:_r},dr.push(Ar))})}),dr}(cr.getFontList());zr=function(wr){for(var dr={},lr=0;lr<wr.length;++lr){var _r=jt(wr[lr]),Ar=_r.family,Vr=_r.stretch,Kr=_r.style,_s=_r.weight;dr[Ar]=dr[Ar]||{},dr[Ar][Vr]=dr[Ar][Vr]||{},dr[Ar][Vr][Kr]=dr[Ar][Vr][Kr]||{},dr[Ar][Vr][Kr][_s]=_r}return dr}(jr.concat(Ns))}return zr}var Nr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Nr},set:function(cr){zr=null,Nr=cr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(cr){var Ns;if(this.ctx.font=cr,(Ns=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(cr))!==null){var jr=Ns[1];Ns[2];var wr=Ns[3],dr=Ns[4];Ns[5];var lr=Ns[6],_r=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(dr)[2];dr=Math.floor(_r==="px"?parseFloat(dr)*this.pdf.internal.scaleFactor:_r==="em"?parseFloat(dr)*this.pdf.getFontSize():parseFloat(dr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(dr);var Ar=function(Or){var Ir,kr,Zr=[],Gr=Or.trim();if(Gr==="")return Wt;if(Gr in Mt)return[Mt[Gr]];for(;Gr!=="";){switch(kr=null,Ir=(Gr=Dt(Gr)).charAt(0)){case'"':case"'":kr=Rt(Gr.substring(1),Ir);break;default:kr=Tt(Gr)}if(kr===null||(Zr.push(kr[0]),(Gr=Dt(kr[1]))!==""&&Gr.charAt(0)!==","))return Wt;Gr=Gr.replace(/^,/,"")}return Zr}(lr);if(this.fontFaces){var Vr=qt(or(this.pdf,this.fontFaces),Ar.map(function(Or){return{family:Or,stretch:"normal",weight:wr,style:jr}}));this.pdf.setFont(Vr.ref.name,Vr.ref.style)}else{var Kr="";(wr==="bold"||parseInt(wr,10)>=700||jr==="bold")&&(Kr="bold"),jr==="italic"&&(Kr+="italic"),Kr.length===0&&(Kr="normal");for(var _s="",Ks={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yr=0;yr<Ar.length;yr++){if(this.pdf.internal.getFont(Ar[yr],Kr,{noFallback:!0,disableWarning:!0})!==void 0){_s=Ar[yr];break}if(Kr==="bolditalic"&&this.pdf.internal.getFont(Ar[yr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)_s=Ar[yr],Kr="bold";else if(this.pdf.internal.getFont(Ar[yr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){_s=Ar[yr],Kr="normal";break}}if(_s===""){for(var Ur=0;Ur<Ar.length;Ur++)if(Ks[Ar[Ur]]){_s=Ks[Ar[Ur]];break}}_s=_s===""?"Times":_s,this.pdf.setFont(_s,Kr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(cr){this.ctx.globalCompositeOperation=cr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(cr){this.ctx.globalAlpha=cr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(cr){this.ctx.lineDashOffset=cr,vr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(cr){this.ctx.lineDash=cr,vr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(cr){this.ctx.ignoreClearRect=!!cr}})};ps.prototype.setLineDash=function(ws){this.lineDash=ws},ps.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},ps.prototype.fill=function(){Os.call(this,"fill",!1)},ps.prototype.stroke=function(){Os.call(this,"stroke",!1)},ps.prototype.beginPath=function(){this.path=[{type:"begin"}]},ps.prototype.moveTo=function(ws,Vs){if(isNaN(ws)||isNaN(Vs))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ys=this.ctx.transform.applyToPoint(new rs(ws,Vs));this.path.push({type:"mt",x:Ys.x,y:Ys.y}),this.ctx.lastPoint=new rs(ws,Vs)},ps.prototype.closePath=function(){var ws=new rs(0,0),Vs=0;for(Vs=this.path.length-1;Vs!==-1;Vs--)if(this.path[Vs].type==="begin"&&_typeof(this.path[Vs+1])==="object"&&typeof this.path[Vs+1].x=="number"){ws=new rs(this.path[Vs+1].x,this.path[Vs+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new rs(ws.x,ws.y)},ps.prototype.lineTo=function(ws,Vs){if(isNaN(ws)||isNaN(Vs))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ys=this.ctx.transform.applyToPoint(new rs(ws,Vs));this.path.push({type:"lt",x:Ys.x,y:Ys.y}),this.ctx.lastPoint=new rs(Ys.x,Ys.y)},ps.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Os.call(this,null,!0)},ps.prototype.quadraticCurveTo=function(ws,Vs,Ys,Ws){if(isNaN(Ys)||isNaN(Ws)||isNaN(ws)||isNaN(Vs))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var sr=this.ctx.transform.applyToPoint(new rs(Ys,Ws)),nr=this.ctx.transform.applyToPoint(new rs(ws,Vs));this.path.push({type:"qct",x1:nr.x,y1:nr.y,x:sr.x,y:sr.y}),this.ctx.lastPoint=new rs(sr.x,sr.y)},ps.prototype.bezierCurveTo=function(ws,Vs,Ys,Ws,sr,nr){if(isNaN(sr)||isNaN(nr)||isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pr=this.ctx.transform.applyToPoint(new rs(sr,nr)),xr=this.ctx.transform.applyToPoint(new rs(ws,Vs)),Tr=this.ctx.transform.applyToPoint(new rs(Ys,Ws));this.path.push({type:"bct",x1:xr.x,y1:xr.y,x2:Tr.x,y2:Tr.y,x:pr.x,y:pr.y}),this.ctx.lastPoint=new rs(pr.x,pr.y)},ps.prototype.arc=function(ws,Vs,Ys,Ws,sr,nr){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws)||isNaN(sr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(nr=!!nr,!this.ctx.transform.isIdentity){var pr=this.ctx.transform.applyToPoint(new rs(ws,Vs));ws=pr.x,Vs=pr.y;var xr=this.ctx.transform.applyToPoint(new rs(0,Ys)),Tr=this.ctx.transform.applyToPoint(new rs(0,0));Ys=Math.sqrt(Math.pow(xr.x-Tr.x,2)+Math.pow(xr.y-Tr.y,2))}Math.abs(sr-Ws)>=2*Math.PI&&(Ws=0,sr=2*Math.PI),this.path.push({type:"arc",x:ws,y:Vs,radius:Ys,startAngle:Ws,endAngle:sr,counterclockwise:nr})},ps.prototype.arcTo=function(ws,Vs,Ys,Ws,sr){throw new Error("arcTo not implemented.")},ps.prototype.rect=function(ws,Vs,Ys,Ws){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ws,Vs),this.lineTo(ws+Ys,Vs),this.lineTo(ws+Ys,Vs+Ws),this.lineTo(ws,Vs+Ws),this.lineTo(ws,Vs),this.lineTo(ws+Ys,Vs),this.lineTo(ws,Vs)},ps.prototype.fillRect=function(ws,Vs,Ys,Ws){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!cs.call(this)){var sr={};this.lineCap!=="butt"&&(sr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(sr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ws,Vs,Ys,Ws),this.fill(),sr.hasOwnProperty("lineCap")&&(this.lineCap=sr.lineCap),sr.hasOwnProperty("lineJoin")&&(this.lineJoin=sr.lineJoin)}},ps.prototype.strokeRect=function(ws,Vs,Ys,Ws){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");ys.call(this)||(this.beginPath(),this.rect(ws,Vs,Ys,Ws),this.stroke())},ps.prototype.clearRect=function(ws,Vs,Ys,Ws){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ws,Vs,Ys,Ws))},ps.prototype.save=function(ws){ws=typeof ws!="boolean"||ws;for(var Vs=this.pdf.internal.getCurrentPageInfo().pageNumber,Ys=0;Ys<this.pdf.internal.getNumberOfPages();Ys++)this.pdf.setPage(Ys+1),this.pdf.internal.out("q");if(this.pdf.setPage(Vs),ws){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ws=new us(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ws}},ps.prototype.restore=function(ws){ws=typeof ws!="boolean"||ws;for(var Vs=this.pdf.internal.getCurrentPageInfo().pageNumber,Ys=0;Ys<this.pdf.internal.getNumberOfPages();Ys++)this.pdf.setPage(Ys+1),this.pdf.internal.out("Q");this.pdf.setPage(Vs),ws&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},ps.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var xs=function(ws){var Vs,Ys,Ws,sr;if(ws.isCanvasGradient===!0&&(ws=ws.getColor()),!ws)return{r:0,g:0,b:0,a:0,style:ws};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ws))Vs=0,Ys=0,Ws=0,sr=0;else{var nr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ws);if(nr!==null)Vs=parseInt(nr[1]),Ys=parseInt(nr[2]),Ws=parseInt(nr[3]),sr=1;else if((nr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ws))!==null)Vs=parseInt(nr[1]),Ys=parseInt(nr[2]),Ws=parseInt(nr[3]),sr=parseFloat(nr[4]);else{if(sr=1,typeof ws=="string"&&ws.charAt(0)!=="#"){var pr=new f(ws);ws=pr.ok?pr.toHex():"#000000"}ws.length===4?(Vs=ws.substring(1,2),Vs+=Vs,Ys=ws.substring(2,3),Ys+=Ys,Ws=ws.substring(3,4),Ws+=Ws):(Vs=ws.substring(1,3),Ys=ws.substring(3,5),Ws=ws.substring(5,7)),Vs=parseInt(Vs,16),Ys=parseInt(Ys,16),Ws=parseInt(Ws,16)}}return{r:Vs,g:Ys,b:Ws,a:sr,style:ws}},cs=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},ys=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};ps.prototype.fillText=function(ws,Vs,Ys,Ws){if(isNaN(Vs)||isNaN(Ys)||typeof ws!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ws=isNaN(Ws)?void 0:Ws,!cs.call(this)){var sr=Ps(this.ctx.transform.rotation),nr=this.ctx.transform.scaleX;As.call(this,{text:ws,x:Vs,y:Ys,scale:nr,angle:sr,align:this.textAlign,maxWidth:Ws})}},ps.prototype.strokeText=function(ws,Vs,Ys,Ws){if(isNaN(Vs)||isNaN(Ys)||typeof ws!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!ys.call(this)){Ws=isNaN(Ws)?void 0:Ws;var sr=Ps(this.ctx.transform.rotation),nr=this.ctx.transform.scaleX;As.call(this,{text:ws,x:Vs,y:Ys,scale:nr,renderingMode:"stroke",angle:sr,align:this.textAlign,maxWidth:Ws})}},ps.prototype.measureText=function(ws){if(typeof ws!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Vs=this.pdf,Ys=this.pdf.internal.scaleFactor,Ws=Vs.internal.getFontSize(),sr=Vs.getStringUnitWidth(ws)*Ws/Vs.internal.scaleFactor,nr=function(pr){var xr=(pr=pr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return xr}}),this};return new nr({width:sr*=Math.round(96*Ys/72*1e4)/1e4})},ps.prototype.scale=function(ws,Vs){if(isNaN(ws)||isNaN(Vs))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ys=new is(ws,0,0,Vs,0,0);this.ctx.transform=this.ctx.transform.multiply(Ys)},ps.prototype.rotate=function(ws){if(isNaN(ws))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Vs=new is(Math.cos(ws),Math.sin(ws),-Math.sin(ws),Math.cos(ws),0,0);this.ctx.transform=this.ctx.transform.multiply(Vs)},ps.prototype.translate=function(ws,Vs){if(isNaN(ws)||isNaN(Vs))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ys=new is(1,0,0,1,ws,Vs);this.ctx.transform=this.ctx.transform.multiply(Ys)},ps.prototype.transform=function(ws,Vs,Ys,Ws,sr,nr){if(isNaN(ws)||isNaN(Vs)||isNaN(Ys)||isNaN(Ws)||isNaN(sr)||isNaN(nr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pr=new is(ws,Vs,Ys,Ws,sr,nr);this.ctx.transform=this.ctx.transform.multiply(pr)},ps.prototype.setTransform=function(ws,Vs,Ys,Ws,sr,nr){ws=isNaN(ws)?1:ws,Vs=isNaN(Vs)?0:Vs,Ys=isNaN(Ys)?0:Ys,Ws=isNaN(Ws)?1:Ws,sr=isNaN(sr)?0:sr,nr=isNaN(nr)?0:nr,this.ctx.transform=new is(ws,Vs,Ys,Ws,sr,nr)};var gs=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};ps.prototype.drawImage=function(ws,Vs,Ys,Ws,sr,nr,pr,xr,Tr){var Dr=this.pdf.getImageProperties(ws),zr=1,or=1,Nr=1,cr=1;Ws!==void 0&&xr!==void 0&&(Nr=xr/Ws,cr=Tr/sr,zr=Dr.width/Ws*xr/Ws,or=Dr.height/sr*Tr/sr),nr===void 0&&(nr=Vs,pr=Ys,Vs=0,Ys=0),Ws!==void 0&&xr===void 0&&(xr=Ws,Tr=sr),Ws===void 0&&xr===void 0&&(xr=Dr.width,Tr=Dr.height);for(var Ns,jr=this.ctx.transform.decompose(),wr=Ps(jr.rotate.shx),dr=new is,lr=(dr=(dr=(dr=dr.multiply(jr.translate)).multiply(jr.skew)).multiply(jr.scale)).applyToRectangle(new ns(nr-Vs*Nr,pr-Ys*cr,Ws*zr,sr*or)),_r=vs.call(this,lr),Ar=[],Vr=0;Vr<_r.length;Vr+=1)Ar.indexOf(_r[Vr])===-1&&Ar.push(_r[Vr]);if(Es(Ar),this.autoPaging)for(var Kr=Ar[0],_s=Ar[Ar.length-1],Ks=Kr;Ks<_s+1;Ks++){this.pdf.setPage(Ks);var yr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ur=Ks===1?this.posY+this.margin[0]:this.margin[0],Or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],kr=Ks===1?0:Or+(Ks-2)*Ir;if(this.ctx.clip_path.length!==0){var Zr=this.path;Ns=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=fs(Ns,this.posX+this.margin[3],-kr+Ur+this.ctx.prevPageLastElemOffset),Hs.call(this,"fill",!0),this.path=Zr}var Gr=JSON.parse(JSON.stringify(lr));Gr=fs([Gr],this.posX+this.margin[3],-kr+Ur+this.ctx.prevPageLastElemOffset)[0];var nn=(Ks>Kr||Ks<_s)&&gs.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yr,Ir,null).clip().discardPath()),this.pdf.addImage(ws,"JPEG",Gr.x,Gr.y,Gr.w,Gr.h,null,null,wr),nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ws,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,wr)};var vs=function(ws,Vs,Ys){var Ws=[];Vs=Vs||this.pdf.internal.pageSize.width,Ys=Ys||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var sr=this.posY+this.ctx.prevPageLastElemOffset;switch(ws.type){default:case"mt":case"lt":Ws.push(Math.floor((ws.y+sr)/Ys)+1);break;case"arc":Ws.push(Math.floor((ws.y+sr-ws.radius)/Ys)+1),Ws.push(Math.floor((ws.y+sr+ws.radius)/Ys)+1);break;case"qct":var nr=er(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ws.x1,ws.y1,ws.x,ws.y);Ws.push(Math.floor((nr.y+sr)/Ys)+1),Ws.push(Math.floor((nr.y+nr.h+sr)/Ys)+1);break;case"bct":var pr=tr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ws.x1,ws.y1,ws.x2,ws.y2,ws.x,ws.y);Ws.push(Math.floor((pr.y+sr)/Ys)+1),Ws.push(Math.floor((pr.y+pr.h+sr)/Ys)+1);break;case"rect":Ws.push(Math.floor((ws.y+sr)/Ys)+1),Ws.push(Math.floor((ws.y+ws.h+sr)/Ys)+1)}for(var xr=0;xr<Ws.length;xr+=1)for(;this.pdf.internal.getNumberOfPages()<Ws[xr];)ds.call(this);return Ws},ds=function(){var ws=this.fillStyle,Vs=this.strokeStyle,Ys=this.font,Ws=this.lineCap,sr=this.lineWidth,nr=this.lineJoin;this.pdf.addPage(),this.fillStyle=ws,this.strokeStyle=Vs,this.font=Ys,this.lineCap=Ws,this.lineWidth=sr,this.lineJoin=nr},fs=function(ws,Vs,Ys){for(var Ws=0;Ws<ws.length;Ws++)switch(ws[Ws].type){case"bct":ws[Ws].x2+=Vs,ws[Ws].y2+=Ys;case"qct":ws[Ws].x1+=Vs,ws[Ws].y1+=Ys;case"mt":case"lt":case"arc":default:ws[Ws].x+=Vs,ws[Ws].y+=Ys}return ws},Es=function(ws){return ws.sort(function(Vs,Ys){return Vs-Ys})},Os=function(ws,Vs){for(var Ys,Ws,sr=this.fillStyle,nr=this.strokeStyle,pr=this.lineCap,xr=this.lineWidth,Tr=Math.abs(xr*this.ctx.transform.scaleX),Dr=this.lineJoin,zr=JSON.parse(JSON.stringify(this.path)),or=JSON.parse(JSON.stringify(this.path)),Nr=[],cr=0;cr<or.length;cr++)if(or[cr].x!==void 0)for(var Ns=vs.call(this,or[cr]),jr=0;jr<Ns.length;jr+=1)Nr.indexOf(Ns[jr])===-1&&Nr.push(Ns[jr]);for(var wr=0;wr<Nr.length;wr++)for(;this.pdf.internal.getNumberOfPages()<Nr[wr];)ds.call(this);if(Es(Nr),this.autoPaging)for(var dr=Nr[0],lr=Nr[Nr.length-1],_r=dr;_r<lr+1;_r++){this.pdf.setPage(_r),this.fillStyle=sr,this.strokeStyle=nr,this.lineCap=pr,this.lineWidth=Tr,this.lineJoin=Dr;var Ar=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vr=_r===1?this.posY+this.margin[0]:this.margin[0],Kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_s=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ks=_r===1?0:Kr+(_r-2)*_s;if(this.ctx.clip_path.length!==0){var yr=this.path;Ys=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=fs(Ys,this.posX+this.margin[3],-Ks+Vr+this.ctx.prevPageLastElemOffset),Hs.call(this,ws,!0),this.path=yr}if(Ws=JSON.parse(JSON.stringify(zr)),this.path=fs(Ws,this.posX+this.margin[3],-Ks+Vr+this.ctx.prevPageLastElemOffset),Vs===!1||_r===0){var Ur=(_r>dr||_r<lr)&&gs.call(this);Ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ar,_s,null).clip().discardPath()),Hs.call(this,ws,Vs),Ur&&this.pdf.restoreGraphicsState()}this.lineWidth=xr}else this.lineWidth=Tr,Hs.call(this,ws,Vs),this.lineWidth=xr;this.path=zr},Hs=function(ws,Vs){if((ws!=="stroke"||Vs||!ys.call(this))&&(ws==="stroke"||Vs||!cs.call(this))){for(var Ys,Ws,sr=[],nr=this.path,pr=0;pr<nr.length;pr++){var xr=nr[pr];switch(xr.type){case"begin":sr.push({begin:!0});break;case"close":sr.push({close:!0});break;case"mt":sr.push({start:xr,deltas:[],abs:[]});break;case"lt":var Tr=sr.length;if(nr[pr-1]&&!isNaN(nr[pr-1].x)&&(Ys=[xr.x-nr[pr-1].x,xr.y-nr[pr-1].y],Tr>0)){for(;Tr>=0;Tr--)if(sr[Tr-1].close!==!0&&sr[Tr-1].begin!==!0){sr[Tr-1].deltas.push(Ys),sr[Tr-1].abs.push(xr);break}}break;case"bct":Ys=[xr.x1-nr[pr-1].x,xr.y1-nr[pr-1].y,xr.x2-nr[pr-1].x,xr.y2-nr[pr-1].y,xr.x-nr[pr-1].x,xr.y-nr[pr-1].y],sr[sr.length-1].deltas.push(Ys);break;case"qct":var Dr=nr[pr-1].x+2/3*(xr.x1-nr[pr-1].x),zr=nr[pr-1].y+2/3*(xr.y1-nr[pr-1].y),or=xr.x+2/3*(xr.x1-xr.x),Nr=xr.y+2/3*(xr.y1-xr.y),cr=xr.x,Ns=xr.y;Ys=[Dr-nr[pr-1].x,zr-nr[pr-1].y,or-nr[pr-1].x,Nr-nr[pr-1].y,cr-nr[pr-1].x,Ns-nr[pr-1].y],sr[sr.length-1].deltas.push(Ys);break;case"arc":sr.push({deltas:[],abs:[],arc:!0}),Array.isArray(sr[sr.length-1].abs)&&sr[sr.length-1].abs.push(xr)}}Ws=Vs?null:ws==="stroke"?"stroke":"fill";for(var jr=!1,wr=0;wr<sr.length;wr++)if(sr[wr].arc)for(var dr=sr[wr].abs,lr=0;lr<dr.length;lr++){var _r=dr[lr];_r.type==="arc"?Ls.call(this,_r.x,_r.y,_r.radius,_r.startAngle,_r.endAngle,_r.counterclockwise,void 0,Vs,!jr):ks.call(this,_r.x,_r.y),jr=!0}else if(sr[wr].close===!0)this.pdf.internal.out("h"),jr=!1;else if(sr[wr].begin!==!0){var Ar=sr[wr].start.x,Vr=sr[wr].start.y;$s.call(this,sr[wr].deltas,Ar,Vr),jr=!0}Ws&&Bs.call(this,Ws),Vs&&Gs.call(this)}},Qs=function(ws){var Vs=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ys=Vs*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ws-Ys;case"top":return ws+Vs-Ys;case"hanging":return ws+Vs-2*Ys;case"middle":return ws+Vs/2-Ys;case"ideographic":return ws;case"alphabetic":default:return ws}},zs=function(ws){return ws+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};ps.prototype.createLinearGradient=function(){var ws=function(){};return ws.colorStops=[],ws.addColorStop=function(Vs,Ys){this.colorStops.push([Vs,Ys])},ws.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ws.isCanvasGradient=!0,ws},ps.prototype.createPattern=function(){return this.createLinearGradient()},ps.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ls=function(ws,Vs,Ys,Ws,sr,nr,pr,xr,Tr){for(var Dr=Cs.call(this,Ys,Ws,sr,nr),zr=0;zr<Dr.length;zr++){var or=Dr[zr];zr===0&&(Tr?bs.call(this,or.x1+ws,or.y1+Vs):ks.call(this,or.x1+ws,or.y1+Vs)),qs.call(this,ws,Vs,or.x2,or.y2,or.x3,or.y3,or.x4,or.y4)}xr?Gs.call(this):Bs.call(this,pr)},Bs=function(ws){switch(ws){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Gs=function(){this.pdf.clip(),this.pdf.discardPath()},bs=function(ws,Vs){this.pdf.internal.out(St(ws)+" "+es(Vs)+" m")},As=function(ws){var Vs;switch(ws.align){case"right":case"end":Vs="right";break;case"center":Vs="center";break;case"left":case"start":default:Vs="left"}var Ys=this.pdf.getTextDimensions(ws.text),Ws=Qs.call(this,ws.y),sr=zs.call(this,Ws)-Ys.h,nr=this.ctx.transform.applyToPoint(new rs(ws.x,Ws)),pr=this.ctx.transform.decompose(),xr=new is;xr=(xr=(xr=xr.multiply(pr.translate)).multiply(pr.skew)).multiply(pr.scale);for(var Tr,Dr,zr,or=this.ctx.transform.applyToRectangle(new ns(ws.x,Ws,Ys.w,Ys.h)),Nr=xr.applyToRectangle(new ns(ws.x,sr,Ys.w,Ys.h)),cr=vs.call(this,Nr),Ns=[],jr=0;jr<cr.length;jr+=1)Ns.indexOf(cr[jr])===-1&&Ns.push(cr[jr]);if(Es(Ns),this.autoPaging)for(var wr=Ns[0],dr=Ns[Ns.length-1],lr=wr;lr<dr+1;lr++){this.pdf.setPage(lr);var _r=lr===1?this.posY+this.margin[0]:this.margin[0],Ar=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vr=this.pdf.internal.pageSize.height-this.margin[2],Kr=Vr-this.margin[0],_s=this.pdf.internal.pageSize.width-this.margin[1],Ks=_s-this.margin[3],yr=lr===1?0:Ar+(lr-2)*Kr;if(this.ctx.clip_path.length!==0){var Ur=this.path;Tr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=fs(Tr,this.posX+this.margin[3],-1*yr+_r),Hs.call(this,"fill",!0),this.path=Ur}var Or=fs([JSON.parse(JSON.stringify(Nr))],this.posX+this.margin[3],-yr+_r+this.ctx.prevPageLastElemOffset)[0];ws.scale>=.01&&(Dr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dr*ws.scale),zr=this.lineWidth,this.lineWidth=zr*ws.scale);var Ir=this.autoPaging!=="text";if(Ir||Or.y+Or.h<=Vr){if(Ir||Or.y>=_r&&Or.x<=_s){var kr=Ir?ws.text:this.pdf.splitTextToSize(ws.text,ws.maxWidth||_s-Or.x)[0],Zr=fs([JSON.parse(JSON.stringify(or))],this.posX+this.margin[3],-yr+_r+this.ctx.prevPageLastElemOffset)[0],Gr=Ir&&(lr>wr||lr<dr)&&gs.call(this);Gr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ks,Kr,null).clip().discardPath()),this.pdf.text(kr,Zr.x,Zr.y,{angle:ws.angle,align:Vs,renderingMode:ws.renderingMode}),Gr&&this.pdf.restoreGraphicsState()}}else Or.y<Vr&&(this.ctx.prevPageLastElemOffset+=Vr-Or.y);ws.scale>=.01&&(this.pdf.setFontSize(Dr),this.lineWidth=zr)}else ws.scale>=.01&&(Dr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Dr*ws.scale),zr=this.lineWidth,this.lineWidth=zr*ws.scale),this.pdf.text(ws.text,nr.x+this.posX,nr.y+this.posY,{angle:ws.angle,align:Vs,renderingMode:ws.renderingMode,maxWidth:ws.maxWidth}),ws.scale>=.01&&(this.pdf.setFontSize(Dr),this.lineWidth=zr)},ks=function(ws,Vs,Ys,Ws){Ys=Ys||0,Ws=Ws||0,this.pdf.internal.out(St(ws+Ys)+" "+es(Vs+Ws)+" l")},$s=function(ws,Vs,Ys){return this.pdf.lines(ws,Vs,Ys,null,null)},qs=function(ws,Vs,Ys,Ws,sr,nr,pr,xr){this.pdf.internal.out([e(ts(Ys+ws)),e(ss(Ws+Vs)),e(ts(sr+ws)),e(ss(nr+Vs)),e(ts(pr+ws)),e(ss(xr+Vs)),"c"].join(" "))},Cs=function(ws,Vs,Ys,Ws){for(var sr=2*Math.PI,nr=Math.PI/2;Vs>Ys;)Vs-=sr;var pr=Math.abs(Ys-Vs);pr<sr&&Ws&&(pr=sr-pr);for(var xr=[],Tr=Ws?-1:1,Dr=Vs;pr>1e-5;){var zr=Dr+Tr*Math.min(pr,nr);xr.push(Us.call(this,ws,Dr,zr)),pr-=Math.abs(zr-Dr),Dr=zr}return xr},Us=function(ws,Vs,Ys){var Ws=(Ys-Vs)/2,sr=ws*Math.cos(Ws),nr=ws*Math.sin(Ws),pr=sr,xr=-nr,Tr=pr*pr+xr*xr,Dr=Tr+pr*sr+xr*nr,zr=4/3*(Math.sqrt(2*Tr*Dr)-Dr)/(pr*nr-xr*sr),or=pr-zr*xr,Nr=xr+zr*pr,cr=or,Ns=-Nr,jr=Ws+Vs,wr=Math.cos(jr),dr=Math.sin(jr);return{x1:ws*Math.cos(Vs),y1:ws*Math.sin(Vs),x2:or*wr-Nr*dr,y2:or*dr+Nr*wr,x3:cr*wr-Ns*dr,y3:cr*dr+Ns*wr,x4:ws*Math.cos(Ys),y4:ws*Math.sin(Ys)}},Ps=function(ws){return 180*ws/Math.PI},er=function(ws,Vs,Ys,Ws,sr,nr){var pr=ws+.5*(Ys-ws),xr=Vs+.5*(Ws-Vs),Tr=sr+.5*(Ys-sr),Dr=nr+.5*(Ws-nr),zr=Math.min(ws,sr,pr,Tr),or=Math.max(ws,sr,pr,Tr),Nr=Math.min(Vs,nr,xr,Dr),cr=Math.max(Vs,nr,xr,Dr);return new ns(zr,Nr,or-zr,cr-Nr)},tr=function(ws,Vs,Ys,Ws,sr,nr,pr,xr){var Tr,Dr,zr,or,Nr,cr,Ns,jr,wr,dr,lr,_r,Ar,Vr,Kr=Ys-ws,_s=Ws-Vs,Ks=sr-Ys,yr=nr-Ws,Ur=pr-sr,Or=xr-nr;for(Dr=0;Dr<41;Dr++)wr=(Ns=(zr=ws+(Tr=Dr/40)*Kr)+Tr*((Nr=Ys+Tr*Ks)-zr))+Tr*(Nr+Tr*(sr+Tr*Ur-Nr)-Ns),dr=(jr=(or=Vs+Tr*_s)+Tr*((cr=Ws+Tr*yr)-or))+Tr*(cr+Tr*(nr+Tr*Or-cr)-jr),Dr==0?(lr=wr,_r=dr,Ar=wr,Vr=dr):(lr=Math.min(lr,wr),_r=Math.min(_r,dr),Ar=Math.max(Ar,wr),Vr=Math.max(Vr,dr));return new ns(Math.round(lr),Math.round(_r),Math.round(Ar-lr),Math.round(Vr-_r))},vr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ws,Vs,Ys=(ws=this.ctx.lineDash,Vs=this.ctx.lineDashOffset,JSON.stringify({lineDash:ws,lineDashOffset:Vs}));this.prevLineDash!==Ys&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ys)}}})(E.API),function(_e){var e=function(ss){var rs,ns,is,os,us,ps,xs,cs,ys,gs;for(ns=[],is=0,os=(ss+=rs="\0\0\0\0".slice(ss.length%4||4)).length;os>is;is+=4)(us=(ss.charCodeAt(is)<<24)+(ss.charCodeAt(is+1)<<16)+(ss.charCodeAt(is+2)<<8)+ss.charCodeAt(is+3))!==0?(ps=(us=((us=((us=((us=(us-(gs=us%85))/85)-(ys=us%85))/85)-(cs=us%85))/85)-(xs=us%85))/85)%85,ns.push(ps+33,xs+33,cs+33,ys+33,gs+33)):ns.push(122);return function(vs,ds){for(var fs=ds;fs>0;fs--)vs.pop()}(ns,rs.length),String.fromCharCode.apply(String,ns)+"~>"},St=function(ss){var rs,ns,is,os,us,ps=String,xs="length",cs=255,ys="charCodeAt",gs="slice",vs="replace";for(ss[gs](-2),ss=ss[gs](0,-2)[vs](/\s/g,"")[vs]("z","!!!!!"),is=[],os=0,us=(ss+=rs="uuuuu"[gs](ss[xs]%5||5))[xs];us>os;os+=5)ns=52200625*(ss[ys](os)-33)+614125*(ss[ys](os+1)-33)+7225*(ss[ys](os+2)-33)+85*(ss[ys](os+3)-33)+(ss[ys](os+4)-33),is.push(cs&ns>>24,cs&ns>>16,cs&ns>>8,cs&ns);return function(ds,fs){for(var Es=fs;Es>0;Es--)ds.pop()}(is,rs[xs]),ps.fromCharCode.apply(ps,is)},es=function(ss){var rs=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((ss=ss.replace(/\s/g,"")).indexOf(">")!==-1&&(ss=ss.substr(0,ss.indexOf(">"))),ss.length%2&&(ss+="0"),rs.test(ss)===!1)return"";for(var ns="",is=0;is<ss.length;is+=2)ns+=String.fromCharCode("0x"+(ss[is]+ss[is+1]));return ns},ts=function(ss){for(var rs=new Uint8Array(ss.length),ns=ss.length;ns--;)rs[ns]=ss.charCodeAt(ns);return ss=(rs=zlibSync(rs)).reduce(function(is,os){return is+String.fromCharCode(os)},"")};_e.processDataByFilters=function(ss,rs){var ns=0,is=ss||"",os=[];for(typeof(rs=rs||[])=="string"&&(rs=[rs]),ns=0;ns<rs.length;ns+=1)switch(rs[ns]){case"ASCII85Decode":case"/ASCII85Decode":is=St(is),os.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":is=e(is),os.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":is=es(is),os.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":is=is.split("").map(function(us){return("0"+us.charCodeAt().toString(16)).slice(-2)}).join("")+">",os.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":is=ts(is),os.push("/FlateDecode");break;default:throw new Error('The filter: "'+rs[ns]+'" is not implemented')}return{data:is,reverseChain:os.reverse().join(" ")}}}(E.API),function(_e){_e.loadFile=function(e,St,es){return function(ts,ss,rs){ss=ss!==!1,rs=typeof rs=="function"?rs:function(){};var ns=void 0;try{ns=function(is,os,us){var ps=new XMLHttpRequest,xs=0,cs=function(ys){var gs=ys.length,vs=[],ds=String.fromCharCode;for(xs=0;xs<gs;xs+=1)vs.push(ds(255&ys.charCodeAt(xs)));return vs.join("")};if(ps.open("GET",is,!os),ps.overrideMimeType("text/plain; charset=x-user-defined"),os===!1&&(ps.onload=function(){ps.status===200?us(cs(this.responseText)):us(void 0)}),ps.send(null),os&&ps.status===200)return cs(ps.responseText)}(ts,ss,rs)}catch{}return ns}(e,St,es)},_e.loadImageFile=_e.loadFile}(E.API),function(_e){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(rs){return Promise.reject(new Error("Could not load html2canvas: "+rs))}).then(function(rs){return rs.default?rs.default:rs})}function St(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-31816194.js"),[],import.meta.url)).catch(function(rs){return Promise.reject(new Error("Could not load dompurify: "+rs))}).then(function(rs){return rs.default?rs.default:rs})}var es=function(rs){var ns=_typeof(rs);return ns==="undefined"?"undefined":ns==="string"||rs instanceof String?"string":ns==="number"||rs instanceof Number?"number":ns==="function"||rs instanceof Function?"function":rs&&rs.constructor===Array?"array":rs&&rs.nodeType===1?"element":ns==="object"?"object":"unknown"},ts=function(rs,ns){var is=document.createElement(rs);for(var os in ns.className&&(is.className=ns.className),ns.innerHTML&&ns.dompurify&&(is.innerHTML=ns.dompurify.sanitize(ns.innerHTML)),ns.style)is.style[os]=ns.style[os];return is},ss=function rs(ns){var is=Object.assign(rs.convert(Promise.resolve()),JSON.parse(JSON.stringify(rs.template))),os=rs.convert(Promise.resolve(),is);return os=(os=os.setProgress(1,rs,1,[rs])).set(ns)};(ss.prototype=Object.create(Promise.prototype)).constructor=ss,ss.convert=function(rs,ns){return rs.__proto__=ns||ss.prototype,rs},ss.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},ss.prototype.from=function(rs,ns){return this.then(function(){switch(ns=ns||function(is){switch(es(is)){case"string":return"string";case"element":return is.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(rs)){case"string":return this.then(St).then(function(is){return this.set({src:ts("div",{innerHTML:rs,dompurify:is})})});case"element":return this.set({src:rs});case"canvas":return this.set({canvas:rs});case"img":return this.set({img:rs});default:return this.error("Unknown source type.")}})},ss.prototype.to=function(rs){switch(rs){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},ss.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var rs={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},ns=function is(os,us){for(var ps=os.nodeType===3?document.createTextNode(os.nodeValue):os.cloneNode(!1),xs=os.firstChild;xs;xs=xs.nextSibling)us!==!0&&xs.nodeType===1&&xs.nodeName==="SCRIPT"||ps.appendChild(is(xs,us));return os.nodeType===1&&(os.nodeName==="CANVAS"?(ps.width=os.width,ps.height=os.height,ps.getContext("2d").drawImage(os,0,0)):os.nodeName!=="TEXTAREA"&&os.nodeName!=="SELECT"||(ps.value=os.value),ps.addEventListener("load",function(){ps.scrollTop=os.scrollTop,ps.scrollLeft=os.scrollLeft},!0)),ps}(this.prop.src,this.opt.html2canvas.javascriptEnabled);ns.tagName==="BODY"&&(rs.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=ts("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=ts("div",{className:"html2pdf__container",style:rs}),this.prop.container.appendChild(ns),this.prop.container.firstChild.appendChild(ts("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},ss.prototype.toCanvas=function(){var rs=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(rs).then(e).then(function(ns){var is=Object.assign({},this.opt.html2canvas);return delete is.onrendered,ns(this.prop.container,is)}).then(function(ns){(this.opt.html2canvas.onrendered||function(){})(ns),this.prop.canvas=ns,document.body.removeChild(this.prop.overlay)})},ss.prototype.toContext2d=function(){var rs=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(rs).then(e).then(function(ns){var is=this.opt.jsPDF,os=this.opt.fontFaces,us=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,ps=Object.assign({async:!0,allowTaint:!0,scale:us,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete ps.onrendered,is.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,is.context2d.posX=this.opt.x,is.context2d.posY=this.opt.y,is.context2d.margin=this.opt.margin,is.context2d.fontFaces=os,os)for(var xs=0;xs<os.length;++xs){var cs=os[xs],ys=cs.src.find(function(gs){return gs.format==="truetype"});ys&&is.addFont(ys.url,cs.ref.name,cs.ref.style)}return ps.windowHeight=ps.windowHeight||0,ps.windowHeight=ps.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):ps.windowHeight,is.context2d.save(!0),ns(this.prop.container,ps)}).then(function(ns){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(ns),this.prop.canvas=ns,document.body.removeChild(this.prop.overlay)})},ss.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var rs=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=rs})},ss.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},ss.prototype.output=function(rs,ns,is){return(is=is||"pdf").toLowerCase()==="img"||is.toLowerCase()==="image"?this.outputImg(rs,ns):this.outputPdf(rs,ns)},ss.prototype.outputPdf=function(rs,ns){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(rs,ns)})},ss.prototype.outputImg=function(rs){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(rs){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+rs+'" is not supported.'}})},ss.prototype.save=function(rs){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(rs?{filename:rs}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},ss.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},ss.prototype.set=function(rs){if(es(rs)!=="object")return this;var ns=Object.keys(rs||{}).map(function(is){if(is in ss.template.prop)return function(){this.prop[is]=rs[is]};switch(is){case"margin":return this.setMargin.bind(this,rs.margin);case"jsPDF":return function(){return this.opt.jsPDF=rs.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,rs.pageSize);default:return function(){this.opt[is]=rs[is]}}},this);return this.then(function(){return this.thenList(ns)})},ss.prototype.get=function(rs,ns){return this.then(function(){var is=rs in ss.template.prop?this.prop[rs]:this.opt[rs];return ns?ns(is):is})},ss.prototype.setMargin=function(rs){return this.then(function(){switch(es(rs)){case"number":rs=[rs,rs,rs,rs];case"array":if(rs.length===2&&(rs=[rs[0],rs[1],rs[0],rs[1]]),rs.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=rs}).then(this.setPageSize)},ss.prototype.setPageSize=function(rs){function ns(is,os){return Math.floor(is*os/72*96)}return this.then(function(){(rs=rs||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(rs.inner={width:rs.width-this.opt.margin[1]-this.opt.margin[3],height:rs.height-this.opt.margin[0]-this.opt.margin[2]},rs.inner.px={width:ns(rs.inner.width,rs.k),height:ns(rs.inner.height,rs.k)},rs.inner.ratio=rs.inner.height/rs.inner.width),this.prop.pageSize=rs})},ss.prototype.setProgress=function(rs,ns,is,os){return rs!=null&&(this.progress.val=rs),ns!=null&&(this.progress.state=ns),is!=null&&(this.progress.n=is),os!=null&&(this.progress.stack=os),this.progress.ratio=this.progress.val/this.progress.state,this},ss.prototype.updateProgress=function(rs,ns,is,os){return this.setProgress(rs?this.progress.val+rs:null,ns||null,is?this.progress.n+is:null,os?this.progress.stack.concat(os):null)},ss.prototype.then=function(rs,ns){var is=this;return this.thenCore(rs,ns,function(os,us){return is.updateProgress(null,null,1,[os]),Promise.prototype.then.call(this,function(ps){return is.updateProgress(null,os),ps}).then(os,us).then(function(ps){return is.updateProgress(1),ps})})},ss.prototype.thenCore=function(rs,ns,is){is=is||Promise.prototype.then,rs&&(rs=rs.bind(this)),ns&&(ns=ns.bind(this));var os=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:ss.convert(Object.assign({},this),Promise.prototype),us=is.call(os,rs,ns);return ss.convert(us,this.__proto__)},ss.prototype.thenExternal=function(rs,ns){return Promise.prototype.then.call(this,rs,ns)},ss.prototype.thenList=function(rs){var ns=this;return rs.forEach(function(is){ns=ns.thenCore(is)}),ns},ss.prototype.catch=function(rs){rs&&(rs=rs.bind(this));var ns=Promise.prototype.catch.call(this,rs);return ss.convert(ns,this)},ss.prototype.catchExternal=function(rs){return Promise.prototype.catch.call(this,rs)},ss.prototype.error=function(rs){return this.then(function(){throw new Error(rs)})},ss.prototype.using=ss.prototype.set,ss.prototype.saveAs=ss.prototype.save,ss.prototype.export=ss.prototype.output,ss.prototype.run=ss.prototype.then,E.getPageSize=function(rs,ns,is){if(_typeof(rs)==="object"){var os=rs;rs=os.orientation,ns=os.unit||ns,is=os.format||is}ns=ns||"mm",is=is||"a4",rs=(""+(rs||"P")).toLowerCase();var us,ps=(""+is).toLowerCase(),xs={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(ns){case"pt":us=1;break;case"mm":us=72/25.4;break;case"cm":us=72/2.54;break;case"in":us=72;break;case"px":us=.75;break;case"pc":case"em":us=12;break;case"ex":us=6;break;default:throw"Invalid unit: "+ns}var cs,ys=0,gs=0;if(xs.hasOwnProperty(ps))ys=xs[ps][1]/us,gs=xs[ps][0]/us;else try{ys=is[1],gs=is[0]}catch{throw new Error("Invalid format: "+is)}if(rs==="p"||rs==="portrait")rs="p",gs>ys&&(cs=gs,gs=ys,ys=cs);else{if(rs!=="l"&&rs!=="landscape")throw"Invalid orientation: "+rs;rs="l",ys>gs&&(cs=gs,gs=ys,ys=cs)}return{width:gs,height:ys,unit:ns,k:us,orientation:rs}},_e.html=function(rs,ns){(ns=ns||{}).callback=ns.callback||function(){},ns.html2canvas=ns.html2canvas||{},ns.html2canvas.canvas=ns.html2canvas.canvas||this.canvas,ns.jsPDF=ns.jsPDF||this,ns.fontFaces=ns.fontFaces?ns.fontFaces.map(jt):null;var is=new ss(ns);return ns.worker?is:is.from(rs).doCallback()}}(E.API),E.API.addJS=function(_e){return Ht=_e,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(_e){var e;_e.events.push(["postPutResources",function(){var St=this,es=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var ts=St.outline.render().split(/\r\n/),ss=0;ss<ts.length;ss++){var rs=ts[ss],ns=es.exec(rs);if(ns!=null){var is=ns[1];St.internal.newObjectDeferredBegin(is,!1)}St.internal.write(rs)}if(this.outline.createNamedDestinations){var os=this.internal.pages.length,us=[];for(ss=0;ss<os;ss++){var ps=St.internal.newObject();us.push(ps);var xs=St.internal.getPageInfo(ss+1);St.internal.write("<< /D["+xs.objId+" 0 R /XYZ null null null]>> endobj")}var cs=St.internal.newObject();for(St.internal.write("<< /Names [ "),ss=0;ss<us.length;ss++)St.internal.write("(page_"+(ss+1)+")"+us[ss]+" 0 R");St.internal.write(" ] >>","endobj"),e=St.internal.newObject(),St.internal.write("<< /Dests "+cs+" 0 R"),St.internal.write(">>","endobj")}}]),_e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),_e.events.push(["initialized",function(){var St=this;St.outline={createNamedDestinations:!1,root:{children:[]}},St.outline.add=function(es,ts,ss){var rs={title:ts,options:ss,children:[]};return es==null&&(es=this.root),es.children.push(rs),rs},St.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=St,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},St.outline.genIds_r=function(es){es.id=St.internal.newObjectDeferred();for(var ts=0;ts<es.children.length;ts++)this.genIds_r(es.children[ts])},St.outline.renderRoot=function(es){this.objStart(es),this.line("/Type /Outlines"),es.children.length>0&&(this.line("/First "+this.makeRef(es.children[0])),this.line("/Last "+this.makeRef(es.children[es.children.length-1]))),this.line("/Count "+this.count_r({count:0},es)),this.objEnd()},St.outline.renderItems=function(es){for(var ts=this.ctx.pdf.internal.getVerticalCoordinateString,ss=0;ss<es.children.length;ss++){var rs=es.children[ss];this.objStart(rs),this.line("/Title "+this.makeString(rs.title)),this.line("/Parent "+this.makeRef(es)),ss>0&&this.line("/Prev "+this.makeRef(es.children[ss-1])),ss<es.children.length-1&&this.line("/Next "+this.makeRef(es.children[ss+1])),rs.children.length>0&&(this.line("/First "+this.makeRef(rs.children[0])),this.line("/Last "+this.makeRef(rs.children[rs.children.length-1])));var ns=this.count=this.count_r({count:0},rs);if(ns>0&&this.line("/Count "+ns),rs.options&&rs.options.pageNumber){var is=St.internal.getPageInfo(rs.options.pageNumber);this.line("/Dest ["+is.objId+" 0 R /XYZ 0 "+ts(0)+" 0]")}this.objEnd()}for(var os=0;os<es.children.length;os++)this.renderItems(es.children[os])},St.outline.line=function(es){this.ctx.val+=es+`\r
`},St.outline.makeRef=function(es){return es.id+" 0 R"},St.outline.makeString=function(es){return"("+St.internal.pdfEscape(es)+")"},St.outline.objStart=function(es){this.ctx.val+=`\r
`+es.id+` 0 obj\r
<<\r
`},St.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},St.outline.count_r=function(es,ts){for(var ss=0;ss<ts.children.length;ss++)es.count++,this.count_r(es,ts.children[ss]);return es.count}}])}(E.API),function(_e){var e=[192,193,194,195,196,197,198,199];_e.processJPEG=function(St,es,ts,ss,rs,ns){var is,os=this.decode.DCT_DECODE,us=null;if(typeof St=="string"||this.__addimage__.isArrayBuffer(St)||this.__addimage__.isArrayBufferView(St)){switch(St=rs||St,St=this.__addimage__.isArrayBuffer(St)?new Uint8Array(St):St,(is=function(ps){for(var xs,cs=256*ps.charCodeAt(4)+ps.charCodeAt(5),ys=ps.length,gs={width:0,height:0,numcomponents:1},vs=4;vs<ys;vs+=2){if(vs+=cs,e.indexOf(ps.charCodeAt(vs+1))!==-1){xs=256*ps.charCodeAt(vs+5)+ps.charCodeAt(vs+6),gs={width:256*ps.charCodeAt(vs+7)+ps.charCodeAt(vs+8),height:xs,numcomponents:ps.charCodeAt(vs+9)};break}cs=256*ps.charCodeAt(vs+2)+ps.charCodeAt(vs+3)}return gs}(St=this.__addimage__.isArrayBufferView(St)?this.__addimage__.arrayBufferToBinaryString(St):St)).numcomponents){case 1:ns=this.color_spaces.DEVICE_GRAY;break;case 4:ns=this.color_spaces.DEVICE_CMYK;break;case 3:ns=this.color_spaces.DEVICE_RGB}us={data:St,width:is.width,height:is.height,colorSpace:ns,bitsPerComponent:8,filter:os,index:es,alias:ts}}return us}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var _e,e,St;function es(ss){var rs,ns,is,os,us,ps,xs,cs,ys,gs,vs,ds,fs,Es;for(this.data=ss,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},ps=null;;){switch(rs=this.readUInt32(),ys=(function(){var Os,Hs;for(Hs=[],Os=0;Os<4;++Os)Hs.push(String.fromCharCode(this.data[this.pos++]));return Hs}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(rs);break;case"fcTL":ps&&this.animation.frames.push(ps),this.pos+=4,ps={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},us=this.readUInt16(),os=this.readUInt16()||100,ps.delay=1e3*us/os,ps.disposeOp=this.data[this.pos++],ps.blendOp=this.data[this.pos++],ps.data=[];break;case"IDAT":case"fdAT":for(ys==="fdAT"&&(this.pos+=4,rs-=4),ss=(ps!=null?ps.data:void 0)||this.imgData,ds=0;0<=rs?ds<rs:ds>rs;0<=rs?++ds:--ds)ss.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(is=this.palette.length/3,this.transparency.indexed=this.read(rs),this.transparency.indexed.length>is)throw new Error("More transparent colors than palette size");if((gs=is-this.transparency.indexed.length)>0)for(fs=0;0<=gs?fs<gs:fs>gs;0<=gs?++fs:--fs)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(rs)[0];break;case 2:this.transparency.rgb=this.read(rs)}break;case"tEXt":xs=(vs=this.read(rs)).indexOf(0),cs=String.fromCharCode.apply(String,vs.slice(0,xs)),this.text[cs]=String.fromCharCode.apply(String,vs.slice(xs+1));break;case"IEND":return ps&&this.animation.frames.push(ps),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(Es=this.colorType)===4||Es===6,ns=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*ns,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=rs}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}es.prototype.read=function(ss){var rs,ns;for(ns=[],rs=0;0<=ss?rs<ss:rs>ss;0<=ss?++rs:--rs)ns.push(this.data[this.pos++]);return ns},es.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},es.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},es.prototype.decodePixels=function(ss){var rs=this.pixelBitlength/8,ns=new Uint8Array(this.width*this.height*rs),is=0,os=this;if(ss==null&&(ss=this.imgData),ss.length===0)return new Uint8Array(0);function us(ps,xs,cs,ys){var gs,vs,ds,fs,Es,Os,Hs,Qs,zs,Ls,Bs,Gs,bs,As,ks,$s,qs,Cs,Us,Ps,er,tr=Math.ceil((os.width-ps)/cs),vr=Math.ceil((os.height-xs)/ys),ws=os.width==tr&&os.height==vr;for(As=rs*tr,Gs=ws?ns:new Uint8Array(As*vr),Os=ss.length,bs=0,vs=0;bs<vr&&is<Os;){switch(ss[is++]){case 0:for(fs=qs=0;qs<As;fs=qs+=1)Gs[vs++]=ss[is++];break;case 1:for(fs=Cs=0;Cs<As;fs=Cs+=1)gs=ss[is++],Es=fs<rs?0:Gs[vs-rs],Gs[vs++]=(gs+Es)%256;break;case 2:for(fs=Us=0;Us<As;fs=Us+=1)gs=ss[is++],ds=(fs-fs%rs)/rs,ks=bs&&Gs[(bs-1)*As+ds*rs+fs%rs],Gs[vs++]=(ks+gs)%256;break;case 3:for(fs=Ps=0;Ps<As;fs=Ps+=1)gs=ss[is++],ds=(fs-fs%rs)/rs,Es=fs<rs?0:Gs[vs-rs],ks=bs&&Gs[(bs-1)*As+ds*rs+fs%rs],Gs[vs++]=(gs+Math.floor((Es+ks)/2))%256;break;case 4:for(fs=er=0;er<As;fs=er+=1)gs=ss[is++],ds=(fs-fs%rs)/rs,Es=fs<rs?0:Gs[vs-rs],bs===0?ks=$s=0:(ks=Gs[(bs-1)*As+ds*rs+fs%rs],$s=ds&&Gs[(bs-1)*As+(ds-1)*rs+fs%rs]),Hs=Es+ks-$s,Qs=Math.abs(Hs-Es),Ls=Math.abs(Hs-ks),Bs=Math.abs(Hs-$s),zs=Qs<=Ls&&Qs<=Bs?Es:Ls<=Bs?ks:$s,Gs[vs++]=(gs+zs)%256;break;default:throw new Error("Invalid filter algorithm: "+ss[is-1])}if(!ws){var Vs=((xs+bs*ys)*os.width+ps)*rs,Ys=bs*As;for(fs=0;fs<tr;fs+=1){for(var Ws=0;Ws<rs;Ws+=1)ns[Vs++]=Gs[Ys++];Vs+=(cs-1)*rs}}bs++}}return ss=unzlibSync(ss),os.interlaceMethod==1?(us(0,0,8,8),us(4,0,8,8),us(0,4,4,8),us(2,0,4,4),us(0,2,2,4),us(1,0,2,2),us(0,1,1,2)):us(0,0,1,1),ns},es.prototype.decodePalette=function(){var ss,rs,ns,is,os,us,ps,xs,cs;for(ns=this.palette,us=this.transparency.indexed||[],os=new Uint8Array((us.length||0)+ns.length),is=0,ss=0,rs=ps=0,xs=ns.length;ps<xs;rs=ps+=3)os[is++]=ns[rs],os[is++]=ns[rs+1],os[is++]=ns[rs+2],os[is++]=(cs=us[ss++])!=null?cs:255;return os},es.prototype.copyToImageData=function(ss,rs){var ns,is,os,us,ps,xs,cs,ys,gs,vs,ds;if(is=this.colors,gs=null,ns=this.hasAlphaChannel,this.palette.length&&(gs=(ds=this._decodedPalette)!=null?ds:this._decodedPalette=this.decodePalette(),is=4,ns=!0),ys=(os=ss.data||ss).length,ps=gs||rs,us=xs=0,is===1)for(;us<ys;)cs=gs?4*rs[us/4]:xs,vs=ps[cs++],os[us++]=vs,os[us++]=vs,os[us++]=vs,os[us++]=ns?ps[cs++]:255,xs=cs;else for(;us<ys;)cs=gs?4*rs[us/4]:xs,os[us++]=ps[cs++],os[us++]=ps[cs++],os[us++]=ps[cs++],os[us++]=ns?ps[cs++]:255,xs=cs},es.prototype.decode=function(){var ss;return ss=new Uint8Array(this.width*this.height*4),this.copyToImageData(ss,this.decodePixels()),ss};var ts=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),St=e.getContext("2d")}catch{return!1}return!0}return!1};return ts(),_e=function(ss){var rs;if(ts()===!0)return St.width=ss.width,St.height=ss.height,St.clearRect(0,0,ss.width,ss.height),St.putImageData(ss,0,0),(rs=new Image).src=e.toDataURL(),rs;throw new Error("This method requires a Browser with Canvas-capability.")},es.prototype.decodeFrames=function(ss){var rs,ns,is,os,us,ps,xs,cs;if(this.animation){for(cs=[],ns=us=0,ps=(xs=this.animation.frames).length;us<ps;ns=++us)rs=xs[ns],is=ss.createImageData(rs.width,rs.height),os=this.decodePixels(new Uint8Array(rs.data)),this.copyToImageData(is,os),rs.imageData=is,cs.push(rs.image=_e(is));return cs}},es.prototype.renderFrame=function(ss,rs){var ns,is,os;return ns=(is=this.animation.frames)[rs],os=is[rs-1],rs===0&&ss.clearRect(0,0,this.width,this.height),(os!=null?os.disposeOp:void 0)===1?ss.clearRect(os.xOffset,os.yOffset,os.width,os.height):(os!=null?os.disposeOp:void 0)===2&&ss.putImageData(os.imageData,os.xOffset,os.yOffset),ns.blendOp===0&&ss.clearRect(ns.xOffset,ns.yOffset,ns.width,ns.height),ss.drawImage(ns.image,ns.xOffset,ns.yOffset)},es.prototype.animate=function(ss){var rs,ns,is,os,us,ps,xs=this;return ns=0,ps=this.animation,os=ps.numFrames,is=ps.frames,us=ps.numPlays,(rs=function(){var cs,ys;if(cs=ns++%os,ys=is[cs],xs.renderFrame(ss,cs),os>1&&ns/os<us)return xs.animation._timeout=setTimeout(rs,ys.delay)})()},es.prototype.stopAnimation=function(){var ss;return clearTimeout((ss=this.animation)!=null?ss._timeout:void 0)},es.prototype.render=function(ss){var rs,ns;return ss._png&&ss._png.stopAnimation(),ss._png=this,ss.width=this.width,ss.height=this.height,rs=ss.getContext("2d"),this.animation?(this.decodeFrames(rs),this.animate(rs)):(ns=rs.createImageData(this.width,this.height),this.copyToImageData(ns,this.decodePixels()),rs.putImageData(ns,0,0))},es}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(_e){var e=0;if(_e[e++]!==71||_e[e++]!==73||_e[e++]!==70||_e[e++]!==56||(_e[e++]+1&253)!=56||_e[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var St=_e[e++]|_e[e++]<<8,es=_e[e++]|_e[e++]<<8,ts=_e[e++],ss=ts>>7,rs=1<<(7&ts)+1;_e[e++],_e[e++];var ns=null,is=null;ss&&(ns=e,is=rs,e+=3*rs);var os=!0,us=[],ps=0,xs=null,cs=0,ys=null;for(this.width=St,this.height=es;os&&e<_e.length;)switch(_e[e++]){case 33:switch(_e[e++]){case 255:if(_e[e]!==11||_e[e+1]==78&&_e[e+2]==69&&_e[e+3]==84&&_e[e+4]==83&&_e[e+5]==67&&_e[e+6]==65&&_e[e+7]==80&&_e[e+8]==69&&_e[e+9]==50&&_e[e+10]==46&&_e[e+11]==48&&_e[e+12]==3&&_e[e+13]==1&&_e[e+16]==0)e+=14,ys=_e[e++]|_e[e++]<<8,e++;else for(e+=12;;){if(!((bs=_e[e++])>=0))throw Error("Invalid block size");if(bs===0)break;e+=bs}break;case 249:if(_e[e++]!==4||_e[e+4]!==0)throw new Error("Invalid graphics extension block.");var gs=_e[e++];ps=_e[e++]|_e[e++]<<8,xs=_e[e++],!(1&gs)&&(xs=null),cs=gs>>2&7,e++;break;case 254:for(;;){if(!((bs=_e[e++])>=0))throw Error("Invalid block size");if(bs===0)break;e+=bs}break;default:throw new Error("Unknown graphic control label: 0x"+_e[e-1].toString(16))}break;case 44:var vs=_e[e++]|_e[e++]<<8,ds=_e[e++]|_e[e++]<<8,fs=_e[e++]|_e[e++]<<8,Es=_e[e++]|_e[e++]<<8,Os=_e[e++],Hs=Os>>6&1,Qs=1<<(7&Os)+1,zs=ns,Ls=is,Bs=!1;Os>>7&&(Bs=!0,zs=e,Ls=Qs,e+=3*Qs);var Gs=e;for(e++;;){var bs;if(!((bs=_e[e++])>=0))throw Error("Invalid block size");if(bs===0)break;e+=bs}us.push({x:vs,y:ds,width:fs,height:Es,has_local_palette:Bs,palette_offset:zs,palette_size:Ls,data_offset:Gs,data_length:e-Gs,transparent_index:xs,interlaced:!!Hs,delay:ps,disposal:cs});break;case 59:os=!1;break;default:throw new Error("Unknown gif block: 0x"+_e[e-1].toString(16))}this.numFrames=function(){return us.length},this.loopCount=function(){return ys},this.frameInfo=function(As){if(As<0||As>=us.length)throw new Error("Frame index out of range.");return us[As]},this.decodeAndBlitFrameBGRA=function(As,ks){var $s=this.frameInfo(As),qs=$s.width*$s.height,Cs=new Uint8Array(qs);$t(_e,$s.data_offset,Cs,qs);var Us=$s.palette_offset,Ps=$s.transparent_index;Ps===null&&(Ps=256);var er=$s.width,tr=St-er,vr=er,ws=4*($s.y*St+$s.x),Vs=4*(($s.y+$s.height)*St+$s.x),Ys=ws,Ws=4*tr;$s.interlaced===!0&&(Ws+=4*St*7);for(var sr=8,nr=0,pr=Cs.length;nr<pr;++nr){var xr=Cs[nr];if(vr===0&&(vr=er,(Ys+=Ws)>=Vs&&(Ws=4*tr+4*St*(sr-1),Ys=ws+(er+tr)*(sr<<1),sr>>=1)),xr===Ps)Ys+=4;else{var Tr=_e[Us+3*xr],Dr=_e[Us+3*xr+1],zr=_e[Us+3*xr+2];ks[Ys++]=zr,ks[Ys++]=Dr,ks[Ys++]=Tr,ks[Ys++]=255}--vr}},this.decodeAndBlitFrameRGBA=function(As,ks){var $s=this.frameInfo(As),qs=$s.width*$s.height,Cs=new Uint8Array(qs);$t(_e,$s.data_offset,Cs,qs);var Us=$s.palette_offset,Ps=$s.transparent_index;Ps===null&&(Ps=256);var er=$s.width,tr=St-er,vr=er,ws=4*($s.y*St+$s.x),Vs=4*(($s.y+$s.height)*St+$s.x),Ys=ws,Ws=4*tr;$s.interlaced===!0&&(Ws+=4*St*7);for(var sr=8,nr=0,pr=Cs.length;nr<pr;++nr){var xr=Cs[nr];if(vr===0&&(vr=er,(Ys+=Ws)>=Vs&&(Ws=4*tr+4*St*(sr-1),Ys=ws+(er+tr)*(sr<<1),sr>>=1)),xr===Ps)Ys+=4;else{var Tr=_e[Us+3*xr],Dr=_e[Us+3*xr+1],zr=_e[Us+3*xr+2];ks[Ys++]=Tr,ks[Ys++]=Dr,ks[Ys++]=zr,ks[Ys++]=255}--vr}}}function $t(_e,e,St,es){for(var ts=_e[e++],ss=1<<ts,rs=ss+1,ns=rs+1,is=ts+1,os=(1<<is)-1,us=0,ps=0,xs=0,cs=_e[e++],ys=new Int32Array(4096),gs=null;;){for(;us<16&&cs!==0;)ps|=_e[e++]<<us,us+=8,cs===1?cs=_e[e++]:--cs;if(us<is)break;var vs=ps&os;if(ps>>=is,us-=is,vs!==ss){if(vs===rs)break;for(var ds=vs<ns?vs:gs,fs=0,Es=ds;Es>ss;)Es=ys[Es]>>8,++fs;var Os=Es;if(xs+fs+(ds!==vs?1:0)>es)return void a.log("Warning, gif stream longer than expected.");St[xs++]=Os;var Hs=xs+=fs;for(ds!==vs&&(St[xs++]=Os),Es=ds;fs--;)Es=ys[Es],St[--Hs]=255&Es,Es>>=8;gs!==null&&ns<4096&&(ys[ns++]=gs<<8|Os,ns>=os+1&&is<12&&(++is,os=os<<1|1)),gs=vs}else ns=rs+1,os=(1<<(is=ts+1))-1,gs=null}return xs!==es&&a.log("Warning, gif stream shorter than expected."),St}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(_e){var e,St,es,ts,ss,rs=Math.floor,ns=new Array(64),is=new Array(64),os=new Array(64),us=new Array(64),ps=new Array(65535),xs=new Array(65535),cs=new Array(64),ys=new Array(64),gs=[],vs=0,ds=7,fs=new Array(64),Es=new Array(64),Os=new Array(64),Hs=new Array(256),Qs=new Array(2048),zs=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ls=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Bs=[0,1,2,3,4,5,6,7,8,9,10,11],Gs=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],bs=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],As=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ks=[0,1,2,3,4,5,6,7,8,9,10,11],$s=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],qs=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Cs(ws,Vs){for(var Ys=0,Ws=0,sr=new Array,nr=1;nr<=16;nr++){for(var pr=1;pr<=ws[nr];pr++)sr[Vs[Ws]]=[],sr[Vs[Ws]][0]=Ys,sr[Vs[Ws]][1]=nr,Ws++,Ys++;Ys*=2}return sr}function Us(ws){for(var Vs=ws[0],Ys=ws[1]-1;Ys>=0;)Vs&1<<Ys&&(vs|=1<<ds),Ys--,--ds<0&&(vs==255?(Ps(255),Ps(0)):Ps(vs),ds=7,vs=0)}function Ps(ws){gs.push(ws)}function er(ws){Ps(ws>>8&255),Ps(255&ws)}function tr(ws,Vs,Ys,Ws,sr){for(var nr,pr=sr[0],xr=sr[240],Tr=function(dr,lr){var _r,Ar,Vr,Kr,_s,Ks,yr,Ur,Or,Ir,kr=0;for(Or=0;Or<8;++Or){_r=dr[kr],Ar=dr[kr+1],Vr=dr[kr+2],Kr=dr[kr+3],_s=dr[kr+4],Ks=dr[kr+5],yr=dr[kr+6];var Zr=_r+(Ur=dr[kr+7]),Gr=_r-Ur,nn=Ar+yr,tn=Ar-yr,en=Vr+Ks,un=Vr-Ks,Qr=Kr+_s,Un=Kr-_s,Sn=Zr+Qr,Hn=Zr-Qr,$n=nn+en,An=nn-en;dr[kr]=Sn+$n,dr[kr+4]=Sn-$n;var Hr=.707106781*(An+Hn);dr[kr+2]=Hn+Hr,dr[kr+6]=Hn-Hr;var dn=.382683433*((Sn=Un+un)-(An=tn+Gr)),So=.5411961*Sn+dn,vn=1.306562965*An+dn,oo=.707106781*($n=un+tn),Jn=Gr+oo,an=Gr-oo;dr[kr+5]=an+So,dr[kr+3]=an-So,dr[kr+1]=Jn+vn,dr[kr+7]=Jn-vn,kr+=8}for(kr=0,Or=0;Or<8;++Or){_r=dr[kr],Ar=dr[kr+8],Vr=dr[kr+16],Kr=dr[kr+24],_s=dr[kr+32],Ks=dr[kr+40],yr=dr[kr+48];var lo=_r+(Ur=dr[kr+56]),ro=_r-Ur,Yn=Ar+yr,Mn=Ar-yr,On=Vr+Ks,$a=Vr-Ks,Bo=Kr+_s,ho=Kr-_s,no=lo+Bo,Ds=lo-Bo,Er=Yn+On,br=Yn-On;dr[kr]=no+Er,dr[kr+32]=no-Er;var qr=.707106781*(br+Ds);dr[kr+16]=Ds+qr,dr[kr+48]=Ds-qr;var sn=.382683433*((no=ho+$a)-(br=Mn+ro)),hn=.5411961*no+sn,_n=1.306562965*br+sn,Pn=.707106781*(Er=$a+Mn),Nn=ro+Pn,xo=ro-Pn;dr[kr+40]=xo+hn,dr[kr+24]=xo-hn,dr[kr+8]=Nn+_n,dr[kr+56]=Nn-_n,kr++}for(Or=0;Or<64;++Or)Ir=dr[Or]*lr[Or],cs[Or]=Ir>0?Ir+.5|0:Ir-.5|0;return cs}(ws,Vs),Dr=0;Dr<64;++Dr)ys[zs[Dr]]=Tr[Dr];var zr=ys[0]-Ys;Ys=ys[0],zr==0?Us(Ws[0]):(Us(Ws[xs[nr=32767+zr]]),Us(ps[nr]));for(var or=63;or>0&&ys[or]==0;)or--;if(or==0)return Us(pr),Ys;for(var Nr,cr=1;cr<=or;){for(var Ns=cr;ys[cr]==0&&cr<=or;)++cr;var jr=cr-Ns;if(jr>=16){Nr=jr>>4;for(var wr=1;wr<=Nr;++wr)Us(xr);jr&=15}nr=32767+ys[cr],Us(sr[(jr<<4)+xs[nr]]),Us(ps[nr]),cr++}return or!=63&&Us(pr),Ys}function vr(ws){ws=Math.min(Math.max(ws,1),100),ss!=ws&&(function(Vs){for(var Ys=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ws=0;Ws<64;Ws++){var sr=rs((Ys[Ws]*Vs+50)/100);sr=Math.min(Math.max(sr,1),255),ns[zs[Ws]]=sr}for(var nr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pr=0;pr<64;pr++){var xr=rs((nr[pr]*Vs+50)/100);xr=Math.min(Math.max(xr,1),255),is[zs[pr]]=xr}for(var Tr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Dr=0,zr=0;zr<8;zr++)for(var or=0;or<8;or++)os[Dr]=1/(ns[zs[Dr]]*Tr[zr]*Tr[or]*8),us[Dr]=1/(is[zs[Dr]]*Tr[zr]*Tr[or]*8),Dr++}(ws<50?Math.floor(5e3/ws):Math.floor(200-2*ws)),ss=ws)}this.encode=function(ws,Vs){Vs&&vr(Vs),gs=new Array,vs=0,ds=7,er(65496),er(65504),er(16),Ps(74),Ps(70),Ps(73),Ps(70),Ps(0),Ps(1),Ps(1),Ps(0),er(1),er(1),Ps(0),Ps(0),function(){er(65499),er(132),Ps(0);for(var Ar=0;Ar<64;Ar++)Ps(ns[Ar]);Ps(1);for(var Vr=0;Vr<64;Vr++)Ps(is[Vr])}(),function(Ar,Vr){er(65472),er(17),Ps(8),er(Vr),er(Ar),Ps(3),Ps(1),Ps(17),Ps(0),Ps(2),Ps(17),Ps(1),Ps(3),Ps(17),Ps(1)}(ws.width,ws.height),function(){er(65476),er(418),Ps(0);for(var Ar=0;Ar<16;Ar++)Ps(Ls[Ar+1]);for(var Vr=0;Vr<=11;Vr++)Ps(Bs[Vr]);Ps(16);for(var Kr=0;Kr<16;Kr++)Ps(Gs[Kr+1]);for(var _s=0;_s<=161;_s++)Ps(bs[_s]);Ps(1);for(var Ks=0;Ks<16;Ks++)Ps(As[Ks+1]);for(var yr=0;yr<=11;yr++)Ps(ks[yr]);Ps(17);for(var Ur=0;Ur<16;Ur++)Ps($s[Ur+1]);for(var Or=0;Or<=161;Or++)Ps(qs[Or])}(),er(65498),er(12),Ps(3),Ps(1),Ps(0),Ps(2),Ps(17),Ps(3),Ps(17),Ps(0),Ps(63),Ps(0);var Ys=0,Ws=0,sr=0;vs=0,ds=7,this.encode.displayName="_encode_";for(var nr,pr,xr,Tr,Dr,zr,or,Nr,cr,Ns=ws.data,jr=ws.width,wr=ws.height,dr=4*jr,lr=0;lr<wr;){for(nr=0;nr<dr;){for(Dr=dr*lr+nr,or=-1,Nr=0,cr=0;cr<64;cr++)zr=Dr+(Nr=cr>>3)*dr+(or=4*(7&cr)),lr+Nr>=wr&&(zr-=dr*(lr+1+Nr-wr)),nr+or>=dr&&(zr-=nr+or-dr+4),pr=Ns[zr++],xr=Ns[zr++],Tr=Ns[zr++],fs[cr]=(Qs[pr]+Qs[xr+256>>0]+Qs[Tr+512>>0]>>16)-128,Es[cr]=(Qs[pr+768>>0]+Qs[xr+1024>>0]+Qs[Tr+1280>>0]>>16)-128,Os[cr]=(Qs[pr+1280>>0]+Qs[xr+1536>>0]+Qs[Tr+1792>>0]>>16)-128;Ys=tr(fs,os,Ys,e,es),Ws=tr(Es,us,Ws,St,ts),sr=tr(Os,us,sr,St,ts),nr+=32}lr+=8}if(ds>=0){var _r=[];_r[1]=ds+1,_r[0]=(1<<ds+1)-1,Us(_r)}return er(65497),new Uint8Array(gs)},_e=_e||50,function(){for(var ws=String.fromCharCode,Vs=0;Vs<256;Vs++)Hs[Vs]=ws(Vs)}(),e=Cs(Ls,Bs),St=Cs(As,ks),es=Cs(Gs,bs),ts=Cs($s,qs),function(){for(var ws=1,Vs=2,Ys=1;Ys<=15;Ys++){for(var Ws=ws;Ws<Vs;Ws++)xs[32767+Ws]=Ys,ps[32767+Ws]=[],ps[32767+Ws][1]=Ys,ps[32767+Ws][0]=Ws;for(var sr=-(Vs-1);sr<=-ws;sr++)xs[32767+sr]=Ys,ps[32767+sr]=[],ps[32767+sr][1]=Ys,ps[32767+sr][0]=Vs-1+sr;ws<<=1,Vs<<=1}}(),function(){for(var ws=0;ws<256;ws++)Qs[ws]=19595*ws,Qs[ws+256>>0]=38470*ws,Qs[ws+512>>0]=7471*ws+32768,Qs[ws+768>>0]=-11059*ws,Qs[ws+1024>>0]=-21709*ws,Qs[ws+1280>>0]=32768*ws+8421375,Qs[ws+1536>>0]=-27439*ws,Qs[ws+1792>>0]=-5329*ws}(),vr(_e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(_e,e){if(this.pos=0,this.buffer=_e,this.datav=new DataView(_e.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(_e){function e(Ls){if(!Ls)throw Error("assert :P")}function St(Ls,Bs,Gs){for(var bs=0;4>bs;bs++)if(Ls[Bs+bs]!=Gs.charCodeAt(bs))return!0;return!1}function es(Ls,Bs,Gs,bs,As){for(var ks=0;ks<As;ks++)Ls[Bs+ks]=Gs[bs+ks]}function ts(Ls,Bs,Gs,bs){for(var As=0;As<bs;As++)Ls[Bs+As]=Gs}function ss(Ls){return new Int32Array(Ls)}function rs(Ls,Bs){for(var Gs=[],bs=0;bs<Ls;bs++)Gs.push(new Bs);return Gs}function ns(Ls,Bs){var Gs=[];return function bs(As,ks,$s){for(var qs=$s[ks],Cs=0;Cs<qs&&(As.push($s.length>ks+1?[]:new Bs),!($s.length<ks+1));Cs++)bs(As[Cs],ks+1,$s)}(Gs,0,Ls),Gs}var is=function(){var Ls=this;function Bs(as,ls){for(var hs=1<<ls-1>>>0;as&hs;)hs>>>=1;return hs?(as&hs-1)+hs:as}function Gs(as,ls,hs,js,Rs){e(!(js%hs));do as[ls+(js-=hs)]=Rs;while(0<js)}function bs(as,ls,hs,js,Rs){if(e(2328>=Rs),512>=Rs)var Ts=ss(512);else if((Ts=ss(Rs))==null)return 0;return function(Is,Ms,Fs,Xs,ir,fr){var gr,mr,$r=Ms,Sr=1<<Fs,ar=ss(16),ur=ss(16);for(e(ir!=0),e(Xs!=null),e(Is!=null),e(0<Fs),mr=0;mr<ir;++mr){if(15<Xs[mr])return 0;++ar[Xs[mr]]}if(ar[0]==ir)return 0;for(ur[1]=0,gr=1;15>gr;++gr){if(ar[gr]>1<<gr)return 0;ur[gr+1]=ur[gr]+ar[gr]}for(mr=0;mr<ir;++mr)gr=Xs[mr],0<Xs[mr]&&(fr[ur[gr]++]=mr);if(ur[15]==1)return(Xs=new As).g=0,Xs.value=fr[0],Gs(Is,$r,1,Sr,Xs),Sr;var Lr,Mr=-1,Pr=Sr-1,Xr=0,Wr=1,cn=1,Jr=1<<Fs;for(mr=0,gr=1,ir=2;gr<=Fs;++gr,ir<<=1){if(Wr+=cn<<=1,0>(cn-=ar[gr]))return 0;for(;0<ar[gr];--ar[gr])(Xs=new As).g=gr,Xs.value=fr[mr++],Gs(Is,$r+Xr,ir,Jr,Xs),Xr=Bs(Xr,gr)}for(gr=Fs+1,ir=2;15>=gr;++gr,ir<<=1){if(Wr+=cn<<=1,0>(cn-=ar[gr]))return 0;for(;0<ar[gr];--ar[gr]){if(Xs=new As,(Xr&Pr)!=Mr){for($r+=Jr,Lr=1<<(Mr=gr)-Fs;15>Mr&&!(0>=(Lr-=ar[Mr]));)++Mr,Lr<<=1;Sr+=Jr=1<<(Lr=Mr-Fs),Is[Ms+(Mr=Xr&Pr)].g=Lr+Fs,Is[Ms+Mr].value=$r-Ms-Mr}Xs.g=gr-Fs,Xs.value=fr[mr++],Gs(Is,$r+(Xr>>Fs),ir,Jr,Xs),Xr=Bs(Xr,gr)}}return Wr!=2*ur[15]-1?0:Sr}(as,ls,hs,js,Rs,Ts)}function As(){this.value=this.g=0}function ks(){this.value=this.g=0}function $s(){this.G=rs(5,As),this.H=ss(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=rs(to,ks)}function qs(as,ls,hs,js){e(as!=null),e(ls!=null),e(2147483648>js),as.Ca=254,as.I=0,as.b=-8,as.Ka=0,as.oa=ls,as.pa=hs,as.Jd=ls,as.Yc=hs+js,as.Zc=4<=js?hs+js-4+1:hs,nr(as)}function Cs(as,ls){for(var hs=0;0<ls--;)hs|=xr(as,128)<<ls;return hs}function Us(as,ls){var hs=Cs(as,ls);return pr(as)?-hs:hs}function Ps(as,ls,hs,js){var Rs,Ts=0;for(e(as!=null),e(ls!=null),e(4294967288>js),as.Sb=js,as.Ra=0,as.u=0,as.h=0,4<js&&(js=4),Rs=0;Rs<js;++Rs)Ts+=ls[hs+Rs]<<8*Rs;as.Ra=Ts,as.bb=js,as.oa=ls,as.pa=hs}function er(as){for(;8<=as.u&&as.bb<as.Sb;)as.Ra>>>=8,as.Ra+=as.oa[as.pa+as.bb]<<fu-8>>>0,++as.bb,as.u-=8;Ys(as)&&(as.h=1,as.u=0)}function tr(as,ls){if(e(0<=ls),!as.h&&ls<=xu){var hs=Vs(as)&hu[ls];return as.u+=ls,er(as),hs}return as.h=1,as.u=0}function vr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ws(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Vs(as){return as.Ra>>>(as.u&fu-1)>>>0}function Ys(as){return e(as.bb<=as.Sb),as.h||as.bb==as.Sb&&as.u>fu}function Ws(as,ls){as.u=ls,as.h=Ys(as)}function sr(as){as.u>=qu&&(e(as.u>=qu),er(as))}function nr(as){e(as!=null&&as.oa!=null),as.pa<as.Zc?(as.I=(as.oa[as.pa++]|as.I<<8)>>>0,as.b+=8):(e(as!=null&&as.oa!=null),as.pa<as.Yc?(as.b+=8,as.I=as.oa[as.pa++]|as.I<<8):as.Ka?as.b=0:(as.I<<=8,as.b+=8,as.Ka=1))}function pr(as){return Cs(as,1)}function xr(as,ls){var hs=as.Ca;0>as.b&&nr(as);var js=as.b,Rs=hs*ls>>>8,Ts=(as.I>>>js>Rs)+0;for(Ts?(hs-=Rs,as.I-=Rs+1<<js>>>0):hs=Rs+1,js=hs,Rs=0;256<=js;)Rs+=8,js>>=8;return js=7^Rs+jo[js],as.b-=js,as.Ca=(hs<<js)-1,Ts}function Tr(as,ls,hs){as[ls+0]=hs>>24&255,as[ls+1]=hs>>16&255,as[ls+2]=hs>>8&255,as[ls+3]=hs>>0&255}function Dr(as,ls){return as[ls+0]<<0|as[ls+1]<<8}function zr(as,ls){return Dr(as,ls)|as[ls+2]<<16}function or(as,ls){return Dr(as,ls)|Dr(as,ls+2)<<16}function Nr(as,ls){var hs=1<<ls;return e(as!=null),e(0<ls),as.X=ss(hs),as.X==null?0:(as.Mb=32-ls,as.Xa=ls,1)}function cr(as,ls){e(as!=null),e(ls!=null),e(as.Xa==ls.Xa),es(ls.X,0,as.X,0,1<<ls.Xa)}function Ns(){this.X=[],this.Xa=this.Mb=0}function jr(as,ls,hs,js){e(hs!=null),e(js!=null);var Rs=hs[0],Ts=js[0];return Rs==0&&(Rs=(as*Ts+ls/2)/ls),Ts==0&&(Ts=(ls*Rs+as/2)/as),0>=Rs||0>=Ts?0:(hs[0]=Rs,js[0]=Ts,1)}function wr(as,ls){return as+(1<<ls)-1>>>ls}function dr(as,ls){return((4278255360&as)+(4278255360&ls)>>>0&4278255360)+((16711935&as)+(16711935&ls)>>>0&16711935)>>>0}function lr(as,ls){Ls[ls]=function(hs,js,Rs,Ts,Is,Ms,Fs){var Xs;for(Xs=0;Xs<Is;++Xs){var ir=Ls[as](Ms[Fs+Xs-1],Rs,Ts+Xs);Ms[Fs+Xs]=dr(hs[js+Xs],ir)}}}function _r(){this.ud=this.hd=this.jd=0}function Ar(as,ls){return((4278124286&(as^ls))>>>1)+(as&ls)>>>0}function Vr(as){return 0<=as&&256>as?as:0>as?0:255<as?255:void 0}function Kr(as,ls){return Vr(as+(as-ls+.5>>1))}function _s(as,ls,hs){return Math.abs(ls-hs)-Math.abs(as-hs)}function Ks(as,ls,hs,js,Rs,Ts,Is){for(js=Ts[Is-1],hs=0;hs<Rs;++hs)Ts[Is+hs]=js=dr(as[ls+hs],js)}function yr(as,ls,hs,js,Rs){var Ts;for(Ts=0;Ts<hs;++Ts){var Is=as[ls+Ts],Ms=Is>>8&255,Fs=16711935&(Fs=(Fs=16711935&Is)+((Ms<<16)+Ms));js[Rs+Ts]=(4278255360&Is)+Fs>>>0}}function Ur(as,ls){ls.jd=as>>0&255,ls.hd=as>>8&255,ls.ud=as>>16&255}function Or(as,ls,hs,js,Rs,Ts){var Is;for(Is=0;Is<js;++Is){var Ms=ls[hs+Is],Fs=Ms>>>8,Xs=Ms,ir=255&(ir=(ir=Ms>>>16)+((as.jd<<24>>24)*(Fs<<24>>24)>>>5));Xs=255&(Xs=(Xs=Xs+((as.hd<<24>>24)*(Fs<<24>>24)>>>5))+((as.ud<<24>>24)*(ir<<24>>24)>>>5)),Rs[Ts+Is]=(4278255360&Ms)+(ir<<16)+Xs}}function Ir(as,ls,hs,js,Rs){Ls[ls]=function(Ts,Is,Ms,Fs,Xs,ir,fr,gr,mr){for(Fs=fr;Fs<gr;++Fs)for(fr=0;fr<mr;++fr)Xs[ir++]=Rs(Ms[js(Ts[Is++])])},Ls[as]=function(Ts,Is,Ms,Fs,Xs,ir,fr){var gr=8>>Ts.b,mr=Ts.Ea,$r=Ts.K[0],Sr=Ts.w;if(8>gr)for(Ts=(1<<Ts.b)-1,Sr=(1<<gr)-1;Is<Ms;++Is){var ar,ur=0;for(ar=0;ar<mr;++ar)ar&Ts||(ur=js(Fs[Xs++])),ir[fr++]=Rs($r[ur&Sr]),ur>>=gr}else Ls["VP8LMapColor"+hs](Fs,Xs,$r,Sr,ir,fr,Is,Ms,mr)}}function kr(as,ls,hs,js,Rs){for(hs=ls+hs;ls<hs;){var Ts=as[ls++];js[Rs++]=Ts>>16&255,js[Rs++]=Ts>>8&255,js[Rs++]=Ts>>0&255}}function Zr(as,ls,hs,js,Rs){for(hs=ls+hs;ls<hs;){var Ts=as[ls++];js[Rs++]=Ts>>16&255,js[Rs++]=Ts>>8&255,js[Rs++]=Ts>>0&255,js[Rs++]=Ts>>24&255}}function Gr(as,ls,hs,js,Rs){for(hs=ls+hs;ls<hs;){var Ts=(Is=as[ls++])>>16&240|Is>>12&15,Is=Is>>0&240|Is>>28&15;js[Rs++]=Ts,js[Rs++]=Is}}function nn(as,ls,hs,js,Rs){for(hs=ls+hs;ls<hs;){var Ts=(Is=as[ls++])>>16&248|Is>>13&7,Is=Is>>5&224|Is>>3&31;js[Rs++]=Ts,js[Rs++]=Is}}function tn(as,ls,hs,js,Rs){for(hs=ls+hs;ls<hs;){var Ts=as[ls++];js[Rs++]=Ts>>0&255,js[Rs++]=Ts>>8&255,js[Rs++]=Ts>>16&255}}function en(as,ls,hs,js,Rs,Ts){if(Ts==0)for(hs=ls+hs;ls<hs;)Tr(js,((Ts=as[ls++])[0]>>24|Ts[1]>>8&65280|Ts[2]<<8&16711680|Ts[3]<<24)>>>0),Rs+=32;else es(js,Rs,as,ls,hs)}function un(as,ls){Ls[ls][0]=Ls[as+"0"],Ls[ls][1]=Ls[as+"1"],Ls[ls][2]=Ls[as+"2"],Ls[ls][3]=Ls[as+"3"],Ls[ls][4]=Ls[as+"4"],Ls[ls][5]=Ls[as+"5"],Ls[ls][6]=Ls[as+"6"],Ls[ls][7]=Ls[as+"7"],Ls[ls][8]=Ls[as+"8"],Ls[ls][9]=Ls[as+"9"],Ls[ls][10]=Ls[as+"10"],Ls[ls][11]=Ls[as+"11"],Ls[ls][12]=Ls[as+"12"],Ls[ls][13]=Ls[as+"13"],Ls[ls][14]=Ls[as+"0"],Ls[ls][15]=Ls[as+"0"]}function Qr(as){return as==Wm||as==Km||as==vm||as==Jm}function Un(){this.eb=[],this.size=this.A=this.fb=0}function Sn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Un,this.f.kb=new Sn,this.sd=null}function $n(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function An(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hr(as){return alert("todo:WebPSamplerProcessPlane"),as.T}function dn(as,ls){var hs=as.T,js=ls.ba.f.RGBA,Rs=js.eb,Ts=js.fb+as.ka*js.A,Is=Io[ls.ba.S],Ms=as.y,Fs=as.O,Xs=as.f,ir=as.N,fr=as.ea,gr=as.W,mr=ls.cc,$r=ls.dc,Sr=ls.Mc,ar=ls.Nc,ur=as.ka,Lr=as.ka+as.T,Mr=as.U,Pr=Mr+1>>1;for(ur==0?Is(Ms,Fs,null,null,Xs,ir,fr,gr,Xs,ir,fr,gr,Rs,Ts,null,null,Mr):(Is(ls.ec,ls.fc,Ms,Fs,mr,$r,Sr,ar,Xs,ir,fr,gr,Rs,Ts-js.A,Rs,Ts,Mr),++hs);ur+2<Lr;ur+=2)mr=Xs,$r=ir,Sr=fr,ar=gr,ir+=as.Rc,gr+=as.Rc,Ts+=2*js.A,Is(Ms,(Fs+=2*as.fa)-as.fa,Ms,Fs,mr,$r,Sr,ar,Xs,ir,fr,gr,Rs,Ts-js.A,Rs,Ts,Mr);return Fs+=as.fa,as.j+Lr<as.o?(es(ls.ec,ls.fc,Ms,Fs,Mr),es(ls.cc,ls.dc,Xs,ir,Pr),es(ls.Mc,ls.Nc,fr,gr,Pr),hs--):1&Lr||Is(Ms,Fs,null,null,Xs,ir,fr,gr,Xs,ir,fr,gr,Rs,Ts+js.A,null,null,Mr),hs}function So(as,ls,hs){var js=as.F,Rs=[as.J];if(js!=null){var Ts=as.U,Is=ls.ba.S,Ms=Is==jm||Is==vm;ls=ls.ba.f.RGBA;var Fs=[0],Xs=as.ka;Fs[0]=as.T,as.Kb&&(Xs==0?--Fs[0]:(--Xs,Rs[0]-=as.width),as.j+as.ka+as.T==as.o&&(Fs[0]=as.o-as.j-Xs));var ir=ls.eb;Xs=ls.fb+Xs*ls.A,as=zn(js,Rs[0],as.width,Ts,Fs,ir,Xs+(Ms?0:3),ls.A),e(hs==Fs),as&&Qr(Is)&&Lo(ir,Xs,Ms,Ts,Fs,ls.A)}return 0}function vn(as){var ls=as.ma,hs=ls.ba.S,js=11>hs,Rs=hs==fm||hs==gm||hs==jm||hs==Gm||hs==12||Qr(hs);if(ls.memory=null,ls.Ib=null,ls.Jb=null,ls.Nd=null,!Fu(ls.Oa,as,Rs?11:12))return 0;if(Rs&&Qr(hs)&&Fr(),as.da)alert("todo:use_scaling");else{if(js){if(ls.Ib=Hr,as.Kb){if(hs=as.U+1>>1,ls.memory=ss(as.U+2*hs),ls.memory==null)return 0;ls.ec=ls.memory,ls.fc=0,ls.cc=ls.ec,ls.dc=ls.fc+as.U,ls.Mc=ls.cc,ls.Nc=ls.dc+hs,ls.Ib=dn,Fr()}}else alert("todo:EmitYUV");Rs&&(ls.Jb=So,js&&hr())}if(js&&!jp){for(as=0;256>as;++as)ex[as]=89858*(as-128)+Em>>ym,rx[as]=-22014*(as-128)+Em,sx[as]=-45773*(as-128),tx[as]=113618*(as-128)+Em>>ym;for(as=Ju;as<Qm;++as)ls=76283*(as-16)+Em>>ym,nx[as-Ju]=bo(ls,255),ix[as-Ju]=bo(ls+8>>4,15);jp=1}return 1}function oo(as){var ls=as.ma,hs=as.U,js=as.T;return e(!(1&as.ka)),0>=hs||0>=js?0:(hs=ls.Ib(as,ls),ls.Jb!=null&&ls.Jb(as,ls,hs),ls.Dc+=hs,1)}function Jn(as){as.ma.memory=null}function an(as,ls,hs,js){return tr(as,8)!=47?0:(ls[0]=tr(as,14)+1,hs[0]=tr(as,14)+1,js[0]=tr(as,1),tr(as,3)!=0?0:!as.h)}function lo(as,ls){if(4>as)return as+1;var hs=as-2>>1;return(2+(1&as)<<hs)+tr(ls,hs)+1}function ro(as,ls){return 120<ls?ls-120:1<=(hs=((hs=Bp[ls-1])>>4)*as+(8-(15&hs)))?hs:1;var hs}function Yn(as,ls,hs){var js=Vs(hs),Rs=as[ls+=255&js].g-8;return 0<Rs&&(Ws(hs,hs.u+8),js=Vs(hs),ls+=as[ls].value,ls+=js&(1<<Rs)-1),Ws(hs,hs.u+as[ls].g),as[ls].value}function Mn(as,ls,hs){return hs.g+=as.g,hs.value+=as.value<<ls>>>0,e(8>=hs.g),as.g}function On(as,ls,hs){var js=as.xc;return e((ls=js==0?0:as.vc[as.md*(hs>>js)+(ls>>js)])<as.Wb),as.Ya[ls]}function $a(as,ls,hs,js){var Rs=as.ab,Ts=as.c*ls,Is=as.C;ls=Is+ls;var Ms=hs,Fs=js;for(js=as.Ta,hs=as.Ua;0<Rs--;){var Xs=as.gc[Rs],ir=Is,fr=ls,gr=Ms,mr=Fs,$r=(Fs=js,Ms=hs,Xs.Ea);switch(e(ir<fr),e(fr<=Xs.nc),Xs.hc){case 2:cm(gr,mr,(fr-ir)*$r,Fs,Ms);break;case 0:var Sr=ir,ar=fr,ur=Fs,Lr=Ms,Mr=(Jr=Xs).Ea;Sr==0&&(Hm(gr,mr,null,null,1,ur,Lr),Ks(gr,mr+1,0,0,Mr-1,ur,Lr+1),mr+=Mr,Lr+=Mr,++Sr);for(var Pr=1<<Jr.b,Xr=Pr-1,Wr=wr(Mr,Jr.b),cn=Jr.K,Jr=Jr.w+(Sr>>Jr.b)*Wr;Sr<ar;){var Cn=cn,kn=Jr,Rn=1;for(Uu(gr,mr,ur,Lr-Mr,1,ur,Lr);Rn<Mr;){var En=(Rn&~Xr)+Pr;En>Mr&&(En=Mr),(0,Pl[Cn[kn++]>>8&15])(gr,mr+ +Rn,ur,Lr+Rn-Mr,En-Rn,ur,Lr+Rn),Rn=En}mr+=Mr,Lr+=Mr,++Sr&Xr||(Jr+=Wr)}fr!=Xs.nc&&es(Fs,Ms-$r,Fs,Ms+(fr-ir-1)*$r,$r);break;case 1:for($r=gr,ar=mr,Mr=(gr=Xs.Ea)-(Lr=gr&~(ur=(mr=1<<Xs.b)-1)),Sr=wr(gr,Xs.b),Pr=Xs.K,Xs=Xs.w+(ir>>Xs.b)*Sr;ir<fr;){for(Xr=Pr,Wr=Xs,cn=new _r,Jr=ar+Lr,Cn=ar+gr;ar<Jr;)Ur(Xr[Wr++],cn),Ql(cn,$r,ar,mr,Fs,Ms),ar+=mr,Ms+=mr;ar<Cn&&(Ur(Xr[Wr++],cn),Ql(cn,$r,ar,Mr,Fs,Ms),ar+=Mr,Ms+=Mr),++ir&ur||(Xs+=Sr)}break;case 3:if(gr==Fs&&mr==Ms&&0<Xs.b){for(ar=Fs,gr=$r=Ms+(fr-ir)*$r-(Lr=(fr-ir)*wr(Xs.Ea,Xs.b)),mr=Fs,ur=Ms,Sr=[],Lr=(Mr=Lr)-1;0<=Lr;--Lr)Sr[Lr]=mr[ur+Lr];for(Lr=Mr-1;0<=Lr;--Lr)ar[gr+Lr]=Sr[Lr];Ao(Xs,ir,fr,Fs,$r,Fs,Ms)}else Ao(Xs,ir,fr,gr,mr,Fs,Ms)}Ms=js,Fs=hs}Fs!=hs&&es(js,hs,Ms,Fs,Ts)}function Bo(as,ls){var hs=as.V,js=as.Ba+as.c*as.C,Rs=ls-as.C;if(e(ls<=as.l.o),e(16>=Rs),0<Rs){var Ts=as.l,Is=as.Ta,Ms=as.Ua,Fs=Ts.width;if($a(as,Rs,hs,js),Rs=Ms=[Ms],e((hs=as.C)<(js=ls)),e(Ts.v<Ts.va),js>Ts.o&&(js=Ts.o),hs<Ts.j){var Xs=Ts.j-hs;hs=Ts.j,Rs[0]+=Xs*Fs}if(hs>=js?hs=0:(Rs[0]+=4*Ts.v,Ts.ka=hs-Ts.j,Ts.U=Ts.va-Ts.v,Ts.T=js-hs,hs=1),hs){if(Ms=Ms[0],11>(hs=as.ca).S){var ir=hs.f.RGBA,fr=(js=hs.S,Rs=Ts.U,Ts=Ts.T,Xs=ir.eb,ir.A),gr=Ts;for(ir=ir.fb+as.Ma*ir.A;0<gr--;){var mr=Is,$r=Ms,Sr=Rs,ar=Xs,ur=ir;switch(js){case xm:vo(mr,$r,Sr,ar,ur);break;case fm:uo(mr,$r,Sr,ar,ur);break;case Wm:uo(mr,$r,Sr,ar,ur),Lo(ar,ur,0,Sr,1,0);break;case lp:Qo(mr,$r,Sr,ar,ur);break;case gm:en(mr,$r,Sr,ar,ur,1);break;case Km:en(mr,$r,Sr,ar,ur,1),Lo(ar,ur,0,Sr,1,0);break;case jm:en(mr,$r,Sr,ar,ur,0);break;case vm:en(mr,$r,Sr,ar,ur,0),Lo(ar,ur,1,Sr,1,0);break;case Gm:Il(mr,$r,Sr,ar,ur);break;case Jm:Il(mr,$r,Sr,ar,ur),Dn(ar,ur,Sr,1,0);break;case cp:Xo(mr,$r,Sr,ar,ur);break;default:e(0)}Ms+=Fs,ir+=fr}as.Ma+=Ts}else alert("todo:EmitRescaledRowsYUVA");e(as.Ma<=hs.height)}}as.C=ls,e(as.C<=as.i)}function ho(as){var ls;if(0<as.ua)return 0;for(ls=0;ls<as.Wb;++ls){var hs=as.Ya[ls].G,js=as.Ya[ls].H;if(0<hs[1][js[1]+0].g||0<hs[2][js[2]+0].g||0<hs[3][js[3]+0].g)return 0}return 1}function no(as,ls,hs,js,Rs,Ts){if(as.Z!=0){var Is=as.qd,Ms=as.rd;for(e(zl[as.Z]!=null);ls<hs;++ls)zl[as.Z](Is,Ms,js,Rs,js,Rs,Ts),Is=js,Ms=Rs,Rs+=Ts;as.qd=Is,as.rd=Ms}}function Ds(as,ls){var hs=as.l.ma,js=hs.Z==0||hs.Z==1?as.l.j:as.C;if(js=as.C<js?js:as.C,e(ls<=as.l.o),ls>js){var Rs=as.l.width,Ts=hs.ca,Is=hs.tb+Rs*js,Ms=as.V,Fs=as.Ba+as.c*js,Xs=as.gc;e(as.ab==1),e(Xs[0].hc==3),um(Xs[0],js,ls,Ms,Fs,Ts,Is),no(hs,js,ls,Ts,Is,Rs)}as.C=as.Ma=ls}function Er(as,ls,hs,js,Rs,Ts,Is){var Ms=as.$/js,Fs=as.$%js,Xs=as.m,ir=as.s,fr=hs+as.$,gr=fr;Rs=hs+js*Rs;var mr=hs+js*Ts,$r=280+ir.ua,Sr=as.Pb?Ms:16777216,ar=0<ir.ua?ir.Wa:null,ur=ir.wc,Lr=fr<mr?On(ir,Fs,Ms):null;e(as.C<Ts),e(mr<=Rs);var Mr=!1;e:for(;;){for(;Mr||fr<mr;){var Pr=0;if(Ms>=Sr){var Xr=fr-hs;e((Sr=as).Pb),Sr.wd=Sr.m,Sr.xd=Xr,0<Sr.s.ua&&cr(Sr.s.Wa,Sr.s.vb),Sr=Ms+Up}if(Fs&ur||(Lr=On(ir,Fs,Ms)),e(Lr!=null),Lr.Qb&&(ls[fr]=Lr.qb,Mr=!0),!Mr)if(sr(Xs),Lr.jc){Pr=Xs,Xr=ls;var Wr=fr,cn=Lr.pd[Vs(Pr)&to-1];e(Lr.jc),256>cn.g?(Ws(Pr,Pr.u+cn.g),Xr[Wr]=cn.value,Pr=0):(Ws(Pr,Pr.u+cn.g-256),e(256<=cn.value),Pr=cn.value),Pr==0&&(Mr=!0)}else Pr=Yn(Lr.G[0],Lr.H[0],Xs);if(Xs.h)break;if(Mr||256>Pr){if(!Mr)if(Lr.nd)ls[fr]=(Lr.qb|Pr<<8)>>>0;else{if(sr(Xs),Mr=Yn(Lr.G[1],Lr.H[1],Xs),sr(Xs),Xr=Yn(Lr.G[2],Lr.H[2],Xs),Wr=Yn(Lr.G[3],Lr.H[3],Xs),Xs.h)break;ls[fr]=(Wr<<24|Mr<<16|Pr<<8|Xr)>>>0}if(Mr=!1,++fr,++Fs>=js&&(Fs=0,++Ms,Is!=null&&Ms<=Ts&&!(Ms%16)&&Is(as,Ms),ar!=null))for(;gr<fr;)Pr=ls[gr++],ar.X[(506832829*Pr&4294967295)>>>ar.Mb]=Pr}else if(280>Pr){if(Pr=lo(Pr-256,Xs),Xr=Yn(Lr.G[4],Lr.H[4],Xs),sr(Xs),Xr=ro(js,Xr=lo(Xr,Xs)),Xs.h)break;if(fr-hs<Xr||Rs-fr<Pr)break e;for(Wr=0;Wr<Pr;++Wr)ls[fr+Wr]=ls[fr+Wr-Xr];for(fr+=Pr,Fs+=Pr;Fs>=js;)Fs-=js,++Ms,Is!=null&&Ms<=Ts&&!(Ms%16)&&Is(as,Ms);if(e(fr<=Rs),Fs&ur&&(Lr=On(ir,Fs,Ms)),ar!=null)for(;gr<fr;)Pr=ls[gr++],ar.X[(506832829*Pr&4294967295)>>>ar.Mb]=Pr}else{if(!(Pr<$r))break e;for(Mr=Pr-280,e(ar!=null);gr<fr;)Pr=ls[gr++],ar.X[(506832829*Pr&4294967295)>>>ar.Mb]=Pr;Pr=fr,e(!(Mr>>>(Xr=ar).Xa)),ls[Pr]=Xr.X[Mr],Mr=!0}Mr||e(Xs.h==Ys(Xs))}if(as.Pb&&Xs.h&&fr<Rs)e(as.m.h),as.a=5,as.m=as.wd,as.$=as.xd,0<as.s.ua&&cr(as.s.vb,as.s.Wa);else{if(Xs.h)break e;Is!=null&&Is(as,Ms>Ts?Ts:Ms),as.a=0,as.$=fr-hs}return 1}return as.a=3,0}function br(as){e(as!=null),as.vc=null,as.yc=null,as.Ya=null;var ls=as.Wa;ls!=null&&(ls.X=null),as.vb=null,e(as!=null)}function qr(){var as=new Um;return as==null?null:(as.a=0,as.xb=mp,un("Predictor","VP8LPredictors"),un("Predictor","VP8LPredictors_C"),un("PredictorAdd","VP8LPredictorsAdd"),un("PredictorAdd","VP8LPredictorsAdd_C"),cm=yr,Ql=Or,vo=kr,uo=Zr,Il=Gr,Xo=nn,Qo=tn,Ls.VP8LMapColor32b=gu,Ls.VP8LMapColor8b=dm,as)}function sn(as,ls,hs,js,Rs){var Ts=1,Is=[as],Ms=[ls],Fs=js.m,Xs=js.s,ir=null,fr=0;e:for(;;){if(hs)for(;Ts&&tr(Fs,1);){var gr=Is,mr=Ms,$r=js,Sr=1,ar=$r.m,ur=$r.gc[$r.ab],Lr=tr(ar,2);if($r.Oc&1<<Lr)Ts=0;else{switch($r.Oc|=1<<Lr,ur.hc=Lr,ur.Ea=gr[0],ur.nc=mr[0],ur.K=[null],++$r.ab,e(4>=$r.ab),Lr){case 0:case 1:ur.b=tr(ar,3)+2,Sr=sn(wr(ur.Ea,ur.b),wr(ur.nc,ur.b),0,$r,ur.K),ur.K=ur.K[0];break;case 3:var Mr,Pr=tr(ar,8)+1,Xr=16<Pr?0:4<Pr?1:2<Pr?2:3;if(gr[0]=wr(ur.Ea,Xr),ur.b=Xr,Mr=Sr=sn(Pr,1,0,$r,ur.K)){var Wr,cn=Pr,Jr=ur,Cn=1<<(8>>Jr.b),kn=ss(Cn);if(kn==null)Mr=0;else{var Rn=Jr.K[0],En=Jr.w;for(kn[0]=Jr.K[0][0],Wr=1;Wr<1*cn;++Wr)kn[Wr]=dr(Rn[En+Wr],kn[Wr-1]);for(;Wr<4*Cn;++Wr)kn[Wr]=0;Jr.K[0]=null,Jr.K[0]=kn,Mr=1}}Sr=Mr;break;case 2:break;default:e(0)}Ts=Sr}}if(Is=Is[0],Ms=Ms[0],Ts&&tr(Fs,1)&&!(Ts=1<=(fr=tr(Fs,4))&&11>=fr)){js.a=3;break e}var In;if(In=Ts)t:{var Ln,jn,Qn,yo=js,Zn=Is,Eo=Ms,Tn=fr,wo=hs,Ro=yo.m,ga=yo.s,so=[null],po=1,$o=0,Go=qp[Tn];s:for(;;){if(wo&&tr(Ro,1)){var ba=tr(Ro,3)+2,El=wr(Zn,ba),su=wr(Eo,ba),bu=El*su;if(!sn(El,su,0,yo,so))break s;for(so=so[0],ga.xc=ba,Ln=0;Ln<bu;++Ln){var Ml=so[Ln]>>8&65535;so[Ln]=Ml,Ml>=po&&(po=Ml+1)}}if(Ro.h)break s;for(jn=0;5>jn;++jn){var Gn=up[jn];!jn&&0<Tn&&(Gn+=1<<Tn),$o<Gn&&($o=Gn)}var Zm=rs(po*Go,As),Ep=po,bp=rs(Ep,$s);if(bp==null)var Nm=null;else e(65536>=Ep),Nm=bp;var Yu=ss($o);if(Nm==null||Yu==null||Zm==null){yo.a=1;break s}var wm=Zm;for(Ln=Qn=0;Ln<po;++Ln){var Fo=Nm[Ln],Nu=Fo.G,wu=Fo.H,Np=0,Rm=1,wp=0;for(jn=0;5>jn;++jn){Gn=up[jn],Nu[jn]=wm,wu[jn]=Qn,!jn&&0<Tn&&(Gn+=1<<Tn);n:{var Sm,ep=Gn,Cm=yo,Xu=Yu,lx=wm,cx=Qn,tp=0,Fl=Cm.m,ux=tr(Fl,1);if(ts(Xu,0,0,ep),ux){var dx=tr(Fl,1)+1,mx=tr(Fl,1),Rp=tr(Fl,mx==0?1:8);Xu[Rp]=1,dx==2&&(Xu[Rp=tr(Fl,8)]=1);var _m=1}else{var Sp=ss(19),Cp=tr(Fl,4)+4;if(19<Cp){Cm.a=3;var Am=0;break n}for(Sm=0;Sm<Cp;++Sm)Sp[Fp[Sm]]=tr(Fl,3);var sp=void 0,Qu=void 0,_p=Cm,px=Sp,km=ep,Ap=Xu,rp=0,Bl=_p.m,kp=8,Tp=rs(128,As);r:for(;bs(Tp,0,7,px,19);){if(tr(Bl,1)){var hx=2+2*tr(Bl,3);if((sp=2+tr(Bl,hx))>km)break r}else sp=km;for(Qu=0;Qu<km&&sp--;){sr(Bl);var Lp=Tp[0+(127&Vs(Bl))];Ws(Bl,Bl.u+Lp.g);var Ru=Lp.value;if(16>Ru)Ap[Qu++]=Ru,Ru!=0&&(kp=Ru);else{var xx=Ru==16,Pp=Ru-16,fx=zp[Pp],Ip=tr(Bl,Dp[Pp])+fx;if(Qu+Ip>km)break r;for(var gx=xx?kp:0;0<Ip--;)Ap[Qu++]=gx}}rp=1;break r}rp||(_p.a=3),_m=rp}(_m=_m&&!Fl.h)&&(tp=bs(lx,cx,8,Xu,ep)),_m&&tp!=0?Am=tp:(Cm.a=3,Am=0)}if(Am==0)break s;if(Rm&&Mp[jn]==1&&(Rm=wm[Qn].g==0),Np+=wm[Qn].g,Qn+=Am,3>=jn){var Zu,np=Yu[0];for(Zu=1;Zu<Gn;++Zu)Yu[Zu]>np&&(np=Yu[Zu]);wp+=np}}if(Fo.nd=Rm,Fo.Qb=0,Rm&&(Fo.qb=(Nu[3][wu[3]+0].value<<24|Nu[1][wu[1]+0].value<<16|Nu[2][wu[2]+0].value)>>>0,Np==0&&256>Nu[0][wu[0]+0].value&&(Fo.Qb=1,Fo.qb+=Nu[0][wu[0]+0].value<<8)),Fo.jc=!Fo.Qb&&6>wp,Fo.jc){var Tm,Nl=Fo;for(Tm=0;Tm<to;++Tm){var Ul=Tm,Hl=Nl.pd[Ul],Lm=Nl.G[0][Nl.H[0]+Ul];256<=Lm.value?(Hl.g=Lm.g+256,Hl.value=Lm.value):(Hl.g=0,Hl.value=0,Ul>>=Mn(Lm,8,Hl),Ul>>=Mn(Nl.G[1][Nl.H[1]+Ul],16,Hl),Ul>>=Mn(Nl.G[2][Nl.H[2]+Ul],0,Hl),Mn(Nl.G[3][Nl.H[3]+Ul],24,Hl))}}}ga.vc=so,ga.Wb=po,ga.Ya=Nm,ga.yc=Zm,In=1;break t}In=0}if(!(Ts=In)){js.a=3;break e}if(0<fr){if(Xs.ua=1<<fr,!Nr(Xs.Wa,fr)){js.a=1,Ts=0;break e}}else Xs.ua=0;var ip=js,$p=Is,jx=Ms,ap=ip.s,op=ap.xc;if(ip.c=$p,ip.i=jx,ap.md=wr($p,op),ap.wc=op==0?-1:(1<<op)-1,hs){js.xb=Yp;break e}if((ir=ss(Is*Ms))==null){js.a=1,Ts=0;break e}Ts=(Ts=Er(js,ir,0,Is,Ms,Ms,null))&&!Fs.h;break e}return Ts?(Rs!=null?Rs[0]=ir:(e(ir==null),e(hs)),js.$=0,hs||br(Xs)):br(Xs),Ts}function hn(as,ls){var hs=as.c*as.i,js=hs+ls+16*ls;return e(as.c<=ls),as.V=ss(js),as.V==null?(as.Ta=null,as.Ua=0,as.a=1,0):(as.Ta=as.V,as.Ua=as.Ba+hs+ls,1)}function _n(as,ls){var hs=as.C,js=ls-hs,Rs=as.V,Ts=as.Ba+as.c*hs;for(e(ls<=as.l.o);0<js;){var Is=16<js?16:js,Ms=as.l.ma,Fs=as.l.width,Xs=Fs*Is,ir=Ms.ca,fr=Ms.tb+Fs*hs,gr=as.Ta,mr=as.Ua;$a(as,Is,Rs,Ts),Kn(gr,mr,ir,fr,Xs),no(Ms,hs,hs+Is,ir,fr,Fs),js-=Is,Rs+=Is*as.c,hs+=Is}e(hs==ls),as.C=as.Ma=ls}function Pn(){this.ub=this.yd=this.td=this.Rb=0}function Nn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xo(){this.Fb=this.Bb=this.Cb=0,this.Zb=ss(4),this.Lb=ss(4)}function fo(){this.Yb=function(){var as=[];return function ls(hs,js,Rs){for(var Ts=Rs[js],Is=0;Is<Ts&&(hs.push(Rs.length>js+1?[]:0),!(Rs.length<js+1));Is++)ls(hs[Is],js+1,Rs)}(as,0,[3,11]),as}()}function wl(){this.jb=ss(3),this.Wc=ns([4,8],fo),this.Xc=ns([4,17],fo)}function Rl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new ss(4),this.od=new ss(4)}function Oo(){this.ld=this.La=this.dd=this.tc=0}function ru(){this.Na=this.la=0}function Su(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Vl(){this.ad=ss(384),this.Za=0,this.Ob=ss(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wo(){this.uc=this.M=this.Nb=0,this.wa=Array(new Oo),this.Y=0,this.ya=Array(new Vl),this.aa=0,this.l=new _o}function Co(){this.y=ss(16),this.f=ss(8),this.ea=ss(8)}function _i(){this.cb=this.a=0,this.sc="",this.m=new vr,this.Od=new Pn,this.Kc=new Nn,this.ed=new Rl,this.Qa=new xo,this.Ic=this.$c=this.Aa=0,this.D=new Wo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=rs(8,vr),this.ia=0,this.pb=rs(4,Su),this.Pa=new wl,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Co),this.Hd=0,this.rb=Array(new ru),this.sb=0,this.wa=Array(new Oo),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Vl),this.L=this.aa=0,this.gd=ns([4,2],Oo),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function _o(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Cu(){var as=new _i;return as!=null&&(as.a=0,as.sc="OK",as.cb=0,as.Xb=0,Ku||(Ku=Gl)),as}function Fn(as,ls,hs){return as.a==0&&(as.a=ls,as.sc=hs,as.cb=0),0}function nu(as,ls,hs){return 3<=hs&&as[ls+0]==157&&as[ls+1]==1&&as[ls+2]==42}function Ko(as,ls){if(as==null)return 0;if(as.a=0,as.sc="OK",ls==null)return Fn(as,2,"null VP8Io passed to VP8GetHeaders()");var hs=ls.data,js=ls.w,Rs=ls.ha;if(4>Rs)return Fn(as,7,"Truncated header.");var Ts=hs[js+0]|hs[js+1]<<8|hs[js+2]<<16,Is=as.Od;if(Is.Rb=!(1&Ts),Is.td=Ts>>1&7,Is.yd=Ts>>4&1,Is.ub=Ts>>5,3<Is.td)return Fn(as,3,"Incorrect keyframe parameters.");if(!Is.yd)return Fn(as,4,"Frame not displayable.");js+=3,Rs-=3;var Ms=as.Kc;if(Is.Rb){if(7>Rs)return Fn(as,7,"cannot parse picture header");if(!nu(hs,js,Rs))return Fn(as,3,"Bad code word");Ms.c=16383&(hs[js+4]<<8|hs[js+3]),Ms.Td=hs[js+4]>>6,Ms.i=16383&(hs[js+6]<<8|hs[js+5]),Ms.Ud=hs[js+6]>>6,js+=7,Rs-=7,as.za=Ms.c+15>>4,as.Ub=Ms.i+15>>4,ls.width=Ms.c,ls.height=Ms.i,ls.Da=0,ls.j=0,ls.v=0,ls.va=ls.width,ls.o=ls.height,ls.da=0,ls.ib=ls.width,ls.hb=ls.height,ls.U=ls.width,ls.T=ls.height,ts((Ts=as.Pa).jb,0,255,Ts.jb.length),e((Ts=as.Qa)!=null),Ts.Cb=0,Ts.Bb=0,Ts.Fb=1,ts(Ts.Zb,0,0,Ts.Zb.length),ts(Ts.Lb,0,0,Ts.Lb)}if(Is.ub>Rs)return Fn(as,7,"bad partition length");qs(Ts=as.m,hs,js,Is.ub),js+=Is.ub,Rs-=Is.ub,Is.Rb&&(Ms.Ld=pr(Ts),Ms.Kd=pr(Ts)),Ms=as.Qa;var Fs,Xs=as.Pa;if(e(Ts!=null),e(Ms!=null),Ms.Cb=pr(Ts),Ms.Cb){if(Ms.Bb=pr(Ts),pr(Ts)){for(Ms.Fb=pr(Ts),Fs=0;4>Fs;++Fs)Ms.Zb[Fs]=pr(Ts)?Us(Ts,7):0;for(Fs=0;4>Fs;++Fs)Ms.Lb[Fs]=pr(Ts)?Us(Ts,6):0}if(Ms.Bb)for(Fs=0;3>Fs;++Fs)Xs.jb[Fs]=pr(Ts)?Cs(Ts,8):255}else Ms.Bb=0;if(Ts.Ka)return Fn(as,3,"cannot parse segment header");if((Ms=as.ed).zd=pr(Ts),Ms.Tb=Cs(Ts,6),Ms.wb=Cs(Ts,3),Ms.Pc=pr(Ts),Ms.Pc&&pr(Ts)){for(Xs=0;4>Xs;++Xs)pr(Ts)&&(Ms.vd[Xs]=Us(Ts,6));for(Xs=0;4>Xs;++Xs)pr(Ts)&&(Ms.od[Xs]=Us(Ts,6))}if(as.L=Ms.Tb==0?0:Ms.zd?1:2,Ts.Ka)return Fn(as,3,"cannot parse filter header");var ir=Rs;if(Rs=Fs=js,js=Fs+ir,Ms=ir,as.Xb=(1<<Cs(as.m,2))-1,ir<3*(Xs=as.Xb))hs=7;else{for(Fs+=3*Xs,Ms-=3*Xs,ir=0;ir<Xs;++ir){var fr=hs[Rs+0]|hs[Rs+1]<<8|hs[Rs+2]<<16;fr>Ms&&(fr=Ms),qs(as.Jc[+ir],hs,Fs,fr),Fs+=fr,Ms-=fr,Rs+=3}qs(as.Jc[+Xs],hs,Fs,Ms),hs=Fs<js?0:5}if(hs!=0)return Fn(as,hs,"cannot parse partitions");for(hs=Cs(Fs=as.m,7),Rs=pr(Fs)?Us(Fs,4):0,js=pr(Fs)?Us(Fs,4):0,Ms=pr(Fs)?Us(Fs,4):0,Xs=pr(Fs)?Us(Fs,4):0,Fs=pr(Fs)?Us(Fs,4):0,ir=as.Qa,fr=0;4>fr;++fr){if(ir.Cb){var gr=ir.Zb[fr];ir.Fb||(gr+=hs)}else{if(0<fr){as.pb[fr]=as.pb[0];continue}gr=hs}var mr=as.pb[fr];mr.Sc[0]=Ym[bo(gr+Rs,127)],mr.Sc[1]=Xm[bo(gr+0,127)],mr.Eb[0]=2*Ym[bo(gr+js,127)],mr.Eb[1]=101581*Xm[bo(gr+Ms,127)]>>16,8>mr.Eb[1]&&(mr.Eb[1]=8),mr.Qc[0]=Ym[bo(gr+Xs,117)],mr.Qc[1]=Xm[bo(gr+Fs,127)],mr.lc=gr+Fs}if(!Is.Rb)return Fn(as,4,"Not a key frame.");for(pr(Ts),Is=as.Pa,hs=0;4>hs;++hs){for(Rs=0;8>Rs;++Rs)for(js=0;3>js;++js)for(Ms=0;11>Ms;++Ms)Xs=xr(Ts,Kp[hs][Rs][js][Ms])?Cs(Ts,8):Gp[hs][Rs][js][Ms],Is.Wc[hs][Rs].Yb[js][Ms]=Xs;for(Rs=0;17>Rs;++Rs)Is.Xc[hs][Rs]=Is.Wc[hs][Jp[Rs]]}return as.kc=pr(Ts),as.kc&&(as.Bd=Cs(Ts,8)),as.cb=1}function Gl(as,ls,hs,js,Rs,Ts,Is){var Ms=ls[Rs].Yb[hs];for(hs=0;16>Rs;++Rs){if(!xr(as,Ms[hs+0]))return Rs;for(;!xr(as,Ms[hs+1]);)if(Ms=ls[++Rs].Yb[0],hs=0,Rs==16)return 16;var Fs=ls[Rs+1].Yb;if(xr(as,Ms[hs+2])){var Xs=as,ir=0;if(xr(Xs,(gr=Ms)[(fr=hs)+3]))if(xr(Xs,gr[fr+6])){for(Ms=0,fr=2*(ir=xr(Xs,gr[fr+8]))+(gr=xr(Xs,gr[fr+9+ir])),ir=0,gr=Hp[fr];gr[Ms];++Ms)ir+=ir+xr(Xs,gr[Ms]);ir+=3+(8<<fr)}else xr(Xs,gr[fr+7])?(ir=7+2*xr(Xs,165),ir+=xr(Xs,145)):ir=5+xr(Xs,159);else ir=xr(Xs,gr[fr+4])?3+xr(Xs,gr[fr+5]):2;Ms=Fs[2]}else ir=1,Ms=Fs[1];Fs=Is+Vp[Rs],0>(Xs=as).b&&nr(Xs);var fr,gr=Xs.b,mr=(fr=Xs.Ca>>1)-(Xs.I>>gr)>>31;--Xs.b,Xs.Ca+=mr,Xs.Ca|=1,Xs.I-=(fr+1&mr)<<gr,Ts[Fs]=((ir^mr)-mr)*js[(0<Rs)+0]}return 16}function Sl(as){var ls=as.rb[as.sb-1];ls.la=0,ls.Na=0,ts(as.zc,0,0,as.zc.length),as.ja=0}function iu(as,ls){if(as==null)return 0;if(ls==null)return Fn(as,2,"NULL VP8Io parameter in VP8Decode().");if(!as.cb&&!Ko(as,ls))return 0;if(e(as.cb),ls.ac==null||ls.ac(ls)){ls.ob&&(as.L=0);var hs=bm[as.L];if(as.L==2?(as.yb=0,as.zb=0):(as.yb=ls.v-hs>>4,as.zb=ls.j-hs>>4,0>as.yb&&(as.yb=0),0>as.zb&&(as.zb=0)),as.Va=ls.o+15+hs>>4,as.Hb=ls.va+15+hs>>4,as.Hb>as.za&&(as.Hb=as.za),as.Va>as.Ub&&(as.Va=as.Ub),0<as.L){var js=as.ed;for(hs=0;4>hs;++hs){var Rs;if(as.Qa.Cb){var Ts=as.Qa.Lb[hs];as.Qa.Fb||(Ts+=js.Tb)}else Ts=js.Tb;for(Rs=0;1>=Rs;++Rs){var Is=as.gd[hs][Rs],Ms=Ts;if(js.Pc&&(Ms+=js.vd[0],Rs&&(Ms+=js.od[0])),0<(Ms=0>Ms?0:63<Ms?63:Ms)){var Fs=Ms;0<js.wb&&(Fs=4<js.wb?Fs>>2:Fs>>1)>9-js.wb&&(Fs=9-js.wb),1>Fs&&(Fs=1),Is.dd=Fs,Is.tc=2*Ms+Fs,Is.ld=40<=Ms?2:15<=Ms?1:0}else Is.tc=0;Is.La=Rs}}}hs=0}else Fn(as,6,"Frame setup failed"),hs=as.a;if(hs=hs==0){if(hs){as.$c=0,0<as.Aa||(as.Ic=ox);e:{hs=as.Ic,js=4*(Fs=as.za);var Xs=32*Fs,ir=Fs+1,fr=0<as.L?Fs*(0<as.Aa?2:1):0,gr=(as.Aa==2?2:1)*Fs;if((Is=js+832+(Rs=3*(16*hs+bm[as.L])/2*Xs)+(Ts=as.Fa!=null&&0<as.Fa.length?as.Kc.c*as.Kc.i:0))!=Is)hs=0;else{if(Is>as.Vb){if(as.Vb=0,as.Ec=ss(Is),as.Fc=0,as.Ec==null){hs=Fn(as,1,"no memory during frame initialization.");break e}as.Vb=Is}Is=as.Ec,Ms=as.Fc,as.Ac=Is,as.Bc=Ms,Ms+=js,as.Gd=rs(Xs,Co),as.Hd=0,as.rb=rs(ir+1,ru),as.sb=1,as.wa=fr?rs(fr,Oo):null,as.Y=0,as.D.Nb=0,as.D.wa=as.wa,as.D.Y=as.Y,0<as.Aa&&(as.D.Y+=Fs),e(!0),as.oc=Is,as.pc=Ms,Ms+=832,as.ya=rs(gr,Vl),as.aa=0,as.D.ya=as.ya,as.D.aa=as.aa,as.Aa==2&&(as.D.aa+=Fs),as.R=16*Fs,as.B=8*Fs,Fs=(Xs=bm[as.L])*as.R,Xs=Xs/2*as.B,as.sa=Is,as.ta=Ms+Fs,as.qa=as.sa,as.ra=as.ta+16*hs*as.R+Xs,as.Ha=as.qa,as.Ia=as.ra+8*hs*as.B+Xs,as.$c=0,Ms+=Rs,as.mb=Ts?Is:null,as.nb=Ts?Ms:null,e(Ms+Ts<=as.Fc+as.Vb),Sl(as),ts(as.Ac,as.Bc,0,js),hs=1}}if(hs){if(ls.ka=0,ls.y=as.sa,ls.O=as.ta,ls.f=as.qa,ls.N=as.ra,ls.ea=as.Ha,ls.Vd=as.Ia,ls.fa=as.R,ls.Rc=as.B,ls.F=null,ls.J=0,!pm){for(hs=-255;255>=hs;++hs)na[255+hs]=0>hs?-hs:hs;for(hs=-1020;1020>=hs;++hs)xl[1020+hs]=-128>hs?-128:127<hs?127:hs;for(hs=-112;112>=hs;++hs)Wu[112+hs]=-16>hs?-16:15<hs?15:hs;for(hs=-255;510>=hs;++hs)Eu[255+hs]=0>hs?0:255<hs?255:hs;pm=1}ju=on,Zo=Js,Hu=Rr,mo=Br,ko=xn,Wn=Wl,vu=Tu,mm=Yl,Vu=qm,Zl=Lu,_c=Bm,$l=cu,eu=Pu,yu=am,tu=im,Ol=Ho,Gu=Yo,To=Fm,Mo[0]=Uo,Mo[1]=yn,Mo[2]=Im,Mo[3]=$m,Mo[4]=em,Mo[5]=ou,Mo[6]=tm,Mo[7]=_u,Mo[8]=Dm,Mo[9]=Om,Dl[0]=au,Dl[1]=qo,Dl[2]=wn,Dl[3]=co,Dl[4]=io,Dl[5]=Pm,Dl[6]=_d,yl[0]=Al,yl[1]=Bn,yl[2]=zm,yl[3]=Au,yl[4]=Jl,yl[5]=Mm,yl[6]=ku,hs=1}else hs=0}hs&&(hs=function(mr,$r){for(mr.M=0;mr.M<mr.Va;++mr.M){var Sr,ar=mr.Jc[mr.M&mr.Xb],ur=mr.m,Lr=mr;for(Sr=0;Sr<Lr.za;++Sr){var Mr=ur,Pr=Lr,Xr=Pr.Ac,Wr=Pr.Bc+4*Sr,cn=Pr.zc,Jr=Pr.ya[Pr.aa+Sr];if(Pr.Qa.Bb?Jr.$b=xr(Mr,Pr.Pa.jb[0])?2+xr(Mr,Pr.Pa.jb[2]):xr(Mr,Pr.Pa.jb[1]):Jr.$b=0,Pr.kc&&(Jr.Ad=xr(Mr,Pr.Bd)),Jr.Za=!xr(Mr,145)+0,Jr.Za){var Cn=Jr.Ob,kn=0;for(Pr=0;4>Pr;++Pr){var Rn,En=cn[0+Pr];for(Rn=0;4>Rn;++Rn){En=Wp[Xr[Wr+Rn]][En];for(var In=dp[xr(Mr,En[0])];0<In;)In=dp[2*In+xr(Mr,En[In])];En=-In,Xr[Wr+Rn]=En}es(Cn,kn,Xr,Wr,4),kn+=4,cn[0+Pr]=En}}else En=xr(Mr,156)?xr(Mr,128)?1:3:xr(Mr,163)?2:0,Jr.Ob[0]=En,ts(Xr,Wr,En,4),ts(cn,0,En,4);Jr.Dd=xr(Mr,142)?xr(Mr,114)?xr(Mr,183)?1:3:2:0}if(Lr.m.Ka)return Fn(mr,7,"Premature end-of-partition0 encountered.");for(;mr.ja<mr.za;++mr.ja){if(Lr=ar,Mr=(ur=mr).rb[ur.sb-1],Xr=ur.rb[ur.sb+ur.ja],Sr=ur.ya[ur.aa+ur.ja],Wr=ur.kc?Sr.Ad:0)Mr.la=Xr.la=0,Sr.Za||(Mr.Na=Xr.Na=0),Sr.Hc=0,Sr.Gc=0,Sr.ia=0;else{var Ln,jn;if(Mr=Xr,Xr=Lr,Wr=ur.Pa.Xc,cn=ur.ya[ur.aa+ur.ja],Jr=ur.pb[cn.$b],Pr=cn.ad,Cn=0,kn=ur.rb[ur.sb-1],En=Rn=0,ts(Pr,Cn,0,384),cn.Za)var Qn=0,yo=Wr[3];else{In=ss(16);var Zn=Mr.Na+kn.Na;if(Zn=Ku(Xr,Wr[1],Zn,Jr.Eb,0,In,0),Mr.Na=kn.Na=(0<Zn)+0,1<Zn)ju(In,0,Pr,Cn);else{var Eo=In[0]+3>>3;for(In=0;256>In;In+=16)Pr[Cn+In]=Eo}Qn=1,yo=Wr[0]}var Tn=15&Mr.la,wo=15&kn.la;for(In=0;4>In;++In){var Ro=1&wo;for(Eo=jn=0;4>Eo;++Eo)Tn=Tn>>1|(Ro=(Zn=Ku(Xr,yo,Zn=Ro+(1&Tn),Jr.Sc,Qn,Pr,Cn))>Qn)<<7,jn=jn<<2|(3<Zn?3:1<Zn?2:Pr[Cn+0]!=0),Cn+=16;Tn>>=4,wo=wo>>1|Ro<<7,Rn=(Rn<<8|jn)>>>0}for(yo=Tn,Qn=wo>>4,Ln=0;4>Ln;Ln+=2){for(jn=0,Tn=Mr.la>>4+Ln,wo=kn.la>>4+Ln,In=0;2>In;++In){for(Ro=1&wo,Eo=0;2>Eo;++Eo)Zn=Ro+(1&Tn),Tn=Tn>>1|(Ro=0<(Zn=Ku(Xr,Wr[2],Zn,Jr.Qc,0,Pr,Cn)))<<3,jn=jn<<2|(3<Zn?3:1<Zn?2:Pr[Cn+0]!=0),Cn+=16;Tn>>=2,wo=wo>>1|Ro<<5}En|=jn<<4*Ln,yo|=Tn<<4<<Ln,Qn|=(240&wo)<<Ln}Mr.la=yo,kn.la=Qn,cn.Hc=Rn,cn.Gc=En,cn.ia=43690&En?0:Jr.ia,Wr=!(Rn|En)}if(0<ur.L&&(ur.wa[ur.Y+ur.ja]=ur.gd[Sr.$b][Sr.Za],ur.wa[ur.Y+ur.ja].La|=!Wr),Lr.Ka)return Fn(mr,7,"Premature end-of-file encountered.")}if(Sl(mr),ur=$r,Lr=1,Sr=(ar=mr).D,Mr=0<ar.L&&ar.M>=ar.zb&&ar.M<=ar.Va,ar.Aa==0)e:{if(Sr.M=ar.M,Sr.uc=Mr,Mu(ar,Sr),Lr=1,Sr=(jn=ar.D).Nb,Mr=(En=bm[ar.L])*ar.R,Xr=En/2*ar.B,In=16*Sr*ar.R,Eo=8*Sr*ar.B,Wr=ar.sa,cn=ar.ta-Mr+In,Jr=ar.qa,Pr=ar.ra-Xr+Eo,Cn=ar.Ha,kn=ar.Ia-Xr+Eo,wo=(Tn=jn.M)==0,Rn=Tn>=ar.Va-1,ar.Aa==2&&Mu(ar,jn),jn.uc)for(Ro=(Zn=ar).D.M,e(Zn.D.uc),jn=Zn.yb;jn<Zn.Hb;++jn){Qn=jn,yo=Ro;var ga=(so=(Gn=Zn).D).Nb;Ln=Gn.R;var so=so.wa[so.Y+Qn],po=Gn.sa,$o=Gn.ta+16*ga*Ln+16*Qn,Go=so.dd,ba=so.tc;if(ba!=0)if(e(3<=ba),Gn.L==1)0<Qn&&Ol(po,$o,Ln,ba+4),so.La&&To(po,$o,Ln,ba),0<yo&&tu(po,$o,Ln,ba+4),so.La&&Gu(po,$o,Ln,ba);else{var El=Gn.B,su=Gn.qa,bu=Gn.ra+8*ga*El+8*Qn,Ml=Gn.Ha,Gn=Gn.Ia+8*ga*El+8*Qn;ga=so.ld,0<Qn&&(mm(po,$o,Ln,ba+4,Go,ga),Zl(su,bu,Ml,Gn,El,ba+4,Go,ga)),so.La&&($l(po,$o,Ln,ba,Go,ga),yu(su,bu,Ml,Gn,El,ba,Go,ga)),0<yo&&(vu(po,$o,Ln,ba+4,Go,ga),Vu(su,bu,Ml,Gn,El,ba+4,Go,ga)),so.La&&(_c(po,$o,Ln,ba,Go,ga),eu(su,bu,Ml,Gn,El,ba,Go,ga))}}if(ar.ia&&alert("todo:DitherRow"),ur.put!=null){if(jn=16*Tn,Tn=16*(Tn+1),wo?(ur.y=ar.sa,ur.O=ar.ta+In,ur.f=ar.qa,ur.N=ar.ra+Eo,ur.ea=ar.Ha,ur.W=ar.Ia+Eo):(jn-=En,ur.y=Wr,ur.O=cn,ur.f=Jr,ur.N=Pr,ur.ea=Cn,ur.W=kn),Rn||(Tn-=En),Tn>ur.o&&(Tn=ur.o),ur.F=null,ur.J=null,ar.Fa!=null&&0<ar.Fa.length&&jn<Tn&&(ur.J=Du(ar,ur,jn,Tn-jn),ur.F=ar.mb,ur.F==null&&ur.F.length==0)){Lr=Fn(ar,3,"Could not decode alpha data.");break e}jn<ur.j&&(En=ur.j-jn,jn=ur.j,e(!(1&En)),ur.O+=ar.R*En,ur.N+=ar.B*(En>>1),ur.W+=ar.B*(En>>1),ur.F!=null&&(ur.J+=ur.width*En)),jn<Tn&&(ur.O+=ur.v,ur.N+=ur.v>>1,ur.W+=ur.v>>1,ur.F!=null&&(ur.J+=ur.v),ur.ka=jn-ur.j,ur.U=ur.va-ur.v,ur.T=Tn-jn,Lr=ur.put(ur))}Sr+1!=ar.Ic||Rn||(es(ar.sa,ar.ta-Mr,Wr,cn+16*ar.R,Mr),es(ar.qa,ar.ra-Xr,Jr,Pr+8*ar.B,Xr),es(ar.Ha,ar.Ia-Xr,Cn,kn+8*ar.B,Xr))}if(!Lr)return Fn(mr,6,"Output aborted.")}return 1}(as,ls)),ls.bc!=null&&ls.bc(ls),hs&=1}return hs?(as.cb=0,hs):0}function go(as,ls,hs,js,Rs){Rs=as[ls+hs+32*js]+(Rs>>3),as[ls+hs+32*js]=-256&Rs?0>Rs?0:255:Rs}function Jo(as,ls,hs,js,Rs,Ts){go(as,ls,0,hs,js+Rs),go(as,ls,1,hs,js+Ts),go(as,ls,2,hs,js-Ts),go(as,ls,3,hs,js-Rs)}function eo(as){return(20091*as>>16)+as}function Cl(as,ls,hs,js){var Rs,Ts=0,Is=ss(16);for(Rs=0;4>Rs;++Rs){var Ms=as[ls+0]+as[ls+8],Fs=as[ls+0]-as[ls+8],Xs=(35468*as[ls+4]>>16)-eo(as[ls+12]),ir=eo(as[ls+4])+(35468*as[ls+12]>>16);Is[Ts+0]=Ms+ir,Is[Ts+1]=Fs+Xs,Is[Ts+2]=Fs-Xs,Is[Ts+3]=Ms-ir,Ts+=4,ls++}for(Rs=Ts=0;4>Rs;++Rs)Ms=(as=Is[Ts+0]+4)+Is[Ts+8],Fs=as-Is[Ts+8],Xs=(35468*Is[Ts+4]>>16)-eo(Is[Ts+12]),go(hs,js,0,0,Ms+(ir=eo(Is[Ts+4])+(35468*Is[Ts+12]>>16))),go(hs,js,1,0,Fs+Xs),go(hs,js,2,0,Fs-Xs),go(hs,js,3,0,Ms-ir),Ts++,js+=32}function Wl(as,ls,hs,js){var Rs=as[ls+0]+4,Ts=35468*as[ls+4]>>16,Is=eo(as[ls+4]),Ms=35468*as[ls+1]>>16;Jo(hs,js,0,Rs+Is,as=eo(as[ls+1]),Ms),Jo(hs,js,1,Rs+Ts,as,Ms),Jo(hs,js,2,Rs-Ts,as,Ms),Jo(hs,js,3,Rs-Is,as,Ms)}function Js(as,ls,hs,js,Rs){Cl(as,ls,hs,js),Rs&&Cl(as,ls+16,hs,js+4)}function Rr(as,ls,hs,js){Zo(as,ls+0,hs,js,1),Zo(as,ls+32,hs,js+128,1)}function Br(as,ls,hs,js){var Rs;for(as=as[ls+0]+4,Rs=0;4>Rs;++Rs)for(ls=0;4>ls;++ls)go(hs,js,ls,Rs,as)}function xn(as,ls,hs,js){as[ls+0]&&mo(as,ls+0,hs,js),as[ls+16]&&mo(as,ls+16,hs,js+4),as[ls+32]&&mo(as,ls+32,hs,js+128),as[ls+48]&&mo(as,ls+48,hs,js+128+4)}function on(as,ls,hs,js){var Rs,Ts=ss(16);for(Rs=0;4>Rs;++Rs){var Is=as[ls+0+Rs]+as[ls+12+Rs],Ms=as[ls+4+Rs]+as[ls+8+Rs],Fs=as[ls+4+Rs]-as[ls+8+Rs],Xs=as[ls+0+Rs]-as[ls+12+Rs];Ts[0+Rs]=Is+Ms,Ts[8+Rs]=Is-Ms,Ts[4+Rs]=Xs+Fs,Ts[12+Rs]=Xs-Fs}for(Rs=0;4>Rs;++Rs)Is=(as=Ts[0+4*Rs]+3)+Ts[3+4*Rs],Ms=Ts[1+4*Rs]+Ts[2+4*Rs],Fs=Ts[1+4*Rs]-Ts[2+4*Rs],Xs=as-Ts[3+4*Rs],hs[js+0]=Is+Ms>>3,hs[js+16]=Xs+Fs>>3,hs[js+32]=Is-Ms>>3,hs[js+48]=Xs-Fs>>3,js+=64}function mn(as,ls,hs){var js,Rs=ls-32,Ts=No,Is=255-as[Rs-1];for(js=0;js<hs;++js){var Ms,Fs=Ts,Xs=Is+as[ls-1];for(Ms=0;Ms<hs;++Ms)as[ls+Ms]=Fs[Xs+as[Rs+Ms]];ls+=32}}function yn(as,ls){mn(as,ls,4)}function Bn(as,ls){mn(as,ls,8)}function qo(as,ls){mn(as,ls,16)}function wn(as,ls){var hs;for(hs=0;16>hs;++hs)es(as,ls+32*hs,as,ls-32,16)}function co(as,ls){var hs;for(hs=16;0<hs;--hs)ts(as,ls,as[ls-1],16),ls+=32}function _l(as,ls,hs){var js;for(js=0;16>js;++js)ts(ls,hs+32*js,as,16)}function au(as,ls){var hs,js=16;for(hs=0;16>hs;++hs)js+=as[ls-1+32*hs]+as[ls+hs-32];_l(js>>5,as,ls)}function io(as,ls){var hs,js=8;for(hs=0;16>hs;++hs)js+=as[ls-1+32*hs];_l(js>>4,as,ls)}function Pm(as,ls){var hs,js=8;for(hs=0;16>hs;++hs)js+=as[ls+hs-32];_l(js>>4,as,ls)}function _d(as,ls){_l(128,as,ls)}function pn(as,ls,hs){return as+2*ls+hs+2>>2}function Im(as,ls){var hs,js=ls-32;for(js=new Uint8Array([pn(as[js-1],as[js+0],as[js+1]),pn(as[js+0],as[js+1],as[js+2]),pn(as[js+1],as[js+2],as[js+3]),pn(as[js+2],as[js+3],as[js+4])]),hs=0;4>hs;++hs)es(as,ls+32*hs,js,0,js.length)}function $m(as,ls){var hs=as[ls-1],js=as[ls-1+32],Rs=as[ls-1+64],Ts=as[ls-1+96];Tr(as,ls+0,16843009*pn(as[ls-1-32],hs,js)),Tr(as,ls+32,16843009*pn(hs,js,Rs)),Tr(as,ls+64,16843009*pn(js,Rs,Ts)),Tr(as,ls+96,16843009*pn(Rs,Ts,Ts))}function Uo(as,ls){var hs,js=4;for(hs=0;4>hs;++hs)js+=as[ls+hs-32]+as[ls-1+32*hs];for(js>>=3,hs=0;4>hs;++hs)ts(as,ls+32*hs,js,4)}function em(as,ls){var hs=as[ls-1+0],js=as[ls-1+32],Rs=as[ls-1+64],Ts=as[ls-1-32],Is=as[ls+0-32],Ms=as[ls+1-32],Fs=as[ls+2-32],Xs=as[ls+3-32];as[ls+0+96]=pn(js,Rs,as[ls-1+96]),as[ls+1+96]=as[ls+0+64]=pn(hs,js,Rs),as[ls+2+96]=as[ls+1+64]=as[ls+0+32]=pn(Ts,hs,js),as[ls+3+96]=as[ls+2+64]=as[ls+1+32]=as[ls+0+0]=pn(Is,Ts,hs),as[ls+3+64]=as[ls+2+32]=as[ls+1+0]=pn(Ms,Is,Ts),as[ls+3+32]=as[ls+2+0]=pn(Fs,Ms,Is),as[ls+3+0]=pn(Xs,Fs,Ms)}function tm(as,ls){var hs=as[ls+1-32],js=as[ls+2-32],Rs=as[ls+3-32],Ts=as[ls+4-32],Is=as[ls+5-32],Ms=as[ls+6-32],Fs=as[ls+7-32];as[ls+0+0]=pn(as[ls+0-32],hs,js),as[ls+1+0]=as[ls+0+32]=pn(hs,js,Rs),as[ls+2+0]=as[ls+1+32]=as[ls+0+64]=pn(js,Rs,Ts),as[ls+3+0]=as[ls+2+32]=as[ls+1+64]=as[ls+0+96]=pn(Rs,Ts,Is),as[ls+3+32]=as[ls+2+64]=as[ls+1+96]=pn(Ts,Is,Ms),as[ls+3+64]=as[ls+2+96]=pn(Is,Ms,Fs),as[ls+3+96]=pn(Ms,Fs,Fs)}function ou(as,ls){var hs=as[ls-1+0],js=as[ls-1+32],Rs=as[ls-1+64],Ts=as[ls-1-32],Is=as[ls+0-32],Ms=as[ls+1-32],Fs=as[ls+2-32],Xs=as[ls+3-32];as[ls+0+0]=as[ls+1+64]=Ts+Is+1>>1,as[ls+1+0]=as[ls+2+64]=Is+Ms+1>>1,as[ls+2+0]=as[ls+3+64]=Ms+Fs+1>>1,as[ls+3+0]=Fs+Xs+1>>1,as[ls+0+96]=pn(Rs,js,hs),as[ls+0+64]=pn(js,hs,Ts),as[ls+0+32]=as[ls+1+96]=pn(hs,Ts,Is),as[ls+1+32]=as[ls+2+96]=pn(Ts,Is,Ms),as[ls+2+32]=as[ls+3+96]=pn(Is,Ms,Fs),as[ls+3+32]=pn(Ms,Fs,Xs)}function _u(as,ls){var hs=as[ls+0-32],js=as[ls+1-32],Rs=as[ls+2-32],Ts=as[ls+3-32],Is=as[ls+4-32],Ms=as[ls+5-32],Fs=as[ls+6-32],Xs=as[ls+7-32];as[ls+0+0]=hs+js+1>>1,as[ls+1+0]=as[ls+0+64]=js+Rs+1>>1,as[ls+2+0]=as[ls+1+64]=Rs+Ts+1>>1,as[ls+3+0]=as[ls+2+64]=Ts+Is+1>>1,as[ls+0+32]=pn(hs,js,Rs),as[ls+1+32]=as[ls+0+96]=pn(js,Rs,Ts),as[ls+2+32]=as[ls+1+96]=pn(Rs,Ts,Is),as[ls+3+32]=as[ls+2+96]=pn(Ts,Is,Ms),as[ls+3+64]=pn(Is,Ms,Fs),as[ls+3+96]=pn(Ms,Fs,Xs)}function Om(as,ls){var hs=as[ls-1+0],js=as[ls-1+32],Rs=as[ls-1+64],Ts=as[ls-1+96];as[ls+0+0]=hs+js+1>>1,as[ls+2+0]=as[ls+0+32]=js+Rs+1>>1,as[ls+2+32]=as[ls+0+64]=Rs+Ts+1>>1,as[ls+1+0]=pn(hs,js,Rs),as[ls+3+0]=as[ls+1+32]=pn(js,Rs,Ts),as[ls+3+32]=as[ls+1+64]=pn(Rs,Ts,Ts),as[ls+3+64]=as[ls+2+64]=as[ls+0+96]=as[ls+1+96]=as[ls+2+96]=as[ls+3+96]=Ts}function Dm(as,ls){var hs=as[ls-1+0],js=as[ls-1+32],Rs=as[ls-1+64],Ts=as[ls-1+96],Is=as[ls-1-32],Ms=as[ls+0-32],Fs=as[ls+1-32],Xs=as[ls+2-32];as[ls+0+0]=as[ls+2+32]=hs+Is+1>>1,as[ls+0+32]=as[ls+2+64]=js+hs+1>>1,as[ls+0+64]=as[ls+2+96]=Rs+js+1>>1,as[ls+0+96]=Ts+Rs+1>>1,as[ls+3+0]=pn(Ms,Fs,Xs),as[ls+2+0]=pn(Is,Ms,Fs),as[ls+1+0]=as[ls+3+32]=pn(hs,Is,Ms),as[ls+1+32]=as[ls+3+64]=pn(js,hs,Is),as[ls+1+64]=as[ls+3+96]=pn(Rs,js,hs),as[ls+1+96]=pn(Ts,Rs,js)}function zm(as,ls){var hs;for(hs=0;8>hs;++hs)es(as,ls+32*hs,as,ls-32,8)}function Au(as,ls){var hs;for(hs=0;8>hs;++hs)ts(as,ls,as[ls-1],8),ls+=32}function Kl(as,ls,hs){var js;for(js=0;8>js;++js)ts(ls,hs+32*js,as,8)}function Al(as,ls){var hs,js=8;for(hs=0;8>hs;++hs)js+=as[ls+hs-32]+as[ls-1+32*hs];Kl(js>>4,as,ls)}function Mm(as,ls){var hs,js=4;for(hs=0;8>hs;++hs)js+=as[ls+hs-32];Kl(js>>3,as,ls)}function Jl(as,ls){var hs,js=4;for(hs=0;8>hs;++hs)js+=as[ls-1+32*hs];Kl(js>>3,as,ls)}function ku(as,ls){Kl(128,as,ls)}function lu(as,ls,hs){var js=as[ls-hs],Rs=as[ls+0],Ts=3*(Rs-js)+Vm[1020+as[ls-2*hs]-as[ls+hs]],Is=hm[112+(Ts+4>>3)];as[ls-hs]=No[255+js+hm[112+(Ts+3>>3)]],as[ls+0]=No[255+Rs-Is]}function sm(as,ls,hs,js){var Rs=as[ls+0],Ts=as[ls+hs];return Po[255+as[ls-2*hs]-as[ls-hs]]>js||Po[255+Ts-Rs]>js}function rm(as,ls,hs,js){return 4*Po[255+as[ls-hs]-as[ls+0]]+Po[255+as[ls-2*hs]-as[ls+hs]]<=js}function nm(as,ls,hs,js,Rs){var Ts=as[ls-3*hs],Is=as[ls-2*hs],Ms=as[ls-hs],Fs=as[ls+0],Xs=as[ls+hs],ir=as[ls+2*hs],fr=as[ls+3*hs];return 4*Po[255+Ms-Fs]+Po[255+Is-Xs]>js?0:Po[255+as[ls-4*hs]-Ts]<=Rs&&Po[255+Ts-Is]<=Rs&&Po[255+Is-Ms]<=Rs&&Po[255+fr-ir]<=Rs&&Po[255+ir-Xs]<=Rs&&Po[255+Xs-Fs]<=Rs}function im(as,ls,hs,js){var Rs=2*js+1;for(js=0;16>js;++js)rm(as,ls+js,hs,Rs)&&lu(as,ls+js,hs)}function Ho(as,ls,hs,js){var Rs=2*js+1;for(js=0;16>js;++js)rm(as,ls+js*hs,1,Rs)&&lu(as,ls+js*hs,1)}function Yo(as,ls,hs,js){var Rs;for(Rs=3;0<Rs;--Rs)im(as,ls+=4*hs,hs,js)}function Fm(as,ls,hs,js){var Rs;for(Rs=3;0<Rs;--Rs)Ho(as,ls+=4,hs,js)}function Tl(as,ls,hs,js,Rs,Ts,Is,Ms){for(Ts=2*Ts+1;0<Rs--;){if(nm(as,ls,hs,Ts,Is))if(sm(as,ls,hs,Ms))lu(as,ls,hs);else{var Fs=as,Xs=ls,ir=hs,fr=Fs[Xs-2*ir],gr=Fs[Xs-ir],mr=Fs[Xs+0],$r=Fs[Xs+ir],Sr=Fs[Xs+2*ir],ar=27*(Lr=Vm[1020+3*(mr-gr)+Vm[1020+fr-$r]])+63>>7,ur=18*Lr+63>>7,Lr=9*Lr+63>>7;Fs[Xs-3*ir]=No[255+Fs[Xs-3*ir]+Lr],Fs[Xs-2*ir]=No[255+fr+ur],Fs[Xs-ir]=No[255+gr+ar],Fs[Xs+0]=No[255+mr-ar],Fs[Xs+ir]=No[255+$r-ur],Fs[Xs+2*ir]=No[255+Sr-Lr]}ls+=js}}function Do(as,ls,hs,js,Rs,Ts,Is,Ms){for(Ts=2*Ts+1;0<Rs--;){if(nm(as,ls,hs,Ts,Is))if(sm(as,ls,hs,Ms))lu(as,ls,hs);else{var Fs=as,Xs=ls,ir=hs,fr=Fs[Xs-ir],gr=Fs[Xs+0],mr=Fs[Xs+ir],$r=hm[112+((Sr=3*(gr-fr))+4>>3)],Sr=hm[112+(Sr+3>>3)],ar=$r+1>>1;Fs[Xs-2*ir]=No[255+Fs[Xs-2*ir]+ar],Fs[Xs-ir]=No[255+fr+Sr],Fs[Xs+0]=No[255+gr-$r],Fs[Xs+ir]=No[255+mr-ar]}ls+=js}}function Tu(as,ls,hs,js,Rs,Ts){Tl(as,ls,hs,1,16,js,Rs,Ts)}function Yl(as,ls,hs,js,Rs,Ts){Tl(as,ls,1,hs,16,js,Rs,Ts)}function Bm(as,ls,hs,js,Rs,Ts){var Is;for(Is=3;0<Is;--Is)Do(as,ls+=4*hs,hs,1,16,js,Rs,Ts)}function cu(as,ls,hs,js,Rs,Ts){var Is;for(Is=3;0<Is;--Is)Do(as,ls+=4,1,hs,16,js,Rs,Ts)}function qm(as,ls,hs,js,Rs,Ts,Is,Ms){Tl(as,ls,Rs,1,8,Ts,Is,Ms),Tl(hs,js,Rs,1,8,Ts,Is,Ms)}function Lu(as,ls,hs,js,Rs,Ts,Is,Ms){Tl(as,ls,1,Rs,8,Ts,Is,Ms),Tl(hs,js,1,Rs,8,Ts,Is,Ms)}function Pu(as,ls,hs,js,Rs,Ts,Is,Ms){Do(as,ls+4*Rs,Rs,1,8,Ts,Is,Ms),Do(hs,js+4*Rs,Rs,1,8,Ts,Is,Ms)}function am(as,ls,hs,js,Rs,Ts,Is,Ms){Do(as,ls+4,1,Rs,8,Ts,Is,Ms),Do(hs,js+4,1,Rs,8,Ts,Is,Ms)}function uu(){this.ba=new Hn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new An,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Iu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function $u(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function om(){this.ua=0,this.Wa=new Ns,this.vb=new Ns,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $s,this.yc=new As}function Um(){this.xb=this.a=0,this.l=new _o,this.ca=new Hn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ws,this.Pb=0,this.wd=new ws,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new om,this.ab=0,this.gc=rs(4,$u),this.Oc=0}function du(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new _o,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Xl(as,ls,hs,js,Rs,Ts,Is){for(as=as==null?0:as[ls+0],ls=0;ls<Is;++ls)Rs[Ts+ls]=as+hs[js+ls]&255,as=Rs[Ts+ls]}function Ou(as,ls,hs,js,Rs,Ts,Is){var Ms;if(as==null)Xl(null,null,hs,js,Rs,Ts,Is);else for(Ms=0;Ms<Is;++Ms)Rs[Ts+Ms]=as[ls+Ms]+hs[js+Ms]&255}function Ll(as,ls,hs,js,Rs,Ts,Is){if(as==null)Xl(null,null,hs,js,Rs,Ts,Is);else{var Ms,Fs=as[ls+0],Xs=Fs,ir=Fs;for(Ms=0;Ms<Is;++Ms)Xs=ir+(Fs=as[ls+Ms])-Xs,ir=hs[js+Ms]+(-256&Xs?0>Xs?0:255:Xs)&255,Xs=Fs,Rs[Ts+Ms]=ir}}function Du(as,ls,hs,js){var Rs=ls.width,Ts=ls.o;if(e(as!=null&&ls!=null),0>hs||0>=js||hs+js>Ts)return null;if(!as.Cc){if(as.ga==null){var Is;if(as.ga=new du,(Is=as.ga==null)||(Is=ls.width*ls.o,e(as.Gb.length==0),as.Gb=ss(Is),as.Uc=0,as.Gb==null?Is=0:(as.mb=as.Gb,as.nb=as.Uc,as.rc=null,Is=1),Is=!Is),!Is){Is=as.ga;var Ms=as.Fa,Fs=as.P,Xs=as.qc,ir=as.mb,fr=as.nb,gr=Fs+1,mr=Xs-1,$r=Is.l;if(e(Ms!=null&&ir!=null&&ls!=null),zl[0]=null,zl[1]=Xl,zl[2]=Ou,zl[3]=Ll,Is.ca=ir,Is.tb=fr,Is.c=ls.width,Is.i=ls.height,e(0<Is.c&&0<Is.i),1>=Xs)ls=0;else if(Is.$a=Ms[Fs+0]>>0&3,Is.Z=Ms[Fs+0]>>2&3,Is.Lc=Ms[Fs+0]>>4&3,Fs=Ms[Fs+0]>>6&3,0>Is.$a||1<Is.$a||4<=Is.Z||1<Is.Lc||Fs)ls=0;else if($r.put=oo,$r.ac=vn,$r.bc=Jn,$r.ma=Is,$r.width=ls.width,$r.height=ls.height,$r.Da=ls.Da,$r.v=ls.v,$r.va=ls.va,$r.j=ls.j,$r.o=ls.o,Is.$a)e:{e(Is.$a==1),ls=qr();t:for(;;){if(ls==null){ls=0;break e}if(e(Is!=null),Is.mc=ls,ls.c=Is.c,ls.i=Is.i,ls.l=Is.l,ls.l.ma=Is,ls.l.width=Is.c,ls.l.height=Is.i,ls.a=0,Ps(ls.m,Ms,gr,mr),!sn(Is.c,Is.i,1,ls,null)||(ls.ab==1&&ls.gc[0].hc==3&&ho(ls.s)?(Is.ic=1,Ms=ls.c*ls.i,ls.Ta=null,ls.Ua=0,ls.V=ss(Ms),ls.Ba=0,ls.V==null?(ls.a=1,ls=0):ls=1):(Is.ic=0,ls=hn(ls,Is.c)),!ls))break t;ls=1;break e}Is.mc=null,ls=0}else ls=mr>=Is.c*Is.i;Is=!ls}if(Is)return null;as.ga.Lc!=1?as.Ga=0:js=Ts-hs}e(as.ga!=null),e(hs+js<=Ts);e:{if(ls=(Ms=as.ga).c,Ts=Ms.l.o,Ms.$a==0){if(gr=as.rc,mr=as.Vc,$r=as.Fa,Fs=as.P+1+hs*ls,Xs=as.mb,ir=as.nb+hs*ls,e(Fs<=as.P+as.qc),Ms.Z!=0)for(e(zl[Ms.Z]!=null),Is=0;Is<js;++Is)zl[Ms.Z](gr,mr,$r,Fs,Xs,ir,ls),gr=Xs,mr=ir,ir+=ls,Fs+=ls;else for(Is=0;Is<js;++Is)es(Xs,ir,$r,Fs,ls),gr=Xs,mr=ir,ir+=ls,Fs+=ls;as.rc=gr,as.Vc=mr}else{if(e(Ms.mc!=null),ls=hs+js,e((Is=Ms.mc)!=null),e(ls<=Is.i),Is.C>=ls)ls=1;else if(Ms.ic||hr(),Ms.ic){Ms=Is.V,gr=Is.Ba,mr=Is.c;var Sr=Is.i,ar=($r=1,Fs=Is.$/mr,Xs=Is.$%mr,ir=Is.m,fr=Is.s,Is.$),ur=mr*Sr,Lr=mr*ls,Mr=fr.wc,Pr=ar<Lr?On(fr,Xs,Fs):null;e(ar<=ur),e(ls<=Sr),e(ho(fr));t:for(;;){for(;!ir.h&&ar<Lr;){if(Xs&Mr||(Pr=On(fr,Xs,Fs)),e(Pr!=null),sr(ir),256>(Sr=Yn(Pr.G[0],Pr.H[0],ir)))Ms[gr+ar]=Sr,++ar,++Xs>=mr&&(Xs=0,++Fs<=ls&&!(Fs%16)&&Ds(Is,Fs));else{if(!(280>Sr)){$r=0;break t}Sr=lo(Sr-256,ir);var Xr,Wr=Yn(Pr.G[4],Pr.H[4],ir);if(sr(ir),!(ar>=(Wr=ro(mr,Wr=lo(Wr,ir)))&&ur-ar>=Sr)){$r=0;break t}for(Xr=0;Xr<Sr;++Xr)Ms[gr+ar+Xr]=Ms[gr+ar+Xr-Wr];for(ar+=Sr,Xs+=Sr;Xs>=mr;)Xs-=mr,++Fs<=ls&&!(Fs%16)&&Ds(Is,Fs);ar<Lr&&Xs&Mr&&(Pr=On(fr,Xs,Fs))}e(ir.h==Ys(ir))}Ds(Is,Fs>ls?ls:Fs);break t}!$r||ir.h&&ar<ur?($r=0,Is.a=ir.h?5:3):Is.$=ar,ls=$r}else ls=Er(Is,Is.V,Is.Ba,Is.c,Is.i,ls,_n);if(!ls){js=0;break e}}hs+js>=Ts&&(as.Cc=1),js=1}if(!js)return null;if(as.Cc&&((js=as.ga)!=null&&(js.mc=null),as.ga=null,0<as.Ga))return alert("todo:WebPDequantizeLevels"),null}return as.nb+hs*Rs}function ms(as,ls,hs,js,Rs,Ts){for(;0<Rs--;){var Is,Ms=as,Fs=ls+(hs?1:0),Xs=as,ir=ls+(hs?0:3);for(Is=0;Is<js;++Is){var fr=Xs[ir+4*Is];fr!=255&&(fr*=32897,Ms[Fs+4*Is+0]=Ms[Fs+4*Is+0]*fr>>23,Ms[Fs+4*Is+1]=Ms[Fs+4*Is+1]*fr>>23,Ms[Fs+4*Is+2]=Ms[Fs+4*Is+2]*fr>>23)}ls+=Ts}}function Ss(as,ls,hs,js,Rs){for(;0<js--;){var Ts;for(Ts=0;Ts<hs;++Ts){var Is=as[ls+2*Ts+0],Ms=15&(Xs=as[ls+2*Ts+1]),Fs=4369*Ms,Xs=(240&Xs|Xs>>4)*Fs>>16;as[ls+2*Ts+0]=(240&Is|Is>>4)*Fs>>16&240|(15&Is|Is<<4)*Fs>>16>>4&15,as[ls+2*Ts+1]=240&Xs|Ms}ls+=Rs}}function Zs(as,ls,hs,js,Rs,Ts,Is,Ms){var Fs,Xs,ir=255;for(Xs=0;Xs<Rs;++Xs){for(Fs=0;Fs<js;++Fs){var fr=as[ls+Fs];Ts[Is+4*Fs]=fr,ir&=fr}ls+=hs,Is+=Ms}return ir!=255}function rr(as,ls,hs,js,Rs){var Ts;for(Ts=0;Ts<Rs;++Ts)hs[js+Ts]=as[ls+Ts]>>8}function hr(){Lo=ms,Dn=Ss,zn=Zs,Kn=rr}function Cr(as,ls,hs){Ls[as]=function(js,Rs,Ts,Is,Ms,Fs,Xs,ir,fr,gr,mr,$r,Sr,ar,ur,Lr,Mr){var Pr,Xr=Mr-1>>1,Wr=Ms[Fs+0]|Xs[ir+0]<<16,cn=fr[gr+0]|mr[$r+0]<<16;e(js!=null);var Jr=3*Wr+cn+131074>>2;for(ls(js[Rs+0],255&Jr,Jr>>16,Sr,ar),Ts!=null&&(Jr=3*cn+Wr+131074>>2,ls(Ts[Is+0],255&Jr,Jr>>16,ur,Lr)),Pr=1;Pr<=Xr;++Pr){var Cn=Ms[Fs+Pr]|Xs[ir+Pr]<<16,kn=fr[gr+Pr]|mr[$r+Pr]<<16,Rn=Wr+Cn+cn+kn+524296,En=Rn+2*(Cn+cn)>>3;Jr=En+Wr>>1,Wr=(Rn=Rn+2*(Wr+kn)>>3)+Cn>>1,ls(js[Rs+2*Pr-1],255&Jr,Jr>>16,Sr,ar+(2*Pr-1)*hs),ls(js[Rs+2*Pr-0],255&Wr,Wr>>16,Sr,ar+(2*Pr-0)*hs),Ts!=null&&(Jr=Rn+cn>>1,Wr=En+kn>>1,ls(Ts[Is+2*Pr-1],255&Jr,Jr>>16,ur,Lr+(2*Pr-1)*hs),ls(Ts[Is+2*Pr+0],255&Wr,Wr>>16,ur,Lr+(2*Pr+0)*hs)),Wr=Cn,cn=kn}1&Mr||(Jr=3*Wr+cn+131074>>2,ls(js[Rs+Mr-1],255&Jr,Jr>>16,Sr,ar+(Mr-1)*hs),Ts!=null&&(Jr=3*cn+Wr+131074>>2,ls(Ts[Is+Mr-1],255&Jr,Jr>>16,ur,Lr+(Mr-1)*hs)))}}function Fr(){Io[xm]=Xp,Io[fm]=pp,Io[lp]=Qp,Io[gm]=hp,Io[jm]=xp,Io[Gm]=fp,Io[cp]=Zp,Io[Wm]=pp,Io[Km]=hp,Io[vm]=xp,Io[Jm]=fp}function Yr(as){return as&~_h?0>as?0:255:as>>gp}function rn(as,ls){return Yr((19077*as>>8)+(26149*ls>>8)-14234)}function gn(as,ls,hs){return Yr((19077*as>>8)-(6419*ls>>8)-(13320*hs>>8)+8708)}function fn(as,ls){return Yr((19077*as>>8)+(33050*ls>>8)-17685)}function bn(as,ls,hs,js,Rs){js[Rs+0]=rn(as,hs),js[Rs+1]=gn(as,ls,hs),js[Rs+2]=fn(as,ls)}function qn(as,ls,hs,js,Rs){js[Rs+0]=fn(as,ls),js[Rs+1]=gn(as,ls,hs),js[Rs+2]=rn(as,hs)}function Vn(as,ls,hs,js,Rs){var Ts=gn(as,ls,hs);ls=Ts<<3&224|fn(as,ls)>>3,js[Rs+0]=248&rn(as,hs)|Ts>>5,js[Rs+1]=ls}function Xn(as,ls,hs,js,Rs){var Ts=240&fn(as,ls)|15;js[Rs+0]=240&rn(as,hs)|gn(as,ls,hs)>>4,js[Rs+1]=Ts}function ao(as,ls,hs,js,Rs){js[Rs+0]=255,bn(as,ls,hs,js,Rs+1)}function xa(as,ls,hs,js,Rs){qn(as,ls,hs,js,Rs),js[Rs+3]=255}function zo(as,ls,hs,js,Rs){bn(as,ls,hs,js,Rs),js[Rs+3]=255}function bo(as,ls){return 0>as?0:as>ls?ls:as}function Vo(as,ls,hs){Ls[as]=function(js,Rs,Ts,Is,Ms,Fs,Xs,ir,fr){for(var gr=ir+(-2&fr)*hs;ir!=gr;)ls(js[Rs+0],Ts[Is+0],Ms[Fs+0],Xs,ir),ls(js[Rs+1],Ts[Is+0],Ms[Fs+0],Xs,ir+hs),Rs+=2,++Is,++Fs,ir+=2*hs;1&fr&&ls(js[Rs+0],Ts[Is+0],Ms[Fs+0],Xs,ir)}}function lm(as,ls,hs){return hs==0?as==0?ls==0?6:5:ls==0?4:0:hs}function zu(as,ls,hs,js,Rs){switch(as>>>30){case 3:Zo(ls,hs,js,Rs,0);break;case 2:Wn(ls,hs,js,Rs);break;case 1:mo(ls,hs,js,Rs)}}function Mu(as,ls){var hs,js,Rs=ls.M,Ts=ls.Nb,Is=as.oc,Ms=as.pc+40,Fs=as.oc,Xs=as.pc+584,ir=as.oc,fr=as.pc+600;for(hs=0;16>hs;++hs)Is[Ms+32*hs-1]=129;for(hs=0;8>hs;++hs)Fs[Xs+32*hs-1]=129,ir[fr+32*hs-1]=129;for(0<Rs?Is[Ms-1-32]=Fs[Xs-1-32]=ir[fr-1-32]=129:(ts(Is,Ms-32-1,127,21),ts(Fs,Xs-32-1,127,9),ts(ir,fr-32-1,127,9)),js=0;js<as.za;++js){var gr=ls.ya[ls.aa+js];if(0<js){for(hs=-1;16>hs;++hs)es(Is,Ms+32*hs-4,Is,Ms+32*hs+12,4);for(hs=-1;8>hs;++hs)es(Fs,Xs+32*hs-4,Fs,Xs+32*hs+4,4),es(ir,fr+32*hs-4,ir,fr+32*hs+4,4)}var mr=as.Gd,$r=as.Hd+js,Sr=gr.ad,ar=gr.Hc;if(0<Rs&&(es(Is,Ms-32,mr[$r].y,0,16),es(Fs,Xs-32,mr[$r].f,0,8),es(ir,fr-32,mr[$r].ea,0,8)),gr.Za){var ur=Is,Lr=Ms-32+16;for(0<Rs&&(js>=as.za-1?ts(ur,Lr,mr[$r].y[15],4):es(ur,Lr,mr[$r+1].y,0,4)),hs=0;4>hs;hs++)ur[Lr+128+hs]=ur[Lr+256+hs]=ur[Lr+384+hs]=ur[Lr+0+hs];for(hs=0;16>hs;++hs,ar<<=2)ur=Is,Lr=Ms+vp[hs],Mo[gr.Ob[hs]](ur,Lr),zu(ar,Sr,16*+hs,ur,Lr)}else if(ur=lm(js,Rs,gr.Ob[0]),Dl[ur](Is,Ms),ar!=0)for(hs=0;16>hs;++hs,ar<<=2)zu(ar,Sr,16*+hs,Is,Ms+vp[hs]);for(hs=gr.Gc,ur=lm(js,Rs,gr.Dd),yl[ur](Fs,Xs),yl[ur](ir,fr),ar=Sr,ur=Fs,Lr=Xs,255&(gr=hs>>0)&&(170&gr?Hu(ar,256,ur,Lr):ko(ar,256,ur,Lr)),gr=ir,ar=fr,255&(hs>>=8)&&(170&hs?Hu(Sr,320,gr,ar):ko(Sr,320,gr,ar)),Rs<as.Ub-1&&(es(mr[$r].y,0,Is,Ms+480,16),es(mr[$r].f,0,Fs,Xs+224,8),es(mr[$r].ea,0,ir,fr+224,8)),hs=8*Ts*as.B,mr=as.sa,$r=as.ta+16*js+16*Ts*as.R,Sr=as.qa,gr=as.ra+8*js+hs,ar=as.Ha,ur=as.Ia+8*js+hs,hs=0;16>hs;++hs)es(mr,$r+hs*as.R,Is,Ms+32*hs,16);for(hs=0;8>hs;++hs)es(Sr,gr+hs*as.B,Fs,Xs+32*hs,8),es(ar,ur+hs*as.B,ir,fr+32*hs,8)}}function mu(as,ls,hs,js,Rs,Ts,Is,Ms,Fs){var Xs=[0],ir=[0],fr=0,gr=Fs!=null?Fs.kd:0,mr=Fs??new Iu;if(as==null||12>hs)return 7;mr.data=as,mr.w=ls,mr.ha=hs,ls=[ls],hs=[hs],mr.gb=[mr.gb];e:{var $r=ls,Sr=hs,ar=mr.gb;if(e(as!=null),e(Sr!=null),e(ar!=null),ar[0]=0,12<=Sr[0]&&!St(as,$r[0],"RIFF")){if(St(as,$r[0]+8,"WEBP")){ar=3;break e}var ur=or(as,$r[0]+4);if(12>ur||4294967286<ur){ar=3;break e}if(gr&&ur>Sr[0]-8){ar=7;break e}ar[0]=ur,$r[0]+=12,Sr[0]-=12}ar=0}if(ar!=0)return ar;for(ur=0<mr.gb[0],hs=hs[0];;){e:{var Lr=as;Sr=ls,ar=hs;var Mr=Xs,Pr=ir,Xr=$r=[0];if((Jr=fr=[fr])[0]=0,8>ar[0])ar=7;else{if(!St(Lr,Sr[0],"VP8X")){if(or(Lr,Sr[0]+4)!=10){ar=3;break e}if(18>ar[0]){ar=7;break e}var Wr=or(Lr,Sr[0]+8),cn=1+zr(Lr,Sr[0]+12);if(2147483648<=cn*(Lr=1+zr(Lr,Sr[0]+15))){ar=3;break e}Xr!=null&&(Xr[0]=Wr),Mr!=null&&(Mr[0]=cn),Pr!=null&&(Pr[0]=Lr),Sr[0]+=18,ar[0]-=18,Jr[0]=1}ar=0}}if(fr=fr[0],$r=$r[0],ar!=0)return ar;if(Sr=!!(2&$r),!ur&&fr)return 3;if(Ts!=null&&(Ts[0]=!!(16&$r)),Is!=null&&(Is[0]=Sr),Ms!=null&&(Ms[0]=0),Is=Xs[0],$r=ir[0],fr&&Sr&&Fs==null){ar=0;break}if(4>hs){ar=7;break}if(ur&&fr||!ur&&!fr&&!St(as,ls[0],"ALPH")){hs=[hs],mr.na=[mr.na],mr.P=[mr.P],mr.Sa=[mr.Sa];e:{Wr=as,ar=ls,ur=hs;var Jr=mr.gb;Mr=mr.na,Pr=mr.P,Xr=mr.Sa,cn=22,e(Wr!=null),e(ur!=null),Lr=ar[0];var Cn=ur[0];for(e(Mr!=null),e(Xr!=null),Mr[0]=null,Pr[0]=null,Xr[0]=0;;){if(ar[0]=Lr,ur[0]=Cn,8>Cn){ar=7;break e}var kn=or(Wr,Lr+4);if(4294967286<kn){ar=3;break e}var Rn=8+kn+1&-2;if(cn+=Rn,0<Jr&&cn>Jr){ar=3;break e}if(!St(Wr,Lr,"VP8 ")||!St(Wr,Lr,"VP8L")){ar=0;break e}if(Cn[0]<Rn){ar=7;break e}St(Wr,Lr,"ALPH")||(Mr[0]=Wr,Pr[0]=Lr+8,Xr[0]=kn),Lr+=Rn,Cn-=Rn}}if(hs=hs[0],mr.na=mr.na[0],mr.P=mr.P[0],mr.Sa=mr.Sa[0],ar!=0)break}hs=[hs],mr.Ja=[mr.Ja],mr.xa=[mr.xa];e:if(Jr=as,ar=ls,ur=hs,Mr=mr.gb[0],Pr=mr.Ja,Xr=mr.xa,Wr=ar[0],Lr=!St(Jr,Wr,"VP8 "),cn=!St(Jr,Wr,"VP8L"),e(Jr!=null),e(ur!=null),e(Pr!=null),e(Xr!=null),8>ur[0])ar=7;else{if(Lr||cn){if(Jr=or(Jr,Wr+4),12<=Mr&&Jr>Mr-12){ar=3;break e}if(gr&&Jr>ur[0]-8){ar=7;break e}Pr[0]=Jr,ar[0]+=8,ur[0]-=8,Xr[0]=cn}else Xr[0]=5<=ur[0]&&Jr[Wr+0]==47&&!(Jr[Wr+4]>>5),Pr[0]=ur[0];ar=0}if(hs=hs[0],mr.Ja=mr.Ja[0],mr.xa=mr.xa[0],ls=ls[0],ar!=0)break;if(4294967286<mr.Ja)return 3;if(Ms==null||Sr||(Ms[0]=mr.xa?2:1),Is=[Is],$r=[$r],mr.xa){if(5>hs){ar=7;break}Ms=Is,gr=$r,Sr=Ts,as==null||5>hs?as=0:5<=hs&&as[ls+0]==47&&!(as[ls+4]>>5)?(ur=[0],Jr=[0],Mr=[0],Ps(Pr=new ws,as,ls,hs),an(Pr,ur,Jr,Mr)?(Ms!=null&&(Ms[0]=ur[0]),gr!=null&&(gr[0]=Jr[0]),Sr!=null&&(Sr[0]=Mr[0]),as=1):as=0):as=0}else{if(10>hs){ar=7;break}Ms=$r,as==null||10>hs||!nu(as,ls+3,hs-3)?as=0:(gr=as[ls+0]|as[ls+1]<<8|as[ls+2]<<16,Sr=16383&(as[ls+7]<<8|as[ls+6]),as=16383&(as[ls+9]<<8|as[ls+8]),1&gr||3<(gr>>1&7)||!(gr>>4&1)||gr>>5>=mr.Ja||!Sr||!as?as=0:(Is&&(Is[0]=Sr),Ms&&(Ms[0]=as),as=1))}if(!as||(Is=Is[0],$r=$r[0],fr&&(Xs[0]!=Is||ir[0]!=$r)))return 3;Fs!=null&&(Fs[0]=mr,Fs.offset=ls-Fs.w,e(4294967286>ls-Fs.w),e(Fs.offset==Fs.ha-hs));break}return ar==0||ar==7&&fr&&Fs==null?(Ts!=null&&(Ts[0]|=mr.na!=null&&0<mr.na.length),js!=null&&(js[0]=Is),Rs!=null&&(Rs[0]=$r),0):ar}function Fu(as,ls,hs){var js=ls.width,Rs=ls.height,Ts=0,Is=0,Ms=js,Fs=Rs;if(ls.Da=as!=null&&0<as.Da,ls.Da&&(Ms=as.cd,Fs=as.bd,Ts=as.v,Is=as.j,11>hs||(Ts&=-2,Is&=-2),0>Ts||0>Is||0>=Ms||0>=Fs||Ts+Ms>js||Is+Fs>Rs))return 0;if(ls.v=Ts,ls.j=Is,ls.va=Ts+Ms,ls.o=Is+Fs,ls.U=Ms,ls.T=Fs,ls.da=as!=null&&0<as.da,ls.da){if(!jr(Ms,Fs,hs=[as.ib],Ts=[as.hb]))return 0;ls.ib=hs[0],ls.hb=Ts[0]}return ls.ob=as!=null&&as.ob,ls.Kb=as==null||!as.Sd,ls.da&&(ls.ob=ls.ib<3*js/4&&ls.hb<3*Rs/4,ls.Kb=0),1}function Bu(as){if(as==null)return 2;if(11>as.S){var ls=as.f.RGBA;ls.fb+=(as.height-1)*ls.A,ls.A=-ls.A}else ls=as.f.kb,as=as.height,ls.O+=(as-1)*ls.fa,ls.fa=-ls.fa,ls.N+=(as-1>>1)*ls.Ab,ls.Ab=-ls.Ab,ls.W+=(as-1>>1)*ls.Db,ls.Db=-ls.Db,ls.F!=null&&(ls.J+=(as-1)*ls.lb,ls.lb=-ls.lb);return 0}function pu(as,ls,hs,js){if(js==null||0>=as||0>=ls)return 2;if(hs!=null){if(hs.Da){var Rs=hs.cd,Ts=hs.bd,Is=-2&hs.v,Ms=-2&hs.j;if(0>Is||0>Ms||0>=Rs||0>=Ts||Is+Rs>as||Ms+Ts>ls)return 2;as=Rs,ls=Ts}if(hs.da){if(!jr(as,ls,Rs=[hs.ib],Ts=[hs.hb]))return 2;as=Rs[0],ls=Ts[0]}}js.width=as,js.height=ls;e:{var Fs=js.width,Xs=js.height;if(as=js.S,0>=Fs||0>=Xs||!(as>=xm&&13>as))as=2;else{if(0>=js.Rd&&js.sd==null){Is=Ts=Rs=ls=0;var ir=(Ms=Fs*yp[as])*Xs;if(11>as||(Ts=(Xs+1)/2*(ls=(Fs+1)/2),as==12&&(Is=(Rs=Fs)*Xs)),(Xs=ss(ir+2*Ts+Is))==null){as=1;break e}js.sd=Xs,11>as?((Fs=js.f.RGBA).eb=Xs,Fs.fb=0,Fs.A=Ms,Fs.size=ir):((Fs=js.f.kb).y=Xs,Fs.O=0,Fs.fa=Ms,Fs.Fd=ir,Fs.f=Xs,Fs.N=0+ir,Fs.Ab=ls,Fs.Cd=Ts,Fs.ea=Xs,Fs.W=0+ir+Ts,Fs.Db=ls,Fs.Ed=Ts,as==12&&(Fs.F=Xs,Fs.J=0+ir+2*Ts),Fs.Tc=Is,Fs.lb=Rs)}if(ls=1,Rs=js.S,Ts=js.width,Is=js.height,Rs>=xm&&13>Rs)if(11>Rs)as=js.f.RGBA,ls&=(Ms=Math.abs(as.A))*(Is-1)+Ts<=as.size,ls&=Ms>=Ts*yp[Rs],ls&=as.eb!=null;else{as=js.f.kb,Ms=(Ts+1)/2,ir=(Is+1)/2,Fs=Math.abs(as.fa),Xs=Math.abs(as.Ab);var fr=Math.abs(as.Db),gr=Math.abs(as.lb),mr=gr*(Is-1)+Ts;ls&=Fs*(Is-1)+Ts<=as.Fd,ls&=Xs*(ir-1)+Ms<=as.Cd,ls=(ls&=fr*(ir-1)+Ms<=as.Ed)&Fs>=Ts&Xs>=Ms&fr>=Ms,ls&=as.y!=null,ls&=as.f!=null,ls&=as.ea!=null,Rs==12&&(ls&=gr>=Ts,ls&=mr<=as.Tc,ls&=as.F!=null)}else ls=0;as=ls?0:2}}return as!=0||hs!=null&&hs.fd&&(as=Bu(js)),as}var to=64,hu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xu=24,fu=32,qu=8,jo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];lr("Predictor0","PredictorAdd0"),Ls.Predictor0=function(){return 4278190080},Ls.Predictor1=function(as){return as},Ls.Predictor2=function(as,ls,hs){return ls[hs+0]},Ls.Predictor3=function(as,ls,hs){return ls[hs+1]},Ls.Predictor4=function(as,ls,hs){return ls[hs-1]},Ls.Predictor5=function(as,ls,hs){return Ar(Ar(as,ls[hs+1]),ls[hs+0])},Ls.Predictor6=function(as,ls,hs){return Ar(as,ls[hs-1])},Ls.Predictor7=function(as,ls,hs){return Ar(as,ls[hs+0])},Ls.Predictor8=function(as,ls,hs){return Ar(ls[hs-1],ls[hs+0])},Ls.Predictor9=function(as,ls,hs){return Ar(ls[hs+0],ls[hs+1])},Ls.Predictor10=function(as,ls,hs){return Ar(Ar(as,ls[hs-1]),Ar(ls[hs+0],ls[hs+1]))},Ls.Predictor11=function(as,ls,hs){var js=ls[hs+0];return 0>=_s(js>>24&255,as>>24&255,(ls=ls[hs-1])>>24&255)+_s(js>>16&255,as>>16&255,ls>>16&255)+_s(js>>8&255,as>>8&255,ls>>8&255)+_s(255&js,255&as,255&ls)?js:as},Ls.Predictor12=function(as,ls,hs){var js=ls[hs+0];return(Vr((as>>24&255)+(js>>24&255)-((ls=ls[hs-1])>>24&255))<<24|Vr((as>>16&255)+(js>>16&255)-(ls>>16&255))<<16|Vr((as>>8&255)+(js>>8&255)-(ls>>8&255))<<8|Vr((255&as)+(255&js)-(255&ls)))>>>0},Ls.Predictor13=function(as,ls,hs){var js=ls[hs-1];return(Kr((as=Ar(as,ls[hs+0]))>>24&255,js>>24&255)<<24|Kr(as>>16&255,js>>16&255)<<16|Kr(as>>8&255,js>>8&255)<<8|Kr(as>>0&255,js>>0&255))>>>0};var Hm=Ls.PredictorAdd0;Ls.PredictorAdd1=Ks,lr("Predictor2","PredictorAdd2"),lr("Predictor3","PredictorAdd3"),lr("Predictor4","PredictorAdd4"),lr("Predictor5","PredictorAdd5"),lr("Predictor6","PredictorAdd6"),lr("Predictor7","PredictorAdd7"),lr("Predictor8","PredictorAdd8"),lr("Predictor9","PredictorAdd9"),lr("Predictor10","PredictorAdd10"),lr("Predictor11","PredictorAdd11"),lr("Predictor12","PredictorAdd12"),lr("Predictor13","PredictorAdd13");var Uu=Ls.PredictorAdd2;Ir("ColorIndexInverseTransform","MapARGB","32b",function(as){return as>>8&255},function(as){return as}),Ir("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(as){return as},function(as){return as>>8&255});var cm,Ao=Ls.ColorIndexInverseTransform,gu=Ls.MapARGB,um=Ls.VP8LColorIndexInverseTransformAlpha,dm=Ls.MapAlpha,Pl=Ls.VP8LPredictorsAdd=[];Pl.length=16,(Ls.VP8LPredictors=[]).length=16,(Ls.VP8LPredictorsAdd_C=[]).length=16,(Ls.VP8LPredictors_C=[]).length=16;var Ql,vo,uo,Il,Xo,Qo,ju,Zo,Wn,Hu,mo,ko,vu,mm,Vu,Zl,_c,$l,eu,yu,tu,Ol,Gu,To,Lo,Dn,zn,Kn,na=ss(511),xl=ss(2041),Wu=ss(225),Eu=ss(767),pm=0,Vm=xl,hm=Wu,No=Eu,Po=na,xm=0,fm=1,lp=2,gm=3,jm=4,Gm=5,cp=6,Wm=7,Km=8,vm=9,Jm=10,Dp=[2,3,7],zp=[3,3,11],up=[280,256,256,256,40],Mp=[0,1,1,1,0],Fp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Bp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Up=8,Ym=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ku=null,Hp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Vp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Gp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Wp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Kp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Jp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Dl=[],Mo=[],yl=[],Yp=1,mp=2,zl=[],Io=[];Cr("UpsampleRgbLinePair",bn,3),Cr("UpsampleBgrLinePair",qn,3),Cr("UpsampleRgbaLinePair",zo,4),Cr("UpsampleBgraLinePair",xa,4),Cr("UpsampleArgbLinePair",ao,4),Cr("UpsampleRgba4444LinePair",Xn,2),Cr("UpsampleRgb565LinePair",Vn,2);var Xp=Ls.UpsampleRgbLinePair,Qp=Ls.UpsampleBgrLinePair,pp=Ls.UpsampleRgbaLinePair,hp=Ls.UpsampleBgraLinePair,xp=Ls.UpsampleArgbLinePair,fp=Ls.UpsampleRgba4444LinePair,Zp=Ls.UpsampleRgb565LinePair,ym=16,Em=1<<ym-1,Ju=-227,Qm=482,gp=6,_h=(256<<gp)-1,jp=0,ex=ss(256),tx=ss(256),sx=ss(256),rx=ss(256),nx=ss(Qm-Ju),ix=ss(Qm-Ju);Vo("YuvToRgbRow",bn,3),Vo("YuvToBgrRow",qn,3),Vo("YuvToRgbaRow",zo,4),Vo("YuvToBgraRow",xa,4),Vo("YuvToArgbRow",ao,4),Vo("YuvToRgba4444Row",Xn,2),Vo("YuvToRgb565Row",Vn,2);var vp=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],bm=[0,2,8],ax=[8,7,6,4,4,2,2,2,1,1,1,1],ox=1;this.WebPDecodeRGBA=function(as,ls,hs,js,Rs){var Ts=fm,Is=new uu,Ms=new Hn;Is.ba=Ms,Ms.S=Ts,Ms.width=[Ms.width],Ms.height=[Ms.height];var Fs=Ms.width,Xs=Ms.height,ir=new $n;if(ir==null||as==null)var fr=2;else e(ir!=null),fr=mu(as,ls,hs,ir.width,ir.height,ir.Pd,ir.Qd,ir.format,null);if(fr!=0?Fs=0:(Fs!=null&&(Fs[0]=ir.width[0]),Xs!=null&&(Xs[0]=ir.height[0]),Fs=1),Fs){Ms.width=Ms.width[0],Ms.height=Ms.height[0],js!=null&&(js[0]=Ms.width),Rs!=null&&(Rs[0]=Ms.height);e:{if(js=new _o,(Rs=new Iu).data=as,Rs.w=ls,Rs.ha=hs,Rs.kd=1,ls=[0],e(Rs!=null),((as=mu(Rs.data,Rs.w,Rs.ha,null,null,null,ls,null,Rs))==0||as==7)&&ls[0]&&(as=4),(ls=as)==0){if(e(Is!=null),js.data=Rs.data,js.w=Rs.w+Rs.offset,js.ha=Rs.ha-Rs.offset,js.put=oo,js.ac=vn,js.bc=Jn,js.ma=Is,Rs.xa){if((as=qr())==null){Is=1;break e}if(function(gr,mr){var $r=[0],Sr=[0],ar=[0];t:for(;;){if(gr==null)return 0;if(mr==null)return gr.a=2,0;if(gr.l=mr,gr.a=0,Ps(gr.m,mr.data,mr.w,mr.ha),!an(gr.m,$r,Sr,ar)){gr.a=3;break t}if(gr.xb=mp,mr.width=$r[0],mr.height=Sr[0],!sn($r[0],Sr[0],1,gr,null))break t;return 1}return e(gr.a!=0),0}(as,js)){if(js=(ls=pu(js.width,js.height,Is.Oa,Is.ba))==0){t:{js=as;s:for(;;){if(js==null){js=0;break t}if(e(js.s.yc!=null),e(js.s.Ya!=null),e(0<js.s.Wb),e((hs=js.l)!=null),e((Rs=hs.ma)!=null),js.xb!=0){if(js.ca=Rs.ba,js.tb=Rs.tb,e(js.ca!=null),!Fu(Rs.Oa,hs,gm)){js.a=2;break s}if(!hn(js,hs.width)||hs.da)break s;if((hs.da||Qr(js.ca.S))&&hr(),11>js.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),js.ca.f.kb.F!=null&&hr()),js.Pb&&0<js.s.ua&&js.s.vb.X==null&&!Nr(js.s.vb,js.s.Wa.Xa)){js.a=1;break s}js.xb=0}if(!Er(js,js.V,js.Ba,js.c,js.i,hs.o,Bo))break s;Rs.Dc=js.Ma,js=1;break t}e(js.a!=0),js=0}js=!js}js&&(ls=as.a)}else ls=as.a}else{if((as=new Cu)==null){Is=1;break e}if(as.Fa=Rs.na,as.P=Rs.P,as.qc=Rs.Sa,Ko(as,js)){if((ls=pu(js.width,js.height,Is.Oa,Is.ba))==0){if(as.Aa=0,hs=Is.Oa,e((Rs=as)!=null),hs!=null){if(0<(Fs=0>(Fs=hs.Md)?0:100<Fs?255:255*Fs/100)){for(Xs=ir=0;4>Xs;++Xs)12>(fr=Rs.pb[Xs]).lc&&(fr.ia=Fs*ax[0>fr.lc?0:fr.lc]>>3),ir|=fr.ia;ir&&(alert("todo:VP8InitRandom"),Rs.ia=1)}Rs.Ga=hs.Id,100<Rs.Ga?Rs.Ga=100:0>Rs.Ga&&(Rs.Ga=0)}iu(as,js)||(ls=as.a)}}else ls=as.a}ls==0&&Is.Oa!=null&&Is.Oa.fd&&(ls=Bu(Is.ba))}Is=ls}Ts=Is!=0?null:11>Ts?Ms.f.RGBA.eb:Ms.f.kb.y}else Ts=null;return Ts};var yp=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function os(Ls,Bs){for(var Gs="",bs=0;bs<4;bs++)Gs+=String.fromCharCode(Ls[Bs++]);return Gs}function us(Ls,Bs){return(Ls[Bs+0]<<0|Ls[Bs+1]<<8|Ls[Bs+2]<<16)>>>0}function ps(Ls,Bs){return(Ls[Bs+0]<<0|Ls[Bs+1]<<8|Ls[Bs+2]<<16|Ls[Bs+3]<<24)>>>0}new is;var xs=[0],cs=[0],ys=[],gs=new is,vs=_e,ds=function(Ls,Bs){var Gs={},bs=0,As=!1,ks=0,$s=0;if(Gs.frames=[],!function(Vs,Ys,Ws,sr){for(var nr=0;nr<sr;nr++)if(Vs[Ys+nr]!=Ws.charCodeAt(nr))return!0;return!1}(Ls,Bs,"RIFF",4)){for(ps(Ls,Bs+=4),Bs+=8;Bs<Ls.length;){var qs=os(Ls,Bs),Cs=ps(Ls,Bs+=4);Bs+=4;var Us=Cs+(1&Cs);switch(qs){case"VP8 ":case"VP8L":Gs.frames[bs]===void 0&&(Gs.frames[bs]={}),(tr=Gs.frames[bs]).src_off=As?$s:Bs-8,tr.src_size=ks+Cs+8,bs++,As&&(As=!1,ks=0,$s=0);break;case"VP8X":(tr=Gs.header={}).feature_flags=Ls[Bs];var Ps=Bs+4;tr.canvas_width=1+us(Ls,Ps),Ps+=3,tr.canvas_height=1+us(Ls,Ps),Ps+=3;break;case"ALPH":As=!0,ks=Us+8,$s=Bs-8;break;case"ANIM":(tr=Gs.header).bgcolor=ps(Ls,Bs),Ps=Bs+4,tr.loop_count=(vr=Ls)[(ws=Ps)+0]<<0|vr[ws+1]<<8,Ps+=2;break;case"ANMF":var er,tr;(tr=Gs.frames[bs]={}).offset_x=2*us(Ls,Bs),Bs+=3,tr.offset_y=2*us(Ls,Bs),Bs+=3,tr.width=1+us(Ls,Bs),Bs+=3,tr.height=1+us(Ls,Bs),Bs+=3,tr.duration=us(Ls,Bs),Bs+=3,er=Ls[Bs++],tr.dispose=1&er,tr.blend=er>>1&1}qs!="ANMF"&&(Bs+=Us)}var vr,ws;return Gs}}(vs,0);ds.response=vs,ds.rgbaoutput=!0,ds.dataurl=!1;var fs=ds.header?ds.header:null,Es=ds.frames?ds.frames:null;if(fs){fs.loop_counter=fs.loop_count,xs=[fs.canvas_height],cs=[fs.canvas_width];for(var Os=0;Os<Es.length&&Es[Os].blend!=0;Os++);}var Hs=Es[0],Qs=gs.WebPDecodeRGBA(vs,Hs.src_off,Hs.src_size,cs,xs);Hs.rgba=Qs,Hs.imgwidth=cs[0],Hs.imgheight=xs[0];for(var zs=0;zs<cs[0]*xs[0]*4;zs++)ys[zs]=Qs[zs];return this.width=cs,this.height=xs,this.data=ys,this}(function(_e){var e=function(){return typeof zlibSync=="function"},St=function(xs,cs,ys,gs){var vs=4,ds=rs;switch(gs){case _e.image_compression.FAST:vs=1,ds=ss;break;case _e.image_compression.MEDIUM:vs=6,ds=ns;break;case _e.image_compression.SLOW:vs=9,ds=is}xs=es(xs,cs,ys,ds);var fs=zlibSync(xs,{level:vs});return _e.__addimage__.arrayBufferToBinaryString(fs)},es=function(xs,cs,ys,gs){for(var vs,ds,fs,Es=xs.length/cs,Os=new Uint8Array(xs.length+Es),Hs=us(),Qs=0;Qs<Es;Qs+=1){if(fs=Qs*cs,vs=xs.subarray(fs,fs+cs),gs)Os.set(gs(vs,ys,ds),fs+Qs);else{for(var zs,Ls=Hs.length,Bs=[];zs<Ls;zs+=1)Bs[zs]=Hs[zs](vs,ys,ds);var Gs=ps(Bs.concat());Os.set(Bs[Gs],fs+Qs)}ds=vs}return Os},ts=function(xs){var cs=Array.apply([],xs);return cs.unshift(0),cs},ss=function(xs,cs){var ys,gs=[],vs=xs.length;gs[0]=1;for(var ds=0;ds<vs;ds+=1)ys=xs[ds-cs]||0,gs[ds+1]=xs[ds]-ys+256&255;return gs},rs=function(xs,cs,ys){var gs,vs=[],ds=xs.length;vs[0]=2;for(var fs=0;fs<ds;fs+=1)gs=ys&&ys[fs]||0,vs[fs+1]=xs[fs]-gs+256&255;return vs},ns=function(xs,cs,ys){var gs,vs,ds=[],fs=xs.length;ds[0]=3;for(var Es=0;Es<fs;Es+=1)gs=xs[Es-cs]||0,vs=ys&&ys[Es]||0,ds[Es+1]=xs[Es]+256-(gs+vs>>>1)&255;return ds},is=function(xs,cs,ys){var gs,vs,ds,fs,Es=[],Os=xs.length;Es[0]=4;for(var Hs=0;Hs<Os;Hs+=1)gs=xs[Hs-cs]||0,vs=ys&&ys[Hs]||0,ds=ys&&ys[Hs-cs]||0,fs=os(gs,vs,ds),Es[Hs+1]=xs[Hs]-fs+256&255;return Es},os=function(xs,cs,ys){if(xs===cs&&cs===ys)return xs;var gs=Math.abs(cs-ys),vs=Math.abs(xs-ys),ds=Math.abs(xs+cs-ys-ys);return gs<=vs&&gs<=ds?xs:vs<=ds?cs:ys},us=function(){return[ts,ss,rs,ns,is]},ps=function(xs){var cs=xs.map(function(ys){return ys.reduce(function(gs,vs){return gs+Math.abs(vs)},0)});return cs.indexOf(Math.min.apply(null,cs))};_e.processPNG=function(xs,cs,ys,gs){var vs,ds,fs,Es,Os,Hs,Qs,zs,Ls,Bs,Gs,bs,As,ks,$s,qs=this.decode.FLATE_DECODE,Cs="";if(this.__addimage__.isArrayBuffer(xs)&&(xs=new Uint8Array(xs)),this.__addimage__.isArrayBufferView(xs)){if(xs=(fs=new Kt(xs)).imgData,ds=fs.bits,vs=fs.colorSpace,Os=fs.colors,[4,6].indexOf(fs.colorType)!==-1){if(fs.bits===8){Ls=(zs=fs.pixelBitlength==32?new Uint32Array(fs.decodePixels().buffer):fs.pixelBitlength==16?new Uint16Array(fs.decodePixels().buffer):new Uint8Array(fs.decodePixels().buffer)).length,Gs=new Uint8Array(Ls*fs.colors),Bs=new Uint8Array(Ls);var Us,Ps=fs.pixelBitlength-fs.bits;for(ks=0,$s=0;ks<Ls;ks++){for(As=zs[ks],Us=0;Us<Ps;)Gs[$s++]=As>>>Us&255,Us+=fs.bits;Bs[ks]=As>>>Us&255}}if(fs.bits===16){Ls=(zs=new Uint32Array(fs.decodePixels().buffer)).length,Gs=new Uint8Array(Ls*(32/fs.pixelBitlength)*fs.colors),Bs=new Uint8Array(Ls*(32/fs.pixelBitlength)),bs=fs.colors>1,ks=0,$s=0;for(var er=0;ks<Ls;)As=zs[ks++],Gs[$s++]=As>>>0&255,bs&&(Gs[$s++]=As>>>16&255,As=zs[ks++],Gs[$s++]=As>>>0&255),Bs[er++]=As>>>16&255;ds=8}gs!==_e.image_compression.NONE&&e()?(xs=St(Gs,fs.width*fs.colors,fs.colors,gs),Qs=St(Bs,fs.width,1,gs)):(xs=Gs,Qs=Bs,qs=void 0)}if(fs.colorType===3&&(vs=this.color_spaces.INDEXED,Hs=fs.palette,fs.transparency.indexed)){var tr=fs.transparency.indexed,vr=0;for(ks=0,Ls=tr.length;ks<Ls;++ks)vr+=tr[ks];if((vr/=255)===Ls-1&&tr.indexOf(0)!==-1)Es=[tr.indexOf(0)];else if(vr!==Ls){for(zs=fs.decodePixels(),Bs=new Uint8Array(zs.length),ks=0,Ls=zs.length;ks<Ls;ks++)Bs[ks]=tr[zs[ks]];Qs=St(Bs,fs.width,1)}}var ws=function(Vs){var Ys;switch(Vs){case _e.image_compression.FAST:Ys=11;break;case _e.image_compression.MEDIUM:Ys=13;break;case _e.image_compression.SLOW:Ys=14;break;default:Ys=12}return Ys}(gs);return qs===this.decode.FLATE_DECODE&&(Cs="/Predictor "+ws+" "),Cs+="/Colors "+Os+" /BitsPerComponent "+ds+" /Columns "+fs.width,(this.__addimage__.isArrayBuffer(xs)||this.__addimage__.isArrayBufferView(xs))&&(xs=this.__addimage__.arrayBufferToBinaryString(xs)),(Qs&&this.__addimage__.isArrayBuffer(Qs)||this.__addimage__.isArrayBufferView(Qs))&&(Qs=this.__addimage__.arrayBufferToBinaryString(Qs)),{alias:ys,data:xs,index:cs,filter:qs,decodeParameters:Cs,transparency:Es,palette:Hs,sMask:Qs,predictor:ws,width:fs.width,height:fs.height,bitsPerComponent:ds,colorSpace:vs}}}})(E.API),function(_e){_e.processGIF89A=function(e,St,es,ts){var ss=new Zt(e),rs=ss.width,ns=ss.height,is=[];ss.decodeAndBlitFrameRGBA(0,is);var os={data:is,width:rs,height:ns},us=new Qt(100).encode(os,100);return _e.processJPEG.call(this,us,St,es,ts)},_e.processGIF87A=_e.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var _e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(_e);for(var e=0;e<_e;e++){var St=this.datav.getUint8(this.pos++,!0),es=this.datav.getUint8(this.pos++,!0),ts=this.datav.getUint8(this.pos++,!0),ss=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:ts,green:es,blue:St,quad:ss}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var _e="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[_e]()}catch(St){a.log("bit decode error:"+St)}},te.prototype.bit1=function(){var _e,e=Math.ceil(this.width/8),St=e%4;for(_e=this.height-1;_e>=0;_e--){for(var es=this.bottom_up?_e:this.height-1-_e,ts=0;ts<e;ts++)for(var ss=this.datav.getUint8(this.pos++,!0),rs=es*this.width*4+8*ts*4,ns=0;ns<8&&8*ts+ns<this.width;ns++){var is=this.palette[ss>>7-ns&1];this.data[rs+4*ns]=is.blue,this.data[rs+4*ns+1]=is.green,this.data[rs+4*ns+2]=is.red,this.data[rs+4*ns+3]=255}St!==0&&(this.pos+=4-St)}},te.prototype.bit4=function(){for(var _e=Math.ceil(this.width/2),e=_e%4,St=this.height-1;St>=0;St--){for(var es=this.bottom_up?St:this.height-1-St,ts=0;ts<_e;ts++){var ss=this.datav.getUint8(this.pos++,!0),rs=es*this.width*4+2*ts*4,ns=ss>>4,is=15&ss,os=this.palette[ns];if(this.data[rs]=os.blue,this.data[rs+1]=os.green,this.data[rs+2]=os.red,this.data[rs+3]=255,2*ts+1>=this.width)break;os=this.palette[is],this.data[rs+4]=os.blue,this.data[rs+4+1]=os.green,this.data[rs+4+2]=os.red,this.data[rs+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var _e=this.width%4,e=this.height-1;e>=0;e--){for(var St=this.bottom_up?e:this.height-1-e,es=0;es<this.width;es++){var ts=this.datav.getUint8(this.pos++,!0),ss=St*this.width*4+4*es;if(ts<this.palette.length){var rs=this.palette[ts];this.data[ss]=rs.red,this.data[ss+1]=rs.green,this.data[ss+2]=rs.blue,this.data[ss+3]=255}else this.data[ss]=255,this.data[ss+1]=255,this.data[ss+2]=255,this.data[ss+3]=255}_e!==0&&(this.pos+=4-_e)}},te.prototype.bit15=function(){for(var _e=this.width%3,e=parseInt("11111",2),St=this.height-1;St>=0;St--){for(var es=this.bottom_up?St:this.height-1-St,ts=0;ts<this.width;ts++){var ss=this.datav.getUint16(this.pos,!0);this.pos+=2;var rs=(ss&e)/e*255|0,ns=(ss>>5&e)/e*255|0,is=(ss>>10&e)/e*255|0,os=ss>>15?255:0,us=es*this.width*4+4*ts;this.data[us]=is,this.data[us+1]=ns,this.data[us+2]=rs,this.data[us+3]=os}this.pos+=_e}},te.prototype.bit16=function(){for(var _e=this.width%3,e=parseInt("11111",2),St=parseInt("111111",2),es=this.height-1;es>=0;es--){for(var ts=this.bottom_up?es:this.height-1-es,ss=0;ss<this.width;ss++){var rs=this.datav.getUint16(this.pos,!0);this.pos+=2;var ns=(rs&e)/e*255|0,is=(rs>>5&St)/St*255|0,os=(rs>>11)/e*255|0,us=ts*this.width*4+4*ss;this.data[us]=os,this.data[us+1]=is,this.data[us+2]=ns,this.data[us+3]=255}this.pos+=_e}},te.prototype.bit24=function(){for(var _e=this.height-1;_e>=0;_e--){for(var e=this.bottom_up?_e:this.height-1-_e,St=0;St<this.width;St++){var es=this.datav.getUint8(this.pos++,!0),ts=this.datav.getUint8(this.pos++,!0),ss=this.datav.getUint8(this.pos++,!0),rs=e*this.width*4+4*St;this.data[rs]=ss,this.data[rs+1]=ts,this.data[rs+2]=es,this.data[rs+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var _e=this.height-1;_e>=0;_e--)for(var e=this.bottom_up?_e:this.height-1-_e,St=0;St<this.width;St++){var es=this.datav.getUint8(this.pos++,!0),ts=this.datav.getUint8(this.pos++,!0),ss=this.datav.getUint8(this.pos++,!0),rs=this.datav.getUint8(this.pos++,!0),ns=e*this.width*4+4*St;this.data[ns]=ss,this.data[ns+1]=ts,this.data[ns+2]=es,this.data[ns+3]=rs}},te.prototype.getData=function(){return this.data},function(_e){_e.processBMP=function(e,St,es,ts){var ss=new te(e,!1),rs=ss.width,ns=ss.height,is={data:ss.getData(),width:rs,height:ns},os=new Qt(100).encode(is,100);return _e.processJPEG.call(this,os,St,es,ts)}}(E.API),ee.prototype.getData=function(){return this.data},function(_e){_e.processWEBP=function(e,St,es,ts){var ss=new ee(e),rs=ss.width,ns=ss.height,is={data:ss.getData(),width:rs,height:ns},os=new Qt(100).encode(is,100);return _e.processJPEG.call(this,os,St,es,ts)}}(E.API),E.API.processRGBA=function(_e,e,St){for(var es=_e.data,ts=es.length,ss=new Uint8Array(ts/4*3),rs=new Uint8Array(ts/4),ns=0,is=0,os=0;os<ts;os+=4){var us=es[os],ps=es[os+1],xs=es[os+2],cs=es[os+3];ss[ns++]=us,ss[ns++]=ps,ss[ns++]=xs,rs[is++]=cs}var ys=this.__addimage__.arrayBufferToBinaryString(ss);return{alpha:this.__addimage__.arrayBufferToBinaryString(rs),data:ys,index:e,alias:St,colorSpace:"DeviceRGB",bitsPerComponent:8,width:_e.width,height:_e.height}},E.API.setLanguage=function(_e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[_e]!==void 0&&(this.internal.languageSettings.languageCode=_e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(_e,e){var St,es,ts=(e=e||{}).font||this.internal.getFont(),ss=e.fontSize||this.internal.getFontSize(),rs=e.charSpace||this.internal.getCharSpace(),ns=e.widths?e.widths:ts.metadata.Unicode.widths,is=ns.fof?ns.fof:1,os=e.kerning?e.kerning:ts.metadata.Unicode.kerning,us=os.fof?os.fof:1,ps=e.doKerning!==!1,xs=0,cs=_e.length,ys=0,gs=ns[0]||is,vs=[];for(St=0;St<cs;St++)es=_e.charCodeAt(St),typeof ts.metadata.widthOfString=="function"?vs.push((ts.metadata.widthOfGlyph(ts.metadata.characterToGlyph(es))+rs*(1e3/ss)||0)/1e3):(xs=ps&&_typeof(os[es])==="object"&&!isNaN(parseInt(os[es][ys],10))?os[es][ys]/us:0,vs.push((ns[es]||gs)/is+xs)),ys=es;return vs},Yt=Vt.getStringUnitWidth=function(_e,e){var St=(e=e||{}).fontSize||this.internal.getFontSize(),es=e.font||this.internal.getFont(),ts=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(_e=Vt.processArabic(_e)),typeof es.metadata.widthOfString=="function"?es.metadata.widthOfString(_e,St,ts)/St:Gt.apply(this,arguments).reduce(function(ss,rs){return ss+rs},0)},Jt=function(_e,e,St,es){for(var ts=[],ss=0,rs=_e.length,ns=0;ss!==rs&&ns+e[ss]<St;)ns+=e[ss],ss++;ts.push(_e.slice(0,ss));var is=ss;for(ns=0;ss!==rs;)ns+e[ss]>es&&(ts.push(_e.slice(is,ss)),ns=0,is=ss),ns+=e[ss],ss++;return is!==ss&&ts.push(_e.slice(is,ss)),ts},Xt=function(_e,e,St){St||(St={});var es,ts,ss,rs,ns,is,os,us=[],ps=[us],xs=St.textIndent||0,cs=0,ys=0,gs=_e.split(" "),vs=Gt.apply(this,[" ",St])[0];if(is=St.lineIndent===-1?gs[0].length+2:St.lineIndent||0){var ds=Array(is).join(" "),fs=[];gs.map(function(Os){(Os=Os.split(/\s*\n/)).length>1?fs=fs.concat(Os.map(function(Hs,Qs){return(Qs&&Hs.length?`
`:"")+Hs})):fs.push(Os[0])}),gs=fs,is=Yt.apply(this,[ds,St])}for(ss=0,rs=gs.length;ss<rs;ss++){var Es=0;if(es=gs[ss],is&&es[0]==`
`&&(es=es.substr(1),Es=1),xs+cs+(ys=(ts=Gt.apply(this,[es,St])).reduce(function(Os,Hs){return Os+Hs},0))>e||Es){if(ys>e){for(ns=Jt.apply(this,[es,ts,e-(xs+cs),e]),us.push(ns.shift()),us=[ns.pop()];ns.length;)ps.push([ns.shift()]);ys=ts.slice(es.length-(us[0]?us[0].length:0)).reduce(function(Os,Hs){return Os+Hs},0)}else us=[es];ps.push(us),xs=ys+is,cs=vs}else us.push(es),xs+=cs+ys,cs=vs}return os=is?function(Os,Hs){return(Hs?ds:"")+Os.join(" ")}:function(Os){return Os.join(" ")},ps.map(os)},Vt.splitTextToSize=function(_e,e,St){var es,ts=(St=St||{}).fontSize||this.internal.getFontSize(),ss=(function(us){if(us.widths&&us.kerning)return{widths:us.widths,kerning:us.kerning};var ps=this.internal.getFont(us.fontName,us.fontStyle);return ps.metadata.Unicode?{widths:ps.metadata.Unicode.widths||{0:1},kerning:ps.metadata.Unicode.kerning||{}}:{font:ps.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,St);es=Array.isArray(_e)?_e:String(_e).split(/\r?\n/);var rs=1*this.internal.scaleFactor*e/ts;ss.textIndent=St.textIndent?1*St.textIndent*this.internal.scaleFactor/ts:0,ss.lineIndent=St.lineIndent;var ns,is,os=[];for(ns=0,is=es.length;ns<is;ns++)os=os.concat(Xt.apply(this,[es[ns],rs,ss]));return os},function(_e){_e.__fontmetrics__=_e.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",St={},es={},ts=0;ts<e.length;ts++)St[e[ts]]="0123456789abcdef"[ts],es["0123456789abcdef"[ts]]=e[ts];var ss=function(ps){return"0x"+parseInt(ps,10).toString(16)},rs=_e.__fontmetrics__.compress=function(ps){var xs,cs,ys,gs,vs=["{"];for(var ds in ps){if(xs=ps[ds],isNaN(parseInt(ds,10))?cs="'"+ds+"'":(ds=parseInt(ds,10),cs=(cs=ss(ds).slice(2)).slice(0,-1)+es[cs.slice(-1)]),typeof xs=="number")xs<0?(ys=ss(xs).slice(3),gs="-"):(ys=ss(xs).slice(2),gs=""),ys=gs+ys.slice(0,-1)+es[ys.slice(-1)];else{if(_typeof(xs)!=="object")throw new Error("Don't know what to do with value type "+_typeof(xs)+".");ys=rs(xs)}vs.push(cs+ys)}return vs.push("}"),vs.join("")},ns=_e.__fontmetrics__.uncompress=function(ps){if(typeof ps!="string")throw new Error("Invalid argument passed to uncompress.");for(var xs,cs,ys,gs,vs={},ds=1,fs=vs,Es=[],Os="",Hs="",Qs=ps.length-1,zs=1;zs<Qs;zs+=1)(gs=ps[zs])=="'"?xs?(ys=xs.join(""),xs=void 0):xs=[]:xs?xs.push(gs):gs=="{"?(Es.push([fs,ys]),fs={},ys=void 0):gs=="}"?((cs=Es.pop())[0][cs[1]]=fs,ys=void 0,fs=cs[0]):gs=="-"?ds=-1:ys===void 0?St.hasOwnProperty(gs)?(Os+=St[gs],ys=parseInt(Os,16)*ds,ds=1,Os=""):Os+=gs:St.hasOwnProperty(gs)?(Hs+=St[gs],fs[ys]=parseInt(Hs,16)*ds,ds=1,ys=void 0,Hs=""):Hs+=gs;return vs},is={codePages:["WinAnsiEncoding"],WinAnsiEncoding:ns("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},os={Unicode:{Courier:is,"Courier-Bold":is,"Courier-BoldOblique":is,"Courier-Oblique":is,Helvetica:is,"Helvetica-Bold":is,"Helvetica-BoldOblique":is,"Helvetica-Oblique":is,"Times-Roman":is,"Times-Bold":is,"Times-BoldItalic":is,"Times-Italic":is}},us={Unicode:{"Courier-Oblique":ns("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":ns("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":ns("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:ns("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":ns("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":ns("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:ns("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:ns("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":ns("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:ns("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":ns("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":ns("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":ns("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":ns("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};_e.events.push(["addFont",function(ps){var xs=ps.font,cs=us.Unicode[xs.postScriptName];cs&&(xs.metadata.Unicode={},xs.metadata.Unicode.widths=cs.widths,xs.metadata.Unicode.kerning=cs.kerning);var ys=os.Unicode[xs.postScriptName];ys&&(xs.metadata.Unicode.encoding=ys,xs.encoding=ys.codePages[0])}])}(E.API),function(_e){var e=function(St){for(var es=St.length,ts=new Uint8Array(es),ss=0;ss<es;ss++)ts[ss]=St.charCodeAt(ss);return ts};_e.API.events.push(["addFont",function(St){var es=void 0,ts=St.font,ss=St.instance;if(!ts.isStandardFont){if(ss===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+ts.postScriptName+"').");if(typeof(es=ss.existsFileInVFS(ts.postScriptName)===!1?ss.loadFile(ts.postScriptName):ss.getFileFromVFS(ts.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+ts.postScriptName+"').");(function(rs,ns){ns=/^\x00\x01\x00\x00/.test(ns)?e(ns):e(u(ns)),rs.metadata=_e.API.TTFFont.open(ns),rs.metadata.Unicode=rs.metadata.Unicode||{encoding:{},kerning:{},widths:[]},rs.metadata.glyIdsUsed=[0]})(ts,es)}}])}(E),function(_e){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-3afc2e62.js"),[],import.meta.url)).catch(function(St){return Promise.reject(new Error("Could not load canvg: "+St))}).then(function(St){return St.default?St.default:St})}E.API.addSvgAsImage=function(St,es,ts,ss,rs,ns,is,os){if(isNaN(es)||isNaN(ts))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(ss)||isNaN(rs))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var us=document.createElement("canvas");us.width=ss,us.height=rs;var ps=us.getContext("2d");ps.fillStyle="#fff",ps.fillRect(0,0,us.width,us.height);var xs={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},cs=this;return e().then(function(ys){return ys.fromString(ps,St,xs)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(ys){return ys.render(xs)}).then(function(){cs.addImage(us.toDataURL("image/jpeg",1),es,ts,ss,rs,is,os)})}}(),E.API.putTotalPages=function(_e){var e,St=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(_e,"g"),St=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(_e,this.internal.getFont()),"g"),St=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var es=1;es<=this.internal.getNumberOfPages();es++)for(var ts=0;ts<this.internal.pages[es].length;ts++)this.internal.pages[es][ts]=this.internal.pages[es][ts].replace(e,St);return this},E.API.viewerPreferences=function(_e,e){var St;_e=_e||{},e=e||!1;var es,ts,ss,rs={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},ns=Object.keys(rs),is=[],os=0,us=0,ps=0;function xs(ys,gs){var vs,ds=!1;for(vs=0;vs<ys.length;vs+=1)ys[vs]===gs&&(ds=!0);return ds}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(rs)),this.internal.viewerpreferences.isSubscribed=!1),St=this.internal.viewerpreferences.configuration,_e==="reset"||e===!0){var cs=ns.length;for(ps=0;ps<cs;ps+=1)St[ns[ps]].value=St[ns[ps]].defaultValue,St[ns[ps]].explicitSet=!1}if(_typeof(_e)==="object"){for(ts in _e)if(ss=_e[ts],xs(ns,ts)&&ss!==void 0){if(St[ts].type==="boolean"&&typeof ss=="boolean")St[ts].value=ss;else if(St[ts].type==="name"&&xs(St[ts].valueSet,ss))St[ts].value=ss;else if(St[ts].type==="integer"&&Number.isInteger(ss))St[ts].value=ss;else if(St[ts].type==="array"){for(os=0;os<ss.length;os+=1)if(es=!0,ss[os].length===1&&typeof ss[os][0]=="number")is.push(String(ss[os]-1));else if(ss[os].length>1){for(us=0;us<ss[os].length;us+=1)typeof ss[os][us]!="number"&&(es=!1);es===!0&&is.push([ss[os][0]-1,ss[os][1]-1].join(" "))}St[ts].value="["+is.join(" ")+"]"}else St[ts].value=St[ts].defaultValue;St[ts].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var ys,gs=[];for(ys in St)St[ys].explicitSet===!0&&(St[ys].type==="name"?gs.push("/"+ys+" /"+St[ys].value):gs.push("/"+ys+" "+St[ys].value));gs.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+gs.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=St,this},function(_e){var e=function(){var es='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',ts=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),ss=unescape(encodeURIComponent(es)),rs=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),ns=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),is=unescape(encodeURIComponent("</x:xmpmeta>")),os=ss.length+rs.length+ns.length+ts.length+is.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+os+" >>"),this.internal.write("stream"),this.internal.write(ts+ss+rs+ns+is),this.internal.write("endstream"),this.internal.write("endobj")},St=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};_e.addMetadata=function(es,ts){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:es,namespaceuri:ts||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",St),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(_e){var e=_e.API,St=e.pdfEscape16=function(ss,rs){for(var ns,is=rs.metadata.Unicode.widths,os=["","0","00","000","0000"],us=[""],ps=0,xs=ss.length;ps<xs;++ps){if(ns=rs.metadata.characterToGlyph(ss.charCodeAt(ps)),rs.metadata.glyIdsUsed.push(ns),rs.metadata.toUnicode[ns]=ss.charCodeAt(ps),is.indexOf(ns)==-1&&(is.push(ns),is.push([parseInt(rs.metadata.widthOfGlyph(ns),10)])),ns=="0")return us.join("");ns=ns.toString(16),us.push(os[4-ns.length],ns)}return us.join("")},es=function(ss){var rs,ns,is,os,us,ps,xs;for(us=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,is=[],ps=0,xs=(ns=Object.keys(ss).sort(function(cs,ys){return cs-ys})).length;ps<xs;ps++)rs=ns[ps],is.length>=100&&(us+=`
`+is.length+` beginbfchar
`+is.join(`
`)+`
endbfchar`,is=[]),ss[rs]!==void 0&&ss[rs]!==null&&typeof ss[rs].toString=="function"&&(os=("0000"+ss[rs].toString(16)).slice(-4),rs=("0000"+(+rs).toString(16)).slice(-4),is.push("<"+rs+"><"+os+">"));return is.length&&(us+=`
`+is.length+` beginbfchar
`+is.join(`
`)+`
endbfchar
`),us+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(ss){(function(rs){var ns=rs.font,is=rs.out,os=rs.newObject,us=rs.putStream;if(ns.metadata instanceof _e.API.TTFFont&&ns.encoding==="Identity-H"){for(var ps=ns.metadata.Unicode.widths,xs=ns.metadata.subset.encode(ns.metadata.glyIdsUsed,1),cs="",ys=0;ys<xs.length;ys++)cs+=String.fromCharCode(xs[ys]);var gs=os();us({data:cs,addLength1:!0,objectId:gs}),is("endobj");var vs=os();us({data:es(ns.metadata.toUnicode),addLength1:!0,objectId:vs}),is("endobj");var ds=os();is("<<"),is("/Type /FontDescriptor"),is("/FontName /"+F(ns.fontName)),is("/FontFile2 "+gs+" 0 R"),is("/FontBBox "+_e.API.PDFObject.convert(ns.metadata.bbox)),is("/Flags "+ns.metadata.flags),is("/StemV "+ns.metadata.stemV),is("/ItalicAngle "+ns.metadata.italicAngle),is("/Ascent "+ns.metadata.ascender),is("/Descent "+ns.metadata.decender),is("/CapHeight "+ns.metadata.capHeight),is(">>"),is("endobj");var fs=os();is("<<"),is("/Type /Font"),is("/BaseFont /"+F(ns.fontName)),is("/FontDescriptor "+ds+" 0 R"),is("/W "+_e.API.PDFObject.convert(ps)),is("/CIDToGIDMap /Identity"),is("/DW 1000"),is("/Subtype /CIDFontType2"),is("/CIDSystemInfo"),is("<<"),is("/Supplement 0"),is("/Registry (Adobe)"),is("/Ordering ("+ns.encoding+")"),is(">>"),is(">>"),is("endobj"),ns.objectNumber=os(),is("<<"),is("/Type /Font"),is("/Subtype /Type0"),is("/ToUnicode "+vs+" 0 R"),is("/BaseFont /"+F(ns.fontName)),is("/Encoding /"+ns.encoding),is("/DescendantFonts ["+fs+" 0 R]"),is(">>"),is("endobj"),ns.isAlreadyPutted=!0}})(ss)}]),e.events.push(["putFont",function(ss){(function(rs){var ns=rs.font,is=rs.out,os=rs.newObject,us=rs.putStream;if(ns.metadata instanceof _e.API.TTFFont&&ns.encoding==="WinAnsiEncoding"){for(var ps=ns.metadata.rawData,xs="",cs=0;cs<ps.length;cs++)xs+=String.fromCharCode(ps[cs]);var ys=os();us({data:xs,addLength1:!0,objectId:ys}),is("endobj");var gs=os();us({data:es(ns.metadata.toUnicode),addLength1:!0,objectId:gs}),is("endobj");var vs=os();is("<<"),is("/Descent "+ns.metadata.decender),is("/CapHeight "+ns.metadata.capHeight),is("/StemV "+ns.metadata.stemV),is("/Type /FontDescriptor"),is("/FontFile2 "+ys+" 0 R"),is("/Flags 96"),is("/FontBBox "+_e.API.PDFObject.convert(ns.metadata.bbox)),is("/FontName /"+F(ns.fontName)),is("/ItalicAngle "+ns.metadata.italicAngle),is("/Ascent "+ns.metadata.ascender),is(">>"),is("endobj"),ns.objectNumber=os();for(var ds=0;ds<ns.metadata.hmtx.widths.length;ds++)ns.metadata.hmtx.widths[ds]=parseInt(ns.metadata.hmtx.widths[ds]*(1e3/ns.metadata.head.unitsPerEm));is("<</Subtype/TrueType/Type/Font/ToUnicode "+gs+" 0 R/BaseFont/"+F(ns.fontName)+"/FontDescriptor "+vs+" 0 R/Encoding/"+ns.encoding+" /FirstChar 29 /LastChar 255 /Widths "+_e.API.PDFObject.convert(ns.metadata.hmtx.widths)+">>"),is("endobj"),ns.isAlreadyPutted=!0}})(ss)}]);var ts=function(ss){var rs,ns=ss.text||"",is=ss.x,os=ss.y,us=ss.options||{},ps=ss.mutex||{},xs=ps.pdfEscape,cs=ps.activeFontKey,ys=ps.fonts,gs=cs,vs="",ds=0,fs="",Es=ys[gs].encoding;if(ys[gs].encoding!=="Identity-H")return{text:ns,x:is,y:os,options:us,mutex:ps};for(fs=ns,gs=cs,Array.isArray(ns)&&(fs=ns[0]),ds=0;ds<fs.length;ds+=1)ys[gs].metadata.hasOwnProperty("cmap")&&(rs=ys[gs].metadata.cmap.unicode.codeMap[fs[ds].charCodeAt(0)]),rs||fs[ds].charCodeAt(0)<256&&ys[gs].metadata.hasOwnProperty("Unicode")?vs+=fs[ds]:vs+="";var Os="";return parseInt(gs.slice(1))<14||Es==="WinAnsiEncoding"?Os=xs(vs,gs).split("").map(function(Hs){return Hs.charCodeAt(0).toString(16)}).join(""):Es==="Identity-H"&&(Os=St(vs,ys[gs])),ps.isHex=!0,{text:Os,x:is,y:os,options:us,mutex:ps}};e.events.push(["postProcessText",function(ss){var rs=ss.text||"",ns=[],is={text:rs,x:ss.x,y:ss.y,options:ss.options,mutex:ss.mutex};if(Array.isArray(rs)){var os=0;for(os=0;os<rs.length;os+=1)Array.isArray(rs[os])&&rs[os].length===3?ns.push([ts(Object.assign({},is,{text:rs[os][0]})).text,rs[os][1],rs[os][2]]):ns.push(ts(Object.assign({},is,{text:rs[os]})).text);ss.text=ns}else ss.text=ts(Object.assign({},is,{text:rs})).text}])}(E),function(_e){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};_e.existsFileInVFS=function(St){return e.call(this),this.internal.vFS[St]!==void 0},_e.addFileToVFS=function(St,es){return e.call(this),this.internal.vFS[St]=es,this},_e.getFileFromVFS=function(St){return e.call(this),this.internal.vFS[St]!==void 0?this.internal.vFS[St]:null}}(E.API),function(_e){_e.__bidiEngine__=_e.prototype.__bidiEngine__=function(es){var ts,ss,rs,ns,is,os,us,ps=e,xs=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],cs=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ys={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},gs={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},vs=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],ds=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),fs=!1,Es=0;this.__bidiEngine__={};var Os=function(bs){var As=bs.charCodeAt(),ks=As>>8,$s=gs[ks];return $s!==void 0?ps[256*$s+(255&As)]:ks===252||ks===253?"AL":ds.test(ks)?"L":ks===8?"R":"N"},Hs=function(bs){for(var As,ks=0;ks<bs.length;ks++){if((As=Os(bs.charAt(ks)))==="L")return!1;if(As==="R")return!0}return!1},Qs=function(bs,As,ks,$s){var qs,Cs,Us,Ps,er=As[$s];switch(er){case"L":case"R":fs=!1;break;case"N":case"AN":break;case"EN":fs&&(er="AN");break;case"AL":fs=!0,er="R";break;case"WS":er="N";break;case"CS":$s<1||$s+1>=As.length||(qs=ks[$s-1])!=="EN"&&qs!=="AN"||(Cs=As[$s+1])!=="EN"&&Cs!=="AN"?er="N":fs&&(Cs="AN"),er=Cs===qs?Cs:"N";break;case"ES":er=(qs=$s>0?ks[$s-1]:"B")==="EN"&&$s+1<As.length&&As[$s+1]==="EN"?"EN":"N";break;case"ET":if($s>0&&ks[$s-1]==="EN"){er="EN";break}if(fs){er="N";break}for(Us=$s+1,Ps=As.length;Us<Ps&&As[Us]==="ET";)Us++;er=Us<Ps&&As[Us]==="EN"?"EN":"N";break;case"NSM":if(rs&&!ns){for(Ps=As.length,Us=$s+1;Us<Ps&&As[Us]==="NSM";)Us++;if(Us<Ps){var tr=bs[$s],vr=tr>=1425&&tr<=2303||tr===64286;if(qs=As[Us],vr&&(qs==="R"||qs==="AL")){er="R";break}}}er=$s<1||(qs=As[$s-1])==="B"?"N":ks[$s-1];break;case"B":fs=!1,ts=!0,er=Es;break;case"S":ss=!0,er="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":fs=!1;break;case"BN":er="N"}return er},zs=function(bs,As,ks){var $s=bs.split("");return ks&&Ls($s,ks,{hiLevel:Es}),$s.reverse(),As&&As.reverse(),$s.join("")},Ls=function(bs,As,ks){var $s,qs,Cs,Us,Ps,er=-1,tr=bs.length,vr=0,ws=[],Vs=Es?cs:xs,Ys=[];for(fs=!1,ts=!1,ss=!1,qs=0;qs<tr;qs++)Ys[qs]=Os(bs[qs]);for(Cs=0;Cs<tr;Cs++){if(Ps=vr,ws[Cs]=Qs(bs,Ys,ws,Cs),$s=240&(vr=Vs[Ps][ys[ws[Cs]]]),vr&=15,As[Cs]=Us=Vs[vr][5],$s>0)if($s===16){for(qs=er;qs<Cs;qs++)As[qs]=1;er=-1}else er=-1;if(Vs[vr][6])er===-1&&(er=Cs);else if(er>-1){for(qs=er;qs<Cs;qs++)As[qs]=Us;er=-1}Ys[Cs]==="B"&&(As[Cs]=0),ks.hiLevel|=Us}ss&&function(Ws,sr,nr){for(var pr=0;pr<nr;pr++)if(Ws[pr]==="S"){sr[pr]=Es;for(var xr=pr-1;xr>=0&&Ws[xr]==="WS";xr--)sr[xr]=Es}}(Ys,As,tr)},Bs=function(bs,As,ks,$s,qs){if(!(qs.hiLevel<bs)){if(bs===1&&Es===1&&!ts)return As.reverse(),void(ks&&ks.reverse());for(var Cs,Us,Ps,er,tr=As.length,vr=0;vr<tr;){if($s[vr]>=bs){for(Ps=vr+1;Ps<tr&&$s[Ps]>=bs;)Ps++;for(er=vr,Us=Ps-1;er<Us;er++,Us--)Cs=As[er],As[er]=As[Us],As[Us]=Cs,ks&&(Cs=ks[er],ks[er]=ks[Us],ks[Us]=Cs);vr=Ps}vr++}}},Gs=function(bs,As,ks){var $s=bs.split(""),qs={hiLevel:Es};return ks||(ks=[]),Ls($s,ks,qs),function(Cs,Us,Ps){if(Ps.hiLevel!==0&&us)for(var er,tr=0;tr<Cs.length;tr++)Us[tr]===1&&(er=vs.indexOf(Cs[tr]))>=0&&(Cs[tr]=vs[er+1])}($s,ks,qs),Bs(2,$s,As,ks,qs),Bs(1,$s,As,ks,qs),$s.join("")};return this.__bidiEngine__.doBidiReorder=function(bs,As,ks){if(function(qs,Cs){if(Cs)for(var Us=0;Us<qs.length;Us++)Cs[Us]=Us;ns===void 0&&(ns=Hs(qs)),os===void 0&&(os=Hs(qs))}(bs,As),rs||!is||os)if(rs&&is&&ns^os)Es=ns?1:0,bs=zs(bs,As,ks);else if(!rs&&is&&os)Es=ns?1:0,bs=Gs(bs,As,ks),bs=zs(bs,As);else if(!rs||ns||is||os){if(rs&&!is&&ns^os)bs=zs(bs,As),ns?(Es=0,bs=Gs(bs,As,ks)):(Es=1,bs=Gs(bs,As,ks),bs=zs(bs,As));else if(rs&&ns&&!is&&os)Es=1,bs=Gs(bs,As,ks),bs=zs(bs,As);else if(!rs&&!is&&ns^os){var $s=us;ns?(Es=1,bs=Gs(bs,As,ks),Es=0,us=!1,bs=Gs(bs,As,ks),us=$s):(Es=0,bs=Gs(bs,As,ks),bs=zs(bs,As),Es=1,us=!1,bs=Gs(bs,As,ks),us=$s,bs=zs(bs,As))}}else Es=0,bs=Gs(bs,As,ks);else Es=ns?1:0,bs=Gs(bs,As,ks);return bs},this.__bidiEngine__.setOptions=function(bs){bs&&(rs=bs.isInputVisual,is=bs.isOutputVisual,ns=bs.isInputRtl,os=bs.isOutputRtl,us=bs.isSymmetricSwapping)},this.__bidiEngine__.setOptions(es),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],St=new _e.__bidiEngine__({isInputVisual:!0});_e.API.events.push(["postProcessText",function(es){var ts=es.text;es.x,es.y;var ss=es.options||{};es.mutex,ss.lang;var rs=[];if(ss.isInputVisual=typeof ss.isInputVisual!="boolean"||ss.isInputVisual,St.setOptions(ss),Object.prototype.toString.call(ts)==="[object Array]"){var ns=0;for(rs=[],ns=0;ns<ts.length;ns+=1)Object.prototype.toString.call(ts[ns])==="[object Array]"?rs.push([St.doBidiReorder(ts[ns][0]),ts[ns][1],ts[ns][2]]):rs.push([St.doBidiReorder(ts[ns])]);es.text=rs}else es.text=St.doBidiReorder(ts);St.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function _e(e){var St;if(this.rawData=e,St=this.contents=new ne(e),this.contents.pos=4,St.readString(4)==="ttcf")throw new Error("TTCF not supported.");St.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return _e.open=function(e){return new _e(e)},_e.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},_e.prototype.registerTTF=function(){var e,St,es,ts,ss;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var rs,ns,is,os;for(os=[],rs=0,ns=(is=this.bbox).length;rs<ns;rs++)e=is[rs],os.push(Math.round(e*this.scaleFactor));return os}).call(this),this.stemV=0,this.post.exists?(es=255&(ts=this.post.italic_angle),32768&(St=ts>>16)&&(St=-(1+(65535^St))),this.italicAngle=+(St+"."+es)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(ss=this.familyClass)===1||ss===2||ss===3||ss===4||ss===5||ss===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},_e.prototype.characterToGlyph=function(e){var St;return((St=this.cmap.unicode)!=null?St.codeMap[e]:void 0)||0},_e.prototype.widthOfGlyph=function(e){var St;return St=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*St},_e.prototype.widthOfString=function(e,St,es){var ts,ss,rs,ns;for(rs=0,ss=0,ns=(e=""+e).length;0<=ns?ss<ns:ss>ns;ss=0<=ns?++ss:--ss)ts=e.charCodeAt(ss),rs+=this.widthOfGlyph(this.characterToGlyph(ts))+es*(1e3/St)||0;return rs*(St/1e3)},_e.prototype.lineHeight=function(e,St){var es;return St==null&&(St=!1),es=St?this.lineGap:0,(this.ascender+es-this.decender)/1e3*e},_e}();var re,ne=function(){function _e(e){this.data=e??[],this.pos=0,this.length=this.data.length}return _e.prototype.readByte=function(){return this.data[this.pos++]},_e.prototype.writeByte=function(e){return this.data[this.pos++]=e},_e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},_e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},_e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},_e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},_e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},_e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},_e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},_e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},_e.prototype.readString=function(e){var St,es;for(es=[],St=0;0<=e?St<e:St>e;St=0<=e?++St:--St)es[St]=String.fromCharCode(this.readByte());return es.join("")},_e.prototype.writeString=function(e){var St,es,ts;for(ts=[],St=0,es=e.length;0<=es?St<es:St>es;St=0<=es?++St:--St)ts.push(this.writeByte(e.charCodeAt(St)));return ts},_e.prototype.readShort=function(){return this.readInt16()},_e.prototype.writeShort=function(e){return this.writeInt16(e)},_e.prototype.readLongLong=function(){var e,St,es,ts,ss,rs,ns,is;return e=this.readByte(),St=this.readByte(),es=this.readByte(),ts=this.readByte(),ss=this.readByte(),rs=this.readByte(),ns=this.readByte(),is=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^St)+1099511627776*(255^es)+4294967296*(255^ts)+16777216*(255^ss)+65536*(255^rs)+256*(255^ns)+(255^is)+1):72057594037927940*e+281474976710656*St+1099511627776*es+4294967296*ts+16777216*ss+65536*rs+256*ns+is},_e.prototype.writeLongLong=function(e){var St,es;return St=Math.floor(e/4294967296),es=4294967295&e,this.writeByte(St>>24&255),this.writeByte(St>>16&255),this.writeByte(St>>8&255),this.writeByte(255&St),this.writeByte(es>>24&255),this.writeByte(es>>16&255),this.writeByte(es>>8&255),this.writeByte(255&es)},_e.prototype.readInt=function(){return this.readInt32()},_e.prototype.writeInt=function(e){return this.writeInt32(e)},_e.prototype.read=function(e){var St,es;for(St=[],es=0;0<=e?es<e:es>e;es=0<=e?++es:--es)St.push(this.readByte());return St},_e.prototype.write=function(e){var St,es,ts,ss;for(ss=[],es=0,ts=e.length;es<ts;es++)St=e[es],ss.push(this.writeByte(St));return ss},_e}(),ie=function(){var _e;function e(St){var es,ts,ss;for(this.scalarType=St.readInt(),this.tableCount=St.readShort(),this.searchRange=St.readShort(),this.entrySelector=St.readShort(),this.rangeShift=St.readShort(),this.tables={},ts=0,ss=this.tableCount;0<=ss?ts<ss:ts>ss;ts=0<=ss?++ts:--ts)es={tag:St.readString(4),checksum:St.readInt(),offset:St.readInt(),length:St.readInt()},this.tables[es.tag]=es}return e.prototype.encode=function(St){var es,ts,ss,rs,ns,is,os,us,ps,xs,cs,ys,gs;for(gs in cs=Object.keys(St).length,is=Math.log(2),ps=16*Math.floor(Math.log(cs)/is),rs=Math.floor(ps/is),us=16*cs-ps,(ts=new ne).writeInt(this.scalarType),ts.writeShort(cs),ts.writeShort(ps),ts.writeShort(rs),ts.writeShort(us),ss=16*cs,os=ts.pos+ss,ns=null,ys=[],St)for(xs=St[gs],ts.writeString(gs),ts.writeInt(_e(xs)),ts.writeInt(os),ts.writeInt(xs.length),ys=ys.concat(xs),gs==="head"&&(ns=os),os+=xs.length;os%4;)ys.push(0),os++;return ts.write(ys),es=2981146554-_e(ts.data),ts.pos=ns+8,ts.writeUInt32(es),ts.data},_e=function(St){var es,ts,ss,rs;for(St=ve.call(St);St.length%4;)St.push(0);for(ss=new ne(St),ts=0,es=0,rs=St.length;es<rs;es=es+=4)ts+=ss.readUInt32();return 4294967295&ts},e}(),ae={}.hasOwnProperty,oe=function(_e,e){for(var St in e)ae.call(e,St)&&(_e[St]=e[St]);function es(){this.constructor=_e}return es.prototype=e.prototype,_e.prototype=new es,_e.__super__=e.prototype,_e};re=function(){function _e(e){var St;this.file=e,St=this.file.directory.tables[this.tag],this.exists=!!St,St&&(this.offset=St.offset,this.length=St.length,this.parse(this.file.contents))}return _e.prototype.parse=function(){},_e.prototype.encode=function(){},_e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},_e}();var se=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.revision=St.readInt(),this.checkSumAdjustment=St.readInt(),this.magicNumber=St.readInt(),this.flags=St.readShort(),this.unitsPerEm=St.readShort(),this.created=St.readLongLong(),this.modified=St.readLongLong(),this.xMin=St.readShort(),this.yMin=St.readShort(),this.xMax=St.readShort(),this.yMax=St.readShort(),this.macStyle=St.readShort(),this.lowestRecPPEM=St.readShort(),this.fontDirectionHint=St.readShort(),this.indexToLocFormat=St.readShort(),this.glyphDataFormat=St.readShort()},e.prototype.encode=function(St){var es;return(es=new ne).writeInt(this.version),es.writeInt(this.revision),es.writeInt(this.checkSumAdjustment),es.writeInt(this.magicNumber),es.writeShort(this.flags),es.writeShort(this.unitsPerEm),es.writeLongLong(this.created),es.writeLongLong(this.modified),es.writeShort(this.xMin),es.writeShort(this.yMin),es.writeShort(this.xMax),es.writeShort(this.yMax),es.writeShort(this.macStyle),es.writeShort(this.lowestRecPPEM),es.writeShort(this.fontDirectionHint),es.writeShort(St),es.writeShort(this.glyphDataFormat),es.data},e}(),ce=function(){function _e(e,St){var es,ts,ss,rs,ns,is,os,us,ps,xs,cs,ys,gs,vs,ds,fs,Es;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=St+e.readInt(),ps=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(is=0;is<256;++is)this.codeMap[is]=e.readByte();break;case 4:for(cs=e.readUInt16(),xs=cs/2,e.pos+=6,ss=function(){var Os,Hs;for(Hs=[],is=Os=0;0<=xs?Os<xs:Os>xs;is=0<=xs?++Os:--Os)Hs.push(e.readUInt16());return Hs}(),e.pos+=2,gs=function(){var Os,Hs;for(Hs=[],is=Os=0;0<=xs?Os<xs:Os>xs;is=0<=xs?++Os:--Os)Hs.push(e.readUInt16());return Hs}(),os=function(){var Os,Hs;for(Hs=[],is=Os=0;0<=xs?Os<xs:Os>xs;is=0<=xs?++Os:--Os)Hs.push(e.readUInt16());return Hs}(),us=function(){var Os,Hs;for(Hs=[],is=Os=0;0<=xs?Os<xs:Os>xs;is=0<=xs?++Os:--Os)Hs.push(e.readUInt16());return Hs}(),ts=(this.length-e.pos+this.offset)/2,ns=function(){var Os,Hs;for(Hs=[],is=Os=0;0<=ts?Os<ts:Os>ts;is=0<=ts?++Os:--Os)Hs.push(e.readUInt16());return Hs}(),is=ds=0,Es=ss.length;ds<Es;is=++ds)for(vs=ss[is],es=fs=ys=gs[is];ys<=vs?fs<=vs:fs>=vs;es=ys<=vs?++fs:--fs)us[is]===0?rs=es+os[is]:(rs=ns[us[is]/2+(es-ys)-(xs-is)]||0)!==0&&(rs+=os[is]),this.codeMap[es]=65535&rs}e.pos=ps}return _e.encode=function(e,St){var es,ts,ss,rs,ns,is,os,us,ps,xs,cs,ys,gs,vs,ds,fs,Es,Os,Hs,Qs,zs,Ls,Bs,Gs,bs,As,ks,$s,qs,Cs,Us,Ps,er,tr,vr,ws,Vs,Ys,Ws,sr,nr,pr,xr,Tr,Dr,zr;switch($s=new ne,rs=Object.keys(e).sort(function(or,Nr){return or-Nr}),St){case"macroman":for(gs=0,vs=function(){var or=[];for(ys=0;ys<256;++ys)or.push(0);return or}(),fs={0:0},ss={},qs=0,er=rs.length;qs<er;qs++)fs[xr=e[ts=rs[qs]]]==null&&(fs[xr]=++gs),ss[ts]={old:e[ts],new:fs[e[ts]]},vs[ts]=fs[e[ts]];return $s.writeUInt16(1),$s.writeUInt16(0),$s.writeUInt32(12),$s.writeUInt16(0),$s.writeUInt16(262),$s.writeUInt16(0),$s.write(vs),{charMap:ss,subtable:$s.data,maxGlyphID:gs+1};case"unicode":for(As=[],ps=[],Es=0,fs={},es={},ds=os=null,Cs=0,tr=rs.length;Cs<tr;Cs++)fs[Hs=e[ts=rs[Cs]]]==null&&(fs[Hs]=++Es),es[ts]={old:Hs,new:fs[Hs]},ns=fs[Hs]-ts,ds!=null&&ns===os||(ds&&ps.push(ds),As.push(ts),os=ns),ds=ts;for(ds&&ps.push(ds),ps.push(65535),As.push(65535),Gs=2*(Bs=As.length),Ls=2*Math.pow(Math.log(Bs)/Math.LN2,2),xs=Math.log(Ls/2)/Math.LN2,zs=2*Bs-Ls,is=[],Qs=[],cs=[],ys=Us=0,vr=As.length;Us<vr;ys=++Us){if(bs=As[ys],us=ps[ys],bs===65535){is.push(0),Qs.push(0);break}if(bs-(ks=es[bs].new)>=32768)for(is.push(0),Qs.push(2*(cs.length+Bs-ys)),ts=Ps=bs;bs<=us?Ps<=us:Ps>=us;ts=bs<=us?++Ps:--Ps)cs.push(es[ts].new);else is.push(ks-bs),Qs.push(0)}for($s.writeUInt16(3),$s.writeUInt16(1),$s.writeUInt32(12),$s.writeUInt16(4),$s.writeUInt16(16+8*Bs+2*cs.length),$s.writeUInt16(0),$s.writeUInt16(Gs),$s.writeUInt16(Ls),$s.writeUInt16(xs),$s.writeUInt16(zs),nr=0,ws=ps.length;nr<ws;nr++)ts=ps[nr],$s.writeUInt16(ts);for($s.writeUInt16(0),pr=0,Vs=As.length;pr<Vs;pr++)ts=As[pr],$s.writeUInt16(ts);for(Tr=0,Ys=is.length;Tr<Ys;Tr++)ns=is[Tr],$s.writeUInt16(ns);for(Dr=0,Ws=Qs.length;Dr<Ws;Dr++)Os=Qs[Dr],$s.writeUInt16(Os);for(zr=0,sr=cs.length;zr<sr;zr++)gs=cs[zr],$s.writeUInt16(gs);return{charMap:es,subtable:$s.data,maxGlyphID:Es+1}}},_e}(),ue=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(St){var es,ts,ss;for(St.pos=this.offset,this.version=St.readUInt16(),ss=St.readUInt16(),this.tables=[],this.unicode=null,ts=0;0<=ss?ts<ss:ts>ss;ts=0<=ss?++ts:--ts)es=new ce(St,this.offset),this.tables.push(es),es.isUnicode&&this.unicode==null&&(this.unicode=es);return!0},e.encode=function(St,es){var ts,ss;return es==null&&(es="macroman"),ts=ce.encode(St,es),(ss=new ne).writeUInt16(0),ss.writeUInt16(1),ts.table=ss.data.concat(ts.subtable),ts},e}(),he=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.ascender=St.readShort(),this.decender=St.readShort(),this.lineGap=St.readShort(),this.advanceWidthMax=St.readShort(),this.minLeftSideBearing=St.readShort(),this.minRightSideBearing=St.readShort(),this.xMaxExtent=St.readShort(),this.caretSlopeRise=St.readShort(),this.caretSlopeRun=St.readShort(),this.caretOffset=St.readShort(),St.pos+=8,this.metricDataFormat=St.readShort(),this.numberOfMetrics=St.readUInt16()},e}(),le=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(St){if(St.pos=this.offset,this.version=St.readUInt16(),this.averageCharWidth=St.readShort(),this.weightClass=St.readUInt16(),this.widthClass=St.readUInt16(),this.type=St.readShort(),this.ySubscriptXSize=St.readShort(),this.ySubscriptYSize=St.readShort(),this.ySubscriptXOffset=St.readShort(),this.ySubscriptYOffset=St.readShort(),this.ySuperscriptXSize=St.readShort(),this.ySuperscriptYSize=St.readShort(),this.ySuperscriptXOffset=St.readShort(),this.ySuperscriptYOffset=St.readShort(),this.yStrikeoutSize=St.readShort(),this.yStrikeoutPosition=St.readShort(),this.familyClass=St.readShort(),this.panose=function(){var es,ts;for(ts=[],es=0;es<10;++es)ts.push(St.readByte());return ts}(),this.charRange=function(){var es,ts;for(ts=[],es=0;es<4;++es)ts.push(St.readInt());return ts}(),this.vendorID=St.readString(4),this.selection=St.readShort(),this.firstCharIndex=St.readShort(),this.lastCharIndex=St.readShort(),this.version>0&&(this.ascent=St.readShort(),this.descent=St.readShort(),this.lineGap=St.readShort(),this.winAscent=St.readShort(),this.winDescent=St.readShort(),this.codePageRange=function(){var es,ts;for(ts=[],es=0;es<2;es=++es)ts.push(St.readInt());return ts}(),this.version>1))return this.xHeight=St.readShort(),this.capHeight=St.readShort(),this.defaultChar=St.readShort(),this.breakChar=St.readShort(),this.maxContext=St.readShort()},e}(),fe=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(St){var es,ts,ss;switch(St.pos=this.offset,this.format=St.readInt(),this.italicAngle=St.readInt(),this.underlinePosition=St.readShort(),this.underlineThickness=St.readShort(),this.isFixedPitch=St.readInt(),this.minMemType42=St.readInt(),this.maxMemType42=St.readInt(),this.minMemType1=St.readInt(),this.maxMemType1=St.readInt(),this.format){case 65536:break;case 131072:var rs;for(ts=St.readUInt16(),this.glyphNameIndex=[],rs=0;0<=ts?rs<ts:rs>ts;rs=0<=ts?++rs:--rs)this.glyphNameIndex.push(St.readUInt16());for(this.names=[],ss=[];St.pos<this.offset+this.length;)es=St.readByte(),ss.push(this.names.push(St.readString(es)));return ss;case 151552:return ts=St.readUInt16(),this.offsets=St.read(ts);case 196608:break;case 262144:return this.map=(function(){var ns,is,os;for(os=[],rs=ns=0,is=this.file.maxp.numGlyphs;0<=is?ns<is:ns>is;rs=0<=is?++ns:--ns)os.push(St.readUInt32());return os}).call(this)}},e}(),de=function(_e,e){this.raw=_e,this.length=_e.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(St){var es,ts,ss,rs,ns,is,os,us,ps,xs,cs;for(St.pos=this.offset,St.readShort(),es=St.readShort(),is=St.readShort(),ts=[],rs=0;0<=es?rs<es:rs>es;rs=0<=es?++rs:--rs)ts.push({platformID:St.readShort(),encodingID:St.readShort(),languageID:St.readShort(),nameID:St.readShort(),length:St.readShort(),offset:this.offset+is+St.readShort()});for(os={},rs=ps=0,xs=ts.length;ps<xs;rs=++ps)ss=ts[rs],St.pos=ss.offset,us=St.readString(ss.length),ns=new de(us,ss),os[cs=ss.nameID]==null&&(os[cs]=[]),os[ss.nameID].push(ns);this.strings=os,this.copyright=os[0],this.fontFamily=os[1],this.fontSubfamily=os[2],this.uniqueSubfamily=os[3],this.fontName=os[4],this.version=os[5];try{this.postscriptName=os[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=os[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=os[7],this.manufacturer=os[8],this.designer=os[9],this.description=os[10],this.vendorUrl=os[11],this.designerUrl=os[12],this.license=os[13],this.licenseUrl=os[14],this.preferredFamily=os[15],this.preferredSubfamily=os[17],this.compatibleFull=os[18],this.sampleText=os[19]},e}(),ge=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(St){return St.pos=this.offset,this.version=St.readInt(),this.numGlyphs=St.readUInt16(),this.maxPoints=St.readUInt16(),this.maxContours=St.readUInt16(),this.maxCompositePoints=St.readUInt16(),this.maxComponentContours=St.readUInt16(),this.maxZones=St.readUInt16(),this.maxTwilightPoints=St.readUInt16(),this.maxStorage=St.readUInt16(),this.maxFunctionDefs=St.readUInt16(),this.maxInstructionDefs=St.readUInt16(),this.maxStackElements=St.readUInt16(),this.maxSizeOfInstructions=St.readUInt16(),this.maxComponentElements=St.readUInt16(),this.maxComponentDepth=St.readUInt16()},e}(),me=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(St){var es,ts,ss,rs,ns,is,os;for(St.pos=this.offset,this.metrics=[],es=0,is=this.file.hhea.numberOfMetrics;0<=is?es<is:es>is;es=0<=is?++es:--es)this.metrics.push({advance:St.readUInt16(),lsb:St.readInt16()});for(ss=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var us,ps;for(ps=[],es=us=0;0<=ss?us<ss:us>ss;es=0<=ss?++us:--us)ps.push(St.readInt16());return ps}(),this.widths=(function(){var us,ps,xs,cs;for(cs=[],us=0,ps=(xs=this.metrics).length;us<ps;us++)rs=xs[us],cs.push(rs.advance);return cs}).call(this),ts=this.widths[this.widths.length-1],os=[],es=ns=0;0<=ss?ns<ss:ns>ss;es=0<=ss?++ns:--ns)os.push(this.widths.push(ts));return os},e.prototype.forGlyph=function(St){return St in this.metrics?this.metrics[St]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[St-this.metrics.length]}},e}(),ve=[].slice,be=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(St){var es,ts,ss,rs,ns,is,os,us,ps,xs;return St in this.cache?this.cache[St]:(rs=this.file.loca,es=this.file.contents,ts=rs.indexOf(St),(ss=rs.lengthOf(St))===0?this.cache[St]=null:(es.pos=this.offset+ts,ns=(is=new ne(es.read(ss))).readShort(),us=is.readShort(),xs=is.readShort(),os=is.readShort(),ps=is.readShort(),this.cache[St]=ns===-1?new we(is,us,xs,os,ps):new ye(is,ns,us,xs,os,ps),this.cache[St]))},e.prototype.encode=function(St,es,ts){var ss,rs,ns,is,os;for(ns=[],rs=[],is=0,os=es.length;is<os;is++)ss=St[es[is]],rs.push(ns.length),ss&&(ns=ns.concat(ss.encode(ts)));return rs.push(ns.length),{table:ns,offsets:rs}},e}(),ye=function(){function _e(e,St,es,ts,ss,rs){this.raw=e,this.numberOfContours=St,this.xMin=es,this.yMin=ts,this.xMax=ss,this.yMax=rs,this.compound=!1}return _e.prototype.encode=function(){return this.raw.data},_e}(),we=function(){function _e(e,St,es,ts,ss){var rs,ns;for(this.raw=e,this.xMin=St,this.yMin=es,this.xMax=ts,this.yMax=ss,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],rs=this.raw;ns=rs.readShort(),this.glyphOffsets.push(rs.pos),this.glyphIDs.push(rs.readUInt16()),32&ns;)rs.pos+=1&ns?4:2,128&ns?rs.pos+=8:64&ns?rs.pos+=4:8&ns&&(rs.pos+=2)}return _e.prototype.encode=function(){var e,St,es;for(St=new ne(ve.call(this.raw.data)),e=0,es=this.glyphIDs.length;e<es;++e)St.pos=this.glyphOffsets[e];return St.data},_e}(),Ne=function(_e){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(St){var es,ts;return St.pos=this.offset,es=this.file.head.indexToLocFormat,this.offsets=es===0?(function(){var ss,rs;for(rs=[],ts=0,ss=this.length;ts<ss;ts+=2)rs.push(2*St.readUInt16());return rs}).call(this):(function(){var ss,rs;for(rs=[],ts=0,ss=this.length;ts<ss;ts+=4)rs.push(St.readUInt32());return rs}).call(this)},e.prototype.indexOf=function(St){return this.offsets[St]},e.prototype.lengthOf=function(St){return this.offsets[St+1]-this.offsets[St]},e.prototype.encode=function(St,es){for(var ts=new Uint32Array(this.offsets.length),ss=0,rs=0,ns=0;ns<ts.length;++ns)if(ts[ns]=ss,rs<es.length&&es[rs]==ns){++rs,ts[ns]=ss;var is=this.offsets[ns],os=this.offsets[ns+1]-is;os>0&&(ss+=os)}for(var us=new Array(4*ts.length),ps=0;ps<ts.length;++ps)us[4*ps+3]=255&ts[ps],us[4*ps+2]=(65280&ts[ps])>>8,us[4*ps+1]=(16711680&ts[ps])>>16,us[4*ps]=(4278190080&ts[ps])>>24;return us},e}(),Le=function(){function _e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return _e.prototype.generateCmap=function(){var e,St,es,ts,ss;for(St in ts=this.font.cmap.tables[0].codeMap,e={},ss=this.subset)es=ss[St],e[St]=ts[es];return e},_e.prototype.glyphsFor=function(e){var St,es,ts,ss,rs,ns,is;for(ts={},rs=0,ns=e.length;rs<ns;rs++)ts[ss=e[rs]]=this.font.glyf.glyphFor(ss);for(ss in St=[],ts)(es=ts[ss])!=null&&es.compound&&St.push.apply(St,es.glyphIDs);if(St.length>0)for(ss in is=this.glyphsFor(St))es=is[ss],ts[ss]=es;return ts},_e.prototype.encode=function(e,St){var es,ts,ss,rs,ns,is,os,us,ps,xs,cs,ys,gs,vs,ds;for(ts in es=ue.encode(this.generateCmap(),"unicode"),rs=this.glyphsFor(e),cs={0:0},ds=es.charMap)cs[(is=ds[ts]).old]=is.new;for(ys in xs=es.maxGlyphID,rs)ys in cs||(cs[ys]=xs++);return us=function(fs){var Es,Os;for(Es in Os={},fs)Os[fs[Es]]=Es;return Os}(cs),ps=Object.keys(us).sort(function(fs,Es){return fs-Es}),gs=function(){var fs,Es,Os;for(Os=[],fs=0,Es=ps.length;fs<Es;fs++)ns=ps[fs],Os.push(us[ns]);return Os}(),ss=this.font.glyf.encode(rs,gs,cs),os=this.font.loca.encode(ss.offsets,gs),vs={cmap:this.font.cmap.raw(),glyf:ss.table,loca:os,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(St)},this.font.os2.exists&&(vs["OS/2"]=this.font.os2.raw()),this.font.directory.encode(vs)},_e}();E.API.PDFObject=function(){var _e;function e(){}return _e=function(St,es){return(Array(es+1).join("0")+St).slice(-es)},e.convert=function(St){var es,ts,ss,rs;if(Array.isArray(St))return"["+function(){var ns,is,os;for(os=[],ns=0,is=St.length;ns<is;ns++)es=St[ns],os.push(e.convert(es));return os}().join(" ")+"]";if(typeof St=="string")return"/"+St;if(St!=null&&St.isString)return"("+St+")";if(St instanceof Date)return"(D:"+_e(St.getUTCFullYear(),4)+_e(St.getUTCMonth(),2)+_e(St.getUTCDate(),2)+_e(St.getUTCHours(),2)+_e(St.getUTCMinutes(),2)+_e(St.getUTCSeconds(),2)+"Z)";if({}.toString.call(St)==="[object Object]"){for(ts in ss=["<<"],St)rs=St[ts],ss.push("/"+ts+" "+e.convert(rs));return ss.push(">>"),ss.join(`
`)}return""+St},e}();const CATEGORIES=[{id:"carne",name:"Carne",color:"bg-red-100 text-red-800",temp:"0-4C",storage:"Frigorifero"},{id:"pesce",name:"Pesce",color:"bg-blue-100 text-blue-800",temp:"0-2C",storage:"Frigorifero"},{id:"latticini",name:"Latticini",color:"bg-yellow-100 text-yellow-800",temp:"2-4C",storage:"Frigorifero"},{id:"verdura",name:"Verdura",color:"bg-green-100 text-green-800",temp:"2-8C",storage:"Frigorifero"},{id:"frutta",name:"Frutta",color:"bg-orange-100 text-orange-800",temp:"2-8C",storage:"Frigorifero"},{id:"pane",name:"Pane",color:"bg-amber-100 text-amber-800",temp:"Ambiente",storage:"Shelf"},{id:"conserva",name:"Conserve",color:"bg-purple-100 text-purple-800",temp:"Ambiente",storage:"Shelf"},{id:"bevande",name:"Bevande",color:"bg-cyan-100 text-cyan-800",temp:"2-8C",storage:"Frigorifero"}],DEFAULT_PRODUCTS=[{id:"pollo",name:"Petto di Pollo",category:"carne",temp:"0-4C"},{id:"manzo",name:"Macinato di Manzo",category:"carne",temp:"0-4C"},{id:"salmone",name:"Salmone Fresco",category:"pesce",temp:"0-2C"},{id:"tonno",name:"Tonno Fresco",category:"pesce",temp:"0-2C"},{id:"latte",name:"Latte Intero",category:"latticini",temp:"2-4C"},{id:"formaggio",name:"Formaggio Grana",category:"latticini",temp:"2-4C"},{id:"pomodori",name:"Pomodori",category:"verdura",temp:"2-8C"},{id:"lattuga",name:"Lattuga",category:"verdura",temp:"2-8C"},{id:"mele",name:"Mele",category:"frutta",temp:"2-8C"},{id:"banane",name:"Banane",category:"frutta",temp:"2-8C"},{id:"pane_bianco",name:"Pane Bianco",category:"pane",temp:"Ambiente"},{id:"pasta",name:"Pasta",category:"conserva",temp:"Ambiente"},{id:"acqua",name:"Acqua",category:"bevande",temp:"2-8C"}],ALLERGENS$1=[{id:"glutine",name:"Glutine",color:"bg-amber-100 text-amber-800"},{id:"latte",name:"Latte",color:"bg-blue-100 text-blue-800"},{id:"uova",name:"Uova",color:"bg-yellow-100 text-yellow-800"},{id:"soia",name:"Soia",color:"bg-green-100 text-green-800"},{id:"frutta_guscio",name:"Frutta a Guscio",color:"bg-orange-100 text-orange-800"},{id:"arachidi",name:"Arachidi",color:"bg-red-100 text-red-800"},{id:"pesce",name:"Pesce",color:"bg-cyan-100 text-cyan-800"},{id:"crostacei",name:"Crostacei",color:"bg-purple-100 text-purple-800"}],Inventory=()=>{var no;const[_e,e]=reactExports.useState([]),[St,es]=reactExports.useState(!1),[ts,ss]=reactExports.useState(null),[rs,ns]=reactExports.useState(""),[is,os]=reactExports.useState(""),[us,ps]=reactExports.useState(""),[xs,cs]=reactExports.useState(""),[ys,gs]=reactExports.useState(""),[vs,ds]=reactExports.useState(""),[fs,Es]=reactExports.useState(""),[Os,Hs]=reactExports.useState(""),[Qs,zs]=reactExports.useState(""),[Ls,Bs]=reactExports.useState(!1),[Gs,bs]=reactExports.useState(!1),[As,ks]=reactExports.useState([]),[$s,qs]=reactExports.useState([]),[Cs,Us]=reactExports.useState([]),[Ps,er]=reactExports.useState([]),[tr,vr]=reactExports.useState([]),[ws,Vs]=reactExports.useState(!1),[Ys,Ws]=reactExports.useState([]),[sr,nr]=reactExports.useState(!1),[pr,xr]=reactExports.useState(!1),[Tr,Dr]=reactExports.useState([]),[zr,or]=reactExports.useState([]),[Nr,cr]=reactExports.useState(!1),[Ns,jr]=reactExports.useState([]),[wr,dr]=reactExports.useState(!1),[lr,_r]=reactExports.useState([]),[Ar,Vr]=reactExports.useState(!1),[Kr,_s]=reactExports.useState(""),[Ks,yr]=reactExports.useState(""),[Ur,Or]=reactExports.useState(""),[Ir,kr]=reactExports.useState(""),[Zr,Gr]=reactExports.useState({name:"",category:"",department:"",conservationPoint:"",expiryDate:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",supplierName:"",associatedOrderId:""}),[nn,tn]=reactExports.useState({orderId:"",supplierName:"",orderDate:new Date().toISOString().split("T")[0],notes:""});reactExports.useEffect(()=>{var _n,Pn;const Ds=localStorage.getItem("haccp-inventory"),Er=localStorage.getItem("haccp-refrigerators"),br=localStorage.getItem("haccp-suppliers"),qr=localStorage.getItem("haccp-orders"),sn=localStorage.getItem("haccp-onboarding");if(sn)try{const Nn=JSON.parse(sn);if((_n=Nn.departments)!=null&&_n.list){const xo=Nn.departments.list.filter(fo=>fo.enabled).map(fo=>({id:fo.id,name:fo.name}));er(xo)}(Pn=Nn.conservation)!=null&&Pn.points&&vr(Nn.conservation.points)}catch(Nn){console.error("Errore nel caricamento dati onboarding:",Nn)}if(Ds)try{e(JSON.parse(Ds))}catch(Nn){console.error("Errore nel caricamento inventario:",Nn)}if(Er)try{ks(JSON.parse(Er))}catch(Nn){console.error("Errore nel caricamento frigoriferi:",Nn)}if(br)try{qs(JSON.parse(br))}catch(Nn){console.error("Errore nel caricamento fornitori:",Nn)}if(qr)try{Us(JSON.parse(qr))}catch(Nn){console.error("Errore nel caricamento ordini:",Nn)}const hn=localStorage.getItem("haccp-used-ingredients");if(hn)try{_r(JSON.parse(hn))}catch(Nn){console.error("Errore nel caricamento ingredienti utilizzati:",Nn)}},[]),reactExports.useEffect(()=>{localStorage.setItem("haccp-inventory",JSON.stringify(_e))},[_e]),reactExports.useEffect(()=>{localStorage.setItem("haccp-used-ingredients",JSON.stringify(lr))},[lr]),reactExports.useEffect(()=>{const Ds=_e.filter(Er=>!Er.conservationPoint||Er.conservationPoint==="");Ws(Ds),Ds.length>0&&Vs(!0)},[_e]);const en=Ds=>{const Er=_e.filter(br=>br.department===Ds);if(Er.length>0){const br=`Il reparto "${Ds}" contiene ${Er.length} prodotti. Vuoi sostituirlo con un altro reparto?`;if(confirm(br)){const qr=prompt(`Seleziona il nuovo reparto per i ${Er.length} prodotti:
${Ps.map(sn=>sn.name).join(`
`)}`);qr&&Ps.find(sn=>sn.name===qr)?(e(sn=>sn.map(hn=>hn.department===Ds?{...hn,department:qr}:hn)),er(sn=>sn.filter(hn=>hn.name!==Ds)),alert(`Reparto "${Ds}" sostituito con "${qr}" per ${Er.length} prodotti.`)):alert("Reparto non valido. Operazione annullata.")}}else er(br=>br.filter(qr=>qr.name!==Ds))},un=Ds=>{const Er=_e.filter(br=>br.conservationPoint===Ds);if(Er.length>0){const br=`Il punto di conservazione "${Ds}" contiene ${Er.length} prodotti. Vuoi sostituirlo con un altro punto?`;if(confirm(br)){const qr=prompt(`Seleziona il nuovo punto di conservazione per i ${Er.length} prodotti:
${tr.map(sn=>sn.name).join(`
`)}`);qr&&tr.find(sn=>sn.name===qr)?(e(sn=>sn.map(hn=>hn.conservationPoint===Ds?{...hn,conservationPoint:qr}:hn)),vr(sn=>sn.filter(hn=>hn.name!==Ds)),alert(`Punto di conservazione "${Ds}" sostituito con "${qr}" per ${Er.length} prodotti.`)):alert("Punto di conservazione non valido. Operazione annullata.")}}else vr(br=>br.filter(qr=>qr.name!==Ds))},Qr=Ds=>{const Er=new Date,qr=new Date(Ds)-Er,sn=Math.ceil(qr/(1e3*60*60*24));return sn<0?{status:"expired",label:"Scaduto",color:"bg-red-100 text-red-800"}:sn<=3?{status:"critical",label:"Critico",color:"bg-red-100 text-red-800"}:sn<=7?{status:"warning",label:"In scadenza",color:"bg-yellow-100 text-yellow-800"}:{status:"ok",label:"OK",color:"bg-green-100 text-green-800"}},Un=Ds=>{const Er=CATEGORIES.find(qr=>qr.id===Ds);if(!Er)return"Categoria non trovata";const br=As.find(qr=>qr.temperature>=0&&qr.temperature<=4&&Er.temp.includes("0-4C"));return br?br.name:"Nessun frigorifero appropriato"},Sn=Ds=>{const Er=new Date;let br=7;Ds==="latticini"?br=7:Ds==="carne"?br=3:Ds==="pesce"?br=2:Ds==="verdure"||Ds==="frutta"?br=7:Ds==="dispensa"?br=365:Ds==="condimenti"?br=730:Ds==="surgelati"&&(br=180);const qr=new Date(Er);return qr.setDate(Er.getDate()+br),qr.toISOString().split("T")[0]},Hn=Ds=>{_r(Er=>Er.filter(br=>br.id!==Ds.id)),Gr({name:Ds.name,category:Ds.category,expiryDate:Sn(Ds.category),department:Ds.department||"",conservationPoint:Ds.conservationPoint||"",allergens:Ds.allergens||[],notes:Ds.notes||"",lotNumber:Ds.lotNumber||"",batchDeliveryDate:Ds.batchDeliveryDate||"",associatedOrderId:Ds.associatedOrderId||"",supplierName:Ds.supplierName||""}),es(!0),Vr(!1)},$n=Ds=>{jr(Er=>Er.includes(Ds)?Er.filter(br=>br!==Ds):[...Er,Ds])},An=Ds=>{Ds.preventDefault(),_e.filter(br=>Ns.includes(br.id));const Er=_e.map(br=>Ns.includes(br.id)?{...br,associatedOrderId:nn.orderId,supplierName:nn.supplierName,batchDeliveryDate:nn.orderDate,lotNumber:`L${new Date().toISOString().slice(2,10).replace(/-/g,"")}${Math.random().toString(36).substr(2,3).toUpperCase()}`}:br);e(Er),jr([]),dr(!1),tn({orderId:"",supplierName:"",orderDate:new Date().toISOString().split("T")[0],notes:""})},Hr=Ds=>{or(Er=>Er.includes(Ds)?Er.filter(br=>br!==Ds):[...Er,Ds])},dn=()=>{const Ds=new E;Ds.setFontSize(20),Ds.text("Lista della Spesa",20,30),Ds.setFontSize(12),Ds.text(`Data: ${new Date().toLocaleDateString("it-IT")}`,20,45);let Er=60;Ds.setFontSize(14),Ds.text("Prodotti da acquistare:",20,Er),Er+=10;const br=_e.filter(qr=>zr.includes(qr.id));br.length===0?(Ds.setFontSize(12),Ds.text("Nessun prodotto selezionato",20,Er)):(Ds.setFontSize(10),br.forEach((qr,sn)=>{Er>280&&(Ds.addPage(),Er=20);const hn=CATEGORIES.find(_n=>_n.id===qr.category);Ds.text(`${sn+1}. ${qr.name}`,20,Er),hn&&Ds.text(`   Categoria: ${hn.name}`,25,Er+5),qr.department&&Ds.text(`   Reparto: ${qr.department}`,25,Er+10),qr.conservationPoint&&Ds.text(`   Punto di Conservazione: ${qr.conservationPoint}`,25,Er+15),Er+=20})),Ds.save(`lista-spesa-${new Date().toISOString().split("T")[0]}.pdf`),cr(!1),or([])},So=Ds=>{if(Ls){const Er={};return Ds.forEach(br=>{const qr=br.department||"Non assegnato";Er[qr]||(Er[qr]=[]),Er[qr].push(br)}),Er}else if(Gs){const Er={};return Ds.forEach(br=>{const qr=br.conservationPoint||"Non assegnato";Er[qr]||(Er[qr]=[]),Er[qr].push(br)}),Er}return{"Tutti i prodotti":Ds}},vn=_e.filter(Ds=>{var fo,wl,Rl;const Er=!rs||Ds.name.toLowerCase().includes(rs.toLowerCase())||((fo=Ds.department)==null?void 0:fo.toLowerCase().includes(rs.toLowerCase()))||((wl=Ds.conservationPoint)==null?void 0:wl.toLowerCase().includes(rs.toLowerCase()))||((Rl=CATEGORIES.find(Oo=>Oo.id===Ds.category))==null?void 0:Rl.name.toLowerCase().includes(rs.toLowerCase())),br=!is||Ds.category===is;let qr=!0;us&&(qr=Qr(Ds.expiryDate).status===us);const sn=!xs||Ds.allergens&&Ds.allergens.includes(xs),hn=!ys||Ds.lotNumber&&Ds.lotNumber.toLowerCase().includes(ys.toLowerCase()),_n=!vs||Ds.supplierName&&Ds.supplierName.toLowerCase().includes(vs.toLowerCase()),Pn=!fs||Ds.associatedOrderId&&Ds.associatedOrderId.toLowerCase().includes(fs.toLowerCase()),Nn=!Os||Ds.department===Os,xo=!Qs||Ds.conservationPoint===Qs;return Er&&br&&qr&&sn&&hn&&_n&&Pn&&Nn&&xo}),oo=()=>{Gr({name:"",category:"",department:"",conservationPoint:"",expiryDate:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",supplierName:"",associatedOrderId:""}),ss(null),es(!1)},Jn=(Ds,Er)=>{Gr(br=>({...br,[Ds]:Er}))},an=Ds=>{Gr(Er=>({...Er,allergens:Er.allergens.includes(Ds)?Er.allergens.filter(br=>br!==Ds):[...Er.allergens,Ds]}))},lo=Ds=>{if(Ds.preventDefault(),!Zr.name||!Zr.category||!Zr.department||!Zr.conservationPoint||!Zr.expiryDate){alert("Compila tutti i campi obbligatori");return}const Er={...Zr,id:ts?ts.id:Date.now().toString(),addedAt:ts?ts.addedAt:new Date().toISOString()};e(ts?br=>br.map(qr=>qr.id===ts.id?Er:qr):br=>[...br,Er]),oo()},ro=Ds=>{Gr({name:Ds.name,category:Ds.category,department:Ds.department||"",conservationPoint:Ds.conservationPoint||"",expiryDate:Ds.expiryDate,allergens:Ds.allergens||[],notes:Ds.notes||"",lotNumber:Ds.lotNumber||"",batchDeliveryDate:Ds.batchDeliveryDate||"",supplierName:Ds.supplierName||"",associatedOrderId:Ds.associatedOrderId||""}),ss(Ds),es(!0)},Yn=Ds=>{const Er=_e.find(br=>br.id===Ds);if(Er){const br={...Er,usedDate:new Date().toISOString(),id:`used_${Date.now()}_${Er.id}`};_r(qr=>[...qr,br])}e(br=>br.filter(qr=>qr.id!==Ds))},Mn=Ds=>{const Er=new Date,br=new Date(Er.getTime()+7*24*60*60*1e3),qr=Un(Ds.category),sn=tr.find(Pn=>Pn.name===qr),hn=(sn==null?void 0:sn.location)||"",_n={...Ds,id:Date.now().toString(),department:hn,conservationPoint:qr,expiryDate:br.toISOString().split("T")[0],allergens:[],notes:"",lotNumber:"",batchDeliveryDate:Er.toISOString().split("T")[0],supplierName:"",associatedOrderId:"",addedAt:new Date().toISOString()};e(Pn=>[...Pn,_n])},On=Ds=>{Dr(Er=>Er.includes(Ds)?Er.filter(br=>br!==Ds):[...Er,Ds])},$a=()=>{e(Ds=>Ds.filter(Er=>!Tr.includes(Er.id))),Dr([]),nr(!1)},Bo=()=>{e([]),xr(!1)},ho=()=>{const Ds=new E;Ds.setFontSize(20),Ds.text("Inventario HACCP",20,20),Ds.setFontSize(12),Ds.text(`Data: ${new Date().toLocaleDateString("it-IT")}`,20,30),Ds.text(`Totale prodotti: ${_e.length}`,20,40);let Er=60;_e.forEach((br,qr)=>{Er>280&&(Ds.addPage(),Er=20);const sn=CATEGORIES.find(_n=>_n.id===br.category),hn=Qr(br.expiryDate);if(Ds.text(`${qr+1}. ${br.name}`,20,Er),Ds.text(`   Categoria: ${(sn==null?void 0:sn.name)||"N/A"}`,25,Er+5),br.department&&Ds.text(`   Reparto: ${br.department}`,25,Er+10),br.conservationPoint&&Ds.text(`   Punto di Conservazione: ${br.conservationPoint}`,25,Er+15),Ds.text(`   Scadenza: ${new Date(br.expiryDate).toLocaleDateString("it-IT")} (${hn.label})`,25,Er+15),br.allergens&&br.allergens.length>0){const _n=br.allergens.map(Pn=>{var Nn;return(Nn=ALLERGENS$1.find(xo=>xo.id===Pn))==null?void 0:Nn.name}).filter(Boolean).join(", ");Ds.text(`   Allergeni: ${_n}`,25,Er+20),Er+=25}else Er+=20;br.notes&&(Ds.text(`   Note: ${br.notes}`,25,Er),Er+=10),Er+=10}),Ds.save(`inventario-haccp-${new Date().toISOString().split("T")[0]}.pdf`)};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventario"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Gestisci i prodotti e la tracciabilit HACCP"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:ho,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Export PDF"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>es(!0),className:"bg-blue-600 hover:bg-blue-700",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Aggiungi Prodotto"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>Vr(!Ar),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-4 w-4"}),"Ingredienti Utilizzati (",lr.length,")"]})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Filter,{className:"h-5 w-5"}),"Filtri"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"search",children:"Cerca"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),jsxRuntimeExports.jsx(Input,{id:"search",value:rs,onChange:Ds=>ns(Ds.target.value),placeholder:"Nome prodotto, reparto, punto di conservazione...",className:"pl-10"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"category",children:"Categoria"}),jsxRuntimeExports.jsxs("select",{id:"category",value:is,onChange:Ds=>os(Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutte le categorie"}),CATEGORIES.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.id,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expiry",children:"Scadenza"}),jsxRuntimeExports.jsxs("select",{id:"expiry",value:us,onChange:Ds=>ps(Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutte le scadenze"}),jsxRuntimeExports.jsx("option",{value:"expired",children:"Scaduti"}),jsxRuntimeExports.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),jsxRuntimeExports.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),jsxRuntimeExports.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"allergen",children:"Allergene"}),jsxRuntimeExports.jsxs("select",{id:"allergen",value:xs,onChange:Ds=>cs(Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutti gli allergeni"}),ALLERGENS$1.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.id,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"lot",children:"Numero Lotto"}),jsxRuntimeExports.jsx(Input,{id:"lot",value:ys,onChange:Ds=>gs(Ds.target.value),placeholder:"Filtra per numero lotto..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"supplier",children:"Fornitore"}),jsxRuntimeExports.jsx(Input,{id:"supplier",value:vs,onChange:Ds=>ds(Ds.target.value),placeholder:"Filtra per fornitore..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"orderId",children:"ID Ordine"}),jsxRuntimeExports.jsx(Input,{id:"orderId",value:fs,onChange:Ds=>Es(Ds.target.value),placeholder:"Filtra per ID ordine..."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"department",children:"Reparto"}),jsxRuntimeExports.jsxs("select",{id:"department",value:Os,onChange:Ds=>Hs(Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutti i reparti"}),Ps.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.name,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"conservationPoint",children:"Punto di Conservazione"}),jsxRuntimeExports.jsxs("select",{id:"conservationPoint",value:Qs,onChange:Ds=>zs(Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutti i punti"}),tr.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.name,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-4 items-center mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"groupByDepartment",checked:Ls,onChange:Ds=>{Bs(Ds.target.checked),Ds.target.checked&&bs(!1)},className:"rounded"}),jsxRuntimeExports.jsx(Label,{htmlFor:"groupByDepartment",className:"text-sm",children:"Raggruppa per Reparto"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:"groupByConservationPoint",checked:Gs,onChange:Ds=>{bs(Ds.target.checked),Ds.target.checked&&Bs(!1)},className:"rounded"}),jsxRuntimeExports.jsx(Label,{htmlFor:"groupByConservationPoint",className:"text-sm",children:"Raggruppa per Punto di Conservazione"})]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>{ns(""),os(""),ps(""),cs(""),gs(""),ds(""),Es(""),Hs(""),zs(""),Bs(!1),bs(!1)},variant:"outline",className:"w-full",children:" Reset Filtri"})]})]})})]}),ws&&Ys.length>0&&jsxRuntimeExports.jsxs(Card,{className:"border-red-200 bg-red-50",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-red-800",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5"}),"Attenzione: ",Ys.length," prodotti senza punto di conservazione!"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("p",{className:"text-red-700 mb-4",children:"I seguenti prodotti devono essere posizionati in un adeguato punto di conservazione:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ys.map(Ds=>{const Er=CATEGORIES.find(br=>br.id===Ds.category);return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 bg-white rounded border border-red-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:Ds.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:["(",(Er==null?void 0:Er.name)||"Categoria sconosciuta",")"]})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{ro(Ds),Vs(!1)},size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:[jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4 mr-1"}),"Assegna"]})]},Ds.id)})}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mt-4",children:jsxRuntimeExports.jsx(Button,{onClick:()=>Vs(!1),variant:"outline",size:"sm",children:"Chiudi"})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),"Gestione Inventario"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:_e.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>nr(!0),className:"flex items-center gap-2",variant:"outline",children:" Rimuovi Prodotti"}),jsxRuntimeExports.jsx(Button,{onClick:()=>xr(!0),className:"flex items-center gap-2",variant:"destructive",children:" Cancella Tutto l'Inventario"})]})})]})}),jsxRuntimeExports.jsx(CardContent,{children:vn.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:_e.length===0?"Inventario vuoto. Inizia aggiungendo prodotti con i pulsanti categoria sopra!":"Nessun prodotto trovato con i filtri attuali"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Object.entries(So(vn)).map(([Ds,Er])=>jsxRuntimeExports.jsxs("div",{children:[(Ls||Gs)&&jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-800 bg-gray-100 px-3 py-2 rounded-md",children:[Ds," (",Er.length," prodotti)"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Er.map(br=>{const qr=CATEGORIES.find(hn=>hn.id===br.category),sn=Qr(br.expiryDate);return jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:br.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${qr==null?void 0:qr.color}`,children:qr==null?void 0:qr.name}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${sn.color}`,children:sn.label})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[jsxRuntimeExports.jsxs("p",{children:[" Reparto: ",br.department||"Non assegnato"]}),jsxRuntimeExports.jsxs("p",{children:[" Punto: ",br.conservationPoint||"Non assegnato"]}),jsxRuntimeExports.jsxs("p",{children:[" Scadenza: ",new Date(br.expiryDate).toLocaleDateString("it-IT")]}),br.allergens&&br.allergens.length>0&&jsxRuntimeExports.jsxs("p",{children:[" Allergeni: ",br.allergens.map(hn=>{var _n;return(_n=ALLERGENS$1.find(Pn=>Pn.id===hn))==null?void 0:_n.name}).join(", ")]}),br.notes&&jsxRuntimeExports.jsxs("p",{children:[" ",br.notes]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>ro(br),size:"sm",variant:"outline",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Yn(br.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]})},br.id)})})]},Ds))})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs(CardTitle,{children:["Prodotti nell'inventario (",vn.length,")",(Ls||Gs)&&jsxRuntimeExports.jsxs("span",{className:"text-sm font-normal text-gray-600 ml-2",children:["- Raggruppati per ",Ls?"Reparto":"Punto di Conservazione"]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:_e.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>nr(!0),className:"flex items-center gap-2",variant:"outline",children:" Rimuovi Prodotti"}),jsxRuntimeExports.jsx(Button,{onClick:()=>xr(!0),className:"flex items-center gap-2",variant:"destructive",children:" Cancella Tutto l'Inventario"})]})})]})}),jsxRuntimeExports.jsx(CardContent,{children:vn.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:_e.length===0?"Inventario vuoto. Inizia aggiungendo prodotti con i pulsanti categoria sopra!":"Nessun prodotto trovato con i filtri attuali"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Object.entries(So(vn)).map(([Ds,Er])=>jsxRuntimeExports.jsxs("div",{children:[(Ls||Gs)&&jsxRuntimeExports.jsxs("h3",{className:"text-lg font-semibold mb-3 text-gray-800 bg-gray-100 px-3 py-2 rounded-md",children:[Ds," (",Er.length," prodotti)"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Er.map(br=>{const qr=CATEGORIES.find(hn=>hn.id===br.category),sn=Qr(br.expiryDate);return jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium",children:br.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${qr==null?void 0:qr.color}`,children:qr==null?void 0:qr.name}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${sn.color}`,children:sn.label})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[jsxRuntimeExports.jsxs("p",{children:[" Reparto: ",br.department||"Non assegnato"]}),jsxRuntimeExports.jsxs("p",{children:[" Punto: ",br.conservationPoint||"Non assegnato"]}),jsxRuntimeExports.jsxs("p",{children:[" Scadenza: ",new Date(br.expiryDate).toLocaleDateString("it-IT")]}),br.allergens&&br.allergens.length>0&&jsxRuntimeExports.jsxs("p",{children:[" Allergeni: ",br.allergens.map(hn=>{var _n;return(_n=ALLERGENS$1.find(Pn=>Pn.id===hn))==null?void 0:_n.name}).join(", ")]}),br.notes&&jsxRuntimeExports.jsxs("p",{children:[" ",br.notes]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 ml-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>ro(br),size:"sm",variant:"outline",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Yn(br.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]})},br.id)})})]},Ds))})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5"}),"Gestione Reparti e Punti di Conservazione"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold mb-3",children:["Reparti Attivi (",Ps.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Ps.map(Ds=>{const Er=_e.filter(br=>br.department===Ds.name).length;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:Ds.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",Er," prodotti)"]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>en(Ds.name),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]},Ds.id)})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold mb-3",children:["Punti di Conservazione (",tr.length,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:tr.map(Ds=>{const Er=_e.filter(br=>br.conservationPoint===Ds.name).length;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:Ds.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["(",Er," prodotti)"]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:[Ds.location,"  ",Ds.targetTemp,"C"]})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>un(Ds.name),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]},Ds.id)})})]})]})})]}),!St&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),"Aggiunta prodotti rapidi"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:CATEGORIES.map(Ds=>{const Er=DEFAULT_PRODUCTS.filter(br=>br.category===Ds.id);return jsxRuntimeExports.jsx("div",{className:"space-y-2",children:jsxRuntimeExports.jsxs("button",{onClick:()=>os(is===Ds.id?"":Ds.id),className:`w-full p-4 text-left rounded-lg border-2 transition-colors ${is===Ds.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[jsxRuntimeExports.jsx("div",{className:`inline-flex px-2 py-1 text-xs rounded-full ${Ds.color} mb-2`,children:Ds.name}),jsxRuntimeExports.jsx("div",{className:"text-sm font-medium",children:Ds.temp}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-600",children:Ds.storage}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Er.length," prodotti"]})]})},Ds.id)})}),is&&jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsxs("h4",{className:"font-medium mb-3",children:["Prodotti ",(no=CATEGORIES.find(Ds=>Ds.id===is))==null?void 0:no.name,":"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:DEFAULT_PRODUCTS.filter(Ds=>Ds.category===is).map(Ds=>{var Er;return jsxRuntimeExports.jsx("button",{onClick:()=>Mn(Ds),className:"p-3 text-left bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors group",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm text-green-900",children:Ds.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-green-700 mt-1",children:As.length>0?Un(Ds.category):"Nessun frigorifero registrato"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-green-600 mt-1",children:(Er=CATEGORIES.find(br=>br.id===Ds.category))==null?void 0:Er.temp})]}),jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 text-green-600 group-hover:text-green-700"})]})},Ds.id)})})]}),!is&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Package,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Seleziona una categoria sopra per vedere i prodotti disponibili"})]})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),"Ordini e Spesa"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:" Lista della Spesa"}),jsxRuntimeExports.jsx(Button,{onClick:()=>cr(!0),disabled:zr.length===0,size:"sm",variant:"outline",children:" Genera PDF"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:vn.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-4 text-gray-500",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per la lista della spesa"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):vn.map(Ds=>{const Er=zr.includes(Ds.id);return jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Er,onChange:()=>Hr(Ds.id),className:"mr-3 w-4 h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:Ds.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:Ds.department&&Ds.conservationPoint?`${Ds.department}  ${Ds.conservationPoint}`:Ds.department||Ds.conservationPoint||"Non assegnato"})]})]},Ds.id)})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Selezionati: ",zr.length," prodotti"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold",children:" Gestione Ordini"}),jsxRuntimeExports.jsx(Button,{onClick:()=>dr(!0),disabled:Ns.length===0,size:"sm",variant:"outline",children:" Crea Ordine"})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:vn.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-4 text-gray-500",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per gli ordini"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):vn.map(Ds=>{const Er=Ns.includes(Ds.id);return jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Er,onChange:()=>$n(Ds.id),className:"mr-3 w-4 h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:Ds.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-500",children:Ds.department&&Ds.conservationPoint?`${Ds.department}  ${Ds.conservationPoint}`:Ds.department||Ds.conservationPoint||"Non assegnato"})]})]},Ds.id)})}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Prodotti selezionati: ",Ns.length]})]})]})})]}),Ar&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5 text-gray-600"}),"Ingredienti gi Utilizzati (",lr.length,")"]})}),jsxRuntimeExports.jsx(CardContent,{children:lr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Nessun ingrediente utilizzato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"I prodotti eliminati dall'inventario appariranno qui"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:lr.map(Ds=>{var Er;return jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border rounded-lg opacity-75",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-gray-900",children:Ds.name}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[(Er=CATEGORIES.find(br=>br.id===Ds.category))==null?void 0:Er.name," ",Ds.location,"  Utilizzato: ",new Date(Ds.usedDate).toLocaleDateString("it-IT")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Hn(Ds),size:"sm",className:"bg-green-600 hover:bg-green-700",children:" Reinserisci"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{confirm("Sei sicuro di voler eliminare definitivamente questo ingrediente?")&&_r(br=>br.filter(qr=>qr.id!==Ds.id))},size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:" Elimina"})]})]},Ds.id)})})})]}),jsxRuntimeExports.jsx(CustomCategoryManager,{}),St&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-5 w-5"}),ts?"Modifica Prodotto":"Aggiungi Prodotto"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:lo,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Prodotto *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:Zr.name,onChange:Ds=>Jn("name",Ds.target.value),placeholder:"Es. Pomodori San Marzano",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"category",children:"Categoria *"}),jsxRuntimeExports.jsxs("select",{id:"category",value:Zr.category,onChange:Ds=>Jn("category",Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona categoria"}),CATEGORIES.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.id,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"department",children:"Reparto *"}),jsxRuntimeExports.jsxs("select",{id:"department",value:Zr.department,onChange:Ds=>Jn("department",Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona reparto"}),Ps.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.name,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"conservationPoint",children:"Punto di Conservazione *"}),jsxRuntimeExports.jsxs("select",{id:"conservationPoint",value:Zr.conservationPoint,onChange:Ds=>Jn("conservationPoint",Ds.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona punto di conservazione"}),tr.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.name,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expiryDate",children:"Data di Scadenza *"}),jsxRuntimeExports.jsx(Input,{id:"expiryDate",type:"date",value:Zr.expiryDate,onChange:Ds=>Jn("expiryDate",Ds.target.value),required:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Allergeni"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:ALLERGENS$1.map(Ds=>jsxRuntimeExports.jsxs("label",{className:"flex items-center space-x-2",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Zr.allergens.includes(Ds.id),onChange:()=>an(Ds.id),className:"rounded"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:Ds.name})]},Ds.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"notes",children:"Note"}),jsxRuntimeExports.jsx("textarea",{id:"notes",value:Zr.notes,onChange:Ds=>Jn("notes",Ds.target.value),placeholder:"Note aggiuntive sul prodotto...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{type:"button",onClick:oo,variant:"outline",children:"Annulla"}),jsxRuntimeExports.jsxs(Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[ts?"Aggiorna":"Aggiungi"," Prodotto"]})]})]})})]}),sr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Rimuovi Prodotti dall'Inventario"}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 mb-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx("input",{type:"text",value:Kr,onChange:Ds=>_s(Ds.target.value),placeholder:"Cerca prodotti, reparti, punti...",className:"px-3 py-2 border rounded-md"}),jsxRuntimeExports.jsxs("select",{value:Ks,onChange:Ds=>yr(Ds.target.value),className:"px-3 py-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutte le categorie"}),CATEGORIES.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.id,children:Ds.name},Ds.id))]}),jsxRuntimeExports.jsxs("select",{value:Ur,onChange:Ds=>Or(Ds.target.value),className:"px-3 py-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutte le scadenze"}),jsxRuntimeExports.jsx("option",{value:"expired",children:"Scaduti"}),jsxRuntimeExports.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),jsxRuntimeExports.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),jsxRuntimeExports.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]}),jsxRuntimeExports.jsxs("select",{value:Ir,onChange:Ds=>kr(Ds.target.value),className:"px-3 py-2 border rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutti gli allergeni"}),ALLERGENS$1.map(Ds=>jsxRuntimeExports.jsx("option",{value:Ds.id,children:Ds.name},Ds.id))]})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 mb-4",children:"Seleziona i prodotti da rimuovere dall'inventario:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:vn.filter(Ds=>{var hn,_n,Pn;const Er=!Kr||Ds.name.toLowerCase().includes(Kr.toLowerCase())||((hn=Ds.department)==null?void 0:hn.toLowerCase().includes(Kr.toLowerCase()))||((_n=Ds.conservationPoint)==null?void 0:_n.toLowerCase().includes(Kr.toLowerCase()))||((Pn=CATEGORIES.find(Nn=>Nn.id===Ds.category))==null?void 0:Pn.name.toLowerCase().includes(Kr.toLowerCase())),br=!Ks||Ds.category===Ks;let qr=!0;Ur&&(qr=Qr(Ds.expiryDate).status===Ur);const sn=!Ir||Ds.allergens&&Ds.allergens.includes(Ir);return Er&&br&&qr&&sn}).map(Ds=>{const Er=CATEGORIES.find(qr=>qr.id===Ds.category),br=Qr(Ds.expiryDate);return jsxRuntimeExports.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Tr.includes(Ds.id),onChange:()=>On(Ds.id),className:"mr-3 w-4 h-4"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:Ds.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-500",children:[Er==null?void 0:Er.name,"  ",Ds.department||"N/A","  ",Ds.conservationPoint||"N/A","  Scade: ",new Date(Ds.expiryDate).toLocaleDateString("it-IT")]})]}),jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${br.color}`,children:br.label})]},Ds.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["Selezionati: ",Tr.length," prodotti"]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>nr(!1),variant:"outline",children:"Annulla"}),jsxRuntimeExports.jsxs(Button,{onClick:$a,disabled:Tr.length===0,className:"bg-red-600 hover:bg-red-700",children:["Rimuovi ",Tr.length," Prodotti"]})]})]})]})}),Nr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:" Lista della Spesa"}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Prodotti selezionati per la lista della spesa (",zr.length,"):"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:zr.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-4 text-gray-500",children:[jsxRuntimeExports.jsx("p",{className:"text-sm",children:"Nessun prodotto selezionato"}),jsxRuntimeExports.jsx("p",{className:"text-xs",children:"Torna alla sezione inventario per selezionare i prodotti"})]}):_e.filter(Ds=>zr.includes(Ds.id)).map(Ds=>{const Er=CATEGORIES.find(br=>br.id===Ds.category);return jsxRuntimeExports.jsx("div",{className:"flex items-center p-3 border rounded bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:Ds.name||"Prodotto non disponibile"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[Er==null?void 0:Er.name,"  ",Ds.department||"N/A","  ",Ds.conservationPoint||"N/A"]})]})},Ds.id)})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{onClick:dn,className:"flex-1",children:" Genera PDF"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{cr(!1),or([])},variant:"outline",children:"Annulla"})]})]})}),wr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold mb-4",children:" Crea Nuovo Ordine"}),jsxRuntimeExports.jsxs("form",{onSubmit:An,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Numero Ordine *"}),jsxRuntimeExports.jsx(Input,{value:nn.orderId,onChange:Ds=>tn({...nn,orderId:Ds.target.value}),placeholder:"es. ORD-2024-001",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Fornitore *"}),jsxRuntimeExports.jsx(Input,{value:nn.supplierName,onChange:Ds=>tn({...nn,supplierName:Ds.target.value}),placeholder:"Nome fornitore",required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Data Ordine *"}),jsxRuntimeExports.jsx(Input,{type:"date",value:nn.orderDate,onChange:Ds=>tn({...nn,orderDate:Ds.target.value}),required:!0})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Note"}),jsxRuntimeExports.jsx(Input,{value:nn.notes,onChange:Ds=>tn({...nn,notes:Ds.target.value}),placeholder:"Note aggiuntive..."})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-medium mb-3",children:["Prodotti selezionati (",Ns.length,"):"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:_e.filter(Ds=>Ns.includes(Ds.id)).map(Ds=>{const Er=CATEGORIES.find(br=>br.id===Ds.category);return jsxRuntimeExports.jsxs("div",{className:"p-2 border rounded",children:[jsxRuntimeExports.jsx("div",{className:"font-medium text-sm",children:Ds.name}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600",children:[Er==null?void 0:Er.name,"  ",Ds.department||"N/A","  ",Ds.conservationPoint||"N/A"]})]},Ds.id)})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsx(Button,{type:"submit",className:"flex-1",children:" Crea Ordine"}),jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>dr(!1),variant:"outline",children:"Annulla"})]})]})]})]})}),pr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Conferma Cancellazione"}),jsxRuntimeExports.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler cancellare TUTTO l'inventario? Questa azione non pu essere annullata."}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>xr(!1),variant:"outline",children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:Bo,className:"bg-red-600 hover:bg-red-700",children:"S, Cancella Tutto"})]})]})})]})};function ProductLabels({productLabels:_e=[],setProductLabels:e,products:St=[],currentUser:es}){var Gl,Sl,iu,go,Jo,eo,Cl,Wl;const[ts,ss]=reactExports.useState("scanner"),[rs,ns]=reactExports.useState(!1),[is,os]=reactExports.useState("");reactExports.useState(null);const[us,ps]=reactExports.useState(""),[xs,cs]=reactExports.useState(!1),[ys,gs]=reactExports.useState(!1),[vs,ds]=reactExports.useState(null),[fs,Es]=reactExports.useState(!1),[Os,Hs]=reactExports.useState(null),[Qs,zs]=reactExports.useState(!1),[Ls,Bs]=reactExports.useState([]),[Gs,bs]=reactExports.useState(!1),[As,ks]=reactExports.useState([]),[$s,qs]=reactExports.useState(!1),[Cs,Us]=reactExports.useState(""),[Ps,er]=reactExports.useState([]),[tr,vr]=reactExports.useState(null),[ws,Vs]=reactExports.useState(!1),[Ys,Ws]=reactExports.useState([]),[sr,nr]=reactExports.useState(""),[pr,xr]=reactExports.useState(""),[Tr,Dr]=reactExports.useState(""),[zr,or]=reactExports.useState(1),[Nr,cr]=reactExports.useState(20),[Ns,jr]=reactExports.useState(new Set),[wr,dr]=reactExports.useState("medium"),[lr,_r]=reactExports.useState(!1),[Ar,Vr]=reactExports.useState([]),[Kr,_s]=reactExports.useState([]),[Ks,yr]=reactExports.useState(""),[Ur,Or]=reactExports.useState(!1),[Ir,kr]=reactExports.useState(null),[Zr,Gr]=reactExports.useState(""),[nn,tn]=reactExports.useState(null);reactExports.useState(null),reactExports.useState(!1);const[en,un]=reactExports.useState(!1),[Qr,Un]=reactExports.useState(!1);reactExports.useState("");const[Sn,Hn]=reactExports.useState(!1),[$n,An]=reactExports.useState(""),[Hr,dn]=reactExports.useState({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]});reactExports.useEffect(()=>{fo(),So()},[_e]);const So=()=>{const Js=localStorage.getItem("haccp-label-groups");Js&&er(JSON.parse(Js))},vn=Js=>{er(Js),localStorage.setItem("haccp-label-groups",JSON.stringify(Js))},oo=()=>{bs(!Gs),ks([])},Jn=Js=>{ks(Rr=>Rr.includes(Js)?Rr.filter(Br=>Br!==Js):[...Rr,Js])},an=()=>{const Js=Wo.map(Rr=>Rr.id);ks(Js)},lo=()=>{ks([])},ro=()=>{if(As.length===0){alert("Seleziona almeno una etichetta");return}qs(!0)},Yn=()=>{if(!Cs.trim()){alert("Inserisci un nome per il gruppo");return}const Rr=_e.filter(on=>As.includes(on.id)).reduce((on,mn)=>{const yn=new Date(mn.createdAt);return yn>on?yn:on},new Date(0)),Br={id:`group_${Date.now()}`,name:Cs,labelIds:As,labelCount:As.length,createdAt:new Date().toISOString(),createdBy:es.name,lastUpdate:Rr.toISOString()},xn=[...Ps,Br];vn(xn),ks([]),bs(!1),qs(!1),Us("")},Mn=()=>{const Js=prompt("Nome del nuovo gruppo:");if(!Js)return;const Rr={id:`group_${Date.now()}`,name:Js,labelIds:[],labelCount:0,createdAt:new Date().toISOString(),createdBy:es.name,lastUpdate:new Date().toISOString()},Br=[...Ps,Rr];vn(Br)},On=Js=>Ps.find(Rr=>Rr.labelIds.includes(Js)),$a=()=>{if(!tr)return;const Js=_e.filter(Rr=>!tr.labelIds.includes(Rr.id));Vr(Js),_s([]),yr(""),_r(!0)},Bo=()=>{if(!tr||Kr.length===0)return;const Js=[],Rr=[];if(Kr.forEach(on=>{var yn;const mn=On(on);mn&&Rr.push({labelId:on,labelName:(yn=_e.find(Bn=>Bn.id===on))==null?void 0:yn.productName,fromGroup:mn.name}),Js.push(on)}),Rr.length>0){const on=Rr.map(yn=>` "${yn.labelName}" verr spostata da "${yn.fromGroup}"`).join(`
`);if(!confirm(`ATTENZIONE: Le seguenti etichette verranno spostate:

${on}

Continuare?`))return}const Br=Ps.map(on=>{if(on.id===tr.id){const mn=[...on.labelIds,...Js],yn=[...new Set(mn)];return{...on,labelIds:yn,labelCount:yn.length,lastUpdate:new Date().toISOString()}}else{const mn=on.labelIds.filter(yn=>!Js.includes(yn));return{...on,labelIds:mn,labelCount:mn.length,lastUpdate:mn.length!==on.labelIds.length?new Date().toISOString():on.lastUpdate}}});vn(Br);const xn=Br.find(on=>on.id===tr.id);vr(xn),_r(!1),_s([])},ho=Js=>{_s(Rr=>Rr.includes(Js)?Rr.filter(Br=>Br!==Js):[...Rr,Js])},no=()=>{const Js=Ar.filter(Rr=>Rr.productName.toLowerCase().includes(Ks.toLowerCase())||Rr.barcode.includes(Ks)||Rr.lotNumber.toLowerCase().includes(Ks.toLowerCase())).map(Rr=>Rr.id);_s(Js)},Ds=()=>{tr&&(kr(tr),Gr(tr.name),Or(!0))},Er=()=>{if(!Zr.trim()||!Ir)return;const Js=Ps.map(Rr=>Rr.id===Ir.id?{...Rr,name:Zr.trim(),lastUpdate:new Date().toISOString()}:Rr);vn(Js),tr&&tr.id===Ir.id&&vr({...tr,name:Zr.trim(),lastUpdate:new Date().toISOString()}),Or(!1),kr(null),Gr("")},br=Js=>{kr(Js),Gr(Js.name),Or(!0)},qr=Js=>{const Rr=_e.find(mn=>mn.id===Js);if(!Rr||!confirm(`Eliminare l'etichetta "${Rr.productName}"?

Questa azione non pu essere annullata.`))return;const xn=_e.filter(mn=>mn.id!==Js);e(xn),localStorage.setItem("haccp-product-labels",JSON.stringify(xn));const on=Ps.map(mn=>({...mn,labelIds:mn.labelIds.filter(yn=>yn!==Js),labelCount:mn.labelIds.filter(yn=>yn!==Js).length,lastUpdate:mn.labelIds.includes(Js)?new Date().toISOString():mn.lastUpdate}));if(vn(on),tr&&tr.labelIds.includes(Js)){const mn=on.find(yn=>yn.id===tr.id);vr(mn)}},sn=[{id:"latticini",name:"Latticini e Formaggi",color:"bg-blue-100 text-blue-800",emoji:""},{id:"carni",name:"Carni e Salumi",color:"bg-red-100 text-red-800",emoji:""},{id:"verdure",name:"Verdure e Ortaggi",color:"bg-green-100 text-green-800",emoji:""},{id:"frutta",name:"Frutta Fresca",color:"bg-orange-100 text-orange-800",emoji:""},{id:"pesce",name:"Pesce e Frutti di Mare",color:"bg-cyan-100 text-cyan-800",emoji:""},{id:"surgelati",name:"Surgelati",color:"bg-indigo-100 text-indigo-800",emoji:""},{id:"dispensa",name:"Dispensa Secca",color:"bg-yellow-100 text-yellow-800",emoji:""},{id:"condimenti",name:"Oli e Condimenti",color:"bg-amber-100 text-amber-800",emoji:""}],hn=Js=>{nn===Js?tn(null):(tn(Js),vr(null))},_n=()=>{Vs(!ws),Ws([])},Pn=Js=>{Ws(Rr=>Rr.includes(Js)?Rr.filter(Br=>Br!==Js):[...Rr,Js])},Nn=()=>{const Js=Co.map(Rr=>Rr.id);Ws(Js)},xo=()=>{Ws([])},fo=()=>{const Js=new Date,Rr=_e.filter(Br=>new Date(Br.expiryDate)<Js&&Br.photo);Rr.length>0&&(Bs(Rr),zs(!0))},wl=()=>{cs(!0),setTimeout(()=>{const Js=["8001234567890","8001234567891","8001234567892","8001234567893","8001234567894"],Rr=Js[Math.floor(Math.random()*Js.length)];ps(Rr),dn(Br=>({...Br,barcode:Rr})),cs(!1),ns(!0)},2e3)},Rl=()=>{if(!Hr.productName||!Hr.expiryDate){alert("Nome prodotto e data scadenza sono obbligatori");return}Un(!0)},Oo=()=>{const Js={id:`label_${Date.now()}`,...Hr,createdAt:new Date().toISOString(),createdBy:es.name,status:"active"},Rr=[..._e,Js];e(Rr),localStorage.setItem("haccp-product-labels",JSON.stringify(Rr));const Br={id:`prod_${Date.now()}`,name:Hr.productName,category:Hr.category.startsWith("group_")?"latticini":Hr.category,expiryDate:Hr.expiryDate,location:Hr.location||"Posizione da definire",allergens:Hr.allergens||[],notes:`${Hr.notes?Hr.notes+" - ":""}Generato automaticamente da etichetta. Lotto: ${Hr.lotNumber||"N/A"}`,addedBy:es==null?void 0:es.id,addedByName:es==null?void 0:es.name,createdAt:new Date().toISOString(),status:"active",fromLabel:!0,labelId:Js.id,barcode:Hr.barcode,lotNumber:Hr.lotNumber||"",batchDeliveryDate:"",associatedOrderId:"",supplierName:""},on=[...JSON.parse(localStorage.getItem("haccp-products")||"[]"),Br];if(localStorage.setItem("haccp-products",JSON.stringify(on)),Hr.category&&Hr.category.startsWith("group_")){const mn=Hr.category.replace("group_",""),yn=Ps.map(Bn=>Bn.id===mn?{...Bn,labelIds:[...Bn.labelIds,Js.id],labelCount:Bn.labelCount+1,lastUpdate:new Date().toISOString()}:Bn);vn(yn)}dn({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]}),ns(!1),ps(""),Un(!1)},ru=Js=>{const Rr=Js.target.files[0];if(Rr){const Br=new FileReader;Br.onload=xn=>{const on=new Image;on.onload=()=>{const mn=document.createElement("canvas"),yn=mn.getContext("2d"),Bn=800,qo=600;let{width:wn,height:co}=on;wn>co?wn>Bn&&(co=co*Bn/wn,wn=Bn):co>qo&&(wn=wn*qo/co,co=qo),mn.width=wn,mn.height=co,yn.drawImage(on,0,0,wn,co);const _l=mn.toDataURL("image/jpeg",.7);dn(au=>({...au,photo:_l}))},on.src=xn.target.result},Br.readAsDataURL(Rr)}},Su=Js=>{ds(Js),gs(!0)},Vl=()=>{const Js=_e.map(Rr=>Ls.some(Br=>Br.id===Rr.id)?{...Rr,photo:null,cleanedAt:new Date().toISOString()}:Rr);e(Js),localStorage.setItem("haccp-product-labels",JSON.stringify(Js)),zs(!1),Bs([])},Wo=_e.filter(Js=>{if(tr)return tr.labelIds.includes(Js.id);if(nn){const Rr=Js.category===nn,Br=Js.productName.toLowerCase().includes(is.toLowerCase())||Js.barcode.includes(is)||Js.lotNumber.toLowerCase().includes(is.toLowerCase());return Rr&&Br}return Js.productName.toLowerCase().includes(is.toLowerCase())||Js.barcode.includes(is)||Js.lotNumber.toLowerCase().includes(is.toLowerCase())}),Co=_e.filter(Js=>{if(!Js.photo)return!1;const Rr=!sr||Js.productName.toLowerCase().includes(sr.toLowerCase())||Js.barcode.includes(sr)||Js.lotNumber.toLowerCase().includes(sr.toLowerCase()),Br=!pr||new Date(Js.createdAt).toDateString()===new Date(pr).toDateString(),xn=!Tr||(()=>{const on=new Date(Js.expiryDate),yn=Math.ceil((on-new Date)/(1e3*60*60*24));switch(Tr){case"expired":return yn<0;case"expiring":return yn>=0&&yn<=7;case"fresh":return yn>7;default:return!0}})();return Rr&&Br&&xn}),_i=Math.ceil(Co.length/Nr),_o=Co.slice((zr-1)*Nr,zr*Nr),Cu=(Js,Rr=wr)=>{if(!Js)return"";if(Js.startsWith("data:image/")&&Rr==="low"&&Js.length>5e4){const Br=document.createElement("canvas"),xn=Br.getContext("2d"),on=new Image;return new Promise(mn=>{on.onload=()=>{Br.width=Math.min(on.width,200),Br.height=Math.min(on.height,200),xn.drawImage(on,0,0,Br.width,Br.height),mn(Br.toDataURL("image/jpeg",.5))},on.src=Js})}return Js};reactExports.useEffect(()=>{const Js=_e.filter(Rr=>Rr.photo).map(Rr=>Rr.id);jr(new Set(Js))},[_e]),reactExports.useEffect(()=>{or(1)},[sr,pr,Tr]);const Fn=()=>{const Js=_o.map(Rr=>Rr.id);Ws(Rr=>[...new Set([...Rr,...Js])])},nu=()=>{const Js=_e.filter(xn=>xn.photo).length,Rr=Js>100,Br=Js>500;return{totalPhotos:Js,isLargeDataset:Rr,isVeryLargeDataset:Br,recommendedPhotosPerPage:Br?12:Rr?20:50}},Ko={total:_e.length,withPhotos:_e.filter(Js=>Js.photo).length,expiringSoon:_e.filter(Js=>{const Rr=new Date(Js.expiryDate),xn=Math.ceil((Rr-new Date)/(1e3*60*60*24));return xn<=7&&xn>=0}).length,expired:_e.filter(Js=>new Date(Js.expiryDate)<new Date).length};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(QrCode,{className:"h-5 w-5"}),"Gestione Etichette Prodotti"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ko.total}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Etichette Totali"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ko.withPhotos}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Con Foto"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ko.expiringSoon}),jsxRuntimeExports.jsx("div",{className:"text-sm text-yellow-700",children:"In Scadenza"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ko.expired}),jsxRuntimeExports.jsx("div",{className:"text-sm text-red-700",children:"Scaduti"})]})]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[jsxRuntimeExports.jsxs(Button,{variant:ts==="scanner"?"default":"outline",onClick:()=>ss("scanner"),className:"flex items-center gap-2 whitespace-nowrap",children:[jsxRuntimeExports.jsx(Scan,{className:"h-4 w-4"}),"Scanner"]}),jsxRuntimeExports.jsxs(Button,{variant:ts==="labels"?"default":"outline",onClick:()=>ss("labels"),className:"flex items-center gap-2 whitespace-nowrap",children:[jsxRuntimeExports.jsx(Tag,{className:"h-4 w-4"}),"Le Mie Etichette"]}),jsxRuntimeExports.jsxs(Button,{variant:ts==="photos"?"default":"outline",onClick:()=>ss("photos"),className:"flex items-center gap-2 whitespace-nowrap",children:[jsxRuntimeExports.jsx(Image$1,{className:"h-4 w-4"}),"Foto Prodotti"]})]}),ts==="scanner"&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Camera,{className:"h-5 w-5"}),"Scanner Codici a Barre"]})}),jsxRuntimeExports.jsx(CardContent,{className:"space-y-4",children:jsxRuntimeExports.jsx("div",{className:"text-center",children:xs?jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"animate-pulse",children:jsxRuntimeExports.jsx(QrCode,{className:"h-20 w-20 text-blue-500"})}),jsxRuntimeExports.jsx("p",{className:"text-blue-600",children:"Scansione in corso..."})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[us?jsxRuntimeExports.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-green-700",children:["Codice scansionato: ",jsxRuntimeExports.jsx("strong",{children:us})]})}):jsxRuntimeExports.jsxs("div",{className:"p-8 border-2 border-dashed border-gray-300 rounded-lg",children:[jsxRuntimeExports.jsx(QrCode,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:'Clicca "Avvia Scanner" per leggere un codice a barre'})]}),jsxRuntimeExports.jsxs(Button,{onClick:wl,disabled:xs,className:"w-full",children:[jsxRuntimeExports.jsx(Scan,{className:"h-4 w-4 mr-2"}),"Avvia Scanner"]}),us&&jsxRuntimeExports.jsxs(Button,{onClick:()=>ns(!0),variant:"outline",className:"w-full",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Crea Etichetta per questo Prodotto"]})]})})})]}),ts==="labels"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:tr?`Cerca in "${tr.name}"...`:nn?`Cerca in "${(Gl=sn.find(Js=>Js.id===nn))==null?void 0:Gl.name}"...`:"Cerca per nome, codice, lotto...",value:is,onChange:Js=>os(Js.target.value),className:"pl-10"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:()=>ns(!0),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Nuova Etichetta"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:oo,variant:Gs?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckSquare,{className:"h-4 w-4"}),Gs?"Annulla Selezione":"Seleziona Etichette"]}),Gs&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:an,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}),"Seleziona Tutto"]}),jsxRuntimeExports.jsxs(Button,{onClick:lo,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),jsxRuntimeExports.jsxs(Button,{onClick:ro,variant:"default",size:"sm",className:"flex items-center gap-2",disabled:As.length===0,children:[jsxRuntimeExports.jsx(Move,{className:"h-4 w-4"}),"Crea Gruppo (",As.length,")"]})]}),!tr&&!Gs&&jsxRuntimeExports.jsxs(Button,{onClick:Mn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(FolderPlus,{className:"h-4 w-4"}),"Crea Gruppo di Etichette"]}),!tr&&Gs&&As.length>0&&jsxRuntimeExports.jsxs(Button,{onClick:()=>Hn(!0),variant:"default",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Folder,{className:"h-4 w-4"}),"Sposta Etichette nel Gruppo..."]}),tr&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:$a,variant:"default",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Aggiungi Etichette al Gruppo"]}),jsxRuntimeExports.jsxs(Button,{onClick:Ds,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),"Modifica Gruppo"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>vr(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),'Esci da "',tr.name,'"']})]}),nn&&jsxRuntimeExports.jsxs(Button,{onClick:()=>tn(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),'Esci da "',(Sl=sn.find(Js=>Js.id===nn))==null?void 0:Sl.name,'"']})]}),Gs&&As.length>0&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm",children:[As.length," etichett",As.length===1?"a selezionata":"e selezionate"]})})]})})}),!tr&&!nn&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Folder,{className:"h-5 w-5"}),"I Miei Gruppi di Etichette"]}),Ps.length>0&&jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cerca gruppi ed etichette...",value:$n,onChange:Js=>An(Js.target.value),className:"pl-10 w-64"})]})})]})}),jsxRuntimeExports.jsxs(CardContent,{children:[$n&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Search,{className:"h-4 w-4"}),'Risultati Ricerca: "',$n,'"']}),(()=>{const Js=Ps.filter(Br=>Br.name.toLowerCase().includes($n.toLowerCase())),Rr=_e.filter(Br=>Br.productName.toLowerCase().includes($n.toLowerCase())||Br.barcode.includes($n)||Br.lotNumber.toLowerCase().includes($n.toLowerCase()));return Js.length===0&&Rr.length===0?jsxRuntimeExports.jsx("div",{className:"text-center py-4",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Nessun risultato trovato"})}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[Js.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Folder,{className:"h-3 w-3"}),"GRUPPI (",Js.length,")"]}),jsxRuntimeExports.jsx("div",{className:"grid gap-2",children:Js.map(Br=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-blue-50 border-blue-200",onClick:()=>{vr(Br),An("")},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[jsxRuntimeExports.jsx(Folder,{className:"h-3 w-3"}),"GRUPPO"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:Br.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[Br.labelIds.length," etichette"]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:"Click per aprire"})]},Br.id))})]}),Rr.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Package,{className:"h-3 w-3"}),"ETICHETTE (",Rr.length,")"]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-2",children:[Rr.slice(0,5).map(Br=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-green-50 border-green-200",onClick:()=>{ds(Br),gs(!0),An("")},children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:[jsxRuntimeExports.jsx(Package,{className:"h-3 w-3"}),"ETICHETTA"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:Br.productName}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["Scadenza: ",Br.expiryDate,"  Lotto: ",Br.lotNumber]})]})]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:"Click per visualizzare"})]},Br.id)),Rr.length>5&&jsxRuntimeExports.jsx("div",{className:"text-center py-2",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:["... e altre ",Rr.length-5," etichette"]})})]})]})]})})(),jsxRuntimeExports.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>An(""),className:"w-full",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4 mr-2"}),"Chiudi Ricerca"]})})]}),!$n&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Tag,{className:"h-4 w-4"}),"Categorie Ingredienti (Scelte Rapide)"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:sn.map(Js=>{const Br=_e.filter(xn=>xn.category===Js.id).length;return jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>hn(Js.id),className:`flex items-center gap-2 ${Br>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:Br===0,children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:Js.emoji}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:Js.name}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:Js.name.split(" ")[0]}),Br>0&&jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Js.color} ml-1`,children:Br})]},Js.id)})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su una categoria per vedere le relative etichette"})]}),Ps.length>0&&jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 my-4"}),Ps.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Tag,{className:"h-4 w-4"}),"Gruppi Personalizzati (Scelte Rapide)"]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:Ps.map(Js=>{const Rr=Js.labelIds.length;return jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>vr(Js),className:`flex items-center gap-2 ${Rr>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:Rr===0,children:[jsxRuntimeExports.jsx(Folder,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:Js.name}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:Js.name.split(" ")[0]}),Rr>0&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 ml-1",children:Rr})]},Js.id)})}),jsxRuntimeExports.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su un gruppo per vedere le relative etichette"})]}),!$n&&jsxRuntimeExports.jsx("div",{className:"border-t border-gray-200 my-4"}),!$n&&jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),"Gestione Gruppi Personalizzati"]})}),!$n&&jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:Ps.map(Js=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 hover:shadow-md cursor-pointer transition-all",onClick:()=>vr(Js),children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Folder,{className:"h-5 w-5 text-blue-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold",children:Js.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:[Js.labelCount," etichett",Js.labelCount===1?"a":"e","  Ultimo aggiornamento: ",new Date(Js.lastUpdate).toLocaleDateString("it-IT")]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:Rr=>{Rr.stopPropagation(),br(Js)},title:"Modifica gruppo",children:jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:Rr=>{if(Rr.stopPropagation(),confirm(`Eliminare il gruppo "${Js.name}"? Le etichette non verranno eliminate.`)){const Br=Ps.filter(xn=>xn.id!==Js.id);vn(Br)}},title:"Elimina gruppo",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]},Js.id))}),!$n&&Ps.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo personalizzato creato ancora."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Usa "Seleziona Etichette" per creare gruppi dalle etichette esistenti'})]})]})]}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[tr&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-lg",children:[jsxRuntimeExports.jsx(Folder,{className:"h-5 w-5 text-blue-600"}),"Gruppo: ",jsxRuntimeExports.jsx("span",{className:"text-blue-600",children:tr.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",tr.labelIds.length," etichette)"]})]})})}),nn&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-lg",children:[jsxRuntimeExports.jsx(Tag,{className:"h-5 w-5 text-green-600"}),"Categoria: ",jsxRuntimeExports.jsx("span",{className:"text-green-600",children:(iu=sn.find(Js=>Js.id===nn))==null?void 0:iu.name}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",Wo.length," etichette)"]})]})})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),"Etichette Registrate",jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",Wo.length," totali)"]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"grid gap-4",children:[Wo.map(Js=>{var Bn,qo;const Rr=new Date(Js.expiryDate),Br=new Date,xn=Math.ceil((Rr-Br)/(1e3*60*60*24)),on=Rr<Br,mn=xn<=7&&xn>=0,yn=As.includes(Js.id);return jsxRuntimeExports.jsx(Card,{className:`${on?"border-red-200 bg-red-50":mn?"border-yellow-200 bg-yellow-50":""} ${yn?"ring-2 ring-blue-500":""} ${Gs?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>Gs&&Jn(Js.id),children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[Gs&&jsxRuntimeExports.jsx("div",{className:"mr-3 mt-1",children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:yn,onChange:()=>Jn(Js.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:Js.productName}),Js.photo&&jsxRuntimeExports.jsx(Image$1,{className:"h-4 w-4 text-blue-500"}),on&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"SCADUTO"}),mn&&!on&&jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"IN SCADENZA"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Codice:"})," ",Js.barcode]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Lotto:"})," ",Js.lotNumber]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Scadenza:"})," ",new Date(Js.expiryDate).toLocaleDateString("it-IT")]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Categoria:"})," ",((Bn=sn.find(wn=>wn.id===Js.category))==null?void 0:Bn.name)||((qo=Ps.find(wn=>wn.id===Js.category))==null?void 0:qo.name)||Js.category||"Non specificata"]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsx("strong",{children:"Gruppo:"})," ",(()=>{const wn=On(Js.id);return wn?jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[jsxRuntimeExports.jsx(Folder,{className:"h-3 w-3"}),wn.name]}):jsxRuntimeExports.jsx("span",{className:"text-gray-400 ml-2",children:"Nessun gruppo"})})()]})]}),Js.location&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("strong",{children:"Posizione:"})," ",Js.location]}),Js.notes&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," ",Js.notes]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Creata da ",Js.createdBy," il ",new Date(Js.createdAt).toLocaleDateString("it-IT")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:wn=>{wn.stopPropagation(),ds(Js),gs(!0)},className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Eye,{className:"h-3 w-3"}),"Visualizza"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:wn=>{wn.stopPropagation(),Su(Js)},className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Download,{className:"h-3 w-3"}),"Download"]}),Js.photo&&jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"outline",onClick:wn=>{wn.stopPropagation(),Hs(Js.photo),Es(!0)},className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Image$1,{className:"h-3 w-3"}),"Foto"]}),jsxRuntimeExports.jsxs(Button,{size:"sm",variant:"destructive",onClick:wn=>{wn.stopPropagation(),qr(Js.id)},className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-3 w-3"}),"Elimina"]})]})]})})},Js.id)}),Wo.length===0&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6 text-center",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:tr?`Nessuna etichetta nel gruppo "${tr.name}"`:nn?`Nessuna etichetta nella categoria "${(go=sn.find(Js=>Js.id===nn))==null?void 0:go.name}"`:is?"Nessuna etichetta trovata":"Nessuna etichetta creata ancora"})]})})]})]}),ts==="photos"&&jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cerca per nome, codice, lotto...",value:sr,onChange:Js=>nr(Js.target.value),className:"pl-10"})]}),jsxRuntimeExports.jsx(Input,{type:"date",placeholder:"Filtra per data creazione",value:pr,onChange:Js=>xr(Js.target.value)}),jsxRuntimeExports.jsxs("select",{value:Tr,onChange:Js=>Dr(Js.target.value),className:"p-2 border border-gray-300 rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Tutte le scadenze"}),jsxRuntimeExports.jsx("option",{value:"fresh",children:"Prodotti freschi (>7 giorni)"}),jsxRuntimeExports.jsx("option",{value:"expiring",children:"In scadenza (7 giorni)"}),jsxRuntimeExports.jsx("option",{value:"expired",children:"Scaduti"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:_n,variant:ws?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckSquare,{className:"h-4 w-4"}),ws?"Annulla Selezione":"Seleziona Foto"]}),ws&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Button,{onClick:Nn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}),"Seleziona Tutte (",Co.length,")"]}),jsxRuntimeExports.jsxs(Button,{onClick:Fn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}),"Solo Pagina Corrente (",_o.length,")"]}),jsxRuntimeExports.jsxs(Button,{onClick:xo,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),jsxRuntimeExports.jsxs(Button,{variant:"destructive",size:"sm",className:"flex items-center gap-2",disabled:Ys.length===0,onClick:()=>{if(confirm(`Eliminare ${Ys.length} foto selezionate?`)){const Js=_e.map(Rr=>Ys.includes(Rr.id)?{...Rr,photo:null}:Rr);e(Js),localStorage.setItem("haccp-product-labels",JSON.stringify(Js)),Ws([]),Vs(!1)}},children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Elimina Selezionate (",Ys.length,")"]})]}),(sr||pr||Tr)&&jsxRuntimeExports.jsxs(Button,{onClick:()=>{nr(""),xr(""),Dr("")},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Cancella Filtri"]})]}),ws&&Ys.length>0&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm",children:[Ys.length," foto selezionat",Ys.length===1?"a":"e"]})}),(sr||pr||Tr)&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-yellow-700 text-sm",children:["Filtri attivi: ",Co.length," foto di ",_e.filter(Js=>Js.photo).length]})}),(()=>{const Js=nu();return Js.isLargeDataset?jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm font-semibold",children:["Dataset grande: ",Js.totalPhotos," foto"]}),jsxRuntimeExports.jsxs("p",{className:"text-blue-600 text-xs",children:["Modalit ottimizzata attiva  Pagina ",zr," di ",_i]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("select",{value:Nr,onChange:Rr=>{cr(Number(Rr.target.value)),or(1)},className:"text-xs p-1 border rounded",children:[jsxRuntimeExports.jsx("option",{value:12,children:"12 foto/pagina"}),jsxRuntimeExports.jsx("option",{value:20,children:"20 foto/pagina"}),jsxRuntimeExports.jsx("option",{value:50,children:"50 foto/pagina"}),jsxRuntimeExports.jsx("option",{value:100,children:"100 foto/pagina"})]}),jsxRuntimeExports.jsxs("select",{value:wr,onChange:Rr=>dr(Rr.target.value),className:"text-xs p-1 border rounded",children:[jsxRuntimeExports.jsx("option",{value:"low",children:"Qualit Bassa"}),jsxRuntimeExports.jsx("option",{value:"medium",children:"Qualit Media"}),jsxRuntimeExports.jsx("option",{value:"high",children:"Qualit Alta"})]})]})]})}):null})()]})})}),_i>1&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-4",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>or(Js=>Math.max(1,Js-1)),disabled:zr===1,variant:"outline",size:"sm",children:" Precedente"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,_i))].map((Js,Rr)=>{let Br;return _i<=5?Br=Rr+1:(Br=Math.max(1,zr-2)+Rr,Br>_i&&(Br=_i-(4-Rr))),jsxRuntimeExports.jsx(Button,{onClick:()=>or(Br),variant:zr===Br?"default":"outline",size:"sm",className:"w-8 h-8 p-0",children:Br},Br)})}),jsxRuntimeExports.jsx(Button,{onClick:()=>or(Js=>Math.min(_i,Js+1)),disabled:zr===_i,variant:"outline",size:"sm",children:"Successiva "})]}),jsxRuntimeExports.jsx("div",{className:"text-center mt-2",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Pagina ",zr," di ",_i,"  Mostrando ",_o.length," di ",Co.length," foto"]})})]})}),jsxRuntimeExports.jsx("div",{className:`grid gap-4 ${Nr<=12?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":Nr<=20?"grid-cols-2 md:grid-cols-4 lg:grid-cols-5":"grid-cols-3 md:grid-cols-5 lg:grid-cols-6"}`,children:_o.map(Js=>{const Rr=Ys.includes(Js.id),Br=new Date(Js.expiryDate),xn=new Date,on=Math.ceil((Br-xn)/(1e3*60*60*24)),mn=Br<xn,yn=on<=7&&on>=0;return jsxRuntimeExports.jsxs(Card,{className:`overflow-hidden ${Rr?"ring-2 ring-blue-500":""} ${ws?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>ws&&Pn(Js.id),children:[jsxRuntimeExports.jsxs("div",{className:"relative",children:[ws&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 left-2 z-10",children:jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Rr,onChange:()=>Pn(Js.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),(mn||yn)&&jsxRuntimeExports.jsx("div",{className:"absolute top-2 right-2 z-10",children:jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs rounded ${mn?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:mn?"SCADUTO":"SCADENZA"})}),jsxRuntimeExports.jsxs("div",{className:"aspect-square bg-gray-100 cursor-pointer overflow-hidden",onClick:Bn=>{ws||(Bn.stopPropagation(),Hs(Js.photo),Es(!0))},children:[jsxRuntimeExports.jsx("img",{src:Cu(Js.photo),alt:Js.productName,className:"w-full h-full object-cover transition-opacity duration-200",loading:"lazy",onError:Bn=>{Bn.target.style.display="none",Bn.target.nextSibling.style.display="flex"}}),jsxRuntimeExports.jsx("div",{className:"w-full h-full hidden items-center justify-center bg-red-50",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-6 w-6 text-red-400 mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-red-600",children:"Errore caricamento"})]})})]})]}),jsxRuntimeExports.jsxs(CardContent,{className:"pt-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold text-sm truncate",children:Js.productName}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[jsxRuntimeExports.jsxs("p",{children:["Scad: ",new Date(Js.expiryDate).toLocaleDateString("it-IT")]}),jsxRuntimeExports.jsxs("p",{children:["Creata: ",new Date(Js.createdAt).toLocaleDateString("it-IT")]}),Js.lotNumber&&jsxRuntimeExports.jsxs("p",{children:["Lotto: ",Js.lotNumber]})]})]})]},Js.id)})}),_i>1&&_o.length>0&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-center items-center gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>or(1),disabled:zr===1,variant:"outline",size:"sm",children:"Prima"}),jsxRuntimeExports.jsx(Button,{onClick:()=>or(Js=>Math.max(1,Js-1)),disabled:zr===1,variant:"outline",size:"sm",children:""}),jsxRuntimeExports.jsxs("span",{className:"px-4 py-2 text-sm bg-gray-100 rounded",children:[zr," / ",_i]}),jsxRuntimeExports.jsx(Button,{onClick:()=>or(Js=>Math.min(_i,Js+1)),disabled:zr===_i,variant:"outline",size:"sm",children:""}),jsxRuntimeExports.jsx(Button,{onClick:()=>or(_i),disabled:zr===_i,variant:"outline",size:"sm",children:"Ultima"})]})})}),Co.length===0&&_e.filter(Js=>Js.photo).length>0&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6 text-center",children:[jsxRuntimeExports.jsx(Filter,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Nessuna foto trovata con i filtri attuali"})]})}),_e.filter(Js=>Js.photo).length===0&&jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"pt-6 text-center",children:[jsxRuntimeExports.jsx(Image$1,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Nessuna foto caricata ancora"})]})})]}),rs&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Nuova Etichetta Prodotto"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{ns(!1),dn({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"productName",children:"Nome Prodotto *"}),jsxRuntimeExports.jsx(Input,{id:"productName",value:Hr.productName,onChange:Js=>dn(Rr=>({...Rr,productName:Js.target.value})),placeholder:"es. Mozzarella di Bufala"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"barcode",children:"Codice a Barre"}),jsxRuntimeExports.jsx(Input,{id:"barcode",value:Hr.barcode,onChange:Js=>dn(Rr=>({...Rr,barcode:Js.target.value})),placeholder:"Scansiona o inserisci manualmente"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expiryDate",children:"Data Scadenza *"}),jsxRuntimeExports.jsx(Input,{id:"expiryDate",type:"date",value:Hr.expiryDate,onChange:Js=>dn(Rr=>({...Rr,expiryDate:Js.target.value}))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"lotNumber",children:"Numero Lotto"}),jsxRuntimeExports.jsx(Input,{id:"lotNumber",value:Hr.lotNumber,onChange:Js=>dn(Rr=>({...Rr,lotNumber:Js.target.value})),placeholder:"es. L240315A"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"category",children:"Categoria"}),jsxRuntimeExports.jsxs("select",{id:"category",value:Hr.category,onChange:Js=>dn(Rr=>({...Rr,category:Js.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona categoria"}),jsxRuntimeExports.jsxs("optgroup",{label:" Categorie Standard",children:[jsxRuntimeExports.jsx("option",{value:"latticini",children:"Latticini e Formaggi"}),jsxRuntimeExports.jsx("option",{value:"carni",children:"Carni e Salumi"}),jsxRuntimeExports.jsx("option",{value:"verdure",children:"Verdure e Ortaggi"}),jsxRuntimeExports.jsx("option",{value:"frutta",children:"Frutta Fresca"}),jsxRuntimeExports.jsx("option",{value:"pesce",children:"Pesce e Frutti di Mare"}),jsxRuntimeExports.jsx("option",{value:"surgelati",children:"Surgelati"}),jsxRuntimeExports.jsx("option",{value:"dispensa",children:"Dispensa Secca"}),jsxRuntimeExports.jsx("option",{value:"condimenti",children:"Oli e Condimenti"})]}),Ps.length>0&&jsxRuntimeExports.jsx("optgroup",{label:" I Miei Gruppi di Etichette",children:Ps.map(Js=>jsxRuntimeExports.jsxs("option",{value:`group_${Js.id}`,children:[Js.name," (",Js.labelCount," etichett",Js.labelCount===1?"a":"e",")"]},Js.id))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"location",children:"Posizione"}),jsxRuntimeExports.jsx(Input,{id:"location",value:Hr.location,onChange:Js=>dn(Rr=>({...Rr,location:Js.target.value})),placeholder:"es. Frigo A - Ripiano intermedio"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Allergeni"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2 mt-2",children:ALLERGENS.map(Js=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{const Rr=Hr.allergens.includes(Js.id);dn(Br=>({...Br,allergens:Rr?Br.allergens.filter(xn=>xn!==Js.id):[...Br.allergens,Js.id]}))},className:`px-2 py-1 text-xs rounded transition-colors ${Hr.allergens.includes(Js.id)?Js.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Js.name},Js.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"notes",children:"Note"}),jsxRuntimeExports.jsx("textarea",{id:"notes",value:Hr.notes,onChange:Js=>dn(Rr=>({...Rr,notes:Js.target.value})),placeholder:"Note aggiuntive...",className:"w-full p-2 border border-gray-300 rounded-md h-20 resize-none"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{children:"Foto Prodotto"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:"image/*",onChange:ru,className:"w-full p-2 border border-gray-300 rounded-md"}),Hr.photo&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:Hr.photo,alt:"Preview",className:"w-full h-32 object-cover rounded-md border"}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>dn(Js=>({...Js,photo:null})),className:"absolute top-2 right-2",children:jsxRuntimeExports.jsx(X$2,{className:"h-3 w-3"})})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:Rl,className:"flex-1",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4 mr-2"}),"Salva Etichetta"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{ns(!1),dn({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:"Annulla"})]})]})]})}),ys&&vs&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Anteprima Etichetta"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>gs(!1),children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsx("div",{className:"border-2 border-dashed border-gray-300 p-4 rounded-lg bg-white",children:jsxRuntimeExports.jsxs("div",{className:"text-center space-y-2",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold",children:vs.productName}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Codice:"})," ",vs.barcode]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Lotto:"})," ",vs.lotNumber]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Scadenza:"})," ",new Date(vs.expiryDate).toLocaleDateString("it-IT")]}),vs.location&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Posizione:"})," ",vs.location]})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center my-4",children:jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-black border-2 border-gray-300 flex items-center justify-center",children:jsxRuntimeExports.jsx(QrCode,{className:"h-12 w-12 text-white"})})}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-600",children:["Creata il ",new Date(vs.createdAt).toLocaleDateString("it-IT")]})]})}),jsxRuntimeExports.jsx("div",{className:"mt-4 text-center",children:jsxRuntimeExports.jsxs(Button,{onClick:()=>alert("Funzione stampa in sviluppo"),children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4 mr-2"}),"Scarica Etichetta PDF"]})})]})]})}),fs&&Os&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>Es(!1),className:"absolute top-4 right-4 z-10",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("img",{src:Os,alt:"Foto prodotto",className:"max-w-full max-h-full object-contain rounded-lg"})]})}),Qs&&Ls.length>0&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-orange-500"}),"Pulizia Automatica"]})}),jsxRuntimeExports.jsxs(CardContent,{children:[jsxRuntimeExports.jsxs("p",{className:"mb-4",children:["Trovati ",jsxRuntimeExports.jsx("strong",{children:Ls.length})," prodotti scaduti con foto. Vuoi eliminare le foto per liberare spazio in memoria?"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto mb-4",children:Ls.map(Js=>jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-50 rounded",children:[jsxRuntimeExports.jsx("span",{className:"text-sm",children:Js.productName}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-red-600",children:["Scad: ",new Date(Js.expiryDate).toLocaleDateString("it-IT")]})]},Js.id))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:Vl,className:"flex-1",variant:"destructive",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 mr-2"}),"Elimina Foto"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>zs(!1),children:"Mantieni"})]})]})]})}),$s&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Crea Nuovo Gruppo"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{qs(!1),Us("")},children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"groupName",children:"Nome del Gruppo"}),jsxRuntimeExports.jsx(Input,{id:"groupName",value:Cs,onChange:Js=>Us(Js.target.value),placeholder:"es. Etichette Salumi",onKeyPress:Js=>Js.key==="Enter"&&Yn()})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo conterr ",As.length," etichett",As.length===1?"a":"e"," selezionat",As.length===1?"a":"e"]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:Yn,className:"flex-1",disabled:!Cs.trim(),children:[jsxRuntimeExports.jsx(FolderPlus,{className:"h-4 w-4 mr-2"}),"Crea Gruppo"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{qs(!1),Us("")},children:"Annulla"})]})]})]})}),lr&&tr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{children:['Aggiungi Etichette al Gruppo "',tr.name,'"']}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{_r(!1),_s([]),yr("")},children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),jsxRuntimeExports.jsx(Input,{placeholder:"Cerca etichette da aggiungere...",value:Ks,onChange:Js=>yr(Js.target.value),className:"pl-10"})]})}),jsxRuntimeExports.jsxs(Button,{onClick:no,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"}),"Seleziona Tutte"]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>_s([]),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Deseleziona"]})]}),Kr.length>0&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm",children:[Kr.length," etichett",Kr.length===1?"a selezionata":"e selezionate"]})}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-gray-700 text-sm",children:["Etichette disponibili: ",Ar.filter(Js=>Js.productName.toLowerCase().includes(Ks.toLowerCase())||Js.barcode.includes(Ks)||Js.lotNumber.toLowerCase().includes(Ks.toLowerCase())).length," di ",Ar.length]})})]}),jsxRuntimeExports.jsxs("div",{className:"max-h-96 overflow-y-auto space-y-2",children:[Ar.filter(Js=>Js.productName.toLowerCase().includes(Ks.toLowerCase())||Js.barcode.includes(Ks)||Js.lotNumber.toLowerCase().includes(Ks.toLowerCase())).map(Js=>{const Rr=Kr.includes(Js.id),Br=On(Js.id);return jsxRuntimeExports.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors hover:shadow-md ${Rr?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-400"}`,onClick:()=>ho(Js.id),children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Rr,onChange:()=>ho(Js.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-semibold",children:Js.productName}),Js.photo&&jsxRuntimeExports.jsx(Image$1,{className:"h-4 w-4 text-blue-500"}),Br&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:['In "',Br.name,'"']})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Codice:"})," ",Js.barcode]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Lotto:"})," ",Js.lotNumber]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Scadenza:"})," ",new Date(Js.expiryDate).toLocaleDateString("it-IT")]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Categoria:"})," ",Js.category]})]})]})]})},Js.id)}),Ar.length===0&&jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Tutte le etichette sono gi in questo gruppo"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[jsxRuntimeExports.jsxs(Button,{onClick:Bo,className:"flex-1",disabled:Kr.length===0,children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Aggiungi ",Kr.length," Etichett",Kr.length===1?"a":"e"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{_r(!1),_s([]),yr("")},children:"Annulla"})]})]})]})}),Ur&&Ir&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{children:"Modifica Gruppo"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>{Or(!1),kr(null),Gr("")},children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"editGroupName",children:"Nome del Gruppo"}),jsxRuntimeExports.jsx(Input,{id:"editGroupName",value:Zr,onChange:Js=>Gr(Js.target.value),placeholder:"es. Etichette Salumi",onKeyPress:Js=>Js.key==="Enter"&&Er()})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo contiene ",Ir.labelCount," etichett",Ir.labelCount===1?"a":"e"]}),jsxRuntimeExports.jsxs("p",{className:"text-blue-600 text-xs mt-1",children:["Creato da ",Ir.createdBy," il ",new Date(Ir.createdAt).toLocaleDateString("it-IT")]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:Er,className:"flex-1",disabled:!Zr.trim()||Zr.trim()===Ir.name,children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 mr-2"}),"Salva Modifiche"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{Or(!1),kr(null),Gr("")},children:"Annulla"})]})]})]})}),Qr&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md mx-4",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{className:"text-center text-orange-600",children:" Conferma Salvataggio Etichetta"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Stai per salvare l'etichetta con questi dati:"}),jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left space-y-2",children:[jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Prodotto:"})," ",Hr.productName]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Scadenza:"})," ",Hr.expiryDate]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Lotto:"})," ",Hr.lotNumber||"Non specificato"]}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Categoria:"})," ",((Jo=sn.find(Js=>Js.id===Hr.category))==null?void 0:Jo.name)||((eo=Ps.find(Js=>Js.id===Hr.category))==null?void 0:eo.name)||"Non specificata"]}),Hr.photo&&jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx("strong",{children:"Foto:"}),"  Allegata"]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-red-700",children:[jsxRuntimeExports.jsx("strong",{children:" ATTENZIONE:"}),jsxRuntimeExports.jsx("br",{}),"Una volta salvata, l'etichetta ",jsxRuntimeExports.jsx("strong",{children:"NON potr essere modificata"}),". In caso di errore sar necessario:"]}),jsxRuntimeExports.jsxs("ul",{className:"text-xs text-red-600 mt-2 text-left",children:[jsxRuntimeExports.jsx("li",{children:" Caricare una nuova foto"}),jsxRuntimeExports.jsx("li",{children:" Rifare completamente la registrazione"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-red-700 mt-2",children:jsxRuntimeExports.jsx("strong",{children:"Ricontrolla attentamente tutte le informazioni!"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>Un(!1),className:"flex-1",children:" Modifica Dati"}),jsxRuntimeExports.jsx(Button,{onClick:Oo,className:"flex-1 bg-green-600 hover:bg-green-700",children:" Conferma e Salva"})]})]})})]})}),ys&&vs&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Eye,{className:"h-5 w-5"}),"Visualizzazione Etichetta"]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>{gs(!1),ds(null)},children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[vs.photo&&jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium mb-2",children:"Foto Prodotto"}),jsxRuntimeExports.jsxs("div",{className:"relative inline-block",children:[jsxRuntimeExports.jsx("img",{src:vs.photo,alt:"Foto prodotto",className:"w-32 h-32 object-cover rounded-lg border cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>un(!0)}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xs",children:"Clicca per ingrandire"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Nome Prodotto"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.productName})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Codice/Barcode"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.barcode||"Non specificato"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Data Scadenza"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.expiryDate})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Numero Lotto"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.lotNumber||"Non specificato"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Categoria"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:((Cl=sn.find(Js=>Js.id===vs.category))==null?void 0:Cl.name)||((Wl=Ps.find(Js=>Js.id===vs.category))==null?void 0:Wl.name)||"Non specificata"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Posizione"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.location||"Non specificata"})]})]}),vs.notes&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium",children:"Note"}),jsxRuntimeExports.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:vs.notes})]}),jsxRuntimeExports.jsx("div",{className:"border-t pt-4",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-500",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-xs font-medium",children:"Creata da"}),jsxRuntimeExports.jsx("p",{children:vs.createdBy})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-xs font-medium",children:"Data Creazione"}),jsxRuntimeExports.jsx("p",{children:new Date(vs.createdAt).toLocaleString()})]})]})}),jsxRuntimeExports.jsx("div",{className:"border-t pt-4 flex justify-center",children:jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{gs(!1),ds(null)},className:"px-8",children:"Chiudi"})})]})})]})}),en&&(vs==null?void 0:vs.photo)&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:()=>un(!1),children:jsxRuntimeExports.jsxs("div",{className:"relative max-w-4xl max-h-4xl p-4",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 text-white hover:bg-white hover:bg-opacity-20",onClick:()=>un(!1),children:jsxRuntimeExports.jsx(X$2,{className:"h-6 w-6"})}),jsxRuntimeExports.jsx("img",{src:vs.photo,alt:"Foto prodotto ingrandita",className:"max-w-full max-h-full object-contain rounded-lg",onClick:Js=>Js.stopPropagation()})]})}),Sn&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:jsxRuntimeExports.jsxs(Card,{className:"w-full max-w-md mx-4",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Folder,{className:"h-5 w-5"}),"Sposta Etichette nel Gruppo"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-600",children:["Seleziona il gruppo dove spostare le ",As.length," etichette selezionate:"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Ps.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo disponibile."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Crea prima un gruppo per spostare le etichette."})]}):Ps.map(Js=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{const Rr=Ps.map(Br=>{if(Br.id===Js.id){const xn=[...new Set([...Br.labelIds,...As])];return{...Br,labelIds:xn,labelCount:xn.length,lastUpdate:new Date().toISOString()}}else{const xn=Br.labelIds.filter(on=>!As.includes(on));return{...Br,labelIds:xn,labelCount:xn.length,lastUpdate:xn.length!==Br.labelIds.length?new Date().toISOString():Br.lastUpdate}}});vn(Rr),ks([]),bs(!1),Hn(!1)},children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:Js.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[Js.labelIds.length," etichette"]})]}),jsxRuntimeExports.jsx(Folder,{className:"h-4 w-4 text-gray-400"})]},Js.id))}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{Hn(!1)},className:"flex-1",children:"Annulla"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{Hn(!1),qs(!0)},variant:"default",className:"flex-1",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-2"}),"Nuovo Gruppo"]})]})]})})]})})]})}function AIAssistant({currentUser:_e,currentSection:e,products:St=[],temperatures:es=[],cleaning:ts=[],staff:ss=[],onAction:rs}){const[ns,is]=reactExports.useState([]),[os,us]=reactExports.useState(""),[ps,xs]=reactExports.useState(!1);reactExports.useState([]);const[cs,ys]=reactExports.useState(!1),[gs,vs]=reactExports.useState(!1),[ds,fs]=reactExports.useState(null),[Es,Os]=reactExports.useState(!0),[Hs,Qs]=reactExports.useState(!1),[zs,Ls]=reactExports.useState(!1),Bs=reactExports.useRef(null),Gs=reactExports.useRef(!0),bs=reactExports.useRef(!0);console.log(" AIAssistant: Component rendering, isMinimized:",Es,"isMounted:",Hs,"isVisible:",zs),reactExports.useEffect(()=>{console.log(" AIAssistant: useEffect triggered - setting up component"),Os(!0),Gs.current=!0,bs.current=!0,Ls(!1),console.log(" AIAssistant: Starting mount timer (500ms)"),setTimeout(()=>{console.log(" AIAssistant: Mount timer complete - making visible"),Qs(!0),Os(!0),Gs.current=!0,Ls(!0)},500),console.log(" AIAssistant: Starting grace period (2000ms)"),setTimeout(()=>{bs.current=!1,console.log(" AIAssistant: Grace period ended, chat can now be opened by user")},2e3)},[]),reactExports.useEffect(()=>{console.log(" AIAssistant: State changed - isMinimized:",Es,"isMounted:",Hs,"isVisible:",zs,"forceMinimized:",Gs.current,"gracePeriod:",bs.current)},[Es,Hs,zs]);const As=Ws=>{if(console.log("AIAssistant: handleSetMinimized called with:",Ws,"gracePeriod:",bs.current,"forceMinimized:",Gs.current),Ws===!1&&bs.current){console.log("AIAssistant: BLOCKED - Still in grace period, no opening allowed");return}if(Ws===!1&&Gs.current){console.log("AIAssistant: Preventing auto-open, first user click required");return}Gs.current=!1,Os(Ws)},ks=()=>{var Ws;(Ws=Bs.current)==null||Ws.scrollIntoView({behavior:"smooth"})};reactExports.useEffect(()=>{ks()},[ns]),reactExports.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const Ws=window.SpeechRecognition||window.webkitSpeechRecognition,sr=new Ws;sr.continuous=!1,sr.interimResults=!1,sr.lang="it-IT",sr.onstart=()=>{vs(!0),$s("assistant"," Ti sto ascoltando... Parla ora!","system")},sr.onresult=nr=>{const pr=nr.results[0][0].transcript;us(pr),$s("assistant",` Ho sentito: "${pr}"`,"system")},sr.onerror=nr=>{console.error("Speech recognition error:",nr.error),vs(!1),$s("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},sr.onend=()=>{vs(!1)},fs(sr)}},[]),reactExports.useEffect(()=>{},[]);const $s=(Ws,sr,nr="text",pr=null)=>{const xr={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:Ws,content:sr,type:nr,data:pr,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};is(Tr=>[...Tr,xr])},qs=async()=>{if(!os.trim())return;const Ws=os.trim();us(""),$s("user",Ws),xs(!0),setTimeout(()=>{const sr=Cs(Ws,e);$s("assistant",sr.content,sr.type,sr.data),xs(!1)},1e3)},Cs=(Ws,sr)=>{const nr=Ws.toLowerCase();switch(sr){case"inventory":return Us(nr);case"cleaning":return Ps(nr);case"temperature":return er();case"staff":return tr();case"dashboard":return vr();default:return ws(nr)}},Us=Ws=>{if(Ws.includes("aggiungere")||Ws.includes("nuovo prodotto"))return{content:`Per aggiungere un nuovo prodotto:

1. **Vai alla sezione "Inventario"**
2. **Clicca "Aggiungi Prodotto"**
3. **Compila i campi richiesti:**
   - Nome prodotto
   - Categoria
   - Posizione
   - Data scadenza
   - Allergeni (se presenti)

**Suggerimento**: Puoi anche usare le categorie predefinite per aggiunta rapida!`,type:"text"};if(Ws.includes("scadenza")||Ws.includes("scaduti")){const sr=St.filter(nr=>{const pr=Math.ceil((new Date(nr.expiryDate)-new Date)/864e5);return pr<=7&&pr>0});return sr.length>0?{content:` **Prodotti in scadenza** (${sr.length} prodotti):

${sr.map(nr=>` ${nr.name} - Scade il ${nr.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:sr}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}return{content:`Per l'inventario posso aiutarti con:
 Aggiungere prodotti
 Controllare scadenze
 Gestire categorie
 Suggerimenti ricette

Cosa ti serve?`,type:"text"}},Ps=Ws=>{if(Ws.includes("attivit")||Ws.includes("mansioni")){const sr=ts.filter(nr=>!nr.completed);return{content:` **Attivit da svolgere** (${sr.length} totali):

${sr.slice(0,5).map(nr=>` ${nr.task} - Assegnato a: ${nr.assignee}`).join(`
`)}
${sr.length>5?`
... e altre ${sr.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza (Giornaliere/Settimanali/Mensili/Annuali)`,type:"text"}}return Ws.includes("temperatura")||Ws.includes("frigo")?{content:` **Ultime temperature registrate**:

${es.slice(-3).map(nr=>` ${nr.location}: ${nr.temperature}C (${nr.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:`Per la sezione pulizia posso aiutarti con:
 Gestione attivit
 Controlli temperatura
 Frequenze mansioni
 Report completamento

Cosa ti serve?`,type:"text"}},er=Ws=>({content:`Per i controlli temperatura posso aiutarti con:
 Registrare nuove temperature
 Monitorare trend
 Alert automatici
 Report periodici

Cosa ti serve?`,type:"text"}),tr=Ws=>({content:`Per la gestione del personale posso aiutarti con:
 Aggiungere dipendenti
 Gestire ruoli
 Assegnare mansioni
 Report attivit

Cosa ti serve?`,type:"text"}),vr=Ws=>({content:`Per la dashboard posso aiutarti con:
 Panoramica generale
 Statistiche rapide
 Alert importanti
 Navigazione sezioni

Cosa ti serve?`,type:"text"}),ws=Ws=>Ws.includes("aiuto")||Ws.includes("help")?{content:` **Come posso aiutarti:**

** Inventario:**
 Aggiungere prodotti
 Controllare scadenze
 Suggerimenti ricette

** Pulizia:**
 Gestire attivit
 Controlli temperatura
 Frequenze mansioni

** Personale:**
 Gestire dipendenti
 Assegnare ruoli

** Dashboard:**
 Panoramica generale
 Statistiche

** Automatizzazioni:**
 Alert scadenze
 Ordini settimanali
 Suggerimenti ricette

Dimmi in quale sezione ti trovi o cosa ti serve!`,type:"text"}:{content:"Non sono sicuro di aver capito. Puoi essere pi specifico? Oppure dimmi in quale sezione ti trovi per ricevere aiuto mirato!",type:"text"},Vs=Ws=>{Ws.key==="Enter"&&!Ws.shiftKey&&(Ws.preventDefault(),qs())},Ys=()=>{if(!ds){$s("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}gs?ds.stop():ds.start()};return jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:!Hs||!zs?null:Es?jsxRuntimeExports.jsx(Button,{onClick:()=>As(!1),className:"w-12 h-12 rounded-full bg-blue-600 hover:bg-blue-700 shadow-lg",children:jsxRuntimeExports.jsx(Bot,{className:"h-6 w-6 text-white"})}):jsxRuntimeExports.jsxs(Card,{className:"w-80 h-96 flex flex-col",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center justify-between text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 text-blue-600"}),"Assistente IA",gs&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[jsxRuntimeExports.jsx(Mic,{className:"h-3 w-3 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>As(!0),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Minus,{className:"h-3 w-3"})}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:()=>ys(!cs),className:"h-6 w-6 p-0",children:jsxRuntimeExports.jsx(Settings,{className:"h-3 w-3"})})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"flex-1 flex flex-col p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[ns.map(Ws=>jsxRuntimeExports.jsx("div",{className:`flex ${Ws.sender==="user"?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${Ws.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[Ws.sender==="assistant"&&jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm whitespace-pre-wrap",children:Ws.content}),jsxRuntimeExports.jsx("div",{className:`text-xs mt-1 ${Ws.sender==="user"?"text-blue-100":"text-gray-500"}`,children:Ws.timestamp})]})]})})},Ws.id)),ps&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),jsxRuntimeExports.jsx("div",{ref:Bs})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t bg-white",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsx(Input,{value:os,onChange:Ws=>us(Ws.target.value),onKeyPress:Vs,placeholder:"Scrivi un messaggio...",className:"flex-1 min-h-[40px]"}),jsxRuntimeExports.jsx(Button,{onClick:Ys,disabled:ps,size:"sm",className:`px-3 h-10 ${gs?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:gs?jsxRuntimeExports.jsx(MicOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Mic,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:qs,disabled:!os.trim()||ps,size:"sm",className:"px-3 h-10",children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})})]})]})})}function AIAssistantSection({currentUser:_e,products:e=[],temperatures:St=[],cleaning:es=[],staff:ts=[],onAction:ss}){const[rs,ns]=reactExports.useState([]),[is,os]=reactExports.useState(""),[us,ps]=reactExports.useState(!1),[xs,cs]=reactExports.useState(!1),[ys,gs]=reactExports.useState(null),[vs,ds]=reactExports.useState(!1),[fs,Es]=reactExports.useState([{id:1,name:"Alert Scadenze",enabled:!0,description:"Avvisa sui prodotti in scadenza"},{id:2,name:"Suggerimenti Ricette",enabled:!0,description:"Genera ricette per ingredienti in scadenza"},{id:3,name:"Ordini Settimanali",enabled:!1,description:"Crea ordini automatici ogni luned"},{id:4,name:"Alert Temperature",enabled:!0,description:"Avvisa su temperature critiche"}]),[Os,Hs]=reactExports.useState(()=>{const ks=localStorage.getItem("haccp-show-chat-icon");return ks!==null?JSON.parse(ks):!0});reactExports.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const ks=window.SpeechRecognition||window.webkitSpeechRecognition,$s=new ks;$s.continuous=!1,$s.interimResults=!1,$s.lang="it-IT",$s.onstart=()=>{cs(!0),Qs("assistant"," Ti sto ascoltando... Parla ora!","system")},$s.onresult=qs=>{const Cs=qs.results[0][0].transcript;os(Cs),Qs("assistant",` Ho sentito: "${Cs}"`,"system")},$s.onerror=qs=>{console.error("Speech recognition error:",qs.error),cs(!1),Qs("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},$s.onend=()=>{cs(!1)},gs($s)}},[]),reactExports.useEffect(()=>{rs.length===0&&Qs("assistant",`Ciao ${(_e==null?void 0:_e.name)||"utente"}!  Sono il tuo assistente IA per il sistema HACCP.

** Cosa posso fare:**
 **Gestione inventario** - Aggiungere prodotti, controllare scadenze
 **Controlli temperatura** - Registrare e monitorare temperature
 **Attivit di pulizia** - Gestire mansioni e frequenze
 **Automatizzazioni** - Alert intelligenti e suggerimenti
 ** Riconoscimento vocale** - Parla invece di scrivere!

** Automatizzazioni attive:**
${fs.filter(ks=>ks.enabled).map(ks=>` ${ks.name}`).join(`
`)}

Dimmi cosa ti serve!`)},[]);const Qs=(ks,$s,qs="text",Cs=null)=>{const Us={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:ks,content:$s,type:qs,data:Cs,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};ns(Ps=>[...Ps,Us])},zs=async()=>{if(!is.trim())return;const ks=is.trim();os(""),Qs("user",ks),ps(!0),setTimeout(()=>{const $s=Ls(ks);Qs("assistant",$s.content,$s.type,$s.data),ps(!1)},1e3)},Ls=ks=>{const $s=ks.toLowerCase();if($s.includes("aiuto")||$s.includes("help"))return{content:` **Come posso aiutarti:**

** Inventario:**
 "Aggiungi un nuovo prodotto"
 "Controlla le scadenze"
 "Mostra i prodotti in scadenza"

** Temperature:**
 "Registra una temperatura"
 "Mostra le ultime temperature"
 "Controlla i frigoriferi"

** Pulizia:**
 "Mostra le attivit da svolgere"
 "Aggiungi una nuova attivit"
 "Controlla le mansioni"

** Automatizzazioni:**
 "Attiva alert scadenze"
 "Genera ricette"
 "Configura automatizzazioni"

** Comandi vocali:**
 Parla chiaramente in italiano
 Usa frasi semplici e dirette
 Clicca il microfono per iniziare`,type:"text"};if($s.includes("scadenza")||$s.includes("scaduti")){const qs=e.filter(Cs=>{const Us=Math.ceil((new Date(Cs.expiryDate)-new Date)/864e5);return Us<=7&&Us>0});return qs.length>0?{content:` **Prodotti in scadenza** (${qs.length} prodotti):

${qs.map(Cs=>` ${Cs.name} - Scade il ${Cs.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:qs}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}if($s.includes("attivit")||$s.includes("mansioni")){const qs=es.filter(Cs=>!Cs.completed);return{content:` **Attivit da svolgere** (${qs.length} totali):

${qs.slice(0,5).map(Cs=>` ${Cs.task} - Assegnato a: ${Cs.assignee}`).join(`
`)}
${qs.length>5?`
... e altre ${qs.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza!`,type:"text"}}return $s.includes("temperatura")||$s.includes("frigo")?{content:` **Ultime temperature registrate**:

${St.slice(-3).map(Cs=>` ${Cs.location}: ${Cs.temperature}C (${Cs.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:'Non sono sicuro di aver capito. Prova a dire "aiuto" per vedere tutti i comandi disponibili!',type:"text"}},Bs=()=>{if(!ys){Qs("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}xs?ys.stop():ys.start()},Gs=ks=>{Es($s=>$s.map(qs=>qs.id===ks?{...qs,enabled:!qs.enabled}:qs))},bs=()=>{const ks=!Os;Hs(ks),localStorage.setItem("haccp-show-chat-icon",JSON.stringify(ks))};reactExports.useEffect(()=>{localStorage.setItem("haccp-show-chat-icon",JSON.stringify(Os))},[Os]);const As=ks=>{ks.key==="Enter"&&!ks.shiftKey&&(ks.preventDefault(),zs())};return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IA Assistant"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Il tuo assistente intelligente per la gestione HACCP"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:Bs,disabled:us,className:`${xs?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[xs?jsxRuntimeExports.jsx(MicOff,{className:"h-4 w-4 mr-2"}):jsxRuntimeExports.jsx(Mic,{className:"h-4 w-4 mr-2"}),xs?"Ferma Ascolto":"Parla"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:()=>ds(!vs),children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4 mr-2"}),"Impostazioni"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[jsxRuntimeExports.jsx("div",{className:"lg:col-span-2",children:jsxRuntimeExports.jsxs(Card,{className:"h-96",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{className:"h-5 w-5 text-blue-600"}),"Chat con l'IA",xs&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[jsxRuntimeExports.jsx(Mic,{className:"h-3 w-3 animate-pulse"}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]})}),jsxRuntimeExports.jsxs(CardContent,{className:"flex flex-col h-full",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[rs.map(ks=>jsxRuntimeExports.jsx("div",{className:`flex ${ks.sender==="user"?"justify-end":"justify-start"}`,children:jsxRuntimeExports.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${ks.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[ks.sender==="assistant"&&jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("div",{className:"text-sm whitespace-pre-wrap",children:ks.content}),jsxRuntimeExports.jsx("div",{className:`text-xs mt-1 ${ks.sender==="user"?"text-blue-100":"text-gray-500"}`,children:ks.timestamp})]})]})})},ks.id)),us&&jsxRuntimeExports.jsx("div",{className:"flex justify-start",children:jsxRuntimeExports.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4 text-blue-600"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-1",children:[jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),jsxRuntimeExports.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:is,onChange:ks=>os(ks.target.value),onKeyPress:As,placeholder:"Scrivi un messaggio o parla...",className:"flex-1"}),jsxRuntimeExports.jsx(Button,{onClick:zs,disabled:!is.trim()||us,children:jsxRuntimeExports.jsx(Send,{className:"h-4 w-4"})})]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"h-5 w-5 text-yellow-600"}),"Automatizzazioni"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:fs.map(ks=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:ks.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:ks.description})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:ks.enabled?"default":"outline",onClick:()=>Gs(ks.id),children:ks.enabled?"Attiva":"Disattiva"})]},ks.id))})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5 text-purple-600"}),"Azioni Rapide"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>os("Controlla le scadenze"),children:[jsxRuntimeExports.jsx(Package,{className:"h-4 w-4 mr-2"}),"Controlla Scadenze"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>os("Mostra le attivit da svolgere"),children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4 mr-2"}),"Attivit da Svolgere"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>os("Mostra le ultime temperature"),children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4 mr-2"}),"Ultime Temperature"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>os("Aiuto"),children:[jsxRuntimeExports.jsx(HelpCircle,{className:"h-4 w-4 mr-2"}),"Aiuto"]})]})})]}),vs&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5 text-gray-600"}),"Impostazioni Chat IA"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-sm",children:"Mostra Icona Chat"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Visualizza l'icona della chat IA nell'app"})]}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:Os?"default":"outline",onClick:bs,children:Os?"Attiva":"Disattiva"})]}),jsxRuntimeExports.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-3 rounded-lg",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Suggerimento:"}),` Se disattivi l'icona della chat, potrai sempre accedere all'IA dalla sezione "Assistente IA" nel menu principale.`]})]})})]})]})]})]})}function ExpiryAlertAutomation({products:_e=[],onRecipeSuggestion:e}){const[St,es]=reactExports.useState([]),[ts,ss]=reactExports.useState(!1),[rs,ns]=reactExports.useState([]),[is,os]=reactExports.useState(!1);reactExports.useEffect(()=>{(()=>{const ys=new Date,gs=_e.filter(vs=>{if(!vs.expiryDate)return!1;const ds=new Date(vs.expiryDate),fs=Math.ceil((ds-ys)/(1e3*60*60*24));return fs<=7&&fs>0});es(gs),gs.length>0&&os(!1)})()},[_e]);const us=()=>{const cs=[];St.forEach(ys=>{const gs=xs(ys);gs&&cs.push(gs)}),ns(cs),ss(!0)},ps=()=>{os(!0)},xs=cs=>({"Mozzarella di Bufala":{name:"Insalata Caprese",ingredients:["Mozzarella di Bufala","Pomodoro","Basilico","Olio EVO"],instructions:"Taglia mozzarella e pomodoro a fette, alterna su piatto, guarnisci con basilico e olio.",difficulty:"Facile",time:"10 minuti"},"Parmigiano Reggiano":{name:"Risotto al Parmigiano",ingredients:["Riso Carnaroli","Parmigiano Reggiano","Burro","Brodo"],instructions:"Prepara risotto classico, manteca con parmigiano e burro.",difficulty:"Media",time:"25 minuti"},"Prosciutto Crudo":{name:"Antipasto Prosciutto e Melone",ingredients:["Prosciutto Crudo","Melone","Rucola"],instructions:"Avvolgi fette di prosciutto su cubetti di melone, guarnisci con rucola.",difficulty:"Facile",time:"5 minuti"},Salmone:{name:"Salmone al Forno con Erbe",ingredients:["Salmone","Limone","Erbe aromatiche","Olio EVO"],instructions:"Condisci salmone con erbe, limone e olio, cuoci in forno a 180C per 15 min.",difficulty:"Facile",time:"20 minuti"},"Basilico Fresco":{name:"Pesto alla Genovese",ingredients:["Basilico Fresco","Parmigiano","Pine Nuts","Olio EVO","Aglio"],instructions:"Frulla tutti gli ingredienti fino a ottenere una crema omogenea.",difficulty:"Facile",time:"10 minuti"}})[cs.name]||{name:`Ricetta con ${cs.name}`,ingredients:[cs.name,"Altri ingredienti disponibili"],instructions:"Crea una ricetta utilizzando questo ingrediente prima che scada.",difficulty:"Media",time:"15 minuti"};return St.length===0||is?null:jsxRuntimeExports.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:jsxRuntimeExports.jsxs(Card,{className:"border-orange-200 bg-orange-50",children:[jsxRuntimeExports.jsx(CardHeader,{className:"pb-3",children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2 text-orange-800",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5"}),"Prodotti in Scadenza"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"text-sm text-orange-700",children:[jsxRuntimeExports.jsxs("p",{className:"font-medium mb-2",children:[St.length," prodotto",St.length>1?"i":""," in scadenza:"]}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:St.map(cs=>jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{children:cs.name}),jsxRuntimeExports.jsxs("span",{className:"text-xs",children:["(scade il ",new Date(cs.expiryDate).toLocaleDateString("it-IT"),")"]})]},cs.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:us,className:"bg-orange-600 hover:bg-orange-700 text-white",size:"sm",children:[jsxRuntimeExports.jsx(ChefHat,{className:"h-4 w-4 mr-1"}),"Suggerisci Ricette"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-300",onClick:ps,children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4 mr-1"}),"Rimuovi Alert"]})]}),ts&&rs.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium mb-2",children:"Ricette Suggerite:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:rs.map((cs,ys)=>jsxRuntimeExports.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium text-sm",children:cs.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-600",children:["Tempo: ",cs.time,"  Difficolt: ",cs.difficulty]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-700 mt-1",children:cs.instructions})]},ys))})]})]})]})})}function StorageManager({temperatures:_e,cleaning:e,products:St,refrigerators:es,setTemperatures:ts,setCleaning:ss,setProducts:rs,setRefrigerators:ns}){const[is,os]=reactExports.useState(!1),[us,ps]=reactExports.useState({temperatures:0,cleaning:0,products:0,refrigerators:0,totalSize:0});reactExports.useEffect(()=>{(()=>{const ds=_e||[],fs=e||[],Es=St||[],Os=es||[],Hs=JSON.stringify(ds).length,Qs=JSON.stringify(fs).length,zs=JSON.stringify(Es).length,Ls=JSON.stringify(Os).length;ps({temperatures:ds.length,cleaning:fs.length,products:Es.length,refrigerators:Os.length,totalSize:Hs+Qs+zs+Ls})})()},[_e,e,St,es]);const xs=()=>{if(!is)return;const vs=new Date;vs.setDate(vs.getDate()-30);const ds=_e||[],fs=e||[],Es=ds.filter(bs=>new Date(bs.timestamp)<vs),Os=ds.filter(bs=>new Date(bs.timestamp)>=vs),Hs=fs.filter(bs=>bs.completed&&new Date(bs.createdAt)<vs),Qs=fs.filter(bs=>!bs.completed||new Date(bs.createdAt)>=vs);let zs=[];const Ls={temperatures:Es,cleaning:Hs,expiredLabels:zs,archivedAt:new Date().toISOString()},Bs=JSON.parse(localStorage.getItem("haccp-archives")||"[]");Bs.push(Ls),localStorage.setItem("haccp-archives",JSON.stringify(Bs)),ts(Os),ss(Qs),Es.length+Hs.length+zs.length>0?alert(` Archiviazione completata!

 Elementi archiviati:
 ${Es.length} registrazioni temperature
 ${Hs.length} attivit completate
 ${zs.length} etichette prodotti scaduti

 Controllo scadenze temporaneamente disabilitato`):alert(` Archiviazione completata!

 Elementi archiviati:
 ${Es.length} registrazioni temperature
 ${Hs.length} attivit completate
 Controllo etichette scadute: disabilitato`)};reactExports.useEffect(()=>{if(!is)return;const vs=setInterval(()=>{xs()},24*60*60*1e3);return()=>clearInterval(vs)},[is]);const cs=vs=>Math.min(vs/5242880*100,100),ys=vs=>vs<50?"text-green-600":vs<80?"text-yellow-600":"text-red-600",gs=vs=>{if(vs===0)return"0 Bytes";const ds=1024,fs=["Bytes","KB","MB","GB"],Es=Math.floor(Math.log(vs)/Math.log(ds));return parseFloat((vs/Math.pow(ds,Es)).toFixed(2))+" "+fs[Es]};return jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(HardDrive,{className:"h-5 w-5"}),"Gestione Storage"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4",children:"Utilizzo Storage"}),jsxRuntimeExports.jsxs("div",{className:"relative w-48 h-48 mx-auto",children:[jsxRuntimeExports.jsxs("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 100 100",children:[jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3B82F6",strokeWidth:"8",strokeDasharray:`${us.temperatures/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2} 251.2`,strokeDashoffset:"0"}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10B981",strokeWidth:"8",strokeDasharray:`${us.cleaning/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${us.temperatures/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2}`}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#F59E0B",strokeWidth:"8",strokeDasharray:`${us.products/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(us.temperatures+us.cleaning)/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2}`}),jsxRuntimeExports.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#8B5CF6",strokeWidth:"8",strokeDasharray:`${us.refrigerators/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(us.temperatures+us.cleaning+us.products)/(us.temperatures+us.cleaning+us.products+us.refrigerators)*251.2}`})]}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:`text-2xl font-bold ${ys(cs(us.totalSize))}`,children:gs(us.totalSize)}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Utilizzato"})]})})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4",children:"Dettaglio Dati"}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Temperature"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[us.temperatures," record"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Attivit"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[us.cleaning," record"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Prodotti"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[us.products," record"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:"Frigoriferi"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-600",children:[us.refrigerators," record"]})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(Archive,{className:"h-4 w-4"}),"Archiviazione Automatica"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Rimuove automaticamente i dati vecchi per mantenere l'app veloce"})]}),jsxRuntimeExports.jsx(Button,{variant:is?"default":"outline",onClick:()=>os(!is),className:"flex items-center gap-2",children:is?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4"}),"Abilitata"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),"Disabilitata"]})})]}),is&&jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Cosa fa l'archiviazione automatica:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Rimuove le registrazioni temperature pi vecchie di 30 giorni"}),jsxRuntimeExports.jsx("li",{children:" Archivia le attivit completate pi vecchie di 30 giorni"}),jsxRuntimeExports.jsx("li",{children:" Chiede conferma per rimuovere etichette di prodotti scaduti OGGI"}),jsxRuntimeExports.jsx("li",{children:" Mantiene tutti i prodotti e frigoriferi attivi"}),jsxRuntimeExports.jsx("li",{children:" Crea un backup completo dei dati rimossi"}),jsxRuntimeExports.jsx("li",{children:" Libera spazio solo con conferma utente per le foto"}),jsxRuntimeExports.jsx("li",{children:" Si esegue automaticamente ogni 24 ore"})]}),jsxRuntimeExports.jsx("div",{className:"mt-3",children:jsxRuntimeExports.jsxs(Button,{onClick:xs,className:"flex items-center gap-2",size:"sm",children:[jsxRuntimeExports.jsx(Archive,{className:"h-4 w-4"}),"Archivia Ora"]})})]})]}),jsxRuntimeExports.jsxs("div",{className:"border-t pt-6",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold mb-4",children:"Azioni Manuali"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const vs={temperatures:_e,cleaning:e,products:St,refrigerators:es,exportedAt:new Date().toISOString()},ds=new Blob([JSON.stringify(vs,null,2)],{type:"application/json"}),fs=URL.createObjectURL(ds),Es=document.createElement("a");Es.href=fs,Es.download=`haccp-backup-${new Date().toISOString().split("T")[0]}.json`,Es.click()},children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Esporta Tutti i Dati"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{confirm("Sei sicuro di voler eliminare tutti i dati? Questa azione non pu essere annullata.")&&(ts([]),ss([]),rs([]),ns([]),alert("Tutti i dati sono stati eliminati."))},children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Elimina Tutti i Dati"]})]})]})]})]})})}function PWAInstallPrompt(){const[_e,e]=reactExports.useState(null),[St,es]=reactExports.useState(!1),[ts,ss]=reactExports.useState(!1);reactExports.useEffect(()=>{const is=()=>window.matchMedia("(display-mode: standalone)").matches?(ss(!0),!0):!1,os=localStorage.getItem("pwa-install-rejected");return!is()&&!os&&(window.addEventListener("beforeinstallprompt",us=>{us.preventDefault(),e(us),es(!0)}),window.addEventListener("appinstalled",()=>{ss(!0),es(!1),e(null)})),()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})}},[]);const rs=async()=>{if(!_e)return;_e.prompt();const{outcome:is}=await _e.userChoice;is==="accepted"?(console.log("PWA installata con successo!"),ss(!0)):(console.log("Installazione PWA rifiutata"),localStorage.setItem("pwa-install-rejected","true")),e(null),es(!1)},ns=()=>{es(!1),localStorage.setItem("pwa-install-rejected","true")};return ts||!St?null:jsxRuntimeExports.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50",children:jsxRuntimeExports.jsx("div",{className:"flex items-start justify-between",children:jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-5 w-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-gray-900",children:"Installa l'App"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Installa Mini-ePackPro sul tuo dispositivo per un accesso pi veloce e funzionalit offline."}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:rs,size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Installa"]}),jsxRuntimeExports.jsxs(Button,{onClick:ns,variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Non ora"]})]})]})})})}class CloudSimulator{constructor(e){this.companyId=e,this.storagePrefix=`cloud-sim-${e}`,console.log(" CloudSimulator attivo per:",e)}async saveToCloud(e,St,es){return new Promise((ts,ss)=>{try{setTimeout(()=>{const rs=`${this.storagePrefix}-${e}`,ns={data:St,lastModified:new Date().toISOString(),modifiedBy:es,companyId:this.companyId,version:Date.now()};localStorage.setItem(rs,JSON.stringify(ns)),console.log(` [SIMULATO] Salvato in cloud: ${e}`),ts({success:!0,message:` ${e} condiviso con tutti!`,timestamp:ns.lastModified})},800+Math.random()*400)}catch{ss({success:!1,message:` Errore simulato nel salvare ${e}`})}})}async loadFromCloud(e){return new Promise((St,es)=>{try{setTimeout(()=>{const ts=`${this.storagePrefix}-${e}`,ss=localStorage.getItem(ts);if(ss){const rs=JSON.parse(ss);console.log(` [SIMULATO] Scaricato dal cloud: ${e}`),St({success:!0,data:rs.data,lastModified:rs.lastModified,message:` Ricevuti aggiornamenti di ${e}!`})}else St({success:!0,data:null,message:` Nessun dato di ${e} nel cloud`})},600+Math.random()*300)}catch{es({success:!1,message:` Errore nel scaricare ${e}`})}})}isOnline(){return navigator.onLine}async getCompanyInfo(){return new Promise(e=>{setTimeout(()=>{e({id:this.companyId,name:"Demo Pizzeria Da Mario",plan:"free",users:5,maxUsers:25,storageUsed:"45 MB",storageMax:"1 GB"})},300)})}async getRecentChanges(){return new Promise(e=>{setTimeout(()=>{e({success:!0,changes:[{type:"inventory",user:"Luca (Magazzino)",action:"Aggiunto: Mozzarella di Bufala",time:"5 min fa"},{type:"temperatures",user:"Sara (Cucina)",action:"Temperatura Frigo A: 4.2C",time:"12 min fa"},{type:"cleaning",user:"Marco (Pulizie)",action:"Completata: Sanificazione tavoli",time:"25 min fa"}],hasUpdates:Math.random()>.5})},400)})}getStorageStats(){return{localSpace:"45 MB",cloudSpace:"12 MB",photosCount:23,documentsCount:156,lastSync:localStorage.getItem("haccp-last-sync")||"Mai",syncCount:parseInt(localStorage.getItem("cloud-sim-sync-count")||"0")}}incrementSyncCount(){const e=parseInt(localStorage.getItem("cloud-sim-sync-count")||"0");localStorage.setItem("cloud-sim-sync-count",(e+1).toString())}async cleanupCloudStorage(){return new Promise(e=>{setTimeout(()=>{const St=Math.floor(Math.random()*20)+5;e({success:!0,message:` Liberati ${St} MB dal cloud!`,spaceSaved:`${St} MB`})},1e3)})}}const createCloudSimulator=(_e="demo-company")=>new CloudSimulator(_e),HACCP_GUIDE={version:"2.0",lastUpdated:"2024-12-19",principles:[{id:"data-collection",title:"Raccolta Dati Pertinenti",description:"Raccogliere dati pertinenti (temperature, pulizie, controlli, fornitori, prodotti) in formato tracciabile",critical:!0,implementation:"Ogni funzione deve salvare timestamp, operatore e dati completi"},{id:"data-archiving",title:"Archiviazione 12 Mesi",description:"Archiviare i dati per almeno 12 mesi in formato esportabile (PDF o JSON) leggibile da terzi (ASL, NAS, auditor)",critical:!0,implementation:"Sistema di backup automatico e export manuale"},{id:"data-integrity",title:"Integrit Dati",description:"Garantire integrit dei dati (nessuna modifica senza tracciamento, log azioni con data e ora)",critical:!0,implementation:"Log di tutte le modifiche con timestamp e operatore"},{id:"prerequisites",title:"Prerequisiti Normativi",description:"Facilitare il rispetto dei prerequisiti normativi: igiene personale, controllo infestanti, manutenzione impianti, formazione personale",critical:!0,implementation:"Checklist e promemoria per prerequisiti"},{id:"ccp-management",title:"Gestione CCP",description:"Gestire i CCP (Critical Control Points) con controlli programmati e azioni correttive",critical:!0,implementation:"Sistema di allarmi e azioni correttive automatiche"}],guidelines:{temperature:{id:"temperature-control",title:"Registrazione Temperature",frequency:"Almeno 2 volte al giorno (inizio e met turno)",criticalPoints:[{name:"Frigo A - Conservazione Freschi",range:{min:2,max:4,unit:"C"},description:"Latticini, formaggi freschi, salumi, verdure fresche",preset:"pizzeria-bar",allowedCategories:["latticini","carni","verdure","formaggi"]},{name:"Frigo B - Surgelati",range:{min:-19,max:-16,unit:"C"},description:"Surgelati, pesce congelato, gelati",preset:"pizzeria-bar",allowedCategories:["surgelati","pesce_surgelato","gelati"]},{name:"Banco ingredienti",range:{min:0,max:8,unit:"C"},description:"Pomodoro, mozzarella, verdure fresche",preset:"pizzeria",allowedCategories:["verdure","latticini","condimenti"]},{name:"Freezer",range:{min:-18,max:null,unit:"C"},description:"Tutti i prodotti surgelati",preset:"universal",allowedCategories:["surgelati","pesce_surgelato","gelati","verdure_congelate"]}],correctiveActions:["Isolare prodotto e segnalarlo immediatamente","Riparare/controllare apparecchio","Registrare azione correttiva e prodotto isolato","Verificare temperatura prima di riutilizzare"],whyMatters:"Le temperature fuori range favoriscono la proliferazione batterica e compromettono la sicurezza alimentare"},conservationPoints:{id:"conservation-points-haccp",title:"Punti di Conservazione HACCP",description:"Gestione strutturata dei punti di conservazione secondo standard HACCP",criticalPoints:[{name:"Frigo A - Conservazione Freschi",temperature:{min:2,max:4,unit:"C"},categories:["latticini","carni","verdure","formaggi"],monitoring:"2 volte al giorno",correctiveAction:"Isolare prodotti e verificare temperatura",preset:"pizzeria-bar"},{name:"Frigo B - Surgelati",temperature:{min:-19,max:-16,unit:"C"},categories:["surgelati","pesce_surgelato","gelati"],monitoring:"1 volta al giorno",correctiveAction:"Verificare funzionamento e isolare prodotti",preset:"pizzeria-bar"}],validationRules:["Temperatura deve essere sempre nel range specificato","Categorie prodotti devono corrispondere al punto di conservazione","Monitoraggio frequente e registrazione obbligatoria","Azioni correttive immediate in caso di deviazione"],whyMatters:"La corretta gestione dei punti di conservazione  fondamentale per la sicurezza alimentare e la conformit HACCP"},cleaning:{id:"cleaning-sanitization",title:"Pulizie e Sanificazioni",zones:[{name:"Superfici di lavoro",frequency:"Dopo ogni uso",products:["Detergente neutro","Disinfettante alimentare"]},{name:"Celle e frigoriferi",frequency:"Settimanale",products:["Detergente specifico","Disinfettante alimentare"]},{name:"Pavimenti",frequency:"Quotidiano",products:["Detergente pavimenti","Disinfettante"]},{name:"Attrezzature",frequency:"Secondo manuale tecnico",products:["Detergente specifico per attrezzature"]}],recording:"Indicare operatore, orario, detergente/disinfettante usato",whyMatters:"La pulizia regolare previene contaminazioni e mantiene standard igienici"},staff:{id:"staff-management",title:"Gestione Personale",roles:[{name:"Amministratore",level:1,responsibilities:["Gestione completa sistema","Responsabilit legale","Approvazione procedure"]},{name:"Responsabile",level:2,responsibilities:["Supervisione operativa","Controllo procedure","Formazione staff"]},{name:"Dipendente",level:3,responsibilities:["Esecuzione procedure","Registrazione dati","Segnalazione problemi"]},{name:"Collaboratore occasionale",level:4,responsibilities:["Esecuzione procedure base","Seguire istruzioni responsabile"]}],requirements:["Mansioni assegnate e documentate","Formazione HACCP registrata e aggiornata","Conoscenza procedure operative","Responsabilit chiare per ogni ruolo"],whyMatters:"Personale formato e responsabilizzato garantisce applicazione corretta delle procedure HACCP"},products:{id:"product-management",title:"Gestione Prodotti",scheda:["Nome commerciale e nome scientifico","Categoria (carne, latticini, verdure, ecc.)","Data di ricezione e scadenza","Fornitore e documentazione","Etichetta interna se necessario (es. preparazioni interne con TMC)","Condizioni di conservazione","Allergeni presenti"],whyMatters:"Tracciabilit completa garantisce sicurezza e conformit normativa"},suppliers:{id:"supplier-management",title:"Gestione Fornitori",registration:["Nome e categoria merceologica","Contatti e documentazione","DDT/fatture con data di consegna","Valutazione periodica affidabilit","Controllo documenti di trasporto","Verifica certificazioni HACCP"],whyMatters:"Fornitori qualificati garantiscono materie prime sicure e conformi"},nonConformity:{id:"non-conformity",title:"Gestione Non Conformit",recording:["Data e ora del rilevamento","Descrizione dettagliata del problema","Azione correttiva intrapresa","Responsabile dell'azione","Verifica efficacia azione correttiva","Prevenzione ricorrenza"],examples:["Temperatura fuori range per pi di 2 ore","Presenza infestanti in magazzino","Prodotto scaduto in vendita","Dispositivo di controllo non funzionante","Personale non formato per mansione"],whyMatters:"Gestione corretta delle non conformit previene rischi e migliora il sistema"}},requirements:{refrigerators:{mandatory:["nome","tipo","range-temperatura","posizione"],validation:"Minimo 1 registrato per sbloccare registrazione temperature",blocking:["temperatures"],whyMatters:"I frigoriferi sono punti di controllo critici per la catena del freddo"},temperature:{mandatory:["punto-controllo","valore","ora","operatore"],validation:"Se valore fuori range  mostra alert e richiede azione correttiva",blocking:[],whyMatters:"Le temperature fuori range compromettono la sicurezza alimentare"},staff:{mandatory:["nome","ruolo","mansioni","formazione-haccp"],validation:"Minimo 1 per sbloccare pulizie e controlli",blocking:["cleaning","inventory"],whyMatters:"Il personale formato  responsabile dell'applicazione delle procedure"},cleaning:{mandatory:["area","frequenza","prodotto-usato","operatore","data-ora"],validation:"Blocco se area non associata a un reparto",blocking:[],whyMatters:"Le pulizie regolari prevengono contaminazioni"},products:{mandatory:["nome","categoria","data-ricezione","scadenza","fornitore"],validation:"Alert se scadenza imminente (<3 giorni)",blocking:[],whyMatters:"La tracciabilit garantisce sicurezza e conformit"},suppliers:{mandatory:["nome","categoria","contatto","documentazione"],validation:"Minimo 1 per associare prodotti",blocking:["products"],whyMatters:"I fornitori qualificati garantiscono materie prime sicure"},nonConformity:{mandatory:["data","descrizione","azione-correttiva","responsabile"],validation:"Blocco salvataggio se mancano dettagli essenziali",blocking:[],whyMatters:"La gestione delle non conformit previene rischi futuri"}},educationalMessages:{welcome:"Benvenuto nel sistema HACCP! Questo sistema ti guider nella gestione della sicurezza alimentare.",whyHaccp:"L'HACCP  un sistema preventivo richiesto per legge che garantisce la sicurezza alimentare.",dataImportance:"Ogni dato registrato contribuisce alla sicurezza e alla conformit normativa.",responsibility:"La sicurezza alimentare  responsabilit di tutti i membri dello staff."},getRequirement:_e=>HACCP_GUIDE.requirements[_e]||null,getGuideline:_e=>HACCP_GUIDE.guidelines[_e]||null,getPrinciple:_e=>HACCP_GUIDE.principles.find(e=>e.id===_e)||null,validateRequirement:(_e,e)=>{const St=HACCP_GUIDE.getRequirement(_e);if(!St)return{valid:!1,error:"Sezione non trovata"};const es=St.mandatory.filter(ts=>!e[ts]);return{valid:es.length===0,missing:es,message:es.length>0?`Campi mancanti: ${es.join(", ")}`:"Tutti i campi obbligatori sono compilati"}},getBlockingSections:_e=>{const e=HACCP_GUIDE.getRequirement(_e);return e?e.blocking:[]},isSectionBlocked:(_e,e)=>{if(!HACCP_GUIDE.getRequirement(_e))return!1;switch(_e){case"temperatures":return!e.refrigerators||e.refrigerators.length===0;case"cleaning":return!e.refrigerators||e.refrigerators.length===0||!e.staff||e.staff.length===0;case"inventory":return!e.departments||e.departments.length===0||!e.refrigerators||e.refrigerators.length===0;case"products":return!e.suppliers||e.suppliers.length===0;default:return!1}}};function HaccpManual(){reactExports.useState(new Set(["principles"]));const[_e,e]=reactExports.useState("principles"),[St,es]=reactExports.useState(""),ts=HACCP_GUIDE.principles.filter(ps=>ps.title.toLowerCase().includes(St.toLowerCase())||ps.description.toLowerCase().includes(St.toLowerCase())),ss=Object.entries(HACCP_GUIDE.guidelines).filter(([ps,xs])=>xs.title.toLowerCase().includes(St.toLowerCase())||xs.whyMatters&&xs.whyMatters.toLowerCase().includes(St.toLowerCase())),rs=ps=>jsxRuntimeExports.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Shield,{className:"h-5 w-5"}),ps.title]}),jsxRuntimeExports.jsx("p",{className:"text-blue-800 mb-2",children:ps.description}),jsxRuntimeExports.jsxs("div",{className:"bg-blue-100 p-3 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Implementazione:"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800",children:ps.implementation})]})]}),jsxRuntimeExports.jsx(CheckCircle,{className:"h-6 w-6 text-blue-600 flex-shrink-0 ml-2"})]})},ps.id),ns=(ps,xs)=>jsxRuntimeExports.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[os(ps),xs.title]}),xs.frequency&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Frequenza:"}),jsxRuntimeExports.jsx("p",{className:"text-green-700",children:xs.frequency})]}),xs.criticalPoints&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Punti di Controllo:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:xs.criticalPoints.map((cs,ys)=>jsxRuntimeExports.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-green-900",children:cs.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-800",children:["Range: ",cs.range.min,"C - ",cs.range.max||"","C"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-700",children:cs.description})]},ys))})]}),xs.zones&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Zone e Frequenza:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:xs.zones.map((cs,ys)=>jsxRuntimeExports.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-green-900",children:cs.name}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-800",children:["Frequenza: ",cs.frequency]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-green-700",children:["Prodotti: ",cs.products.join(", ")]})]},ys))})]}),xs.roles&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Ruoli e Responsabilit:"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:xs.roles.map((cs,ys)=>jsxRuntimeExports.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-green-900",children:cs.name}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-green-800",children:[jsxRuntimeExports.jsx("p",{children:"Responsabilit:"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside ml-2",children:cs.responsibilities.map((gs,vs)=>jsxRuntimeExports.jsx("li",{children:gs},vs))})]})]},ys))})]}),xs.correctiveActions&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-800",children:"Azioni Correttive:"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside space-y-1",children:xs.correctiveActions.map((cs,ys)=>jsxRuntimeExports.jsx("li",{className:"text-green-700",children:cs},ys))})]}),xs.whyMatters&&jsxRuntimeExports.jsxs("div",{className:"bg-green-100 p-3 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Perch  importante:"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-green-800",children:xs.whyMatters})]})]},xs.id),is=(ps,xs)=>jsxRuntimeExports.jsxs("div",{className:"mb-4 p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-orange-900 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"h-5 w-5"}),us(ps)]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Dati obbligatori:"}),jsxRuntimeExports.jsx("ul",{className:"list-disc list-inside space-y-1",children:xs.mandatory.map((cs,ys)=>jsxRuntimeExports.jsx("li",{className:"text-orange-700",children:cs},ys))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Validazione:"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700",children:xs.validation})]}),xs.blocking&&xs.blocking.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Blocca sezioni:"}),jsxRuntimeExports.jsx("p",{className:"text-orange-700",children:xs.blocking.join(", ")})]}),jsxRuntimeExports.jsxs("div",{className:"bg-orange-100 p-3 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-orange-900 mb-1",children:"Perch  importante:"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-orange-800",children:xs.whyMatters})]})]},ps),os=ps=>({temperature:jsxRuntimeExports.jsx(Thermometer,{className:"h-5 w-5"}),cleaning:jsxRuntimeExports.jsx(Sparkles,{className:"h-5 w-5"}),staff:jsxRuntimeExports.jsx(Users,{className:"h-5 w-5"}),products:jsxRuntimeExports.jsx(Package,{className:"h-5 w-5"}),suppliers:jsxRuntimeExports.jsx(Truck,{className:"h-5 w-5"}),nonConformity:jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5"})})[ps]||jsxRuntimeExports.jsx(Info,{className:"h-5 w-5"}),us=ps=>({refrigerators:"Gestione Frigoriferi",temperature:"Registrazione Temperature",staff:"Gestione Personale",cleaning:"Gestione Pulizie",products:"Gestione Prodotti",suppliers:"Gestione Fornitori",nonConformity:"Gestione Non Conformit"})[ps]||ps;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-3 text-2xl",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-8 w-8 text-blue-600"}),"Manuale HACCP - Guida Completa"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Riferimento completo per normative HACCP e procedure operative"})]})}),jsxRuntimeExports.jsxs(Tabs,{value:_e,onValueChange:e,className:"w-full",children:[jsxRuntimeExports.jsxs(TabsList,{className:"grid w-full grid-cols-3",children:[jsxRuntimeExports.jsx(TabsTrigger,{value:"principles",children:"Principi Base"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"guidelines",children:"Linee Guida"}),jsxRuntimeExports.jsx(TabsTrigger,{value:"requirements",children:"Requisiti"})]}),jsxRuntimeExports.jsx(TabsContent,{value:"principles",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Shield,{className:"h-6 w-6 text-blue-600"}),"Principi Fondamentali HACCP"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Questi principi garantiscono la conformit alle normative di sicurezza alimentare"}),jsxRuntimeExports.jsxs("div",{className:"mt-4 relative",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Cerca nei principi...",value:St,onChange:ps=>es(ps.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),St&&jsxRuntimeExports.jsx("button",{onClick:()=>es(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:jsxRuntimeExports.jsx(X,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsx(CardContent,{children:ts.map(rs)})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"guidelines",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-6 w-6 text-green-600"}),"Linee Guida Operative"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Procedure dettagliate per ogni area operativa"})]}),jsxRuntimeExports.jsx(CardContent,{children:ss.map(([ps,xs])=>ns(ps,xs))})]})}),jsxRuntimeExports.jsx(TabsContent,{value:"requirements",className:"space-y-4",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-6 w-6 text-orange-600"}),"Requisiti Minimi e Validazioni"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Dati obbligatori e controlli automatici per ogni sezione"})]}),jsxRuntimeExports.jsx(CardContent,{children:Object.entries(HACCP_GUIDE.requirements).map(([ps,xs])=>is(ps,xs))})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"h-6 w-6 text-purple-600"}),"Informazioni Importanti"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Object.entries(HACCP_GUIDE.educationalMessages).map(([ps,xs])=>jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500",children:jsxRuntimeExports.jsx("p",{className:"text-purple-800",children:xs})},ps))})})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-sm text-gray-500",children:[jsxRuntimeExports.jsxs("p",{children:["Versione ",HACCP_GUIDE.version,"  Ultimo aggiornamento: ",HACCP_GUIDE.lastUpdated]}),jsxRuntimeExports.jsx("p",{className:"mt-1",children:"Questo manuale  conforme alle normative HACCP vigenti"})]})})})]})}const SUPPLIER_CATEGORIES=[{key:"latticini",name:"Latticini",icon:"",description:"Latte, formaggi, yogurt"},{key:"salumi",name:"Salumi",icon:"",description:"Prosciutto, salame, mortadella"},{key:"verdure",name:"Verdure",icon:"",description:"Verdure fresche e ortaggi"},{key:"farine",name:"Farine",icon:"",description:"Farine, cereali, impasti"},{key:"surgelati",name:"Surgelati",icon:"",description:"Prodotti surgelati"},{key:"altro",name:"Altro",icon:"",description:"Altri prodotti alimentari"}];function Suppliers({currentUser:_e}){const[e,St]=reactExports.useState([]),[es,ts]=reactExports.useState(!1),[ss,rs]=reactExports.useState(null),[ns,is]=reactExports.useState({name:"",category:"",vat:"",phone:"",email:"",notes:""});reactExports.useEffect(()=>{const ds=localStorage.getItem("haccp-suppliers");if(ds)try{St(JSON.parse(ds))}catch(fs){console.error("Errore nel caricamento fornitori:",fs),St([])}},[]),reactExports.useEffect(()=>{localStorage.setItem("haccp-suppliers",JSON.stringify(e))},[e]);const os=()=>{is({name:"",category:"",vat:"",phone:"",email:"",notes:""}),rs(null),ts(!1)},us=ds=>{if(ds.preventDefault(),!ns.name.trim()||!ns.category){alert(" Attenzione: Nome fornitore e categoria sono obbligatori per la tracciabilit HACCP");return}const fs={id:(ss==null?void 0:ss.id)||Date.now().toString(),...ns,name:ns.name.trim(),category:ns.category,createdAt:(ss==null?void 0:ss.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(ss==null?void 0:ss.createdBy)||(_e==null?void 0:_e.id)||"unknown",updatedBy:(_e==null?void 0:_e.id)||"unknown"};ss?(St(Es=>Es.map(Os=>Os.id===ss.id?fs:Os)),alert(" Fornitore aggiornato con successo!")):(St(Es=>[...Es,fs]),alert(" Nuovo fornitore aggiunto con successo!")),os()},ps=ds=>{confirm(` ATTENZIONE: Stai per eliminare questo fornitore.

Questa azione non pu essere annullata e rimuover tutte le informazioni di tracciabilit associate.

Procedere?`)&&(St(fs=>fs.filter(Es=>Es.id!==ds)),alert(" Fornitore eliminato con successo"))},xs=ds=>{rs(ds),is({name:ds.name,category:ds.category,vat:ds.vat||"",phone:ds.phone||"",email:ds.email||"",notes:ds.notes||""}),ts(!0)},cs=ds=>SUPPLIER_CATEGORIES.find(fs=>fs.key===ds)||{name:"Sconosciuta",icon:"",description:"Categoria non definita"},[ys,gs]=reactExports.useState("all"),vs=ys==="all"?e:e.filter(ds=>ds.category===ys);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestione Fornitori"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Gestisci i fornitori per garantire la tracciabilit HACCP e la sicurezza alimentare"})]}),jsxRuntimeExports.jsxs(Button,{onClick:()=>ts(!0),className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4"}),"Nuovo Fornitore"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:e.length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Fornitori Totali"})]})}),SUPPLIER_CATEGORIES.map(ds=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:e.filter(fs=>fs.category===ds.key).length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:ds.name})]})},ds.key))]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Building2,{className:"h-5 w-5"}),"Filtra per Categoria"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>gs("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ys==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tutti (",e.length,")"]}),SUPPLIER_CATEGORIES.map(ds=>jsxRuntimeExports.jsxs("button",{onClick:()=>gs(ds.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${ys===ds.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[ds.icon," ",ds.name," (",e.filter(fs=>fs.category===ds.key).length,")"]},ds.key))]})})]}),es&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsxs(CardHeader,{children:[jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Truck,{className:"h-5 w-5"}),ss?"Modifica Fornitore":"Nuovo Fornitore"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:" Compila i campi obbligatori per garantire la tracciabilit HACCP"})]}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("form",{onSubmit:us,className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"name",className:"flex items-center gap-2",children:["Nome Fornitore *",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Nome completo del fornitore per la tracciabilit",children:""})]}),jsxRuntimeExports.jsx(Input,{id:"name",value:ns.name,onChange:ds=>is({...ns,name:ds.target.value}),placeholder:"Es: Fornitura Rossi SRL",required:!0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:" Inserisci il nome completo per la tracciabilit HACCP"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs(Label,{htmlFor:"category",className:"flex items-center gap-2",children:["Categoria *",jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",title:"Tipo di prodotti forniti",children:""})]}),jsxRuntimeExports.jsxs("select",{id:"category",value:ns.category,onChange:ds=>is({...ns,category:ds.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona Categoria --"}),SUPPLIER_CATEGORIES.map(ds=>jsxRuntimeExports.jsxs("option",{value:ds.key,children:[ds.icon," ",ds.name," - ",ds.description]},ds.key))]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:" Categorizza per tipo di prodotto fornito"})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"vat",children:"Partita IVA"}),jsxRuntimeExports.jsx(Input,{id:"vat",value:ns.vat,onChange:ds=>is({...ns,vat:ds.target.value}),placeholder:"IT12345678901"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"phone",children:"Telefono"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:ns.phone,onChange:ds=>is({...ns,phone:ds.target.value}),placeholder:"+39 123 456 7890"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"email",children:"Email"}),jsxRuntimeExports.jsx(Input,{id:"email",type:"email",value:ns.email,onChange:ds=>is({...ns,email:ds.target.value}),placeholder:"fornitore@example.com"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"notes",children:"Note"}),jsxRuntimeExports.jsx("textarea",{id:"notes",value:ns.notes,onChange:ds=>is({...ns,notes:ds.target.value}),placeholder:"Note aggiuntive, orari di consegna, requisiti speciali...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs(Button,{type:"submit",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Save,{className:"h-4 w-4"}),ss?"Aggiorna":"Salva"," Fornitore"]}),jsxRuntimeExports.jsxs(Button,{type:"button",variant:"outline",onClick:os,className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"}),"Annulla"]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Truck,{className:"h-5 w-5"}),"Fornitori (",vs.length,")"]})}),jsxRuntimeExports.jsx(CardContent,{children:vs.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Truck,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:"Nessun fornitore trovato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:ys==="all"?"Inizia aggiungendo il primo fornitore per la tracciabilit HACCP":`Nessun fornitore nella categoria "${cs(ys).name}"`})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:vs.map(ds=>{const fs=cs(ds.category);return jsxRuntimeExports.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-start",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-lg",children:ds.name}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:[fs.icon," ",fs.name]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[ds.vat&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Partita IVA:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:ds.vat})]}),ds.phone&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Telefono:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Phone,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.phone})]})]}),ds.email&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Email:"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Mail,{className:"h-3 w-3"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.email})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Aggiornato:"}),jsxRuntimeExports.jsx("div",{className:"font-medium",children:new Date(ds.updatedAt).toLocaleDateString("it-IT")})]})]}),ds.notes&&jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-sm",children:"Note:"}),jsxRuntimeExports.jsx("p",{className:"text-gray-800 mt-1",children:ds.notes})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>xs(ds),className:"text-blue-600 hover:text-blue-700",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:()=>ps(ds.id),className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]})},ds.id)})})})]})]})}const BACKUP_KEYS=["haccp-temperatures","haccp-refrigerators","haccp-staff","haccp-cleaning","haccp-products","haccp-departments","haccp-users","haccp-actions","haccp-roles","haccp-suppliers","haccp-onboarding","haccp-presets","haccp-dev-mode"];function BackupPanel({currentUser:_e,isAdmin:e=!1}){const[St,es]=reactExports.useState({autoBackupEnabled:!1,autoBackupFrequency:"weekly",lastBackupDate:null,nextBackupDate:null}),[ts,ss]=reactExports.useState([]),[rs,ns]=reactExports.useState(!1),[is,os]=reactExports.useState(!1);reactExports.useEffect(()=>{const cs=localStorage.getItem("haccp-backup-settings");if(cs)try{const gs=JSON.parse(cs);es(vs=>({...vs,...gs}))}catch(gs){console.error("Errore nel caricamento impostazioni backup:",gs)}const ys=localStorage.getItem("haccp-backup-history");if(ys)try{ss(JSON.parse(ys))}catch(gs){console.error("Errore nel caricamento cronologia backup:",gs)}},[]),reactExports.useEffect(()=>{localStorage.setItem("haccp-backup-settings",JSON.stringify(St))},[St]),reactExports.useEffect(()=>{if(St.autoBackupEnabled&&St.lastBackupDate){const cs=new Date(St.lastBackupDate),ys=new Date(cs);St.autoBackupFrequency==="weekly"?ys.setDate(ys.getDate()+7):St.autoBackupFrequency==="monthly"&&ys.setMonth(ys.getMonth()+1),es(gs=>({...gs,nextBackupDate:ys.toISOString()}))}},[St.autoBackupEnabled,St.lastBackupDate,St.autoBackupFrequency]);const us=async()=>{ns(!0);try{const cs={version:"1.0",timestamp:new Date().toISOString(),exportedBy:(_e==null?void 0:_e.name)||"unknown",data:{}};for(const fs of BACKUP_KEYS){const Es=localStorage.getItem(fs);if(Es)try{cs.data[fs]=JSON.parse(Es)}catch(Os){console.warn(`Errore nel parsing ${fs}:`,Os),cs.data[fs]=Es}}const ys=new Blob([JSON.stringify(cs,null,2)],{type:"application/json"}),gs=URL.createObjectURL(ys),vs=document.createElement("a");vs.href=gs,vs.download=`haccp-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(vs),vs.click(),document.body.removeChild(vs),URL.revokeObjectURL(gs);const ds={id:Date.now().toString(),type:"manual",timestamp:new Date().toISOString(),user:(_e==null?void 0:_e.name)||"unknown",size:ys.size,success:!0};ss(fs=>[ds,...fs.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([ds,...ts.slice(0,9)])),alert(` Export completato con successo!

 File scaricato nella cartella Download
 Tutti i dati HACCP sono stati esportati`)}catch(cs){console.error("Errore durante export:",cs),alert(` Errore durante l'export dei dati

Controlla la console per maggiori dettagli`)}finally{ns(!1)}},ps=async cs=>{const ys=cs.target.files[0];if(ys){os(!0);try{const gs=await ys.text(),vs=JSON.parse(gs);if(!vs.version||!vs.data||!vs.timestamp)throw new Error("Formato file non valido. Il file deve contenere version, data e timestamp.");const ds=Object.keys(vs.data);if(!confirm(` ATTENZIONE: Stai per importare dati HACCP!

 Dati trovati: ${ds.length} chiavi
 Data export: ${new Date(vs.timestamp).toLocaleString("it-IT")}
 Esportato da: ${vs.exportedBy||"sconosciuto"}

 Questa operazione sovrascriver i dati esistenti!

Procedere con l'import?`)){os(!1);return}const Es={};for(const zs of BACKUP_KEYS){const Ls=localStorage.getItem(zs);Ls&&(Es[zs]=Ls)}const Os={version:"1.0",timestamp:new Date().toISOString(),type:"pre-import-backup",data:Es};localStorage.setItem("haccp-pre-import-backup",JSON.stringify(Os));let Hs=0;for(const[zs,Ls]of Object.entries(vs.data))if(BACKUP_KEYS.includes(zs))try{typeof Ls=="string"?localStorage.setItem(zs,Ls):localStorage.setItem(zs,JSON.stringify(Ls)),Hs++}catch(Bs){console.warn(`Errore nell'import di ${zs}:`,Bs)}const Qs={id:Date.now().toString(),type:"import",timestamp:new Date().toISOString(),user:(_e==null?void 0:_e.name)||"unknown",importedKeys:Hs,success:!0,sourceFile:ys.name};ss(zs=>[Qs,...zs.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([Qs,...ts.slice(0,9)])),alert(` Import completato con successo!

 Chiavi importate: ${Hs}/${Object.keys(vs.data).length}
 Backup pre-import salvato come 'haccp-pre-import-backup'

 Ricarica la pagina per applicare le modifiche`),setTimeout(()=>{window.location.reload()},2e3)}catch(gs){console.error("Errore durante import:",gs),alert(` Errore durante l'import:

${gs.message}

Controlla che il file sia un backup HACCP valido.`)}finally{os(!1),cs.target.value=""}}},xs=async()=>{try{await us(),es(ys=>({...ys,lastBackupDate:new Date().toISOString()}));const cs={id:Date.now().toString(),type:"auto",timestamp:new Date().toISOString(),user:"Sistema",success:!0};ss(ys=>[cs,...ys.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([cs,...ts.slice(0,9)]))}catch(cs){console.error("Errore backup automatico:",cs)}};return reactExports.useEffect(()=>{if(St.autoBackupEnabled&&St.nextBackupDate){const cs=new Date,ys=new Date(St.nextBackupDate);cs>=ys&&xs()}},[St.autoBackupEnabled,St.nextBackupDate]),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Backup e Export Dati"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Gestisci il backup e l'export dei dati HACCP per garantire la sicurezza e la tracciabilit"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ts.filter(cs=>cs.success).length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Backup Completati"})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:ts.filter(cs=>cs.type==="auto").length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Backup Automatici"})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardContent,{className:"p-4 text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-purple-600",children:ts.filter(cs=>cs.type==="import").length}),jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600",children:"Import Completati"})]})})]}),e&&jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5"}),"Backup Automatico"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Abilita Backup Automatico"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Crea automaticamente backup periodici per garantire la sicurezza dei dati"})]}),jsxRuntimeExports.jsx(Button,{variant:St.autoBackupEnabled?"default":"outline",onClick:()=>es(cs=>({...cs,autoBackupEnabled:!cs.autoBackupEnabled})),className:"flex items-center gap-2",children:St.autoBackupEnabled?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4"}),"Abilitato"]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4"}),"Disabilitato"]})})]}),St.autoBackupEnabled&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium",children:"Frequenza Backup"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Quanto spesso creare backup automatici"})]}),jsxRuntimeExports.jsxs("select",{value:St.autoBackupFrequency,onChange:cs=>es(ys=>({...ys,autoBackupFrequency:cs.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"weekly",children:"Settimanale"}),jsxRuntimeExports.jsx("option",{value:"monthly",children:"Mensile"})]})]}),St.lastBackupDate&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[jsxRuntimeExports.jsx(Info,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Ultimo backup:"}),jsxRuntimeExports.jsx("span",{children:new Date(St.lastBackupDate).toLocaleString("it-IT")})]}),St.nextBackupDate&&jsxRuntimeExports.jsxs("div",{className:"text-blue-700 text-sm mt-1",children:["Prossimo backup: ",new Date(St.nextBackupDate).toLocaleString("it-IT")]})]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-5 w-5"}),"Export Dati"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Esporta tutti i dati HACCP in formato JSON per backup, migrazione o condivisione. Include temperature, pulizie, inventario, staff e tutte le configurazioni."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{onClick:us,disabled:rs,className:"flex items-center gap-2",children:[rs?jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),rs?"Esportando...":"Export Completo JSON"]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:[BACKUP_KEYS.length," chiavi dati incluse"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Dati inclusi nell'export:"})]}),jsxRuntimeExports.jsx("div",{className:"text-green-700 text-sm mt-2 grid grid-cols-2 gap-2",children:BACKUP_KEYS.map(cs=>jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Database,{className:"h-3 w-3"}),cs.replace("haccp-","")]},cs))})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"h-5 w-5"}),"Import Dati"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Importa dati HACCP da un file di backup JSON.  Questa operazione sovrascriver i dati esistenti!"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("input",{type:"file",accept:".json",onChange:ps,className:"hidden",id:"import-file"}),jsxRuntimeExports.jsx("label",{htmlFor:"import-file",children:jsxRuntimeExports.jsxs(Button,{as:"span",disabled:is,className:"flex items-center gap-2 cursor-pointer",children:[is?jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4 animate-spin"}):jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),is?"Importando...":"Seleziona File JSON"]})}),is&&jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-500",children:"Import in corso..."})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Attenzione Import:"})]}),jsxRuntimeExports.jsxs("ul",{className:"text-yellow-700 text-sm mt-2 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" I dati esistenti verranno sovrascritti"}),jsxRuntimeExports.jsx("li",{children:" Verr creato un backup automatico pre-import"}),jsxRuntimeExports.jsx("li",{children:" Solo file JSON HACCP validi sono accettati"}),jsxRuntimeExports.jsx("li",{children:" La pagina verr ricaricata dopo l'import"})]})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"h-5 w-5"}),"Cronologia Backup"]})}),jsxRuntimeExports.jsx(CardContent,{children:ts.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-6 text-gray-500",children:[jsxRuntimeExports.jsx(Clock,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),jsxRuntimeExports.jsx("p",{children:"Nessun backup registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:"I backup appariranno qui dopo aver eseguito export o import"})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ts.map(cs=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`p-2 rounded-full ${cs.type==="auto"?"bg-blue-100 text-blue-600":cs.type==="import"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:cs.type==="auto"?jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4"}):cs.type==="import"?jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("div",{className:"font-medium",children:cs.type==="auto"?"Backup Automatico":cs.type==="import"?"Import Dati":"Export Manuale"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(cs.timestamp).toLocaleString("it-IT"),"  ",cs.user]}),cs.sourceFile&&jsxRuntimeExports.jsxs("div",{className:"text-xs text-gray-500",children:["File: ",cs.sourceFile]})]})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-2",children:cs.success?jsxRuntimeExports.jsx(CheckCircle,{className:"h-5 w-5 text-green-600"}):jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-red-600"})})]},cs.id))})})]})]})}function DataSettings({currentUser:_e,isAdmin:e=!1,onSettingsChange:St}){const[es,ts]=reactExports.useState(!1),[ss,rs]=reactExports.useState({keepPhotosLocal:!1,keepDocsLocal:!0,keepDataLocal:!0,autoShareTemperatures:!0,autoShareInventory:!0,autoShareCleaning:!0,autoShareStaff:e,keepDaysLocal:7,maxPhotosLocal:e?100:20}),[ns,is]=reactExports.useState({usedSpace:"45 MB",availableSpace:"2.1 GB",photosCount:23,docsCount:156}),[os]=reactExports.useState(()=>createCloudSimulator("demo-pizzeria"));reactExports.useEffect(()=>{const cs=localStorage.getItem("haccp-data-settings");cs&&rs({...ss,...JSON.parse(cs)});const ys=os.getStorageStats();is({usedSpace:ys.localSpace,availableSpace:"2.1 GB",photosCount:ys.photosCount,docsCount:ys.documentsCount})},[os]);const us=(cs,ys)=>{const gs={...ss,[cs]:ys};rs(gs),localStorage.setItem("haccp-data-settings",JSON.stringify(gs)),St==null||St(gs)},ps=({title:cs,description:ys,value:gs,onChange:vs,icon:ds,adminOnly:fs=!1})=>fs&&!e?null:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(ds,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:cs}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600 mt-1",children:ys}),fs&&jsxRuntimeExports.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:[jsxRuntimeExports.jsx(Settings,{className:"h-3 w-3"}),"Solo Amministratore"]})]})]}),jsxRuntimeExports.jsx(Button,{variant:"ghost",onClick:()=>vs(!gs),className:"p-1",children:gs?jsxRuntimeExports.jsx(ToggleRight,{className:"h-6 w-6 text-green-600"}):jsxRuntimeExports.jsx(ToggleLeft,{className:"h-6 w-6 text-gray-400"})})]}),xs=({title:cs,description:ys,current:gs,options:vs,onChange:ds,icon:fs})=>jsxRuntimeExports.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[jsxRuntimeExports.jsx(fs,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:cs}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:ys})]})]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:vs.map(Es=>jsxRuntimeExports.jsx(Button,{variant:gs===Es.value?"default":"outline",onClick:()=>ds(Es.value),className:"text-sm py-2",children:Es.label},Es.value))})]});return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Gestione Dati"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Decidi cosa tenere sul tuo telefono e cosa condividere"})]}),jsxRuntimeExports.jsxs(Card,{className:"bg-gradient-to-r from-green-50 to-blue-50",children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Smartphone,{className:"h-5 w-5"}),"Spazio sul Tuo Telefono"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-blue-600",children:ns.usedSpace}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Usato dall'app"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-green-600",children:ns.availableSpace}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Spazio libero"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-orange-600",children:ns.photosCount}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Foto salvate"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ns.docsCount}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600",children:"Documenti"})]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Image$1,{className:"h-5 w-5"}),"Foto e Documenti"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx(ps,{icon:Camera,title:"Salva Foto sul Telefono",description:"Le foto delle etichette rimangono sul tuo telefono anche senza internet. Occupa pi spazio ma  pi veloce.",value:ss.keepPhotosLocal,onChange:cs=>us("keepPhotosLocal",cs)}),jsxRuntimeExports.jsx(ps,{icon:FileText,title:"Salva Documenti sul Telefono",description:"Tieni una copia di ricette, procedure e documenti sul telefono per consultarli anche offline.",value:ss.keepDocsLocal,onChange:cs=>us("keepDocsLocal",cs)}),jsxRuntimeExports.jsx(xs,{icon:HardDrive,title:"Quante Foto Tenere",description:"Numero massimo di foto da tenere salvate sul telefono",current:ss.maxPhotosLocal,onChange:cs=>us("maxPhotosLocal",cs),options:[{value:10,label:"10 foto"},{value:50,label:"50 foto"},{value:100,label:"100 foto"}]})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Wifi,{className:"h-5 w-5"}),"Condivisione Automatica"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-800",children:[" ",jsxRuntimeExports.jsx("strong",{children:"Cosa significa:"})," Se attivi queste opzioni, le modifiche che fai verranno condivise automaticamente con i colleghi appena hai internet."]})}),jsxRuntimeExports.jsx(ps,{icon:Thermometer,title:"Condividi Temperature Automaticamente",description:"Le temperature dei frigoriferi vengono condivise subito con tutti. Importante per la sicurezza alimentare.",value:ss.autoShareTemperatures,onChange:cs=>us("autoShareTemperatures",cs)}),jsxRuntimeExports.jsx(ps,{icon:Package,title:"Condividi Inventario Automaticamente",description:"Quando aggiungi o modifichi prodotti, tutti vedono subito le modifiche.",value:ss.autoShareInventory,onChange:cs=>us("autoShareInventory",cs)}),jsxRuntimeExports.jsx(ps,{icon:CheckCircle,title:"Condividi Pulizie Automaticamente",description:"Le attivit di pulizia completate vengono condivise subito con il team.",value:ss.autoShareCleaning,onChange:cs=>us("autoShareCleaning",cs)}),jsxRuntimeExports.jsx(ps,{icon:Users,title:"Condividi Gestione Staff",description:"Modifiche a dipendenti, ruoli e permessi vengono condivise automaticamente.",value:ss.autoShareStaff,onChange:cs=>us("autoShareStaff",cs),adminOnly:!0})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(HardDrive,{className:"h-5 w-5"}),"Quanto Tenere sul Telefono"]})}),jsxRuntimeExports.jsxs(CardContent,{className:"space-y-4",children:[jsxRuntimeExports.jsx(xs,{icon:HardDrive,title:"Giorni di Dati da Tenere",description:"Quanti giorni di temperature, pulizie e inventario tenere salvati sul telefono",current:ss.keepDaysLocal,onChange:cs=>us("keepDaysLocal",cs),options:[{value:3,label:"3 giorni"},{value:7,label:"1 settimana"},{value:30,label:"1 mese"}]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"h-4 w-4 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Perch  importante?"}),jsxRuntimeExports.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:[jsxRuntimeExports.jsxs("li",{children:["  ",jsxRuntimeExports.jsx("strong",{children:"Meno giorni"})," = telefono pi veloce e pi spazio libero"]}),jsxRuntimeExports.jsxs("li",{children:["  ",jsxRuntimeExports.jsx("strong",{children:"Pi giorni"})," = puoi vedere dati anche senza internet"]}),jsxRuntimeExports.jsxs("li",{children:["  ",jsxRuntimeExports.jsx("strong",{children:"Tutti i dati"})," rimangono sempre salvati online"]})]})]})]})})]})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsx(CardTitle,{children:" Azioni Rapide"})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{try{const cs=await os.cleanupCloudStorage();if(cs.success){alert(` ${cs.message}
 Spazio liberato: ${cs.spaceSaved}`);const ys=os.getStorageStats();is(gs=>({...gs,usedSpace:ys.localSpace}))}}catch{alert(" Errore durante la pulizia dello spazio")}},children:[jsxRuntimeExports.jsx(HardDrive,{className:"h-4 w-4"}),"Libera Spazio"]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{var cs;try{alert(" Sto sincronizzando tutto..."),await new Promise(gs=>setTimeout(gs,1500));const ys=await os.getRecentChanges();ys.success&&alert(` Sincronizzazione completata!
 Trovate ${((cs=ys.changes)==null?void 0:cs.length)||0} modifiche dai colleghi`)}catch{alert(" Errore durante la sincronizzazione")}},children:[jsxRuntimeExports.jsx(Wifi,{className:"h-4 w-4"}),"Sincronizza Ora"]})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-5 w-5"}),"Backup e Export Dati"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Gestisci il backup e l'export dei dati HACCP per garantire la sicurezza e la tracciabilit. Esporta tutti i dati in formato JSON o importa da backup esistenti."}),jsxRuntimeExports.jsx(BackupPanel,{currentUser:_e,isAdmin:e})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Truck,{className:"h-5 w-5"}),"Gestione Fornitori"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:" Gestisci i fornitori per garantire la tracciabilit HACCP e la sicurezza alimentare. Mantieni aggiornate le informazioni sui fornitori per la compliance normativa."}),jsxRuntimeExports.jsx(Suppliers,{currentUser:_e})]})})]}),jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-5 w-5"}),"Manuale HACCP"]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Consulta la guida completa per normative HACCP e procedure operative. Questo manuale ti aiuter a comprendere i requisiti e implementare correttamente le procedure."}),jsxRuntimeExports.jsxs(Button,{variant:"outline",className:"flex items-center gap-2 w-full",onClick:()=>ts(!0),children:[jsxRuntimeExports.jsx(BookOpen,{className:"h-4 w-4"}),"Apri Manuale HACCP"]})]})})]})]}),es&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:"Manuale HACCP"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:()=>ts(!1),children:" Chiudi"})]}),jsxRuntimeExports.jsx("div",{className:"overflow-y-auto h-full p-4",children:jsxRuntimeExports.jsx(HaccpManual,{})})]})})]})}function Login({isOpen:_e,onClose:e,onLogin:St,users:es,onAddUser:ts}){const[ss,rs]=reactExports.useState(""),[ns,is]=reactExports.useState(""),[os,us]=reactExports.useState(!1),[ps,xs]=reactExports.useState(!1),[cs,ys]=reactExports.useState(""),[gs,vs]=reactExports.useState({name:"",pin:"",role:"employee",department:""}),[ds,fs]=reactExports.useState([]),[Es,Os]=reactExports.useState([]);reactExports.useEffect(()=>{const Bs=localStorage.getItem("haccp-departments"),Gs=localStorage.getItem("haccp-departments-version"),bs=["Banconisti","Cuochi","Amministrazione"];if(Gs!=="2.0"||!Bs)fs(bs),Os(bs);else try{const ks=JSON.parse(Bs).filter(qs=>qs.isCustom).map(qs=>qs.name),$s=[...ks];bs.forEach(qs=>{ks.includes(qs)||$s.push(qs)}),fs($s),Os(bs)}catch(As){console.error("Errore nel caricamento reparti:",As),fs(bs),Os(bs)}},[]),reactExports.useEffect(()=>{if(es.length>0&&!ss){const Bs=es.find(Gs=>Gs.name==="Admin"&&Gs.pin==="0000");Bs&&(rs(Bs.id),is("0000"),console.log(" Login precompilato: Admin / 0000"))}},[es,ss]);const Hs=()=>{if(!ss||!ns){ys("Seleziona utente e inserisci PIN");return}const Bs=es.find(Gs=>Gs.id===ss);if(!Bs){ys("Utente non trovato");return}if(Bs.pin!==ns){ys("PIN non corretto");return}St(Bs),zs()},Qs=()=>{if(!gs.name.trim()||!gs.pin.trim()){ys("Nome e PIN sono obbligatori");return}if(gs.pin.length!==4){ys("Il PIN deve essere di 4 cifre");return}if(es.some(Bs=>Bs.pin===gs.pin)){ys("PIN gi in uso, scegline un altro");return}ts(gs),us(!1),vs({name:"",pin:"",role:"employee",department:""}),ys("")},zs=()=>{rs(""),is(""),ys(""),us(!1),xs(!1)},Ls=()=>{zs(),e()};return _e?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold",children:os?"Aggiungi Nuovo Utente":"Inizia il Turno"}),jsxRuntimeExports.jsx(Button,{variant:"ghost",size:"sm",onClick:Ls,children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[cs&&jsxRuntimeExports.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:cs}),os?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"new-name",children:"Nome Completo"}),jsxRuntimeExports.jsx(Input,{id:"new-name",value:gs.name,onChange:Bs=>vs({...gs,name:Bs.target.value}),placeholder:"es. Mario Rossi"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"new-pin",children:"PIN (4 cifre)"}),jsxRuntimeExports.jsx(Input,{id:"new-pin",type:"password",value:gs.pin,onChange:Bs=>{const Gs=Bs.target.value.replace(/\D/g,"").slice(0,4);vs({...gs,pin:Gs})},maxLength:4,placeholder:""})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"new-role",children:"Ruolo"}),jsxRuntimeExports.jsxs("select",{id:"new-role",value:gs.role,onChange:Bs=>vs({...gs,role:Bs.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona ruolo --"}),jsxRuntimeExports.jsx("option",{value:"dipendente",children:"Dipendente (Staff Fisso) (Consigliato)"}),jsxRuntimeExports.jsx("option",{value:"responsabile",children:"Responsabile (Consigliato)"}),jsxRuntimeExports.jsx("option",{value:"collaboratore",children:"Collaboratore Occasionale (Consigliato)"}),jsxRuntimeExports.jsx("option",{value:"admin",children:"Amministratore (Consigliato)"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I ruoli contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"new-department",children:"Reparto"}),jsxRuntimeExports.jsxs("select",{id:"new-department",value:gs.department,onChange:Bs=>vs({...gs,department:Bs.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Seleziona reparto --"}),ds.map(Bs=>{const Gs=Es.includes(Bs);return jsxRuntimeExports.jsxs("option",{value:Bs,children:[Bs," ",Gs?"(Consigliato)":""]},Bs)})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I reparti contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:Qs,className:"flex-1",disabled:!gs.name.trim()||gs.pin.length!==4,children:[jsxRuntimeExports.jsx(Plus,{className:"mr-2 h-4 w-4"}),"Crea Utente"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{us(!1),ys("")},children:"Indietro"})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"user-select",children:"Seleziona Utente"}),jsxRuntimeExports.jsxs("select",{id:"user-select",value:ss,onChange:Bs=>{rs(Bs.target.value),ys("")},className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"-- Scegli utente --"}),es.map(Bs=>jsxRuntimeExports.jsxs("option",{value:Bs.id,children:[Bs.name," (",Bs.department,")",Bs.role==="admin"&&" - Admin"]},Bs.id))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"pin",children:"PIN (4 cifre)"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Input,{id:"pin",type:ps?"text":"password",value:ns,onChange:Bs=>{const Gs=Bs.target.value.replace(/\D/g,"").slice(0,4);is(Gs),ys("")},maxLength:4,placeholder:"",className:"pr-10"}),jsxRuntimeExports.jsx(Button,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>xs(!ps),children:ps?jsxRuntimeExports.jsx(EyeOff,{className:"h-4 w-4"}):jsxRuntimeExports.jsx(Eye,{className:"h-4 w-4"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3 pt-4",children:[jsxRuntimeExports.jsxs(Button,{onClick:Hs,className:"flex-1",disabled:!ss||ns.length!==4,children:[jsxRuntimeExports.jsx(User,{className:"mr-2 h-4 w-4"}),"Entra"]}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:Ls,children:"Annulla"})]}),jsxRuntimeExports.jsx("div",{className:"pt-4 border-t",children:jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>us(!0),className:"w-full",children:[jsxRuntimeExports.jsx(Plus,{className:"mr-2 h-4 w-4"}),"Aggiungi Nuovo Utente"]})})]})]})]})}):null}function PDFExport({activeTab:_e,temperatures:e}){const[St,es]=reactExports.useState(!1);reactExports.useEffect(()=>{es(_e==="temperature")},[_e]);const ts=()=>{if(typeof window.jspdf>"u"){alert("Errore: Librerie PDF non caricate. Ricarica la pagina e riprova.");return}if(e.length===0){alert("Nessuna temperatura registrata da esportare.");return}try{const ss=["Posizione","Temperatura","Orario"],rs=[];e.forEach(xs=>{rs.push([xs.location,`${xs.temperature}C`,xs.time])});const{jsPDF:ns}=window.jspdf,is=new ns;is.setFontSize(18),is.text("Report: Temperature HACCP",14,22),is.setFontSize(12);const os=new Date().toLocaleDateString("it-IT");is.text(`Data esportazione: ${os}`,14,32),is.text(`Totale rilevazioni: ${e.length}`,14,40),is.autoTable({startY:50,head:[ss],body:rs,theme:"striped",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[25,118,210],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:60},1:{cellWidth:40,halign:"center"},2:{cellWidth:50}}});const us=is.internal.getNumberOfPages();is.setFontSize(8);for(let xs=1;xs<=us;xs++)is.setPage(xs),is.text(`Mini-ePackPro HACCP - Pagina ${xs} di ${us}`,14,is.internal.pageSize.height-10);const ps=`report_Temperature_${new Date().toISOString().slice(0,10)}.pdf`;is.save(ps)}catch(ss){console.error("PDF export error:",ss),alert("Errore durante l'esportazione del PDF. Riprova.")}};return St?jsxRuntimeExports.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:jsxRuntimeExports.jsxs(Button,{onClick:ts,className:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-xl",size:"lg",children:[jsxRuntimeExports.jsx(FileDown,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Esporta Temperature in PDF"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"PDF"})]})}):null}const initializeDataSchemas=()=>({"haccp-roles":[],"haccp-suppliers":[],"haccp-onboarding":{currentStep:"preset",completedSteps:[],progress:0,startedAt:new Date().toISOString(),lastActivity:new Date().toISOString()},"haccp-presets":[],"haccp-dev-mode":{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:new Date().toISOString()}}),initializeDevModeIfRequested=()=>{try{if(new URLSearchParams(window.location.search).get("dev")==="1"){const e={enabled:!0,features:["bypass-onboarding","show-debug-info"],bypassOnboarding:!0,showDebugInfo:!0,lastToggled:new Date().toISOString(),reason:"Attivato via URL parameter"};return localStorage.setItem("haccp-dev-mode",JSON.stringify(e)),console.log(" Dev mode attivato via URL parameter"),!0}}catch(_e){console.warn("Errore nell'inizializzazione dev mode:",_e)}return!1},DEV_MODE_KEY="haccp-dev-mode",isDevMode=()=>{try{const _e=localStorage.getItem(DEV_MODE_KEY);if(_e&&_e!=="undefined"&&_e!=="null"&&_e!=="[object Object]"){const e=JSON.parse(_e);return e&&typeof e=="object"&&e.enabled===!0}}catch(_e){console.warn("Errore nel parsing dev mode:",_e),localStorage.removeItem(DEV_MODE_KEY),localStorage.removeItem("haccp-dev-mode"),localStorage.removeItem("haccp-dev-mode-version")}return!1},toggleDevMode=(_e=null,e="")=>{const St=isDevMode(),es=_e!==null?_e:!St,ts={enabled:es,features:es?["bypass-onboarding","show-debug-info"]:[],bypassOnboarding:es,showDebugInfo:es,lastToggled:new Date().toISOString(),reason:e||(es?"Attivato manualmente":"Disattivato manualmente")};try{return localStorage.setItem(DEV_MODE_KEY,JSON.stringify(ts)),es&&!St&&window.location.reload(),es}catch(ss){return console.error("Errore nel salvataggio dev mode:",ss),!1}},getDevModeSettings=()=>{try{const _e=localStorage.getItem(DEV_MODE_KEY);if(_e&&_e!=="undefined"&&_e!=="null"){const e=JSON.parse(_e);if(e&&typeof e=="object")return e}}catch(_e){console.warn("Errore nel parsing dev mode settings:",_e),localStorage.removeItem(DEV_MODE_KEY)}return{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:null,reason:null}},isDevFeatureEnabled=_e=>isDevMode()?getDevModeSettings().features.includes(_e):!1,shouldBypassOnboarding=()=>isDevMode()&&isDevFeatureEnabled("bypass-onboarding"),shouldShowDebugInfo=()=>isDevMode()&&isDevFeatureEnabled("show-debug-info"),getDebugInfo=()=>shouldShowDebugInfo()?{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,localStorage:{keys:Object.keys(localStorage),size:new Blob(Object.values(localStorage)).size},sessionStorage:{keys:Object.keys(sessionStorage),size:new Blob(Object.values(sessionStorage)).size},url:window.location.href,devMode:getDevModeSettings()}:null,clearDevData=()=>{if(!isDevMode())return!1;try{return["haccp-dev-mode","haccp-onboarding","haccp-presets"].forEach(e=>{localStorage.removeItem(e)}),!0}catch(_e){return console.error("Errore nella pulizia dati dev:",_e),!1}};function DevModeBanner(){const[_e,e]=reactExports.useState(!1),[St,es]=reactExports.useState(!1),[ts,ss]=reactExports.useState(!1),[rs,ns]=reactExports.useState(null);if(reactExports.useEffect(()=>{const xs=()=>{const ys=isDevMode();e(ys),ys&&ns(getDevModeSettings())};xs();const cs=ys=>{ys.key==="haccp-dev-mode"&&xs()};return window.addEventListener("storage",cs),()=>{window.removeEventListener("storage",cs)}},[]),!_e)return null;const is=()=>{toggleDevMode(!1,"Disattivato via banner")},os=async()=>{confirm(` ATTENZIONE: Stai per rimuovere tutti i dati di sviluppo.

Questo rimuover:
 Modalit dev
 Onboarding
 Preset

I dati HACCP (temperature, pulizie, inventario) NON verranno toccati.

Procedere?`)&&(clearDevData()?(alert(` Dati di sviluppo rimossi con successo!

La modalit dev  stata disattivata.`),window.location.reload()):alert(" Errore nella rimozione dei dati di sviluppo"))},us=()=>{window.location.reload()},ps=getDebugInfo();return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-yellow-900 px-4 py-2 shadow-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:"DEV MODE ATTIVO"}),jsxRuntimeExports.jsx("span",{className:"text-sm opacity-75",children:" Onboarding bypassato  Debug info  Testing features"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ss(!ts),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Mostra info debug",children:jsxRuntimeExports.jsx(Info,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("button",{onClick:()=>es(!St),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Impostazioni dev",children:jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("button",{onClick:us,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Ricarica pagina",children:jsxRuntimeExports.jsx(RefreshCw,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx("button",{onClick:is,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Disattiva dev mode",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})]})}),ts&&ps&&jsxRuntimeExports.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-h-96 overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"h-5 w-5"}),"Debug Info"]}),jsxRuntimeExports.jsx("button",{onClick:()=>ss(!1),className:"p-1 hover:bg-gray-100 rounded",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Timestamp:"})," ",ps.timestamp]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"URL:"})," ",ps.url]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"User Agent:"})," ",ps.userAgent]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"LocalStorage:"})," ",ps.localStorage.keys.length," chiavi, ",Math.round(ps.localStorage.size/1024)," KB"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"SessionStorage:"})," ",ps.sessionStorage.keys.length," chiavi, ",Math.round(ps.sessionStorage.size/1024)," KB"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Dev Mode Settings:"}),jsxRuntimeExports.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(ps.devMode,null,2)})]})]})]}),St&&jsxRuntimeExports.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-w-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Settings,{className:"h-5 w-5"}),"Impostazioni Dev Mode"]}),jsxRuntimeExports.jsx("button",{onClick:()=>es(!1),className:"p-1 hover:bg-gray-100 rounded",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]}),rs&&jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Stato:"}),jsxRuntimeExports.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"ATTIVO"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Attivato il:"})," ",new Date(rs.lastToggled).toLocaleString("it-IT")]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Motivo:"})," ",rs.reason]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("strong",{children:"Features:"}),jsxRuntimeExports.jsx("div",{className:"mt-1 space-y-1",children:rs.features.map(xs=>jsxRuntimeExports.jsx("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:xs},xs))})]}),jsxRuntimeExports.jsxs("div",{className:"pt-3 border-t",children:[jsxRuntimeExports.jsxs("button",{onClick:os,className:"w-full px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"}),"Rimuovi Dati Dev"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Rimuove solo i dati di sviluppo, mantiene i dati HACCP"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"h-16"})]})}const StepNavigator=({currentStep:_e,completedSteps:e,onStepClick:St,steps:es})=>{const ts=(is,os)=>{(is===0||e.has(os))&&St(is)},ss=(is,os)=>is===0||e.has(os),rs=is=>e.has(is),ns=is=>is===_e;return jsxRuntimeExports.jsx("div",{className:"flex items-center justify-center space-x-2 mb-6",children:es.map((is,os)=>{const us=ss(os,is.id),ps=rs(is.id),xs=ns(os);return jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ts(os,is.id),disabled:!us,className:`
                w-10 h-10 rounded-full flex items-center justify-center text-sm font-medium
                transition-all duration-200 ease-in-out
                ${xs?"bg-blue-600 text-white shadow-lg scale-110":ps?"bg-green-500 text-white hover:bg-green-600 hover:scale-105 cursor-pointer":us?"bg-gray-200 text-gray-600 hover:bg-gray-300 hover:scale-105 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"}
                ${us?"hover:shadow-md":""}
              `,title:xs?`Step corrente: ${is.title}`:ps?`Vai allo step ${os+1}: ${is.title}`:os===0?`Step ${os+1}: ${is.title}`:`Completa gli step precedenti per accedere a: ${is.title}`,children:ps?jsxRuntimeExports.jsx(CheckCircle,{className:"h-5 w-5"}):us?os+1:jsxRuntimeExports.jsx(Lock,{className:"h-4 w-4"})}),os<es.length-1&&jsxRuntimeExports.jsx("div",{className:`
                  w-8 h-0.5 mx-1
                  ${ps?"bg-green-500":"bg-gray-300"}
                `})]},is.id)})})},BusinessInfoStep=({formData:_e,setFormData:e,currentStep:St,validateStep:es,confirmStep:ts,markStepAsUnconfirmed:ss,isStepConfirmed:rs,canConfirmStep:ns})=>{var ps,xs,cs,ys,gs,vs,ds,fs,Es,Os;const[is,os]=reactExports.useState(null),us=Hs=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Hs);return reactExports.useEffect(()=>{var Qs;const Hs=((Qs=_e.business)==null?void 0:Qs.email)||"";Hs.length>0?os(us(Hs)):os(null)},[(ps=_e.business)==null?void 0:ps.email]),(xs=_e.business)!=null&&xs.companyName&&((cs=_e.business)!=null&&cs.address)&&((ys=_e.business)!=null&&ys.email),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Informazioni Attivit"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Configura i dati base della tua attivit"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"businessName",children:"Nome Attivit *"}),jsxRuntimeExports.jsx(Input,{id:"businessName",value:((gs=_e.business)==null?void 0:gs.companyName)||"",onChange:Hs=>e(Qs=>({...Qs,business:{...Qs.business,companyName:Hs.target.value}})),placeholder:"Es. Pizzeria Bella Napoli",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"vatNumber",children:"P.IVA"}),jsxRuntimeExports.jsx(Input,{id:"vatNumber",value:((vs=_e.business)==null?void 0:vs.vatNumber)||"",onChange:Hs=>e(Qs=>({...Qs,business:{...Qs.business,vatNumber:Hs.target.value}})),placeholder:"11 caratteri max",maxLength:11,className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"address",children:"Indirizzo *"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-1",children:[jsxRuntimeExports.jsx(Input,{id:"address",value:((ds=_e.business)==null?void 0:ds.address)||"",onChange:Hs=>e(Qs=>({...Qs,business:{...Qs.business,address:Hs.target.value}})),placeholder:"Via Roma 123, Milano",className:"flex-1"}),jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",onClick:async()=>{if(navigator.geolocation)try{const Hs=event.target.closest("button"),Qs=Hs.innerHTML;Hs.innerHTML='<div class="animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"></div>',Hs.disabled=!0;const zs=await new Promise((bs,As)=>{navigator.geolocation.getCurrentPosition(bs,As,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:Ls,longitude:Bs}=zs.coords,Gs=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${Ls}&lon=${Bs}&zoom=18&addressdetails=1`);if(Gs.ok){const bs=await Gs.json();if(bs.display_name&&bs.address){const As=bs.address,ks=As.road||"",$s=As.house_number||"",qs=As.postcode||"",Cs=As.city||As.town||As.village||"",Us=As.state||"",Ps=[ks,$s,Cs,Us].filter(Boolean).join(", ");e(er=>({...er,business:{...er.business,address:Ps,via:ks,civico:$s,cap:qs,citta:Cs,provincia:Us,coordinates:{lat:Ls,lon:Bs}}})),Hs.innerHTML='<div class="text-green-600"></div>',setTimeout(()=>{Hs.innerHTML=Qs,Hs.disabled=!1},2e3)}}else throw new Error("Errore nel reverse geocoding")}catch(Hs){console.error("Errore geolocalizzazione:",Hs),alert("Errore nella geolocalizzazione: "+Hs.message);const Qs=event.target.closest("button");Qs.innerHTML=originalContent,Qs.disabled=!1}else alert("Geolocalizzazione non supportata dal browser")},children:jsxRuntimeExports.jsx(MapPin,{className:"h-4 w-4"})})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Clicca il pulsante GPS per rilevare automaticamente la tua posizione e compilare l'indirizzo"}),((fs=_e.business)==null?void 0:fs.address)&&jsxRuntimeExports.jsx("div",{className:"space-y-2 mt-2",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-yellow-600 mt-0.5",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-yellow-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Verifica il numero civico!"}),jsxRuntimeExports.jsx("p",{className:"text-xs mt-1",children:"La geolocalizzazione ha un margine di errore di 5-15 metri. Controlla che il numero civico sia corretto e modificalo se necessario."})]})]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"phone",children:"Telefono"}),jsxRuntimeExports.jsx(Input,{id:"phone",value:((Es=_e.business)==null?void 0:Es.phone)||"",onChange:Hs=>e(Qs=>({...Qs,business:{...Qs.business,phone:Hs.target.value}})),placeholder:"+39 123 456 7890",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"email",children:"Email *"}),jsxRuntimeExports.jsxs("div",{className:"relative mt-1",children:[jsxRuntimeExports.jsx(Input,{id:"email",type:"email",value:((Os=_e.business)==null?void 0:Os.email)||"",onChange:Hs=>e(Qs=>({...Qs,business:{...Qs.business,email:Hs.target.value}})),placeholder:"info@pizzeria.it",className:`pr-10 ${is===!0?"border-green-500 focus:border-green-500 focus:ring-green-500":is===!1?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"}`}),is===!0&&jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(CheckCircle,{className:"h-5 w-5 text-green-500"})}),is===!1&&jsxRuntimeExports.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:jsxRuntimeExports.jsx(XCircle,{className:"h-5 w-5 text-red-500"})})]}),is===!1&&jsxRuntimeExports.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Inserisci un indirizzo email valido (es. info@pizzeria.it)"})]})]}),jsxRuntimeExports.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Info,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-900",children:"Campi obbligatori"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Nome Attivit, Indirizzo e Email sono obbligatori per procedere."})]})]})})]})},DepartmentsStep=({formData:_e,setFormData:e,currentStep:St,validateStep:es,confirmStep:ts,markStepAsUnconfirmed:ss,isStepConfirmed:rs,canConfirmStep:ns})=>{const[is,os]=reactExports.useState(""),[us,ps]=reactExports.useState([{id:"cucina",name:"Cucina",enabled:!0,isCustom:!1,required:!1},{id:"bancone",name:"Bancone",enabled:!0,isCustom:!1,required:!1},{id:"sala",name:"Sala",enabled:!0,isCustom:!1,required:!1},{id:"magazzino",name:"Magazzino",enabled:!0,isCustom:!1,required:!1}]);reactExports.useEffect(()=>{var ds;if((ds=_e.departments)!=null&&ds.list&&_e.departments.list.length>0){const fs=_e.departments.list,Os=[{id:"cucina",name:"Cucina",enabled:!0,isCustom:!1,required:!1},{id:"bancone",name:"Bancone",enabled:!0,isCustom:!1,required:!1},{id:"sala",name:"Sala",enabled:!0,isCustom:!1,required:!1},{id:"magazzino",name:"Magazzino",enabled:!0,isCustom:!1,required:!1}].map(Qs=>{const zs=fs.find(Ls=>Ls.id===Qs.id);return zs?{...zs,required:!1}:Qs}),Hs=fs.filter(Qs=>Qs.isCustom);ps([...Os,...Hs])}},[]);const xs=ds=>{ps(fs=>fs.map(Es=>Es.id===ds?{...Es,enabled:!Es.enabled}:Es))},cs=()=>{if(is.trim()){const ds={id:`custom-${Date.now()}`,name:is.trim(),enabled:!0,isCustom:!0};ps(fs=>[...fs,ds]),os("")}},ys=ds=>{ps(fs=>fs.filter(Es=>Es.id!==ds))},gs=us.filter(ds=>ds.enabled).length,vs=gs>0;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Reparti"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Organizza la struttura operativa della tua attivit"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Reparti Standard"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:us.filter(ds=>!ds.isCustom&&ds&&ds.id&&ds.name&&typeof ds.name=="string").map(ds=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.name||"Nome non disponibile"}),jsxRuntimeExports.jsxs("label",{className:"flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ds.enabled,onChange:()=>xs(ds.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm text-gray-600",children:ds.enabled?"Attivo":"Inattivo"})]})]},ds.id))})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Aggiungi Reparto Personalizzato"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Input,{value:is,onChange:ds=>os(ds.target.value),placeholder:"Nome del nuovo reparto",className:"flex-1"}),jsxRuntimeExports.jsxs(Button,{onClick:cs,disabled:!is.trim(),variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"Aggiungi"]})]})]}),us.filter(ds=>ds.isCustom).length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Reparti Personalizzati"}),us.filter(ds=>ds.isCustom&&ds&&ds.id&&ds.name&&typeof ds.name=="string").map(ds=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:ds.name||"Nome non disponibile"}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("label",{className:"flex items-center cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:ds.enabled,onChange:()=>xs(ds.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsx("span",{className:"ml-2 text-sm text-gray-600",children:ds.enabled?"Attivo":"Inattivo"})]}),jsxRuntimeExports.jsx(Button,{onClick:()=>ys(ds.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})]},ds.id))]}),jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${vs?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${vs?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:gs}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:`font-medium ${vs?"text-green-900":"text-yellow-900"}`,children:["Reparti attivi: ",gs]}),jsxRuntimeExports.jsx("p",{className:`text-sm ${vs?"text-green-800":"text-yellow-800"}`,children:vs?" Requisito soddisfatto! Puoi procedere.":" Devi attivare almeno 1 reparto per continuare."})]})]})})]})},StaffStep=({formData:_e,setFormData:e,currentStep:St,setCurrentStep:es,validateStep:ts,confirmStep:ss,markStepAsUnconfirmed:rs,isStepConfirmed:ns,canConfirmStep:is})=>{var qs;const[os,us]=reactExports.useState(((qs=_e.staff)==null?void 0:qs.staffMembers)||[]),[ps,xs]=reactExports.useState(!1),[cs,ys]=reactExports.useState(null),[gs,vs]=reactExports.useState({}),[ds,fs]=reactExports.useState({name:"",surname:"",role:"",categories:[""],haccpExpiry:""});reactExports.useEffect(()=>{var Cs;(Cs=_e.staff)!=null&&Cs.staffMembers&&_e.staff.staffMembers.length>0&&us(_e.staff.staffMembers)},[_e.staff]);const Es=["Amministratore","Responsabile","Dipendente","Collaboratore Occasionale / Part-time"],Os=["Cuochi","Banconisti","Camerieri","Social & Media Manager","Amministratore","Altro"],Hs=()=>{fs({name:"",surname:"",role:"",categories:[""],haccpExpiry:""}),ys(null)},Qs=Cs=>Cs.some(Us=>Us!=="Social & Media Manager"&&Us!=="Altro"),zs=()=>{fs(Cs=>({...Cs,categories:[...Cs.categories,""]}))},Ls=Cs=>{ds.categories.length>1&&fs(Us=>({...Us,categories:Us.categories.filter((Ps,er)=>er!==Cs)}))},Bs=(Cs,Us)=>{fs(Ps=>({...Ps,categories:Ps.categories.map((er,tr)=>tr===Cs?Us:er)}))},Gs=()=>{const Cs=[...new Set(ds.categories.filter(Us=>Us.trim()))];if(ds.name&&ds.surname&&ds.role&&Cs.length>0){const Us={id:Date.now(),name:ds.name,surname:ds.surname,role:ds.role,categories:Cs,primaryCategory:Cs[0],fullName:`${ds.name} ${ds.surname}`,haccpExpiry:Qs(Cs)&&ds.haccpExpiry?ds.haccpExpiry:""},Ps=[...os,Us];us(Ps),e(er=>({...er,staff:{...er.staff,staffMembers:Ps}})),ns(St)&&rs(St),Hs(),xs(!1),vs({})}},bs=Cs=>{fs({name:Cs.name,surname:Cs.surname,role:Cs.role||"",categories:Cs.categories&&Cs.categories.length>0?Cs.categories:[Cs.category||""],haccpExpiry:Cs.haccpExpiry}),ys(Cs),xs(!0)},As=()=>{const Cs=[...new Set(ds.categories.filter(Us=>Us.trim()))];if(ds.name&&ds.surname&&ds.role&&Cs.length>0){const Us=os.map(Ps=>Ps.id===cs.id?{...Ps,name:ds.name,surname:ds.surname,role:ds.role,categories:Cs,primaryCategory:Cs[0],fullName:`${ds.name} ${ds.surname}`,haccpExpiry:Qs(Cs)&&ds.haccpExpiry?ds.haccpExpiry:""}:Ps);us(Us),e(Ps=>({...Ps,staff:{...Ps.staff,staffMembers:Us}})),ns(St)&&rs(St),Hs(),xs(!1),vs({})}},ks=Cs=>{const Us=os.filter(Ps=>Ps.id!==Cs);us(Us),e(Ps=>({...Ps,staff:{...Ps.staff,staffMembers:Us}})),ns(St)&&rs(St),vs({})},$s=()=>os.length===0?!1:os.every(Cs=>Cs.fullName&&Cs.fullName.trim().length>=3&&Cs.role&&(Cs.categories&&Cs.categories.length>0||Cs.category));return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Staff e Ruoli"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Registra il personale e assegna responsabilit"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Membri dello Staff"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>xs(!0),variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"Aggiungi Staff"]})]}),os.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx("p",{children:"Nessun membro dello staff registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Staff" per iniziare'})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:os.map((Cs,Us)=>jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:Cs.fullName||"Nome non disponibile"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:Cs.role}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Cs.categories&&Cs.categories.length>0?Cs.categories:[Cs.category||"Non assegnato"]).map((Ps,er)=>jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:Ps},er))})]}),Cs.haccpExpiry&&jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:["HACCP: ",Cs.haccpExpiry]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>bs(Cs),variant:"outline",size:"sm",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>ks(Cs.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]}),(gs[`staff_${Us}_name`]||gs[`staff_${Us}_role`]||gs[`staff_${Us}_category`])&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-red-800",children:[gs[`staff_${Us}_name`]&&jsxRuntimeExports.jsxs("p",{children:[" ",gs[`staff_${Us}_name`]]}),gs[`staff_${Us}_role`]&&jsxRuntimeExports.jsxs("p",{children:[" ",gs[`staff_${Us}_role`]]}),gs[`staff_${Us}_category`]&&jsxRuntimeExports.jsxs("p",{children:[" ",gs[`staff_${Us}_category`]]})]})})]},Cs.id))})]}),ps&&jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:cs?"Modifica Membro":"Aggiungi Nuovo Membro"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:ds.name,onChange:Cs=>fs(Us=>({...Us,name:Cs.target.value})),placeholder:"Nome",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"surname",children:"Cognome *"}),jsxRuntimeExports.jsx(Input,{id:"surname",value:ds.surname,onChange:Cs=>fs(Us=>({...Us,surname:Cs.target.value})),placeholder:"Cognome",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"role",children:"Ruolo *"}),jsxRuntimeExports.jsxs("select",{id:"role",value:ds.role,onChange:Cs=>fs(Us=>({...Us,role:Cs.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona ruolo"}),Es.map(Cs=>jsxRuntimeExports.jsx("option",{value:Cs,children:Cs},Cs))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categories",children:"Categorie *"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ds.categories.map((Cs,Us)=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center",children:[jsxRuntimeExports.jsxs("select",{value:Cs,onChange:Ps=>Bs(Us,Ps.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:Us===0,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona una categoria..."}),Os.map(Ps=>jsxRuntimeExports.jsx("option",{value:Ps,children:Ps},Ps))]}),ds.categories.length>1&&jsxRuntimeExports.jsx(Button,{type:"button",onClick:()=>Ls(Us),variant:"outline",size:"sm",className:"h-10 w-10 p-0 text-red-600 hover:text-red-800",children:""})]},Us)),jsxRuntimeExports.jsx(Button,{type:"button",onClick:zs,variant:"outline",size:"sm",className:"w-full",children:"+ Aggiungi Categoria"})]})]}),Qs(ds.categories)&&jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"haccpExpiry",children:"Scadenza Attestato HACCP"}),jsxRuntimeExports.jsx(Input,{id:"haccpExpiry",type:"date",value:ds.haccpExpiry,onChange:Cs=>fs(Us=>({...Us,haccpExpiry:Cs.target.value})),className:"mt-1"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{xs(!1),Hs()},children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:cs?As:Gs,disabled:!ds.name||!ds.surname||!ds.role||ds.categories.every(Cs=>!Cs.trim()),children:cs?"Aggiorna":"Aggiungi"})]})]}),jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${ns(St)?"bg-green-50 border border-green-200":$s()?"bg-blue-50 border border-blue-200":"bg-yellow-50 border border-yellow-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${ns(St)?"bg-green-500":$s()?"bg-blue-500":"bg-yellow-500"} text-white text-sm font-bold`,children:os.length}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:`font-medium ${ns(St)?"text-green-900":$s()?"text-blue-900":"text-yellow-900"}`,children:["Membri registrati: ",os.length]}),jsxRuntimeExports.jsx("p",{className:`text-sm ${ns(St)?"text-green-800":$s()?"text-blue-800":"text-yellow-800"}`,children:ns(St)?" Step confermato! Puoi procedere al prossimo step.":$s()?' Dati validi! Clicca "Conferma Dati Staff" per confermare.':" Devi registrare almeno un membro con tutti i campi obbligatori."})]})]})}),gs.staff&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-red-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:" Errore generale:"}),jsxRuntimeExports.jsxs("p",{children:[" ",gs.staff]})]})})]})},ConservationStep=({formData:_e,setFormData:e,currentStep:St,validateStep:es,confirmStep:ts,markStepAsUnconfirmed:ss,isStepConfirmed:rs,canConfirmStep:ns})=>{var $s,qs;const[is,os]=reactExports.useState([]),[us,ps]=reactExports.useState(!1),[xs,cs]=reactExports.useState(null),[ys,gs]=reactExports.useState({}),[vs,ds]=reactExports.useState({name:"",location:"",targetTemp:"",selectedCategories:[]}),fs=(($s=_e.departments)==null?void 0:$s.list)||[];(qs=_e.staff)!=null&&qs.staffMembers,console.log(" ConservationStep - formData:",_e),console.log(" ConservationStep - departments:",fs);const Es=fs.length>0?fs.filter(Cs=>Cs&&Cs.enabled).map(Cs=>Cs.name||Cs):["Cucina","Bancone","Sala","Magazzino"];console.log(" ConservationStep - availableDepartments:",Es),reactExports.useEffect(()=>{var Cs;if((Cs=_e.conservation)!=null&&Cs.points&&_e.conservation.points.length>0){const Us=_e.conservation.points.map(Ps=>Ps.targetTemp&&Ps.selectedCategories&&Ps.selectedCategories.length>0?{...Ps,compliance:Hs(Ps.targetTemp,Ps.selectedCategories)}:Ps);os(Us)}},[_e.conservation]);const Os=()=>{ds({name:"",location:"",targetTemp:"",selectedCategories:[]}),cs(null)},Hs=(Cs,Us=[])=>{const Ps=parseFloat(Cs);if(isNaN(Ps))return{compliant:!1,message:"Temperatura non valida",type:"error"};if(Us.length>0){const er=CONSERVATION_POINT_RULES.tolerance;let tr=!1;for(let Ys=0;Ys<Us.length;Ys++){for(let Ws=Ys+1;Ws<Us.length;Ws++){const sr=CONSERVATION_POINT_RULES.categories.find(pr=>pr.id===Us[Ys]),nr=CONSERVATION_POINT_RULES.categories.find(pr=>pr.id===Us[Ws]);if(sr&&nr){const pr=sr.minTemp-er,xr=sr.maxTemp+er,Tr=nr.minTemp-er,Dr=nr.maxTemp+er;if(xr<Tr||Dr<pr){tr=!0;break}}}if(tr)break}if(tr)return{compliant:!1,message:" Categorie incompatibili selezionate",type:"error",color:"red"};let vr=!0,ws=!0,Vs=[];for(const Ys of Us){const Ws=CONSERVATION_POINT_RULES.categories.find(sr=>sr.id===Ys);if(Ws){const sr=Ps>=Ws.minTemp&&Ps<=Ws.maxTemp,nr=Ws.minTemp-er,pr=Ws.maxTemp+er,xr=Ps>=nr&&Ps<=pr;sr||(vr=!1,xr||(ws=!1,Vs.push(Ws.name)))}}return vr?{compliant:!0,message:" Valore temperatura valido per tutte le categorie",type:"compliant",color:"green"}:ws?{compliant:!0,message:"Temperatura impostata entro i limiti accettabili (0,5C di differenza) per tutte le categorie",type:"warning",color:"yellow"}:{compliant:!1,message:` Fuori range HACCP per: ${Vs.join(", ")}`,type:"error",color:"red"}}return Ps<-30||Ps>80?{compliant:!1,message:"Range temperatura fuori limiti operativi",type:"error",color:"red"}:{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}},Qs=(Cs,Us,Ps)=>{if(Us.length===0)return"neutral";const er=parseFloat(Ps);if(isNaN(er))return"neutral";const tr=CONSERVATION_POINT_RULES.categories.find(Ys=>Ys.id===Cs);if(!tr)return"neutral";if(Us.includes(Cs))return"selected";const vr=CONSERVATION_POINT_RULES.tolerance,ws=tr.minTemp-vr,Vs=tr.maxTemp+vr;if(er>=tr.minTemp&&er<=tr.maxTemp){for(const Ys of Us){const Ws=CONSERVATION_POINT_RULES.categories.find(sr=>sr.id===Ys);if(Ws){const sr=Ws.minTemp-vr,nr=Ws.maxTemp+vr;if(sr<=Vs&&nr>=ws)return"compatible"}}return"incompatible"}else if(er>=ws&&er<=Vs){for(const Ys of Us){const Ws=CONSERVATION_POINT_RULES.categories.find(sr=>sr.id===Ys);if(Ws){const sr=Ws.minTemp-vr,nr=Ws.maxTemp+vr;if(sr<=Vs&&nr>=ws)return"tolerance"}}return"incompatible"}return"incompatible"},zs=Cs=>{if(!Cs.selectedCategories||Cs.selectedCategories.length===0)return null;const Us=parseFloat(Cs.targetTemp);if(isNaN(Us))return null;const Ps=CONSERVATION_POINT_RULES.categories.find(Ys=>Ys.id===Cs.selectedCategories[0]);if(!Ps)return null;const er=CONSERVATION_POINT_RULES.tolerance,tr=Ps.minTemp,vr=Ps.maxTemp,ws=tr-er,Vs=vr+er;if(Us>=tr&&Us<=vr)return null;if(Us>=ws&&Us<=Vs){const Ys=(tr+vr)/2;return Us<Ys?`Aumenta la temperatura verso ${Ys.toFixed(1)}C per ottimizzare la conservazione`:`Diminuisci la temperatura verso ${Ys.toFixed(1)}C per ottimizzare la conservazione`}return Us<ws?`Aumenta la temperatura al range ottimale ${tr}-${vr}C`:Us>Vs?`Diminuisci la temperatura al range ottimale ${tr}-${vr}C`:null},Ls=()=>{if(vs.name&&vs.location&&vs.targetTemp&&vs.selectedCategories.length>0){const Cs=Hs(vs.targetTemp,vs.selectedCategories),Us={...vs,compliance:Cs};if(xs){const Ps=is.map(er=>er.id===xs?{...er,...Us}:er);os(Ps),e(er=>({...er,conservation:{points:Ps,count:Ps.length}}))}else{const Ps={id:Date.now(),...Us},er=[...is,Ps];os(er),e(tr=>({...tr,conservation:{points:er,count:er.length}}))}Os(),ps(!1),ss(St)}},Bs=Cs=>{const Us=is.filter(Ps=>Ps.id!==Cs);os(Us),e(Ps=>({...Ps,conservation:{points:Us,count:Us.length}})),ss(St)},Gs=Cs=>{const Us=is.find(Ps=>Ps.id===Cs);Us&&(ds({name:Us.name,location:Us.location,targetTemp:Us.targetTemp,selectedCategories:Us.selectedCategories||[]}),cs(Cs),ps(!0))},bs=Cs=>!Cs.targetTemp||!Cs.selectedCategories||Cs.selectedCategories.length===0?!1:Hs(Cs.targetTemp,Cs.selectedCategories).compliant,As=is.some(Cs=>!bs(Cs)),ks=is.length>0&&is.every(Cs=>Cs.name&&Cs.location&&Cs.targetTemp&&Cs.selectedCategories&&Cs.selectedCategories.length>0)&&!As;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Punti di Conservazione"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Configura frigoriferi e aree di stoccaggio"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Punti di Conservazione"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{console.log(" Pulsante Aggiungi cliccato");try{Os(),ps(!0),console.log(" Form resettato e showAddForm impostato a true")}catch(Cs){console.error(" Errore nel pulsante Aggiungi:",Cs)}},variant:"outline",size:"sm",className:"flex items-center gap-2 px-3 py-2 text-sm font-medium whitespace-nowrap min-w-fit",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Aggiungi Nuovo Punto di Conservazione"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Aggiungi Punto"})]})]}),is.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:"Nessun punto di conservazione configurato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Nuovo Punto di Conservazione" per iniziare'})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:is.map(Cs=>{var Us,Ps,er,tr,vr;return jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium",children:Cs.name||"Nome non disponibile"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:Cs.location})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Temperatura:"}),jsxRuntimeExports.jsxs("p",{className:"font-medium",children:[Cs.targetTemp,"C"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"HACCP:"}),jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1 ${((Us=Cs.compliance)==null?void 0:Us.type)==="compliant"?"text-green-600":((Ps=Cs.compliance)==null?void 0:Ps.type)==="warning"?"text-yellow-600":"text-red-600"}`,children:[((er=Cs.compliance)==null?void 0:er.type)==="compliant"?"":((tr=Cs.compliance)==null?void 0:tr.type)==="warning"?"":"",jsxRuntimeExports.jsx("span",{className:"text-xs",children:((vr=Cs.compliance)==null?void 0:vr.message)||"Non validato"})]})]})]}),Cs.selectedCategories&&Cs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-sm",children:"Categorie:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Cs.selectedCategories.map(ws=>{const Vs=CONSERVATION_POINT_RULES.categories.find(Ys=>Ys.id===ws);return Vs?jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:Vs.name||"Categoria non disponibile"},ws):null})})]}),(()=>{const ws=zs(Cs);return ws?jsxRuntimeExports.jsxs("div",{className:"mt-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600 text-sm",children:"Suggerimenti:"}),jsxRuntimeExports.jsx("div",{className:"mt-1 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:ws})]}):null})()]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Gs(Cs.id),variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Bs(Cs.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})]})},Cs.id)})})]}),us&&jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:xs?"Modifica Punto di Conservazione":"Aggiungi Nuovo Punto di Conservazione"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Punto di Conservazione *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:vs.name,onChange:Cs=>{ds(Us=>({...Us,name:Cs.target.value})),ss(St)},placeholder:"Es. Frigo A, Freezer, Abbattitore",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"location",children:"Luogo *"}),jsxRuntimeExports.jsxs("select",{id:"location",value:vs.location,onChange:Cs=>{ds(Us=>({...Us,location:Cs.target.value})),ss(St)},className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona reparto"}),Es.map(Cs=>jsxRuntimeExports.jsx("option",{value:Cs,children:Cs},Cs))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"targetTemp",children:"Temperatura Punto di Conservazione (C) *"}),jsxRuntimeExports.jsx(Input,{id:"targetTemp",type:"number",min:"-30",max:"80",step:"0.1",value:vs.targetTemp,onChange:Cs=>{console.log(" Temperatura cambiata:",Cs.target.value),ds(Us=>({...Us,targetTemp:Cs.target.value})),ss(St)},placeholder:"4",className:`mt-1 ${vs.targetTemp&&vs.selectedCategories.length>0?(()=>{const Cs=Hs(vs.targetTemp,vs.selectedCategories);return Cs.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":Cs.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":Cs.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`}),vs.targetTemp&&vs.selectedCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-1",children:(()=>{const Cs=Hs(vs.targetTemp,vs.selectedCategories);return jsxRuntimeExports.jsx("p",{className:`text-xs ${Cs.color==="green"?"text-green-600":Cs.color==="yellow"?"text-yellow-600":Cs.color==="red"?"text-red-600":"text-gray-600"}`,children:Cs.message})})()})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"categories",children:"Categorie Prodotti Conservati *"}),jsxRuntimeExports.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-2",children:CONSERVATION_POINT_RULES.categories.map(Cs=>{const Us=Qs(Cs.id,vs.selectedCategories,vs.targetTemp);console.log(` Category ${Cs.name}: compatibility=${Us}, selected=${vs.selectedCategories}, temp=${vs.targetTemp}`);const Ps=()=>{switch(Us){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";default:return"bg-gray-100 border-gray-300 text-gray-700"}};return jsxRuntimeExports.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-2 rounded border ${Ps()}`,children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:vs.selectedCategories.includes(Cs.id),onChange:er=>{console.log(" Categoria cambiata:",Cs.id,"checked:",er.target.checked),er.target.checked?ds(tr=>{const vr=[...tr.selectedCategories,Cs.id];return console.log(" Categorie aggiornate:",vr),{...tr,selectedCategories:vr}}):ds(tr=>{const vr=tr.selectedCategories.filter(ws=>ws!==Cs.id);return console.log(" Categorie aggiornate:",vr),{...tr,selectedCategories:vr}}),ss(St)},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:Cs.name}),Us==="compatible"&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),Us==="incompatible"&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""}),Us==="tolerance"&&jsxRuntimeExports.jsx("span",{className:"text-xs",children:""})]},Cs.id)})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Seleziona le categorie di prodotti che verranno conservate in questo punto"}),jsxRuntimeExports.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded text-xs border",children:[jsxRuntimeExports.jsx("p",{className:"font-medium mb-2",children:"Legenda compatibilit:"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-4 h-4 bg-green-200 border-2 border-green-400 rounded shadow-sm"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-green-900",children:"Verde: Compatibile con temperatura"})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-4 h-4 bg-yellow-200 border-2 border-yellow-400 rounded shadow-sm"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-yellow-900",children:"Giallo: Entro i limiti accettabili (0,5C)"})]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"w-4 h-4 bg-red-200 border-2 border-red-400 rounded shadow-sm"}),jsxRuntimeExports.jsx("span",{className:"font-medium text-red-900",children:"Rosso: Incompatibile"})]})]})]}),vs.selectedCategories.length===0&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-1",children:" Seleziona almeno una categoria per procedere"})]})]}),vs.targetTemp&&vs.selectedCategories.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const Cs=Hs(vs.targetTemp,vs.selectedCategories);return jsxRuntimeExports.jsxs("div",{className:`mt-2 flex items-center gap-2 ${Cs.color==="green"?"text-green-600":Cs.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[Cs.type==="compliant"?"":Cs.type==="warning"?"":"",jsxRuntimeExports.jsx("span",{className:"text-sm",children:Cs.message})]})})(),vs.selectedCategories.length>0&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-2 rounded-lg bg-blue-50 border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-blue-800",children:[jsxRuntimeExports.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const Cs=CONSERVATION_POINT_RULES.getOptimalTemperatureSuggestions(vs.selectedCategories);return Cs&&!Cs.compatible||Cs?Cs.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{ps(!1),Os()},children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:Ls,disabled:!vs.name||!vs.location||!vs.targetTemp||vs.selectedCategories.length===0,children:xs?"Salva Modifiche":"Aggiungi Punto"})]})]}),jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${ks?"bg-green-50 border border-green-200":As?"bg-red-50 border border-red-200":"bg-yellow-50 border border-yellow-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${ks?"bg-green-500":As?"bg-red-500":"bg-yellow-500"} text-white text-sm font-bold`,children:is.length}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:`font-medium ${ks?"text-green-900":As?"text-red-900":"text-yellow-900"}`,children:["Punti configurati: ",is.length]}),jsxRuntimeExports.jsx("p",{className:`text-sm ${ks?"text-green-800":"text-red-800"}`,children:ks?" Tutti i punti di conservazione sono HACCP compliant! Puoi procedere al prossimo step.":As?" Non puoi procedere: alcuni punti di conservazione non rispettano i range di temperatura per TUTTE le categorie selezionate. Correggi le temperature o rimuovi le categorie incompatibili.":" Devi configurare almeno un punto di conservazione con tutti i campi obbligatori."})]})]})}),Object.keys(ys).length>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-red-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(ys).map(([Cs,Us])=>jsxRuntimeExports.jsxs("p",{children:[" ",Us]},Cs))]})})]})},getAvailableRoles=_e=>!_e||_e.length===0?[]:[...new Set(_e.map(St=>St.role).filter(Boolean))].map(St=>({value:St.toLowerCase().replace(/\s+/g,"_"),label:St})),getAvailableCategories=(_e,e=null)=>{if(!_e||_e.length===0)return[];let St=_e;if(e){const ts=e.toLowerCase().replace(/\s+/g,"_");St=_e.filter(ss=>{var ns;return((ns=ss.role)==null?void 0:ns.toLowerCase().replace(/\s+/g,"_"))===ts})}return[...new Set(St.flatMap(ts=>ts.categories||[]).filter(Boolean))].map(ts=>({value:ts.toLowerCase().replace(/\s+/g,"_"),label:ts}))},getAvailableStaff=(_e,e=null,St=null)=>{if(!_e||_e.length===0)return[];let es=_e;if(e){const ts=e.toLowerCase().replace(/\s+/g,"_");es=es.filter(ss=>{var ns;return((ns=ss.role)==null?void 0:ns.toLowerCase().replace(/\s+/g,"_"))===ts})}if(St){const ts=St.toLowerCase().replace(/\s+/g,"_");es=es.filter(ss=>ss.categories&&ss.categories.some(rs=>(rs==null?void 0:rs.toLowerCase().replace(/\s+/g,"_"))===ts))}return es},MaintenanceForm=({conservationPoint:_e,staffMembers:e=[],onSave:St,onCancel:es,isOpen:ts=!1,existingData:ss=null})=>{const[rs,ns]=reactExports.useState({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.SANITIZATION]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.DEFROSTING]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]}}),[is,os]=reactExports.useState({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:!1,[MAINTENANCE_TASK_TYPES.SANITIZATION]:!1,[MAINTENANCE_TASK_TYPES.DEFROSTING]:!1}),[us,ps]=reactExports.useState({}),[xs,cs]=reactExports.useState(!1);console.log(" MaintenanceForm - Available data:",{staffMembers:e.length}),reactExports.useEffect(()=>{var zs,Ls;ts&&(console.log(" MaintenanceForm opened with data:",{conservationPoint:_e,staffMembers:e.length,staffMembersData:e,existingData:ss}),ss?(console.log(" Caricamento dati esistenti per modifica"),ns(ss),os({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:((zs=ss[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING])==null?void 0:zs.frequency)==="custom_days",[MAINTENANCE_TASK_TYPES.SANITIZATION]:((Ls=ss[MAINTENANCE_TASK_TYPES.SANITIZATION])==null?void 0:Ls.frequency)==="custom_days",[MAINTENANCE_TASK_TYPES.DEFROSTING]:!1})):(console.log(" Reset per nuovo punto di conservazione"),ns({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.SANITIZATION]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]},[MAINTENANCE_TASK_TYPES.DEFROSTING]:{frequency:"",selected_days:[],assigned_role:"",assigned_category:"",assigned_staff_ids:[]}}),os({[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:!1,[MAINTENANCE_TASK_TYPES.SANITIZATION]:!1,[MAINTENANCE_TASK_TYPES.DEFROSTING]:!1})),ps({}))},[ts,_e,e,ss]);const ys=(zs,Ls,Bs)=>{console.log(` updateMaintenanceField: ${zs}.${Ls} = ${Bs}`),ns(Gs=>{const As={...Gs[zs],[Ls]:Bs};return Ls==="frequency"?As.selected_days=[]:Ls==="assigned_role"?(As.assigned_category="",As.assigned_staff_ids=[]):Ls==="assigned_category"&&(As.assigned_staff_ids=[]),{...Gs,[zs]:As}})},gs=(zs,Ls)=>{ns(Bs=>{const Gs=Bs[zs].assigned_staff_ids||[],bs=Gs.includes(Ls)?Gs.filter(As=>As!==Ls):[...Gs,Ls];return{...Bs,[zs]:{...Bs[zs],assigned_staff_ids:bs}}})},vs=zs=>{os(Ls=>({...Ls,[zs]:!Ls[zs]})),ns(Ls=>({...Ls,[zs]:{...Ls[zs],frequency:"",selected_days:[]}}))},ds=(zs,Ls)=>{ns(Bs=>{const Gs=Bs[zs].selected_days||[],As=Gs.includes(Ls)?Gs.filter(ks=>ks!==Ls):[...Gs,Ls];return{...Bs,[zs]:{...Bs[zs],selected_days:As,frequency:As.length>0?"custom_days":""}}})},fs=zs=>{const Ls=rs[zs],Bs=Ls.assigned_role,Gs=Ls.assigned_category;if(!Bs&&!Gs)return console.log(" getFilteredStaff Debug: Mostrando tutti i dipendenti"),e;const bs=getAvailableStaff(e,Bs,Gs);return console.log(" getFilteredStaff Debug:",{taskType:zs,role:Bs,category:Gs,filteredCount:bs.length,filtered:bs.map(As=>`${As.name} ${As.surname}`)}),bs},Es=()=>{const zs={};return Object.values(MAINTENANCE_TASK_TYPES).forEach(Ls=>{const Bs=rs[Ls],Gs=validateMaintenanceConfig(Ls,Bs);Gs.isValid||(zs[Ls]=Gs.errors)}),ps(zs),Object.keys(zs).length===0},Os=async()=>{if(Es()){cs(!0);try{const zs=Object.values(MAINTENANCE_TASK_TYPES).map(Ls=>{const Bs=rs[Ls];return{id:`${_e.id}_${Ls}_${Date.now()}`,conservation_point_id:_e.id,conservation_point_name:_e.name,task_type:Ls,task_name:getTaskTypeDisplayName(Ls),frequency:Bs.frequency,selected_days:Bs.selected_days||[],assigned_role:Bs.assigned_role,assigned_category:Bs.assigned_category,assigned_staff_ids:Bs.assigned_staff_ids||[],is_active:!0,created_at:new Date().toISOString()}});await St(zs)}catch(zs){console.error("Errore durante il salvataggio:",zs)}finally{cs(!1)}}},Hs=zs=>{switch(zs){case MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING:return jsxRuntimeExports.jsx(Thermometer,{className:"w-5 h-5 text-blue-500"});case MAINTENANCE_TASK_TYPES.SANITIZATION:return jsxRuntimeExports.jsx(Droplets,{className:"w-5 h-5 text-green-500"});case MAINTENANCE_TASK_TYPES.DEFROSTING:return jsxRuntimeExports.jsx(Snowflake,{className:"w-5 h-5 text-cyan-500"});default:return jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-gray-500"})}},Qs=zs=>{const Ls=rs[zs],Bs=us[zs]||[],Gs=getFrequenciesForTaskType(zs),bs=getAvailableRoles(e),As=getAvailableCategories(e,Ls.assigned_role),ks=fs(zs);return jsxRuntimeExports.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Hs(zs),jsxRuntimeExports.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:getTaskTypeDisplayName(zs)}),Bs.length===0&&Ls.frequency&&Ls.assigned_role&&Ls.assigned_category&&jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-green-500"})]}),Bs.length>0&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-red-500"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-700 font-medium",children:"Configurazione incompleta"})]}),jsxRuntimeExports.jsx("ul",{className:"mt-2 text-sm text-red-600",children:Bs.map(($s,qs)=>jsxRuntimeExports.jsxs("li",{children:[" ",$s]},qs))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${zs}-frequency`,className:"text-sm font-medium text-gray-700",children:"Frequenza *"}),(zs===MAINTENANCE_TASK_TYPES.SANITIZATION||zs===MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING)&&jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",id:`${zs}-custom-days`,checked:is[zs],onChange:()=>vs(zs),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsx("label",{htmlFor:`${zs}-custom-days`,className:"cursor-pointer",children:"Seleziona giorni della settimana"})]})]}),is[zs]?jsxRuntimeExports.jsxs("div",{className:"mt-1 border border-gray-300 rounded-md p-3 bg-gray-50",children:[jsxRuntimeExports.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Seleziona i giorni:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:WEEKDAYS.map($s=>{var qs;return jsxRuntimeExports.jsxs("label",{className:"flex items-center space-x-2 text-base",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((qs=Ls.selected_days)==null?void 0:qs.includes($s.value))||!1,onChange:()=>ds(zs,$s.value),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsx("span",{className:"text-gray-700 font-medium",children:$s.label})]},$s.value)})}),Ls.selected_days&&Ls.selected_days.length>0&&jsxRuntimeExports.jsxs("div",{className:"mt-2 text-xs text-blue-600",children:["Giorni selezionati: ",Ls.selected_days.length]})]}):jsxRuntimeExports.jsxs("select",{id:`${zs}-frequency`,value:Ls.frequency,onChange:$s=>ys(zs,"frequency",$s.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona frequenza"}),Gs.map($s=>jsxRuntimeExports.jsx("option",{value:$s.value,children:$s.label},$s.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${zs}-role`,className:"text-sm font-medium text-gray-700",children:"Ruolo *"}),jsxRuntimeExports.jsxs("select",{id:`${zs}-role`,value:Ls.assigned_role,onChange:$s=>ys(zs,"assigned_role",$s.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona ruolo"}),bs.map($s=>jsxRuntimeExports.jsx("option",{value:$s.value,children:$s.label},$s.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:`${zs}-category`,className:"text-sm font-medium text-gray-700",children:"Categoria (Opzionale)"}),jsxRuntimeExports.jsxs("select",{id:`${zs}-category`,value:Ls.assigned_category,onChange:$s=>ys(zs,"assigned_category",$s.target.value),disabled:!Ls.assigned_role,className:`mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${Ls.assigned_role?"":"bg-gray-100 cursor-not-allowed"}`,children:[jsxRuntimeExports.jsx("option",{value:"",children:Ls.assigned_role?"Seleziona categoria":"Prima seleziona ruolo"}),As.map($s=>jsxRuntimeExports.jsx("option",{value:$s.value,children:$s.label},$s.value))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{className:"text-sm font-medium text-gray-700",children:"Dipendenti Specifici *"}),ks.length>0?jsxRuntimeExports.jsx("div",{className:"mt-2 max-h-32 overflow-y-auto border border-gray-200 rounded-md p-2 bg-white",children:ks.map($s=>{var qs;return jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 p-1 hover:bg-gray-50 rounded",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:((qs=Ls.assigned_staff_ids)==null?void 0:qs.includes($s.id))||!1,onChange:()=>gs(zs,$s.id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-700",children:[$s.name," ",$s.surname]})]},$s.id)})}):jsxRuntimeExports.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:Ls.assigned_role&&Ls.assigned_category?"Nessun dipendente trovato per la combinazione ruolo/categoria selezionata":"Seleziona ruolo e categoria per filtrare i dipendenti, oppure seleziona direttamente i dipendenti"})})]})]})]},zs)};return ts?jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Configura Manutenzione"}),jsxRuntimeExports.jsxs("p",{className:"text-2xl text-gray-700",children:["Punto di Conservazione: ",jsxRuntimeExports.jsx("span",{className:"font-bold text-blue-600",children:_e==null?void 0:_e.name})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute top-4 right-4",children:jsxRuntimeExports.jsx(Button,{onClick:es,variant:"outline",size:"sm",className:"p-2",children:jsxRuntimeExports.jsx(X$2,{className:"w-4 h-4"})})}),jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[Qs(MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING),Qs(MAINTENANCE_TASK_TYPES.SANITIZATION),Qs(MAINTENANCE_TASK_TYPES.DEFROSTING),jsxRuntimeExports.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-blue-600"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-blue-800",children:"Manutenzione Obbligatoria"})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-blue-700",children:["Configura le tre attivit di manutenzione obbligatorie per questo punto di conservazione. Ogni attivit deve avere ",jsxRuntimeExports.jsx("strong",{children:"frequenza"})," e ",jsxRuntimeExports.jsx("strong",{children:"almeno uno tra Ruolo o Dipendenti Specifici"})," assegnati.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("span",{className:"text-xs text-blue-600 mt-1 block",children:" Per Sanificazione e Rilevamento Temperatura puoi selezionare giorni specifici della settimana."})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200 mt-6",children:[jsxRuntimeExports.jsx(Button,{onClick:Os,disabled:xs,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3",children:xs?"Salvataggio...":"Salva Manutenzione"}),jsxRuntimeExports.jsx(Button,{onClick:es,variant:"outline",className:"flex-1 py-3",disabled:xs,children:"Annulla"})]})]})}):null},TasksStep=({formData:_e,setFormData:e,currentStep:St,validateStep:es,confirmStep:ts,markStepAsUnconfirmed:ss,isStepConfirmed:rs,canConfirmStep:ns})=>{var xr,Tr,Dr,zr;const[is,os]=reactExports.useState([]),[us,ps]=reactExports.useState(!1),[xs,cs]=reactExports.useState(null),[ys,gs]=reactExports.useState({}),[vs,ds]=reactExports.useState({name:"",assignedRole:"",assignedEmployee:"",frequency:""}),[fs,Es]=reactExports.useState(!1),[Os,Hs]=reactExports.useState(null),[Qs,zs]=reactExports.useState(null),[Ls,Bs]=reactExports.useState([]),[Gs,bs]=reactExports.useState(!1);reactExports.useEffect(()=>{var Nr,cr;console.log(" TasksStep: Caricamento dati..."),console.log(" formData.tasks:",_e.tasks);const or=((Nr=_e.tasks)==null?void 0:Nr.list)||((cr=_e.tasks)==null?void 0:cr.tasksList)||[];or.length>0?(console.log(" Caricando tasks:",or),os(or)):console.log(" Nessun task trovato in formData.tasks")},[_e.tasks]);const As=async()=>{bs(!0);try{const or=await supabaseService.getMaintenanceTasks();if(or.success){const Nr=or.data.reduce((cr,Ns)=>{const jr=Ns.conservation_point_id;return cr[jr]||(cr[jr]={conservation_point_id:jr,conservation_point_name:Ns.conservation_point_name,tasks:[]}),cr[jr].tasks.push(Ns),cr},{});Bs(Object.values(Nr)),console.log(" Manutenzioni caricate:",Object.values(Nr))}}catch(or){console.error(" Errore nel caricamento manutenzioni:",or)}finally{bs(!1)}};reactExports.useEffect(()=>{As()},[]),reactExports.useEffect(()=>{if(us&&(console.log(" Form aperto, controllando dati disponibili..."),console.log(" formData.tasks:",_e.tasks),console.log(" tasks locali:",is),is.length>0)){const or=is[0];console.log(" Precompilando con task locale:",or),ds({name:or.name||"",assignedRole:or.assignedRole||"",assignedEmployee:or.assignedEmployee||"",frequency:or.frequency||""})}},[us]);const ks=((xr=_e.conservation)==null?void 0:xr.count)||0,$s=is.filter(or=>{const Nr=or.name.toLowerCase(),cr=Nr.includes("rilevamento temperature")||Nr.includes("rilevamento temperatura")||Nr.includes("temperature")||Nr.includes("temperatura")||Nr.includes("monitoraggio");return console.log(` Task "${or.name}": isTemperatureTask=${cr}`),cr}).length;console.log(` Temperature tasks count: ${$s}, Total tasks: ${is.length}`),console.log(" All tasks:",is);const qs=["Giornalmente","Settimanalmente","Mensilmente","Annualmente"],Cs=()=>{ds({name:"",assignedRole:"",assignedEmployee:"",frequency:""}),cs(null)},Us=or=>or?`Rilevamento temperatura ${or.name}`:"Rilevamento temperatura",Ps=()=>{var Nr;const or=((Nr=_e.conservation)==null?void 0:Nr.points)||[];return console.log(" Conservation points:",or),or},er=or=>{if(Ls.some(dr=>dr.conservation_point_id===or.id&&dr.tasks.length>=3))return console.log(` Point ${or.id} (${or.name}) has maintenance tasks in database`),!0;const cr=is.filter(dr=>{const lr=dr.name.toLowerCase(),_r=lr.includes(or.id.toString()),Ar=lr.includes(or.name.toLowerCase());return _r||Ar}),Ns=cr.some(dr=>{const lr=dr.name.toLowerCase();return lr.includes("rilevamento temperature")||lr.includes("rilevamento temperatura")||lr.includes("temperature")||lr.includes("temperatura")||lr.includes("monitoraggio")}),jr=cr.some(dr=>{const lr=dr.name.toLowerCase();return lr.includes("sanificazione")||lr.includes("sanitizzazione")||lr.includes("pulizia")}),wr=cr.some(dr=>{const lr=dr.name.toLowerCase();return lr.includes("sbrinamento")||lr.includes("sbrinare")||lr.includes("defrosting")});return console.log(` Checking point ${or.id} (${or.name}): hasTemperatureTask=${Ns}, hasSanitizationTask=${jr}, hasDefrostingTask=${wr}`),Ns&&jr&&wr};reactExports.useEffect(()=>{if(us){const Nr=Ps().filter(cr=>!er(cr));if(Nr.length>0){const cr=Nr[0];ds(Ns=>({...Ns,name:Us(cr)}))}}},[us]);const tr=()=>{if(vs.name&&vs.assignedRole&&vs.frequency){const or={id:Date.now(),name:vs.name,assignedRole:vs.assignedRole,assignedEmployee:vs.assignedEmployee||null,frequency:vs.frequency};console.log(" Aggiungendo nuova attivit:",or),os(Nr=>{const cr=[...Nr,or];return console.log(" Lista attivit aggiornata:",cr),cr}),Cs(),ps(!1)}},vr=or=>{os(Nr=>Nr.filter(cr=>cr.id!==or))},ws=async or=>{try{console.log(" Salvataggio manutenzioni:",or);const Nr=await supabaseService.saveMaintenanceTasks(or);Nr.success?(console.log(" Manutenzioni salvate con successo"),await As(),Es(!1),Hs(null),zs(null),alert("Manutenzioni configurate con successo!")):(console.error(" Errore nel salvataggio:",Nr.error),alert("Errore nel salvataggio delle manutenzioni"))}catch(Nr){console.error(" Errore durante il salvataggio:",Nr),alert("Errore durante il salvataggio delle manutenzioni")}},Vs=()=>{Es(!1),Hs(null),zs(null)},Ys=or=>{Hs({id:or.conservation_point_id,name:or.conservation_point_name});const Nr={[MAINTENANCE_TASK_TYPES.TEMPERATURE_MONITORING]:{},[MAINTENANCE_TASK_TYPES.SANITIZATION]:{},[MAINTENANCE_TASK_TYPES.DEFROSTING]:{}};or.tasks.forEach(cr=>{const Ns=cr.task_type;Nr[Ns]&&(Nr[Ns]={frequency:cr.frequency,selected_days:cr.selected_days||[],assigned_role:cr.assigned_role||"",assigned_category:cr.assigned_category||"",assigned_staff_ids:cr.assigned_staff_ids||[]})}),zs(Nr),Es(!0)},Ws=async or=>{const Nr=`Sei sicuro di voler eliminare tutte le manutenzioni per "${or.conservation_point_name}"?

Questa azione non pu essere annullata.`;if(window.confirm(Nr))try{const cr=await supabaseService.deleteMaintenanceTasksByConservationPoint(or.conservation_point_id);cr.success?(console.log(" Manutenzioni eliminate con successo"),await As(),alert("Manutenzioni eliminate con successo!")):(console.error(" Errore nell'eliminazione:",cr.error),alert("Errore nell'eliminazione delle manutenzioni"))}catch(cr){console.error(" Errore durante l'eliminazione:",cr),alert("Errore durante l'eliminazione delle manutenzioni")}},sr=(or,Nr=[])=>{switch(or){case"daily":return"Giornalmente";case"weekly":return"Settimanale";case"monthly":return"Mensile";case"semiannual":return"Semestrale";case"annual":return"Annuale";case"custom_days":if(Nr&&Nr.length>0){const cr={monday:"Luned",tuesday:"Marted",wednesday:"Mercoled",thursday:"Gioved",friday:"Venerd",saturday:"Sabato",sunday:"Domenica"};return Nr.map(Ns=>cr[Ns]).join(", ")}return"Giorni specifici";default:return or}},nr=or=>{var Ns;return!or||or.length===0?"":(((Ns=_e.staff)==null?void 0:Ns.staffMembers)||[]).filter(jr=>or.includes(jr.id)).map(jr=>`${jr.name} ${jr.surname}`).join(", ")},pr=is.length>0&&is.every(or=>or.name&&or.assignedRole&&or.frequency)&&$s>=ks;return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mansioni e Attivit"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Assegna compiti al personale"})]}),(()=>{const or=Ps(),Nr=or.filter(cr=>!er(cr));return console.log(" Missing tasks check:",{conservationPoints:or.map(cr=>({id:cr.id,name:cr.name})),missingTasks:Nr.map(cr=>({id:cr.id,name:cr.name})),allTasks:is.map(cr=>({name:cr.name,assignedRole:cr.assignedRole}))}),Nr.length>0?jsxRuntimeExports.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-5 w-5 text-yellow-600"}),jsxRuntimeExports.jsx("h4",{className:"font-medium text-yellow-900",children:"Punti di Conservazione senza Mansioni"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-yellow-800 mb-3",children:"I seguenti punti di conservazione necessitano delle 3 mansioni obbligatorie (Rilevamento Temperatura, Sanificazione, Sbrinamento):"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Nr.map(cr=>jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-100 rounded",children:[jsxRuntimeExports.jsx("span",{className:"text-sm font-medium",children:cr.name}),jsxRuntimeExports.jsx(Button,{onClick:()=>{Hs(cr),Es(!0)},size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:"Aggiungi Mansione"})]},cr.id))})]}):null})(),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Attivit e Mansioni"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>ps(!0),variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"Aggiungi Nuova Attivit"]})]}),Ls.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-3 mb-6",children:Ls.map(or=>jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4 bg-yellow-50 border-yellow-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("h4",{className:"text-xl font-bold text-yellow-900 mb-4",children:["Attivit di Manutenzione (",or.conservation_point_name,")"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:or.tasks.map(Nr=>jsxRuntimeExports.jsxs("div",{className:"text-base",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-gray-800 mb-2",children:[Nr.task_name,":"]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-gray-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Frequenza:"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:sr(Nr.frequency,Nr.selected_days)})]}),Nr.assigned_role&&jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Ruolo:"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:Nr.assigned_role})]}),Nr.assigned_category&&jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Categoria:"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:Nr.assigned_category})]}),Nr.assigned_staff_ids&&Nr.assigned_staff_ids.length>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Dipendenti:"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:nr(Nr.assigned_staff_ids)})]})]})]},Nr.id))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Ys(or),variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Ws(or),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(Trash2,{className:"h-4 w-4"})})]})]})},or.conservation_point_id))}),is.length===0&&Ls.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(ClipboardList,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:"Nessuna attivit configurata"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Nuova Attivit" per iniziare'})]}):is.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:is.map(or=>jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium",children:or.name}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:sr(or.frequency)})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-600",children:[jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Assegnato a:"})," ",or.assignedRole,or.assignedEmployee&&jsxRuntimeExports.jsxs("span",{className:"ml-2 text-blue-600",children:["(",or.assignedEmployee,")"]})]}),or.name.toLowerCase().includes("rilevamento temperature")&&jsxRuntimeExports.jsx("div",{className:"mt-2 text-sm text-blue-600",children:" Attivit di monitoraggio temperature"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:jsxRuntimeExports.jsx(Button,{onClick:()=>vr(or.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})})]})},or.id))})]}),us&&jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Aggiungi Nuova Attivit"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-2",children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Attivit *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:vs.name,onChange:or=>ds(Nr=>({...Nr,name:or.target.value})),placeholder:Us(),className:"mt-1"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Suggerimento: ",Us()]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"assignedRole",children:"Assegna rilevamento temperature a: *"}),jsxRuntimeExports.jsxs("select",{id:"assignedRole",value:vs.assignedRole,onChange:or=>ds(Nr=>({...Nr,assignedRole:or.target.value,assignedEmployee:""})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona categoria"}),jsxRuntimeExports.jsx("option",{value:"Amministratore",children:"Amministratore"}),jsxRuntimeExports.jsx("option",{value:"Cuochi",children:"Cuochi"}),jsxRuntimeExports.jsx("option",{value:"Banconisti",children:"Banconisti"}),jsxRuntimeExports.jsx("option",{value:"Camerieri",children:"Camerieri"}),jsxRuntimeExports.jsx("option",{value:"Responsabile",children:"Responsabile"}),jsxRuntimeExports.jsx("option",{value:"Dipendente",children:"Dipendente"})]}),!vs.assignedRole&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-500 mt-1",children:" Seleziona una categoria per procedere"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"assignedEmployee",children:"Dipendente Specifico (Opzionale)"}),jsxRuntimeExports.jsxs("select",{id:"assignedEmployee",value:vs.assignedEmployee,onChange:or=>ds(Nr=>({...Nr,assignedEmployee:or.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!vs.assignedRole,children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona dipendente specifico"}),(Dr=(Tr=_e.staff)==null?void 0:Tr.staffMembers)==null?void 0:Dr.filter(or=>{var Nr;return["Responsabile","Dipendente","Amministratore"].includes(vs.assignedRole)?or.role===vs.assignedRole:((Nr=or.categories)==null?void 0:Nr.includes(vs.assignedRole))||or.primaryCategory===vs.assignedRole}).map(or=>{var Nr;return jsxRuntimeExports.jsxs("option",{value:or.fullName||or.name,children:[or.fullName||or.name," - ",or.role," (",or.primaryCategory||((Nr=or.categories)==null?void 0:Nr[0]),")"]},or.id)})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"frequency",children:"Frequenza *"}),jsxRuntimeExports.jsxs("select",{id:"frequency",value:vs.frequency,onChange:or=>ds(Nr=>({...Nr,frequency:or.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona frequenza"}),qs.map(or=>jsxRuntimeExports.jsx("option",{value:or,children:or},or))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{ps(!1),Cs()},children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:tr,disabled:!vs.name||!vs.assignedRole||!vs.frequency,children:"Aggiungi Attivit"})]})]}),jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${pr?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${pr?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:is.length}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("p",{className:`font-medium ${pr?"text-green-900":"text-yellow-900"}`,children:["Attivit configurate: ",is.length]})})]}),jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg ${$s>=ks?"bg-green-100":"bg-red-100"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:`h-4 w-4 ${$s>=ks?"text-green-600":"text-red-600"}`}),jsxRuntimeExports.jsx("span",{className:`font-medium ${$s>=ks?"text-green-900":"text-red-900"}`,children:"Validazione Critica: Attivit Manutenzione Complete"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-2 text-sm",children:[jsxRuntimeExports.jsxs("p",{className:$s>=ks?"text-green-800":"text-red-800",children:[jsxRuntimeExports.jsx("strong",{children:"Punti di conservazione:"})," ",ks," |",jsxRuntimeExports.jsx("strong",{children:" Attivit temperature:"})," ",$s]}),jsxRuntimeExports.jsx("p",{className:$s>=ks?"text-green-800":"text-red-800",children:$s>=ks?" Requisito soddisfatto! Ogni punto ha le 3 attivit obbligatorie (Rilevamento Temperatura, Sanificazione, Sbrinamento).":" Devi creare le 3 attivit obbligatorie (Rilevamento Temperatura, Sanificazione, Sbrinamento) per ogni punto di conservazione."})]})]})]})}),Object.keys(ys).length>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-red-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(ys).map(([or,Nr])=>jsxRuntimeExports.jsxs("p",{children:[" ",Nr]},or))]})}),jsxRuntimeExports.jsx(MaintenanceForm,{conservationPoint:Os,staffMembers:((zr=_e.staff)==null?void 0:zr.staffMembers)||[],onSave:ws,onCancel:Vs,isOpen:fs,existingData:Qs})]})},InventoryStep=({formData:_e,setFormData:e,currentStep:St,validateStep:es,confirmStep:ts,markStepAsUnconfirmed:ss,isStepConfirmed:rs,canConfirmStep:ns})=>{var ks,$s;const[is,os]=reactExports.useState([]),[us,ps]=reactExports.useState(!1),[xs,cs]=reactExports.useState(null),[ys,gs]=reactExports.useState({}),[vs,ds]=reactExports.useState({name:"",type:"",expiryDate:"",position:"",allergens:[]}),fs=()=>{var qs;return(qs=_e.conservation)!=null&&qs.points&&_e.conservation.points.length>0?_e.conservation.points:[{id:1,name:"Frigo A",minTemp:2,maxTemp:4},{id:2,name:"Freezer",minTemp:-18,maxTemp:-15},{id:3,name:"Abbattitore",minTemp:0,maxTemp:3}]};reactExports.useEffect(()=>{var Cs,Us;let qs=[];if((Cs=_e.products)!=null&&Cs.productsList&&_e.products.productsList.length>0?qs=_e.products.productsList:(Us=_e.inventory)!=null&&Us.products&&_e.inventory.products.length>0&&(qs=_e.inventory.products),qs.length>0){const Ps=qs.map(er=>!er.compliance&&er.type&&er.position?{...er,compliance:zs(er.type,er.position)}:er);os(Ps)}},[]);const Es=reactExports.useCallback(()=>{console.log(" InventoryStep: updateFormData called with products:",is),e(qs=>{const Cs={...qs,products:{productsList:is,count:is.length}};return console.log(" InventoryStep: updatedFormData:",Cs),Cs})},[is,e]);reactExports.useEffect(()=>{var qs;if(is.length>0&&((qs=_e.conservation)!=null&&qs.points)&&is.some(Us=>Us.type&&Us.position&&!Us.compliance)){const Us=is.map(Ps=>Ps.type&&Ps.position&&!Ps.compliance?{...Ps,compliance:zs(Ps.type,Ps.position)}:Ps);os(Us)}},[(ks=_e.conservation)==null?void 0:ks.points]);const Os=["Latticini e Formaggi","Carni Fresche","Pesce e Frutti di Mare","Verdure e Ortaggi","Frutta","Prodotti da Forno","Bevande","Altro"],Hs=[{id:"glutine",name:"Glutine",icon:""},{id:"latte",name:"Latte",icon:""},{id:"uova",name:"Uova",icon:""},{id:"pesce",name:"Pesce",icon:""},{id:"crostacei",name:"Crostacei",icon:""},{id:"frutta_secca",name:"Frutta a guscio",icon:""},{id:"arachidi",name:"Arachidi",icon:""},{id:"soia",name:"Soia",icon:""},{id:"sedano",name:"Sedano",icon:""},{id:"senape",name:"Senape",icon:""},{id:"sesamo",name:"Sesamo",icon:""},{id:"solfiti",name:"Solfiti",icon:""},{id:"lupini",name:"Lupini",icon:""},{id:"molluschi",name:"Molluschi",icon:""}],Qs=()=>{ds({name:"",type:"",expiryDate:"",position:"",allergens:[]}),cs(null)},zs=reactExports.useCallback((qs,Cs)=>{const Us=fs().find(Ps=>Ps.id===parseInt(Cs)||Ps.name===Cs);return Us?qs==="Latticini e Formaggi"&&(Us.minTemp>5||Us.maxTemp>5)?{compliant:!1,message:"Temperatura troppo alta per latticini"}:qs==="Carni Fresche"&&(Us.minTemp>7||Us.maxTemp>7)?{compliant:!1,message:"Temperatura troppo alta per carni fresche"}:qs==="Pesce e Frutti di Mare"&&(Us.minTemp>2||Us.maxTemp>2)?{compliant:!1,message:"Temperatura troppo alta per pesce"}:{compliant:!0,message:"Posizione conforme HACCP per questo tipo di prodotto"}:{compliant:!1,message:"Posizione non valida"}},[($s=_e.conservation)==null?void 0:$s.points]),Ls=()=>{if(vs.name&&vs.type&&vs.expiryDate&&vs.position){const qs=zs(vs.type,vs.position);if(xs)os(Cs=>{const Us=Cs.map(Ps=>Ps.id===xs?{...Ps,...vs,compliance:qs}:Ps);return setTimeout(()=>Es(),0),Us});else{const Cs={id:Date.now(),...vs,compliance:qs};os(Us=>{const Ps=[...Us,Cs];return setTimeout(()=>Es(),0),Ps})}Qs(),ps(!1)}},Bs=qs=>{os(Cs=>{const Us=Cs.filter(Ps=>Ps.id!==qs);return setTimeout(()=>Es(),0),Us})},Gs=qs=>{const Cs=is.find(Us=>Us.id===qs);Cs&&(ds({name:Cs.name,type:Cs.type,expiryDate:Cs.expiryDate,position:Cs.position,allergens:Cs.allergens||[]}),cs(qs),ps(!0))},bs=qs=>{ds(Cs=>({...Cs,allergens:Cs.allergens.includes(qs)?Cs.allergens.filter(Us=>Us!==qs):[...Cs.allergens,qs]}))},As=is.length>0&&is.every(qs=>qs.name&&qs.type&&qs.expiryDate&&qs.position);return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Inventario Prodotti"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Gestisci prodotti e allergeni"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900",children:"Prodotti nell'Inventario"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{Qs(),ps(!0)},variant:"outline",size:"sm",children:[jsxRuntimeExports.jsx(Plus,{className:"h-4 w-4 mr-1"}),"Aggiungi Prodotto"]})]}),is.length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-8 text-gray-500",children:[jsxRuntimeExports.jsx(Package,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),jsxRuntimeExports.jsx("p",{children:"Nessun prodotto registrato"}),jsxRuntimeExports.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Prodotto" per iniziare'})]}):jsxRuntimeExports.jsx("div",{className:"space-y-3",children:is.map(qs=>{var Cs,Us,Ps;return jsxRuntimeExports.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[jsxRuntimeExports.jsx("h5",{className:"font-medium",children:qs.name}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:qs.type})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Scadenza:"}),jsxRuntimeExports.jsx("p",{className:"font-medium",children:qs.expiryDate})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Posizione:"}),jsxRuntimeExports.jsx("p",{className:"font-medium",children:qs.position})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"Allergeni:"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:qs.allergens.map(er=>{const tr=Hs.find(vr=>vr.id===er);return tr?jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs",children:[tr.icon," ",tr.name]},er):null})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-600",children:"HACCP:"}),jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1 ${(Cs=qs.compliance)!=null&&Cs.compliant?"text-green-600":"text-red-600"}`,children:[(Us=qs.compliance)!=null&&Us.compliant?"":"",jsxRuntimeExports.jsx("span",{className:"text-xs",children:((Ps=qs.compliance)==null?void 0:Ps.message)||"Non validato"})]})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx(Button,{onClick:()=>Gs(qs.id),variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",title:"Modifica prodotto",children:jsxRuntimeExports.jsx(PenSquare,{className:"h-4 w-4"})}),jsxRuntimeExports.jsx(Button,{onClick:()=>Bs(qs.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",title:"Elimina prodotto",children:jsxRuntimeExports.jsx(X$2,{className:"h-4 w-4"})})]})]})},qs.id)})})]}),us&&jsxRuntimeExports.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:xs?"Modifica Prodotto":"Aggiungi Nuovo Prodotto"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"name",children:"Nome Prodotto *"}),jsxRuntimeExports.jsx(Input,{id:"name",value:vs.name,onChange:qs=>ds(Cs=>({...Cs,name:qs.target.value})),placeholder:"Es. Acqua nat 0,5",className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"type",children:"Tipologia *"}),jsxRuntimeExports.jsxs("select",{id:"type",value:vs.type,onChange:qs=>ds(Cs=>({...Cs,type:qs.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona tipologia"}),Os.map(qs=>jsxRuntimeExports.jsx("option",{value:qs,children:qs},qs))]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"expiryDate",children:"Data di Scadenza *"}),jsxRuntimeExports.jsx(Input,{id:"expiryDate",type:"date",value:vs.expiryDate,onChange:qs=>ds(Cs=>({...Cs,expiryDate:qs.target.value})),className:"mt-1"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx(Label,{htmlFor:"position",children:"Posizione *"}),jsxRuntimeExports.jsxs("select",{id:"position",value:vs.position,onChange:qs=>ds(Cs=>({...Cs,position:qs.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Seleziona posizione"}),fs().map(qs=>jsxRuntimeExports.jsxs("option",{value:qs.id,children:[qs.name," (",qs.minTemp,"C - ",qs.maxTemp,"C)"]},qs.id))]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4",children:[jsxRuntimeExports.jsx(Label,{children:"Allergeni"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:Hs.map(qs=>jsxRuntimeExports.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:vs.allergens.includes(qs.id),onChange:()=>bs(qs.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),jsxRuntimeExports.jsxs("span",{className:"text-sm",children:[qs.icon," ",qs.name]})]},qs.id))})]}),vs.type&&vs.position&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const qs=zs(vs.type,vs.position);return jsxRuntimeExports.jsxs("div",{className:`mt-2 flex items-center gap-2 ${qs.compliant?"text-green-600":"text-red-600"}`,children:[qs.compliant?"":"",jsxRuntimeExports.jsx("span",{className:"text-sm",children:qs.message})]})})()]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:()=>{ps(!1),Qs()},children:"Annulla"}),jsxRuntimeExports.jsx(Button,{onClick:Ls,disabled:!vs.name||!vs.type||!vs.expiryDate||!vs.position,children:xs?"Salva Modifiche":"Aggiungi Prodotto"})]})]}),jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg ${As?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${As?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:is.length}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:`font-medium ${As?"text-green-900":"text-yellow-900"}`,children:["Prodotti registrati: ",is.length]}),jsxRuntimeExports.jsx("p",{className:`text-sm ${As?"text-green-800":"text-yellow-800"}`,children:As?" Tutti i prodotti hanno i campi obbligatori compilati!":" Devi registrare almeno un prodotto con tutti i campi obbligatori."})]})]})}),Object.keys(ys).length>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"text-sm text-red-800",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(ys).map(([qs,Cs])=>jsxRuntimeExports.jsxs("p",{children:[" ",Cs]},qs))]})})]})},validateHACCPCompliance=(_e,e)=>{const St=parseFloat(_e);if(isNaN(St))return{compliant:!1,message:"Temperatura non valida"};if(e.length>0){const es=CONSERVATION_POINT_RULES.tolerance;let ts=!1;for(let ns=0;ns<e.length;ns++){for(let is=ns+1;is<e.length;is++){const os=CONSERVATION_POINT_RULES.categories.find(ps=>ps.id===e[ns]),us=CONSERVATION_POINT_RULES.categories.find(ps=>ps.id===e[is]);if(os&&us){const ps=os.minTemp-es,xs=os.maxTemp+es,cs=us.minTemp-es,ys=us.maxTemp+es;if(xs<cs||ys<ps){ts=!0;break}}}if(ts)break}if(ts)return{compliant:!1,message:"Categorie incompatibili selezionate"};let ss=!0,rs=!0;for(const ns of e){const is=CONSERVATION_POINT_RULES.categories.find(os=>os.id===ns);if(is){const os=St>=is.minTemp&&St<=is.maxTemp,us=is.minTemp-es,ps=is.maxTemp+es,xs=St>=us&&St<=ps;os||(ss=!1),xs||(rs=!1)}}return ss?{compliant:!0,message:"Conforme HACCP"}:rs?{compliant:!0,message:"Temperatura impostata entro i limiti accettabili (0,5C di differenza)"}:{compliant:!1,message:"Fuori range HACCP per le categorie selezionate"}}return{compliant:!0,message:"Conforme HACCP"}},ONBOARDING_STEPS=[{id:"business",title:"Informazioni Attivit",description:"Configura i dati base della tua attivit",icon:Building2,component:BusinessInfoStep},{id:"departments",title:"Reparti",description:"Organizza la struttura operativa",icon:Building2,component:DepartmentsStep},{id:"staff",title:"Staff e Ruoli",description:"Registra il personale e assegna responsabilit",icon:Users,component:StaffStep},{id:"conservation",title:"Punti di Conservazione",description:"Configura frigoriferi e aree di stoccaggio",icon:Thermometer,component:ConservationStep},{id:"tasks",title:"Mansioni e Attivit",description:"Assegna compiti al personale",icon:ClipboardList,component:TasksStep},{id:"inventory",title:"Inventario Prodotti",description:"Gestisci prodotti e allergeni",icon:Package,component:InventoryStep}];function OnboardingWizard({isOpen:_e,onClose:e,onComplete:St}){const[es,ts]=reactExports.useState(0),ss=Bs=>{console.log(` setCurrentStep chiamato: ${es}  ${Bs}`),console.log(" Stack trace:",new Error().stack),ts(Bs)},[rs,ns]=reactExports.useState(new Set),[is,os]=reactExports.useState(new Set),[us,ps]=reactExports.useState({business:{},departments:{},staff:{},conservation:{},tasks:{},inventory:{}}),xs=(Bs,Gs)=>{var As,ks,$s,qs,Cs,Us,Ps,er,tr,vr,ws,Vs,Ys,Ws,sr,nr,pr,xr,Tr,Dr,zr,or,Nr,cr;const bs={};if(Bs===0&&((ks=(As=Gs.business)==null?void 0:As.companyName)!=null&&ks.trim()||(bs.businessName="Il nome attivit  obbligatorio"),(qs=($s=Gs.business)==null?void 0:$s.address)!=null&&qs.trim()||(bs.address="L'indirizzo  obbligatorio"),(Us=(Cs=Gs.business)==null?void 0:Cs.email)!=null&&Us.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Gs.business.email)||(bs.email="Inserisci una email valida (formato: nome@dominio.com)"):bs.email="L'email  obbligatoria",(er=(Ps=Gs.business)==null?void 0:Ps.companyName)!=null&&er.trim()&&Gs.business.companyName.trim().length<3&&(bs.businessName="Il nome attivit deve essere di almeno 3 caratteri"),(vr=(tr=Gs.business)==null?void 0:tr.address)!=null&&vr.trim()&&Gs.business.address.trim().length<10&&(bs.address="L'indirizzo deve essere di almeno 10 caratteri"),(Vs=(ws=Gs.business)==null?void 0:ws.companyName)!=null&&Vs.trim()&&Gs.business.companyName.trim().toLowerCase().length<3&&(bs.businessName="Il nome attivit deve essere di almeno 3 caratteri"),!((Ws=(Ys=Gs.business)==null?void 0:Ys.phone)!=null&&Ws.trim())&&!((nr=(sr=Gs.business)==null?void 0:sr.email)!=null&&nr.trim())&&(bs.contactInfo="Devi fornire almeno un metodo di contatto (telefono o email)")),Bs===1){const jr=(((pr=Gs.departments)==null?void 0:pr.list)||[]).filter(wr=>wr.enabled);if(jr.length<1)bs.departments="Devi attivare almeno 1 reparto per procedere";else{jr.forEach((lr,_r)=>{var Ar;(!((Ar=lr.name)!=null&&Ar.trim())||lr.name.trim().length<2)&&(bs[`department_${_r}_name`]="Nome reparto deve essere di almeno 2 caratteri")});const wr=jr.map(lr=>lr.name.toLowerCase().trim()),dr=new Set(wr);wr.length!==dr.size&&(bs.departmentNames="I nomi dei reparti devono essere unici")}}if(Bs===2){const Ns=((xr=Gs.staff)==null?void 0:xr.staffMembers)||[];if(Ns.length===0)bs.staff="Devi aggiungere almeno un membro dello staff";else{Ns.forEach((dr,lr)=>{var Ar;(Ar=dr.fullName)!=null&&Ar.trim()?dr.fullName.trim().length<3&&(bs[`staff_${lr}_name`]="Nome deve essere di almeno 3 caratteri"):bs[`staff_${lr}_name`]="Nome obbligatorio",dr.role?["Amministratore","Responsabile","Dipendente","Collaboratore Occasionale / Part-time"].includes(dr.role)||(bs[`staff_${lr}_role`]="Ruolo non valido - seleziona un ruolo valido"):bs[`staff_${lr}_role`]="Ruolo obbligatorio";const _r=dr.categories&&dr.categories.length>0?dr.categories:dr.category?[dr.category]:[];if(_r.length===0)bs[`staff_${lr}_category`]="Categoria obbligatoria";else{const Vr=["Cuochi","Banconisti","Camerieri","Social & Media Manager","Amministratore","Altro"];_r.forEach(Kr=>{Vr.includes(Kr)||(bs[`staff_${lr}_category`]="Categoria non valida - seleziona una categoria valida")})}});const jr=Ns.map(dr=>dr.fullName.toLowerCase().trim()),wr=new Set(jr);jr.length!==wr.size&&(bs.staffNames="I nomi dei membri dello staff devono essere unici")}}if(Bs===3){const Ns=((Tr=Gs.conservation)==null?void 0:Tr.points)||[];if(console.log(" OnboardingWizard: Validating step 3 (Conservation)"),console.log(" OnboardingWizard: data.conservation:",Gs.conservation),console.log(" OnboardingWizard: conservationPoints:",Ns),Ns.length===0)console.log(" OnboardingWizard: No conservation points found, adding error"),bs.conservation="Devi aggiungere almeno un punto di conservazione";else{Ns.forEach((dr,lr)=>{var _r,Ar;if((_r=dr.name)!=null&&_r.trim()?dr.name.trim().length<2&&(bs[`conservation_${lr}_name`]="Nome deve essere di almeno 2 caratteri"):bs[`conservation_${lr}_name`]="Nome obbligatorio",dr.location?(((Ar=Gs.departments)==null?void 0:Ar.list)||[]).find(_s=>_s.name===dr.location&&_s.enabled)||(bs[`conservation_${lr}_location`]="Posizione non valida - seleziona un reparto attivo"):bs[`conservation_${lr}_location`]="Posizione obbligatoria",!dr.targetTemp)bs[`conservation_${lr}_temperature`]="Temperatura target obbligatoria";else{const Vr=parseFloat(dr.targetTemp);isNaN(Vr)&&(bs[`conservation_${lr}_temperature`]="Temperatura non valida")}if(!dr.selectedCategories||dr.selectedCategories.length===0)bs[`conservation_${lr}_categories`]="Categorie prodotti obbligatorie";else{const Vr=["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","frozen","deep_frozen","dry_goods","hot_holding","chilled_ready","fresh_beverages"];if(dr.selectedCategories.forEach(Kr=>{Vr.includes(Kr)||(bs[`conservation_${lr}_categories`]="Categoria non valida - seleziona categorie valide")}),dr.targetTemp&&dr.selectedCategories.length>0){const Kr=validateHACCPCompliance(dr.targetTemp,dr.selectedCategories);Kr.compliant||(bs[`conservation_${lr}_haccp`]=`Non conforme HACCP: ${Kr.message}. La temperatura deve essere compatibile con TUTTE le categorie selezionate.`)}}});const jr=Ns.map(dr=>dr.name.toLowerCase().trim()),wr=new Set(jr);jr.length!==wr.size&&(bs.conservationNames="I nomi dei punti di conservazione devono essere unici")}}if(Bs===4){const Ns=((Dr=Gs.tasks)==null?void 0:Dr.list)||[];if(Ns.length===0)bs.tasks="Devi aggiungere almeno un'attivit";else{Ns.forEach((_r,Ar)=>{var Vr;(Vr=_r.name)!=null&&Vr.trim()?_r.name.trim().length<5&&(bs[`task_${Ar}_name`]="Nome attivit deve essere di almeno 5 caratteri"):bs[`task_${Ar}_name`]="Nome attivit obbligatorio",_r.assignedRole||(bs[`task_${Ar}_assigned`]="Assegnazione obbligatoria"),_r.frequency?["Giornalmente","Settimanalmente","Mensilmente","Annualmente"].includes(_r.frequency)||(bs[`task_${Ar}_frequency`]="Frequenza non valida - seleziona una frequenza valida"):bs[`task_${Ar}_frequency`]="Frequenza obbligatoria"});const jr=((zr=Gs.conservation)==null?void 0:zr.points)||[];Ns.filter(_r=>{const Ar=_r.name.toLowerCase();return Ar.includes("rilevamento temperature")||Ar.includes("rilevamento temperatura")||Ar.includes("temperature")||Ar.includes("temperatura")||Ar.includes("monitoraggio")}).length<jr.length&&(bs.temperatureTasks=`Devi creare almeno ${jr.length} attivit di monitoraggio temperature (una per ogni punto di conservazione)`);const dr=Ns.map(_r=>_r.name.toLowerCase().trim()),lr=new Set(dr);dr.length!==lr.size&&(bs.taskNames="I nomi delle attivit devono essere unici")}}if(Bs===5){const Ns=((or=Gs.products)==null?void 0:or.productsList)||((Nr=Gs.inventory)==null?void 0:Nr.products)||[];if(console.log(" OnboardingWizard: Validating step 5 (Inventory)"),console.log(" OnboardingWizard: data.products:",Gs.products),console.log(" OnboardingWizard: productsList:",Ns),Ns.length===0)console.log(" OnboardingWizard: No products found, adding error"),bs.inventory="Devi aggiungere almeno un prodotto";else{Ns.forEach((lr,_r)=>{var Ar;if((Ar=lr.name)!=null&&Ar.trim()?lr.name.trim().length<2&&(bs[`product_${_r}_name`]="Nome prodotto deve essere di almeno 2 caratteri"):bs[`product_${_r}_name`]="Nome prodotto obbligatorio",lr.type?["Latticini e Formaggi","Carni Fresche","Pesce e Frutti di Mare","Verdure e Ortaggi","Frutta","Prodotti da Forno","Bevande","Altro"].includes(lr.type)||(bs[`product_${_r}_type`]="Tipologia non valida - seleziona una tipologia valida"):bs[`product_${_r}_type`]="Tipologia obbligatoria",!lr.expiryDate)bs[`product_${_r}_expiry`]="Data scadenza obbligatoria";else{const Vr=new Date(lr.expiryDate),Kr=new Date;Kr.setHours(0,0,0,0),Vr<Kr&&(bs[`product_${_r}_expiry`]="La data di scadenza deve essere nel futuro")}lr.position||(bs[`product_${_r}_position`]="Posizione obbligatoria")});const jr=((cr=Gs.conservation)==null?void 0:cr.points)||[];jr.length===0?bs.conservationRequired="Devi prima configurare i punti di conservazione per assegnare i prodotti":Ns.forEach((lr,_r)=>{jr.find(Vr=>Vr.id===parseInt(lr.position)||Vr.name===lr.position)||(bs[`product_${_r}_position`]="Posizione non valida - seleziona un punto di conservazione esistente")});const wr=Ns.map(lr=>lr.name.toLowerCase().trim()),dr=new Set(wr);wr.length!==dr.size&&(bs.productNames="I nomi dei prodotti devono essere unici")}}return bs},cs=Bs=>{var As,ks,$s,qs,Cs;const Gs=xs(Bs,us),bs=Object.keys(Gs).length===0;if(Bs===3&&(console.log(" DEBUG PULSANTE AVANTI - Step 3 (Punti di Conservazione):"),console.log(" errors:",Gs),console.log(" errors.length:",Object.keys(Gs).length),console.log(" isValid:",bs),console.log(" formData.conservation:",us.conservation),console.log(" conservation.points:",(As=us.conservation)==null?void 0:As.points),console.log(" conservation.count:",(ks=us.conservation)==null?void 0:ks.count),Object.keys(Gs).length>0&&(console.log(" ERRORI DETTAGLIATI:"),Object.entries(Gs).forEach(([Us,Ps])=>{console.log(` ${Us}: ${Ps}`)}),(qs=($s=us.conservation)==null?void 0:$s.points)!=null&&qs[0]))){const Us=us.conservation.points[0];console.log(" PUNTO DI CONSERVAZIONE DETTAGLIATO:"),console.log(" point.name:",Us.name),console.log(" point.location:",Us.location),console.log(" point.targetTemp:",Us.targetTemp),console.log(" point.selectedCategories:",Us.selectedCategories),console.log(" point.selectedCategories type:",typeof Us.selectedCategories),console.log(" point.selectedCategories length:",(Cs=Us.selectedCategories)==null?void 0:Cs.length);const Ps=["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","frozen","deep_frozen","dry_goods","hot_holding","chilled_ready","fresh_beverages"];console.log(" CATEGORIE VALIDE:",Ps),console.log(" CATEGORIE SELEZIONATE:",Us.selectedCategories),Us.selectedCategories.forEach((er,tr)=>{const vr=Ps.includes(er);console.log(` Categoria ${tr}: "${er}" - ${vr?"VALIDA":"NON VALIDA"}`)})}return bs},ys=Bs=>{const Gs=xs(Bs,us);return Object.keys(Gs).length===0},gs=Bs=>is.has(Bs),vs=Bs=>(console.log(` confirmStep chiamato per step ${Bs}`),console.log(` Stato prima: currentStep=${es}, confirmedSteps=${Array.from(is)}`),cs(Bs)?(console.log(` Step ${Bs} valido, marcando come confermato`),os(Gs=>new Set([...Gs,Bs])),console.log(` Step ${Bs} confermato con successo`),!0):(console.log(` Step ${Bs} non valido`),!1)),ds=Bs=>{os(Gs=>{const bs=new Set(Gs);return bs.delete(Bs),bs})},fs=()=>{const Bs={currentStep:es,completedSteps:Array.from(rs),confirmedSteps:Array.from(is),formData:us,lastActivity:new Date().toISOString()};localStorage.setItem("haccp-onboarding-new",JSON.stringify(Bs))},Es=Bs=>{console.log(` goToStep chiamato per step ${Bs}`),Bs>=0&&Bs<ONBOARDING_STEPS.length?(ss(Bs),fs(),console.log(` Navigazione diretta completata a step ${Bs+1}`)):console.log(` Step ${Bs} non valido`)},Os=()=>{var Bs,Gs;if(console.log(" nextStep chiamato"),console.log(` Stato: currentStep=${es}`),es<ONBOARDING_STEPS.length-1){const bs=xs(es,us);Object.keys(bs).length===0?(console.log(` Step ${es} valido, navigando al prossimo`),ns(As=>new Set([...As,ONBOARDING_STEPS[es].id])),os(As=>new Set([...As,es])),ss(es+1),fs(),console.log(` Navigazione completata a step ${es+1}`)):(console.log(` Step ${es} non valido:`,bs),console.log(" Errori dettagliati:",Object.entries(bs).map(([As,ks])=>`${As}: ${ks}`)),console.log(" Errori completi:",bs),console.log(` FormData per step ${es}:`,us),es===3&&(console.log(" DEBUG STEP 3 (Punti di Conservazione):"),console.log(" data.conservation:",us.conservation),console.log(" conservation.points:",(Bs=us.conservation)==null?void 0:Bs.points),console.log(" conservation.count:",(Gs=us.conservation)==null?void 0:Gs.count)),alert(`Ci sono errori di validazione:
${Object.values(bs).join(`
`)}`))}else console.log(" Ultimo step raggiunto, navigazione non possibile")},Hs=()=>{es>0&&(ss(es-1),fs())},Qs=()=>{const Bs=xs(es,us);Object.keys(Bs).length===0?(console.log(" Ultimo step valido, completando onboarding"),ns(Gs=>new Set([...Gs,ONBOARDING_STEPS[es].id])),fs(),St&&St(us)):(console.log(" Ultimo step non valido:",Bs),alert(`Ci sono errori di validazione:
${Object.values(Bs).join(`
`)}`))};if(React.useEffect(()=>{const Bs=localStorage.getItem("haccp-onboarding-new");if(Bs)try{const Gs=JSON.parse(Bs);ss(Gs.currentStep||0),ns(new Set(Gs.completedSteps||[])),os(new Set(Gs.confirmedSteps||[])),ps(Gs.formData||us)}catch(Gs){console.warn("Errore nel caricamento progresso onboarding:",Gs)}},[]),!_e)return null;const zs=ONBOARDING_STEPS[es].component,Ls=es===ONBOARDING_STEPS.length-1;return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"p-6 border-b",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold",children:"Configurazione Iniziale HACCP"}),jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:e,children:"Chiudi"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[jsxRuntimeExports.jsxs("span",{children:["Progresso: ",Math.round(rs.size/ONBOARDING_STEPS.length*100),"%"]}),jsxRuntimeExports.jsxs("span",{children:["Step ",es+1," di ",ONBOARDING_STEPS.length]})]}),jsxRuntimeExports.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:jsxRuntimeExports.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${rs.size/ONBOARDING_STEPS.length*100}%`}})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(StepNavigator,{currentStep:es,completedSteps:rs,onStepClick:Es,steps:ONBOARDING_STEPS})})]}),jsxRuntimeExports.jsx("div",{className:"p-6",children:jsxRuntimeExports.jsx(zs,{formData:us,setFormData:ps,currentStep:es,setCurrentStep:ss,onComplete:St,validateStep:xs,confirmStep:vs,markStepAsUnconfirmed:ds,isStepConfirmed:gs,canConfirmStep:ys})}),jsxRuntimeExports.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[jsxRuntimeExports.jsxs(Button,{variant:"outline",onClick:Hs,disabled:es===0,children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4 mr-2"}),"Precedente"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:Ls?jsxRuntimeExports.jsxs(Button,{onClick:Qs,className:"bg-green-600 hover:bg-green-700",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4 mr-2"}),"Completa Configurazione"]}):jsxRuntimeExports.jsxs(Button,{onClick:Os,disabled:!cs(es),className:`${cs(es)?"bg-blue-600 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:["Avanti",jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 ml-2"})]})})]})]})})}function BottomSheetGuide({isOpen:_e,onClose:e,missingRequirements:St=[],suggestions:es=[],onFixRequirement:ts}){if(!_e)return null;const ss=rs=>{ts&&ts(rs),e()};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:e}),jsxRuntimeExports.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out",children:[jsxRuntimeExports.jsx("div",{className:"flex justify-center pt-3 pb-2",children:jsxRuntimeExports.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),jsxRuntimeExports.jsx("div",{className:"px-6 pb-4 border-b",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"h-6 w-6 text-orange-500"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prerequisiti Richiesti"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-600",children:"Completa questi passaggi per accedere alla sezione"})]})]}),jsxRuntimeExports.jsx("button",{onClick:e,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:jsxRuntimeExports.jsx(X$2,{className:"h-5 w-5"})})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[jsxRuntimeExports.jsx("div",{className:"space-y-4",children:St.map((rs,ns)=>{const is=es.find(os=>os.requirement===rs);return jsxRuntimeExports.jsx(Card,{className:"border-orange-200 bg-orange-50",children:jsxRuntimeExports.jsx(CardContent,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:jsxRuntimeExports.jsx("span",{className:"text-sm font-medium text-orange-600",children:ns+1})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-orange-900 mb-2",children:(is==null?void 0:is.action)||`Completa ${rs}`}),(is==null?void 0:is.description)&&jsxRuntimeExports.jsx("p",{className:"text-sm text-orange-800 mb-3",children:is.description}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:()=>ss(rs),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4 mr-1"}),"Risolvi"]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-700",children:[jsxRuntimeExports.jsx(Info,{className:"h-3 w-3"}),jsxRuntimeExports.jsxs("span",{children:["Priorit: ",(is==null?void 0:is.priority)==="high"?"Alta":"Media"]})]})]})]})]})})},ns)})}),jsxRuntimeExports.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Info,{className:"h-5 w-5 text-blue-600 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Perch questi prerequisiti sono importanti?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-800",children:"I prerequisiti garantiscono che la tua struttura HACCP sia completa e funzionale. Ogni elemento contribuisce alla sicurezza alimentare e alla compliance normativa."})]})]})})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4 border-t bg-gray-50",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",onClick:e,className:"flex-1",children:"Chiudi"}),jsxRuntimeExports.jsxs(Button,{onClick:()=>{ts&&ts("onboarding"),e()},className:"flex-1",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"h-4 w-4 mr-2"}),"Avvia Onboarding"]})]})})]})]})}function App(){var _e;const[activeTab,setActiveTab]=reactExports.useState("dashboard"),[temperatures,setTemperatures]=reactExports.useState([]),[cleaning,setCleaning]=reactExports.useState([]),[refrigerators,setRefrigerators]=reactExports.useState([]),[staff,setStaff]=reactExports.useState([]),[products,setProducts]=reactExports.useState([]),[departments,setDepartments]=reactExports.useState([]),[productLabels,setProductLabels]=reactExports.useState([]),[currentUser,setCurrentUser]=reactExports.useState(null),[users,setUsers]=reactExports.useState([]),[isLoginModalOpen,setIsLoginModalOpen]=reactExports.useState(!1),[showChatIcon,setShowChatIcon]=reactExports.useState(!0),[lastCheck,setLastCheck]=reactExports.useState(()=>{const e=localStorage.getItem("haccp-last-check");return e?JSON.parse(e):{}}),[pendingChanges,setPendingChanges]=reactExports.useState([]);reactExports.useState(()=>localStorage.getItem("haccp-last-sync")||null),reactExports.useState(()=>localStorage.getItem("haccp-company-id")||"demo-pizzeria");const[showOnboarding,setShowOnboarding]=reactExports.useState(!1),[onboardingCompleted,setOnboardingCompleted]=reactExports.useState(!1),[showBottomSheet,setShowBottomSheet]=reactExports.useState(!1),[appData,setAppData]=reactExports.useState({users:[],departments:[],refrigerators:[],staff:[],cleaning:[],inventory:[]}),validation={isOnboardingComplete:!0,currentSectionAccess:{isEnabled:!0,message:null},missingRequirements:[],onboardingProgress:100,canAccessSection:()=>({isEnabled:!0,message:null}),areRequirementsMet:()=>!0,getMissingRequirements:()=>[],getNextOnboardingStep:()=>null,getOnboardingProgress:()=>100,validateField:()=>null,getEducationalMessage:()=>"",getSuggestions:()=>[],validateConservationPoint:()=>({isValid:!0,errors:[],warnings:[]}),getEducationalMessages:()=>[],onboardingStatus:{isComplete:!0,progress:100,nextStep:null},sectionAccess:{isEnabled:!0,message:null}},loadAppData=()=>{var e,St,es,ts,ss;const users=JSON.parse(localStorage.getItem("haccp-users")||"[]");let departments=[];const refrigerators=JSON.parse(localStorage.getItem("haccp-refrigerators")||"[]"),staff=JSON.parse(localStorage.getItem("haccp-staff")||"[]"),cleaning=JSON.parse(localStorage.getItem("haccp-cleaning")||"[]"),inventory=JSON.parse(localStorage.getItem("haccp-products")||"[]");try{departments=JSON.parse(localStorage.getItem("haccp-departments")||"[]")}catch(rs){console.warn("Errore nel parsing departments:",rs),departments=[]}const corruptedDepartments=departments.some(rs=>rs&&rs.name&&(rs.name==="Amministratori"||rs.name==="Responsabili"||rs.name==="Dipendenti"||rs.name==="Collaboratore Occasionale"||/^\d+$/.test(rs.name)||rs.name.length<3));if(corruptedDepartments||departments.length===0){console.log(" Rilevati reparti corrotti, ricaricamento dall'onboarding...");const onboardingData=localStorage.getItem("haccp-onboarding-new")||localStorage.getItem("haccp-onboarding");if(console.log(" Dati onboarding trovati:",typeof onboardingData,onboardingData),onboardingData)try{let onboarding;if(typeof onboardingData=="string")try{onboardingData==="[object Object]"?(console.warn('Rilevata stringa corrotta "[object Object]", usando oggetto vuoto'),onboarding={formData:{departments:{list:[]}}}):onboarding=JSON.parse(onboardingData)}catch(jsonError){console.warn("Errore parsing JSON, tentativo con eval:",jsonError);try{onboarding=eval("("+onboardingData+")")}catch(rs){console.warn("Errore anche con eval, usando oggetto vuoto:",rs),onboarding={formData:{departments:{list:[]}}}}}else onboarding=onboardingData;const departmentsData=((e=onboarding.departments)==null?void 0:e.list)||((es=(St=onboarding.formData)==null?void 0:St.departments)==null?void 0:es.list);departmentsData&&(departments=departmentsData.filter(rs=>rs&&rs.enabled).map(rs=>({id:rs.id||Date.now()+Math.random(),name:rs.name||"Reparto non disponibile",enabled:!0,isCustom:rs.isCustom||!1,createdAt:new Date().toISOString()})),setDepartments(departments),localStorage.setItem("haccp-departments",JSON.stringify(departments)),console.log(" Reparti corretti caricati dall'onboarding:",departments))}catch(rs){console.warn("Errore nel caricamento reparti dall'onboarding:",rs)}}const onboardingData=localStorage.getItem("haccp-onboarding-new");if(onboardingData)try{let onboarding;if(typeof onboardingData=="string")try{onboarding=JSON.parse(onboardingData)}catch(jsonError){console.warn("Errore parsing JSON, tentativo con eval:",jsonError);try{onboarding=eval("("+onboardingData+")")}catch(rs){console.warn("Errore anche con eval, usando oggetto vuoto:",rs),onboarding={formData:{departments:{list:[]}}}}}else onboarding=onboardingData;const departmentsData=(ss=(ts=onboarding.formData)==null?void 0:ts.departments)==null?void 0:ss.list;if(departmentsData&&departmentsData.length>0){const rs=departmentsData.filter(ns=>ns&&ns.enabled).map(ns=>({id:ns.id||Date.now()+Math.random(),name:ns.name||"Reparto non disponibile",enabled:!0,isCustom:ns.isCustom||!1,createdAt:new Date().toISOString()}));(departments.length===0||JSON.stringify(departments)!==JSON.stringify(rs))&&(setDepartments(rs),localStorage.setItem("haccp-departments",JSON.stringify(rs)),console.log(" Reparti precompilati caricati:",rs))}}catch(rs){console.warn("Errore nel caricamento reparti precompilati:",rs)}setAppData({users,departments,refrigerators,staff,cleaning,inventory})};reactExports.useEffect(()=>{},[]),reactExports.useEffect(()=>{const e=initializeDataSchemas();Object.entries(e).forEach(([xs,cs])=>{localStorage.getItem(xs)||localStorage.setItem(xs,cs)}),initializeDevModeIfRequested(),loadAppData();const St=localStorage.getItem("haccp-temperatures"),es=localStorage.getItem("haccp-cleaning"),ts=localStorage.getItem("haccp-refrigerators"),ss=localStorage.getItem("haccp-staff"),rs=localStorage.getItem("haccp-products"),ns=localStorage.getItem("haccp-departments"),is=localStorage.getItem("haccp-product-labels"),os=localStorage.getItem("haccp-users");localStorage.getItem("haccp-current-user");try{St&&setTemperatures(JSON.parse(St)),es&&setCleaning(JSON.parse(es)),ts&&setRefrigerators(JSON.parse(ts)),ss&&setStaff(JSON.parse(ss)),rs&&setProducts(JSON.parse(rs)),ns&&setDepartments(JSON.parse(ns)),is&&setProductLabels(JSON.parse(is))}catch(xs){console.warn("Errore nel parsing dei dati:",xs),localStorage.removeItem("haccp-temperatures"),localStorage.removeItem("haccp-cleaning"),localStorage.removeItem("haccp-refrigerators"),localStorage.removeItem("haccp-staff"),localStorage.removeItem("haccp-products"),localStorage.removeItem("haccp-departments"),localStorage.removeItem("haccp-product-labels")}if(os)try{setUsers(JSON.parse(os))}catch(xs){console.warn("Errore nel parsing users:",xs),localStorage.removeItem("haccp-users")}else{const xs={id:"admin_001",name:"Admin",pin:"0000",role:"admin",department:"Amministrazione",createdAt:new Date().toISOString()};setUsers([xs]),localStorage.setItem("haccp-users",JSON.stringify([xs]))}const us=localStorage.getItem("haccp-show-chat-icon");if(us!==null)try{setShowChatIcon(JSON.parse(us))}catch(xs){console.warn("Errore nel parsing chat icon pref:",xs),localStorage.removeItem("haccp-show-chat-icon")}const ps=xs=>{if(xs.key==="haccp-show-chat-icon")try{setShowChatIcon(JSON.parse(xs.newValue))}catch(cs){console.warn("Errore nel parsing chat icon pref change:",cs)}};return window.addEventListener("storage",ps),()=>{window.removeEventListener("storage",ps)}},[]),reactExports.useEffect(()=>{},[products,temperatures,cleaning,staff,productLabels]),reactExports.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(temperatures))},[temperatures]),reactExports.useEffect(()=>{localStorage.setItem("haccp-refrigerators",JSON.stringify(refrigerators))},[refrigerators]),reactExports.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(cleaning))},[cleaning]),reactExports.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(staff))},[staff]),reactExports.useEffect(()=>{localStorage.setItem("haccp-products",JSON.stringify(products))},[products]),reactExports.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(departments))},[departments]),reactExports.useEffect(()=>{localStorage.setItem("haccp-product-labels",JSON.stringify(productLabels))},[productLabels]);const handleLogin=e=>{setCurrentUser(e),setIsLoginModalOpen(!1),localStorage.setItem("haccp-current-user",JSON.stringify(e));const St={id:Date.now(),timestamp:new Date().toISOString(),user:e.id,userName:e.name,type:"login",description:`Accesso di ${e.name}`};try{const es=JSON.parse(localStorage.getItem("haccp-actions")||"[]");es.push(St),localStorage.setItem("haccp-actions",JSON.stringify(es))}catch(es){console.warn("Errore nel parsing actions:",es),localStorage.removeItem("haccp-actions")}},getNotifications=()=>{const e={dashboard:0,cleaning:0,inventory:0,labels:0,staff:0,refrigerators:0},St=lastCheck.cleaning||"2000-01-01T00:00:00.000Z",es=cleaning.filter(ds=>new Date(ds.createdAt||ds.timestamp)>new Date(St)).length;e.cleaning+=es;const ts=lastCheck.inventory||"2000-01-01T00:00:00.000Z",ss=new Date,rs=new Date(ss.getTime()+3*24*60*60*1e3),ns=new Date(ss.getTime()+4*24*60*60*1e3),is=products.filter(ds=>{const fs=new Date(ds.expiryDate);return fs>=rs&&fs<=ns}).length,os=products.filter(ds=>new Date(ds.createdAt||ds.addedDate)>new Date(ts)).length;e.inventory+=is+os;const us=lastCheck.labels||"2000-01-01T00:00:00.000Z",ps=productLabels.filter(ds=>new Date(ds.createdAt||"2000-01-01")>new Date(us)).length;e.labels+=ps;const xs=lastCheck.staff||"2000-01-01T00:00:00.000Z",cs=staff&&Array.isArray(staff)?staff.filter(ds=>ds&&new Date(ds.addedDate||ds.createdAt||"2000-01-01")>new Date(xs)).length:0;e.staff+=cs;const ys=lastCheck.refrigerators||"2000-01-01T00:00:00.000Z",gs=temperatures.filter(ds=>{const Es=new Date(ds.timestamp)>new Date(ys),Os=ds.status==="warning"||ds.status==="danger";return Es&&Os}).length;e.refrigerators+=gs;const vs=products.filter(ds=>{const fs=new Date(ds.expiryDate),Es=new Date;return fs.setHours(0,0,0,0),Es.setHours(0,0,0,0),fs.getTime()===Es.getTime()}).length;return e.dashboard=vs+gs,e},updateLastCheck=e=>{const St={...lastCheck,[e]:new Date().toISOString()};setLastCheck(St),localStorage.setItem("haccp-last-check",JSON.stringify(St))},notifications=getNotifications(),NotificationDot=({hasNotification:e,className:St=""})=>e?jsxRuntimeExports.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full ${St}`}):null,addPendingChange=(e,St,es=null)=>{const ts={id:es||`${e}_${Date.now()}`,type:e,data:St,timestamp:new Date().toISOString(),userId:currentUser==null?void 0:currentUser.id,userName:currentUser==null?void 0:currentUser.name};setPendingChanges(ss=>[...ss.filter(ns=>!(ns.type===e&&ns.id===ts.id)),ts])},trackDataChange=(e,St,es)=>{console.log(" TRACKING:",e,"with",(St==null?void 0:St.length)||0,"items"),addPendingChange(e,St,es)};reactExports.useEffect(()=>{products.length>0&&currentUser&&(console.log(" Products changed:",products.length,"items"),trackDataChange("inventory",products,"auto-inventory"))},[products,currentUser]),reactExports.useEffect(()=>{temperatures.length>0&&currentUser&&(console.log(" Temperatures changed:",temperatures.length,"items"),trackDataChange("temperatures",temperatures,"auto-temperatures"))},[temperatures,currentUser]),reactExports.useEffect(()=>{cleaning.length>0&&currentUser&&(console.log(" Cleaning changed:",cleaning.length,"items"),trackDataChange("cleaning",cleaning,"auto-cleaning"))},[cleaning,currentUser]),reactExports.useEffect(()=>{staff.length>0&&currentUser&&(console.log(" Staff changed:",staff.length,"items"),trackDataChange("staff",staff,"auto-staff"))},[staff,currentUser]),reactExports.useEffect(()=>{console.log(" PENDING CHANGES:",pendingChanges.length,pendingChanges)},[pendingChanges]);const handleLogout=()=>{if(currentUser){const e={id:Date.now(),timestamp:new Date().toISOString(),user:currentUser.id,userName:currentUser.name,type:"logout",description:`Disconnessione di ${currentUser.name}`};try{const St=JSON.parse(localStorage.getItem("haccp-actions")||"[]");St.push(e),localStorage.setItem("haccp-actions",JSON.stringify(St))}catch(St){console.warn("Errore nel parsing actions logout:",St),localStorage.removeItem("haccp-actions")}}setCurrentUser(null),setActiveTab("dashboard"),localStorage.removeItem("haccp-current-user")},addUser=e=>{const St={...e,id:`user_${Date.now()}`,createdAt:new Date().toISOString()},es=[...users,St];setUsers(es),localStorage.setItem("haccp-users",JSON.stringify(es));const ts={id:`staff_${Date.now()}`,name:e.name,role:e.role==="admin"?"Amministratore":e.role==="dipendente"?"Dipendente":e.role==="responsabile"?"Responsabile":e.role==="collaboratore"?"Collaboratore Occasionale":"Dipendente",department:e.department||"Non assegnato",certification:"",notes:`Utente registrato il ${new Date().toLocaleDateString("it-IT")}`,addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT"),isRegisteredUser:!0,userId:St.id},ss=[...staff,ts];setStaff(ss),localStorage.setItem("haccp-staff",JSON.stringify(ss))},isAdmin=()=>currentUser&&currentUser.role==="admin",getQuickStats=()=>{const e=temperatures.filter(rs=>rs.status==="ok").length,St=temperatures.filter(rs=>rs.status==="danger").length,es=cleaning.filter(rs=>!rs.completed).length,ts=new Date,ss=products.filter(rs=>{const is=new Date(rs.expiryDate)-ts,os=Math.ceil(is/(1e3*60*60*24));return os<=7&&os>=0}).length;return{temperatureOk:e,temperatureProblems:St,cleaningPending:es,expiringToday:ss}},quickStats=getQuickStats(),exportData=()=>{const e={temperatures,cleaningTasks:cleaning,staff,products,departments,productLabels,exportDate:new Date().toISOString()},St=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),es=URL.createObjectURL(St),ts=document.createElement("a");ts.href=es,ts.download=`haccp-data-${new Date().toISOString().split("T")[0]}.json`,ts.click(),URL.revokeObjectURL(es)},importData=e=>{const St=e.target.files[0];if(!St)return;const es=new FileReader;es.onload=ts=>{try{const ss=JSON.parse(ts.target.result);ss.temperatures&&(setTemperatures(ss.temperatures),localStorage.setItem("haccp-temperatures",JSON.stringify(ss.temperatures))),ss.cleaningTasks&&(setCleaning(ss.cleaningTasks),localStorage.setItem("haccp-cleaning",JSON.stringify(ss.cleaningTasks))),ss.staff&&(setStaff(ss.staff),localStorage.setItem("haccp-staff",JSON.stringify(ss.staff))),ss.products&&(setProducts(ss.products),localStorage.setItem("haccp-products",JSON.stringify(ss.products))),ss.departments&&(setDepartments(ss.departments),localStorage.setItem("haccp-departments",JSON.stringify(ss.departments))),ss.productLabels&&(setProductLabels(ss.productLabels),localStorage.setItem("haccp-product-labels",JSON.stringify(ss.productLabels))),alert("Dati importati con successo!")}catch(ss){alert("Errore durante l'importazione del file"),console.error("Import error:",ss)}},es.readAsText(St)};reactExports.useEffect(()=>{if(currentUser&&!onboardingCompleted){if(shouldBypassOnboarding()){setOnboardingCompleted(!0);return}const e=localStorage.getItem("haccp-onboarding");if(e&&e!=="undefined"&&e!=="null"&&e!=="[object Object]")try{const St=JSON.parse(e);if(St&&typeof St=="object"&&St.completed){setOnboardingCompleted(!0);return}}catch(St){console.warn("Errore nel parsing onboarding:",St),localStorage.removeItem("haccp-onboarding")}setShowOnboarding(!0)}},[currentUser,onboardingCompleted]);const handleOnboardingComplete=e=>{var es,ts,ss,rs,ns;setShowOnboarding(!1),setOnboardingCompleted(!0);const St={...e,completed:!0,completedAt:new Date().toISOString()};if(localStorage.setItem("haccp-onboarding",JSON.stringify(St)),e.business&&localStorage.setItem("haccp-business-info",JSON.stringify(e.business)),(es=e.departments)!=null&&es.list){const is=e.departments.list.filter(os=>os&&os.enabled).map(os=>({id:os.id||Date.now()+Math.random(),name:os.name||"Reparto non disponibile",enabled:!0,isCustom:os.isCustom||!1,createdAt:new Date().toISOString()}));setDepartments(is),localStorage.setItem("haccp-departments",JSON.stringify(is))}if((ts=e.staff)!=null&&ts.staffMembers){const is=e.staff.staffMembers.map(os=>({...os,id:os.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));setStaff(is),localStorage.setItem("haccp-staff",JSON.stringify(is))}if((ss=e.conservation)!=null&&ss.points){const is=e.conservation.points.map(os=>({...os,id:os.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));setRefrigerators(is),localStorage.setItem("haccp-refrigerators",JSON.stringify(is))}if((rs=e.tasks)!=null&&rs.list){const is=e.tasks.list.map(os=>({...os,id:os.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));setCleaning(is),localStorage.setItem("haccp-cleaning",JSON.stringify(is))}if((ns=e.inventory)!=null&&ns.products){const is=e.inventory.products.map(os=>({...os,id:os.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));setProducts(is),localStorage.setItem("haccp-products",JSON.stringify(is))}e.preset&&localStorage.setItem("haccp-presets",JSON.stringify({selected:e.preset,applied:!0,appliedAt:new Date().toISOString()})),loadAppData()};reactExports.useEffect(()=>{},[]);const handleFixRequirement=e=>{if(e==="onboarding")setShowOnboarding(!0);else switch(e){case"departments":setActiveTab("staff");break;case"refrigerators":setActiveTab("refrigerators");break;case"staff":setActiveTab("staff");break;default:setActiveTab("dashboard")}};return currentUser?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx(DevModeBanner,{}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-8",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business HACCP Manager"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600",children:["Benvenuto, ",jsxRuntimeExports.jsxs("span",{className:"font-['Dancing_Script'] font-semibold text-2xl text-purple-600",children:[currentUser.name," - ",currentUser.role==="admin"?"Admin":"Dipendente"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[!1,jsxRuntimeExports.jsxs(Button,{onClick:()=>setShowOnboarding(!0),variant:"outline",size:"sm",className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",title:"Riapri l'onboarding",children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4"}),"Riapri Onboarding"]}),!1,jsxRuntimeExports.jsxs(Button,{onClick:exportData,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Esporta"]}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{children:"Importa"})]})}),jsxRuntimeExports.jsx("input",{type:"file",accept:".json",onChange:importData,className:"hidden"})]})]})]}),jsxRuntimeExports.jsxs(Tabs,{value:activeTab,onValueChange:e=>{setActiveTab(e),updateLastCheck(e)},children:[jsxRuntimeExports.jsxs(TabsList,{className:`grid w-full ${isAdmin()?"grid-cols-4 sm:grid-cols-6 md:grid-cols-9":"grid-cols-4 sm:grid-cols-6 md:grid-cols-8"} gap-1 mb-8`,children:[jsxRuntimeExports.jsxs(TabsTrigger,{value:"dashboard",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Home",children:[jsxRuntimeExports.jsx(BarChart3,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden",children:"Home"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Home"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.dashboard>0})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"refrigerators",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Punti di Conservazione",children:[jsxRuntimeExports.jsx(Thermometer,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Frigo"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Punti di Conservazione"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.refrigerators>0})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"cleaning",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Attivit e Mansioni",children:[jsxRuntimeExports.jsx(Sparkles,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Attivit"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Attivit e Mansioni"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.cleaning>0})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"inventory",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Inventario",children:[jsxRuntimeExports.jsx(Package,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Stock"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Inventario"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.inventory>0})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"labels",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Gestione Etichette",children:[jsxRuntimeExports.jsx(QrCode,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Etichette"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Gestione Etichette"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.labels>0})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"ai-assistant",className:"flex items-center gap-1 md:gap-2 text-sm",title:"IA Assistant",children:[jsxRuntimeExports.jsx(Bot,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"IA"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"IA Assistant"})]}),jsxRuntimeExports.jsxs(TabsTrigger,{value:"data-settings",className:"flex items-center gap-1 md:gap-2 text-sm",title:"Impostazioni e Dati",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Settings"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Impostazioni e Dati"})]}),isAdmin()&&jsxRuntimeExports.jsxs(TabsTrigger,{value:"staff",className:"flex items-center gap-1 md:gap-2 text-sm relative",title:"Gestione",children:[jsxRuntimeExports.jsx(Users,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Staff"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Gestione"}),jsxRuntimeExports.jsx(NotificationDot,{hasNotification:notifications.staff>0})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-1",children:[isAdmin()&&jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:()=>setActiveTab("staff"),className:"flex items-center gap-1 md:gap-2 text-sm h-9 px-3",title:"Impostazioni",children:[jsxRuntimeExports.jsx(Settings,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Settings"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Impostazioni"})]}),jsxRuntimeExports.jsxs(Button,{variant:"outline",size:"sm",onClick:handleLogout,className:"flex items-center gap-1 md:gap-2 text-sm h-9 px-3",title:"Esci",children:[jsxRuntimeExports.jsx(LogOut,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sm:hidden text-xs",children:"Exit"}),jsxRuntimeExports.jsx("span",{className:"hidden sm:inline",children:"Esci"})]})]})]}),jsxRuntimeExports.jsx(TabsContent,{value:"dashboard",children:jsxRuntimeExports.jsx("div",{className:"space-y-6",children:jsxRuntimeExports.jsx(Dashboard,{temperatures,cleaning,products,staff,currentUser})})}),jsxRuntimeExports.jsx(TabsContent,{value:"refrigerators",children:jsxRuntimeExports.jsx(PuntidiConservazione,{temperatures,setTemperatures:e=>{setTemperatures(e),trackDataChange("temperatures",e)},currentUser,refrigerators,setRefrigerators:e=>{setRefrigerators(e),trackDataChange("refrigerators",e)},departments,setDepartments:e=>{setDepartments(e),trackDataChange("departments",e)}})}),jsxRuntimeExports.jsx(TabsContent,{value:"cleaning",children:jsxRuntimeExports.jsx(Cleaning,{cleaning,setCleaning:e=>{setCleaning(e),trackDataChange("cleaning",e)},currentUser,departments})}),jsxRuntimeExports.jsx(TabsContent,{value:"inventory",children:jsxRuntimeExports.jsx(Inventory,{products,setProducts:e=>{setProducts(e),trackDataChange("inventory",e)},currentUser,refrigerators})}),jsxRuntimeExports.jsx(TabsContent,{value:"labels",children:jsxRuntimeExports.jsx(ProductLabels,{productLabels,setProductLabels,products,currentUser})}),jsxRuntimeExports.jsx(TabsContent,{value:"ai-assistant",children:jsxRuntimeExports.jsx(AIAssistantSection,{currentUser,products,temperatures,cleaning,staff,onAction:e=>{console.log("AI Action:",e)}})}),jsxRuntimeExports.jsx(TabsContent,{value:"data-settings",children:jsxRuntimeExports.jsx(DataSettings,{currentUser,isAdmin:isAdmin(),onSettingsChange:e=>{console.log(" Impostazioni dati aggiornate:",e)}})}),isAdmin()&&jsxRuntimeExports.jsx(TabsContent,{value:"staff",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsx(Gestione,{staff,setStaff:e=>{setStaff(e),trackDataChange("staff",e)},users,setUsers,currentUser,isAdmin:isAdmin(),departments:onboardingCompleted?departments:[],setDepartments:e=>{setDepartments(e),trackDataChange("departments",e)}}),jsxRuntimeExports.jsx(StorageManager,{temperatures,setTemperatures,cleaning,setCleaning,products,setProducts,refrigerators,setRefrigerators})]})})]}),jsxRuntimeExports.jsx(PDFExport,{activeTab,temperatures}),currentUser&&showChatIcon&&jsxRuntimeExports.jsx(AIAssistant,{currentUser,currentSection:activeTab,products,temperatures,cleaning,staff,onAction:e=>{console.log("AI Action:",e)}}),currentUser&&jsxRuntimeExports.jsx(ExpiryAlertAutomation,{products,onRecipeSuggestion:e=>{console.log("Recipe suggestions:",e)}}),jsxRuntimeExports.jsx(PWAInstallPrompt,{}),showOnboarding&&jsxRuntimeExports.jsx(OnboardingWizard,{isOpen:showOnboarding,onClose:()=>setShowOnboarding(!1),onComplete:handleOnboardingComplete,currentData:appData}),jsxRuntimeExports.jsx(BottomSheetGuide,{isOpen:showBottomSheet,onClose:()=>setShowBottomSheet(!1),missingRequirements:validation.missingRequirements,suggestions:validation.getSuggestions(),onFixRequirement:handleFixRequirement})]})]}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-50",children:[jsxRuntimeExports.jsx(DevModeBanner,{}),jsxRuntimeExports.jsxs("div",{className:"container mx-auto px-4 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-8",children:[jsxRuntimeExports.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Business HACCP Manager"}),jsxRuntimeExports.jsx("p",{className:"text-gray-600",children:"Sistema di Gestione HACCP per Ristoranti"})]}),jsxRuntimeExports.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx(CardHeader,{children:jsxRuntimeExports.jsxs(CardTitle,{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(BarChart3,{className:"h-5 w-5"}),"Report Giornalieri - ",new Date().toLocaleDateString("it-IT")]})}),jsxRuntimeExports.jsx(CardContent,{children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-green-600",children:quickStats.temperatureOk}),jsxRuntimeExports.jsx("div",{className:"text-sm text-green-700",children:"Temperature OK"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-red-600",children:quickStats.temperatureProblems}),jsxRuntimeExports.jsx("div",{className:"text-sm text-red-700",children:"Problemi Temp."})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:quickStats.cleaningPending}),jsxRuntimeExports.jsx("div",{className:"text-sm text-yellow-700",children:"Pulizie Pending"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-blue-600",children:quickStats.expiringToday}),jsxRuntimeExports.jsx("div",{className:"text-sm text-blue-700",children:"Scadenze Prodotti"})]})]})})]})}),jsxRuntimeExports.jsx("div",{className:"max-w-md mx-auto mb-4",children:jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsxs(Button,{onClick:exportData,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Download,{className:"h-4 w-4"}),"Esporta"]}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer",children:[jsxRuntimeExports.jsx(Button,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Upload,{className:"h-4 w-4"}),"Importa"]})}),jsxRuntimeExports.jsx("input",{type:"file",accept:".json",onChange:importData,className:"hidden"})]})]})})})}),jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto",children:[users.length>1&&jsxRuntimeExports.jsx(Card,{className:"mb-4",children:jsxRuntimeExports.jsx(CardContent,{className:"pt-6",children:jsxRuntimeExports.jsxs("div",{className:"text-center text-gray-600",children:[jsxRuntimeExports.jsx("div",{className:"text-sm",children:"Ultimo accesso:"}),jsxRuntimeExports.jsx("div",{className:"font-semibold",children:(_e=users[users.length-1])==null?void 0:_e.name})]})})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsxs(Button,{size:"lg",className:"text-lg px-8 py-4",onClick:()=>setIsLoginModalOpen(!0),children:[jsxRuntimeExports.jsx(LogIn,{className:"mr-2 h-5 w-5"})," INIZIA TURNO"]})})]})]}),jsxRuntimeExports.jsx(Login,{isOpen:isLoginModalOpen,onClose:()=>setIsLoginModalOpen(!1),onLogin:handleLogin,users,onAddUser:addUser})]})}const index="";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(_e=>{console.log("SW registered: ",_e),_e.addEventListener("updatefound",()=>{const e=_e.installing;e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&confirm("Nuova versione disponibile. Ricaricare la pagina?")&&window.location.reload()})})}).catch(_e=>{console.log("SW registration failed: ",_e)})});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs as g};
