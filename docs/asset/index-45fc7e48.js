(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Yb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Rg={exports:{}},Ru={},Bg={exports:{}},Et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc=Symbol.for("react.element"),uv=Symbol.for("react.portal"),mv=Symbol.for("react.fragment"),hv=Symbol.for("react.strict_mode"),pv=Symbol.for("react.profiler"),fv=Symbol.for("react.provider"),gv=Symbol.for("react.context"),xv=Symbol.for("react.forward_ref"),vv=Symbol.for("react.suspense"),yv=Symbol.for("react.memo"),Nv=Symbol.for("react.lazy"),Xf=Symbol.iterator;function bv(e){return e===null||typeof e!="object"?null:(e=Xf&&e[Xf]||e["@@iterator"],typeof e=="function"?e:null)}var qg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$g=Object.assign,Hg={};function ll(e,t,r){this.props=e,this.context=t,this.refs=Hg,this.updater=r||qg}ll.prototype.isReactComponent={};ll.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ll.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Ug(){}Ug.prototype=ll.prototype;function wp(e,t,r){this.props=e,this.context=t,this.refs=Hg,this.updater=r||qg}var Sp=wp.prototype=new Ug;Sp.constructor=wp;$g(Sp,ll.prototype);Sp.isPureReactComponent=!0;var Zf=Array.isArray,Vg=Object.prototype.hasOwnProperty,Cp={current:null},Gg={key:!0,ref:!0,__self:!0,__source:!0};function Wg(e,t,r){var i,s={},a=null,l=null;if(t!=null)for(i in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)Vg.call(t,i)&&!Gg.hasOwnProperty(i)&&(s[i]=t[i]);var d=arguments.length-2;if(d===1)s.children=r;else if(1<d){for(var c=Array(d),h=0;h<d;h++)c[h]=arguments[h+2];s.children=c}if(e&&e.defaultProps)for(i in d=e.defaultProps,d)s[i]===void 0&&(s[i]=d[i]);return{$$typeof:Oc,type:e,key:a,ref:l,props:s,_owner:Cp.current}}function jv(e,t){return{$$typeof:Oc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function kp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Oc}function wv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var e0=/\/+/g;function Dm(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wv(""+e.key):t.toString(36)}function Jd(e,t,r,i,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Oc:case uv:l=!0}}if(l)return l=e,s=s(l),e=i===""?"."+Dm(l,0):i,Zf(s)?(r="",e!=null&&(r=e.replace(e0,"$&/")+"/"),Jd(s,t,r,"",function(h){return h})):s!=null&&(kp(s)&&(s=jv(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(e0,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=i===""?".":i+":",Zf(e))for(var d=0;d<e.length;d++){a=e[d];var c=i+Dm(a,d);l+=Jd(a,t,r,c,s)}else if(c=bv(e),typeof c=="function")for(e=c.call(e),d=0;!(a=e.next()).done;)a=a.value,c=i+Dm(a,d++),l+=Jd(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function wd(e,t,r){if(e==null)return e;var i=[],s=0;return Jd(e,i,"","",function(a){return t.call(r,a,s++)}),i}function Sv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sr={current:null},Yd={transition:null},Cv={ReactCurrentDispatcher:Sr,ReactCurrentBatchConfig:Yd,ReactCurrentOwner:Cp};function Jg(){throw Error("act(...) is not supported in production builds of React.")}Et.Children={map:wd,forEach:function(e,t,r){wd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return wd(e,function(){t++}),t},toArray:function(e){return wd(e,function(t){return t})||[]},only:function(e){if(!kp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Et.Component=ll;Et.Fragment=mv;Et.Profiler=pv;Et.PureComponent=wp;Et.StrictMode=hv;Et.Suspense=vv;Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cv;Et.act=Jg;Et.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=$g({},e.props),s=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Cp.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(c in t)Vg.call(t,c)&&!Gg.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&d!==void 0?d[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){d=Array(c);for(var h=0;h<c;h++)d[h]=arguments[h+2];i.children=d}return{$$typeof:Oc,type:e.type,key:s,ref:a,props:i,_owner:l}};Et.createContext=function(e){return e={$$typeof:gv,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fv,_context:e},e.Consumer=e};Et.createElement=Wg;Et.createFactory=function(e){var t=Wg.bind(null,e);return t.type=e,t};Et.createRef=function(){return{current:null}};Et.forwardRef=function(e){return{$$typeof:xv,render:e}};Et.isValidElement=kp;Et.lazy=function(e){return{$$typeof:Nv,_payload:{_status:-1,_result:e},_init:Sv}};Et.memo=function(e,t){return{$$typeof:yv,type:e,compare:t===void 0?null:t}};Et.startTransition=function(e){var t=Yd.transition;Yd.transition={};try{e()}finally{Yd.transition=t}};Et.unstable_act=Jg;Et.useCallback=function(e,t){return Sr.current.useCallback(e,t)};Et.useContext=function(e){return Sr.current.useContext(e)};Et.useDebugValue=function(){};Et.useDeferredValue=function(e){return Sr.current.useDeferredValue(e)};Et.useEffect=function(e,t){return Sr.current.useEffect(e,t)};Et.useId=function(){return Sr.current.useId()};Et.useImperativeHandle=function(e,t,r){return Sr.current.useImperativeHandle(e,t,r)};Et.useInsertionEffect=function(e,t){return Sr.current.useInsertionEffect(e,t)};Et.useLayoutEffect=function(e,t){return Sr.current.useLayoutEffect(e,t)};Et.useMemo=function(e,t){return Sr.current.useMemo(e,t)};Et.useReducer=function(e,t,r){return Sr.current.useReducer(e,t,r)};Et.useRef=function(e){return Sr.current.useRef(e)};Et.useState=function(e){return Sr.current.useState(e)};Et.useSyncExternalStore=function(e,t,r){return Sr.current.useSyncExternalStore(e,t,r)};Et.useTransition=function(){return Sr.current.useTransition()};Et.version="18.3.1";Bg.exports=Et;var K=Bg.exports;const qa=dv(K);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv=K,Av=Symbol.for("react.element"),Lv=Symbol.for("react.fragment"),Pv=Object.prototype.hasOwnProperty,zv=kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_v={key:!0,ref:!0,__self:!0,__source:!0};function Yg(e,t,r){var i,s={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)Pv.call(t,i)&&!_v.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:Av,type:e,key:a,ref:l,props:s,_owner:zv.current}}Ru.Fragment=Lv;Ru.jsx=Yg;Ru.jsxs=Yg;Rg.exports=Ru;var n=Rg.exports,xh={},Qg={exports:{}},Xr={},Kg={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(q,le){var oe=q.length;q.push(le);e:for(;0<oe;){var Pe=oe-1>>>1,z=q[Pe];if(0<s(z,le))q[Pe]=le,q[oe]=z,oe=Pe;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var le=q[0],oe=q.pop();if(oe!==le){q[0]=oe;e:for(var Pe=0,z=q.length,U=z>>>1;Pe<U;){var Q=2*(Pe+1)-1,G=q[Q],ae=Q+1,he=q[ae];if(0>s(G,oe))ae<z&&0>s(he,G)?(q[Pe]=he,q[ae]=oe,Pe=ae):(q[Pe]=G,q[Q]=oe,Pe=Q);else if(ae<z&&0>s(he,oe))q[Pe]=he,q[ae]=oe,Pe=ae;else break e}}return le}function s(q,le){var oe=q.sortIndex-le.sortIndex;return oe!==0?oe:q.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var c=[],h=[],x=1,v=null,y=3,m=!1,w=!1,S=!1,j=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(q){for(var le=r(h);le!==null;){if(le.callback===null)i(h);else if(le.startTime<=q)i(h),le.sortIndex=le.expirationTime,t(c,le);else break;le=r(h)}}function V(q){if(S=!1,C(q),!w)if(r(c)!==null)w=!0,F(ee);else{var le=r(h);le!==null&&re(V,le.startTime-q)}}function ee(q,le){w=!1,S&&(S=!1,f(O),O=-1),m=!0;var oe=y;try{for(C(le),v=r(c);v!==null&&(!(v.expirationTime>le)||q&&!M());){var Pe=v.callback;if(typeof Pe=="function"){v.callback=null,y=v.priorityLevel;var z=Pe(v.expirationTime<=le);le=e.unstable_now(),typeof z=="function"?v.callback=z:v===r(c)&&i(c),C(le)}else i(c);v=r(c)}if(v!==null)var U=!0;else{var Q=r(h);Q!==null&&re(V,Q.startTime-le),U=!1}return U}finally{v=null,y=oe,m=!1}}var ce=!1,ne=null,O=-1,J=5,te=-1;function M(){return!(e.unstable_now()-te<J)}function k(){if(ne!==null){var q=e.unstable_now();te=q;var le=!0;try{le=ne(!0,q)}finally{le?P():(ce=!1,ne=null)}}else ce=!1}var P;if(typeof N=="function")P=function(){N(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,T=R.port2;R.port1.onmessage=k,P=function(){T.postMessage(null)}}else P=function(){j(k,0)};function F(q){ne=q,ce||(ce=!0,P())}function re(q,le){O=j(function(){q(e.unstable_now())},le)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_continueExecution=function(){w||m||(w=!0,F(ee))},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(q){switch(y){case 1:case 2:case 3:var le=3;break;default:le=y}var oe=y;y=le;try{return q()}finally{y=oe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(q,le){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var oe=y;y=q;try{return le()}finally{y=oe}},e.unstable_scheduleCallback=function(q,le,oe){var Pe=e.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Pe+oe:Pe):oe=Pe,q){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=oe+z,q={id:x++,callback:le,priorityLevel:q,startTime:oe,expirationTime:z,sortIndex:-1},oe>Pe?(q.sortIndex=oe,t(h,q),r(c)===null&&q===r(h)&&(S?(f(O),O=-1):S=!0,re(V,oe-Pe))):(q.sortIndex=z,t(c,q),w||m||(w=!0,F(ee))),q},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(q){var le=y;return function(){var oe=y;y=le;try{return q.apply(this,arguments)}finally{y=oe}}}})(Xg);Kg.exports=Xg;var Iv=Kg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tv=K,Kr=Iv;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zg=new Set,vc={};function Qa(e,t){tl(e,t),tl(e+"Capture",t)}function tl(e,t){for(vc[e]=t,e=0;e<t.length;e++)Zg.add(t[e])}var Ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=Object.prototype.hasOwnProperty,Mv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,t0={},n0={};function Dv(e){return vh.call(n0,e)?!0:vh.call(t0,e)?!1:Mv.test(e)?n0[e]=!0:(t0[e]=!0,!1)}function Ev(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Fv(e,t,r,i){if(t===null||typeof t>"u"||Ev(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Cr(e,t,r,i,s,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var rr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){rr[e]=new Cr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];rr[t]=new Cr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){rr[e]=new Cr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){rr[e]=new Cr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){rr[e]=new Cr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){rr[e]=new Cr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){rr[e]=new Cr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){rr[e]=new Cr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){rr[e]=new Cr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ap=/[\-:]([a-z])/g;function Lp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ap,Lp);rr[t]=new Cr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ap,Lp);rr[t]=new Cr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ap,Lp);rr[t]=new Cr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){rr[e]=new Cr(e,1,!1,e.toLowerCase(),null,!1,!1)});rr.xlinkHref=new Cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){rr[e]=new Cr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Pp(e,t,r,i){var s=rr.hasOwnProperty(t)?rr[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Fv(t,r,s,i)&&(r=null),i||s===null?Dv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,i=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Ss=Tv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sd=Symbol.for("react.element"),Io=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),yh=Symbol.for("react.profiler"),ex=Symbol.for("react.provider"),tx=Symbol.for("react.context"),_p=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),bh=Symbol.for("react.suspense_list"),Ip=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),nx=Symbol.for("react.offscreen"),r0=Symbol.iterator;function $l(e){return e===null||typeof e!="object"?null:(e=r0&&e[r0]||e["@@iterator"],typeof e=="function"?e:null)}var gn=Object.assign,Em;function Zl(e){if(Em===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Em=t&&t[1]||""}return`
`+Em+e}var Fm=!1;function Om(e,t){if(!e||Fm)return"";Fm=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var i=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){i=h}e.call(t.prototype)}else{try{throw Error()}catch(h){i=h}e()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),a=i.stack.split(`
`),l=s.length-1,d=a.length-1;1<=l&&0<=d&&s[l]!==a[d];)d--;for(;1<=l&&0<=d;l--,d--)if(s[l]!==a[d]){if(l!==1||d!==1)do if(l--,d--,0>d||s[l]!==a[d]){var c=`
`+s[l].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=l&&0<=d);break}}}finally{Fm=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zl(e):""}function Ov(e){switch(e.tag){case 5:return Zl(e.type);case 16:return Zl("Lazy");case 13:return Zl("Suspense");case 19:return Zl("SuspenseList");case 0:case 2:case 15:return e=Om(e.type,!1),e;case 11:return e=Om(e.type.render,!1),e;case 1:return e=Om(e.type,!0),e;default:return""}}function jh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case To:return"Fragment";case Io:return"Portal";case yh:return"Profiler";case zp:return"StrictMode";case Nh:return"Suspense";case bh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case tx:return(e.displayName||"Context")+".Consumer";case ex:return(e._context.displayName||"Context")+".Provider";case _p:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ip:return t=e.displayName||null,t!==null?t:jh(e.type)||"Memo";case Qs:t=e._payload,e=e._init;try{return jh(e(t))}catch{}}return null}function Rv(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jh(t);case 8:return t===zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ha(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bv(e){var t=rx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cd(e){e._valueTracker||(e._valueTracker=Bv(e))}function ix(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=rx(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function uu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wh(e,t){var r=t.checked;return gn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function i0(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ha(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sx(e,t){t=t.checked,t!=null&&Pp(e,"checked",t,!1)}function Sh(e,t){sx(e,t);var r=ha(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ch(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ch(e,t.type,ha(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function s0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ch(e,t,r){(t!=="number"||uu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ec=Array.isArray;function Vo(e,t,r,i){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ha(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function kh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return gn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function a0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(et(92));if(ec(r)){if(1<r.length)throw Error(et(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ha(r)}}function ax(e,t){var r=ha(t.value),i=ha(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function o0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ox(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ah(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ox(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kd,lx=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kd=kd||document.createElement("div"),kd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function yc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qv=["Webkit","ms","Moz","O"];Object.keys(ac).forEach(function(e){qv.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ac[t]=ac[e]})});function cx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ac.hasOwnProperty(e)&&ac[e]?(""+t).trim():t+"px"}function dx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=cx(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}var $v=gn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lh(e,t){if(t){if($v[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function Ph(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zh=null;function Tp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _h=null,Go=null,Wo=null;function l0(e){if(e=qc(e)){if(typeof _h!="function")throw Error(et(280));var t=e.stateNode;t&&(t=Uu(t),_h(e.stateNode,e.type,t))}}function ux(e){Go?Wo?Wo.push(e):Wo=[e]:Go=e}function mx(){if(Go){var e=Go,t=Wo;if(Wo=Go=null,l0(e),t)for(e=0;e<t.length;e++)l0(t[e])}}function hx(e,t){return e(t)}function px(){}var Rm=!1;function fx(e,t,r){if(Rm)return e(t,r);Rm=!0;try{return hx(e,t,r)}finally{Rm=!1,(Go!==null||Wo!==null)&&(px(),mx())}}function Nc(e,t){var r=e.stateNode;if(r===null)return null;var i=Uu(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(et(231,t,typeof r));return r}var Ih=!1;if(Ns)try{var Hl={};Object.defineProperty(Hl,"passive",{get:function(){Ih=!0}}),window.addEventListener("test",Hl,Hl),window.removeEventListener("test",Hl,Hl)}catch{Ih=!1}function Hv(e,t,r,i,s,a,l,d,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(x){this.onError(x)}}var oc=!1,mu=null,hu=!1,Th=null,Uv={onError:function(e){oc=!0,mu=e}};function Vv(e,t,r,i,s,a,l,d,c){oc=!1,mu=null,Hv.apply(Uv,arguments)}function Gv(e,t,r,i,s,a,l,d,c){if(Vv.apply(this,arguments),oc){if(oc){var h=mu;oc=!1,mu=null}else throw Error(et(198));hu||(hu=!0,Th=h)}}function Ka(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function gx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function c0(e){if(Ka(e)!==e)throw Error(et(188))}function Wv(e){var t=e.alternate;if(!t){if(t=Ka(e),t===null)throw Error(et(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return c0(s),e;if(a===i)return c0(s),t;a=a.sibling}throw Error(et(188))}if(r.return!==i.return)r=s,i=a;else{for(var l=!1,d=s.child;d;){if(d===r){l=!0,r=s,i=a;break}if(d===i){l=!0,i=s,r=a;break}d=d.sibling}if(!l){for(d=a.child;d;){if(d===r){l=!0,r=a,i=s;break}if(d===i){l=!0,i=a,r=s;break}d=d.sibling}if(!l)throw Error(et(189))}}if(r.alternate!==i)throw Error(et(190))}if(r.tag!==3)throw Error(et(188));return r.stateNode.current===r?e:t}function xx(e){return e=Wv(e),e!==null?vx(e):null}function vx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vx(e);if(t!==null)return t;e=e.sibling}return null}var yx=Kr.unstable_scheduleCallback,d0=Kr.unstable_cancelCallback,Jv=Kr.unstable_shouldYield,Yv=Kr.unstable_requestPaint,Ln=Kr.unstable_now,Qv=Kr.unstable_getCurrentPriorityLevel,Mp=Kr.unstable_ImmediatePriority,Nx=Kr.unstable_UserBlockingPriority,pu=Kr.unstable_NormalPriority,Kv=Kr.unstable_LowPriority,bx=Kr.unstable_IdlePriority,Bu=null,Qi=null;function Xv(e){if(Qi&&typeof Qi.onCommitFiberRoot=="function")try{Qi.onCommitFiberRoot(Bu,e,void 0,(e.current.flags&128)===128)}catch{}}var Mi=Math.clz32?Math.clz32:t5,Zv=Math.log,e5=Math.LN2;function t5(e){return e>>>=0,e===0?32:31-(Zv(e)/e5|0)|0}var Ad=64,Ld=4194304;function tc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fu(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes,l=r&268435455;if(l!==0){var d=l&~s;d!==0?i=tc(d):(a&=l,a!==0&&(i=tc(a)))}else l=r&~s,l!==0?i=tc(l):a!==0&&(i=tc(a));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-Mi(t),s=1<<r,i|=e[r],t&=~s;return i}function n5(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r5(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-Mi(a),d=1<<l,c=s[l];c===-1?(!(d&r)||d&i)&&(s[l]=n5(d,t)):c<=t&&(e.expiredLanes|=d),a&=~d}}function Mh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jx(){var e=Ad;return Ad<<=1,!(Ad&4194240)&&(Ad=64),e}function Bm(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Rc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mi(t),e[t]=r}function i5(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Mi(r),a=1<<s;t[s]=0,i[s]=-1,e[s]=-1,r&=~a}}function Dp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-Mi(r),s=1<<i;s&t|e[i]&t&&(e[i]|=t),r&=~s}}var Kt=0;function wx(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Sx,Ep,Cx,kx,Ax,Dh=!1,Pd=[],sa=null,aa=null,oa=null,bc=new Map,jc=new Map,Xs=[],s5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function u0(e,t){switch(e){case"focusin":case"focusout":sa=null;break;case"dragenter":case"dragleave":aa=null;break;case"mouseover":case"mouseout":oa=null;break;case"pointerover":case"pointerout":bc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(t.pointerId)}}function Ul(e,t,r,i,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},t!==null&&(t=qc(t),t!==null&&Ep(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function a5(e,t,r,i,s){switch(t){case"focusin":return sa=Ul(sa,e,t,r,i,s),!0;case"dragenter":return aa=Ul(aa,e,t,r,i,s),!0;case"mouseover":return oa=Ul(oa,e,t,r,i,s),!0;case"pointerover":var a=s.pointerId;return bc.set(a,Ul(bc.get(a)||null,e,t,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,jc.set(a,Ul(jc.get(a)||null,e,t,r,i,s)),!0}return!1}function Lx(e){var t=Oa(e.target);if(t!==null){var r=Ka(t);if(r!==null){if(t=r.tag,t===13){if(t=gx(r),t!==null){e.blockedOn=t,Ax(e.priority,function(){Cx(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Eh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);zh=i,r.target.dispatchEvent(i),zh=null}else return t=qc(r),t!==null&&Ep(t),e.blockedOn=r,!1;t.shift()}return!0}function m0(e,t,r){Qd(e)&&r.delete(t)}function o5(){Dh=!1,sa!==null&&Qd(sa)&&(sa=null),aa!==null&&Qd(aa)&&(aa=null),oa!==null&&Qd(oa)&&(oa=null),bc.forEach(m0),jc.forEach(m0)}function Vl(e,t){e.blockedOn===t&&(e.blockedOn=null,Dh||(Dh=!0,Kr.unstable_scheduleCallback(Kr.unstable_NormalPriority,o5)))}function wc(e){function t(s){return Vl(s,e)}if(0<Pd.length){Vl(Pd[0],e);for(var r=1;r<Pd.length;r++){var i=Pd[r];i.blockedOn===e&&(i.blockedOn=null)}}for(sa!==null&&Vl(sa,e),aa!==null&&Vl(aa,e),oa!==null&&Vl(oa,e),bc.forEach(t),jc.forEach(t),r=0;r<Xs.length;r++)i=Xs[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Xs.length&&(r=Xs[0],r.blockedOn===null);)Lx(r),r.blockedOn===null&&Xs.shift()}var Jo=Ss.ReactCurrentBatchConfig,gu=!0;function l5(e,t,r,i){var s=Kt,a=Jo.transition;Jo.transition=null;try{Kt=1,Fp(e,t,r,i)}finally{Kt=s,Jo.transition=a}}function c5(e,t,r,i){var s=Kt,a=Jo.transition;Jo.transition=null;try{Kt=4,Fp(e,t,r,i)}finally{Kt=s,Jo.transition=a}}function Fp(e,t,r,i){if(gu){var s=Eh(e,t,r,i);if(s===null)Qm(e,t,i,xu,r),u0(e,i);else if(a5(s,e,t,r,i))i.stopPropagation();else if(u0(e,i),t&4&&-1<s5.indexOf(e)){for(;s!==null;){var a=qc(s);if(a!==null&&Sx(a),a=Eh(e,t,r,i),a===null&&Qm(e,t,i,xu,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Qm(e,t,i,null,r)}}var xu=null;function Eh(e,t,r,i){if(xu=null,e=Tp(i),e=Oa(e),e!==null)if(t=Ka(e),t===null)e=null;else if(r=t.tag,r===13){if(e=gx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xu=e,null}function Px(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qv()){case Mp:return 1;case Nx:return 4;case pu:case Kv:return 16;case bx:return 536870912;default:return 16}default:return 16}}var ea=null,Op=null,Kd=null;function zx(){if(Kd)return Kd;var e,t=Op,r=t.length,i,s="value"in ea?ea.value:ea.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var l=r-e;for(i=1;i<=l&&t[r-i]===s[a-i];i++);return Kd=s.slice(e,1<i?1-i:void 0)}function Xd(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function zd(){return!0}function h0(){return!1}function Zr(e){function t(r,i,s,a,l){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(r=e[d],this[d]=r?r(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zd:h0,this.isPropagationStopped=h0,this}return gn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zd)},persist:function(){},isPersistent:zd}),t}var cl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rp=Zr(cl),Bc=gn({},cl,{view:0,detail:0}),d5=Zr(Bc),qm,$m,Gl,qu=gn({},Bc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Gl&&(Gl&&e.type==="mousemove"?(qm=e.screenX-Gl.screenX,$m=e.screenY-Gl.screenY):$m=qm=0,Gl=e),qm)},movementY:function(e){return"movementY"in e?e.movementY:$m}}),p0=Zr(qu),u5=gn({},qu,{dataTransfer:0}),m5=Zr(u5),h5=gn({},Bc,{relatedTarget:0}),Hm=Zr(h5),p5=gn({},cl,{animationName:0,elapsedTime:0,pseudoElement:0}),f5=Zr(p5),g5=gn({},cl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),x5=Zr(g5),v5=gn({},cl,{data:0}),f0=Zr(v5),y5={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},N5={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b5={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j5(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=b5[e])?!!t[e]:!1}function Bp(){return j5}var w5=gn({},Bc,{key:function(e){if(e.key){var t=y5[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xd(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?N5[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(e){return e.type==="keypress"?Xd(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xd(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),S5=Zr(w5),C5=gn({},qu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),g0=Zr(C5),k5=gn({},Bc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),A5=Zr(k5),L5=gn({},cl,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5=Zr(L5),z5=gn({},qu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_5=Zr(z5),I5=[9,13,27,32],qp=Ns&&"CompositionEvent"in window,lc=null;Ns&&"documentMode"in document&&(lc=document.documentMode);var T5=Ns&&"TextEvent"in window&&!lc,_x=Ns&&(!qp||lc&&8<lc&&11>=lc),x0=String.fromCharCode(32),v0=!1;function Ix(e,t){switch(e){case"keyup":return I5.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mo=!1;function M5(e,t){switch(e){case"compositionend":return Tx(t);case"keypress":return t.which!==32?null:(v0=!0,x0);case"textInput":return e=t.data,e===x0&&v0?null:e;default:return null}}function D5(e,t){if(Mo)return e==="compositionend"||!qp&&Ix(e,t)?(e=zx(),Kd=Op=ea=null,Mo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _x&&t.locale!=="ko"?null:t.data;default:return null}}var E5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function y0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!E5[e.type]:t==="textarea"}function Mx(e,t,r,i){ux(i),t=vu(t,"onChange"),0<t.length&&(r=new Rp("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var cc=null,Sc=null;function F5(e){Vx(e,0)}function $u(e){var t=Fo(e);if(ix(t))return e}function O5(e,t){if(e==="change")return t}var Dx=!1;if(Ns){var Um;if(Ns){var Vm="oninput"in document;if(!Vm){var N0=document.createElement("div");N0.setAttribute("oninput","return;"),Vm=typeof N0.oninput=="function"}Um=Vm}else Um=!1;Dx=Um&&(!document.documentMode||9<document.documentMode)}function b0(){cc&&(cc.detachEvent("onpropertychange",Ex),Sc=cc=null)}function Ex(e){if(e.propertyName==="value"&&$u(Sc)){var t=[];Mx(t,Sc,e,Tp(e)),fx(F5,t)}}function R5(e,t,r){e==="focusin"?(b0(),cc=t,Sc=r,cc.attachEvent("onpropertychange",Ex)):e==="focusout"&&b0()}function B5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return $u(Sc)}function q5(e,t){if(e==="click")return $u(t)}function $5(e,t){if(e==="input"||e==="change")return $u(t)}function H5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ei=typeof Object.is=="function"?Object.is:H5;function Cc(e,t){if(Ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!vh.call(t,s)||!Ei(e[s],t[s]))return!1}return!0}function j0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function w0(e,t){var r=j0(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=j0(r)}}function Fx(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Fx(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ox(){for(var e=window,t=uu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=uu(e.document)}return t}function $p(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function U5(e){var t=Ox(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Fx(r.ownerDocument.documentElement,r)){if(i!==null&&$p(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!e.extend&&a>i&&(s=i,i=a,a=s),s=w0(r,a);var l=w0(r,i);s&&l&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>i?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var V5=Ns&&"documentMode"in document&&11>=document.documentMode,Do=null,Fh=null,dc=null,Oh=!1;function S0(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Oh||Do==null||Do!==uu(i)||(i=Do,"selectionStart"in i&&$p(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),dc&&Cc(dc,i)||(dc=i,i=vu(Fh,"onSelect"),0<i.length&&(t=new Rp("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Do)))}function _d(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Eo={animationend:_d("Animation","AnimationEnd"),animationiteration:_d("Animation","AnimationIteration"),animationstart:_d("Animation","AnimationStart"),transitionend:_d("Transition","TransitionEnd")},Gm={},Rx={};Ns&&(Rx=document.createElement("div").style,"AnimationEvent"in window||(delete Eo.animationend.animation,delete Eo.animationiteration.animation,delete Eo.animationstart.animation),"TransitionEvent"in window||delete Eo.transitionend.transition);function Hu(e){if(Gm[e])return Gm[e];if(!Eo[e])return e;var t=Eo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Rx)return Gm[e]=t[r];return e}var Bx=Hu("animationend"),qx=Hu("animationiteration"),$x=Hu("animationstart"),Hx=Hu("transitionend"),Ux=new Map,C0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xa(e,t){Ux.set(e,t),Qa(t,[e])}for(var Wm=0;Wm<C0.length;Wm++){var Jm=C0[Wm],G5=Jm.toLowerCase(),W5=Jm[0].toUpperCase()+Jm.slice(1);xa(G5,"on"+W5)}xa(Bx,"onAnimationEnd");xa(qx,"onAnimationIteration");xa($x,"onAnimationStart");xa("dblclick","onDoubleClick");xa("focusin","onFocus");xa("focusout","onBlur");xa(Hx,"onTransitionEnd");tl("onMouseEnter",["mouseout","mouseover"]);tl("onMouseLeave",["mouseout","mouseover"]);tl("onPointerEnter",["pointerout","pointerover"]);tl("onPointerLeave",["pointerout","pointerover"]);Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J5=new Set("cancel close invalid load scroll toggle".split(" ").concat(nc));function k0(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Gv(i,t,void 0,e),e.currentTarget=null}function Vx(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var l=i.length-1;0<=l;l--){var d=i[l],c=d.instance,h=d.currentTarget;if(d=d.listener,c!==a&&s.isPropagationStopped())break e;k0(s,d,h),a=c}else for(l=0;l<i.length;l++){if(d=i[l],c=d.instance,h=d.currentTarget,d=d.listener,c!==a&&s.isPropagationStopped())break e;k0(s,d,h),a=c}}}if(hu)throw e=Th,hu=!1,Th=null,e}function sn(e,t){var r=t[Hh];r===void 0&&(r=t[Hh]=new Set);var i=e+"__bubble";r.has(i)||(Gx(t,e,2,!1),r.add(i))}function Ym(e,t,r){var i=0;t&&(i|=4),Gx(r,e,i,t)}var Id="_reactListening"+Math.random().toString(36).slice(2);function kc(e){if(!e[Id]){e[Id]=!0,Zg.forEach(function(r){r!=="selectionchange"&&(J5.has(r)||Ym(r,!1,e),Ym(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Id]||(t[Id]=!0,Ym("selectionchange",!1,t))}}function Gx(e,t,r,i){switch(Px(t)){case 1:var s=l5;break;case 4:s=c5;break;default:s=Fp}r=s.bind(null,t,r,e),s=void 0,!Ih||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Qm(e,t,r,i,s){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var d=i.stateNode.containerInfo;if(d===s||d.nodeType===8&&d.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;l=l.return}for(;d!==null;){if(l=Oa(d),l===null)return;if(c=l.tag,c===5||c===6){i=a=l;continue e}d=d.parentNode}}i=i.return}fx(function(){var h=a,x=Tp(r),v=[];e:{var y=Ux.get(e);if(y!==void 0){var m=Rp,w=e;switch(e){case"keypress":if(Xd(r)===0)break e;case"keydown":case"keyup":m=S5;break;case"focusin":w="focus",m=Hm;break;case"focusout":w="blur",m=Hm;break;case"beforeblur":case"afterblur":m=Hm;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=p0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=m5;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=A5;break;case Bx:case qx:case $x:m=f5;break;case Hx:m=P5;break;case"scroll":m=d5;break;case"wheel":m=_5;break;case"copy":case"cut":case"paste":m=x5;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=g0}var S=(t&4)!==0,j=!S&&e==="scroll",f=S?y!==null?y+"Capture":null:y;S=[];for(var N=h,C;N!==null;){C=N;var V=C.stateNode;if(C.tag===5&&V!==null&&(C=V,f!==null&&(V=Nc(N,f),V!=null&&S.push(Ac(N,V,C)))),j)break;N=N.return}0<S.length&&(y=new m(y,w,null,r,x),v.push({event:y,listeners:S}))}}if(!(t&7)){e:{if(y=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",y&&r!==zh&&(w=r.relatedTarget||r.fromElement)&&(Oa(w)||w[bs]))break e;if((m||y)&&(y=x.window===x?x:(y=x.ownerDocument)?y.defaultView||y.parentWindow:window,m?(w=r.relatedTarget||r.toElement,m=h,w=w?Oa(w):null,w!==null&&(j=Ka(w),w!==j||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=h),m!==w)){if(S=p0,V="onMouseLeave",f="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(S=g0,V="onPointerLeave",f="onPointerEnter",N="pointer"),j=m==null?y:Fo(m),C=w==null?y:Fo(w),y=new S(V,N+"leave",m,r,x),y.target=j,y.relatedTarget=C,V=null,Oa(x)===h&&(S=new S(f,N+"enter",w,r,x),S.target=C,S.relatedTarget=j,V=S),j=V,m&&w)t:{for(S=m,f=w,N=0,C=S;C;C=So(C))N++;for(C=0,V=f;V;V=So(V))C++;for(;0<N-C;)S=So(S),N--;for(;0<C-N;)f=So(f),C--;for(;N--;){if(S===f||f!==null&&S===f.alternate)break t;S=So(S),f=So(f)}S=null}else S=null;m!==null&&A0(v,y,m,S,!1),w!==null&&j!==null&&A0(v,j,w,S,!0)}}e:{if(y=h?Fo(h):window,m=y.nodeName&&y.nodeName.toLowerCase(),m==="select"||m==="input"&&y.type==="file")var ee=O5;else if(y0(y))if(Dx)ee=$5;else{ee=B5;var ce=R5}else(m=y.nodeName)&&m.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(ee=q5);if(ee&&(ee=ee(e,h))){Mx(v,ee,r,x);break e}ce&&ce(e,y,h),e==="focusout"&&(ce=y._wrapperState)&&ce.controlled&&y.type==="number"&&Ch(y,"number",y.value)}switch(ce=h?Fo(h):window,e){case"focusin":(y0(ce)||ce.contentEditable==="true")&&(Do=ce,Fh=h,dc=null);break;case"focusout":dc=Fh=Do=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,S0(v,r,x);break;case"selectionchange":if(V5)break;case"keydown":case"keyup":S0(v,r,x)}var ne;if(qp)e:{switch(e){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Mo?Ix(e,r)&&(O="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(_x&&r.locale!=="ko"&&(Mo||O!=="onCompositionStart"?O==="onCompositionEnd"&&Mo&&(ne=zx()):(ea=x,Op="value"in ea?ea.value:ea.textContent,Mo=!0)),ce=vu(h,O),0<ce.length&&(O=new f0(O,e,null,r,x),v.push({event:O,listeners:ce}),ne?O.data=ne:(ne=Tx(r),ne!==null&&(O.data=ne)))),(ne=T5?M5(e,r):D5(e,r))&&(h=vu(h,"onBeforeInput"),0<h.length&&(x=new f0("onBeforeInput","beforeinput",null,r,x),v.push({event:x,listeners:h}),x.data=ne))}Vx(v,t)})}function Ac(e,t,r){return{instance:e,listener:t,currentTarget:r}}function vu(e,t){for(var r=t+"Capture",i=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Nc(e,r),a!=null&&i.unshift(Ac(e,a,s)),a=Nc(e,t),a!=null&&i.push(Ac(e,a,s))),e=e.return}return i}function So(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function A0(e,t,r,i,s){for(var a=t._reactName,l=[];r!==null&&r!==i;){var d=r,c=d.alternate,h=d.stateNode;if(c!==null&&c===i)break;d.tag===5&&h!==null&&(d=h,s?(c=Nc(r,a),c!=null&&l.unshift(Ac(r,c,d))):s||(c=Nc(r,a),c!=null&&l.push(Ac(r,c,d)))),r=r.return}l.length!==0&&e.push({event:t,listeners:l})}var Y5=/\r\n?/g,Q5=/\u0000|\uFFFD/g;function L0(e){return(typeof e=="string"?e:""+e).replace(Y5,`
`).replace(Q5,"")}function Td(e,t,r){if(t=L0(t),L0(e)!==t&&r)throw Error(et(425))}function yu(){}var Rh=null,Bh=null;function qh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,K5=typeof clearTimeout=="function"?clearTimeout:void 0,P0=typeof Promise=="function"?Promise:void 0,X5=typeof queueMicrotask=="function"?queueMicrotask:typeof P0<"u"?function(e){return P0.resolve(null).then(e).catch(Z5)}:$h;function Z5(e){setTimeout(function(){throw e})}function Km(e,t){var r=t,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){e.removeChild(s),wc(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);wc(t)}function la(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function z0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var dl=Math.random().toString(36).slice(2),Ji="__reactFiber$"+dl,Lc="__reactProps$"+dl,bs="__reactContainer$"+dl,Hh="__reactEvents$"+dl,ey="__reactListeners$"+dl,ty="__reactHandles$"+dl;function Oa(e){var t=e[Ji];if(t)return t;for(var r=e.parentNode;r;){if(t=r[bs]||r[Ji]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=z0(e);e!==null;){if(r=e[Ji])return r;e=z0(e)}return t}e=r,r=e.parentNode}return null}function qc(e){return e=e[Ji]||e[bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Fo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function Uu(e){return e[Lc]||null}var Uh=[],Oo=-1;function va(e){return{current:e}}function on(e){0>Oo||(e.current=Uh[Oo],Uh[Oo]=null,Oo--)}function rn(e,t){Oo++,Uh[Oo]=e.current,e.current=t}var pa={},gr=va(pa),Fr=va(!1),Va=pa;function nl(e,t){var r=e.type.contextTypes;if(!r)return pa;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Or(e){return e=e.childContextTypes,e!=null}function Nu(){on(Fr),on(gr)}function _0(e,t,r){if(gr.current!==pa)throw Error(et(168));rn(gr,t),rn(Fr,r)}function Wx(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(et(108,Rv(e)||"Unknown",s));return gn({},r,i)}function bu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pa,Va=gr.current,rn(gr,e),rn(Fr,Fr.current),!0}function I0(e,t,r){var i=e.stateNode;if(!i)throw Error(et(169));r?(e=Wx(e,t,Va),i.__reactInternalMemoizedMergedChildContext=e,on(Fr),on(gr),rn(gr,e)):on(Fr),rn(Fr,r)}var gs=null,Vu=!1,Xm=!1;function Jx(e){gs===null?gs=[e]:gs.push(e)}function ny(e){Vu=!0,Jx(e)}function ya(){if(!Xm&&gs!==null){Xm=!0;var e=0,t=Kt;try{var r=gs;for(Kt=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}gs=null,Vu=!1}catch(s){throw gs!==null&&(gs=gs.slice(e+1)),yx(Mp,ya),s}finally{Kt=t,Xm=!1}}return null}var Ro=[],Bo=0,ju=null,wu=0,hi=[],pi=0,Ga=null,xs=1,vs="";function Ta(e,t){Ro[Bo++]=wu,Ro[Bo++]=ju,ju=e,wu=t}function Yx(e,t,r){hi[pi++]=xs,hi[pi++]=vs,hi[pi++]=Ga,Ga=e;var i=xs;e=vs;var s=32-Mi(i)-1;i&=~(1<<s),r+=1;var a=32-Mi(t)+s;if(30<a){var l=s-s%5;a=(i&(1<<l)-1).toString(32),i>>=l,s-=l,xs=1<<32-Mi(t)+s|r<<s|i,vs=a+e}else xs=1<<a|r<<s|i,vs=e}function Hp(e){e.return!==null&&(Ta(e,1),Yx(e,1,0))}function Up(e){for(;e===ju;)ju=Ro[--Bo],Ro[Bo]=null,wu=Ro[--Bo],Ro[Bo]=null;for(;e===Ga;)Ga=hi[--pi],hi[pi]=null,vs=hi[--pi],hi[pi]=null,xs=hi[--pi],hi[pi]=null}var Qr=null,Jr=null,cn=!1,Ti=null;function Qx(e,t){var r=gi(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function T0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qr=e,Jr=la(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qr=e,Jr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ga!==null?{id:xs,overflow:vs}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gi(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Qr=e,Jr=null,!0):!1;default:return!1}}function Vh(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gh(e){if(cn){var t=Jr;if(t){var r=t;if(!T0(e,t)){if(Vh(e))throw Error(et(418));t=la(r.nextSibling);var i=Qr;t&&T0(e,t)?Qx(i,r):(e.flags=e.flags&-4097|2,cn=!1,Qr=e)}}else{if(Vh(e))throw Error(et(418));e.flags=e.flags&-4097|2,cn=!1,Qr=e}}}function M0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qr=e}function Md(e){if(e!==Qr)return!1;if(!cn)return M0(e),cn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!qh(e.type,e.memoizedProps)),t&&(t=Jr)){if(Vh(e))throw Kx(),Error(et(418));for(;t;)Qx(e,t),t=la(t.nextSibling)}if(M0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Jr=la(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Jr=null}}else Jr=Qr?la(e.stateNode.nextSibling):null;return!0}function Kx(){for(var e=Jr;e;)e=la(e.nextSibling)}function rl(){Jr=Qr=null,cn=!1}function Vp(e){Ti===null?Ti=[e]:Ti.push(e)}var ry=Ss.ReactCurrentBatchConfig;function Wl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(et(309));var i=r.stateNode}if(!i)throw Error(et(147,e));var s=i,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var d=s.refs;l===null?delete d[a]:d[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(et(284));if(!r._owner)throw Error(et(290,e))}return e}function Dd(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function D0(e){var t=e._init;return t(e._payload)}function Xx(e){function t(f,N){if(e){var C=f.deletions;C===null?(f.deletions=[N],f.flags|=16):C.push(N)}}function r(f,N){if(!e)return null;for(;N!==null;)t(f,N),N=N.sibling;return null}function i(f,N){for(f=new Map;N!==null;)N.key!==null?f.set(N.key,N):f.set(N.index,N),N=N.sibling;return f}function s(f,N){return f=ma(f,N),f.index=0,f.sibling=null,f}function a(f,N,C){return f.index=C,e?(C=f.alternate,C!==null?(C=C.index,C<N?(f.flags|=2,N):C):(f.flags|=2,N)):(f.flags|=1048576,N)}function l(f){return e&&f.alternate===null&&(f.flags|=2),f}function d(f,N,C,V){return N===null||N.tag!==6?(N=sh(C,f.mode,V),N.return=f,N):(N=s(N,C),N.return=f,N)}function c(f,N,C,V){var ee=C.type;return ee===To?x(f,N,C.props.children,V,C.key):N!==null&&(N.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Qs&&D0(ee)===N.type)?(V=s(N,C.props),V.ref=Wl(f,N,C),V.return=f,V):(V=su(C.type,C.key,C.props,null,f.mode,V),V.ref=Wl(f,N,C),V.return=f,V)}function h(f,N,C,V){return N===null||N.tag!==4||N.stateNode.containerInfo!==C.containerInfo||N.stateNode.implementation!==C.implementation?(N=ah(C,f.mode,V),N.return=f,N):(N=s(N,C.children||[]),N.return=f,N)}function x(f,N,C,V,ee){return N===null||N.tag!==7?(N=Ha(C,f.mode,V,ee),N.return=f,N):(N=s(N,C),N.return=f,N)}function v(f,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return N=sh(""+N,f.mode,C),N.return=f,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sd:return C=su(N.type,N.key,N.props,null,f.mode,C),C.ref=Wl(f,null,N),C.return=f,C;case Io:return N=ah(N,f.mode,C),N.return=f,N;case Qs:var V=N._init;return v(f,V(N._payload),C)}if(ec(N)||$l(N))return N=Ha(N,f.mode,C,null),N.return=f,N;Dd(f,N)}return null}function y(f,N,C,V){var ee=N!==null?N.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return ee!==null?null:d(f,N,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Sd:return C.key===ee?c(f,N,C,V):null;case Io:return C.key===ee?h(f,N,C,V):null;case Qs:return ee=C._init,y(f,N,ee(C._payload),V)}if(ec(C)||$l(C))return ee!==null?null:x(f,N,C,V,null);Dd(f,C)}return null}function m(f,N,C,V,ee){if(typeof V=="string"&&V!==""||typeof V=="number")return f=f.get(C)||null,d(N,f,""+V,ee);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Sd:return f=f.get(V.key===null?C:V.key)||null,c(N,f,V,ee);case Io:return f=f.get(V.key===null?C:V.key)||null,h(N,f,V,ee);case Qs:var ce=V._init;return m(f,N,C,ce(V._payload),ee)}if(ec(V)||$l(V))return f=f.get(C)||null,x(N,f,V,ee,null);Dd(N,V)}return null}function w(f,N,C,V){for(var ee=null,ce=null,ne=N,O=N=0,J=null;ne!==null&&O<C.length;O++){ne.index>O?(J=ne,ne=null):J=ne.sibling;var te=y(f,ne,C[O],V);if(te===null){ne===null&&(ne=J);break}e&&ne&&te.alternate===null&&t(f,ne),N=a(te,N,O),ce===null?ee=te:ce.sibling=te,ce=te,ne=J}if(O===C.length)return r(f,ne),cn&&Ta(f,O),ee;if(ne===null){for(;O<C.length;O++)ne=v(f,C[O],V),ne!==null&&(N=a(ne,N,O),ce===null?ee=ne:ce.sibling=ne,ce=ne);return cn&&Ta(f,O),ee}for(ne=i(f,ne);O<C.length;O++)J=m(ne,f,O,C[O],V),J!==null&&(e&&J.alternate!==null&&ne.delete(J.key===null?O:J.key),N=a(J,N,O),ce===null?ee=J:ce.sibling=J,ce=J);return e&&ne.forEach(function(M){return t(f,M)}),cn&&Ta(f,O),ee}function S(f,N,C,V){var ee=$l(C);if(typeof ee!="function")throw Error(et(150));if(C=ee.call(C),C==null)throw Error(et(151));for(var ce=ee=null,ne=N,O=N=0,J=null,te=C.next();ne!==null&&!te.done;O++,te=C.next()){ne.index>O?(J=ne,ne=null):J=ne.sibling;var M=y(f,ne,te.value,V);if(M===null){ne===null&&(ne=J);break}e&&ne&&M.alternate===null&&t(f,ne),N=a(M,N,O),ce===null?ee=M:ce.sibling=M,ce=M,ne=J}if(te.done)return r(f,ne),cn&&Ta(f,O),ee;if(ne===null){for(;!te.done;O++,te=C.next())te=v(f,te.value,V),te!==null&&(N=a(te,N,O),ce===null?ee=te:ce.sibling=te,ce=te);return cn&&Ta(f,O),ee}for(ne=i(f,ne);!te.done;O++,te=C.next())te=m(ne,f,O,te.value,V),te!==null&&(e&&te.alternate!==null&&ne.delete(te.key===null?O:te.key),N=a(te,N,O),ce===null?ee=te:ce.sibling=te,ce=te);return e&&ne.forEach(function(k){return t(f,k)}),cn&&Ta(f,O),ee}function j(f,N,C,V){if(typeof C=="object"&&C!==null&&C.type===To&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Sd:e:{for(var ee=C.key,ce=N;ce!==null;){if(ce.key===ee){if(ee=C.type,ee===To){if(ce.tag===7){r(f,ce.sibling),N=s(ce,C.props.children),N.return=f,f=N;break e}}else if(ce.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===Qs&&D0(ee)===ce.type){r(f,ce.sibling),N=s(ce,C.props),N.ref=Wl(f,ce,C),N.return=f,f=N;break e}r(f,ce);break}else t(f,ce);ce=ce.sibling}C.type===To?(N=Ha(C.props.children,f.mode,V,C.key),N.return=f,f=N):(V=su(C.type,C.key,C.props,null,f.mode,V),V.ref=Wl(f,N,C),V.return=f,f=V)}return l(f);case Io:e:{for(ce=C.key;N!==null;){if(N.key===ce)if(N.tag===4&&N.stateNode.containerInfo===C.containerInfo&&N.stateNode.implementation===C.implementation){r(f,N.sibling),N=s(N,C.children||[]),N.return=f,f=N;break e}else{r(f,N);break}else t(f,N);N=N.sibling}N=ah(C,f.mode,V),N.return=f,f=N}return l(f);case Qs:return ce=C._init,j(f,N,ce(C._payload),V)}if(ec(C))return w(f,N,C,V);if($l(C))return S(f,N,C,V);Dd(f,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,N!==null&&N.tag===6?(r(f,N.sibling),N=s(N,C),N.return=f,f=N):(r(f,N),N=sh(C,f.mode,V),N.return=f,f=N),l(f)):r(f,N)}return j}var il=Xx(!0),Zx=Xx(!1),Su=va(null),Cu=null,qo=null,Gp=null;function Wp(){Gp=qo=Cu=null}function Jp(e){var t=Su.current;on(Su),e._currentValue=t}function Wh(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Yo(e,t){Cu=e,Gp=qo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Er=!0),e.firstContext=null)}function bi(e){var t=e._currentValue;if(Gp!==e)if(e={context:e,memoizedValue:t,next:null},qo===null){if(Cu===null)throw Error(et(308));qo=e,Cu.dependencies={lanes:0,firstContext:e}}else qo=qo.next=e;return t}var Ra=null;function Yp(e){Ra===null?Ra=[e]:Ra.push(e)}function e1(e,t,r,i){var s=t.interleaved;return s===null?(r.next=r,Yp(t)):(r.next=s.next,s.next=r),t.interleaved=r,js(e,i)}function js(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ks=!1;function Qp(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t1(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ys(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,$t&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,js(e,r)}return s=i.interleaved,s===null?(t.next=t,Yp(i)):(t.next=s.next,s.next=t),i.interleaved=t,js(e,r)}function Zd(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Dp(e,r)}}function E0(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var l={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=l:a=a.next=l,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ku(e,t,r,i){var s=e.updateQueue;Ks=!1;var a=s.firstBaseUpdate,l=s.lastBaseUpdate,d=s.shared.pending;if(d!==null){s.shared.pending=null;var c=d,h=c.next;c.next=null,l===null?a=h:l.next=h,l=c;var x=e.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==l&&(d===null?x.firstBaseUpdate=h:d.next=h,x.lastBaseUpdate=c))}if(a!==null){var v=s.baseState;l=0,x=h=c=null,d=a;do{var y=d.lane,m=d.eventTime;if((i&y)===y){x!==null&&(x=x.next={eventTime:m,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var w=e,S=d;switch(y=t,m=r,S.tag){case 1:if(w=S.payload,typeof w=="function"){v=w.call(m,v,y);break e}v=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=S.payload,y=typeof w=="function"?w.call(m,v,y):w,y==null)break e;v=gn({},v,y);break e;case 2:Ks=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,y=s.effects,y===null?s.effects=[d]:y.push(d))}else m={eventTime:m,lane:y,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(h=x=m,c=v):x=x.next=m,l|=y;if(d=d.next,d===null){if(d=s.shared.pending,d===null)break;y=d,d=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(1);if(x===null&&(c=v),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=x,t=s.shared.interleaved,t!==null){s=t;do l|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Ja|=l,e.lanes=l,e.memoizedState=v}}function F0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(et(191,s));s.call(i)}}}var $c={},Ki=va($c),Pc=va($c),zc=va($c);function Ba(e){if(e===$c)throw Error(et(174));return e}function Kp(e,t){switch(rn(zc,t),rn(Pc,e),rn(Ki,$c),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ah(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ah(t,e)}on(Ki),rn(Ki,t)}function sl(){on(Ki),on(Pc),on(zc)}function n1(e){Ba(zc.current);var t=Ba(Ki.current),r=Ah(t,e.type);t!==r&&(rn(Pc,e),rn(Ki,r))}function Xp(e){Pc.current===e&&(on(Ki),on(Pc))}var pn=va(0);function Au(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Zm=[];function Zp(){for(var e=0;e<Zm.length;e++)Zm[e]._workInProgressVersionPrimary=null;Zm.length=0}var eu=Ss.ReactCurrentDispatcher,eh=Ss.ReactCurrentBatchConfig,Wa=0,fn=null,$n=null,Wn=null,Lu=!1,uc=!1,_c=0,iy=0;function or(){throw Error(et(321))}function ef(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ei(e[r],t[r]))return!1;return!0}function tf(e,t,r,i,s,a){if(Wa=a,fn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,eu.current=e===null||e.memoizedState===null?ly:cy,e=r(i,s),uc){a=0;do{if(uc=!1,_c=0,25<=a)throw Error(et(301));a+=1,Wn=$n=null,t.updateQueue=null,eu.current=dy,e=r(i,s)}while(uc)}if(eu.current=Pu,t=$n!==null&&$n.next!==null,Wa=0,Wn=$n=fn=null,Lu=!1,t)throw Error(et(300));return e}function nf(){var e=_c!==0;return _c=0,e}function Wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?fn.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function ji(){if($n===null){var e=fn.alternate;e=e!==null?e.memoizedState:null}else e=$n.next;var t=Wn===null?fn.memoizedState:Wn.next;if(t!==null)Wn=t,$n=e;else{if(e===null)throw Error(et(310));$n=e,e={memoizedState:$n.memoizedState,baseState:$n.baseState,baseQueue:$n.baseQueue,queue:$n.queue,next:null},Wn===null?fn.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function Ic(e,t){return typeof t=="function"?t(e):t}function th(e){var t=ji(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var i=$n,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var l=s.next;s.next=a.next,a.next=l}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var d=l=null,c=null,h=a;do{var x=h.lane;if((Wa&x)===x)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:e(i,h.action);else{var v={lane:x,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(d=c=v,l=i):c=c.next=v,fn.lanes|=x,Ja|=x}h=h.next}while(h!==null&&h!==a);c===null?l=i:c.next=d,Ei(i,t.memoizedState)||(Er=!0),t.memoizedState=i,t.baseState=l,t.baseQueue=c,r.lastRenderedState=i}if(e=r.interleaved,e!==null){s=e;do a=s.lane,fn.lanes|=a,Ja|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function nh(e){var t=ji(),r=t.queue;if(r===null)throw Error(et(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var l=s=s.next;do a=e(a,l.action),l=l.next;while(l!==s);Ei(a,t.memoizedState)||(Er=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function r1(){}function i1(e,t){var r=fn,i=ji(),s=t(),a=!Ei(i.memoizedState,s);if(a&&(i.memoizedState=s,Er=!0),i=i.queue,rf(o1.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||Wn!==null&&Wn.memoizedState.tag&1){if(r.flags|=2048,Tc(9,a1.bind(null,r,i,s,t),void 0,null),Yn===null)throw Error(et(349));Wa&30||s1(r,t,s)}return s}function s1(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function a1(e,t,r,i){t.value=r,t.getSnapshot=i,l1(t)&&c1(e)}function o1(e,t,r){return r(function(){l1(t)&&c1(e)})}function l1(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ei(e,r)}catch{return!0}}function c1(e){var t=js(e,1);t!==null&&Di(t,e,1,-1)}function O0(e){var t=Wi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ic,lastRenderedState:e},t.queue=e,e=e.dispatch=oy.bind(null,fn,e),[t.memoizedState,e]}function Tc(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=fn.updateQueue,t===null?(t={lastEffect:null,stores:null},fn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function d1(){return ji().memoizedState}function tu(e,t,r,i){var s=Wi();fn.flags|=e,s.memoizedState=Tc(1|t,r,void 0,i===void 0?null:i)}function Gu(e,t,r,i){var s=ji();i=i===void 0?null:i;var a=void 0;if($n!==null){var l=$n.memoizedState;if(a=l.destroy,i!==null&&ef(i,l.deps)){s.memoizedState=Tc(t,r,a,i);return}}fn.flags|=e,s.memoizedState=Tc(1|t,r,a,i)}function R0(e,t){return tu(8390656,8,e,t)}function rf(e,t){return Gu(2048,8,e,t)}function u1(e,t){return Gu(4,2,e,t)}function m1(e,t){return Gu(4,4,e,t)}function h1(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function p1(e,t,r){return r=r!=null?r.concat([e]):null,Gu(4,4,h1.bind(null,t,e),r)}function sf(){}function f1(e,t){var r=ji();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ef(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function g1(e,t){var r=ji();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ef(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function x1(e,t,r){return Wa&21?(Ei(r,t)||(r=jx(),fn.lanes|=r,Ja|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Er=!0),e.memoizedState=r)}function sy(e,t){var r=Kt;Kt=r!==0&&4>r?r:4,e(!0);var i=eh.transition;eh.transition={};try{e(!1),t()}finally{Kt=r,eh.transition=i}}function v1(){return ji().memoizedState}function ay(e,t,r){var i=ua(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},y1(e))N1(t,r);else if(r=e1(e,t,r,i),r!==null){var s=wr();Di(r,e,i,s),b1(r,t,i)}}function oy(e,t,r){var i=ua(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(y1(e))N1(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,d=a(l,r);if(s.hasEagerState=!0,s.eagerState=d,Ei(d,l)){var c=t.interleaved;c===null?(s.next=s,Yp(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=e1(e,t,s,i),r!==null&&(s=wr(),Di(r,e,i,s),b1(r,t,i))}}function y1(e){var t=e.alternate;return e===fn||t!==null&&t===fn}function N1(e,t){uc=Lu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function b1(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,Dp(e,r)}}var Pu={readContext:bi,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},ly={readContext:bi,useCallback:function(e,t){return Wi().memoizedState=[e,t===void 0?null:t],e},useContext:bi,useEffect:R0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,tu(4194308,4,h1.bind(null,t,e),r)},useLayoutEffect:function(e,t){return tu(4194308,4,e,t)},useInsertionEffect:function(e,t){return tu(4,2,e,t)},useMemo:function(e,t){var r=Wi();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Wi();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ay.bind(null,fn,e),[i.memoizedState,e]},useRef:function(e){var t=Wi();return e={current:e},t.memoizedState=e},useState:O0,useDebugValue:sf,useDeferredValue:function(e){return Wi().memoizedState=e},useTransition:function(){var e=O0(!1),t=e[0];return e=sy.bind(null,e[1]),Wi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=fn,s=Wi();if(cn){if(r===void 0)throw Error(et(407));r=r()}else{if(r=t(),Yn===null)throw Error(et(349));Wa&30||s1(i,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,R0(o1.bind(null,i,a,e),[e]),i.flags|=2048,Tc(9,a1.bind(null,i,a,r,t),void 0,null),r},useId:function(){var e=Wi(),t=Yn.identifierPrefix;if(cn){var r=vs,i=xs;r=(i&~(1<<32-Mi(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=_c++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=iy++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cy={readContext:bi,useCallback:f1,useContext:bi,useEffect:rf,useImperativeHandle:p1,useInsertionEffect:u1,useLayoutEffect:m1,useMemo:g1,useReducer:th,useRef:d1,useState:function(){return th(Ic)},useDebugValue:sf,useDeferredValue:function(e){var t=ji();return x1(t,$n.memoizedState,e)},useTransition:function(){var e=th(Ic)[0],t=ji().memoizedState;return[e,t]},useMutableSource:r1,useSyncExternalStore:i1,useId:v1,unstable_isNewReconciler:!1},dy={readContext:bi,useCallback:f1,useContext:bi,useEffect:rf,useImperativeHandle:p1,useInsertionEffect:u1,useLayoutEffect:m1,useMemo:g1,useReducer:nh,useRef:d1,useState:function(){return nh(Ic)},useDebugValue:sf,useDeferredValue:function(e){var t=ji();return $n===null?t.memoizedState=e:x1(t,$n.memoizedState,e)},useTransition:function(){var e=nh(Ic)[0],t=ji().memoizedState;return[e,t]},useMutableSource:r1,useSyncExternalStore:i1,useId:v1,unstable_isNewReconciler:!1};function zi(e,t){if(e&&e.defaultProps){t=gn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Jh(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:gn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Wu={isMounted:function(e){return(e=e._reactInternals)?Ka(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=wr(),s=ua(e),a=ys(i,s);a.payload=t,r!=null&&(a.callback=r),t=ca(e,a,s),t!==null&&(Di(t,e,s,i),Zd(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=wr(),s=ua(e),a=ys(i,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ca(e,a,s),t!==null&&(Di(t,e,s,i),Zd(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=wr(),i=ua(e),s=ys(r,i);s.tag=2,t!=null&&(s.callback=t),t=ca(e,s,i),t!==null&&(Di(t,e,i,r),Zd(t,e,i))}};function B0(e,t,r,i,s,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,l):t.prototype&&t.prototype.isPureReactComponent?!Cc(r,i)||!Cc(s,a):!0}function j1(e,t,r){var i=!1,s=pa,a=t.contextType;return typeof a=="object"&&a!==null?a=bi(a):(s=Or(t)?Va:gr.current,i=t.contextTypes,a=(i=i!=null)?nl(e,s):pa),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Wu,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function q0(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Wu.enqueueReplaceState(t,t.state,null)}function Yh(e,t,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Qp(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=bi(a):(a=Or(t)?Va:gr.current,s.context=nl(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Jh(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Wu.enqueueReplaceState(s,s.state,null),ku(e,r,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function al(e,t){try{var r="",i=t;do r+=Ov(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function rh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Qh(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var uy=typeof WeakMap=="function"?WeakMap:Map;function w1(e,t,r){r=ys(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){_u||(_u=!0,ap=i),Qh(e,t)},r}function S1(e,t,r){r=ys(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;r.payload=function(){return i(s)},r.callback=function(){Qh(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Qh(e,t),typeof i!="function"&&(da===null?da=new Set([this]):da.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}function $0(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new uy;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(r)||(s.add(r),e=Cy.bind(null,e,t,r),t.then(e,e))}function H0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function U0(e,t,r,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ys(-1,1),t.tag=2,ca(r,t,1))),r.lanes|=1),e)}var my=Ss.ReactCurrentOwner,Er=!1;function jr(e,t,r,i){t.child=e===null?Zx(t,null,r,i):il(t,e.child,r,i)}function V0(e,t,r,i,s){r=r.render;var a=t.ref;return Yo(t,s),i=tf(e,t,r,i,a,s),r=nf(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ws(e,t,s)):(cn&&r&&Hp(t),t.flags|=1,jr(e,t,i,s),t.child)}function G0(e,t,r,i,s){if(e===null){var a=r.type;return typeof a=="function"&&!hf(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,C1(e,t,a,i,s)):(e=su(r.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var l=a.memoizedProps;if(r=r.compare,r=r!==null?r:Cc,r(l,i)&&e.ref===t.ref)return ws(e,t,s)}return t.flags|=1,e=ma(a,i),e.ref=t.ref,e.return=t,t.child=e}function C1(e,t,r,i,s){if(e!==null){var a=e.memoizedProps;if(Cc(a,i)&&e.ref===t.ref)if(Er=!1,t.pendingProps=i=a,(e.lanes&s)!==0)e.flags&131072&&(Er=!0);else return t.lanes=e.lanes,ws(e,t,s)}return Kh(e,t,r,i,s)}function k1(e,t,r){var i=t.pendingProps,s=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(Ho,Wr),Wr|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rn(Ho,Wr),Wr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,rn(Ho,Wr),Wr|=i}else a!==null?(i=a.baseLanes|r,t.memoizedState=null):i=r,rn(Ho,Wr),Wr|=i;return jr(e,t,s,r),t.child}function A1(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Kh(e,t,r,i,s){var a=Or(r)?Va:gr.current;return a=nl(t,a),Yo(t,s),r=tf(e,t,r,i,a,s),i=nf(),e!==null&&!Er?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ws(e,t,s)):(cn&&i&&Hp(t),t.flags|=1,jr(e,t,r,s),t.child)}function W0(e,t,r,i,s){if(Or(r)){var a=!0;bu(t)}else a=!1;if(Yo(t,s),t.stateNode===null)nu(e,t),j1(t,r,i),Yh(t,r,i,s),i=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var c=l.context,h=r.contextType;typeof h=="object"&&h!==null?h=bi(h):(h=Or(r)?Va:gr.current,h=nl(t,h));var x=r.getDerivedStateFromProps,v=typeof x=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==i||c!==h)&&q0(t,l,i,h),Ks=!1;var y=t.memoizedState;l.state=y,ku(t,i,l,s),c=t.memoizedState,d!==i||y!==c||Fr.current||Ks?(typeof x=="function"&&(Jh(t,r,x,i),c=t.memoizedState),(d=Ks||B0(t,r,d,i,y,c,h))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),l.props=i,l.state=c,l.context=h,i=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{l=t.stateNode,t1(e,t),d=t.memoizedProps,h=t.type===t.elementType?d:zi(t.type,d),l.props=h,v=t.pendingProps,y=l.context,c=r.contextType,typeof c=="object"&&c!==null?c=bi(c):(c=Or(r)?Va:gr.current,c=nl(t,c));var m=r.getDerivedStateFromProps;(x=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==v||y!==c)&&q0(t,l,i,c),Ks=!1,y=t.memoizedState,l.state=y,ku(t,i,l,s);var w=t.memoizedState;d!==v||y!==w||Fr.current||Ks?(typeof m=="function"&&(Jh(t,r,m,i),w=t.memoizedState),(h=Ks||B0(t,r,h,i,y,w,c)||!1)?(x||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,w,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,w,c)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),l.props=i,l.state=w,l.context=c,i=h):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&y===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&y===e.memoizedState||(t.flags|=1024),i=!1)}return Xh(e,t,r,i,a,s)}function Xh(e,t,r,i,s,a){A1(e,t);var l=(t.flags&128)!==0;if(!i&&!l)return s&&I0(t,r,!1),ws(e,t,a);i=t.stateNode,my.current=t;var d=l&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&l?(t.child=il(t,e.child,null,a),t.child=il(t,null,d,a)):jr(e,t,d,a),t.memoizedState=i.state,s&&I0(t,r,!0),t.child}function L1(e){var t=e.stateNode;t.pendingContext?_0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_0(e,t.context,!1),Kp(e,t.containerInfo)}function J0(e,t,r,i,s){return rl(),Vp(s),t.flags|=256,jr(e,t,r,i),t.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ep(e){return{baseLanes:e,cachePool:null,transitions:null}}function P1(e,t,r){var i=t.pendingProps,s=pn.current,a=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(s&2)!==0),d?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),rn(pn,s&1),e===null)return Gh(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Qu(l,i,0,null),e=Ha(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ep(r),t.memoizedState=Zh,e):af(t,l));if(s=e.memoizedState,s!==null&&(d=s.dehydrated,d!==null))return hy(e,t,l,i,d,s,r);if(a){a=i.fallback,l=t.mode,s=e.child,d=s.sibling;var c={mode:"hidden",children:i.children};return!(l&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=ma(s,c),i.subtreeFlags=s.subtreeFlags&14680064),d!==null?a=ma(d,a):(a=Ha(a,l,r,null),a.flags|=2),a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=e.child.memoizedState,l=l===null?ep(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Zh,i}return a=e.child,e=a.sibling,i=ma(a,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function af(e,t){return t=Qu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ed(e,t,r,i){return i!==null&&Vp(i),il(t,e.child,null,r),e=af(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hy(e,t,r,i,s,a,l){if(r)return t.flags&256?(t.flags&=-257,i=rh(Error(et(422))),Ed(e,t,l,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=i.fallback,s=t.mode,i=Qu({mode:"visible",children:i.children},s,0,null),a=Ha(a,s,l,null),a.flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,t.mode&1&&il(t,e.child,null,l),t.child.memoizedState=ep(l),t.memoizedState=Zh,a);if(!(t.mode&1))return Ed(e,t,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var d=i.dgst;return i=d,a=Error(et(419)),i=rh(a,i,void 0),Ed(e,t,l,i)}if(d=(l&e.childLanes)!==0,Er||d){if(i=Yn,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,js(e,s),Di(i,e,s,-1))}return mf(),i=rh(Error(et(421))),Ed(e,t,l,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=ky.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Jr=la(s.nextSibling),Qr=t,cn=!0,Ti=null,e!==null&&(hi[pi++]=xs,hi[pi++]=vs,hi[pi++]=Ga,xs=e.id,vs=e.overflow,Ga=t),t=af(t,i.children),t.flags|=4096,t)}function Y0(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Wh(e.return,t,r)}function ih(e,t,r,i,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function z1(e,t,r){var i=t.pendingProps,s=i.revealOrder,a=i.tail;if(jr(e,t,i.children,r),i=pn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Y0(e,r,t);else if(e.tag===19)Y0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(rn(pn,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Au(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),ih(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Au(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}ih(t,!0,r,null,a);break;case"together":ih(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function nu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ws(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ja|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,r=ma(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ma(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function py(e,t,r){switch(t.tag){case 3:L1(t),rl();break;case 5:n1(t);break;case 1:Or(t.type)&&bu(t);break;case 4:Kp(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;rn(Su,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(rn(pn,pn.current&1),t.flags|=128,null):r&t.child.childLanes?P1(e,t,r):(rn(pn,pn.current&1),e=ws(e,t,r),e!==null?e.sibling:null);rn(pn,pn.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return z1(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rn(pn,pn.current),i)break;return null;case 22:case 23:return t.lanes=0,k1(e,t,r)}return ws(e,t,r)}var _1,tp,I1,T1;_1=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tp=function(){};I1=function(e,t,r,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,Ba(Ki.current);var a=null;switch(r){case"input":s=wh(e,s),i=wh(e,i),a=[];break;case"select":s=gn({},s,{value:void 0}),i=gn({},i,{value:void 0}),a=[];break;case"textarea":s=kh(e,s),i=kh(e,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=yu)}Lh(r,i);var l;r=null;for(h in s)if(!i.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var d=s[h];for(l in d)d.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(vc.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var c=i[h];if(d=s!=null?s[h]:void 0,i.hasOwnProperty(h)&&c!==d&&(c!=null||d!=null))if(h==="style")if(d){for(l in d)!d.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in c)c.hasOwnProperty(l)&&d[l]!==c[l]&&(r||(r={}),r[l]=c[l])}else r||(a||(a=[]),a.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,d=d?d.__html:void 0,c!=null&&d!==c&&(a=a||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(vc.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&sn("scroll",e),a||d===c||(a=[])):(a=a||[]).push(h,c))}r&&(a=a||[]).push("style",r);var h=a;(t.updateQueue=h)&&(t.flags|=4)}};T1=function(e,t,r,i){r!==i&&(t.flags|=4)};function Jl(e,t){if(!cn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function lr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function fy(e,t,r){var i=t.pendingProps;switch(Up(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lr(t),null;case 1:return Or(t.type)&&Nu(),lr(t),null;case 3:return i=t.stateNode,sl(),on(Fr),on(gr),Zp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Md(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ti!==null&&(cp(Ti),Ti=null))),tp(e,t),lr(t),null;case 5:Xp(t);var s=Ba(zc.current);if(r=t.type,e!==null&&t.stateNode!=null)I1(e,t,r,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(et(166));return lr(t),null}if(e=Ba(Ki.current),Md(t)){i=t.stateNode,r=t.type;var a=t.memoizedProps;switch(i[Ji]=t,i[Lc]=a,e=(t.mode&1)!==0,r){case"dialog":sn("cancel",i),sn("close",i);break;case"iframe":case"object":case"embed":sn("load",i);break;case"video":case"audio":for(s=0;s<nc.length;s++)sn(nc[s],i);break;case"source":sn("error",i);break;case"img":case"image":case"link":sn("error",i),sn("load",i);break;case"details":sn("toggle",i);break;case"input":i0(i,a),sn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},sn("invalid",i);break;case"textarea":a0(i,a),sn("invalid",i)}Lh(r,a),s=null;for(var l in a)if(a.hasOwnProperty(l)){var d=a[l];l==="children"?typeof d=="string"?i.textContent!==d&&(a.suppressHydrationWarning!==!0&&Td(i.textContent,d,e),s=["children",d]):typeof d=="number"&&i.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&Td(i.textContent,d,e),s=["children",""+d]):vc.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&sn("scroll",i)}switch(r){case"input":Cd(i),s0(i,a,!0);break;case"textarea":Cd(i),o0(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=yu)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ox(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=l.createElement(r,{is:i.is}):(e=l.createElement(r),r==="select"&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,r),e[Ji]=t,e[Lc]=i,_1(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ph(r,i),r){case"dialog":sn("cancel",e),sn("close",e),s=i;break;case"iframe":case"object":case"embed":sn("load",e),s=i;break;case"video":case"audio":for(s=0;s<nc.length;s++)sn(nc[s],e);s=i;break;case"source":sn("error",e),s=i;break;case"img":case"image":case"link":sn("error",e),sn("load",e),s=i;break;case"details":sn("toggle",e),s=i;break;case"input":i0(e,i),s=wh(e,i),sn("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=gn({},i,{value:void 0}),sn("invalid",e);break;case"textarea":a0(e,i),s=kh(e,i),sn("invalid",e);break;default:s=i}Lh(r,s),d=s;for(a in d)if(d.hasOwnProperty(a)){var c=d[a];a==="style"?dx(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&lx(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&yc(e,c):typeof c=="number"&&yc(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(vc.hasOwnProperty(a)?c!=null&&a==="onScroll"&&sn("scroll",e):c!=null&&Pp(e,a,c,l))}switch(r){case"input":Cd(e),s0(e,i,!1);break;case"textarea":Cd(e),o0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ha(i.value));break;case"select":e.multiple=!!i.multiple,a=i.value,a!=null?Vo(e,!!i.multiple,a,!1):i.defaultValue!=null&&Vo(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=yu)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return lr(t),null;case 6:if(e&&t.stateNode!=null)T1(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(et(166));if(r=Ba(zc.current),Ba(Ki.current),Md(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ji]=t,(a=i.nodeValue!==r)&&(e=Qr,e!==null))switch(e.tag){case 3:Td(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Td(i.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ji]=t,t.stateNode=i}return lr(t),null;case 13:if(on(pn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cn&&Jr!==null&&t.mode&1&&!(t.flags&128))Kx(),rl(),t.flags|=98560,a=!1;else if(a=Md(t),i!==null&&i.dehydrated!==null){if(e===null){if(!a)throw Error(et(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(et(317));a[Ji]=t}else rl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;lr(t),a=!1}else Ti!==null&&(cp(Ti),Ti=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||pn.current&1?Hn===0&&(Hn=3):mf())),t.updateQueue!==null&&(t.flags|=4),lr(t),null);case 4:return sl(),tp(e,t),e===null&&kc(t.stateNode.containerInfo),lr(t),null;case 10:return Jp(t.type._context),lr(t),null;case 17:return Or(t.type)&&Nu(),lr(t),null;case 19:if(on(pn),a=t.memoizedState,a===null)return lr(t),null;if(i=(t.flags&128)!==0,l=a.rendering,l===null)if(i)Jl(a,!1);else{if(Hn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Au(e),l!==null){for(t.flags|=128,Jl(a,!1),i=l.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)a=r,e=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rn(pn,pn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ln()>ol&&(t.flags|=128,i=!0,Jl(a,!1),t.lanes=4194304)}else{if(!i)if(e=Au(l),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Jl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!cn)return lr(t),null}else 2*Ln()-a.renderingStartTime>ol&&r!==1073741824&&(t.flags|=128,i=!0,Jl(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(r=a.last,r!==null?r.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ln(),t.sibling=null,r=pn.current,rn(pn,i?r&1|2:r&1),t):(lr(t),null);case 22:case 23:return uf(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Wr&1073741824&&(lr(t),t.subtreeFlags&6&&(t.flags|=8192)):lr(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function gy(e,t){switch(Up(t),t.tag){case 1:return Or(t.type)&&Nu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sl(),on(Fr),on(gr),Zp(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xp(t),null;case 13:if(on(pn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return on(pn),null;case 4:return sl(),null;case 10:return Jp(t.type._context),null;case 22:case 23:return uf(),null;case 24:return null;default:return null}}var Fd=!1,hr=!1,xy=typeof WeakSet=="function"?WeakSet:Set,ft=null;function $o(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Nn(e,t,i)}else r.current=null}function np(e,t,r){try{r()}catch(i){Nn(e,t,i)}}var Q0=!1;function vy(e,t){if(Rh=gu,e=Ox(),$p(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var l=0,d=-1,c=-1,h=0,x=0,v=e,y=null;t:for(;;){for(var m;v!==r||s!==0&&v.nodeType!==3||(d=l+s),v!==a||i!==0&&v.nodeType!==3||(c=l+i),v.nodeType===3&&(l+=v.nodeValue.length),(m=v.firstChild)!==null;)y=v,v=m;for(;;){if(v===e)break t;if(y===r&&++h===s&&(d=l),y===a&&++x===i&&(c=l),(m=v.nextSibling)!==null)break;v=y,y=v.parentNode}v=m}r=d===-1||c===-1?null:{start:d,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Bh={focusedElem:e,selectionRange:r},gu=!1,ft=t;ft!==null;)if(t=ft,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ft=e;else for(;ft!==null;){t=ft;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var S=w.memoizedProps,j=w.memoizedState,f=t.stateNode,N=f.getSnapshotBeforeUpdate(t.elementType===t.type?S:zi(t.type,S),j);f.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(V){Nn(t,t.return,V)}if(e=t.sibling,e!==null){e.return=t.return,ft=e;break}ft=t.return}return w=Q0,Q0=!1,w}function mc(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&np(t,r,a)}s=s.next}while(s!==i)}}function Ju(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function rp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function M1(e){var t=e.alternate;t!==null&&(e.alternate=null,M1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ji],delete t[Lc],delete t[Hh],delete t[ey],delete t[ty])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function D1(e){return e.tag===5||e.tag===3||e.tag===4}function K0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||D1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ip(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=yu));else if(i!==4&&(e=e.child,e!==null))for(ip(e,t,r),e=e.sibling;e!==null;)ip(e,t,r),e=e.sibling}function sp(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(sp(e,t,r),e=e.sibling;e!==null;)sp(e,t,r),e=e.sibling}var tr=null,Ii=!1;function Ws(e,t,r){for(r=r.child;r!==null;)E1(e,t,r),r=r.sibling}function E1(e,t,r){if(Qi&&typeof Qi.onCommitFiberUnmount=="function")try{Qi.onCommitFiberUnmount(Bu,r)}catch{}switch(r.tag){case 5:hr||$o(r,t);case 6:var i=tr,s=Ii;tr=null,Ws(e,t,r),tr=i,Ii=s,tr!==null&&(Ii?(e=tr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):tr.removeChild(r.stateNode));break;case 18:tr!==null&&(Ii?(e=tr,r=r.stateNode,e.nodeType===8?Km(e.parentNode,r):e.nodeType===1&&Km(e,r),wc(e)):Km(tr,r.stateNode));break;case 4:i=tr,s=Ii,tr=r.stateNode.containerInfo,Ii=!0,Ws(e,t,r),tr=i,Ii=s;break;case 0:case 11:case 14:case 15:if(!hr&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&np(r,t,l),s=s.next}while(s!==i)}Ws(e,t,r);break;case 1:if(!hr&&($o(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(d){Nn(r,t,d)}Ws(e,t,r);break;case 21:Ws(e,t,r);break;case 22:r.mode&1?(hr=(i=hr)||r.memoizedState!==null,Ws(e,t,r),hr=i):Ws(e,t,r);break;default:Ws(e,t,r)}}function X0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xy),t.forEach(function(i){var s=Ay.bind(null,e,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Ai(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:tr=d.stateNode,Ii=!1;break e;case 3:tr=d.stateNode.containerInfo,Ii=!0;break e;case 4:tr=d.stateNode.containerInfo,Ii=!0;break e}d=d.return}if(tr===null)throw Error(et(160));E1(a,l,s),tr=null,Ii=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){Nn(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)F1(t,e),t=t.sibling}function F1(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ai(t,e),Ui(e),i&4){try{mc(3,e,e.return),Ju(3,e)}catch(S){Nn(e,e.return,S)}try{mc(5,e,e.return)}catch(S){Nn(e,e.return,S)}}break;case 1:Ai(t,e),Ui(e),i&512&&r!==null&&$o(r,r.return);break;case 5:if(Ai(t,e),Ui(e),i&512&&r!==null&&$o(r,r.return),e.flags&32){var s=e.stateNode;try{yc(s,"")}catch(S){Nn(e,e.return,S)}}if(i&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,l=r!==null?r.memoizedProps:a,d=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&sx(s,a),Ph(d,l);var h=Ph(d,a);for(l=0;l<c.length;l+=2){var x=c[l],v=c[l+1];x==="style"?dx(s,v):x==="dangerouslySetInnerHTML"?lx(s,v):x==="children"?yc(s,v):Pp(s,x,v,h)}switch(d){case"input":Sh(s,a);break;case"textarea":ax(s,a);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Vo(s,!!a.multiple,m,!1):y!==!!a.multiple&&(a.defaultValue!=null?Vo(s,!!a.multiple,a.defaultValue,!0):Vo(s,!!a.multiple,a.multiple?[]:"",!1))}s[Lc]=a}catch(S){Nn(e,e.return,S)}}break;case 6:if(Ai(t,e),Ui(e),i&4){if(e.stateNode===null)throw Error(et(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(S){Nn(e,e.return,S)}}break;case 3:if(Ai(t,e),Ui(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{wc(t.containerInfo)}catch(S){Nn(e,e.return,S)}break;case 4:Ai(t,e),Ui(e);break;case 13:Ai(t,e),Ui(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(cf=Ln())),i&4&&X0(e);break;case 22:if(x=r!==null&&r.memoizedState!==null,e.mode&1?(hr=(h=hr)||x,Ai(t,e),hr=h):Ai(t,e),Ui(e),i&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!x&&e.mode&1)for(ft=e,x=e.child;x!==null;){for(v=ft=x;ft!==null;){switch(y=ft,m=y.child,y.tag){case 0:case 11:case 14:case 15:mc(4,y,y.return);break;case 1:$o(y,y.return);var w=y.stateNode;if(typeof w.componentWillUnmount=="function"){i=y,r=y.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(S){Nn(i,r,S)}}break;case 5:$o(y,y.return);break;case 22:if(y.memoizedState!==null){eg(v);continue}}m!==null?(m.return=y,ft=m):eg(v)}x=x.sibling}e:for(x=null,v=e;;){if(v.tag===5){if(x===null){x=v;try{s=v.stateNode,h?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=v.stateNode,c=v.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,d.style.display=cx("display",l))}catch(S){Nn(e,e.return,S)}}}else if(v.tag===6){if(x===null)try{v.stateNode.nodeValue=h?"":v.memoizedProps}catch(S){Nn(e,e.return,S)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;x===v&&(x=null),v=v.return}x===v&&(x=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ai(t,e),Ui(e),i&4&&X0(e);break;case 21:break;default:Ai(t,e),Ui(e)}}function Ui(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(D1(r)){var i=r;break e}r=r.return}throw Error(et(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(yc(s,""),i.flags&=-33);var a=K0(e);sp(e,a,s);break;case 3:case 4:var l=i.stateNode.containerInfo,d=K0(e);ip(e,d,l);break;default:throw Error(et(161))}}catch(c){Nn(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yy(e,t,r){ft=e,O1(e)}function O1(e,t,r){for(var i=(e.mode&1)!==0;ft!==null;){var s=ft,a=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Fd;if(!l){var d=s.alternate,c=d!==null&&d.memoizedState!==null||hr;d=Fd;var h=hr;if(Fd=l,(hr=c)&&!h)for(ft=s;ft!==null;)l=ft,c=l.child,l.tag===22&&l.memoizedState!==null?tg(s):c!==null?(c.return=l,ft=c):tg(s);for(;a!==null;)ft=a,O1(a),a=a.sibling;ft=s,Fd=d,hr=h}Z0(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ft=a):Z0(e)}}function Z0(e){for(;ft!==null;){var t=ft;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:hr||Ju(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!hr)if(r===null)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:zi(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&F0(t,a,i);break;case 3:var l=t.updateQueue;if(l!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}F0(t,l,r)}break;case 5:var d=t.stateNode;if(r===null&&t.flags&4){r=d;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var x=h.memoizedState;if(x!==null){var v=x.dehydrated;v!==null&&wc(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}hr||t.flags&512&&rp(t)}catch(y){Nn(t,t.return,y)}}if(t===e){ft=null;break}if(r=t.sibling,r!==null){r.return=t.return,ft=r;break}ft=t.return}}function eg(e){for(;ft!==null;){var t=ft;if(t===e){ft=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ft=r;break}ft=t.return}}function tg(e){for(;ft!==null;){var t=ft;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ju(4,t)}catch(c){Nn(t,r,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(c){Nn(t,s,c)}}var a=t.return;try{rp(t)}catch(c){Nn(t,a,c)}break;case 5:var l=t.return;try{rp(t)}catch(c){Nn(t,l,c)}}}catch(c){Nn(t,t.return,c)}if(t===e){ft=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ft=d;break}ft=t.return}}var Ny=Math.ceil,zu=Ss.ReactCurrentDispatcher,of=Ss.ReactCurrentOwner,vi=Ss.ReactCurrentBatchConfig,$t=0,Yn=null,Dn=null,nr=0,Wr=0,Ho=va(0),Hn=0,Mc=null,Ja=0,Yu=0,lf=0,hc=null,Dr=null,cf=0,ol=1/0,fs=null,_u=!1,ap=null,da=null,Od=!1,ta=null,Iu=0,pc=0,op=null,ru=-1,iu=0;function wr(){return $t&6?Ln():ru!==-1?ru:ru=Ln()}function ua(e){return e.mode&1?$t&2&&nr!==0?nr&-nr:ry.transition!==null?(iu===0&&(iu=jx()),iu):(e=Kt,e!==0||(e=window.event,e=e===void 0?16:Px(e.type)),e):1}function Di(e,t,r,i){if(50<pc)throw pc=0,op=null,Error(et(185));Rc(e,r,i),(!($t&2)||e!==Yn)&&(e===Yn&&(!($t&2)&&(Yu|=r),Hn===4&&Zs(e,nr)),Rr(e,i),r===1&&$t===0&&!(t.mode&1)&&(ol=Ln()+500,Vu&&ya()))}function Rr(e,t){var r=e.callbackNode;r5(e,t);var i=fu(e,e===Yn?nr:0);if(i===0)r!==null&&d0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&d0(r),t===1)e.tag===0?ny(ng.bind(null,e)):Jx(ng.bind(null,e)),X5(function(){!($t&6)&&ya()}),r=null;else{switch(wx(i)){case 1:r=Mp;break;case 4:r=Nx;break;case 16:r=pu;break;case 536870912:r=bx;break;default:r=pu}r=G1(r,R1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function R1(e,t){if(ru=-1,iu=0,$t&6)throw Error(et(327));var r=e.callbackNode;if(Qo()&&e.callbackNode!==r)return null;var i=fu(e,e===Yn?nr:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Tu(e,i);else{t=i;var s=$t;$t|=2;var a=q1();(Yn!==e||nr!==t)&&(fs=null,ol=Ln()+500,$a(e,t));do try{wy();break}catch(d){B1(e,d)}while(1);Wp(),zu.current=a,$t=s,Dn!==null?t=0:(Yn=null,nr=0,t=Hn)}if(t!==0){if(t===2&&(s=Mh(e),s!==0&&(i=s,t=lp(e,s))),t===1)throw r=Mc,$a(e,0),Zs(e,i),Rr(e,Ln()),r;if(t===6)Zs(e,i);else{if(s=e.current.alternate,!(i&30)&&!by(s)&&(t=Tu(e,i),t===2&&(a=Mh(e),a!==0&&(i=a,t=lp(e,a))),t===1))throw r=Mc,$a(e,0),Zs(e,i),Rr(e,Ln()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(et(345));case 2:Ma(e,Dr,fs);break;case 3:if(Zs(e,i),(i&130023424)===i&&(t=cf+500-Ln(),10<t)){if(fu(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){wr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=$h(Ma.bind(null,e,Dr,fs),t);break}Ma(e,Dr,fs);break;case 4:if(Zs(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var l=31-Mi(i);a=1<<l,l=t[l],l>s&&(s=l),i&=~a}if(i=s,i=Ln()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ny(i/1960))-i,10<i){e.timeoutHandle=$h(Ma.bind(null,e,Dr,fs),i);break}Ma(e,Dr,fs);break;case 5:Ma(e,Dr,fs);break;default:throw Error(et(329))}}}return Rr(e,Ln()),e.callbackNode===r?R1.bind(null,e):null}function lp(e,t){var r=hc;return e.current.memoizedState.isDehydrated&&($a(e,t).flags|=256),e=Tu(e,t),e!==2&&(t=Dr,Dr=r,t!==null&&cp(t)),e}function cp(e){Dr===null?Dr=e:Dr.push.apply(Dr,e)}function by(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!Ei(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zs(e,t){for(t&=~lf,t&=~Yu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mi(t),i=1<<r;e[r]=-1,t&=~i}}function ng(e){if($t&6)throw Error(et(327));Qo();var t=fu(e,0);if(!(t&1))return Rr(e,Ln()),null;var r=Tu(e,t);if(e.tag!==0&&r===2){var i=Mh(e);i!==0&&(t=i,r=lp(e,i))}if(r===1)throw r=Mc,$a(e,0),Zs(e,t),Rr(e,Ln()),r;if(r===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ma(e,Dr,fs),Rr(e,Ln()),null}function df(e,t){var r=$t;$t|=1;try{return e(t)}finally{$t=r,$t===0&&(ol=Ln()+500,Vu&&ya())}}function Ya(e){ta!==null&&ta.tag===0&&!($t&6)&&Qo();var t=$t;$t|=1;var r=vi.transition,i=Kt;try{if(vi.transition=null,Kt=1,e)return e()}finally{Kt=i,vi.transition=r,$t=t,!($t&6)&&ya()}}function uf(){Wr=Ho.current,on(Ho)}function $a(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,K5(r)),Dn!==null)for(r=Dn.return;r!==null;){var i=r;switch(Up(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Nu();break;case 3:sl(),on(Fr),on(gr),Zp();break;case 5:Xp(i);break;case 4:sl();break;case 13:on(pn);break;case 19:on(pn);break;case 10:Jp(i.type._context);break;case 22:case 23:uf()}r=r.return}if(Yn=e,Dn=e=ma(e.current,null),nr=Wr=t,Hn=0,Mc=null,lf=Yu=Ja=0,Dr=hc=null,Ra!==null){for(t=0;t<Ra.length;t++)if(r=Ra[t],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var l=a.next;a.next=s,i.next=l}r.pending=i}Ra=null}return e}function B1(e,t){do{var r=Dn;try{if(Wp(),eu.current=Pu,Lu){for(var i=fn.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Lu=!1}if(Wa=0,Wn=$n=fn=null,uc=!1,_c=0,of.current=null,r===null||r.return===null){Hn=1,Mc=t,Dn=null;break}e:{var a=e,l=r.return,d=r,c=t;if(t=nr,d.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,x=d,v=x.tag;if(!(x.mode&1)&&(v===0||v===11||v===15)){var y=x.alternate;y?(x.updateQueue=y.updateQueue,x.memoizedState=y.memoizedState,x.lanes=y.lanes):(x.updateQueue=null,x.memoizedState=null)}var m=H0(l);if(m!==null){m.flags&=-257,U0(m,l,d,a,t),m.mode&1&&$0(a,h,t),t=m,c=h;var w=t.updateQueue;if(w===null){var S=new Set;S.add(c),t.updateQueue=S}else w.add(c);break e}else{if(!(t&1)){$0(a,h,t),mf();break e}c=Error(et(426))}}else if(cn&&d.mode&1){var j=H0(l);if(j!==null){!(j.flags&65536)&&(j.flags|=256),U0(j,l,d,a,t),Vp(al(c,d));break e}}a=c=al(c,d),Hn!==4&&(Hn=2),hc===null?hc=[a]:hc.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=w1(a,c,t);E0(a,f);break e;case 1:d=c;var N=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof N.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(da===null||!da.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var V=S1(a,d,t);E0(a,V);break e}}a=a.return}while(a!==null)}H1(r)}catch(ee){t=ee,Dn===r&&r!==null&&(Dn=r=r.return);continue}break}while(1)}function q1(){var e=zu.current;return zu.current=Pu,e===null?Pu:e}function mf(){(Hn===0||Hn===3||Hn===2)&&(Hn=4),Yn===null||!(Ja&268435455)&&!(Yu&268435455)||Zs(Yn,nr)}function Tu(e,t){var r=$t;$t|=2;var i=q1();(Yn!==e||nr!==t)&&(fs=null,$a(e,t));do try{jy();break}catch(s){B1(e,s)}while(1);if(Wp(),$t=r,zu.current=i,Dn!==null)throw Error(et(261));return Yn=null,nr=0,Hn}function jy(){for(;Dn!==null;)$1(Dn)}function wy(){for(;Dn!==null&&!Jv();)$1(Dn)}function $1(e){var t=V1(e.alternate,e,Wr);e.memoizedProps=e.pendingProps,t===null?H1(e):Dn=t,of.current=null}function H1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gy(r,t),r!==null){r.flags&=32767,Dn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Hn=6,Dn=null;return}}else if(r=fy(r,t,Wr),r!==null){Dn=r;return}if(t=t.sibling,t!==null){Dn=t;return}Dn=t=e}while(t!==null);Hn===0&&(Hn=5)}function Ma(e,t,r){var i=Kt,s=vi.transition;try{vi.transition=null,Kt=1,Sy(e,t,r,i)}finally{vi.transition=s,Kt=i}return null}function Sy(e,t,r,i){do Qo();while(ta!==null);if($t&6)throw Error(et(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(i5(e,a),e===Yn&&(Dn=Yn=null,nr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Od||(Od=!0,G1(pu,function(){return Qo(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=vi.transition,vi.transition=null;var l=Kt;Kt=1;var d=$t;$t|=4,of.current=null,vy(e,r),F1(r,e),U5(Bh),gu=!!Rh,Bh=Rh=null,e.current=r,yy(r),Yv(),$t=d,Kt=l,vi.transition=a}else e.current=r;if(Od&&(Od=!1,ta=e,Iu=s),a=e.pendingLanes,a===0&&(da=null),Xv(r.stateNode),Rr(e,Ln()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(_u)throw _u=!1,e=ap,ap=null,e;return Iu&1&&e.tag!==0&&Qo(),a=e.pendingLanes,a&1?e===op?pc++:(pc=0,op=e):pc=0,ya(),null}function Qo(){if(ta!==null){var e=wx(Iu),t=vi.transition,r=Kt;try{if(vi.transition=null,Kt=16>e?16:e,ta===null)var i=!1;else{if(e=ta,ta=null,Iu=0,$t&6)throw Error(et(331));var s=$t;for($t|=4,ft=e.current;ft!==null;){var a=ft,l=a.child;if(ft.flags&16){var d=a.deletions;if(d!==null){for(var c=0;c<d.length;c++){var h=d[c];for(ft=h;ft!==null;){var x=ft;switch(x.tag){case 0:case 11:case 15:mc(8,x,a)}var v=x.child;if(v!==null)v.return=x,ft=v;else for(;ft!==null;){x=ft;var y=x.sibling,m=x.return;if(M1(x),x===h){ft=null;break}if(y!==null){y.return=m,ft=y;break}ft=m}}}var w=a.alternate;if(w!==null){var S=w.child;if(S!==null){w.child=null;do{var j=S.sibling;S.sibling=null,S=j}while(S!==null)}}ft=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,ft=l;else e:for(;ft!==null;){if(a=ft,a.flags&2048)switch(a.tag){case 0:case 11:case 15:mc(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,ft=f;break e}ft=a.return}}var N=e.current;for(ft=N;ft!==null;){l=ft;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,ft=C;else e:for(l=N;ft!==null;){if(d=ft,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ju(9,d)}}catch(ee){Nn(d,d.return,ee)}if(d===l){ft=null;break e}var V=d.sibling;if(V!==null){V.return=d.return,ft=V;break e}ft=d.return}}if($t=s,ya(),Qi&&typeof Qi.onPostCommitFiberRoot=="function")try{Qi.onPostCommitFiberRoot(Bu,e)}catch{}i=!0}return i}finally{Kt=r,vi.transition=t}}return!1}function rg(e,t,r){t=al(r,t),t=w1(e,t,1),e=ca(e,t,1),t=wr(),e!==null&&(Rc(e,1,t),Rr(e,t))}function Nn(e,t,r){if(e.tag===3)rg(e,e,r);else for(;t!==null;){if(t.tag===3){rg(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(da===null||!da.has(i))){e=al(r,e),e=S1(t,e,1),t=ca(t,e,1),e=wr(),t!==null&&(Rc(t,1,e),Rr(t,e));break}}t=t.return}}function Cy(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=wr(),e.pingedLanes|=e.suspendedLanes&r,Yn===e&&(nr&r)===r&&(Hn===4||Hn===3&&(nr&130023424)===nr&&500>Ln()-cf?$a(e,0):lf|=r),Rr(e,t)}function U1(e,t){t===0&&(e.mode&1?(t=Ld,Ld<<=1,!(Ld&130023424)&&(Ld=4194304)):t=1);var r=wr();e=js(e,t),e!==null&&(Rc(e,t,r),Rr(e,r))}function ky(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),U1(e,r)}function Ay(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(et(314))}i!==null&&i.delete(t),U1(e,r)}var V1;V1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fr.current)Er=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Er=!1,py(e,t,r);Er=!!(e.flags&131072)}else Er=!1,cn&&t.flags&1048576&&Yx(t,wu,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;nu(e,t),e=t.pendingProps;var s=nl(t,gr.current);Yo(t,r),s=tf(null,t,i,e,s,r);var a=nf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(i)?(a=!0,bu(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qp(t),s.updater=Wu,t.stateNode=s,s._reactInternals=t,Yh(t,i,e,r),t=Xh(null,t,i,!0,a,r)):(t.tag=0,cn&&a&&Hp(t),jr(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(nu(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=Py(i),e=zi(i,e),s){case 0:t=Kh(null,t,i,e,r);break e;case 1:t=W0(null,t,i,e,r);break e;case 11:t=V0(null,t,i,e,r);break e;case 14:t=G0(null,t,i,zi(i.type,e),r);break e}throw Error(et(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zi(i,s),Kh(e,t,i,s,r);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zi(i,s),W0(e,t,i,s,r);case 3:e:{if(L1(t),e===null)throw Error(et(387));i=t.pendingProps,a=t.memoizedState,s=a.element,t1(e,t),ku(t,i,null,r);var l=t.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=al(Error(et(423)),t),t=J0(e,t,i,r,s);break e}else if(i!==s){s=al(Error(et(424)),t),t=J0(e,t,i,r,s);break e}else for(Jr=la(t.stateNode.containerInfo.firstChild),Qr=t,cn=!0,Ti=null,r=Zx(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rl(),i===s){t=ws(e,t,r);break e}jr(e,t,i,r)}t=t.child}return t;case 5:return n1(t),e===null&&Gh(t),i=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,l=s.children,qh(i,s)?l=null:a!==null&&qh(i,a)&&(t.flags|=32),A1(e,t),jr(e,t,l,r),t.child;case 6:return e===null&&Gh(t),null;case 13:return P1(e,t,r);case 4:return Kp(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=il(t,null,i,r):jr(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zi(i,s),V0(e,t,i,s,r);case 7:return jr(e,t,t.pendingProps,r),t.child;case 8:return jr(e,t,t.pendingProps.children,r),t.child;case 12:return jr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,a=t.memoizedProps,l=s.value,rn(Su,i._currentValue),i._currentValue=l,a!==null)if(Ei(a.value,l)){if(a.children===s.children&&!Fr.current){t=ws(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var d=a.dependencies;if(d!==null){l=a.child;for(var c=d.firstContext;c!==null;){if(c.context===i){if(a.tag===1){c=ys(-1,r&-r),c.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var x=h.pending;x===null?c.next=c:(c.next=x.next,x.next=c),h.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),Wh(a.return,r,t),d.lanes|=r;break}c=c.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(et(341));l.lanes|=r,d=l.alternate,d!==null&&(d.lanes|=r),Wh(l,r,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}jr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,Yo(t,r),s=bi(s),i=i(s),t.flags|=1,jr(e,t,i,r),t.child;case 14:return i=t.type,s=zi(i,t.pendingProps),s=zi(i.type,s),G0(e,t,i,s,r);case 15:return C1(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:zi(i,s),nu(e,t),t.tag=1,Or(i)?(e=!0,bu(t)):e=!1,Yo(t,r),j1(t,i,s),Yh(t,i,s,r),Xh(null,t,i,!0,e,r);case 19:return z1(e,t,r);case 22:return k1(e,t,r)}throw Error(et(156,t.tag))};function G1(e,t){return yx(e,t)}function Ly(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(e,t,r,i){return new Ly(e,t,r,i)}function hf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Py(e){if(typeof e=="function")return hf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===_p)return 11;if(e===Ip)return 14}return 2}function ma(e,t){var r=e.alternate;return r===null?(r=gi(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function su(e,t,r,i,s,a){var l=2;if(i=e,typeof e=="function")hf(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case To:return Ha(r.children,s,a,t);case zp:l=8,s|=8;break;case yh:return e=gi(12,r,t,s|2),e.elementType=yh,e.lanes=a,e;case Nh:return e=gi(13,r,t,s),e.elementType=Nh,e.lanes=a,e;case bh:return e=gi(19,r,t,s),e.elementType=bh,e.lanes=a,e;case nx:return Qu(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ex:l=10;break e;case tx:l=9;break e;case _p:l=11;break e;case Ip:l=14;break e;case Qs:l=16,i=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=gi(l,r,t,s),t.elementType=e,t.type=i,t.lanes=a,t}function Ha(e,t,r,i){return e=gi(7,e,i,t),e.lanes=r,e}function Qu(e,t,r,i){return e=gi(22,e,i,t),e.elementType=nx,e.lanes=r,e.stateNode={isHidden:!1},e}function sh(e,t,r){return e=gi(6,e,null,t),e.lanes=r,e}function ah(e,t,r){return t=gi(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zy(e,t,r,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bm(0),this.expirationTimes=Bm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bm(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pf(e,t,r,i,s,a,l,d,c){return e=new zy(e,t,r,d,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=gi(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qp(a),e}function _y(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function W1(e){if(!e)return pa;e=e._reactInternals;e:{if(Ka(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var r=e.type;if(Or(r))return Wx(e,r,t)}return t}function J1(e,t,r,i,s,a,l,d,c){return e=pf(r,i,!0,e,s,a,l,d,c),e.context=W1(null),r=e.current,i=wr(),s=ua(r),a=ys(i,s),a.callback=t??null,ca(r,a,s),e.current.lanes=s,Rc(e,s,i),Rr(e,i),e}function Ku(e,t,r,i){var s=t.current,a=wr(),l=ua(s);return r=W1(r),t.context===null?t.context=r:t.pendingContext=r,t=ys(a,l),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ca(s,t,l),e!==null&&(Di(e,s,l,a),Zd(e,s,l)),l}function Mu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ig(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ff(e,t){ig(e,t),(e=e.alternate)&&ig(e,t)}function Iy(){return null}var Y1=typeof reportError=="function"?reportError:function(e){console.error(e)};function gf(e){this._internalRoot=e}Xu.prototype.render=gf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));Ku(e,t,null,null)};Xu.prototype.unmount=gf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ya(function(){Ku(null,e,null,null)}),t[bs]=null}};function Xu(e){this._internalRoot=e}Xu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kx();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Xs.length&&t!==0&&t<Xs[r].priority;r++);Xs.splice(r,0,e),r===0&&Lx(e)}};function xf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function sg(){}function Ty(e,t,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var h=Mu(l);a.call(h)}}var l=J1(t,i,e,0,null,!1,!1,"",sg);return e._reactRootContainer=l,e[bs]=l.current,kc(e.nodeType===8?e.parentNode:e),Ya(),l}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var d=i;i=function(){var h=Mu(c);d.call(h)}}var c=pf(e,0,!1,null,null,!1,!1,"",sg);return e._reactRootContainer=c,e[bs]=c.current,kc(e.nodeType===8?e.parentNode:e),Ya(function(){Ku(t,c,r,i)}),c}function em(e,t,r,i,s){var a=r._reactRootContainer;if(a){var l=a;if(typeof s=="function"){var d=s;s=function(){var c=Mu(l);d.call(c)}}Ku(t,l,e,s)}else l=Ty(r,t,e,s,i);return Mu(l)}Sx=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=tc(t.pendingLanes);r!==0&&(Dp(t,r|1),Rr(t,Ln()),!($t&6)&&(ol=Ln()+500,ya()))}break;case 13:Ya(function(){var i=js(e,1);if(i!==null){var s=wr();Di(i,e,1,s)}}),ff(e,1)}};Ep=function(e){if(e.tag===13){var t=js(e,134217728);if(t!==null){var r=wr();Di(t,e,134217728,r)}ff(e,134217728)}};Cx=function(e){if(e.tag===13){var t=ua(e),r=js(e,t);if(r!==null){var i=wr();Di(r,e,t,i)}ff(e,t)}};kx=function(){return Kt};Ax=function(e,t){var r=Kt;try{return Kt=e,t()}finally{Kt=r}};_h=function(e,t,r){switch(t){case"input":if(Sh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=Uu(i);if(!s)throw Error(et(90));ix(i),Sh(i,s)}}}break;case"textarea":ax(e,r);break;case"select":t=r.value,t!=null&&Vo(e,!!r.multiple,t,!1)}};hx=df;px=Ya;var My={usingClientEntryPoint:!1,Events:[qc,Fo,Uu,ux,mx,df]},Yl={findFiberByHostInstance:Oa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dy={bundleType:Yl.bundleType,version:Yl.version,rendererPackageName:Yl.rendererPackageName,rendererConfig:Yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xx(e),e===null?null:e.stateNode},findFiberByHostInstance:Yl.findFiberByHostInstance||Iy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{Bu=Rd.inject(Dy),Qi=Rd}catch{}}Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=My;Xr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xf(t))throw Error(et(200));return _y(e,t,null,r)};Xr.createRoot=function(e,t){if(!xf(e))throw Error(et(299));var r=!1,i="",s=Y1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=pf(e,1,!1,null,null,r,!1,i,s),e[bs]=t.current,kc(e.nodeType===8?e.parentNode:e),new gf(t)};Xr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=xx(t),e=e===null?null:e.stateNode,e};Xr.flushSync=function(e){return Ya(e)};Xr.hydrate=function(e,t,r){if(!Zu(t))throw Error(et(200));return em(null,e,t,!0,r)};Xr.hydrateRoot=function(e,t,r){if(!xf(e))throw Error(et(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",l=Y1;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(l=r.onRecoverableError)),t=J1(t,null,e,1,r??null,s,!1,a,l),e[bs]=t.current,kc(e),i)for(e=0;e<i.length;e++)r=i[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Xu(t)};Xr.render=function(e,t,r){if(!Zu(t))throw Error(et(200));return em(null,e,t,!1,r)};Xr.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(et(40));return e._reactRootContainer?(Ya(function(){em(null,null,e,!1,function(){e._reactRootContainer=null,e[bs]=null})}),!0):!1};Xr.unstable_batchedUpdates=df;Xr.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Zu(r))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return em(e,t,r,!1,i)};Xr.version="18.3.1-next-f1338f8080-20240426";function Q1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Q1)}catch(e){console.error(e)}}Q1(),Qg.exports=Xr;var Ey=Qg.exports,ag=Ey;xh.createRoot=ag.createRoot,xh.hydrateRoot=ag.hydrateRoot;var Fy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Oy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ry=(e,t)=>{const r=K.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:l,children:d,...c},h)=>K.createElement("svg",{ref:h,...Fy,width:s,height:s,stroke:i,strokeWidth:l?Number(a)*24/Number(s):a,className:`lucide lucide-${Oy(e)}`,...c},[...t.map(([x,v])=>K.createElement(x,v)),...(Array.isArray(d)?d:[d])||[]]));return r.displayName=`${e}`,r};var dt=Ry;const En=dt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),og=dt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),By=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),qy=dt("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]),K1=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),lg=dt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Du=dt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),na=dt("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),ra=dt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),X1=dt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Z1=dt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),bn=dt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),cg=dt("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Bd=dt("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),$y=dt("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),Hy=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Uy=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),e2=dt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Dc=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Vy=dt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),yi=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Gy=dt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),dp=dt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Wy=dt("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),Jy=dt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),t2=dt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),dg=dt("FolderPlus",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["line",{x1:"12",x2:"12",y1:"10",y2:"16",key:"3c25pp"}],["line",{x1:"9",x2:"15",y1:"13",y2:"13",key:"10hoct"}]]),Vi=dt("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),Yy=dt("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),rc=dt("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),Lo=dt("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Po=dt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ni=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Qy=dt("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ky=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Xy=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),ic=dt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),n2=dt("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Eu=dt("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),Zy=dt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),eN=dt("Move",[["polyline",{points:"5 9 2 12 5 15",key:"1r5uj5"}],["polyline",{points:"9 5 12 2 15 5",key:"5v383o"}],["polyline",{points:"15 19 12 22 9 19",key:"g7qi8m"}],["polyline",{points:"19 9 22 12 19 15",key:"tpp73q"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}]]),hn=dt("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),tN=dt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),xi=dt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),nN=dt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),jn=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),sc=dt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),au=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),rN=dt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ug=dt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]),Ea=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),r2=dt("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),fr=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),mg=dt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),iN=dt("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),tm=dt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),hg=dt("StickyNote",[["path",{d:"M15.5 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h14a2 2 0 0 0 2-2V8.5L15.5 3Z",key:"1wis1t"}],["path",{d:"M15 3v6h6",key:"edgan2"}]]),qd=dt("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),Jt=dt("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),sN=dt("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),aN=dt("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),wn=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),fc=dt("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),gc=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),i2=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),mi=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),pg=dt("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),oN=dt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Yt=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lN=dt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);function We({className:e,...t}){return n.jsx("div",{className:`rounded-lg border bg-white text-card-foreground shadow-sm ${e}`,...t})}function ht({className:e,...t}){return n.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${e}`,...t})}function pt({className:e,...t}){return n.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight ${e}`,...t})}function Ze({className:e,...t}){return n.jsx("div",{className:`p-6 pt-0 ${e}`,...t})}function cN({temperatures:e=[],cleaning:t=[],staff:r=[],products:i=[],currentUser:s}){const a=e.filter(c=>c.status==="ok").length,l=e.filter(c=>c.status==="danger").length,d=t.filter(c=>!c.completed).length;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(We,{children:n.jsx(Ze,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(bn,{className:"h-8 w-8 text-green-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:a}),n.jsx("p",{className:"text-sm text-gray-600",children:"Temperature OK"})]})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(En,{className:"h-8 w-8 text-red-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:l}),n.jsx("p",{className:"text-sm text-gray-600",children:"Problemi Temp."})]})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(hn,{className:"h-8 w-8 text-blue-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pulizie Pending"})]})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(X1,{className:"h-8 w-8 text-purple-600"}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:i.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Prodotti"})]})]})})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{children:["Benvenuto, ",s==null?void 0:s.name,"!"]})}),n.jsxs(Ze,{children:[n.jsx("p",{className:"text-gray-600",children:"Dashboard Business HACCP Manager"}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Ruolo: ",(s==null?void 0:s.role)==="admin"?"Amministratore":"Dipendente","  Reparto: ",s==null?void 0:s.department]}),(()=>{const c=localStorage.getItem("haccp-onboarding");if(!c||c==="[object Object]")return null;let h={};try{h=JSON.parse(c)}catch(x){return console.error("Errore parsing onboarding data:",x),null}return h.businessInfo?n.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Informazioni Azienda"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[h.businessInfo.businessName&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Nome Azienda:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.businessName})]}),h.businessInfo.businessType&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Tipo Attivit:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.businessType})]}),h.businessInfo.address&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Indirizzo:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.address})]}),h.businessInfo.phone&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Telefono:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.phone})]}),h.businessInfo.email&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"Email:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.email})]}),h.businessInfo.vatNumber&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700 font-medium",children:"P.IVA:"}),n.jsx("span",{className:"ml-2 text-blue-600",children:h.businessInfo.vatNumber})]})]})]}):null})()]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(En,{className:"h-5 w-5 text-blue-600"})," Nuove Funzionalit HACCP"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"Validazione Automatica Prodotti-Frigoriferi"}),n.jsx("p",{className:"text-sm text-blue-700",children:"L'applicazione ora verifica automaticamente la compatibilit tra categorie di prodotti e punti di conservazione, prevenendo errori di conservazione e migliorando la sicurezza alimentare."})]}),n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"Gestione Categorie Personalizzate"}),n.jsx("p",{className:"text-sm text-green-700",children:"Puoi creare nuove categorie di prodotti direttamente dall'interfaccia, rendendo il sistema pi flessibile e adattabile alle tue esigenze specifiche."})]}),n.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Prevenzione Contaminazioni"}),n.jsx("p",{className:"text-sm text-purple-700",children:"I frigoriferi possono essere dedicati a categorie specifiche, riducendo il rischio di contaminazioni incrociate e migliorando la tracciabilit."})]})]})})]})]})}const dN={default:"bg-primary-500 text-white hover:bg-primary-600",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-gray-300 bg-white hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100",link:"text-primary-500 underline-offset-4 hover:underline"},uN={default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"};function de({className:e,variant:t="default",size:r="default",asChild:i=!1,...s}){const a=i?"span":"button";return n.jsx(a,{className:`
        inline-flex items-center justify-center rounded-md text-sm font-medium
        ring-offset-background transition-colors focus-visible:outline-none
        focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2
        disabled:pointer-events-none disabled:opacity-50
        ${dN[t]}
        ${uN[r]}
        ${e}
      `,...s})}function ut({className:e,type:t,...r}){return n.jsx("input",{type:t,className:`
        flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2
        text-sm ring-offset-background file:border-0 file:bg-transparent
        file:text-sm file:font-medium placeholder:text-gray-500
        focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500
        focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50
        ${e}
      `,...r})}function Ue({className:e,...t}){return n.jsx("label",{className:`
        text-sm font-medium leading-none peer-disabled:cursor-not-allowed
        peer-disabled:opacity-70 ${e}
      `,...t})}function vf({label:e="Range Temperatura (C)",minValue:t,maxValue:r,onMinChange:i,onMaxChange:s,minPlaceholder:a="min",maxPlaceholder:l="max",required:d=!1,showValidation:c=!0,showSuggestions:h=!0,compactMode:x=!1,className:v="",id:y="temperature-range"}){const[m,w]=K.useState(!1),S=parseFloat(t),j=parseFloat(r),f=t&&r&&!isNaN(S)&&!isNaN(j),N=f&&S<j,C=(ee,ce)=>{const ne=(ee+ce)/2;return ne<=-13.5?"Surgelato":ne>=15?"Temperatura Ambiente":"Refrigerato"},V=(ee,ce)=>{const ne=(ee+ce)/2;return ne<0||ne>8?"danger":ne>=6&&ne<=8?"warning":"ok"};return x?n.jsxs("div",{className:v,children:[n.jsxs(Ue,{htmlFor:y,children:[e," ",d&&"*"]}),n.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded-lg border",children:[n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"da"}),n.jsx(ut,{id:`${y}-min`,type:"number",step:"0.1",value:t||"",onChange:i,placeholder:a,className:"w-20 text-center font-medium text-sm",required:d}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"a"}),n.jsx(ut,{id:`${y}-max`,type:"number",step:"0.1",value:r||"",onChange:s,placeholder:l,className:"w-20 text-center font-medium text-sm",required:d}),n.jsx("span",{className:"text-gray-700 font-medium text-xs whitespace-nowrap",children:"C"})]}),c&&f&&!N&&n.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" Min < Max"}),h&&n.jsx("div",{className:"mt-1 text-xs text-gray-500",children:" Carne (2-4C), Pesce (0-2C), Surgelati (-18C)"})]}):n.jsxs("div",{className:v,children:[n.jsxs(Ue,{htmlFor:y,children:[e," ",d&&"*"]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"da"}),n.jsx(ut,{id:`${y}-min`,type:"number",step:"0.1",value:t||"",onChange:i,placeholder:a,className:"w-24 text-center font-medium",required:d}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"a"}),n.jsx(ut,{id:`${y}-max`,type:"number",step:"0.1",value:r||"",onChange:s,placeholder:l,className:"w-24 text-center font-medium",required:d}),n.jsx("span",{className:"text-gray-700 font-medium text-sm whitespace-nowrap",children:"C"})]}),c&&f&&n.jsxs("div",{className:"mt-2",children:[n.jsxs("button",{type:"button",onClick:()=>w(!m),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-800 transition-colors",children:[m?n.jsx(Uy,{className:"h-4 w-4"}):n.jsx(Hy,{className:"h-4 w-4"}),n.jsx(Ni,{className:"h-4 w-4"}),"Dettagli temperatura"]}),m&&n.jsx("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-blue-700 space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Tipo: "}),n.jsx("span",{children:C(S,j)})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Stato: "}),n.jsx("span",{children:V(S,j)==="ok"?" Normale":V(S,j)==="warning"?" Attenzione":" Critica"})]}),!N&&n.jsx("div",{className:"mt-2 p-2 bg-red-50 border border-red-200 rounded text-red-700 text-xs",children:" La temperatura minima deve essere inferiore alla massima"})]})})]}),h&&n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:" Suggerimenti: Carne fresca (2-4C), Pesce (0-2C), Surgelati (-18C), Ambiente (15-25C)"})]})}function mN({cleaning:e,setCleaning:t,temperatures:r,setTemperatures:i,currentUser:s,refrigerators:a=[],setRefrigerators:l}){const d=e||[],c=r||[];K.useEffect(()=>{if(d.some(R=>!R.date||!R.frequency)){const R=d.map(T=>({...T,date:T.date||new Date().toLocaleDateString("it-IT"),frequency:T.frequency||"daily",completed:T.completed||!1,completedAt:T.completedAt||null,completedBy:T.completedBy||null}));t(R)}},[]);const[h,x]=K.useState({task:"",assignee:"",frequency:""}),[v,y]=K.useState({location:"",temperatureMin:"",temperatureMax:""}),[m,w]=K.useState("daily");K.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(d))},[d]),K.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(c))},[c]);const S=(P,R)=>{const T=(P+R)/2;return T<0||T>8?"danger":T>=6&&T<=8?"warning":"ok"},j=P=>{if(P.preventDefault(),!h.task||!h.assignee||!h.frequency){alert(` Attenzione: Per aggiungere una nuova attivit devi compilare tutti i campi richiesti.

 Attivit: descrivi cosa fare
 Assegnato a: chi  responsabile
 Frequenza: ogni quanto ripetere`);return}const R={id:Date.now().toString(),task:h.task,assignee:h.assignee,frequency:h.frequency,date:new Date().toLocaleDateString("it-IT"),completed:!1,completedAt:null,completedBy:null},T=[...d,R];t(T),localStorage.setItem("haccp-cleaning",JSON.stringify(T)),x({task:"",assignee:"",frequency:""}),alert(` Perfetto! La nuova attivit  stata aggiunta con successo.

Ora apparir nella lista delle attivit da svolgere e potrai monitorarne il progresso.`)},f=P=>{if(P.preventDefault(),!v.location||!v.temperatureMin||!v.temperatureMax){alert(` Attenzione: Per registrare una temperatura devi compilare tutti i campi richiesti.

 Frigorifero/Freezer: seleziona il punto di conservazione
 Range Temperatura: inserisci i valori minimo e massimo`);return}const R=parseFloat(v.temperatureMin),T=parseFloat(v.temperatureMax);if(isNaN(R)||isNaN(T)){alert(` Errore: I valori delle temperature devono essere numeri validi.

Esempi corretti:
 Min: -2, Max: 4
 Min: 0, Max: 8
 Min: -18, Max: -15`);return}if(R>T){alert(` Attenzione: La temperatura minima non pu essere maggiore della massima.

Correggi i valori:
 Min: deve essere inferiore o uguale a Max
 Esempio: Min: -2, Max: 4`);return}const F={id:Date.now().toString(),temperature:(R+T)/2,temperatureMin:R,temperatureMax:T,refrigeratorId:v.location,refrigeratorName:v.location,date:new Date().toLocaleString("it-IT"),status:S(R,T),recordedBy:(s==null?void 0:s.name)||"Unknown"},re=[...c,F];i(re),localStorage.setItem("haccp-temperatures",JSON.stringify(re)),y({location:"",temperatureMin:"",temperatureMax:""});const q=F.status==="ok"?" Temperatura nella norma":F.status==="warning"?" Attenzione: temperatura al limite":" Attenzione: temperatura critica";alert(` Temperatura registrata con successo!

${q}

 Frigorifero: ${F.refrigeratorName}
 Range: ${R}C - ${T}C
 Data: ${F.date}`)},N=P=>{const R=d.map(T=>T.id===P?{...T,completed:!T.completed,completedAt:T.completed?null:new Date().toLocaleString("it-IT"),completedBy:T.completed?null:(s==null?void 0:s.name)||"Unknown"}:T);t(R),localStorage.setItem("haccp-cleaning",JSON.stringify(R))},C=P=>{const R=d.filter(T=>T.id!==P);t(R),localStorage.setItem("haccp-cleaning",JSON.stringify(R))},V=d.filter(P=>!P.completed),ee=d.filter(P=>P.completed),ne=(()=>{const P=new Date,R=new Date(P.getFullYear(),P.getMonth(),P.getDate());return d.filter(T=>{if(T.completed||!T.date||typeof T.date!="string")return!1;const F=new Date(T.date.split("/").reverse().join("-"));switch(T.frequency){case"daily":const re=new Date(R);return re.setDate(re.getDate()-1),F<=re;case"weekly":const q=new Date(R);return q.setDate(q.getDate()-7),F<=q;case"monthly":const le=new Date(R);return le.setMonth(le.getMonth()-1),F<=le;case"yearly":const oe=new Date(R);return oe.setFullYear(oe.getFullYear()-1),F<=oe;default:const Pe=new Date(R);return Pe.setDate(Pe.getDate()-7),F<=Pe}})})(),O=(V||[]).filter(P=>P.frequency==="daily"),J=(V||[]).filter(P=>P.frequency==="weekly"),te=(V||[]).filter(P=>P.frequency==="monthly"),M=(V||[]).filter(P=>P.frequency==="yearly"),k=(s==null?void 0:s.role)==="admin";return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(tm,{className:"h-5 w-5"}),"Nuove Attivit / Mansioni"]}),n.jsx("p",{className:"text-sm text-gray-600",children:" Crea nuove attivit di pulizia e sanificazione per mantenere la conformit HACCP"})]}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:j,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ue,{htmlFor:"task",className:"flex items-center gap-2",children:["Attivit",n.jsx("span",{className:"text-xs text-gray-500",title:"Descrivi in modo chiaro e specifico l'attivit da svolgere",children:""})]}),n.jsx(ut,{id:"task",placeholder:"Es: Pulizia frigorifero, Sanificazione piano lavoro...",value:h.task,onChange:P=>x({...h,task:P.target.value}),required:!0}),n.jsx("p",{className:"text-xs text-gray-500",children:' Suggerimento: Sii specifico (es. "Pulizia mensile frigorifero principale" invece di solo "Pulizia")'})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ue,{htmlFor:"assignee",className:"flex items-center gap-2",children:["Assegnato a",n.jsx("span",{className:"text-xs text-gray-500",title:"Specifica chi  responsabile dell'esecuzione dell'attivit",children:""})]}),n.jsx(ut,{id:"assignee",placeholder:"Nome del responsabile",value:h.assignee,onChange:P=>x({...h,assignee:P.target.value}),required:!0}),n.jsx("p",{className:"text-xs text-gray-500",children:' Esempio: "Mario Rossi" o "Team Cucina"'})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ue,{htmlFor:"frequency",className:"flex items-center gap-2",children:["Frequenza",n.jsx("span",{className:"text-xs text-gray-500",title:"Seleziona con quale frequenza l'attivit deve essere ripetuta",children:""})]}),n.jsxs("select",{id:"frequency",value:h.frequency,onChange:P=>x({...h,frequency:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Seleziona Frequenza --"}),n.jsx("option",{value:"daily",children:" Giornalmente"}),n.jsx("option",{value:"weekly",children:" Settimanalmente"}),n.jsx("option",{value:"monthly",children:" Mensilmente"}),n.jsx("option",{value:"yearly",children:" Annualmente"}),(s==null?void 0:s.role)==="admin"&&n.jsx("option",{value:"all",children:" Tutti"})]}),n.jsx("p",{className:"text-xs text-gray-500",children:" La frequenza aiuta a pianificare e monitorare le attivit"})]})]}),n.jsx(de,{type:"submit",className:"w-full",children:" Aggiungi Attivit"})]})})]}),n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Dc,{className:"h-5 w-5 text-yellow-600"}),"Attivit da Svolgere (",V.length,")"]}),n.jsx("p",{className:"text-sm text-gray-600",children:" Organizza e monitora le attivit di pulizia e sanificazione per mantenere la conformit HACCP"})]}),n.jsx(Ze,{children:V.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(bn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:" Nessuna attivit da svolgere"}),n.jsx("p",{className:"text-sm",children:"Tutte le attivit sono completate! Ottimo lavoro nel mantenere la conformit HACCP."}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:" Suggerimento: Crea nuove attivit per mantenere sempre aggiornato il piano di pulizia"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>w("daily"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="daily"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Giornaliere (",O.length,")"]}),n.jsxs("button",{onClick:()=>w("weekly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="weekly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Settimanali (",J.length,")"]}),n.jsxs("button",{onClick:()=>w("monthly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="monthly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Mensili (",te.length,")"]}),n.jsxs("button",{onClick:()=>w("yearly"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="yearly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Annuali (",M.length,")"]}),(s==null?void 0:s.role)==="admin"&&n.jsxs("button",{onClick:()=>w("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m==="all"?"bg-white text-gray-700 border-2 border-blue-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[" Tutti (",V.length,")"]})]}),n.jsx("p",{className:"text-xs text-gray-500",children:" Clicca sulle schede per filtrare le attivit per frequenza e organizzare meglio il lavoro"}),n.jsx("div",{className:"space-y-3",children:(()=>{let P=[];switch(m){case"daily":P=O;break;case"weekly":P=J;break;case"monthly":P=te;break;case"yearly":P=M;break;case"all":P=V;break;default:P=O}return P.map(R=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium",children:R.task}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Assegnato a: ",R.assignee,"  ",R.date]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{size:"sm",onClick:()=>N(R.id),className:"bg-green-600 hover:bg-green-700 p-2 md:p-1",children:[n.jsx(bn,{className:"h-6 w-6 md:h-4 md:w-4 mr-1"}),n.jsx("span",{className:"hidden sm:inline",children:"Completata"})]}),k&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>C(R.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:n.jsx(wn,{className:"h-6 w-6 md:h-4 md:w-4"})})]})]},R.id))})()})]})})]}),ee.length>0&&n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-600"}),"Attivit Completate (",ee.length,")"]}),k&&n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>{confirm(` Attenzione: Sei sicuro di voler eliminare tutte le attivit completate?

Questa azione non pu essere annullata e rimuover la cronologia delle attivit svolte.`)&&t(d.filter(P=>!P.completed))},className:"text-red-600 hover:text-red-700",children:[n.jsx(wn,{className:"h-4 w-4 mr-2"}),"Elimina Tutte"]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:" Storico delle attivit completate - Mantiene traccia di tutto il lavoro svolto per la conformit HACCP"})]}),n.jsx(Ze,{children:n.jsx("div",{className:"space-y-3",children:ee.map(P=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-green-50",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-medium line-through",children:P.task}),n.jsxs("p",{className:"text-sm text-gray-600",children:[" Assegnato a: ",P.assignee,"   Completata: ",P.completedAt,P.completedBy&&n.jsxs("span",{className:"ml-2 text-blue-600",children:["  Completata da: ",P.completedBy]})]})]}),k&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>C(P.id),className:"text-red-600 hover:text-red-700 p-2 md:p-1",children:n.jsx(wn,{className:"h-6 w-6 md:h-4 md:w-4"})})]},P.id))})})]}),n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"Registra Temperatura Frigorifero/Freezer"]}),n.jsx("p",{className:"text-sm text-gray-600",children:" Monitora le temperature per garantire la sicurezza alimentare e la conformit HACCP"}),s&&n.jsxs("p",{className:"text-sm text-gray-600",children:[" Registrando come: ",n.jsx("span",{className:"font-medium",children:s.name})," (",s.department,")"]})]}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs(Ue,{htmlFor:"temp-location",className:"flex items-center gap-2",children:["Frigorifero / Freezer",n.jsx("span",{className:"text-xs text-gray-500",title:"Seleziona il punto di conservazione dove hai misurato la temperatura",children:""})]}),a.length===0?n.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsx("p",{className:"text-sm text-yellow-800",children:" Nessun punto di conservazione registrato."}),n.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:' Per registrare le temperature, devi prima aggiungere un frigorifero o freezer nella sezione "Punti di Conservazione".'})]}):n.jsxs("select",{id:"temp-location",value:v.location,onChange:P=>y({...v,location:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Seleziona Frigorifero/Freezer --"}),a.map(P=>n.jsxs("option",{value:P.name,children:[P.name," (",P.location||"Posizione non specificata",")"]},P.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Seleziona il frigorifero o freezer dove hai misurato la temperatura"})]}),n.jsxs("div",{children:[n.jsxs(Ue,{htmlFor:"temp-temperature-range",className:"flex items-center gap-2",children:["Range Temperatura (C)",n.jsx("span",{className:"text-xs text-gray-500",title:"Inserisci la temperatura minima e massima rilevata nel punto di conservazione",children:""})]}),n.jsx(vf,{label:"Range Temperatura (C)",minValue:v.temperatureMin,maxValue:v.temperatureMax,onMinChange:P=>y({...v,temperatureMin:P.target.value}),onMaxChange:P=>y({...v,temperatureMax:P.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temp-temperature-range"}),n.jsxs("div",{className:"text-xs text-gray-500 mt-2 space-y-1",children:[n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Frigoriferi:"})," 0C - 8C (ideale: 2C - 6C)"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Freezer:"})," -18C o inferiore"]}),n.jsxs("p",{children:[" ",n.jsx("strong",{children:"Suggerimento:"})," Misura in diversi punti per avere un range completo"]})]})]})]}),n.jsxs(de,{type:"submit",className:"w-full md:w-auto",disabled:a.length===0,children:[n.jsx(Jt,{className:"mr-2 h-4 w-4"})," Registra Temperatura"]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni da Svolgere"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:V.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:V.length===0?" Tutto sotto controllo!":" Richiedono la tua attenzione"})]}),n.jsx(Dc,{className:"h-10 w-10 md:h-8 md:w-8 text-yellow-500"})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Completate"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:ee.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ee.length===0?" Inizia con la prima attivit!":" Buon lavoro!"})]}),n.jsx(bn,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Mansioni Mancate"}),n.jsx("p",{className:`text-2xl font-bold ${ne.length>0?"text-red-600":"text-green-600"}`,children:ne.length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:ne.length===0?" Perfetto! Nessuna scadenza mancata":" Richiedono attenzione immediata"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"(ultimi 7 giorni)"})]}),ne.length>0?n.jsx(En,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"}):n.jsx(bn,{className:"h-10 w-10 md:h-8 md:w-8 text-green-500"})]})})}),n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Temperature da Monitorare"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.filter(P=>P.status==="danger"||P.status==="warning").length}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.filter(P=>P.status==="danger"||P.status==="warning").length===0?" Temperature nella norma":" Richiedono verifica"})]}),n.jsx(En,{className:"h-10 w-10 md:h-8 md:w-8 text-red-500"})]})})})]})]})}const fg={"pizzeria-frigoA":{title:"Frigo A - Pizzeria",subtitle:"Prodotti freschi (2-4C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Verdure fresche","Insalate","Erbe aromatiche"],temperature:"2-4C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 2",products:["Salumi","Prosciutti","Mortadelle"],temperature:"2-4C",color:"bg-red-100",borderColor:"border-red-300"},{name:"Scaffale 3",products:["Formaggi freschi","Mozzarella","Ricotta"],temperature:"2-4C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale 4 (Inferiore)",products:["Latticini","Yogurt","Panna"],temperature:"2-4C",color:"bg-blue-100",borderColor:"border-blue-300"}],notes:["Mantenere sempre la temperatura tra 2-4C","Non mescolare prodotti cotti e crudi","Controllare le scadenze ogni giorno","Pulire gli scaffali settimanalmente"]},"pizzeria-frigoB":{title:"Frigo B - Pizzeria",subtitle:"Surgelati (-19 a -16C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Pizze surgelate","Impasti surgelati"],temperature:"-19 a -16C",color:"bg-purple-100",borderColor:"border-purple-300"},{name:"Scaffale 2",products:["Verdure surgelate","Frutta surgelata"],temperature:"-19 a -16C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 3 (Inferiore)",products:["Carne surgelata","Pesce surgelato"],temperature:"-19 a -16C",color:"bg-red-100",borderColor:"border-red-300"}],notes:["Mantenere sempre la temperatura tra -19 e -16C","Non scongelare e ricongelare prodotti","Controllare la formazione di brina","Organizzare per data di scadenza"]},"bar-frigoA":{title:"Frigo A - Bar",subtitle:"Latticini (2-4C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Latte","Panna da caff"],temperature:"2-4C",color:"bg-blue-100",borderColor:"border-blue-300"},{name:"Scaffale 2",products:["Yogurt","Formaggi freschi"],temperature:"2-4C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale 3 (Inferiore)",products:["Burro","Margarina"],temperature:"2-4C",color:"bg-orange-100",borderColor:"border-orange-300"}],notes:["Mantenere sempre la temperatura tra 2-4C","Controllare le scadenze ogni giorno","Non esporre alla luce diretta","Pulire gli scaffali settimanalmente"]},"bar-frigoB":{title:"Frigo B - Bar",subtitle:"Surgelati (-19 a -16C)",shelves:[{name:"Scaffale 1 (Superiore)",products:["Gelati","Dolci surgelati"],temperature:"-19 a -16C",color:"bg-pink-100",borderColor:"border-pink-300"},{name:"Scaffale 2",products:["Frutta surgelata","Verdure surgelate"],temperature:"-19 a -16C",color:"bg-green-100",borderColor:"border-green-300"},{name:"Scaffale 3 (Inferiore)",products:["Snack surgelati","Ingredienti surgelati"],temperature:"-19 a -16C",color:"bg-gray-100",borderColor:"border-gray-300"}],notes:["Mantenere sempre la temperatura tra -19 e -16C","Non scongelare e ricongelare prodotti","Controllare la formazione di brina","Organizzare per data di scadenza"]},abbattitore:{title:"Abbattitore di Temperatura",subtitle:"Raffreddamento rapido (-13.5C a -80C)",shelves:[{name:"Zona Superiore",products:["Piatti pronti caldi","Salse calde"],temperature:"-13.5C a -80C",color:"bg-red-100",borderColor:"border-red-300"},{name:"Zona Centrale",products:["Carne cotta","Pesce cotto"],temperature:"-13.5C a -80C",color:"bg-orange-100",borderColor:"border-orange-300"},{name:"Zona Inferiore",products:["Verdure cotte","Legumi cotti"],temperature:"-13.5C a -80C",color:"bg-green-100",borderColor:"border-green-300"}],notes:["Raffreddamento rapido per prevenire proliferazione batterica","Non superare mai i 4C entro 2 ore","Controllare la formazione di cristalli di ghiaccio","Pulire dopo ogni ciclo di raffreddamento"]},ambiente:{title:"Conservazione a Temperatura Ambiente",subtitle:"Prodotti secchi (15C a 25C)",shelves:[{name:"Scaffale Superiore",products:["Farine","Pasta","Riso"],temperature:"15C a 25C",color:"bg-yellow-100",borderColor:"border-yellow-300"},{name:"Scaffale Centrale",products:["Conserve","Oli","Aceti"],temperature:"15C a 25C",color:"bg-blue-100",borderColor:"border-blue-300"},{name:"Scaffale Inferiore",products:["Spezie","Sale","Zucchero"],temperature:"15C a 25C",color:"bg-purple-100",borderColor:"border-purple-300"}],notes:["Mantenere ambiente asciutto e ben ventilato","Evitare esposizione diretta alla luce solare","Controllare la data di scadenza regolarmente","Organizzare per tipo di prodotto"]}};function hN({isOpen:e,onClose:t,fridgeType:r="pizzeria-frigoA",showTemperatureInfo:i=!0}){var a;if(!e)return null;const s=fg[r]||fg["pizzeria-frigoA"];return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b bg-gradient-to-r from-blue-50 to-indigo-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(Ni,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),n.jsx("p",{className:"text-gray-600",children:s.subtitle})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Yt,{className:"h-6 w-6"})})]}),i&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-700 bg-blue-100 px-3 py-2 rounded-lg",children:[n.jsx(Jt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Temperatura critica:"}),n.jsx("span",{children:(a=s.shelves[0])==null?void 0:a.temperature})]})]}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Organizzazione Scaffali"}),n.jsx("div",{className:"space-y-3",children:s.shelves.map((l,d)=>n.jsx(We,{className:`border-2 ${l.borderColor}`,children:n.jsx(Ze,{className:"p-4",children:n.jsxs("div",{className:`${l.color} p-3 rounded-lg`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:l.name}),n.jsx("div",{className:"text-xs text-gray-600 bg-white px-2 py-1 rounded",children:l.temperature})]}),n.jsx("div",{className:"space-y-1",children:l.products.map((c,h)=>n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),n.jsx("span",{className:"text-gray-700",children:c})]},h))})]})})},d))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Note Importanti"}),n.jsxs("div",{className:"space-y-4",children:[s.notes.map((l,d)=>n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[n.jsx(En,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-yellow-800",children:l})]},d)),n.jsx(We,{className:"bg-blue-50 border-blue-200",children:n.jsxs(Ze,{className:"p-4",children:[n.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(hn,{className:"h-4 w-4"}),"Best Practices HACCP"]}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Controllare le temperature 2 volte al giorno"}),n.jsx("li",{children:" Registrare sempre le letture temperature"}),n.jsx("li",{children:" Segnalare immediatamente temperature fuori range"}),n.jsx("li",{children:" Mantenere la catena del freddo"})]})]})})]})]})]})}),n.jsx("div",{className:"p-6 border-t bg-gray-50",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"HACCP:"})," Questa organizzazione garantisce la sicurezza alimentare"]}),n.jsx(de,{onClick:t,children:"Ho Capito"})]})})]})})]})}const Ut={categories:[{id:"fresh_dairy",name:"Latticini Freschi",minTemp:2,maxTemp:4,description:"Latte, formaggi freschi, yogurt",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_meat",name:"Carni Fresche",minTemp:0,maxTemp:4,description:"Carni crude, pollame, salumi freschi",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_fish",name:"Pesce Fresco",minTemp:0,maxTemp:2,description:"Pesce fresco, molluschi, crostacei",incompatibleWith:["frozen","dry_goods","hot_holding"]},{id:"fresh_produce",name:"Verdure e Ortaggi",minTemp:2,maxTemp:8,description:"Verdure fresche, insalate, ortaggi",incompatibleWith:["frozen","hot_holding"]},{id:"fresh_fruits",name:"Frutta Fresca",minTemp:2,maxTemp:8,description:"Frutta fresca di stagione",incompatibleWith:["frozen","hot_holding"]},{id:"frozen",name:"Surgelati",minTemp:-20,maxTemp:-16,description:"Tutti i prodotti surgelati",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","hot_holding"]},{id:"deep_frozen",name:"Ultra Surgelati",minTemp:-25,maxTemp:-18,description:"Prodotti ultra surgelati (es. gelati)",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","hot_holding"]},{id:"dry_goods",name:"Dispensa Secca",minTemp:15,maxTemp:25,description:"Pasta, riso, farina, conserve",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","frozen","deep_frozen"]},{id:"hot_holding",name:"Mantenimento Caldo",minTemp:60,maxTemp:70,description:"Piatti pronti caldi, mantenuti a temperatura",incompatibleWith:["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","frozen","deep_frozen"]},{id:"chilled_ready",name:"Pronti Freddi",minTemp:2,maxTemp:8,description:"Piatti pronti freddi, insalate pronte",incompatibleWith:["frozen","deep_frozen","hot_holding"]}],tolerance:.5,validateConservationPoint:e=>{var r;const t=[];if((r=e.name)!=null&&r.trim()||t.push("Nome punto di conservazione obbligatorio"),e.location||t.push("Posizione obbligatoria"),(!e.minTemp||!e.maxTemp)&&t.push("Range temperature obbligatorio"),e.assignedRole||t.push("Ruolo assegnato obbligatorio"),e.minTemp&&e.maxTemp){const i=parseFloat(e.minTemp),s=parseFloat(e.maxTemp);isNaN(i)||isNaN(s)?t.push("Temperature non valide"):i>=s&&t.push("Temperatura minima deve essere inferiore alla massima")}return{isValid:t.length===0,errors:t}},validateTemperatureCompatibility:(e,t,r)=>{if(!r||r.length===0)return{compatible:!0,message:"Nessuna categoria selezionata"};const i=parseFloat(e),s=parseFloat(t);if(isNaN(i)||isNaN(s))return{compatible:!1,message:"Temperature non valide"};const a=Ut.tolerance;for(const l of r){const d=Ut.categories.find(x=>x.id===l);if(!d)continue;const c=d.minTemp-a,h=d.maxTemp+a;if(i<c||s>h)return{compatible:!1,message:`Temperature non compatibili con ${d.name}. Range consentito: ${d.minTemp}C - ${d.maxTemp}C (${a}C)`,category:d.name,requiredRange:{min:d.minTemp,max:d.maxTemp}}}return{compatible:!0,message:"Temperature compatibili con tutte le categorie selezionate"}},getOptimalTemperatureSuggestions:e=>{if(!e||e.length===0)return null;const t=Ut.categories.filter(l=>e.includes(l.id));if(t.length===0)return null;if(t.length===1){const l=t[0];return{minTemp:l.minTemp,maxTemp:l.maxTemp,message:`Range ottimale per ${l.name}: ${l.minTemp}C - ${l.maxTemp}C`}}const r=t.map(l=>l.minTemp),i=t.map(l=>l.maxTemp),s=Math.max(...r),a=Math.min(...i);return s<=a?{minTemp:s,maxTemp:a,message:`Range ottimale per tutte le categorie: ${s}C - ${a}C`}:{compatible:!1,message:"Le categorie selezionate richiedono range di temperatura incompatibili",categories:t.map(l=>l.name)}}},$d=Ut.categories;function pN({temperatures:e,setTemperatures:t,currentUser:r,refrigerators:i,setRefrigerators:s,departments:a,setDepartments:l}){var it;const[d,c]=K.useState(!1),[h,x]=K.useState(!1),[v,y]=K.useState(null),[m,w]=K.useState({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[]}),[S,j]=K.useState(""),[f,N]=K.useState(null),[C,V]=K.useState(!1),[ee,ce]=K.useState(null),[ne,O]=K.useState([]),[J,te]=K.useState([]),[M,k]=K.useState(!1),[P,R]=K.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:"",isAmbiente:!1}),[T,F]=K.useState(!1),[re,q]=K.useState(""),le=[...$d,...J],oe=A=>{q(A),F(!0)},Pe=A=>{w(H=>{const ye=H.selectedCategories||[];return ye.includes(A)?{...H,selectedCategories:ye.filter(Fe=>Fe!==A)}:ye.length<5?{...H,selectedCategories:[...ye,A]}:(alert("Puoi selezionare al massimo 5 categorie"),H)})},z=(A,H=[])=>{let ye,Je=!1;if(A.toLowerCase().trim()==="ambiente"?(ye=20,Je=!0):ye=parseFloat(A),isNaN(ye))return{compliant:!1,message:"Temperatura non valida",type:"error"};if(H.length>0){const Fe=Ut.tolerance;let De=!1;for(let Ct=0;Ct<H.length;Ct++){for(let nt=Ct+1;nt<H.length;nt++){let at=Ut.categories.find(gt=>gt.id===H[Ct]);at||(at=J.find(gt=>gt.id===H[Ct]));let Nt=Ut.categories.find(gt=>gt.id===H[nt]);if(Nt||(Nt=J.find(gt=>gt.id===H[nt])),at&&Nt){const gt=(at.minTemp||at.temperatureMin)-Fe,Sn=(at.maxTemp||at.temperatureMax)+Fe,Ht=(Nt.minTemp||Nt.temperatureMin)-Fe,W=(Nt.maxTemp||Nt.temperatureMax)+Fe;if(Sn<Ht||W<gt){De=!0;break}}}if(De)break}if(De)return{compliant:!1,message:" Categorie incompatibili selezionate",type:"error",color:"red"};let Oe=!1,_t=!1,mt=null;for(const Ct of H){let nt=Ut.categories.find(at=>at.id===Ct);if(nt||(nt=J.find(at=>at.id===Ct)),nt){mt||(mt=nt);const at=nt.minTemp||nt.temperatureMin,Nt=nt.maxTemp||nt.temperatureMax;if(Je){const gt=U();if(at<=gt.max&&Nt>=gt.min){Oe=!0;break}}else if(ye>=at&&ye<=Nt){Oe=!0;break}}}if(!Oe)for(const Ct of H){let nt=Ut.categories.find(at=>at.id===Ct);if(nt||(nt=J.find(at=>at.id===Ct)),nt){mt||(mt=nt);const at=nt.minTemp||nt.temperatureMin,Nt=nt.maxTemp||nt.temperatureMax,gt=at-Fe,Sn=Nt+Fe;if(Je){const Ht=U(),W=Ht.min-Fe,ze=Ht.max+Fe;if(at<=ze&&Nt>=W){_t=!0;break}}else if(ye>=gt&&ye<=Sn){_t=!0;break}}}return Oe?{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}:_t?{compliant:!1,message:`La temperatura impostata  in tolleranza (fino a ${Fe}C di differenza)`,type:"warning",color:"yellow"}:{compliant:!1,message:` Fuori range HACCP per ${(mt==null?void 0:mt.name)||"categorie selezionate"}`,type:"error",color:"red"}}return ye<-30||ye>80?{compliant:!1,message:"Range temperatura fuori limiti operativi",type:"error",color:"red"}:{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}},U=()=>({min:15,max:25,description:"Temperatura ambiente (15-25C)",isAmbiente:!0}),Q=A=>{let H=Ut.categories.find(ye=>ye.id===A);return H?{min:H.minTemp,max:H.maxTemp}:(H=J.find(ye=>ye.id===A),H?{min:H.temperatureMin,max:H.temperatureMax}:null)},G=A=>{if(!A||A.length===0)return{message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"};const H=[];if(A.forEach(Fe=>{const De=Q(Fe);if(De){const Oe=le.find(_t=>_t.id===Fe);H.push({name:(Oe==null?void 0:Oe.name)||Fe,min:De.min,max:De.max})}}),H.length===0)return{message:"Nessuna informazione di temperatura disponibile per le categorie selezionate"};const ye=Math.max(...H.map(Fe=>Fe.min)),Je=Math.min(...H.map(Fe=>Fe.max));return ye<=Je?{compatible:!0,message:`Range ottimale per le categorie selezionate: da ${ye}C a ${Je}C`}:{compatible:!1,message:" Conflitto di temperature: Le categorie selezionate hanno range incompatibili. Verifica i requisiti HACCP."}},ae=(A,H,ye)=>{if(H.includes(A))return"selected";if(!ye||ye.trim()==="")return"neutral";let Je,Fe=!1;if(ye.toLowerCase().trim()==="ambiente"?(Je=20,Fe=!0):Je=parseFloat(ye),isNaN(Je))return"neutral";let De=Ut.categories.find(at=>at.id===A);if(De||(De=J.find(at=>at.id===A)),!De)return"neutral";const Oe=Ut.tolerance,_t=(De.minTemp||De.temperatureMin)-Oe,mt=(De.maxTemp||De.temperatureMax)+Oe,Ct=De.minTemp||De.temperatureMin,nt=De.maxTemp||De.temperatureMax;if(Fe){const at=U();return Ct<=at.max&&nt>=at.min?"compatible":"incompatible"}else if(Je>=Ct&&Je<=nt){if(H.length===0)return"compatible";for(const at of H){let Nt=Ut.categories.find(gt=>gt.id===at);if(Nt||(Nt=J.find(gt=>gt.id===at)),Nt){const gt=(Nt.minTemp||Nt.temperatureMin)-Oe,Sn=(Nt.maxTemp||Nt.temperatureMax)+Oe;if(gt<=mt&&Sn>=_t)return"compatible"}}return"incompatible"}else if(Fe){const at=U(),Nt=at.min-Oe,gt=at.max+Oe;return Ct<=gt&&nt>=Nt?"tolerance":"incompatible"}else if(Je>=_t&&Je<=mt){if(H.length===0)return"tolerance";for(const at of H){let Nt=Ut.categories.find(gt=>gt.id===at);if(Nt||(Nt=J.find(gt=>gt.id===at)),Nt){const gt=(Nt.minTemp||Nt.temperatureMin)-Oe,Sn=(Nt.maxTemp||Nt.temperatureMax)+Oe;if(gt<=mt&&Sn>=_t)return"tolerance"}}return"incompatible"}return"incompatible"},he=(A,H)=>{const ye=[];return H.forEach(Je=>{const Fe=le.find(De=>De.id===Je);if(Fe){const De=Q(Je);if(De){const Oe=A.toLowerCase().trim()==="ambiente"?20:parseFloat(A);if(!isNaN(Oe)){const _t=Ut.tolerance,mt=De.min-_t,Ct=De.max+_t;if(Oe>=De.min&&Oe<=De.max)return;Oe>=mt&&Oe<=Ct?ye.push({category:Fe.name,optimal:`${De.min}-${De.max}C`,current:A,severity:"warning",message:`Temperatura in tolleranza (fino a ${_t}C di differenza)`}):ye.push({category:Fe.name,optimal:`${De.min}-${De.max}C`,current:A,severity:"error",message:"Temperatura fuori range HACCP"})}}}}),ye};K.useEffect(()=>{const A=localStorage.getItem("onboardingData");if(A&&A!=="[object Object]")try{const H=JSON.parse(A);ce(H),H.departments&&Array.isArray(H.departments)&&l(H.departments),H.staff&&Array.isArray(H.staff)&&O(H.staff)}catch(H){console.error("Errore nel caricamento dei dati onboarding:",H)}},[]),K.useEffect(()=>{const A=localStorage.getItem("customStorageCategories");if(A)try{te(JSON.parse(A))}catch(H){console.error("Errore nel caricamento delle categorie personalizzate:",H)}},[]),K.useEffect(()=>{localStorage.setItem("customStorageCategories",JSON.stringify(J))},[J]);const xe=()=>{if(!P.name.trim()||!P.description.trim()){alert("Nome e descrizione sono obbligatori");return}let A,H;if(P.isAmbiente)A=15,H=25;else if(P.temperatureMin&&P.temperatureMax){if(A=parseFloat(P.temperatureMin),H=parseFloat(P.temperatureMax),isNaN(A)||isNaN(H)){alert("Inserisci temperature valide");return}if(A>=H){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}}else A=null,H=null;const ye={id:`custom_${Date.now()}`,name:P.name.trim(),description:P.description.trim(),temperatureMin:A,temperatureMax:H,temperatureRange:P.isAmbiente?"15-25C (Ambiente)":A&&H?`${A}-${H}C`:"",notes:P.notes.trim(),isCustom:!0,isAmbiente:P.isAmbiente,createdAt:new Date().toISOString()};te(Je=>{const Fe=[...Je,ye];return console.log(" Categorie aggiornate:",Fe),Fe}),R({name:"",description:"",temperatureMin:"",temperatureMax:"",notes:"",isAmbiente:!1}),k(!1),alert(`Categoria "${ye.name}" aggiunta con successo!`)},we=A=>{confirm("Sei sicuro di voler eliminare questa categoria? I frigoriferi che la utilizzano non avranno pi una categoria assegnata.")&&(s(H=>H.map(ye=>ye.dedicatedTo===A?{...ye,dedicatedTo:""}:ye)),te(H=>H.filter(ye=>ye.id!==A)))},Be=A=>{let H=0;if(typeof A=="object"&&A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(typeof A=="string"){const ye=A.replace("C","").trim();H=parseFloat(ye)}else typeof A=="number"&&(H=A);return isNaN(H)?"N/A":H<-13.5&&H>=-80?"Abbattitore":H<-2.5&&H>=-13.5?"Freezer":H>=-2.5&&H<=0||H>0&&H<=14?"Frigo":H>=15&&H<=25?"Ambiente":"N/A"},He=A=>{N(A),V(!0)},Qe=A=>e.filter(H=>H.location.toLowerCase().includes(A.name.toLowerCase())).sort((H,ye)=>new Date(ye.timestamp)-new Date(H.timestamp)),Ke=A=>{if(A.preventDefault(),!m.name.trim()||!m.setTemperature.trim()||!m.location.trim()||!m.assignedRole.trim()||!m.frequency.trim()||!m.selectedCategories||m.selectedCategories.length===0)return;const H=i.find(De=>De.name.toLowerCase()===m.name.trim().toLowerCase());if(H){alert(`Un punto di conservazione con questo nome esiste gi: "${H.name}" (creato il ${new Date(H.createdAt).toLocaleDateString("it-IT")}). Scegli un nome diverso.`);return}let ye,Je="";if(m.setTemperature.toLowerCase().trim()==="ambiente")ye=20,Je="da 15C a 25C";else{if(ye=parseFloat(m.setTemperature),isNaN(ye)){alert('Inserisci una temperatura valida o scrivi "ambiente" per temperatura ambiente');return}Je=`${ye}C`}if(m.selectedCategories&&m.selectedCategories.length>0){const De=he(m.setTemperature,m.selectedCategories);if(De.length>0){const Oe=De.map(mt=>` ${mt.category}: ottimale ${mt.optimal}, impostata ${mt.current}`).join(`
`);if(!confirm(` ATTENZIONE: Conflitti temperatura-categorie rilevati!

Temperatura impostata: ${Je}

Conflitti rilevati:
${Oe}

Questa temperatura potrebbe non essere adatta per la conservazione ottimale di alcune categorie selezionate.

Vuoi continuare comunque?`))return}}const Fe={id:Date.now(),name:m.name.trim(),setTemperature:Je,location:m.location.trim(),dedicatedTo:m.dedicatedTo.trim(),nextMaintenance:m.nextMaintenance.trim(),assignedRole:m.assignedRole.trim(),assignedTo:m.assignedTo.trim(),frequency:m.frequency.trim(),selectedCategories:m.selectedCategories||[],createdAt:new Date().toISOString(),createdBy:(r==null?void 0:r.name)||"Unknown"};s([...i,Fe]),w({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[]}),c(!1)},tt=A=>{confirm("Sei sicuro di voler eliminare questo punto di conservazione?")&&s(i.filter(H=>H.id!==A))},ke=A=>{y(A);let H="";if(A.setTemperature){const ye=A.setTemperature.toString();ye.includes("da 15C a 25C")?H="ambiente":H=ye.replace("C","").trim()}w({name:A.name,setTemperature:H,location:A.location||"",dedicatedTo:A.dedicatedTo||"",nextMaintenance:A.nextMaintenance||"",assignedRole:A.assignedRole||"",assignedTo:A.assignedTo||"",frequency:A.frequency||"",selectedCategories:A.selectedCategories||[]}),x(!0)},I=A=>{if(A.preventDefault(),!m.name.trim()||!m.setTemperature.trim()||!m.location.trim()||!m.assignedRole.trim()||!m.frequency.trim()||!m.selectedCategories||m.selectedCategories.length===0)return;if(i.find(De=>De.id!==v.id&&De.name.toLowerCase()===m.name.trim().toLowerCase())){alert("Un punto di conservazione con questo nome esiste gi. Scegli un nome diverso.");return}let ye,Je="";if(m.setTemperature.toLowerCase().trim()==="ambiente")ye=20,Je="da 15C a 25C";else{if(ye=parseFloat(m.setTemperature),isNaN(ye)){alert('Inserisci una temperatura valida o scrivi "ambiente" per temperatura ambiente');return}Je=`${ye}C`}if(m.selectedCategories&&m.selectedCategories.length>0){const De=he(m.setTemperature,m.selectedCategories);if(De.length>0){const Oe=De.map(mt=>` ${mt.category}: ottimale ${mt.optimal}, impostata ${mt.current}`).join(`
`);if(!confirm(` ATTENZIONE: Conflitti temperatura-categorie rilevati!

Temperatura impostata: ${Je}

Conflitti rilevati:
${Oe}

Questa temperatura potrebbe non essere adatta per la conservazione ottimale di alcune categorie selezionate.

Vuoi continuare comunque?`))return}}const Fe={...v,name:m.name.trim(),setTemperature:Je,location:m.location.trim(),dedicatedTo:m.dedicatedTo.trim(),nextMaintenance:m.nextMaintenance.trim(),assignedRole:m.assignedRole.trim(),assignedTo:m.assignedTo.trim(),frequency:m.frequency.trim(),selectedCategories:m.selectedCategories||[],updatedAt:new Date().toISOString(),updatedBy:(r==null?void 0:r.name)||"Unknown"};s(i.map(De=>De.id===v.id?Fe:De)),w({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[]}),y(null),x(!1)},je=A=>A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0?`${A.setTemperatureMin}-${A.setTemperatureMax}C`:A.setTemperature?A.setTemperature:"N/A",be=A=>{if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)return(A.setTemperatureMin+A.setTemperatureMax)/2;if(A.setTemperature){const H=A.setTemperature.toString().replace("C","").trim();return parseFloat(H)}return 0},ie=A=>{const H=e.filter(Fe=>Fe.location.toLowerCase().includes(A.name.toLowerCase())).sort((Fe,De)=>new Date(De.timestamp)-new Date(Fe.timestamp))[0];if(!H)return"no-data";const ye=be(A);if(isNaN(ye)||ye===0)return"no-data";const Je=Math.abs(H.temperature-ye);return Je<=1?"green":Je<=1.5?"orange":Je>=2?"red":"orange"},ue=A=>{const H={green:"bg-green-500",orange:"bg-orange-500",red:"bg-red-500","no-data":"bg-gray-400"};return n.jsx("div",{className:`w-3 h-3 rounded-full ${H[A]}`})},Ae=A=>({green:"Temperatura OK",orange:"Attenzione",red:"Critica","no-data":"Nessun dato"})[A],Ie=i.filter(A=>A.name.toLowerCase().includes(S.toLowerCase())||A.location.toLowerCase().includes(S.toLowerCase())),Ge=e.filter(A=>i.some(H=>A.location.toLowerCase().includes(H.name.toLowerCase()))).sort((A,H)=>new Date(H.timestamp)-new Date(A.timestamp));return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"Punti di Conservazione"]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(de,{onClick:()=>c(!0),className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4"}),"Aggiungi Punto di Conservazione"]})})]})}),n.jsxs(Ze,{children:[J.length>0&&n.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-green-600",children:n.jsx(jn,{className:"h-5 w-5"})}),n.jsx("h3",{className:"font-medium text-green-800",children:" Categorie Personalizzate"})]}),n.jsxs("span",{className:"text-sm text-green-600 bg-green-100 px-2 py-1 rounded-full",children:[J.length," categoria",J.length===1?"a":"e"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:J.map(A=>n.jsxs("div",{className:"p-3 bg-white border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-green-800",children:A.name}),n.jsx("p",{className:"text-sm text-green-700",children:A.description}),A.temperatureRange&&n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",A.temperatureRange]}),A.notes&&n.jsxs("p",{className:"text-xs text-green-600 mt-1",children:[" ",A.notes]})]}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>we(A.id),className:"h-6 w-6 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",title:"Elimina categoria",children:n.jsx(wn,{className:"h-3 w-3"})})]}),n.jsxs("div",{className:"text-xs text-green-500",children:["Creata il ",new Date(A.createdAt).toLocaleDateString("it-IT")]})]},A.id))})]}),i.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessun punto di conservazione registrato"}),n.jsx("p",{className:"text-sm",children:"Aggiungi il primo punto di conservazione per iniziare"})]}):n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[n.jsxs("h3",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),"Frigoriferi",n.jsx("button",{onClick:()=>oe("pizzeria-frigoA"),className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Guida posizionamento prodotti",children:n.jsx(Lo,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&(H>=-2.5&&H<=0||H>0&&H<=14)}).map(A=>{var ye;const H=ie(A);return n.jsxs("div",{className:`p-3 border rounded-lg ${H==="green"?"bg-green-50 border-green-200":H==="orange"?"bg-orange-50 border-orange-200":H==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[ue(H),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:A.name}),n.jsx("p",{className:`text-xs ${H==="green"?"text-green-600":H==="orange"?"text-orange-600":H==="red"?"text-red-600":"text-gray-600"}`,children:Ae(H)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>ke(A),className:"h-6 w-6 p-0",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>tt(A.id),className:"h-6 w-6 p-0",children:n.jsx(wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[A.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ic,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:A.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:je(A)})]})]}),A.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((ye=le.find(Je=>Je.id===A.dedicatedTo))==null?void 0:ye.name)||A.dedicatedTo})]})]},A.id)}),Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&(H>=-2.5&&H<=0||H>0&&H<=14)}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun frigorifero"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-purple-50",children:[n.jsxs("h3",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),"Freezer",n.jsx("button",{onClick:()=>oe("pizzeria-frigoB"),className:"text-purple-600 hover:text-purple-800 transition-colors",title:"Guida posizionamento prodotti",children:n.jsx(Lo,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H<-2.5&&H>=-13.5}).map(A=>{var ye;const H=ie(A);return n.jsxs("div",{className:`p-3 border rounded-lg ${H==="green"?"bg-green-50 border-green-200":H==="orange"?"bg-orange-50 border-orange-200":H==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[ue(H),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:A.name}),n.jsx("p",{className:`text-xs ${H==="green"?"text-green-600":H==="orange"?"text-orange-600":H==="red"?"text-red-600":"text-gray-600"}`,children:Ae(H)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>ke(A),className:"h-6 w-6 p-0",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>tt(A.id),className:"h-6 w-6 p-0",children:n.jsx(wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[A.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ic,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:A.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:je(A)})]})]}),A.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((ye=$d.find(Je=>Je.id===A.dedicatedTo))==null?void 0:ye.name)||A.dedicatedTo})]})]},A.id)}),Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H<-2.5&&H>=-13.5}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun freezer"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-red-50",children:[n.jsxs("h3",{className:"font-semibold text-red-800 mb-3 flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),"Abbattitore",n.jsx("button",{onClick:()=>oe("abbattitore"),className:"text-red-600 hover:text-red-800 transition-colors",title:"Guida posizionamento prodotti",children:n.jsx(Lo,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H<-13.5&&H>=-80}).map(A=>{var ye;const H=ie(A);return n.jsxs("div",{className:`p-3 border rounded-lg ${H==="green"?"bg-green-50 border-green-200":H==="orange"?"bg-orange-50 border-orange-200":H==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[ue(H),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:A.name}),n.jsx("p",{className:`text-xs ${H==="green"?"text-green-600":H==="orange"?"text-orange-600":H==="red"?"text-red-600":"text-gray-600"}`,children:Ae(H)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>ke(A),className:"h-6 w-6 p-0",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>tt(A.id),className:"h-6 w-6 p-0",children:n.jsx(wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[A.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ic,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:A.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:je(A)})]})]}),A.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"font-medium text-gray-700",children:((ye=$d.find(Je=>Je.id===A.dedicatedTo))==null?void 0:ye.name)||A.dedicatedTo})]})]},A.id)}),Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H<-13.5&&H>=-80}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun abbattitore"})]})]}),n.jsxs("div",{className:"border rounded-lg p-4 bg-green-50",children:[n.jsxs("h3",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),"Ambiente",n.jsx("button",{onClick:()=>oe("ambiente"),className:"text-green-600 hover:text-green-800 transition-colors",title:"Guida posizionamento prodotti",children:n.jsx(Lo,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-2",children:[Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H>=15&&H<=25}).map(A=>{var ye;const H=ie(A);return n.jsxs("div",{className:`p-3 border rounded-lg ${H==="green"?"bg-green-50 border-green-200":H==="orange"?"bg-orange-50 border-orange-200":H==="red"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[ue(H),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:A.name}),n.jsx("p",{className:`text-xs ${H==="green"?"text-green-600":H==="orange"?"text-orange-600":H==="red"?"text-red-600":"text-gray-600"}`,children:Ae(H)})]})]}),n.jsxs("div",{className:"flex gap-1",children:[(r==null?void 0:r.role)==="admin"&&n.jsx(de,{size:"sm",variant:"outline",onClick:()=>ke(A),className:"h-6 w-6 p-0",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>tt(A.id),className:"h-6 w-6 p-0",children:n.jsx(wn,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[A.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(ic,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:A.location})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"h-3 w-3 text-gray-500"}),n.jsx("span",{className:"font-medium",children:je(A)})]})]}),A.dedicatedTo&&n.jsxs("div",{className:"mt-2 text-xs",children:[n.jsx("span",{className:"text-gray-500",children:"Categoria: "}),n.jsx("span",{className:"text-gray-700",children:((ye=$d.find(Je=>Je.id===A.dedicatedTo))==null?void 0:ye.name)||A.dedicatedTo})]})]},A.id)}),Ie.filter(A=>{let H=0;if(A.setTemperatureMin!==void 0&&A.setTemperatureMax!==void 0)H=(A.setTemperatureMin+A.setTemperatureMax)/2;else if(A.setTemperature){const ye=A.setTemperature.toString().replace("C","").trim();H=parseFloat(ye)}return!isNaN(H)&&H>=15&&H<=25}).length===0&&n.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"Nessun punto ambiente"})]})]})]})})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(X1,{className:"h-5 w-5"}),"Attivit Registro Temperature"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ut,{placeholder:"Cerca per nome frigorifero, utente, data...",value:S,onChange:A=>j(A.target.value),className:"pl-10"})]}),Ge.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessuna attivit di registrazione temperatura"}),n.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo aver aggiunto frigoriferi"})]}):n.jsx("div",{className:"space-y-3",children:Ge.map(A=>{const H=i.find(ye=>A.location.toLowerCase().includes(ye.name.toLowerCase()));return n.jsx("div",{className:"p-3 border rounded-lg",children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-medium",children:A.location}),H&&n.jsx("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:H.name})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura rilevata:"}),n.jsxs("div",{className:"font-bold text-lg",children:[A.temperature,"C"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Data rilevamento:"}),n.jsx("div",{className:"font-medium",children:A.time})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Operatore:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(i2,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:A.userName||"N/A"}),A.userDepartment&&n.jsxs("span",{className:"text-gray-500",children:["(",A.userDepartment,")"]})]})]})]})]})})},A.id)})})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fr,{className:"h-5 w-5"}),"Stato Punti di Conservazione"]})}),n.jsx(Ze,{children:i.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(fr,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessun punto di conservazione registrato"}),n.jsx("p",{className:"text-sm",children:"Aggiungi punti di conservazione per visualizzare lo stato"})]}):n.jsx("div",{className:"space-y-3",children:i.map(A=>{const H=ie(A),ye=e.filter(Je=>Je.location.toLowerCase().includes(A.name.toLowerCase())).sort((Je,Fe)=>new Date(Fe.timestamp)-new Date(Je.timestamp))[0];return n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer hover:shadow-md transition-shadow ${H==="green"?"bg-green-50 border-green-200 hover:bg-green-100":H==="orange"?"bg-orange-50 border-orange-200 hover:bg-orange-100":H==="red"?"bg-red-50 border-red-200 hover:bg-red-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,onClick:()=>He(A),title:"Clicca per vedere la cronologia temperature",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:A.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:Be(A)}),ue(H),n.jsx("span",{className:`text-sm font-medium ${H==="green"?"text-green-700":H==="orange"?"text-orange-700":H==="red"?"text-red-700":"text-gray-600"}`,children:Ae(H)})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),n.jsxs("div",{className:"font-medium",children:[je(A)," (",Be(A),")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),n.jsx("div",{className:"font-medium",children:A.location||"Non specificato"})]})]}),ye&&n.jsx("div",{className:`mt-3 p-3 rounded-lg ${H==="green"?"bg-green-100":H==="orange"?"bg-orange-100":H==="red"?"bg-red-100":"bg-gray-100"}`,children:n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-600",children:"Ultima registrazione:"}),n.jsxs("span",{className:"font-medium",children:[ye.temperature,"C"]}),n.jsxs("span",{className:"text-gray-500",children:["il ",ye.time]})]})})]})})},A.id)})})})]}),d&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-6xl mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Aggiungi Punto di Conservazione"}),n.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"text-blue-600 mt-0.5",children:n.jsx(En,{className:"h-4 w-4"})}),n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),n.jsxs("form",{onSubmit:Ke,className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informazioni Base"}),n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",className:"text-base font-medium text-gray-700",children:"Nome punto di conservazione *"}),n.jsx(ut,{id:"name",type:"text",value:m.name,onChange:A=>w({...m,name:A.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",className:"mt-1",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"location",className:"text-base font-medium text-gray-700",children:"Posizionamento *"}),n.jsxs("select",{id:"location",value:m.location,onChange:A=>w({...m,location:A.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona reparto"}),a.map((A,H)=>n.jsx("option",{value:A.name||A,children:A.name||A},A.id||H))]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Categorie di Prodotti (Max 5)"}),n.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:()=>k(!M),className:"flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(jn,{className:"h-3 w-3"}),"Nuova"]})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:le.map(A=>{var Fe;const H=((Fe=m.selectedCategories)==null?void 0:Fe.includes(A.id))||!1,ye=ae(A.id,m.selectedCategories||[],m.setTemperature),Je=()=>{switch(ye){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";case"neutral":return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}};return n.jsx("div",{onClick:()=>Pe(A.id),className:`p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 ${Je()}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-xs truncate",children:A.name}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:A.description})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[H&&n.jsx(bn,{className:"h-3 w-3 text-blue-600 flex-shrink-0"}),ye==="compatible"&&!H&&n.jsx("span",{className:"text-xs",children:""}),ye==="incompatible"&&!H&&n.jsx("span",{className:"text-xs",children:""}),ye==="tolerance"&&!H&&n.jsx("span",{className:"text-xs",children:""})]})]})},A.id)})}),m.selectedCategories&&m.selectedCategories.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded border",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categorie selezionate:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:m.selectedCategories.map(A=>{const H=le.find(ye=>ye.id===A);return n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:H==null?void 0:H.name},A)})})]}),m.selectedCategories.length===0&&n.jsx("p",{className:"text-xs text-red-500 mt-2",children:" Seleziona almeno una categoria per procedere"}),M&&n.jsxs("div",{className:"mt-3 p-3 bg-blue-50 border-2 border-blue-300 rounded-lg shadow-sm",children:[n.jsx("h3",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Crea Nuova Categoria"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categoryName",className:"text-xs",children:"Nome Categoria *"}),n.jsx(ut,{id:"categoryName",type:"text",value:P.name,onChange:A=>R({...P,name:A.target.value}),placeholder:"es. Prodotti Biologici...",className:"text-sm",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categoryDescription",className:"text-xs",children:"Descrizione *"}),n.jsx(ut,{id:"categoryDescription",type:"text",value:P.description,onChange:A=>R({...P,description:A.target.value}),placeholder:"Descrizione della categoria...",className:"text-sm",required:!0})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx("input",{type:"checkbox",id:"categoryIsAmbiente",checked:P.isAmbiente,onChange:A=>R({...P,isAmbiente:A.target.checked}),className:"h-3 w-3 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx(Ue,{htmlFor:"categoryIsAmbiente",className:"text-xs font-medium text-gray-700",children:"Temperatura ambiente (15-25C)"})]}),!P.isAmbiente&&n.jsx(vf,{label:"Range Temperatura (C)",minValue:P.temperatureMin,maxValue:P.temperatureMax,onMinChange:A=>R({...P,temperatureMin:A.target.value}),onMaxChange:A=>R({...P,temperatureMax:A.target.value}),required:!1,showValidation:!0,showSuggestions:!0,compactMode:!0,className:"w-full",id:"category-temperature-range"}),P.isAmbiente&&n.jsxs("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded text-xs",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jt,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-blue-800 font-medium",children:"Temperatura ambiente: 15-25C"})]}),n.jsx("p",{className:"text-blue-600 mt-1",children:"Questa categoria utilizzer automaticamente il range di temperatura ambiente."})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categoryNotes",className:"text-xs",children:"Note"}),n.jsx(ut,{id:"categoryNotes",type:"text",value:P.notes,onChange:A=>R({...P,notes:A.target.value}),placeholder:"Note aggiuntive...",className:"text-sm"})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(de,{type:"button",size:"sm",className:"flex-1 text-xs",onClick:xe,children:"Crea Categoria"}),n.jsx(de,{type:"button",variant:"outline",size:"sm",onClick:()=>k(!1),className:"flex-1 text-xs",children:"Annulla"})]})]})]})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Temperatura di Conservazione"}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"setTemperature",className:"text-sm font-medium text-gray-700",children:"Temperatura Impostata (C) *"}),n.jsx(ut,{id:"setTemperature",type:"text",value:m.setTemperature,onChange:A=>w({...m,setTemperature:A.target.value}),placeholder:"es. 4, -18, 2.5, ambiente...",className:`mt-1 p-3 ${m.setTemperature&&m.selectedCategories.length>0?(()=>{const A=z(m.setTemperature,m.selectedCategories);return A.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":A.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":A.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`,required:!0}),n.jsx("p",{className:"text-xs text-gray-600 mt-2 p-2 bg-white rounded border",children:'Inserisci la temperatura di conservazione (es. 4 per frigorifero, -18 per freezer, "ambiente" per temperatura ambiente)'})]}),m.setTemperature&&m.selectedCategories.length>0&&n.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 border",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Jt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const A=z(m.setTemperature,m.selectedCategories);return n.jsxs("div",{className:`flex items-center gap-2 ${A.color==="green"?"text-green-600":A.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[A.type==="compliant"?"":A.type==="warning"?"":"",n.jsx("span",{className:"text-sm",children:A.message})]})})(),m.selectedCategories.length>0&&n.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const A=G(m.selectedCategories);return A&&!A.compatible||A?A.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]})]}),n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Manutenzione"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"frequency",className:"text-sm font-medium text-gray-700",children:"Frequenza Rilevamento *"}),n.jsxs("select",{id:"frequency",value:m.frequency,onChange:A=>w({...m,frequency:A.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona frequenza"}),n.jsx("option",{value:"giornaliera",children:"Giornaliera"}),n.jsx("option",{value:"settimanale",children:"Settimanale"}),n.jsx("option",{value:"bisettimanale",children:"Bisettimanale"}),n.jsx("option",{value:"mensile",children:"Mensile"})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"assignedRole",className:"text-sm font-medium text-gray-700",children:"Assegna rilevamento temperature a: *"}),n.jsxs("select",{id:"assignedRole",value:m.assignedRole,onChange:A=>w({...m,assignedRole:A.target.value,assignedTo:""}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),n.jsx("option",{value:"Responsabile",children:"Responsabile"}),n.jsx("option",{value:"Cuoco",children:"Cuoco"}),n.jsx("option",{value:"Banconista",children:"Banconista"}),n.jsx("option",{value:"Addetto",children:"Addetto"}),n.jsx("option",{value:"Altro",children:"Altro"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"assignedTo",className:"text-sm font-medium text-gray-700",children:"Dipendente Specifico (Opzionale)"}),n.jsxs("select",{id:"assignedTo",value:m.assignedTo,onChange:A=>w({...m,assignedTo:A.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",disabled:!m.assignedRole,children:[n.jsx("option",{value:"",children:"Seleziona dipendente"}),ne.filter(A=>m.assignedRole?m.assignedRole==="Altro"?A.category==="Altro":A.role===m.assignedRole:!0).map(A=>n.jsxs("option",{value:A.name,children:[A.name," - ",A.role," (",A.category,")"]},A.id))]})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-gray-200",children:[n.jsx(de,{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3",disabled:!m.name.trim()||!m.setTemperature.trim()||!m.location.trim()||!m.assignedRole.trim()||!m.frequency.trim()||!m.selectedCategories||m.selectedCategories.length===0,children:"Aggiungi Punto di Conservazione"}),n.jsx(de,{type:"button",variant:"outline",onClick:()=>c(!1),className:"flex-1 py-3",children:"Annulla"})]})]})]})}),h&&v&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 sm:p-8 w-full max-w-6xl mx-2 sm:mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:"Modifica Punto di Conservazione"}),n.jsx("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"text-blue-600 mt-0.5",children:n.jsx(En,{className:"h-4 w-4"})}),n.jsx("div",{children:n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:" Suggerimento:"})," Assegna una categoria specifica al punto di conservazione per garantire che solo i prodotti compatibili possano essere inseriti."]})})]})}),n.jsxs("form",{onSubmit:I,className:"space-y-4",children:[n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Informazioni Base"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-name",className:"text-sm font-medium text-gray-700",children:"Nome punto di conservazione *"}),n.jsx(ut,{id:"edit-name",type:"text",value:m.name,onChange:A=>w({...m,name:A.target.value}),placeholder:"es. ripiano A, Armadio 2, Freezer A...",className:"mt-1",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-location",className:"text-sm font-medium text-gray-700",children:"Posizionamento *"}),n.jsxs("select",{id:"edit-location",value:m.location,onChange:A=>w({...m,location:A.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona reparto"}),a.map((A,H)=>n.jsx("option",{value:A.name||A,children:A.name||A},A.id||H))]})]})]})]}),n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Categorie di Prodotti (Max 5)"}),n.jsxs(de,{type:"button",variant:"outline",size:"sm",onClick:()=>k(!M),className:"flex items-center gap-1 text-xs px-2 py-1",children:[n.jsx(jn,{className:"h-3 w-3"}),"Nuova"]})]}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:le.map(A=>{var Fe;const H=((Fe=m.selectedCategories)==null?void 0:Fe.includes(A.id))||!1,ye=ae(A.id,m.selectedCategories||[],m.setTemperature),Je=()=>{switch(ye){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";case"neutral":return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";default:return"bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300"}};return n.jsx("div",{onClick:()=>Pe(A.id),className:`p-2 rounded-lg border-2 cursor-pointer transition-all duration-200 ${Je()}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-medium text-xs truncate",children:A.name}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:A.description})]}),n.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[H&&n.jsx(bn,{className:"h-3 w-3 text-blue-600 flex-shrink-0"}),ye==="compatible"&&!H&&n.jsx("span",{className:"text-xs",children:""}),ye==="incompatible"&&!H&&n.jsx("span",{className:"text-xs",children:""}),ye==="tolerance"&&!H&&n.jsx("span",{className:"text-xs",children:""})]})]})},A.id)})}),m.selectedCategories&&m.selectedCategories.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded border",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Categorie selezionate:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:m.selectedCategories.map(A=>{const H=le.find(ye=>ye.id===A);return n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:H==null?void 0:H.name},A)})})]}),m.selectedCategories.length===0&&n.jsx("p",{className:"text-xs text-red-500 mt-2",children:" Seleziona almeno una categoria per procedere"})]}),n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Temperatura di Conservazione"}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-setTemperature",className:"text-sm font-medium text-gray-700",children:"Temperatura Impostata (C) *"}),n.jsx(ut,{id:"edit-setTemperature",type:"text",value:m.setTemperature,onChange:A=>w({...m,setTemperature:A.target.value}),placeholder:"es. 4, -18, 2.5, ambiente...",className:`mt-1 p-3 ${m.setTemperature&&m.selectedCategories.length>0?(()=>{const A=z(m.setTemperature,m.selectedCategories);return A.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":A.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":A.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`,required:!0}),n.jsx("p",{className:"text-xs text-gray-600 mt-2 p-2 bg-white rounded border",children:'Inserisci la temperatura di conservazione (es. 4 per frigorifero, -18 per freezer, "ambiente" per temperatura ambiente)'})]}),m.setTemperature&&m.selectedCategories.length>0&&n.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-gray-50 border",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Jt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const A=z(m.setTemperature,m.selectedCategories);return n.jsxs("div",{className:`flex items-center gap-2 ${A.color==="green"?"text-green-600":A.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[A.type==="compliant"?"":A.type==="warning"?"":"",n.jsx("span",{className:"text-sm",children:A.message})]})})(),m.selectedCategories.length>0&&n.jsx("div",{className:"mt-3 p-3 rounded-lg bg-blue-50 border border-blue-200",children:n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const A=G(m.selectedCategories);return A&&!A.compatible||A?A.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]})]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Posizionamento"}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-location",className:"text-sm font-medium text-gray-700",children:"Reparto *"}),n.jsxs("select",{id:"edit-location",value:m.location,onChange:A=>w({...m,location:A.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona un reparto"}),a.map(A=>n.jsx("option",{value:A.name,children:A.name},A.id))]})]})]}),n.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Manutenzione"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-frequency",className:"text-sm font-medium text-gray-700",children:"Frequenza Rilevamento *"}),n.jsxs("select",{id:"edit-frequency",value:m.frequency,onChange:A=>w({...m,frequency:A.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona frequenza"}),n.jsx("option",{value:"giornaliera",children:"Giornaliera"}),n.jsx("option",{value:"settimanale",children:"Settimanale"}),n.jsx("option",{value:"bisettimanale",children:"Bisettimanale"}),n.jsx("option",{value:"mensile",children:"Mensile"})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"edit-assignedRole",className:"text-sm font-medium text-gray-700",children:"Assegna rilevamento temperature a: *"}),n.jsxs("select",{id:"edit-assignedRole",value:m.assignedRole,onChange:A=>w({...m,assignedRole:A.target.value,assignedTo:""}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),n.jsx("option",{value:"Responsabile",children:"Responsabile"}),n.jsx("option",{value:"Cuoco",children:"Cuoco"}),n.jsx("option",{value:"Banconista",children:"Banconista"}),n.jsx("option",{value:"Addetto",children:"Addetto"}),n.jsx("option",{value:"Altro",children:"Altro"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"edit-assignedTo",className:"text-sm font-medium text-gray-700",children:"Dipendente Specifico (Opzionale)"}),n.jsxs("select",{id:"edit-assignedTo",value:m.assignedTo,onChange:A=>w({...m,assignedTo:A.target.value}),className:"w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 mt-1",disabled:!m.assignedRole,children:[n.jsx("option",{value:"",children:"Seleziona dipendente"}),ne.filter(A=>m.assignedRole?m.assignedRole==="Altro"?A.category==="Altro":A.role===m.assignedRole:!0).map(A=>n.jsxs("option",{value:A.name,children:[A.name," - ",A.role," (",A.category,")"]},A.id))]})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(de,{type:"submit",className:"flex-1",disabled:!m.name.trim()||!m.setTemperature.trim()||!m.location.trim()||!m.assignedRole.trim()||!m.frequency.trim()||!m.selectedCategories||m.selectedCategories.length===0,children:"Aggiorna"}),n.jsx(de,{type:"button",variant:"outline",onClick:()=>{x(!1),y(null),w({name:"",setTemperature:"",location:"",dedicatedTo:"",nextMaintenance:"",assignedRole:"",assignedTo:"",frequency:"",selectedCategories:[]})},className:"flex-1",children:"Annulla"})]})]})]})}),C&&f&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[n.jsx(Jt,{className:"h-5 w-5"}),"Cronologia Temperature - ",f.name]}),n.jsx(de,{variant:"outline",onClick:()=>{V(!1),N(null)},className:"p-2",children:n.jsx(Yt,{className:"h-4 w-4"})})]}),n.jsx("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura impostata:"}),n.jsxs("div",{className:"font-medium",children:[je(f)," (",Be(f),")"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Posizionamento:"}),n.jsx("div",{className:"font-medium",children:f.location||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Categoria punto di Conservazione:"}),n.jsx("div",{className:"font-medium",children:f.dedicatedTo?((it=le.find(A=>A.id===f.dedicatedTo))==null?void 0:it.name)||f.dedicatedTo:"Non specificato"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Prossima manutenzione:"}),n.jsx("div",{className:"font-medium",children:f.nextMaintenance||"Non programmata"})]})]})}),(()=>{const A=Qe(f);return A.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{children:"Nessuna registrazione di temperatura"}),n.jsx("p",{className:"text-sm",children:"Le registrazioni appariranno qui dopo le prime misurazioni"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:["Totale registrazioni: ",A.length]}),A.map((H,ye)=>{const Je=Math.abs(H.temperature-be(f)),Fe=Je>2?"danger":Je>1?"warning":"ok";return n.jsxs("div",{className:`p-4 border rounded-lg ${Fe==="ok"?"bg-green-50 border-green-200":Fe==="warning"?"bg-orange-50 border-orange-200":"bg-red-50 border-red-200"}`,children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-lg font-bold",children:[H.temperature,"C"]}),n.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${Fe==="ok"?"bg-green-100 text-green-700":Fe==="warning"?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}`,children:Fe==="ok"?" OK":Fe==="warning"?" Attenzione":" Critico"}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Differenza: ",Je.toFixed(1),"C"]})]}),n.jsxs("div",{className:"text-right text-sm text-gray-600",children:[n.jsx("div",{children:H.time}),n.jsx("div",{className:"text-xs",children:H.user||"Utente sconosciuto"})]})]}),H.notes&&n.jsxs("div",{className:"mt-2 text-sm text-gray-700 bg-gray-50 p-2 rounded",children:[" ",H.notes]})]},H.id||ye)})]})})()]})}),T&&n.jsx(hN,{isOpen:T,onClose:()=>F(!1),fridgeType:re}),n.jsxs(We,{className:"mt-6",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Lo,{className:"h-5 w-5 text-blue-600"})," Riferimenti Normativi EU/ASL"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"text-sm text-gray-700 space-y-3",children:[n.jsx("p",{className:"font-medium text-gray-800",children:"Le temperature di conservazione suggerite sono basate sulle seguenti normative europee e italiane:"}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:" Regolamento (CE) 853/2004"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:"Allegato III - Requisiti specifici per alimenti di origine animale"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni fresche: 7C (frattaglie 3C)"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pollame: 4C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Carni macinate: 2C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Pesce fresco: vicino al ghiaccio in fusione"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Latte crudo: 6C"}),n.jsx("p",{className:"text-blue-700 text-xs mb-1",children:" Ovoprodotti: 4C"}),n.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/TXT/PDF/?uri=CELEX:32004R0853",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-xs hover:text-blue-800",children:" Leggi il regolamento completo"})]}),n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-green-800 mb-2",children:" DPR 327/80 (Italia)"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:"Prassi storiche richiamate da ASL"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti cotti da mantenere caldi: +6065C"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Alimenti facilmente deperibili: +4C"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Uova in guscio: temperatura costante"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Evitare sbalzi termici"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Proteggere da sole e odori"}),n.jsx("p",{className:"text-green-700 text-xs mb-1",children:" Rispettare etichette produttore"})]})]}),n.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:" Direttiva 89/108/CEE (Surgelati)"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Catena del freddo continua a -18C"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Non ricongelare dopo decongelamento"}),n.jsx("p",{className:"text-purple-700 text-xs mb-1",children:" Brevi fluttuazioni ammesse nel trasporto"}),n.jsx("a",{href:"https://eur-lex.europa.eu/legal-content/IT/ALL/?uri=celex:31989L0108",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 underline text-xs hover:text-purple-800",children:" Leggi la direttiva completa"})]}),n.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:" Note Importanti"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Le temperature suggerite sono indicative e basate su normative EU/ASL"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Rispettare sempre le indicazioni specifiche del produttore"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" In caso di dubbi, consultare le autorit sanitarie locali (ASL)"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Mantenere aggiornate le procedure HACCP aziendali"}),n.jsx("p",{className:"text-orange-700 text-xs mb-1",children:" Documentare eventuali deviazioni dalle temperature standard"})]})]})})]})]})}function yf({value:e,onValueChange:t,children:r}){return n.jsx("div",{className:"w-full",children:qa.Children.map(r,i=>!i||!i.type?i:i.type===nm?qa.cloneElement(i,{value:e,onValueChange:t}):i.type===Mr?qa.cloneElement(i,{currentValue:e}):i)})}function nm({value:e,onValueChange:t,children:r,className:i=""}){return n.jsx("div",{className:`flex p-1 bg-gray-100 rounded-xl shadow-sm ${i}`,children:qa.Children.map(r,s=>!s||!s.type?s:s.type===Tr?qa.cloneElement(s,{currentValue:e,onValueChange:t,isActive:e===s.props.value}):s)})}function Tr({value:e,currentValue:t,onValueChange:r,isActive:i,children:s,className:a=""}){return n.jsx("button",{onClick:()=>r(e),className:`
        flex-1 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 ease-in-out
        ${i?"bg-white text-blue-600 shadow-md transform scale-[1.02]":"text-gray-600 hover:text-gray-900 hover:bg-white/60 active:scale-[0.98]"}
        ${a}
      `,children:s})}function Mr({value:e,currentValue:t,children:r}){return t!==e?null:n.jsx("div",{className:"mt-6 animate-in fade-in-50 duration-200",children:r})}const oh=()=>[{id:"cucina",name:"Cucina",description:"Area di preparazione e cottura",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"bancone",name:"Bancone",description:"Area di servizio e preparazione",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"sala",name:"Sala",description:"Area di servizio clienti",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"},{id:"magazzino",name:"Magazzino",description:"Area di stoccaggio e conservazione",location:"",manager:"",notes:"",enabled:!0,createdAt:new Date().toISOString(),createdBy:"Sistema"}];function fN({currentUser:e,departments:t,setDepartments:r}){const[i,s]=K.useState(!1),[a,l]=K.useState(null),[d,c]=K.useState({name:"",description:"",location:"",manager:"",notes:""});K.useEffect(()=>{const m=localStorage.getItem("haccp-departments");if(m)try{const w=JSON.parse(m);w.length>0?r(w):r(oh())}catch(w){console.error("Errore nel caricamento reparti:",w),r(oh())}else r(oh())},[]),K.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(t))},[t]);const h=()=>{c({name:"",description:"",location:"",manager:"",notes:""}),l(null)},x=m=>{if(m.preventDefault(),!d.name.trim()){alert("Il nome del reparto  obbligatorio");return}const w=t.find(S=>S.name.toLowerCase()===d.name.trim().toLowerCase());if(w&&(!a||w.id!==a.id)){alert("Un reparto con questo nome esiste gi");return}if(a){const S=t.map(j=>j.id===a.id?{...j,name:d.name.trim(),updatedAt:new Date().toISOString(),updatedBy:(e==null?void 0:e.name)||"Unknown"}:j);r(S)}else{const S={id:`dept_${Date.now()}`,name:d.name.trim(),description:"",location:"",manager:"",notes:"",enabled:!0,isCustom:!0,createdAt:new Date().toISOString(),createdBy:(e==null?void 0:e.name)||"Unknown"};r([...t,S])}h(),s(!1)},v=m=>{l(m),c({name:m.name,description:m.description||"",location:m.location||"",manager:m.manager||"",notes:m.notes||""}),s(!0)},y=m=>{confirm("Sei sicuro di voler eliminare questo reparto? Questa azione non pu essere annullata.")&&r(t.filter(w=>w.id!==m))};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[n.jsx(ra,{className:"h-6 w-6 text-blue-600"}),"Gestione Reparti"]}),n.jsx("p",{className:"text-gray-600",children:"Visualizza e gestisci i reparti configurati durante l'onboarding"})]}),n.jsxs(de,{onClick:()=>{h(),s(!0)},className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4"}),"Aggiungi Reparto"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Reparti Attivi (",t.length,")"]})}),t.length===0?n.jsx(We,{children:n.jsxs(Ze,{className:"p-8 text-center",children:[n.jsx(ra,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun reparto configurato"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"I reparti vengono configurati durante l'onboarding dell'applicazione."})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(m=>n.jsx(We,{className:"hover:shadow-md transition-shadow",children:n.jsx(Ze,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ra,{className:"h-5 w-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:m.name}),n.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Attivo"})]})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>v(m),className:"h-8 w-8 p-0",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>y(m.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:n.jsx(wn,{className:"h-3 w-3"})})]})]})})},m.id))})]}),i&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(ra,{className:"h-5 w-5"}),a?"Modifica Reparto":"Nuovo Reparto"]})}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Reparto *"}),n.jsx(ut,{id:"name",value:d.name,onChange:m=>c({...d,name:m.target.value}),placeholder:"es. Cucina, Sala, Magazzino...",required:!0})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{type:"submit",className:"flex-1",children:a?"Aggiorna Reparto":"Aggiungi Reparto"}),n.jsx(de,{type:"button",variant:"outline",onClick:()=>{s(!1),h()},className:"flex-1",children:"Annulla"})]})]})})]})]})}function gN({staff:e,setStaff:t,users:r,setUsers:i,currentUser:s,isAdmin:a,departments:l,setDepartments:d}){const[c,h]=K.useState({name:"",roles:[""],certification:"",notes:""}),[x,v]=K.useState(!1),[y,m]=K.useState(null),[w,S]=K.useState({name:"",description:"",members:[],assignedTasks:[]}),[j,f]=K.useState(null),[N,C]=K.useState(!1),[V,ee]=K.useState("staff"),[ce,ne]=K.useState({}),[O,J]=K.useState(!1),[te,M]=K.useState(null),[k,P]=K.useState(""),[R,T]=K.useState(!1);K.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(e))},[e]),K.useEffect(()=>{const I=localStorage.getItem("haccp-departments"),je=localStorage.getItem("haccp-departments-version"),be=[{id:"amministratori",name:"Amministratori",description:"Gestione e supervisione completa",members:[],assignedTasks:[]},{id:"responsabili",name:"Responsabili",description:"Responsabili di reparto e coordinamento",members:[],assignedTasks:[]},{id:"dipendenti",name:"Dipendenti",description:"Staff fisso e personale regolare",members:[],assignedTasks:[]},{id:"collaboratori",name:"Collaboratore Occasionale",description:"Personale temporaneo e collaborazioni esterne",members:[],assignedTasks:[]}];if(je!=="2.0"||!I)d(be),localStorage.setItem("haccp-departments",JSON.stringify(be)),localStorage.setItem("haccp-departments-version","2.0");else{const ie=JSON.parse(I),ue=[...be];ie.forEach(Ae=>{be.find(Ie=>Ie.id===Ae.id)||ue.push(Ae)}),d(ue)}},[]),K.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(l))},[l]),K.useEffect(()=>{if(l.length>0&&e&&Array.isArray(e)&&e.length>=0){const I=l.map(be=>({...be,members:e.filter(ie=>ie&&(ie.roles&&ie.roles.includes(be.name)||ie.role===be.name||ie.primaryRole===be.name)).map(ie=>ie.id)}));I.some((be,ie)=>{var ue;return JSON.stringify(be.members)!==JSON.stringify(((ue=l[ie])==null?void 0:ue.members)||[])})&&d(I)}},[e]);const F=I=>{if(I.preventDefault(),!c.name.trim()||c.roles.every(ue=>!ue.trim()))return;if(e&&Array.isArray(e)?e.some(ue=>ue&&ue.name&&ue.name.toLowerCase().trim()===c.name.toLowerCase().trim()):!1){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la registrazione.`);return}const be=[...new Set(c.roles.filter(ue=>ue.trim()))],ie={id:Date.now(),name:c.name.trim(),roles:be,primaryRole:be[0],certification:c.certification.trim(),notes:c.notes.trim(),addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT")};t([...e,ie]),h({name:"",roles:[""],certification:"",notes:""})},re=I=>{confirm("Sei sicuro di voler rimuovere questo membro del personale?")&&t(e&&Array.isArray(e)?e.filter(je=>je&&je.id!==I):[])},q=()=>{h(I=>({...I,roles:[...I.roles,""]}))},le=I=>{c.roles.length>1&&h(je=>({...je,roles:je.roles.filter((be,ie)=>ie!==I)}))},oe=(I,je)=>{h(be=>({...be,roles:be.roles.map((ie,ue)=>ue===I?je:ie)}))};e&&Array.isArray(e)&&[...new Set(e.map(I=>I==null?void 0:I.role).filter(Boolean))],e&&Array.isArray(e)&&e.filter(I=>I&&I.certification&&I.certification.trim()!=="");const Pe={Amministratori:"bg-red-100 text-red-800",Responsabili:"bg-purple-100 text-purple-800",Dipendenti:"bg-blue-100 text-blue-800","Collaboratore Occasionale":"bg-yellow-100 text-yellow-800",Cuoco:"bg-blue-100 text-blue-800","Sous Chef":"bg-purple-100 text-purple-800",Chef:"bg-red-100 text-red-800",Cameriere:"bg-green-100 text-green-800","Addetto cucina":"bg-yellow-100 text-yellow-800",Manager:"bg-gray-100 text-gray-800",default:"bg-gray-100 text-gray-800"},z=I=>{if(!I||typeof I!="string")return"bg-gray-100 text-gray-800";if(Pe[I])return Pe[I];const je=["bg-indigo-100 text-indigo-800","bg-pink-100 text-pink-800","bg-teal-100 text-teal-800","bg-orange-100 text-orange-800","bg-emerald-100 text-emerald-800","bg-violet-100 text-violet-800","bg-cyan-100 text-cyan-800","bg-rose-100 text-rose-800","bg-lime-100 text-lime-800","bg-amber-100 text-amber-800","bg-sky-100 text-sky-800","bg-fuchsia-100 text-fuchsia-800","bg-slate-100 text-slate-800","bg-stone-100 text-stone-800","bg-zinc-100 text-zinc-800","bg-neutral-100 text-neutral-800","bg-red-200 text-red-900","bg-blue-200 text-blue-900","bg-green-200 text-green-900","bg-purple-200 text-purple-900","bg-yellow-200 text-yellow-900","bg-indigo-200 text-indigo-900","bg-pink-200 text-pink-900","bg-teal-200 text-teal-900"],be=I.split("").reduce((ie,ue)=>(ie=(ie<<5)-ie+ue.charCodeAt(0),ie&ie),0);return je[Math.abs(be)%je.length]},U=I=>{const je=z(I);return je.includes("text-red-800")?"bg-red-50 border-red-200":je.includes("text-purple-800")?"bg-purple-50 border-purple-200":je.includes("text-blue-800")?"bg-blue-50 border-blue-200":je.includes("text-yellow-800")?"bg-yellow-50 border-yellow-200":je.includes("text-green-800")?"bg-green-50 border-green-200":je.includes("text-indigo-800")?"bg-indigo-50 border-indigo-200":je.includes("text-pink-800")?"bg-pink-50 border-pink-200":je.includes("text-teal-800")?"bg-teal-50 border-teal-200":je.includes("text-orange-800")?"bg-orange-50 border-orange-200":je.includes("text-emerald-800")?"bg-emerald-50 border-emerald-200":je.includes("text-violet-800")?"bg-violet-50 border-violet-200":je.includes("text-cyan-800")?"bg-cyan-50 border-cyan-200":je.includes("text-rose-800")?"bg-rose-50 border-rose-200":je.includes("text-lime-800")?"bg-lime-50 border-lime-200":je.includes("text-amber-800")?"bg-amber-50 border-amber-200":je.includes("text-sky-800")?"bg-sky-50 border-sky-200":je.includes("text-fuchsia-800")?"bg-fuchsia-50 border-fuchsia-200":je.includes("text-slate-800")?"bg-slate-50 border-slate-200":je.includes("text-stone-800")?"bg-stone-50 border-stone-200":je.includes("text-zinc-800")?"bg-zinc-50 border-zinc-200":je.includes("text-neutral-800")?"bg-neutral-50 border-neutral-200":je.includes("text-red-900")?"bg-red-100 border-red-300":je.includes("text-blue-900")?"bg-blue-100 border-blue-300":je.includes("text-green-900")?"bg-green-100 border-green-300":je.includes("text-purple-900")?"bg-purple-100 border-purple-300":je.includes("text-yellow-900")?"bg-yellow-100 border-yellow-300":je.includes("text-indigo-900")?"bg-indigo-100 border-indigo-300":je.includes("text-pink-900")?"bg-pink-100 border-pink-300":je.includes("text-teal-900")?"bg-teal-100 border-teal-300":"bg-gray-50 border-gray-200"},Q=I=>{if(I.preventDefault(),!w.name.trim())return;const je={id:Date.now(),name:w.name.trim(),description:w.description.trim(),members:[],assignedTasks:[],createdAt:new Date().toISOString()};d([...l,je]),S({name:"",description:"",members:[],assignedTasks:[]}),v(!1)},G=I=>{m(I),S({name:I.name,description:I.description,members:I.members||[],assignedTasks:I.assignedTasks||[]}),v(!0)},ae=I=>{if(I.preventDefault(),!w.name.trim())return;const je=l.map(be=>be.id===y.id?{...be,name:w.name.trim(),description:w.description.trim()}:be);d(je),S({name:"",description:"",members:[],assignedTasks:[]}),m(null),v(!1)},he=I=>{confirm("Sei sicuro di voler eliminare questa categoria?")&&d(l.filter(je=>je.id!==I))},xe=I=>{f(I),h({name:I.name,roles:I.roles&&I.roles.length>0?I.roles:[I.role||""],certification:I.certification||"",notes:I.notes||""}),C(!0)},we=I=>{if(I.preventDefault(),!c.name.trim()||c.roles.every(ue=>!ue.trim()))return;if(e.some(ue=>ue.id!==j.id&&ue.name.toLowerCase().trim()===c.name.toLowerCase().trim())){alert(` Attenzione: Esiste gi un utente con questo nome.
Scegli un nome diverso per procedere con la modifica.`);return}const be=[...new Set(c.roles.filter(ue=>ue.trim()))],ie=e.map(ue=>ue.id===j.id?{...ue,name:c.name.trim(),roles:be,primaryRole:be[0],certification:c.certification.trim(),notes:c.notes.trim(),lastModified:new Date().toLocaleString("it-IT")}:ue);t(ie),h({name:"",roles:[""],certification:"",notes:""}),f(null),C(!1)},Be=()=>{f(null),C(!1),h({name:"",roles:[""],certification:"",notes:""})},He=I=>{M(I),P(""),J(!0)},Qe=()=>{if(te&&k){const I=e.map(je=>je.id===te.id?{...je,role:k,lastModified:new Date().toLocaleString("it-IT")}:je);t(I),J(!1),M(null),P("")}},Ke=()=>{T(!0)},tt=()=>{te&&(t(e&&Array.isArray(e)?e.filter(I=>I&&I.id!==te.id):[]),J(!1),T(!1),M(null),P(""))},ke=()=>{J(!1),T(!1),M(null),P("")};return n.jsx("div",{className:"space-y-6",children:n.jsxs(yf,{value:V,onValueChange:ee,children:[n.jsxs(nm,{className:"grid w-full grid-cols-2",children:[n.jsxs(Tr,{value:"staff",className:"flex items-center gap-2",children:[n.jsx(mi,{className:"h-4 w-4"}),"Staff"]}),n.jsxs(Tr,{value:"departments",className:"flex items-center gap-2",children:[n.jsx(ra,{className:"h-4 w-4"}),"Reparti"]})]}),n.jsxs(Mr,{value:"staff",className:"space-y-6",children:[s&&s.role==="admin"&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(mi,{className:"h-5 w-5"}),"Gestione Categorie Ruoli"]})}),n.jsxs(Ze,{children:[x&&n.jsxs("form",{onSubmit:y?ae:Q,className:"space-y-4 mb-6 p-4 bg-blue-50 rounded-lg border",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categoryName",children:"Nome Categoria"}),n.jsx(ut,{id:"categoryName",value:w.name,onChange:I=>S({...w,name:I.target.value}),placeholder:"es. Cucina, Sala, Amministrazione",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categoryDescription",children:"Descrizione"}),n.jsx(ut,{id:"categoryDescription",value:w.description,onChange:I=>S({...w,description:I.target.value}),placeholder:"Descrizione della categoria"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{type:"submit",size:"sm",children:y?"Aggiorna Categoria":"Aggiungi Categoria"}),n.jsx(de,{type:"button",variant:"outline",size:"sm",onClick:()=>{v(!1),m(null),S({name:"",description:"",members:[],assignedTasks:[]})},children:"Annulla"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h4",{className:"font-medium",children:["Categorie Disponibili (",l.length,")"]}),n.jsx(de,{onClick:()=>v(!0),size:"sm",variant:"outline",children:"Nuova Categoria"})]}),l.length===0?n.jsxs("div",{className:"text-center py-6 text-gray-500",children:[n.jsx(mi,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{children:"Nessuna categoria creata"}),n.jsx("p",{className:"text-sm",children:"Crea la prima categoria per organizzare i ruoli"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.filter(I=>I&&I.id&&I.name).map(I=>{var je;return n.jsxs("div",{className:`p-4 border rounded-lg ${U(I.name)}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h5",{className:"font-medium text-lg",children:I.name}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z(I.name)}`,children:I.name})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(de,{onClick:()=>G(I),size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:""}),n.jsx(de,{onClick:()=>he(I.id),size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-red-500 hover:text-red-700",children:""})]})]}),I.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-2",children:I.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[n.jsxs("span",{children:[" ",e&&Array.isArray(e)?e.filter(be=>be&&(be.roles&&be.roles.includes(I.name)||be.role===I.name||be.primaryRole===I.name)).length:0," membri"]}),n.jsxs("span",{children:[" ",((je=I.assignedTasks)==null?void 0:je.length)||0," compiti"]})]})]},I.id)})})]})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(mi,{className:"h-5 w-5"}),j?"Modifica Membro del Personale":"Aggiungi Membro del Personale"]})}),n.jsxs(Ze,{children:[N&&n.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Stai modificando:"})," ",j==null?void 0:j.name]})}),n.jsxs("form",{onSubmit:j?we:F,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Completo"}),n.jsx(ut,{id:"name",placeholder:"Es: Mario Rossi",value:c.name,onChange:I=>h({...c,name:I.target.value}),required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"roles",children:"Ruoli"}),n.jsxs("div",{className:"space-y-2",children:[c.roles.map((I,je)=>n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsxs("select",{value:I,onChange:be=>oe(je,be.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:je===0,children:[n.jsx("option",{value:"",children:"Seleziona un ruolo..."}),l.filter(be=>be&&be.id&&be.name).map(be=>n.jsx("option",{value:be.name,children:be.name},be.id))]}),c.roles.length>1&&n.jsx(de,{type:"button",onClick:()=>le(je),variant:"outline",size:"sm",className:"h-10 w-10 p-0 text-red-600 hover:text-red-800",children:""})]},je)),n.jsx(de,{type:"button",onClick:q,variant:"outline",size:"sm",className:"w-full",children:"+ Aggiungi Ruolo"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"certification",children:"Certificazioni HACCP (opzionale)"}),n.jsx(ut,{id:"certification",placeholder:"Es: Certificato HACCP livello 2, Corso sicurezza alimentare...",value:c.certification,onChange:I=>h({...c,certification:I.target.value})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"notes",children:"Note (opzionale)"}),n.jsx(ut,{id:"notes",placeholder:"Es: Turno preferito, competenze particolari...",value:c.notes,onChange:I=>h({...c,notes:I.target.value})})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{type:"submit",className:"flex-1",children:j?"Salva Modifiche":"Aggiungi al Team"}),j&&n.jsx(de,{type:"button",variant:"outline",onClick:Be,className:"flex-1",children:"Annulla"})]})]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Totale Personale"}),n.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),n.jsx(mi,{className:"h-8 w-8 text-blue-500"})]})})})}),l.length>0&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.slice().sort((I,je)=>{const be=I.name||"",ie=je.name||"";return be.localeCompare(ie)}).map(I=>{const je=e&&Array.isArray(e)?e.filter(ue=>ue&&(ue.roles&&ue.roles.includes(I.name)||ue.role===I.name||ue.primaryRole===I.name)):[],be=je.length,ie=ce[I.name];return n.jsxs("div",{children:[n.jsx(We,{className:"cursor-pointer hover:shadow-md transition-shadow",children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("button",{onClick:()=>ne(ue=>({...ue,[I.name]:!ue[I.name]})),className:"w-full text-left",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-600",children:I.name}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:be})]}),n.jsx(mi,{className:"h-8 w-8 text-blue-500"})]}),n.jsxs("div",{className:"text-xs text-gray-500 flex items-center justify-between",children:[n.jsx("span",{children:be===1?"utente":"utenti"}),n.jsx("span",{children:ie?"":""})]})]})})}),ie&&n.jsx(We,{className:"mt-2",children:n.jsx(Ze,{className:"pt-4",children:be===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx(mi,{className:"h-6 w-6 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"Nessun dipendente in questa categoria"}),n.jsxs("p",{className:"text-xs",children:['Aggiungi membri selezionando "',I.name,'" nel form sopra']})]}):n.jsx("div",{className:"space-y-2",children:je.map(ue=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:ue.fullName||ue.name}),n.jsx("div",{className:"text-xs text-gray-600",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:(ue.roles&&ue.roles.length>0?ue.roles:[ue.role||"Non assegnato"]).map((Ae,Ie)=>n.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${z(Ae)}`,children:Ae},Ie))})}),ue.certification&&n.jsxs("div",{className:"text-xs text-green-600 flex items-center gap-1",children:[n.jsx(Yy,{className:"h-3 w-3"}),ue.certification]}),ue.notes&&n.jsxs("div",{className:"text-xs text-blue-600 flex items-center gap-1",children:[n.jsx(hg,{className:"h-3 w-3"}),ue.notes]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(de,{onClick:()=>He(ue),variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-orange-700 border-orange-300 hover:bg-orange-100 hover:border-orange-400 bg-white shadow-sm",title:"Rimuovi da questo ruolo o riassegna",children:n.jsx(qy,{className:"h-7.5 w-7.5 stroke-1.5"})})})]},ue.id))})})})]},I.id)})}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{children:["Elenco Staff Completo (",e.length,")"]})}),n.jsx(Ze,{children:e.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(mi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600 mb-2",children:"Nessun membro del personale registrato"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Aggiungi il primo membro del team per iniziare la gestione del personale HACCP"})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-100 rounded text-xs font-medium text-gray-600",children:[n.jsx("div",{className:"col-span-3",children:"Nome"}),n.jsx("div",{className:"col-span-2",children:"Ruolo"}),n.jsx("div",{className:"col-span-2",children:"Categoria"}),n.jsx("div",{className:"col-span-2",children:"Data Registrazione"}),n.jsx("div",{className:"col-span-2",children:"Note"}),n.jsx("div",{className:"col-span-1",children:"Azioni"})]}),e.map(I=>n.jsxs("div",{className:`grid grid-cols-12 gap-2 px-3 py-2 rounded border transition-colors text-sm ${I.isRegisteredUser?"bg-blue-50 border-blue-200 hover:bg-blue-100":"bg-gray-50 border-gray-200 hover:bg-gray-100"}`,children:[n.jsx("div",{className:"col-span-3 flex items-center",children:n.jsxs("div",{children:[n.jsxs("div",{className:"font-medium flex items-center gap-2",children:[I.name,I.isRegisteredUser&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-700 text-xs rounded-full",children:"Utente"})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[I.addedDate,I.lastModified&&"  Mod."]})]})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsx("div",{className:"flex flex-wrap gap-1",children:(I.roles&&I.roles.length>0?I.roles:[I.role||"Non assegnato"]).map((je,be)=>n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${z(je)}`,children:je},be))})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsx("span",{className:"text-xs text-gray-600",children:I.roles&&I.roles.length>1?`${I.roles.length} ruoli`:"1 ruolo"})}),n.jsx("div",{className:"col-span-2 flex items-center",children:n.jsxs("div",{className:"text-xs text-gray-600",children:[I.addedDate,I.addedTime&&n.jsx("div",{className:"text-xs text-gray-400",children:I.addedTime.split(" ")[1]})]})}),n.jsx("div",{className:"col-span-2 flex items-center",children:I.notes?n.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[n.jsx(hg,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate text-xs",children:I.notes})]}):n.jsx("span",{className:"text-gray-400 text-xs",children:"-"})}),n.jsx("div",{className:"col-span-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(de,{onClick:()=>xe(I),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-blue-700 border-blue-300 hover:bg-blue-100 hover:text-blue-800 hover:border-blue-400 bg-white shadow-sm",title:"Modifica dipendente",children:n.jsx(tN,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>re(I.id),variant:"outline",size:"sm",className:"h-7 w-7 p-0 text-red-700 border-red-300 hover:bg-red-100 hover:text-red-800 hover:border-red-400 bg-white shadow-sm",title:"Elimina dipendente",children:n.jsx(wn,{className:"h-4 w-4"})})]})})]},I.id))]})})]}),e.length===0&&n.jsxs(We,{className:"border-blue-200 bg-blue-50",children:[n.jsx(ht,{children:n.jsx(pt,{className:"text-blue-800",children:"Suggerimenti Ruoli Comuni"})}),n.jsxs(Ze,{children:[n.jsx("p",{className:"text-sm text-blue-700 mb-3",children:"Ecco alcuni ruoli comuni nella ristorazione che potresti voler aggiungere:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["Chef","Sous Chef","Cuoco","Addetto cucina","Cameriere","Barista","Manager"].map(I=>n.jsx("button",{onClick:()=>h({...c,role:I}),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm hover:bg-blue-200 transition-colors",children:I},I))})]})]}),O&&te&&!R&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4",children:['Rimuovi "',te.name,'" da "',te.role,'"']}),n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Scegliere ",n.jsx("strong",{children:"obbligatoriamente"})," un altro ruolo per questo dipendente, oppure rimuovi dipendente dall'applicazione."]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Nuovo ruolo per ",te.name,":"]}),n.jsxs("select",{value:k,onChange:I=>P(I.target.value),className:"w-full h-10 rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona nuovo ruolo --"}),l.filter(I=>I.name!==te.role).map(I=>n.jsx("option",{value:I.name,children:I.name},I.id))]})]}),k&&n.jsx("div",{className:"bg-green-50 border border-green-200 rounded p-3",children:n.jsxs("p",{className:"text-sm text-green-800",children:[n.jsx("strong",{children:" Confermato:"})," ",te.name,' verr spostato da "',te.role,'" a "',n.jsx("strong",{children:k}),'".']})})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx(de,{onClick:Qe,className:"flex-1",disabled:!k,variant:k?"default":"outline",children:k?"Conferma":"Seleziona un ruolo"}),n.jsx(de,{onClick:Ke,variant:"destructive",className:"flex-1",children:"Rimuovi Dipendente"})]}),n.jsx("div",{className:"mt-3",children:n.jsx(de,{onClick:ke,variant:"outline",className:"w-full",size:"sm",children:"Annulla"})})]})}),R&&te&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Conferma Eliminazione"}),n.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["Sei sicuro di voler ",n.jsx("strong",{children:"eliminare definitivamente"})," il dipendente",n.jsxs("strong",{className:"text-red-600",children:[' "',te.name,'"']})," dall'applicazione?"]}),n.jsx("div",{className:"bg-red-50 border border-red-200 rounded p-3 mb-4",children:n.jsxs("p",{className:"text-sm text-red-800",children:[n.jsx("strong",{children:" Attenzione:"})," Questa azione  ",n.jsx("strong",{children:"irreversibile"}),". Tutti i dati associati a questo dipendente verranno persi permanentemente."]})}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(de,{onClick:()=>T(!1),variant:"outline",className:"flex-1",children:"Annulla"}),n.jsx(de,{onClick:tt,variant:"destructive",className:"flex-1",children:"Elimina Definitivamente"})]})]})})]}),n.jsx(Mr,{value:"departments",children:n.jsx(fN,{currentUser:s,departments:l,setDepartments:d})})]})})}function xN({customCategories:e=[],setCustomCategories:t,currentUser:r,showCustomCategoryManager:i,setShowCustomCategoryManager:s}){const[a,l]=K.useState(!1),[d,c]=K.useState(null),[h,x]=K.useState({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800",isAmbiente:!1}),v=["bg-blue-100 text-blue-800","bg-red-100 text-red-800","bg-green-100 text-green-800","bg-yellow-100 text-yellow-800","bg-purple-100 text-purple-800","bg-pink-100 text-pink-800","bg-indigo-100 text-indigo-800","bg-orange-100 text-orange-800","bg-teal-100 text-teal-800","bg-cyan-100 text-cyan-800"];K.useEffect(()=>{localStorage.setItem("haccp-custom-categories",JSON.stringify(e))},[e]);const y=()=>{x({name:"",description:"",temperatureMin:"",temperatureMax:"",storageLocation:"",color:"bg-blue-100 text-blue-800",isAmbiente:!1}),c(null)},m=f=>{if(f.preventDefault(),!h.name.trim()){alert("Compila il nome della categoria");return}let N,C;if(h.isAmbiente)N=15,C=25;else{if(!h.temperatureMin.trim()||!h.temperatureMax.trim()){alert('Compila i campi temperatura o seleziona "Temperatura ambiente"');return}if(N=parseFloat(h.temperatureMin),C=parseFloat(h.temperatureMax),isNaN(N)||isNaN(C)){alert("Inserisci temperature valide");return}if(N>=C){alert("La temperatura minima deve essere inferiore alla temperatura massima");return}}if(d){const V=e.map(ee=>ee.id===d.id?{...ee,name:h.name.trim(),description:h.description.trim(),temperatureMin:N,temperatureMax:C,temperature:h.isAmbiente?"15-25C (Ambiente)":`${N}-${C}C`,storageLocation:h.storageLocation.trim(),color:h.color,isAmbiente:h.isAmbiente,updatedAt:new Date().toISOString(),updatedBy:r==null?void 0:r.id,updatedByName:r==null?void 0:r.name}:ee);t(V)}else{const V={id:Date.now().toString(),name:h.name.trim(),description:h.description.trim(),temperatureMin:N,temperatureMax:C,temperature:h.isAmbiente?"15-25C (Ambiente)":`${N}-${C}C`,storageLocation:h.storageLocation.trim(),color:h.color,isAmbiente:h.isAmbiente,createdAt:new Date().toISOString(),createdBy:r==null?void 0:r.id,createdByName:r==null?void 0:r.name,updatedAt:new Date().toISOString(),updatedBy:r==null?void 0:r.id,updatedByName:r==null?void 0:r.name};t([...e,V])}y(),l(!1)},w=f=>{c(f),x({name:f.name,description:f.description||"",temperatureMin:f.temperatureMin.toString(),temperatureMax:f.temperatureMax.toString(),storageLocation:f.storageLocation||"",color:f.color,isAmbiente:f.isAmbiente||!1}),l(!0)},S=f=>{confirm("Sei sicuro di voler eliminare questa categoria? Questa azione non pu essere annullata.")&&t(e.filter(N=>N.id!==f))},j=(f,N)=>{const C=(f+N)/2;return C<=-13.5?"Surgelato":C>=15?"Temperatura Ambiente":"Refrigerato"};return n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Categorie Personalizzate"]}),n.jsx("p",{className:"text-sm text-gray-600",children:"Crea nuove categorie di prodotti specifiche per la tua attivit"})]}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-end",children:n.jsxs(de,{onClick:()=>{y(),l(!0)},className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),"Nuova Categoria"]})}),a&&n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsx(pt,{children:d?"Modifica Categoria":"Nuova Categoria Personalizzata"}),r&&n.jsxs("p",{className:"text-sm text-gray-600",children:[d?"Modificando come: ":"Creando come: ",n.jsx("span",{className:"font-medium",children:r.name})," (",r.department,")"]})]}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Categoria *"}),n.jsx(ut,{id:"name",type:"text",value:h.name,onChange:f=>x({...h,name:f.target.value}),placeholder:"es. Prodotti Freschi, Specialit Regionali...",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"color",children:"Colore Identificativo"}),n.jsx("select",{value:h.color,onChange:f=>x({...h,color:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:v.map((f,N)=>n.jsx("option",{value:f,children:f.replace("bg-","").replace("-100 text-"," - ").replace("-800","")},N))})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"description",children:"Descrizione"}),n.jsx(ut,{id:"description",type:"text",value:h.description,onChange:f=>x({...h,description:f.target.value}),placeholder:"es. Prodotti freschi di produzione locale..."})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[n.jsx("input",{type:"checkbox",id:"isAmbiente",checked:h.isAmbiente,onChange:f=>x({...h,isAmbiente:f.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),n.jsx(Ue,{htmlFor:"isAmbiente",className:"text-sm font-medium text-gray-700",children:"Temperatura ambiente (15-25C)"})]}),!h.isAmbiente&&n.jsx(vf,{label:"Range Temperatura (C) *",minValue:h.temperatureMin,maxValue:h.temperatureMax,onMinChange:f=>x({...h,temperatureMin:f.target.value}),onMaxChange:f=>x({...h,temperatureMax:f.target.value}),required:!0,showValidation:!0,showSuggestions:!0,className:"w-full",id:"temperature-range"}),h.isAmbiente&&n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm text-blue-800 font-medium",children:"Temperatura ambiente: 15-25C"})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Questa categoria utilizzer automaticamente il range di temperatura ambiente per il monitoraggio HACCP."})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"storageLocation",children:"Posizione di Conservazione Suggerita"}),n.jsx(ut,{id:"storageLocation",type:"text",value:h.storageLocation,onChange:f=>x({...h,storageLocation:f.target.value}),placeholder:"es. Ripiano superiore frigo, Scaffale dispensa..."})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(de,{type:"submit",className:"flex-1",children:[d?"Aggiorna":"Crea"," Categoria"]}),n.jsx(de,{type:"button",variant:"outline",onClick:()=>{l(!1),y()},className:"flex-1",children:"Annulla"})]})]})})]}),e.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(f=>n.jsx(We,{className:"hover:shadow-md transition-shadow",children:n.jsxs(Ze,{className:"p-4",children:[n.jsxs("div",{className:"flex justify-between items-start mb-3",children:[n.jsx("div",{className:`px-2 py-1 rounded-full text-xs font-medium ${f.color}`,children:f.name}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>w(f),className:"text-blue-600 hover:text-blue-700 hover:bg-blue-100",children:n.jsx(xi,{className:"h-3 w-3"})}),n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>S(f.id),className:"text-red-600 hover:text-red-700 hover:bg-red-100",children:n.jsx(wn,{className:"h-3 w-3"})})]})]}),f.description&&n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:f.description}),n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Temperatura:"}),n.jsx("span",{className:"font-medium",children:f.temperature}),f.isAmbiente&&n.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:"Ambiente"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bn,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Tipo:"}),n.jsx("span",{className:"font-medium",children:j(f.temperatureMin,f.temperatureMax)})]}),f.storageLocation&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(En,{className:"h-4 w-4 text-gray-500"}),n.jsx("span",{className:"text-gray-600",children:"Posizione:"}),n.jsx("span",{className:"font-medium",children:f.storageLocation})]})]}),n.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:[n.jsxs("p",{children:["Creata da: ",f.createdByName||"N/A"]}),n.jsxs("p",{children:["Aggiornata: ",new Date(f.updatedAt).toLocaleDateString("it-IT")]})]})]})},f.id))}):n.jsx(We,{children:n.jsxs(Ze,{className:"p-8 text-center text-gray-500",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Nessuna categoria personalizzata"}),n.jsx("p",{className:"text-sm",children:"Crea la tua prima categoria personalizzata per gestire prodotti specifici"})]})})]})})]})}const vN="modulepreload",yN=function(e,t){return new URL(e,t).href},gg={},up=function(t,r,i){if(!r||r.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=yN(a,i),a in gg)return;gg[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!i)for(let x=s.length-1;x>=0;x--){const v=s[x];if(v.href===a&&(!l||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":vN,l||(h.as="script",h.crossOrigin=""),h.href=a,document.head.appendChild(h),l)return new Promise((x,v)=>{h.addEventListener("load",x),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};function Qt(e){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qt(e)}var pr=Uint8Array,Yr=Uint16Array,Nf=Int32Array,rm=new pr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),im=new pr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mp=new pr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s2=function(e,t){for(var r=new Yr(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var s=new Nf(r[30]),i=1;i<30;++i)for(var a=r[i];a<r[i+1];++a)s[a]=a-r[i]<<5|i;return{b:r,r:s}},a2=s2(rm,2),o2=a2.b,hp=a2.r;o2[28]=258,hp[258]=28;var l2=s2(im,0),NN=l2.b,xg=l2.r,pp=new Yr(32768);for(var an=0;an<32768;++an){var Js=(an&43690)>>1|(an&21845)<<1;Js=(Js&52428)>>2|(Js&13107)<<2,Js=(Js&61680)>>4|(Js&3855)<<4,pp[an]=((Js&65280)>>8|(Js&255)<<8)>>1}var Xi=function(e,t,r){for(var i=e.length,s=0,a=new Yr(t);s<i;++s)e[s]&&++a[e[s]-1];var l=new Yr(t);for(s=1;s<t;++s)l[s]=l[s-1]+a[s-1]<<1;var d;if(r){d=new Yr(1<<t);var c=15-t;for(s=0;s<i;++s)if(e[s])for(var h=s<<4|e[s],x=t-e[s],v=l[e[s]-1]++<<x,y=v|(1<<x)-1;v<=y;++v)d[pp[v]>>c]=h}else for(d=new Yr(i),s=0;s<i;++s)e[s]&&(d[s]=pp[l[e[s]-1]++]>>15-e[s]);return d},fa=new pr(288);for(var an=0;an<144;++an)fa[an]=8;for(var an=144;an<256;++an)fa[an]=9;for(var an=256;an<280;++an)fa[an]=7;for(var an=280;an<288;++an)fa[an]=8;var Ec=new pr(32);for(var an=0;an<32;++an)Ec[an]=5;var bN=Xi(fa,9,0),jN=Xi(fa,9,1),wN=Xi(Ec,5,0),SN=Xi(Ec,5,1),lh=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Li=function(e,t,r){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&r},ch=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},bf=function(e){return(e+7)/8|0},c2=function(e,t,r){return(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length),new pr(e.subarray(t,r))},CN=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_i=function(e,t,r){var i=new Error(t||CN[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,_i),!r)throw i;return i},kN=function(e,t,r,i){var s=e.length,a=i?i.length:0;if(!s||t.f&&!t.l)return r||new pr(0);var l=!r,d=l||t.i!=2,c=t.i;l&&(r=new pr(s*3));var h=function(He){var Qe=r.length;if(He>Qe){var Ke=new pr(Math.max(Qe*2,He));Ke.set(r),r=Ke}},x=t.f||0,v=t.p||0,y=t.b||0,m=t.l,w=t.d,S=t.m,j=t.n,f=s*8;do{if(!m){x=Li(e,v,1);var N=Li(e,v+1,3);if(v+=3,N)if(N==1)m=jN,w=SN,S=9,j=5;else if(N==2){var ce=Li(e,v,31)+257,ne=Li(e,v+10,15)+4,O=ce+Li(e,v+5,31)+1;v+=14;for(var J=new pr(O),te=new pr(19),M=0;M<ne;++M)te[mp[M]]=Li(e,v+M*3,7);v+=ne*3;for(var k=lh(te),P=(1<<k)-1,R=Xi(te,k,1),M=0;M<O;){var T=R[Li(e,v,P)];v+=T&15;var C=T>>4;if(C<16)J[M++]=C;else{var F=0,re=0;for(C==16?(re=3+Li(e,v,3),v+=2,F=J[M-1]):C==17?(re=3+Li(e,v,7),v+=3):C==18&&(re=11+Li(e,v,127),v+=7);re--;)J[M++]=F}}var q=J.subarray(0,ce),le=J.subarray(ce);S=lh(q),j=lh(le),m=Xi(q,S,1),w=Xi(le,j,1)}else _i(1);else{var C=bf(v)+4,V=e[C-4]|e[C-3]<<8,ee=C+V;if(ee>s){c&&_i(0);break}d&&h(y+V),r.set(e.subarray(C,ee),y),t.b=y+=V,t.p=v=ee*8,t.f=x;continue}if(v>f){c&&_i(0);break}}d&&h(y+131072);for(var oe=(1<<S)-1,Pe=(1<<j)-1,z=v;;z=v){var F=m[ch(e,v)&oe],U=F>>4;if(v+=F&15,v>f){c&&_i(0);break}if(F||_i(2),U<256)r[y++]=U;else if(U==256){z=v,m=null;break}else{var Q=U-254;if(U>264){var M=U-257,G=rm[M];Q=Li(e,v,(1<<G)-1)+o2[M],v+=G}var ae=w[ch(e,v)&Pe],he=ae>>4;ae||_i(3),v+=ae&15;var le=NN[he];if(he>3){var G=im[he];le+=ch(e,v)&(1<<G)-1,v+=G}if(v>f){c&&_i(0);break}d&&h(y+131072);var xe=y+Q;if(y<le){var we=a-le,Be=Math.min(le,xe);for(we+y<0&&_i(3);y<Be;++y)r[y]=i[we+y]}for(;y<xe;++y)r[y]=r[y-le]}}t.l=m,t.p=z,t.b=y,t.f=x,m&&(x=1,t.m=S,t.d=w,t.n=j)}while(!x);return y!=r.length&&l?c2(r,0,y):r.subarray(0,y)},hs=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},Ql=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},dh=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var s=r.length,a=r.slice();if(!s)return{t:u2,l:0};if(s==1){var l=new pr(r[0].s+1);return l[r[0].s]=1,{t:l,l:1}}r.sort(function(ee,ce){return ee.f-ce.f}),r.push({s:-1,f:25001});var d=r[0],c=r[1],h=0,x=1,v=2;for(r[0]={s:-1,f:d.f+c.f,l:d,r:c};x!=s-1;)d=r[r[h].f<r[v].f?h++:v++],c=r[h!=x&&r[h].f<r[v].f?h++:v++],r[x++]={s:-1,f:d.f+c.f,l:d,r:c};for(var y=a[0].s,i=1;i<s;++i)a[i].s>y&&(y=a[i].s);var m=new Yr(y+1),w=fp(r[x-1],m,0);if(w>t){var i=0,S=0,j=w-t,f=1<<j;for(a.sort(function(ce,ne){return m[ne.s]-m[ce.s]||ce.f-ne.f});i<s;++i){var N=a[i].s;if(m[N]>t)S+=f-(1<<w-m[N]),m[N]=t;else break}for(S>>=j;S>0;){var C=a[i].s;m[C]<t?S-=1<<t-m[C]++-1:++i}for(;i>=0&&S;--i){var V=a[i].s;m[V]==t&&(--m[V],++S)}w=t}return{t:new pr(m),l:w}},fp=function(e,t,r){return e.s==-1?Math.max(fp(e.l,t,r+1),fp(e.r,t,r+1)):t[e.s]=r},vg=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yr(++t),i=0,s=e[0],a=1,l=function(c){r[i++]=c},d=1;d<=t;++d)if(e[d]==s&&d!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(s),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(s);a=1,s=e[d]}return{c:r.subarray(0,i),n:t}},Kl=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},d2=function(e,t,r){var i=r.length,s=bf(t+2);e[s]=i&255,e[s+1]=i>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var a=0;a<i;++a)e[s+a+4]=r[a];return(s+4+i)*8},yg=function(e,t,r,i,s,a,l,d,c,h,x){hs(t,x++,r),++s[256];for(var v=dh(s,15),y=v.t,m=v.l,w=dh(a,15),S=w.t,j=w.l,f=vg(y),N=f.c,C=f.n,V=vg(S),ee=V.c,ce=V.n,ne=new Yr(19),O=0;O<N.length;++O)++ne[N[O]&31];for(var O=0;O<ee.length;++O)++ne[ee[O]&31];for(var J=dh(ne,7),te=J.t,M=J.l,k=19;k>4&&!te[mp[k-1]];--k);var P=h+5<<3,R=Kl(s,fa)+Kl(a,Ec)+l,T=Kl(s,y)+Kl(a,S)+l+14+3*k+Kl(ne,te)+2*ne[16]+3*ne[17]+7*ne[18];if(c>=0&&P<=R&&P<=T)return d2(t,x,e.subarray(c,c+h));var F,re,q,le;if(hs(t,x,1+(T<R)),x+=2,T<R){F=Xi(y,m,0),re=y,q=Xi(S,j,0),le=S;var oe=Xi(te,M,0);hs(t,x,C-257),hs(t,x+5,ce-1),hs(t,x+10,k-4),x+=14;for(var O=0;O<k;++O)hs(t,x+3*O,te[mp[O]]);x+=3*k;for(var Pe=[N,ee],z=0;z<2;++z)for(var U=Pe[z],O=0;O<U.length;++O){var Q=U[O]&31;hs(t,x,oe[Q]),x+=te[Q],Q>15&&(hs(t,x,U[O]>>5&127),x+=U[O]>>12)}}else F=bN,re=fa,q=wN,le=Ec;for(var O=0;O<d;++O){var G=i[O];if(G>255){var Q=G>>18&31;Ql(t,x,F[Q+257]),x+=re[Q+257],Q>7&&(hs(t,x,G>>23&31),x+=rm[Q]);var ae=G&31;Ql(t,x,q[ae]),x+=le[ae],ae>3&&(Ql(t,x,G>>5&8191),x+=im[ae])}else Ql(t,x,F[G]),x+=re[G]}return Ql(t,x,F[256]),x+re[256]},AN=new Nf([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),u2=new pr(0),LN=function(e,t,r,i,s,a){var l=a.z||e.length,d=new pr(i+l+5*(1+Math.ceil(l/7e3))+s),c=d.subarray(i,d.length-s),h=a.l,x=(a.r||0)&7;if(t){x&&(c[0]=a.r>>3);for(var v=AN[t-1],y=v>>13,m=v&8191,w=(1<<r)-1,S=a.p||new Yr(32768),j=a.h||new Yr(w+1),f=Math.ceil(r/3),N=2*f,C=function(tt){return(e[tt]^e[tt+1]<<f^e[tt+2]<<N)&w},V=new Nf(25e3),ee=new Yr(288),ce=new Yr(32),ne=0,O=0,J=a.i||0,te=0,M=a.w||0,k=0;J+2<l;++J){var P=C(J),R=J&32767,T=j[P];if(S[R]=T,j[P]=R,M<=J){var F=l-J;if((ne>7e3||te>24576)&&(F>423||!h)){x=yg(e,c,0,V,ee,ce,O,te,k,J-k,x),te=ne=O=0,k=J;for(var re=0;re<286;++re)ee[re]=0;for(var re=0;re<30;++re)ce[re]=0}var q=2,le=0,oe=m,Pe=R-T&32767;if(F>2&&P==C(J-Pe))for(var z=Math.min(y,F)-1,U=Math.min(32767,J),Q=Math.min(258,F);Pe<=U&&--oe&&R!=T;){if(e[J+q]==e[J+q-Pe]){for(var G=0;G<Q&&e[J+G]==e[J+G-Pe];++G);if(G>q){if(q=G,le=Pe,G>z)break;for(var ae=Math.min(Pe,G-2),he=0,re=0;re<ae;++re){var xe=J-Pe+re&32767,we=S[xe],Be=xe-we&32767;Be>he&&(he=Be,T=xe)}}}R=T,T=S[R],Pe+=R-T&32767}if(le){V[te++]=268435456|hp[q]<<18|xg[le];var He=hp[q]&31,Qe=xg[le]&31;O+=rm[He]+im[Qe],++ee[257+He],++ce[Qe],M=J+q,++ne}else V[te++]=e[J],++ee[e[J]]}}for(J=Math.max(J,M);J<l;++J)V[te++]=e[J],++ee[e[J]];x=yg(e,c,h,V,ee,ce,O,te,k,J-k,x),h||(a.r=x&7|c[x/8|0]<<3,x-=7,a.h=j,a.p=S,a.i=J,a.w=M)}else{for(var J=a.w||0;J<l+h;J+=65535){var Ke=J+65535;Ke>=l&&(c[x/8|0]=h,Ke=l),x=d2(c,x+1,e.subarray(J,Ke))}a.i=l}return c2(d,0,i+bf(x)+s)},m2=function(){var e=1,t=0;return{p:function(r){for(var i=e,s=t,a=r.length|0,l=0;l!=a;){for(var d=Math.min(l+2655,a);l<d;++l)s+=i+=r[l];i=(i&65535)+15*(i>>16),s=(s&65535)+15*(s>>16)}e=i,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},PN=function(e,t,r,i,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),l=new pr(a.length+e.length);l.set(a),l.set(e,a.length),e=l,s.w=a.length}return LN(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,s)},h2=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},zN=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=m2();s.p(t.dictionary),h2(e,2,s.d())}},_N=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&_i(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&_i(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function gp(e,t){t||(t={});var r=m2();r.p(e);var i=PN(e,t,t.dictionary?6:2,4);return zN(i,t),h2(i,i.length-4,r.d()),i}function IN(e,t){return kN(e.subarray(_N(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var TN=typeof TextDecoder<"u"&&new TextDecoder,MN=0;try{TN.decode(u2,{stream:!0}),MN=1}catch{}var St=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function uh(){St.console&&typeof St.console.log=="function"&&St.console.log.apply(St.console,arguments)}var en={log:uh,warn:function(e){St.console&&(typeof St.console.warn=="function"?St.console.warn.apply(St.console,arguments):uh.call(null,arguments))},error:function(e){St.console&&(typeof St.console.error=="function"?St.console.error.apply(St.console,arguments):uh(e))}};function mh(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Da(i.response,t,r)},i.onerror=function(){en.error("could not download file")},i.send()}function Ng(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Hd(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var xc,xp,Da=St.saveAs||((typeof window>"u"?"undefined":Qt(window))!=="object"||window!==St?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=St.URL||St.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?Ng(s.href)?mh(e,t,r):Hd(s,s.target="_blank"):Hd(s)):(s.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(s.href)},4e4),setTimeout(function(){Hd(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Ng(e))mh(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){Hd(i)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:Qt(a)!=="object"&&(en.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob([String.fromCharCode(65279),s],{type:s.type}):s}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return mh(e,t,r);var s=e.type==="application/octet-stream",a=/constructor/i.test(St.HTMLElement)||St.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&a)&&(typeof FileReader>"u"?"undefined":Qt(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var x=d.result;x=l?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},d.readAsDataURL(e)}else{var c=St.URL||St.webkitURL,h=c.createObjectURL(e);i?i.location=h:location.href=h,i=null,setTimeout(function(){c.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function p2(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],i=0;i<r.length;i++){var s=r[i].re,a=r[i].process,l=s.exec(e);l&&(t=a(l),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),c=this.g.toString(16),h=this.b.toString(16);return d.length==1&&(d="0"+d),c.length==1&&(c="0"+c),h.length==1&&(h="0"+h),"#"+d+c+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function hh(e,t){var r=e[0],i=e[1],s=e[2],a=e[3];r=cr(r,i,s,a,t[0],7,-680876936),a=cr(a,r,i,s,t[1],12,-389564586),s=cr(s,a,r,i,t[2],17,606105819),i=cr(i,s,a,r,t[3],22,-1044525330),r=cr(r,i,s,a,t[4],7,-176418897),a=cr(a,r,i,s,t[5],12,1200080426),s=cr(s,a,r,i,t[6],17,-1473231341),i=cr(i,s,a,r,t[7],22,-45705983),r=cr(r,i,s,a,t[8],7,1770035416),a=cr(a,r,i,s,t[9],12,-1958414417),s=cr(s,a,r,i,t[10],17,-42063),i=cr(i,s,a,r,t[11],22,-1990404162),r=cr(r,i,s,a,t[12],7,1804603682),a=cr(a,r,i,s,t[13],12,-40341101),s=cr(s,a,r,i,t[14],17,-1502002290),r=dr(r,i=cr(i,s,a,r,t[15],22,1236535329),s,a,t[1],5,-165796510),a=dr(a,r,i,s,t[6],9,-1069501632),s=dr(s,a,r,i,t[11],14,643717713),i=dr(i,s,a,r,t[0],20,-373897302),r=dr(r,i,s,a,t[5],5,-701558691),a=dr(a,r,i,s,t[10],9,38016083),s=dr(s,a,r,i,t[15],14,-660478335),i=dr(i,s,a,r,t[4],20,-405537848),r=dr(r,i,s,a,t[9],5,568446438),a=dr(a,r,i,s,t[14],9,-1019803690),s=dr(s,a,r,i,t[3],14,-187363961),i=dr(i,s,a,r,t[8],20,1163531501),r=dr(r,i,s,a,t[13],5,-1444681467),a=dr(a,r,i,s,t[2],9,-51403784),s=dr(s,a,r,i,t[7],14,1735328473),r=ur(r,i=dr(i,s,a,r,t[12],20,-1926607734),s,a,t[5],4,-378558),a=ur(a,r,i,s,t[8],11,-2022574463),s=ur(s,a,r,i,t[11],16,1839030562),i=ur(i,s,a,r,t[14],23,-35309556),r=ur(r,i,s,a,t[1],4,-1530992060),a=ur(a,r,i,s,t[4],11,1272893353),s=ur(s,a,r,i,t[7],16,-155497632),i=ur(i,s,a,r,t[10],23,-1094730640),r=ur(r,i,s,a,t[13],4,681279174),a=ur(a,r,i,s,t[0],11,-358537222),s=ur(s,a,r,i,t[3],16,-722521979),i=ur(i,s,a,r,t[6],23,76029189),r=ur(r,i,s,a,t[9],4,-640364487),a=ur(a,r,i,s,t[12],11,-421815835),s=ur(s,a,r,i,t[15],16,530742520),r=mr(r,i=ur(i,s,a,r,t[2],23,-995338651),s,a,t[0],6,-198630844),a=mr(a,r,i,s,t[7],10,1126891415),s=mr(s,a,r,i,t[14],15,-1416354905),i=mr(i,s,a,r,t[5],21,-57434055),r=mr(r,i,s,a,t[12],6,1700485571),a=mr(a,r,i,s,t[3],10,-1894986606),s=mr(s,a,r,i,t[10],15,-1051523),i=mr(i,s,a,r,t[1],21,-2054922799),r=mr(r,i,s,a,t[8],6,1873313359),a=mr(a,r,i,s,t[15],10,-30611744),s=mr(s,a,r,i,t[6],15,-1560198380),i=mr(i,s,a,r,t[13],21,1309151649),r=mr(r,i,s,a,t[4],6,-145523070),a=mr(a,r,i,s,t[11],10,-1120210379),s=mr(s,a,r,i,t[2],15,718787259),i=mr(i,s,a,r,t[9],21,-343485551),e[0]=ia(r,e[0]),e[1]=ia(i,e[1]),e[2]=ia(s,e[2]),e[3]=ia(a,e[3])}function sm(e,t,r,i,s,a){return t=ia(ia(t,e),ia(i,a)),ia(t<<s|t>>>32-s,r)}function cr(e,t,r,i,s,a,l){return sm(t&r|~t&i,e,t,s,a,l)}function dr(e,t,r,i,s,a,l){return sm(t&i|r&~i,e,t,s,a,l)}function ur(e,t,r,i,s,a,l){return sm(t^r^i,e,t,s,a,l)}function mr(e,t,r,i,s,a,l){return sm(r^(t|~i),e,t,s,a,l)}function f2(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)hh(i,DN(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(hh(i,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,hh(i,s),i}function DN(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}xc=St.atob.bind(St),xp=St.btoa.bind(St);var bg="0123456789abcdef".split("");function EN(e){for(var t="",r=0;r<4;r++)t+=bg[e>>8*r+4&15]+bg[e>>8*r&15];return t}function FN(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function vp(e){return f2(e).map(FN).join("")}var ON=function(e){for(var t=0;t<e.length;t++)e[t]=EN(e[t]);return e.join("")}(f2("hello"))!="5d41402abc4b2a76b9719d911017c592";function ia(e,t){if(ON){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function yp(e,t){var r,i,s,a;if(e!==r){for(var l=(s=e,a=1+(256/e.length>>0),new Array(a+1).join(s)),d=[],c=0;c<256;c++)d[c]=c;var h=0;for(c=0;c<256;c++){var x=d[c];h=(h+x+l.charCodeAt(c))%256,d[c]=d[h],d[h]=x}r=e,i=d}else d=i;var v=t.length,y=0,m=0,w="";for(c=0;c<v;c++)m=(m+(x=d[y=(y+1)%256]))%256,d[y]=d[m],d[m]=x,l=d[(d[y]+d[m])%256],w+=String.fromCharCode(t.charCodeAt(c)^l);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var jg={print:4,modify:8,copy:16,"annot-forms":32};function zo(e,t,r,i){this.v=1,this.r=2;var s=192;e.forEach(function(d){if(jg.perm!==void 0)throw new Error("Invalid permission: "+d);s+=jg[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),l=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^s)),this.encryptionKey=vp(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=yp(this.encryptionKey,this.padding)}function _o(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[i]}return t}function wg(e){if(Qt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,s){if(s=s||!1,typeof r!="string"||typeof i!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[i,!!s],a},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[r]){var l=t[r][a];try{l[0].apply(e,i)}catch(d){St.console&&en.error("jsPDF PubSub Error",d.message,d)}l[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Fu(e){if(!(this instanceof Fu))return new Fu(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function g2(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Fa(e,t,r,i,s){if(!(this instanceof Fa))return new Fa(e,t,r,i,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,g2.call(this,i,s)}function Uo(e,t,r,i,s){if(!(this instanceof Uo))return new Uo(e,t,r,i,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,g2.call(this,i,s)}function wt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],s=arguments[2],a=arguments[3],l=[],d=1,c=16,h="S",x=null;Qt(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,s=e.format||s,a=e.compress||e.compressPdf||a,(x=e.encryption||null)!==null&&(x.userPassword=x.userPassword||"",x.ownerPassword=x.ownerPassword||"",x.userPermissions=x.userPermissions||[]),d=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),h=e.defaultPathOperation||"S"),l=e.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",r=(""+(r||"P")).toLowerCase();var v=e.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=wg;var w="1.3",S=m.__private__.getPdfVersion=function(){return w};m.__private__.setPdfVersion=function(p){w=p};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return j};var f=m.__private__.getPageFormat=function(p){return j[p]};s=s||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},C=N.COMPAT;function V(){this.saveGraphicsState(),I(new vt(Oe,0,0,-Oe,0,Ds()*Oe).toString()+" cm"),this.setFontSize(this.getFontSize()/Oe),h="n",C=N.ADVANCED}function ee(){this.restoreGraphicsState(),h="S",C=N.COMPAT}var ce=m.__private__.combineFontStyleAndFontWeight=function(p,_){if(p=="bold"&&_=="normal"||p=="bold"&&_==400||p=="normal"&&_=="italic"||p=="bold"&&_=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return _&&(p=_==400||_==="normal"?p==="italic"?"italic":"normal":_!=700&&_!=="bold"||p!=="normal"?(_==700?"bold":_)+""+p:"bold"),p};m.advancedAPI=function(p){var _=C===N.COMPAT;return _&&V.call(this),typeof p!="function"||(p(this),_&&ee.call(this)),this},m.compatAPI=function(p){var _=C===N.ADVANCED;return _&&ee.call(this),typeof p!="function"||(p(this),_&&V.call(this)),this},m.isAdvancedAPI=function(){return C===N.ADVANCED};var ne,O=function(p){if(C!==N.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},J=m.roundToPrecision=m.__private__.roundToPrecision=function(p,_){var se=t||_;if(isNaN(p)||isNaN(se))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(se).replace(/0+$/,"")};ne=m.hpf=m.__private__.hpf=typeof c=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return J(p,c)}:c==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return J(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return J(p,16)};var te=m.f2=m.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return J(p,2)},M=m.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return J(p,3)},k=m.scale=m.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return C===N.COMPAT?p*Oe:C===N.ADVANCED?p:void 0},P=function(p){return C===N.COMPAT?Ds()-p:C===N.ADVANCED?p:void 0},R=function(p){return k(P(p))};m.__private__.setPrecision=m.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(t=parseInt(p,10))};var T,F="00000000000000000000000000000000",re=m.__private__.getFileId=function(){return F},q=m.__private__.setFileId=function(p){return F=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():F.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),x!==null&&(sr=new zo(x.userPermissions,x.userPassword,x.ownerPassword,F)),F};m.setFileId=function(p){return q(p),this},m.getFileId=function(){return re()};var le=m.__private__.convertDateToPDFDate=function(p){var _=p.getTimezoneOffset(),se=_<0?"+":"-",me=Math.floor(Math.abs(_/60)),Ne=Math.abs(_%60),Te=[se,Q(me),"'",Q(Ne),"'"].join("");return["D:",p.getFullYear(),Q(p.getMonth()+1),Q(p.getDate()),Q(p.getHours()),Q(p.getMinutes()),Q(p.getSeconds()),Te].join("")},oe=m.__private__.convertPDFDateToDate=function(p){var _=parseInt(p.substr(2,4),10),se=parseInt(p.substr(6,2),10)-1,me=parseInt(p.substr(8,2),10),Ne=parseInt(p.substr(10,2),10),Te=parseInt(p.substr(12,2),10),Ye=parseInt(p.substr(14,2),10);return new Date(_,se,me,Ne,Te,Ye,0)},Pe=m.__private__.setCreationDate=function(p){var _;if(p===void 0&&(p=new Date),p instanceof Date)_=le(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");_=p}return T=_},z=m.__private__.getCreationDate=function(p){var _=T;return p==="jsDate"&&(_=oe(T)),_};m.setCreationDate=function(p){return Pe(p),this},m.getCreationDate=function(p){return z(p)};var U,Q=m.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},G=m.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},ae=0,he=[],xe=[],we=0,Be=[],He=[],Qe=!1,Ke=xe,tt=function(){ae=0,we=0,xe=[],he=[],Be=[],ti=ln(),qr=ln()};m.__private__.setCustomOutputDestination=function(p){Qe=!0,Ke=p};var ke=function(p){Qe||(Ke=p)};m.__private__.resetCustomOutputDestination=function(){Qe=!1,Ke=xe};var I=m.__private__.out=function(p){return p=p.toString(),we+=p.length+1,Ke.push(p),Ke},je=m.__private__.write=function(p){return I(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},be=m.__private__.getArrayBuffer=function(p){for(var _=p.length,se=new ArrayBuffer(_),me=new Uint8Array(se);_--;)me[_]=p.charCodeAt(_);return se},ie=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ie};var ue=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(p){return ue=C===N.ADVANCED?p/Oe:p,this};var Ae,Ie=m.__private__.getFontSize=m.getFontSize=function(){return C===N.COMPAT?ue:ue*Oe},Ge=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(p){return Ge=p,this},m.__private__.getR2L=m.getR2L=function(){return Ge};var it,A=m.__private__.setZoomMode=function(p){var _=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))Ae=p;else if(isNaN(p)){if(_.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');Ae=p}else Ae=parseInt(p,10)};m.__private__.getZoomMode=function(){return Ae};var H,ye=m.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');it=p};m.__private__.getPageMode=function(){return it};var Je=m.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');H=p};m.__private__.getLayoutMode=function(){return H},m.__private__.setDisplayMode=m.setDisplayMode=function(p,_,se){return A(p),Je(_),ye(se),this};var Fe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(p){if(Object.keys(Fe).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Fe[p]},m.__private__.getDocumentProperties=function(){return Fe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(p){for(var _ in Fe)Fe.hasOwnProperty(_)&&p[_]&&(Fe[_]=p[_]);return this},m.__private__.setDocumentProperty=function(p,_){if(Object.keys(Fe).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Fe[p]=_};var De,Oe,_t,mt,Ct,nt={},at={},Nt=[],gt={},Sn={},Ht={},W={},ze=null,qe=0,Me=[],lt=new wg(m),Rt=e.hotfixes||[],Mt={},Fn={},On=[],vt=function p(_,se,me,Ne,Te,Ye){if(!(this instanceof p))return new p(_,se,me,Ne,Te,Ye);isNaN(_)&&(_=1),isNaN(se)&&(se=0),isNaN(me)&&(me=0),isNaN(Ne)&&(Ne=1),isNaN(Te)&&(Te=0),isNaN(Ye)&&(Ye=0),this._matrix=[_,se,me,Ne,Te,Ye]};Object.defineProperty(vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),vt.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ne).join(p)},vt.prototype.multiply=function(p){var _=p.sx*this.sx+p.shy*this.shx,se=p.sx*this.shy+p.shy*this.sy,me=p.shx*this.sx+p.sy*this.shx,Ne=p.shx*this.shy+p.sy*this.sy,Te=p.tx*this.sx+p.ty*this.shx+this.tx,Ye=p.tx*this.shy+p.ty*this.sy+this.ty;return new vt(_,se,me,Ne,Te,Ye)},vt.prototype.decompose=function(){var p=this.sx,_=this.shy,se=this.shx,me=this.sy,Ne=this.tx,Te=this.ty,Ye=Math.sqrt(p*p+_*_),ot=(p/=Ye)*se+(_/=Ye)*me;se-=p*ot,me-=_*ot;var yt=Math.sqrt(se*se+me*me);return ot/=yt,p*(me/=yt)<_*(se/=yt)&&(p=-p,_=-_,ot=-ot,Ye=-Ye),{scale:new vt(Ye,0,0,yt,0,0),translate:new vt(1,0,0,1,Ne,Te),rotate:new vt(p,_,-_,p,0,0),skew:new vt(1,0,ot,1,0,0)}},vt.prototype.toString=function(p){return this.join(" ")},vt.prototype.inversed=function(){var p=this.sx,_=this.shy,se=this.shx,me=this.sy,Ne=this.tx,Te=this.ty,Ye=1/(p*me-_*se),ot=me*Ye,yt=-_*Ye,It=-se*Ye,Pt=p*Ye;return new vt(ot,yt,It,Pt,-ot*Ne-It*Te,-yt*Ne-Pt*Te)},vt.prototype.applyToPoint=function(p){var _=p.x*this.sx+p.y*this.shx+this.tx,se=p.x*this.shy+p.y*this.sy+this.ty;return new oo(_,se)},vt.prototype.applyToRectangle=function(p){var _=this.applyToPoint(p),se=this.applyToPoint(new oo(p.x+p.w,p.y+p.h));return new jl(_.x,_.y,se.x-_.x,se.y-_.y)},vt.prototype.clone=function(){var p=this.sx,_=this.shy,se=this.shx,me=this.sy,Ne=this.tx,Te=this.ty;return new vt(p,_,se,me,Ne,Te)},m.Matrix=vt;var ir=m.matrixMult=function(p,_){return _.multiply(p)},ei=new vt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ei;var Qn=function(p,_){if(!Sn[p]){var se=(_ instanceof Fa?"Sh":"P")+(Object.keys(gt).length+1).toString(10);_.id=se,Sn[p]=se,gt[se]=_,lt.publish("addPattern",_)}};m.ShadingPattern=Fa,m.TilingPattern=Uo,m.addShadingPattern=function(p,_){return O("addShadingPattern()"),Qn(p,_),this},m.beginTilingPattern=function(p){O("beginTilingPattern()"),Kc(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},m.endTilingPattern=function(p,_){O("endTilingPattern()"),_.stream=He[U].join(`
`),Qn(p,_),lt.publish("endTilingPattern",_),On.pop().restore()};var Cn=m.__private__.newObject=function(){var p=ln();return xr(p,!0),p},ln=m.__private__.newObjectDeferred=function(){return ae++,he[ae]=function(){return we},ae},xr=function(p,_){return _=typeof _=="boolean"&&_,he[p]=we,_&&I(p+" 0 obj"),p},Cs=m.__private__.newAdditionalObject=function(){var p={objId:ln(),content:""};return Be.push(p),p},ti=ln(),qr=ln(),$r=m.__private__.decodeColorString=function(p){var _=p.split(" ");if(_.length!==2||_[1]!=="g"&&_[1]!=="G")_.length===5&&(_[4]==="k"||_[4]==="K")&&(_=[(1-_[0])*(1-_[3]),(1-_[1])*(1-_[3]),(1-_[2])*(1-_[3]),"r"]);else{var se=parseFloat(_[0]);_=[se,se,se,"r"]}for(var me="#",Ne=0;Ne<3;Ne++)me+=("0"+Math.floor(255*parseFloat(_[Ne])).toString(16)).slice(-2);return me},kr=m.__private__.encodeColorString=function(p){var _;typeof p=="string"&&(p={ch1:p});var se=p.ch1,me=p.ch2,Ne=p.ch3,Te=p.ch4,Ye=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof se=="string"&&se.charAt(0)!=="#"){var ot=new p2(se);if(ot.ok)se=ot.toHex();else if(!/^\d*\.?\d*$/.test(se))throw new Error('Invalid color "'+se+'" passed to jsPDF.encodeColorString.')}if(typeof se=="string"&&/^#[0-9A-Fa-f]{3}$/.test(se)&&(se="#"+se[1]+se[1]+se[2]+se[2]+se[3]+se[3]),typeof se=="string"&&/^#[0-9A-Fa-f]{6}$/.test(se)){var yt=parseInt(se.substr(1),16);se=yt>>16&255,me=yt>>8&255,Ne=255&yt}if(me===void 0||Te===void 0&&se===me&&me===Ne)if(typeof se=="string")_=se+" "+Ye[0];else switch(p.precision){case 2:_=te(se/255)+" "+Ye[0];break;case 3:default:_=M(se/255)+" "+Ye[0]}else if(Te===void 0||Qt(Te)==="object"){if(Te&&!isNaN(Te.a)&&Te.a===0)return _=["1.","1.","1.",Ye[1]].join(" ");if(typeof se=="string")_=[se,me,Ne,Ye[1]].join(" ");else switch(p.precision){case 2:_=[te(se/255),te(me/255),te(Ne/255),Ye[1]].join(" ");break;default:case 3:_=[M(se/255),M(me/255),M(Ne/255),Ye[1]].join(" ")}}else if(typeof se=="string")_=[se,me,Ne,Te,Ye[2]].join(" ");else switch(p.precision){case 2:_=[te(se),te(me),te(Ne),te(Te),Ye[2]].join(" ");break;case 3:default:_=[M(se),M(me),M(Ne),M(Te),Ye[2]].join(" ")}return _},ni=m.__private__.getFilters=function(){return l},Ar=m.__private__.putStream=function(p){var _=(p=p||{}).data||"",se=p.filters||ni(),me=p.alreadyAppliedFilters||[],Ne=p.addLength1||!1,Te=_.length,Ye=p.objectId,ot=function(ar){return ar};if(x!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");x!==null&&(ot=sr.encryptor(Ye,0));var yt={};se===!0&&(se=["FlateEncode"]);var It=p.additionalKeyValues||[],Pt=(yt=wt.API.processDataByFilters!==void 0?wt.API.processDataByFilters(_,se):{data:_,reverseChain:[]}).reverseChain+(Array.isArray(me)?me.join(" "):me.toString());if(yt.data.length!==0&&(It.push({key:"Length",value:yt.data.length}),Ne===!0&&It.push({key:"Length1",value:Te})),Pt.length!=0)if(Pt.split("/").length-1==1)It.push({key:"Filter",value:Pt});else{It.push({key:"Filter",value:"["+Pt+"]"});for(var Ot=0;Ot<It.length;Ot+=1)if(It[Ot].key==="DecodeParms"){for(var mn=[],xn=0;xn<yt.reverseChain.split("/").length-1;xn+=1)mn.push("null");mn.push(It[Ot].value),It[Ot].value="["+mn.join(" ")+"]"}}I("<<");for(var In=0;In<It.length;In++)I("/"+It[In].key+" "+It[In].value);I(">>"),yt.data.length!==0&&(I("stream"),I(ot(yt.data)),I("endstream"))},Rn=m.__private__.putPage=function(p){var _=p.number,se=p.data,me=p.objId,Ne=p.contentsObjId;xr(me,!0),I("<</Type /Page"),I("/Parent "+p.rootDictionaryObjId+" 0 R"),I("/Resources "+p.resourceDictionaryObjId+" 0 R"),I("/MediaBox ["+parseFloat(ne(p.mediaBox.bottomLeftX))+" "+parseFloat(ne(p.mediaBox.bottomLeftY))+" "+ne(p.mediaBox.topRightX)+" "+ne(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&I("/CropBox ["+ne(p.cropBox.bottomLeftX)+" "+ne(p.cropBox.bottomLeftY)+" "+ne(p.cropBox.topRightX)+" "+ne(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&I("/BleedBox ["+ne(p.bleedBox.bottomLeftX)+" "+ne(p.bleedBox.bottomLeftY)+" "+ne(p.bleedBox.topRightX)+" "+ne(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&I("/TrimBox ["+ne(p.trimBox.bottomLeftX)+" "+ne(p.trimBox.bottomLeftY)+" "+ne(p.trimBox.topRightX)+" "+ne(p.trimBox.topRightY)+"]"),p.artBox!==null&&I("/ArtBox ["+ne(p.artBox.bottomLeftX)+" "+ne(p.artBox.bottomLeftY)+" "+ne(p.artBox.topRightX)+" "+ne(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&I("/UserUnit "+p.userUnit),lt.publish("putPage",{objId:me,pageContext:Me[_],pageNumber:_,page:se}),I("/Contents "+Ne+" 0 R"),I(">>"),I("endobj");var Te=se.join(`
`);return C===N.ADVANCED&&(Te+=`
Q`),xr(Ne,!0),Ar({data:Te,filters:ni(),objectId:Ne}),I("endobj"),me},es=m.__private__.putPages=function(){var p,_,se=[];for(p=1;p<=qe;p++)Me[p].objId=ln(),Me[p].contentsObjId=ln();for(p=1;p<=qe;p++)se.push(Rn({number:p,data:He[p],objId:Me[p].objId,contentsObjId:Me[p].contentsObjId,mediaBox:Me[p].mediaBox,cropBox:Me[p].cropBox,bleedBox:Me[p].bleedBox,trimBox:Me[p].trimBox,artBox:Me[p].artBox,userUnit:Me[p].userUnit,rootDictionaryObjId:ti,resourceDictionaryObjId:qr}));xr(ti,!0),I("<</Type /Pages");var me="/Kids [";for(_=0;_<qe;_++)me+=se[_]+" 0 R ";I(me+"]"),I("/Count "+qe),I(">>"),I("endobj"),lt.publish("postPutPages")},ks=function(p){lt.publish("putFont",{font:p,out:I,newObject:Cn,putStream:Ar}),p.isAlreadyPutted!==!0&&(p.objectNumber=Cn(),I("<<"),I("/Type /Font"),I("/BaseFont /"+_o(p.postScriptName)),I("/Subtype /Type1"),typeof p.encoding=="string"&&I("/Encoding /"+p.encoding),I("/FirstChar 32"),I("/LastChar 255"),I(">>"),I("endobj"))},ts=function(){for(var p in nt)nt.hasOwnProperty(p)&&(v===!1||v===!0&&y.hasOwnProperty(p))&&ks(nt[p])},As=function(p){p.objectNumber=Cn();var _=[];_.push({key:"Type",value:"/XObject"}),_.push({key:"Subtype",value:"/Form"}),_.push({key:"BBox",value:"["+[ne(p.x),ne(p.y),ne(p.x+p.width),ne(p.y+p.height)].join(" ")+"]"}),_.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var se=p.pages[1].join(`
`);Ar({data:se,additionalKeyValues:_,objectId:p.objectNumber}),I("endobj")},Ls=function(){for(var p in Mt)Mt.hasOwnProperty(p)&&As(Mt[p])},Za=function(p,_){var se,me=[],Ne=1/(_-1);for(se=0;se<1;se+=Ne)me.push(se);if(me.push(1),p[0].offset!=0){var Te={offset:0,color:p[0].color};p.unshift(Te)}if(p[p.length-1].offset!=1){var Ye={offset:1,color:p[p.length-1].color};p.push(Ye)}for(var ot="",yt=0,It=0;It<me.length;It++){for(se=me[It];se>p[yt+1].offset;)yt++;var Pt=p[yt].offset,Ot=(se-Pt)/(p[yt+1].offset-Pt),mn=p[yt].color,xn=p[yt+1].color;ot+=G(Math.round((1-Ot)*mn[0]+Ot*xn[0]).toString(16))+G(Math.round((1-Ot)*mn[1]+Ot*xn[1]).toString(16))+G(Math.round((1-Ot)*mn[2]+Ot*xn[2]).toString(16))}return ot.trim()},ml=function(p,_){_||(_=21);var se=Cn(),me=Za(p.colors,_),Ne=[];Ne.push({key:"FunctionType",value:"0"}),Ne.push({key:"Domain",value:"[0.0 1.0]"}),Ne.push({key:"Size",value:"["+_+"]"}),Ne.push({key:"BitsPerSample",value:"8"}),Ne.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ne.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ar({data:me,additionalKeyValues:Ne,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:se}),I("endobj"),p.objectNumber=Cn(),I("<< /ShadingType "+p.type),I("/ColorSpace /DeviceRGB");var Te="/Coords ["+ne(parseFloat(p.coords[0]))+" "+ne(parseFloat(p.coords[1]))+" ";p.type===2?Te+=ne(parseFloat(p.coords[2]))+" "+ne(parseFloat(p.coords[3])):Te+=ne(parseFloat(p.coords[2]))+" "+ne(parseFloat(p.coords[3]))+" "+ne(parseFloat(p.coords[4]))+" "+ne(parseFloat(p.coords[5])),I(Te+="]"),p.matrix&&I("/Matrix ["+p.matrix.toString()+"]"),I("/Function "+se+" 0 R"),I("/Extend [true true]"),I(">>"),I("endobj")},hl=function(p,_){var se=ln(),me=Cn();_.push({resourcesOid:se,objectOid:me}),p.objectNumber=me;var Ne=[];Ne.push({key:"Type",value:"/Pattern"}),Ne.push({key:"PatternType",value:"1"}),Ne.push({key:"PaintType",value:"1"}),Ne.push({key:"TilingType",value:"1"}),Ne.push({key:"BBox",value:"["+p.boundingBox.map(ne).join(" ")+"]"}),Ne.push({key:"XStep",value:ne(p.xStep)}),Ne.push({key:"YStep",value:ne(p.yStep)}),Ne.push({key:"Resources",value:se+" 0 R"}),p.matrix&&Ne.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),Ar({data:p.stream,additionalKeyValues:Ne,objectId:p.objectNumber}),I("endobj")},Ps=function(p){var _;for(_ in gt)gt.hasOwnProperty(_)&&(gt[_]instanceof Fa?ml(gt[_]):gt[_]instanceof Uo&&hl(gt[_],p))},eo=function(p){for(var _ in p.objectNumber=Cn(),I("<<"),p)switch(_){case"opacity":I("/ca "+te(p[_]));break;case"stroke-opacity":I("/CA "+te(p[_]))}I(">>"),I("endobj")},pl=function(){var p;for(p in Ht)Ht.hasOwnProperty(p)&&eo(Ht[p])},Na=function(){for(var p in I("/XObject <<"),Mt)Mt.hasOwnProperty(p)&&Mt[p].objectNumber>=0&&I("/"+p+" "+Mt[p].objectNumber+" 0 R");lt.publish("putXobjectDict"),I(">>")},ns=function(){sr.oid=Cn(),I("<<"),I("/Filter /Standard"),I("/V "+sr.v),I("/R "+sr.r),I("/U <"+sr.toHexString(sr.U)+">"),I("/O <"+sr.toHexString(sr.O)+">"),I("/P "+sr.P),I(">>"),I("endobj")},ri=function(){for(var p in I("/Font <<"),nt)nt.hasOwnProperty(p)&&(v===!1||v===!0&&y.hasOwnProperty(p))&&I("/"+p+" "+nt[p].objectNumber+" 0 R");I(">>")},Bn=function(){if(Object.keys(gt).length>0){for(var p in I("/Shading <<"),gt)gt.hasOwnProperty(p)&&gt[p]instanceof Fa&&gt[p].objectNumber>=0&&I("/"+p+" "+gt[p].objectNumber+" 0 R");lt.publish("putShadingPatternDict"),I(">>")}},ii=function(p){if(Object.keys(gt).length>0){for(var _ in I("/Pattern <<"),gt)gt.hasOwnProperty(_)&&gt[_]instanceof m.TilingPattern&&gt[_].objectNumber>=0&&gt[_].objectNumber<p&&I("/"+_+" "+gt[_].objectNumber+" 0 R");lt.publish("putTilingPatternDict"),I(">>")}},fl=function(){if(Object.keys(Ht).length>0){var p;for(p in I("/ExtGState <<"),Ht)Ht.hasOwnProperty(p)&&Ht[p].objectNumber>=0&&I("/"+p+" "+Ht[p].objectNumber+" 0 R");lt.publish("putGStateDict"),I(">>")}},dn=function(p){xr(p.resourcesOid,!0),I("<<"),I("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ri(),Bn(),ii(p.objectOid),fl(),Na(),I(">>"),I("endobj")},to=function(){var p=[];ts(),pl(),Ls(),Ps(p),lt.publish("putResources"),p.forEach(dn),dn({resourcesOid:qr,objectOid:Number.MAX_SAFE_INTEGER}),lt.publish("postPutResources")},rs=function(){lt.publish("putAdditionalObjects");for(var p=0;p<Be.length;p++){var _=Be[p];xr(_.objId,!0),I(_.content),I("endobj")}lt.publish("postPutAdditionalObjects")},ba=function(p){at[p.fontName]=at[p.fontName]||{},at[p.fontName][p.fontStyle]=p.id},zs=function(p,_,se,me,Ne){var Te={id:"F"+(Object.keys(nt).length+1).toString(10),postScriptName:p,fontName:_,fontStyle:se,encoding:me,isStandardFont:Ne||!1,metadata:{}};return lt.publish("addFont",{font:Te,instance:this}),nt[Te.id]=Te,ba(Te),Te.id},no=function(p){for(var _=0,se=ie.length;_<se;_++){var me=zs.call(this,p[_][0],p[_][1],p[_][2],ie[_][3],!0);v===!1&&(y[me]=!0);var Ne=p[_][0].split("-");ba({id:me,fontName:Ne[0],fontStyle:Ne[1]||""})}lt.publish("addFonts",{fonts:nt,dictionary:at})},Lr=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(me){var _=me.stack||"";~_.indexOf(" at ")&&(_=_.split(" at ")[1]);var se="Error in function "+_.split(`
`)[0].split("<")[0]+": "+me.message;if(!St.console)throw new Error(se);St.console.error(se,me),St.alert&&alert(se)}},p.foo.bar=p,p.foo},is=function(p,_){var se,me,Ne,Te,Ye,ot,yt,It,Pt;if(Ne=(_=_||{}).sourceEncoding||"Unicode",Ye=_.outputEncoding,(_.autoencode||Ye)&&nt[De].metadata&&nt[De].metadata[Ne]&&nt[De].metadata[Ne].encoding&&(Te=nt[De].metadata[Ne].encoding,!Ye&&nt[De].encoding&&(Ye=nt[De].encoding),!Ye&&Te.codePages&&(Ye=Te.codePages[0]),typeof Ye=="string"&&(Ye=Te[Ye]),Ye)){for(yt=!1,ot=[],se=0,me=p.length;se<me;se++)(It=Ye[p.charCodeAt(se)])?ot.push(String.fromCharCode(It)):ot.push(p[se]),ot[se].charCodeAt(0)>>8&&(yt=!0);p=ot.join("")}for(se=p.length;yt===void 0&&se!==0;)p.charCodeAt(se-1)>>8&&(yt=!0),se--;if(!yt)return p;for(ot=_.noBOM?[]:[254,255],se=0,me=p.length;se<me;se++){if((Pt=(It=p.charCodeAt(se))>>8)>>8)throw new Error("Character at position "+se+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ot.push(Pt),ot.push(It-(Pt<<8))}return String.fromCharCode.apply(void 0,ot)},Kn=m.__private__.pdfEscape=m.pdfEscape=function(p,_){return is(p,_).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_s=m.__private__.beginPage=function(p){He[++qe]=[],Me[qe]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},Le(qe),ke(He[U])},ja=function(p,_){var se,me,Ne;switch(r=_||r,typeof p=="string"&&(se=f(p.toLowerCase()),Array.isArray(se)&&(me=se[0],Ne=se[1])),Array.isArray(p)&&(me=p[0]*Oe,Ne=p[1]*Oe),isNaN(me)&&(me=s[0],Ne=s[1]),(me>14400||Ne>14400)&&(en.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),me=Math.min(14400,me),Ne=Math.min(14400,Ne)),s=[me,Ne],r.substr(0,1)){case"l":Ne>me&&(s=[Ne,me]);break;case"p":me>Ne&&(s=[Ne,me])}_s(s),Gc(vl),I(wi),Nl!==0&&I(Nl+" J"),bl!==0&&I(bl+" j"),lt.publish("addPage",{pageNumber:qe})},Y=function(p){p>0&&p<=qe&&(He.splice(p,1),Me.splice(p,1),qe--,U>qe&&(U=qe),this.setPage(U))},Le=function(p){p>0&&p<=qe&&(U=p)},Xe=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return He.length-1},Lt=function(p,_,se){var me,Ne=void 0;return se=se||{},p=p!==void 0?p:nt[De].fontName,_=_!==void 0?_:nt[De].fontStyle,me=p.toLowerCase(),at[me]!==void 0&&at[me][_]!==void 0?Ne=at[me][_]:at[p]!==void 0&&at[p][_]!==void 0?Ne=at[p][_]:se.disableWarning===!1&&en.warn("Unable to look up font label for font '"+p+"', '"+_+"'. Refer to getFontList() for available fonts."),Ne||se.noFallback||(Ne=at.times[_])==null&&(Ne=at.times.normal),Ne},bt=m.__private__.putInfo=function(){var p=Cn(),_=function(me){return me};for(var se in x!==null&&(_=sr.encryptor(p,0)),I("<<"),I("/Producer ("+Kn(_("jsPDF "+wt.version))+")"),Fe)Fe.hasOwnProperty(se)&&Fe[se]&&I("/"+se.substr(0,1).toUpperCase()+se.substr(1)+" ("+Kn(_(Fe[se]))+")");I("/CreationDate ("+Kn(_(T))+")"),I(">>"),I("endobj")},kt=m.__private__.putCatalog=function(p){var _=(p=p||{}).rootDictionaryObjId||ti;switch(Cn(),I("<<"),I("/Type /Catalog"),I("/Pages "+_+" 0 R"),Ae||(Ae="fullwidth"),Ae){case"fullwidth":I("/OpenAction [3 0 R /FitH null]");break;case"fullheight":I("/OpenAction [3 0 R /FitV null]");break;case"fullpage":I("/OpenAction [3 0 R /Fit]");break;case"original":I("/OpenAction [3 0 R /XYZ null null 1]");break;default:var se=""+Ae;se.substr(se.length-1)==="%"&&(Ae=parseInt(Ae)/100),typeof Ae=="number"&&I("/OpenAction [3 0 R /XYZ null null "+te(Ae)+"]")}switch(H||(H="continuous"),H){case"continuous":I("/PageLayout /OneColumn");break;case"single":I("/PageLayout /SinglePage");break;case"two":case"twoleft":I("/PageLayout /TwoColumnLeft");break;case"tworight":I("/PageLayout /TwoColumnRight")}it&&I("/PageMode /"+it),lt.publish("putCatalog"),I(">>"),I("endobj")},Dt=m.__private__.putTrailer=function(){I("trailer"),I("<<"),I("/Size "+(ae+1)),I("/Root "+ae+" 0 R"),I("/Info "+(ae-1)+" 0 R"),x!==null&&I("/Encrypt "+sr.oid+" 0 R"),I("/ID [ <"+F+"> <"+F+"> ]"),I(">>")},un=m.__private__.putHeader=function(){I("%PDF-"+w),I("%")},Ri=m.__private__.putXRef=function(){var p="0000000000";I("xref"),I("0 "+(ae+1)),I("0000000000 65535 f ");for(var _=1;_<=ae;_++)typeof he[_]=="function"?I((p+he[_]()).slice(-10)+" 00000 n "):he[_]!==void 0?I((p+he[_]).slice(-10)+" 00000 n "):I("0000000000 00000 n ")},Bt=m.__private__.buildDocument=function(){tt(),ke(xe),lt.publish("buildDocument"),un(),es(),rs(),to(),x!==null&&ns(),bt(),kt();var p=we;return Ri(),Dt(),I("startxref"),I(""+p),I("%%EOF"),ke(He[U]),xe.join(`
`)},vr=m.__private__.getBlob=function(p){return new Blob([be(p)],{type:"application/pdf"})},Is=m.output=m.__private__.output=Lr(function(p,_){switch(typeof(_=_||{})=="string"?_={filename:_}:_.filename=_.filename||"generated.pdf",p){case void 0:return Bt();case"save":m.save(_.filename);break;case"arraybuffer":return be(Bt());case"blob":return vr(Bt());case"bloburi":case"bloburl":if(St.URL!==void 0&&typeof St.URL.createObjectURL=="function")return St.URL&&St.URL.createObjectURL(vr(Bt()))||void 0;en.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var se="",me=Bt();try{se=xp(me)}catch{se=xp(unescape(encodeURIComponent(me)))}return"data:application/pdf;filename="+_.filename+";base64,"+se;case"pdfobjectnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var Ne="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Te=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';_.pdfObjectUrl&&(Ne=_.pdfObjectUrl,Te="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ne+'"'+Te+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(_)+");<\/script></body></html>",ot=St.open();return ot!==null&&ot.document.write(Ye),ot}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(St)==="[object Window]"){var yt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(_.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+_.filename+'" width="500px" height="400px" /></body></html>',It=St.open();if(It!==null){It.document.write(yt);var Pt=this;It.document.documentElement.querySelector("#pdfViewer").onload=function(){It.document.title=_.filename,It.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Pt.output("bloburl"))}}return It}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(St)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ot='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",_)+'"></iframe></body></html>',mn=St.open();if(mn!==null&&(mn.document.write(Ot),mn.document.title=_.filename),mn||typeof safari>"u")return mn;break;case"datauri":case"dataurl":return St.document.location.href=this.output("datauristring",_);default:return null}}),ro=function(p){return Array.isArray(Rt)===!0&&Rt.indexOf(p)>-1};switch(i){case"pt":Oe=1;break;case"mm":Oe=72/25.4;break;case"cm":Oe=72/2.54;break;case"in":Oe=72;break;case"px":Oe=ro("px_scaling")==1?.75:96/72;break;case"pc":case"em":Oe=12;break;case"ex":Oe=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);Oe=i}var sr=null;Pe(),q();var am=function(p){return x!==null?sr.encryptor(p,0):function(_){return _}},Hc=m.__private__.getPageInfo=m.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Me[p].objId,pageNumber:p,pageContext:Me[p]}},At=m.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var _ in Me)if(Me[_].objId===p)break;return Hc(_)},om=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Me[U].objId,pageNumber:U,pageContext:Me[U]}};m.addPage=function(){return ja.apply(this,arguments),this},m.setPage=function(){return Le.apply(this,arguments),ke.call(this,He[U]),this},m.insertPage=function(p){return this.addPage(),this.movePage(U,p),this},m.movePage=function(p,_){var se,me;if(p>_){se=He[p],me=Me[p];for(var Ne=p;Ne>_;Ne--)He[Ne]=He[Ne-1],Me[Ne]=Me[Ne-1];He[_]=se,Me[_]=me,this.setPage(_)}else if(p<_){se=He[p],me=Me[p];for(var Te=p;Te<_;Te++)He[Te]=He[Te+1],Me[Te]=Me[Te+1];He[_]=se,Me[_]=me,this.setPage(_)}return this},m.deletePage=function(){return Y.apply(this,arguments),this},m.__private__.text=m.text=function(p,_,se,me,Ne){var Te,Ye,ot,yt,It,Pt,Ot,mn,xn,In=(me=me||{}).scope||this;if(typeof p=="number"&&typeof _=="number"&&(typeof se=="string"||Array.isArray(se))){var ar=se;se=_,_=p,p=ar}if(arguments[3]instanceof vt?(O("The transform parameter of text() with a Matrix value"),xn=Ne):(ot=arguments[4],yt=arguments[5],Qt(Ot=arguments[3])==="object"&&Ot!==null||(typeof ot=="string"&&(yt=ot,ot=null),typeof Ot=="string"&&(yt=Ot,Ot=null),typeof Ot=="number"&&(ot=Ot,Ot=null),me={flags:Ot,angle:ot,align:yt})),isNaN(_)||isNaN(se)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return In;var Un="",Si=!1,Hr=typeof me.lineHeightFactor=="number"?me.lineHeightFactor:Sa,$i=In.internal.scaleFactor;function Xc(tn){return tn=tn.split("	").join(Array(me.TabLen||9).join(" ")),Kn(tn,Ot)}function kl(tn){for(var nn,An=tn.concat(),qn=[],cs=An.length;cs--;)typeof(nn=An.shift())=="string"?qn.push(nn):Array.isArray(tn)&&(nn.length===1||nn[1]===void 0&&nn[2]===void 0)?qn.push(nn[0]):qn.push([nn[0],nn[1],nn[2]]);return qn}function Al(tn,nn){var An;if(typeof tn=="string")An=nn(tn)[0];else if(Array.isArray(tn)){for(var qn,cs,Dl=tn.concat(),yo=[],rd=Dl.length;rd--;)typeof(qn=Dl.shift())=="string"?yo.push(nn(qn)[0]):Array.isArray(qn)&&typeof qn[0]=="string"&&(cs=nn(qn[0],qn[1],qn[2]),yo.push([cs[0],cs[1],cs[2]]));An=yo}return An}var co=!1,Ll=!0;if(typeof p=="string")co=!0;else if(Array.isArray(p)){var Pl=p.concat();Ye=[];for(var uo,Xn=Pl.length;Xn--;)(typeof(uo=Pl.shift())!="string"||Array.isArray(uo)&&typeof uo[0]!="string")&&(Ll=!1);co=Ll}if(co===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var mo=ue/In.internal.scaleFactor,ho=mo*(Hr-1);switch(me.baseline){case"bottom":se-=ho;break;case"top":se+=mo-ho;break;case"hanging":se+=mo-2*ho;break;case"middle":se+=mo/2-ho}if((Pt=me.maxWidth||0)>0&&(typeof p=="string"?p=In.splitTextToSize(p,Pt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(tn,nn){return tn.concat(In.splitTextToSize(nn,Pt))},[]))),Te={text:p,x:_,y:se,options:me,mutex:{pdfEscape:Kn,activeFontKey:De,fonts:nt,activeFontSize:ue}},lt.publish("preProcessText",Te),p=Te.text,ot=(me=Te.options).angle,!(xn instanceof vt)&&ot&&typeof ot=="number"){ot*=Math.PI/180,me.rotationDirection===0&&(ot=-ot),C===N.ADVANCED&&(ot=-ot);var po=Math.cos(ot),zl=Math.sin(ot);xn=new vt(po,zl,-zl,po,0,0)}else ot&&ot instanceof vt&&(xn=ot);C!==N.ADVANCED||xn||(xn=ei),(It=me.charSpace||ao)!==void 0&&(Un+=ne(k(It))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(mn=me.horizontalScale)!==void 0&&(Un+=ne(100*mn)+` Tz
`),me.lang;var Pr=-1,xm=me.renderingMode!==void 0?me.renderingMode:me.stroke,_l=In.internal.getCurrentPageInfo().pageContext;switch(xm){case 0:case!1:case"fill":Pr=0;break;case 1:case!0:case"stroke":Pr=1;break;case 2:case"fillThenStroke":Pr=2;break;case 3:case"invisible":Pr=3;break;case 4:case"fillAndAddForClipping":Pr=4;break;case 5:case"strokeAndAddPathForClipping":Pr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Pr=6;break;case 7:case"addToPathForClipping":Pr=7}var Zc=_l.usedRenderingMode!==void 0?_l.usedRenderingMode:-1;Pr!==-1?Un+=Pr+` Tr
`:Zc!==-1&&(Un+=`0 Tr
`),Pr!==-1&&(_l.usedRenderingMode=Pr),yt=me.align||"left";var si,fo=ue*Hr,ed=In.internal.pageSize.getWidth(),td=nt[De];It=me.charSpace||ao,Pt=me.maxWidth||0,Ot=Object.assign({autoencode:!0,noBOM:!0},me.flags);var Es=[],Aa=function(tn){return In.getStringUnitWidth(tn,{font:td,charSpace:It,fontSize:ue,doKerning:!1})*ue/$i};if(Object.prototype.toString.call(p)==="[object Array]"){var zr;Ye=kl(p),yt!=="left"&&(si=Ye.map(Aa));var yr,Fs=0;if(yt==="right"){_-=si[0],p=[],Xn=Ye.length;for(var as=0;as<Xn;as++)as===0?(yr=qi(_),zr=ss(se)):(yr=k(Fs-si[as]),zr=-fo),p.push([Ye[as],yr,zr]),Fs=si[as]}else if(yt==="center"){_-=si[0]/2,p=[],Xn=Ye.length;for(var os=0;os<Xn;os++)os===0?(yr=qi(_),zr=ss(se)):(yr=k((Fs-si[os])/2),zr=-fo),p.push([Ye[os],yr,zr]),Fs=si[os]}else if(yt==="left"){p=[],Xn=Ye.length;for(var go=0;go<Xn;go++)p.push(Ye[go])}else if(yt==="justify"&&td.encoding==="Identity-H"){p=[],Xn=Ye.length,Pt=Pt!==0?Pt:ed;for(var ls=0,kn=0;kn<Xn;kn++)if(zr=kn===0?ss(se):-fo,yr=kn===0?qi(_):ls,kn<Xn-1){var Il=k((Pt-si[kn])/(Ye[kn].split(" ").length-1)),Nr=Ye[kn].split(" ");p.push([Nr[0]+" ",yr,zr]),ls=0;for(var ai=1;ai<Nr.length;ai++){var xo=(Aa(Nr[ai-1]+" "+Nr[ai])-Aa(Nr[ai]))*$i+Il;ai==Nr.length-1?p.push([Nr[ai],xo,0]):p.push([Nr[ai]+" ",xo,0]),ls-=xo}}else p.push([Ye[kn],yr,zr]);p.push(["",ls,0])}else{if(yt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Xn=Ye.length,Pt=Pt!==0?Pt:ed,kn=0;kn<Xn;kn++)zr=kn===0?ss(se):-fo,yr=kn===0?qi(_):0,kn<Xn-1?Es.push(ne(k((Pt-si[kn])/(Ye[kn].split(" ").length-1)))):Es.push(0),p.push([Ye[kn],yr,zr])}}var nd=typeof me.R2L=="boolean"?me.R2L:Ge;nd===!0&&(p=Al(p,function(tn,nn,An){return[tn.split("").reverse().join(""),nn,An]})),Te={text:p,x:_,y:se,options:me,mutex:{pdfEscape:Kn,activeFontKey:De,fonts:nt,activeFontSize:ue}},lt.publish("postProcessText",Te),p=Te.text,Si=Te.mutex.isHex||!1;var Tl=nt[De].encoding;Tl!=="WinAnsiEncoding"&&Tl!=="StandardEncoding"||(p=Al(p,function(tn,nn,An){return[Xc(tn),nn,An]})),Ye=kl(p),p=[];for(var La,Pa,Os,za=0,vo=1,_a=Array.isArray(Ye[0])?vo:za,Rs="",Ml=function(tn,nn,An){var qn="";return An instanceof vt?(An=typeof me.angle=="number"?ir(An,new vt(1,0,0,1,tn,nn)):ir(new vt(1,0,0,1,tn,nn),An),C===N.ADVANCED&&(An=ir(new vt(1,0,0,-1,0,0),An)),qn=An.join(" ")+` Tm
`):qn=ne(tn)+" "+ne(nn)+` Td
`,qn},oi=0;oi<Ye.length;oi++){switch(Rs="",_a){case vo:Os=(Si?"<":"(")+Ye[oi][0]+(Si?">":")"),La=parseFloat(Ye[oi][1]),Pa=parseFloat(Ye[oi][2]);break;case za:Os=(Si?"<":"(")+Ye[oi]+(Si?">":")"),La=qi(_),Pa=ss(se)}Es!==void 0&&Es[oi]!==void 0&&(Rs=Es[oi]+` Tw
`),oi===0?p.push(Rs+Ml(La,Pa,xn)+Os):_a===za?p.push(Rs+Os):_a===vo&&p.push(Rs+Ml(La,Pa,xn)+Os)}p=_a===za?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var li=`BT
/`;return li+=De+" "+ue+` Tf
`,li+=ne(ue*Hr)+` TL
`,li+=Ca+`
`,li+=Un,li+=p,I(li+="ET"),y[De]=!0,In};var lm=m.__private__.clip=m.clip=function(p){return I(p==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return lm("evenodd")},m.__private__.discardPath=m.discardPath=function(){return I("n"),this};var Bi=m.__private__.isValidStyle=function(p){var _=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(_=!0),_};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(p){return Bi(p)&&(h=p),this};var Uc=m.__private__.getStyle=m.getStyle=function(p){var _=h;switch(p){case"D":case"S":_="S";break;case"F":_="f";break;case"FD":case"DF":_="B";break;case"f":case"f*":case"B":case"B*":_=p}return _},Vc=m.close=function(){return I("h"),this};m.stroke=function(){return I("S"),this},m.fill=function(p){return io("f",p),this},m.fillEvenOdd=function(p){return io("f*",p),this},m.fillStroke=function(p){return io("B",p),this},m.fillStrokeEvenOdd=function(p){return io("B*",p),this};var io=function(p,_){Qt(_)==="object"?dm(_,p):I(p)},gl=function(p){p===null||C===N.ADVANCED&&p===void 0||(p=Uc(p),I(p))};function cm(p,_,se,me,Ne){var Te=new Uo(_||this.boundingBox,se||this.xStep,me||this.yStep,this.gState,Ne||this.matrix);Te.stream=this.stream;var Ye=p+"$$"+this.cloneIndex+++"$$";return Qn(Ye,Te),Te}var dm=function(p,_){var se=Sn[p.key],me=gt[se];if(me instanceof Fa)I("q"),I(um(_)),me.gState&&m.setGState(me.gState),I(p.matrix.toString()+" cm"),I("/"+se+" sh"),I("Q");else if(me instanceof Uo){var Ne=new vt(1,0,0,-1,0,Ds());p.matrix&&(Ne=Ne.multiply(p.matrix||ei),se=cm.call(me,p.key,p.boundingBox,p.xStep,p.yStep,Ne).id),I("q"),I("/Pattern cs"),I("/"+se+" scn"),me.gState&&m.setGState(me.gState),I(_),I("Q")}},um=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},xl=m.moveTo=function(p,_){return I(ne(k(p))+" "+ne(R(_))+" m"),this},wa=m.lineTo=function(p,_){return I(ne(k(p))+" "+ne(R(_))+" l"),this},Ts=m.curveTo=function(p,_,se,me,Ne,Te){return I([ne(k(p)),ne(R(_)),ne(k(se)),ne(R(me)),ne(k(Ne)),ne(R(Te)),"c"].join(" ")),this};m.__private__.line=m.line=function(p,_,se,me,Ne){if(isNaN(p)||isNaN(_)||isNaN(se)||isNaN(me)||!Bi(Ne))throw new Error("Invalid arguments passed to jsPDF.line");return C===N.COMPAT?this.lines([[se-p,me-_]],p,_,[1,1],Ne||"S"):this.lines([[se-p,me-_]],p,_,[1,1]).stroke()},m.__private__.lines=m.lines=function(p,_,se,me,Ne,Te){var Ye,ot,yt,It,Pt,Ot,mn,xn,In,ar,Un,Si;if(typeof p=="number"&&(Si=se,se=_,_=p,p=Si),me=me||[1,1],Te=Te||!1,isNaN(_)||isNaN(se)||!Array.isArray(p)||!Array.isArray(me)||!Bi(Ne)||typeof Te!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(xl(_,se),Ye=me[0],ot=me[1],It=p.length,ar=_,Un=se,yt=0;yt<It;yt++)(Pt=p[yt]).length===2?(ar=Pt[0]*Ye+ar,Un=Pt[1]*ot+Un,wa(ar,Un)):(Ot=Pt[0]*Ye+ar,mn=Pt[1]*ot+Un,xn=Pt[2]*Ye+ar,In=Pt[3]*ot+Un,ar=Pt[4]*Ye+ar,Un=Pt[5]*ot+Un,Ts(Ot,mn,xn,In,ar,Un));return Te&&Vc(),gl(Ne),this},m.path=function(p){for(var _=0;_<p.length;_++){var se=p[_],me=se.c;switch(se.op){case"m":xl(me[0],me[1]);break;case"l":wa(me[0],me[1]);break;case"c":Ts.apply(this,me);break;case"h":Vc()}}return this},m.__private__.rect=m.rect=function(p,_,se,me,Ne){if(isNaN(p)||isNaN(_)||isNaN(se)||isNaN(me)||!Bi(Ne))throw new Error("Invalid arguments passed to jsPDF.rect");return C===N.COMPAT&&(me=-me),I([ne(k(p)),ne(R(_)),ne(k(se)),ne(k(me)),"re"].join(" ")),gl(Ne),this},m.__private__.triangle=m.triangle=function(p,_,se,me,Ne,Te,Ye){if(isNaN(p)||isNaN(_)||isNaN(se)||isNaN(me)||isNaN(Ne)||isNaN(Te)||!Bi(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[se-p,me-_],[Ne-se,Te-me],[p-Ne,_-Te]],p,_,[1,1],Ye,!0),this},m.__private__.roundedRect=m.roundedRect=function(p,_,se,me,Ne,Te,Ye){if(isNaN(p)||isNaN(_)||isNaN(se)||isNaN(me)||isNaN(Ne)||isNaN(Te)||!Bi(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ot=4/3*(Math.SQRT2-1);return Ne=Math.min(Ne,.5*se),Te=Math.min(Te,.5*me),this.lines([[se-2*Ne,0],[Ne*ot,0,Ne,Te-Te*ot,Ne,Te],[0,me-2*Te],[0,Te*ot,-Ne*ot,Te,-Ne,Te],[2*Ne-se,0],[-Ne*ot,0,-Ne,-Te*ot,-Ne,-Te],[0,2*Te-me],[0,-Te*ot,Ne*ot,-Te,Ne,-Te]],p+Ne,_,[1,1],Ye,!0),this},m.__private__.ellipse=m.ellipse=function(p,_,se,me,Ne){if(isNaN(p)||isNaN(_)||isNaN(se)||isNaN(me)||!Bi(Ne))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Te=4/3*(Math.SQRT2-1)*se,Ye=4/3*(Math.SQRT2-1)*me;return xl(p+se,_),Ts(p+se,_-Ye,p+Te,_-me,p,_-me),Ts(p-Te,_-me,p-se,_-Ye,p-se,_),Ts(p-se,_+Ye,p-Te,_+me,p,_+me),Ts(p+Te,_+me,p+se,_+Ye,p+se,_),gl(Ne),this},m.__private__.circle=m.circle=function(p,_,se,me){if(isNaN(p)||isNaN(_)||isNaN(se)||!Bi(me))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,_,se,se,me)},m.setFont=function(p,_,se){return se&&(_=ce(_,se)),De=Lt(p,_,{disableWarning:!1}),this};var mm=m.__private__.getFont=m.getFont=function(){return nt[Lt.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var p,_,se={};for(p in at)if(at.hasOwnProperty(p))for(_ in se[p]=[],at[p])at[p].hasOwnProperty(_)&&se[p].push(_);return se},m.addFont=function(p,_,se,me,Ne){var Te=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Te.indexOf(arguments[3])!==-1?Ne=arguments[3]:arguments[3]&&Te.indexOf(arguments[3])==-1&&(se=ce(se,me)),Ne=Ne||"Identity-H",zs.call(this,p,_,se,Ne)};var Sa,vl=e.lineWidth||.200025,so=m.__private__.getLineWidth=m.getLineWidth=function(){return vl},Gc=m.__private__.setLineWidth=m.setLineWidth=function(p){return vl=p,I(ne(k(p))+" w"),this};m.__private__.setLineDash=wt.API.setLineDash=wt.API.setLineDashPattern=function(p,_){if(p=p||[],_=_||0,isNaN(_)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(se){return ne(k(se))}).join(" "),_=ne(k(_)),I("["+p+"] "+_+" d"),this};var Wc=m.__private__.getLineHeight=m.getLineHeight=function(){return ue*Sa};m.__private__.getLineHeight=m.getLineHeight=function(){return ue*Sa};var Jc=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(Sa=p),this},Yc=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Sa};Jc(e.lineHeight);var qi=m.__private__.getHorizontalCoordinate=function(p){return k(p)},ss=m.__private__.getVerticalCoordinate=function(p){return C===N.ADVANCED?p:Me[U].mediaBox.topRightY-Me[U].mediaBox.bottomLeftY-k(p)},hm=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(p){return ne(qi(p))},Ms=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(p){return ne(ss(p))},wi=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return $r(wi)},m.__private__.setStrokeColor=m.setDrawColor=function(p,_,se,me){return wi=kr({ch1:p,ch2:_,ch3:se,ch4:me,pdfColorType:"draw",precision:2}),I(wi),this};var yl=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return $r(yl)},m.__private__.setFillColor=m.setFillColor=function(p,_,se,me){return yl=kr({ch1:p,ch2:_,ch3:se,ch4:me,pdfColorType:"fill",precision:2}),I(yl),this};var Ca=e.textColor||"0 g",pm=m.__private__.getTextColor=m.getTextColor=function(){return $r(Ca)};m.__private__.setTextColor=m.setTextColor=function(p,_,se,me){return Ca=kr({ch1:p,ch2:_,ch3:se,ch4:me,pdfColorType:"text",precision:3}),this};var ao=e.charSpace,fm=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ao||0)};m.__private__.setCharSpace=m.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ao=p,this};var Nl=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(p){var _=m.CapJoinStyles[p];if(_===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=_,I(_+" J"),this};var bl=0;m.__private__.setLineJoin=m.setLineJoin=function(p){var _=m.CapJoinStyles[p];if(_===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bl=_,I(_+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return I(ne(k(p))+" M"),this},m.GState=Fu,m.setGState=function(p){(p=typeof p=="string"?Ht[W[p]]:Qc(null,p)).equals(ze)||(I("/"+p.id+" gs"),ze=p)};var Qc=function(p,_){if(!p||!W[p]){var se=!1;for(var me in Ht)if(Ht.hasOwnProperty(me)&&Ht[me].equals(_)){se=!0;break}if(se)_=Ht[me];else{var Ne="GS"+(Object.keys(Ht).length+1).toString(10);Ht[Ne]=_,_.id=Ne}return p&&(W[p]=_.id),lt.publish("addGState",_),_}};m.addGState=function(p,_){return Qc(p,_),this},m.saveGraphicsState=function(){return I("q"),Nt.push({key:De,size:ue,color:Ca}),this},m.restoreGraphicsState=function(){I("Q");var p=Nt.pop();return De=p.key,ue=p.size,Ca=p.color,ze=null,this},m.setCurrentTransformationMatrix=function(p){return I(p.toString()+" cm"),this},m.comment=function(p){return I("#"+p),this};var oo=function(p,_){var se=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return se},set:function(Te){isNaN(Te)||(se=parseFloat(Te))}});var me=_||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return me},set:function(Te){isNaN(Te)||(me=parseFloat(Te))}});var Ne="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ne},set:function(Te){Ne=Te.toString()}}),this},jl=function(p,_,se,me){oo.call(this,p,_),this.type="rect";var Ne=se||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ne},set:function(Ye){isNaN(Ye)||(Ne=parseFloat(Ye))}});var Te=me||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Te},set:function(Ye){isNaN(Ye)||(Te=parseFloat(Ye))}}),this},wl=function(){this.page=qe,this.currentPage=U,this.pages=He.slice(0),this.pagesContext=Me.slice(0),this.x=_t,this.y=mt,this.matrix=Ct,this.width=ka(U),this.height=Ds(U),this.outputDestination=Ke,this.id="",this.objectNumber=-1};wl.prototype.restore=function(){qe=this.page,U=this.currentPage,Me=this.pagesContext,He=this.pages,_t=this.x,mt=this.y,Ct=this.matrix,Sl(U,this.width),Cl(U,this.height),Ke=this.outputDestination};var Kc=function(p,_,se,me,Ne){On.push(new wl),qe=U=0,He=[],_t=p,mt=_,Ct=Ne,_s([se,me])},gm=function(p){if(Fn[p])On.pop().restore();else{var _=new wl,se="Xo"+(Object.keys(Mt).length+1).toString(10);_.id=se,Fn[p]=se,Mt[se]=_,lt.publish("addFormObject",_),On.pop().restore()}};for(var lo in m.beginFormObject=function(p,_,se,me,Ne){return Kc(p,_,se,me,Ne),this},m.endFormObject=function(p){return gm(p),this},m.doFormObject=function(p,_){var se=Mt[Fn[p]];return I("q"),I(_.toString()+" cm"),I("/"+se.id+" Do"),I("Q"),this},m.getFormObject=function(p){var _=Mt[Fn[p]];return{x:_.x,y:_.y,width:_.width,height:_.height,matrix:_.matrix}},m.save=function(p,_){return p=p||"generated.pdf",(_=_||{}).returnPromise=_.returnPromise||!1,_.returnPromise===!1?(Da(vr(Bt()),p),typeof Da.unload=="function"&&St.setTimeout&&setTimeout(Da.unload,911),this):new Promise(function(se,me){try{var Ne=Da(vr(Bt()),p);typeof Da.unload=="function"&&St.setTimeout&&setTimeout(Da.unload,911),se(Ne)}catch(Te){me(Te.message)}})},wt.API)wt.API.hasOwnProperty(lo)&&(lo==="events"&&wt.API.events.length?function(p,_){var se,me,Ne;for(Ne=_.length-1;Ne!==-1;Ne--)se=_[Ne][0],me=_[Ne][1],p.subscribe.apply(p,[se].concat(typeof me=="function"?[me]:me))}(lt,wt.API.events):m[lo]=wt.API[lo]);var ka=m.getPageWidth=function(p){return(Me[p=p||U].mediaBox.topRightX-Me[p].mediaBox.bottomLeftX)/Oe},Sl=m.setPageWidth=function(p,_){Me[p].mediaBox.topRightX=_*Oe+Me[p].mediaBox.bottomLeftX},Ds=m.getPageHeight=function(p){return(Me[p=p||U].mediaBox.topRightY-Me[p].mediaBox.bottomLeftY)/Oe},Cl=m.setPageHeight=function(p,_){Me[p].mediaBox.topRightY=_*Oe+Me[p].mediaBox.bottomLeftY};return m.internal={pdfEscape:Kn,getStyle:Uc,getFont:mm,getFontSize:Ie,getCharSpace:fm,getTextColor:pm,getLineHeight:Wc,getLineHeightFactor:Yc,getLineWidth:so,write:je,getHorizontalCoordinate:qi,getVerticalCoordinate:ss,getCoordinateString:hm,getVerticalCoordinateString:Ms,collections:{},newObject:Cn,newAdditionalObject:Cs,newObjectDeferred:ln,newObjectDeferredBegin:xr,getFilters:ni,putStream:Ar,events:lt,scaleFactor:Oe,pageSize:{getWidth:function(){return ka(U)},setWidth:function(p){Sl(U,p)},getHeight:function(){return Ds(U)},setHeight:function(p){Cl(U,p)}},encryptionOptions:x,encryption:sr,getEncryptor:am,output:Is,getNumberOfPages:Xe,pages:He,out:I,f2:te,f3:M,getPageInfo:Hc,getPageInfoByObjId:At,getCurrentPageInfo:om,getPDFVersion:S,Point:oo,Rectangle:jl,Matrix:vt,hasHotfix:ro},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ka(U)},set:function(p){Sl(U,p)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ds(U)},set:function(p){Cl(U,p)},enumerable:!0,configurable:!0}),no.call(m,ie),De="F1",ja(s,r),lt.publish("initialized"),m}zo.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},zo.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},zo.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},zo.prototype.processOwnerPassword=function(e,t){return yp(vp(t).substr(0,5),e)},zo.prototype.encryptor=function(e,t){var r=vp(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return yp(r,i)}},Fu.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Qt(e)!==Qt(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},wt.API={events:[]},wt.version="3.0.1";var yn=wt.API,jf=1,Xa=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Co=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},zt=function(e){return e.toFixed(2)},Ys=function(e){return e.toFixed(5)};yn.__acroform__={};var Br=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Sg=function(e){return e*jf},Gi=function(e){var t=new v2,r=xt.internal.getHeight(e)||0,i=xt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(zt(i)),Number(zt(r))],t},RN=yn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},BN=yn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},qN=yn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Pn=yn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qN(e,t-1)},zn=yn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return RN(e,t-1)},_n=yn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BN(e,t-1)},$N=yn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,s=e[0],a=e[1],l=e[2],d=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=i(a+d)||0,c.upperRight_X=r(s+l)||0,c.upperRight_Y=i(a)||0,[Number(zt(c.lowerLeft_X)),Number(zt(c.lowerLeft_Y)),Number(zt(c.upperRight_X)),Number(zt(c.upperRight_Y))]},HN=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=Np(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+zt(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Gi(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},Np=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(M){return M.split(`
`)}):s.map(function(M){return[M]});var a=r,l=xt.internal.getHeight(e)||0;l=l<0?-l:l;var d=xt.internal.getWidth(e)||0;d=d<0?-d:d;var c=function(M,k,P){if(M+1<s.length){var R=k+" "+s[M+1][0];return Ud(R,e,P).width<=d-4}return!1};a++;e:for(;a>0;){t="",a--;var h,x,v=Ud("3",e,a).height,y=e.multiline?l-a:(l-v)/2,m=y+=2,w=0,S=0,j=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Ud(t,e,a=12).width+", FieldWidth:"+d+`
`;break}for(var f="",N=0,C=0;C<s.length;C++)if(s.hasOwnProperty(C)){var V=!1;if(s[C].length!==1&&j!==s[C].length-1){if((v+2)*(N+2)+2>l)continue e;f+=s[C][j],V=!0,S=C,C--}else{f=(f+=s[C][j]+" ").substr(f.length-1)==" "?f.substr(0,f.length-1):f;var ee=parseInt(C),ce=c(ee,f,a),ne=C>=s.length-1;if(ce&&!ne){f+=" ",j=0;continue}if(ce||ne){if(ne)S=ee;else if(e.multiline&&(v+2)*(N+2)+2>l)continue e}else{if(!e.multiline||(v+2)*(N+2)+2>l)continue e;S=ee}}for(var O="",J=w;J<=S;J++){var te=s[J];if(e.multiline){if(J===S){O+=te[j]+" ",j=(j+1)%te.length;continue}if(J===w){O+=te[te.length-1]+" ";continue}}O+=te[0]+" "}switch(O=O.substr(O.length-1)==" "?O.substr(0,O.length-1):O,x=Ud(O,e,a).width,e.textAlign){case"right":h=d-x-2;break;case"center":h=(d-x)/2;break;case"left":default:h=2}t+=zt(h)+" "+zt(m)+` Td
`,t+="("+Xa(O)+`) Tj
`,t+=-zt(h)+` 0 Td
`,m=-(a+2),x=0,w=V?S:S+1,N++,f=""}break}return i.text=t,i.fontSize=a,i},Ud=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},UN={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},VN=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},GN=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Qt(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[i]}},WN=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Fi.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(UN)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jf=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new y2,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];a.objId=void 0,a.hasAnnotation&&VN(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,s){var a=!i;for(var l in i||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var d=i[l],c=[],h=d.Rect;if(d.Rect&&(d.Rect=$N(d.Rect,s)),s.internal.newObjectDeferredBegin(d.objId,!0),d.DA=xt.createDefaultAppearanceStream(d),Qt(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(c=d.getKeyValueListForStream()),d.Rect=h,d.hasAppearanceStream&&!d.appearanceStreamContent){var x=HN(d);c.push({key:"AP",value:"<</N "+x+">>"}),s.internal.acroformPlugin.xForms.push(x)}if(d.appearanceStreamContent){var v="";for(var y in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(y)){var m=d.appearanceStreamContent[y];if(v+="/"+y+" ",v+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var l in m)if(m.hasOwnProperty(l)){var w=m[l];typeof w=="function"&&(w=w.call(s,d)),v+="/"+l+" "+w+" ",s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w)}}else typeof(w=m)=="function"&&(w=w.call(s,d)),v+="/"+l+" "+w,s.internal.acroformPlugin.xForms.indexOf(w)>=0||s.internal.acroformPlugin.xForms.push(w);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:d.objId}),s.internal.out("endobj")}a&&GN(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},x2=yn.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(l){return l};if(Array.isArray(e)){for(var s="[",a=0;a<e.length;a++)switch(a!==0&&(s+=" "),Qt(e[a])){case"boolean":case"number":case"object":s+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),s+="("+Xa(i(e[a].toString()))+")"):s+=e[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},ph=function(e,t,r){var i=function(s){return s};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xa(i(e))+")"},Yi=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Yi.prototype.toString=function(){return this.objId+" 0 R"},Yi.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Yi.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],s=this[i];s&&(Array.isArray(s)?e.push({key:i,value:x2(s,this.objId,this.scope)}):s instanceof Yi?(s.scope=this.scope,e.push({key:i,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:i,value:s}))}return e};var v2=function(){Yi.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Br(v2,Yi);var y2=function(){Yi.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xa(r(e))+")"}},set:function(r){e=r}})};Br(y2,Yi);var Fi=function e(){Yi.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute F supplied.');t=f}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(t,3)},set:function(f){f?this.F=zn(t,3):this.F=_n(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(f){if(isNaN(f))throw new Error('Invalid value "'+f+'" for attribute Ff supplied.');r=f}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(f){i=f!==void 0?f:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(f){i[0]=f}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(f){i[1]=f}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(f){i[2]=f}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(f){i[3]=f}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(f){switch(f){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=f;break;default:throw new Error('Invalid value "'+f+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Ou)return;a="FieldObject"+e.FieldNum++}var f=function(N){return N};return this.scope&&(f=this.scope.internal.getEncryptor(this.objId)),"("+Xa(f(a))+")"},set:function(f){a=f.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(f){a=f}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(f){l=f}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(f){d=f}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(f){c=f}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/jf:h},set:function(f){h=f}});var x="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return x},set:function(f){x=f}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Ou||this instanceof Ua))return ph(v,this.objId,this.scope)},set:function(f){f=f.toString(),v=f}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof Jn?y:ph(y,this.objId,this.scope)},set:function(f){f=f.toString(),y=this instanceof Jn?f:f.substr(0,1)==="("?Co(f.substr(1,f.length-2)):Co(f)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jn?Co(y.substr(1,y.length-1)):y},set:function(f){f=f.toString(),y=this instanceof Jn?"/"+f:f}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(f){this.V=f}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Jn?m:ph(m,this.objId,this.scope)},set:function(f){f=f.toString(),m=this instanceof Jn?f:f.substr(0,1)==="("?Co(f.substr(1,f.length-2)):Co(f)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Jn?Co(m.substr(1,m.length-1)):m},set:function(f){f=f.toString(),m=this instanceof Jn?"/"+f:f}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,S=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return S},set:function(f){f=!!f,S=f}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(f){w=f}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(f){f?this.Ff=zn(this.Ff,1):this.Ff=_n(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(f){f?this.Ff=zn(this.Ff,2):this.Ff=_n(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(f){f?this.Ff=zn(this.Ff,3):this.Ff=_n(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(f){if([0,1,2].indexOf(f)===-1)throw new Error('Invalid value "'+f+'" for attribute Q supplied.');j=f}}),Object.defineProperty(this,"textAlign",{get:function(){var f;switch(j){case 0:default:f="left";break;case 1:f="center";break;case 2:f="right"}return f},configurable:!0,enumerable:!0,set:function(f){switch(f){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};Br(Fi,Yi);var Ko=function(){Fi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return x2(t,this.objId,this.scope)},set:function(r){var i,s;s=[],typeof(i=r)=="string"&&(s=function(a,l,d){d||(d=1);for(var c,h=[];c=l.exec(a);)h.push(c[d]);return h}(i,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(r){r?this.Ff=zn(this.Ff,18):this.Ff=_n(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=zn(this.Ff,19):this.Ff=_n(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(r){r?(this.Ff=zn(this.Ff,20),t.sort()):this.Ff=_n(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(r){r?this.Ff=zn(this.Ff,22):this.Ff=_n(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(r){r?this.Ff=zn(this.Ff,23):this.Ff=_n(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(r){r?this.Ff=zn(this.Ff,27):this.Ff=_n(this.Ff,27)}}),this.hasAppearanceStream=!1};Br(Ko,Fi);var Xo=function(){Ko.call(this),this.fontName="helvetica",this.combo=!1};Br(Xo,Ko);var Zo=function(){Xo.call(this),this.combo=!0};Br(Zo,Xo);var ou=function(){Zo.call(this),this.edit=!0};Br(ou,Zo);var Jn=function(){Fi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(r){r?this.Ff=zn(this.Ff,15):this.Ff=_n(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(r){r?this.Ff=zn(this.Ff,16):this.Ff=_n(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(r){r?this.Ff=zn(this.Ff,17):this.Ff=_n(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(r){r?this.Ff=zn(this.Ff,26):this.Ff=_n(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,s=[];for(i in s.push("<<"),t)s.push("/"+i+" ("+Xa(r(t[i]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Qt(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Br(Jn,Fi);var lu=function(){Jn.call(this),this.pushButton=!0};Br(lu,Jn);var el=function(){Jn.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Br(el,Jn);var Ou=function(){var e,t;Fi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(d){return d};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+Xa(s(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(s){Qt(s)==="object"&&(i=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(s){typeof s=="string"&&(i.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=xt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Br(Ou,Fi),el.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},el.prototype.createOption=function(e){var t=new Ou;return t.Parent=this,t.optionName=e,this.Kids.push(t),JN.call(this.scope,t),t};var cu=function(){Jn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=xt.CheckBox.createAppearanceStream()};Br(cu,Jn);var Ua=function(){Fi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(t){t?this.Ff=zn(this.Ff,13):this.Ff=_n(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(t){t?this.Ff=zn(this.Ff,21):this.Ff=_n(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(t){t?this.Ff=zn(this.Ff,23):this.Ff=_n(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(t){t?this.Ff=zn(this.Ff,24):this.Ff=_n(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(t){t?this.Ff=zn(this.Ff,25):this.Ff=_n(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(t){t?this.Ff=zn(this.Ff,26):this.Ff=_n(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Br(Ua,Fi);var du=function(){Ua.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(e){e?this.Ff=zn(this.Ff,14):this.Ff=_n(this.Ff,14)}}),this.password=!0};Br(du,Ua);var xt={CheckBox:{createAppearanceStream:function(){return{N:{On:xt.CheckBox.YesNormal},D:{On:xt.CheckBox.YesPushDown,Off:xt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=Np(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+zt(xt.internal.getWidth(e))+" "+zt(xt.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+zt(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Gi(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),s=[],a=xt.internal.getHeight(e),l=xt.internal.getWidth(e),d=Np(e,e.caption);return s.push("1 g"),s.push("0 0 "+zt(l)+" "+zt(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+zt(l-1)+" "+zt(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+zt(d.fontSize)+" Tf "+i),s.push(d.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(xt.internal.getWidth(e))+" "+zt(xt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Circle.YesNormal,t.D[e]=xt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Gi(e);t.scope=e.scope;var r=[],i=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var s=xt.internal.Bezier_C,a=Number((i*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Ys(xt.internal.getWidth(e)/2)+" "+Ys(xt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=[],i=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*xt.internal.Bezier_C).toFixed(5)),l=Number((i*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ys(xt.internal.getWidth(e)/2)+" "+Ys(xt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Ys(xt.internal.getWidth(e)/2)+" "+Ys(xt.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=[],i=xt.internal.getWidth(e)<=xt.internal.getHeight(e)?xt.internal.getWidth(e)/4:xt.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var s=Number((2*i).toFixed(5)),a=Number((s*xt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Ys(xt.internal.getWidth(e)/2)+" "+Ys(xt.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:xt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=xt.RadioButton.Cross.YesNormal,t.D[e]=xt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Gi(e);t.scope=e.scope;var r=[],i=xt.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+zt(xt.internal.getWidth(e)-2)+" "+zt(xt.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(zt(i.x1.x)+" "+zt(i.x1.y)+" m"),r.push(zt(i.x2.x)+" "+zt(i.x2.y)+" l"),r.push(zt(i.x4.x)+" "+zt(i.x4.y)+" m"),r.push(zt(i.x3.x)+" "+zt(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=xt.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+zt(xt.internal.getWidth(e))+" "+zt(xt.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+zt(xt.internal.getWidth(e)-2)+" "+zt(xt.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(zt(r.x1.x)+" "+zt(r.x1.y)+" m"),i.push(zt(r.x2.x)+" "+zt(r.x2.y)+" l"),i.push(zt(r.x4.x)+" "+zt(r.x4.y)+" m"),i.push(zt(r.x3.x)+" "+zt(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Gi(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+zt(xt.internal.getWidth(e))+" "+zt(xt.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};xt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=xt.internal.getWidth(e),r=xt.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},xt.internal.getWidth=function(e){var t=0;return Qt(e)==="object"&&(t=Sg(e.Rect[2])),t},xt.internal.getHeight=function(e){var t=0;return Qt(e)==="object"&&(t=Sg(e.Rect[3])),t};var JN=yn.addField=function(e){if(WN(this,e),!(e instanceof Fi))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};yn.AcroFormChoiceField=Ko,yn.AcroFormListBox=Xo,yn.AcroFormComboBox=Zo,yn.AcroFormEditBox=ou,yn.AcroFormButton=Jn,yn.AcroFormPushButton=lu,yn.AcroFormRadioButton=el,yn.AcroFormCheckBox=cu,yn.AcroFormTextField=Ua,yn.AcroFormPasswordField=du,yn.AcroFormAppearance=xt,yn.AcroForm={ChoiceField:Ko,ListBox:Xo,ComboBox:Zo,EditBox:ou,Button:Jn,PushButton:lu,RadioButton:el,CheckBox:cu,TextField:Ua,PasswordField:du,Appearance:xt},wt.AcroForm={ChoiceField:Ko,ListBox:Xo,ComboBox:Zo,EditBox:ou,Button:Jn,PushButton:lu,RadioButton:el,CheckBox:cu,TextField:Ua,PasswordField:du,Appearance:xt};function N2(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(M,k){var P,R,T,F,re,q=t;if((k=k||t)==="RGBA"||M.data!==void 0&&M.data instanceof Uint8ClampedArray&&"height"in M&&"width"in M)return"RGBA";if(ce(M))for(re in r)for(T=r[re],P=0;P<T.length;P+=1){for(F=!0,R=0;R<T[P].length;R+=1)if(T[P][R]!==void 0&&T[P][R]!==M[R]){F=!1;break}if(F===!0){q=re;break}}else for(re in r)for(T=r[re],P=0;P<T.length;P+=1){for(F=!0,R=0;R<T[P].length;R+=1)if(T[P][R]!==void 0&&T[P][R]!==M.charCodeAt(R)){F=!1;break}if(F===!0){q=re;break}}return q===t&&k!==t&&(q=k),q},s=function M(k){for(var P=this.internal.write,R=this.internal.putStream,T=(0,this.internal.getFilters)();T.indexOf("FlateEncode")!==-1;)T.splice(T.indexOf("FlateEncode"),1);k.objectId=this.internal.newObject();var F=[];if(F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Image"}),F.push({key:"Width",value:k.width}),F.push({key:"Height",value:k.height}),k.colorSpace===j.INDEXED?F.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(k.palette.length/3-1)+" "+("sMask"in k&&k.sMask!==void 0?k.objectId+2:k.objectId+1)+" 0 R]"}):(F.push({key:"ColorSpace",value:"/"+k.colorSpace}),k.colorSpace===j.DEVICE_CMYK&&F.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),F.push({key:"BitsPerComponent",value:k.bitsPerComponent}),"decodeParameters"in k&&k.decodeParameters!==void 0&&F.push({key:"DecodeParms",value:"<<"+k.decodeParameters+">>"}),"transparency"in k&&Array.isArray(k.transparency)){for(var re="",q=0,le=k.transparency.length;q<le;q++)re+=k.transparency[q]+" "+k.transparency[q]+" ";F.push({key:"Mask",value:"["+re+"]"})}k.sMask!==void 0&&F.push({key:"SMask",value:k.objectId+1+" 0 R"});var oe=k.filter!==void 0?["/"+k.filter]:void 0;if(R({data:k.data,additionalKeyValues:F,alreadyAppliedFilters:oe,objectId:k.objectId}),P("endobj"),"sMask"in k&&k.sMask!==void 0){var Pe="/Predictor "+k.predictor+" /Colors 1 /BitsPerComponent "+k.bitsPerComponent+" /Columns "+k.width,z={width:k.width,height:k.height,colorSpace:"DeviceGray",bitsPerComponent:k.bitsPerComponent,decodeParameters:Pe,data:k.sMask};"filter"in k&&(z.filter=k.filter),M.call(this,z)}if(k.colorSpace===j.INDEXED){var U=this.internal.newObject();R({data:O(new Uint8Array(k.palette)),objectId:U}),P("endobj")}},a=function(){var M=this.internal.collections.addImage_images;for(var k in M)s.call(this,M[k])},l=function(){var M,k=this.internal.collections.addImage_images,P=this.internal.write;for(var R in k)P("/I"+(M=k[R]).index,M.objectId,"0","R")},d=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",l))},c=function(){var M=this.internal.collections.addImage_images;return d.call(this),M},h=function(){return Object.keys(this.internal.collections.addImage_images).length},x=function(M){return typeof e["process"+M.toUpperCase()]=="function"},v=function(M){return Qt(M)==="object"&&M.nodeType===1},y=function(M,k){if(M.nodeName==="IMG"&&M.hasAttribute("src")){var P=""+M.getAttribute("src");if(P.indexOf("data:image/")===0)return xc(unescape(P).split("base64,").pop());var R=e.loadFile(P,!0);if(R!==void 0)return R}if(M.nodeName==="CANVAS"){if(M.width===0||M.height===0)throw new Error("Given canvas must have data. Canvas width: "+M.width+", height: "+M.height);var T;switch(k){case"PNG":T="image/png";break;case"WEBP":T="image/webp";break;case"JPEG":case"JPG":default:T="image/jpeg"}return xc(M.toDataURL(T,1).split("base64,").pop())}},m=function(M){var k=this.internal.collections.addImage_images;if(k){for(var P in k)if(M===k[P].alias)return k[P]}},w=function(M,k,P){return M||k||(M=-96,k=-96),M<0&&(M=-1*P.width*72/M/this.internal.scaleFactor),k<0&&(k=-1*P.height*72/k/this.internal.scaleFactor),M===0&&(M=k*P.width/P.height),k===0&&(k=M*P.height/P.width),[M,k]},S=function(M,k,P,R,T,F){var re=w.call(this,P,R,T),q=this.internal.getCoordinateString,le=this.internal.getVerticalCoordinateString,oe=c.call(this);if(P=re[0],R=re[1],oe[T.index]=T,F){F*=Math.PI/180;var Pe=Math.cos(F),z=Math.sin(F),U=function(G){return G.toFixed(4)},Q=[U(Pe),U(z),U(-1*z),U(Pe),0,0,"cm"]}this.internal.write("q"),F?(this.internal.write([1,"0","0",1,q(M),le(k+R),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([q(P),"0","0",q(R),"0","0","cm"].join(" "))):this.internal.write([q(P),"0","0",q(R),q(M),le(k+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+T.index+" Do"),this.internal.write("Q")},j=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var f=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(M){var k,P,R=0;if(typeof M=="string")for(P=M.length,k=0;k<P;k++)R=(R<<5)-R+M.charCodeAt(k),R|=0;else if(ce(M))for(P=M.byteLength/2,k=0;k<P;k++)R=(R<<5)-R+M[k],R|=0;return R},C=e.__addimage__.validateStringAsBase64=function(M){(M=M||"").toString().trim();var k=!0;return M.length===0&&(k=!1),M.length%4!=0&&(k=!1),/^[A-Za-z0-9+/]+$/.test(M.substr(0,M.length-2))===!1&&(k=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(M.substr(-2))===!1&&(k=!1),k},V=e.__addimage__.extractImageFromDataUrl=function(M){if(M==null||!(M=M.trim()).startsWith("data:"))return null;var k=M.indexOf(",");return k<0?null:M.substring(0,k).trim().endsWith("base64")?M.substring(k+1):null},ee=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(M){return ee()&&M instanceof ArrayBuffer};var ce=e.__addimage__.isArrayBufferView=function(M){return ee()&&typeof Uint32Array<"u"&&(M instanceof Int8Array||M instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&M instanceof Uint8ClampedArray||M instanceof Int16Array||M instanceof Uint16Array||M instanceof Int32Array||M instanceof Uint32Array||M instanceof Float32Array||M instanceof Float64Array)},ne=e.__addimage__.binaryStringToUint8Array=function(M){for(var k=M.length,P=new Uint8Array(k),R=0;R<k;R++)P[R]=M.charCodeAt(R);return P},O=e.__addimage__.arrayBufferToBinaryString=function(M){for(var k="",P=ce(M)?M:new Uint8Array(M),R=0;R<P.length;R+=8192)k+=String.fromCharCode.apply(null,P.subarray(R,R+8192));return k};e.addImage=function(){var M,k,P,R,T,F,re,q,le;if(typeof arguments[1]=="number"?(k=t,P=arguments[1],R=arguments[2],T=arguments[3],F=arguments[4],re=arguments[5],q=arguments[6],le=arguments[7]):(k=arguments[1],P=arguments[2],R=arguments[3],T=arguments[4],F=arguments[5],re=arguments[6],q=arguments[7],le=arguments[8]),Qt(M=arguments[0])==="object"&&!v(M)&&"imageData"in M){var oe=M;M=oe.imageData,k=oe.format||k||t,P=oe.x||P||0,R=oe.y||R||0,T=oe.w||oe.width||T,F=oe.h||oe.height||F,re=oe.alias||re,q=oe.compression||q,le=oe.rotation||oe.angle||le}var Pe=this.internal.getFilters();if(q===void 0&&Pe.indexOf("FlateEncode")!==-1&&(q="SLOW"),isNaN(P)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var z=J.call(this,M,k,re,q);return S.call(this,P,R,T,F,z,le),this};var J=function(M,k,P,R){var T,F,re;if(typeof M=="string"&&i(M)===t){M=unescape(M);var q=te(M,!1);(q!==""||(q=e.loadFile(M,!0))!==void 0)&&(M=q)}if(v(M)&&(M=y(M,k)),k=i(M,k),!x(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(((re=P)==null||re.length===0)&&(P=function(le){return typeof le=="string"||ce(le)?N(le):ce(le.data)?N(le.data):null}(M)),(T=m.call(this,P))||(ee()&&(M instanceof Uint8Array||k==="RGBA"||(F=M,M=ne(M))),T=this["process"+k.toUpperCase()](M,h.call(this),P,function(le){return le&&typeof le=="string"&&(le=le.toUpperCase()),le in e.image_compression?le:f.NONE}(R),F)),!T)throw new Error("An unknown error occurred whilst processing the image.");return T},te=e.__addimage__.convertBase64ToBinaryString=function(M,k){k=typeof k!="boolean"||k;var P,R="";if(typeof M=="string"){var T;P=(T=V(M))!==null&&T!==void 0?T:M;try{R=xc(P)}catch(F){if(k)throw C(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+F.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return R};e.getImageProperties=function(M){var k,P,R="";if(v(M)&&(M=y(M)),typeof M=="string"&&i(M)===t&&((R=te(M,!1))===""&&(R=e.loadFile(M)||""),M=R),P=i(M),!x(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(!ee()||M instanceof Uint8Array||(M=ne(M)),!(k=this["process"+P.toUpperCase()](M)))throw new Error("An unknown error occurred whilst processing the image");return k.fileType=P,k}})(wt.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};wt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,s,a,l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),h=r.pageContext.annotations,x=!1,v=0;v<h.length&&!x;v++)switch((i=h[v]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(x=!0);break;case"reference":case"text":case"freetext":x=!0}if(x!=0){this.internal.write("/Annots [");for(var y=0;y<h.length;y++){i=h[y];var m=this.internal.pdfEscape,w=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var S=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),f=this.internal.getEncryptor(S.objId),N=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y)+"] ")+"/Contents ("+m(f(i.contents))+")",a+=" /Popup "+j.objId+" 0 R",a+=" /P "+c.objId+" 0 R",a+=" /T ("+m(f(N))+") >>",S.content=a;var C=S.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+l(i.bounds.x+30)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+d(i.bounds.y)+"] ")+" /Parent "+C,i.open&&(a+=" /Open true"),a+=" >>",j.content=a,this.internal.write(S.objId,"0 R",j.objId,"0 R");break;case"freetext":s="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y+i.bounds.h)+"] ";var V=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(w(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var ee=this.annotations._nameMap[i.options.name];i.options.pageNumber=ee.page,i.options.top=ee.y}else i.options.top||(i.options.top=0);if(s="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(w(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var ce=d(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+ce+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,s,a,l){var d=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:c(r),y:h(i),w:c(r+s),h:h(i+a)},options:l,type:"link"})},e.textWithLink=function(r,i,s,a){var l,d,c=this.getTextWidth(r),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var x=this.splitTextToSize(r,d).length;l=Math.ceil(h*x)}else d=c,l=h;return this.text(r,i,s,a),s+=.2*h,a.align==="center"&&(i-=c/2),a.align==="right"&&(i-=c),this.link(i,s-h,d,l,a),c},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(wt.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(S){return t[S.charCodeAt(0)]!==void 0},l=e.__arabicParser__.isArabicLetter=function(S){return typeof S=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(S)},d=e.__arabicParser__.isArabicEndLetter=function(S){return l(S)&&a(S)&&t[S.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(S){return l(S)&&s.indexOf(S.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(S){return l(S)&&a(S)&&t[S.charCodeAt(0)].length>=1};var h=e.__arabicParser__.arabicLetterHasFinalForm=function(S){return l(S)&&a(S)&&t[S.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(S){return l(S)&&a(S)&&t[S.charCodeAt(0)].length>=3};var x=e.__arabicParser__.arabicLetterHasMedialForm=function(S){return l(S)&&a(S)&&t[S.charCodeAt(0)].length==4},v=e.__arabicParser__.resolveLigatures=function(S){var j=0,f=r,N="",C=0;for(j=0;j<S.length;j+=1)f[S.charCodeAt(j)]!==void 0?(C++,typeof(f=f[S.charCodeAt(j)])=="number"&&(N+=String.fromCharCode(f),f=r,C=0),j===S.length-1&&(f=r,N+=S.charAt(j-(C-1)),j-=C-1,C=0)):(f=r,N+=S.charAt(j-C),j-=C,C=0);return N};e.__arabicParser__.isArabicDiacritic=function(S){return S!==void 0&&i[S.charCodeAt(0)]!==void 0};var y=e.__arabicParser__.getCorrectForm=function(S,j,f){return l(S)?a(S)===!1?-1:!h(S)||!l(j)&&!l(f)||!l(f)&&d(j)||d(S)&&!l(j)||d(S)&&c(j)||d(S)&&d(j)?0:x(S)&&l(j)&&!d(j)&&l(f)&&h(f)?3:d(S)||!l(f)?1:2:-1},m=function(S){var j=0,f=0,N=0,C="",V="",ee="",ce=(S=S||"").split("\\s+"),ne=[];for(j=0;j<ce.length;j+=1){for(ne.push(""),f=0;f<ce[j].length;f+=1)C=ce[j][f],V=ce[j][f-1],ee=ce[j][f+1],l(C)?(N=y(C,V,ee),ne[j]+=N!==-1?String.fromCharCode(t[C.charCodeAt(0)][N]):C):ne[j]+=C;ne[j]=v(ne[j])}return ne.join(" ")},w=e.__arabicParser__.processArabic=e.processArabic=function(){var S,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,f=[];if(Array.isArray(j)){var N=0;for(f=[],N=0;N<j.length;N+=1)Array.isArray(j[N])?f.push([m(j[N][0]),j[N][1],j[N][2]]):f.push([m(j[N])]);S=f}else S=m(j);return typeof arguments[0]=="string"?S:(arguments[0].text=S,arguments[0])};e.events.push(["preProcessText",w])}(wt.API),wt.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(d){r=d}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(d){s=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(d){l=d}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var s;if((r=r||"2d")!=="2d")return null;for(s in i)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=i[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(wt.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(S){c=S}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(S){h=S}});var x=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return x},set:function(S){x=S}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(S){v=S}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(S){y=S}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(S){m=S}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(S){w=S}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return i.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,h){i.call(this);var x=(h=h||{}).fontSize||this.getFontSize(),v=h.font||this.getFont(),y=h.scaleFactor||this.internal.scaleFactor,m=0,w=0,S=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var f=h.maxWidth;f>0?typeof c=="string"?c=this.splitTextToSize(c,f):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(C,V){return C.concat(j.splitTextToSize(V,f))},[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)m<(S=this.getStringUnitWidth(c[N],{font:v})*x)&&(m=S);return m!==0&&(w=c.length),{w:m/=y,h:Math.max((w*x*this.getLineHeightFactor()-x*(this.getLineHeightFactor()-1))/y,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=e.cell=function(){var c;c=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var h=this.internal.__cell__.lastCell,x=this.internal.__cell__.padding,v=this.internal.__cell__.margins||t,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===c.lineNumber?(c.x=(h.x||0)+(h.width||0),c.y=h.y||0):h.y+h.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,m&&y&&(this.printHeaderRow(c.lineNumber,!0),c.y+=y[0].height)):c.y=h.y+h.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-x,c.y+x,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+x,{align:"center",baseline:"top",maxWidth:c.width-x-x}):this.text(c.text,c.x+x,c.y+x,{align:"left",baseline:"top",maxWidth:c.width-x-x})),this.internal.__cell__.lastCell=c,this};e.table=function(c,h,x,v,y){if(i.call(this),!x)throw new Error("No data for PDF table.");var m,w,S,j,f=[],N=[],C=[],V={},ee={},ce=[],ne=[],O=(y=y||{}).autoSize||!1,J=y.printHeaders!==!1,te=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,M=y.margins||Object.assign({width:this.getPageWidth()},t),k=typeof y.padding=="number"?y.padding:3,P=y.headerBackgroundColor||"#c8c8c8",R=y.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=J,this.internal.__cell__.margins=M,this.internal.__cell__.table_font_size=te,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=P,this.internal.__cell__.headerTextColor=R,this.setFontSize(te),v==null)N=f=Object.keys(x[0]),C=f.map(function(){return"left"});else if(Array.isArray(v)&&Qt(v[0])==="object")for(f=v.map(function(oe){return oe.name}),N=v.map(function(oe){return oe.prompt||oe.name||""}),C=v.map(function(oe){return oe.align||"left"}),m=0;m<v.length;m+=1)ee[v[m].name]=v[m].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(N=f=v,C=f.map(function(){return"left"}));if(O||Array.isArray(v)&&typeof v[0]=="string")for(m=0;m<f.length;m+=1){for(V[j=f[m]]=x.map(function(oe){return oe[j]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(N[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=V[j],this.setFont(void 0,"normal"),S=0;S<w.length;S+=1)ce.push(this.getTextDimensions(w[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[j]=Math.max.apply(null,ce)+k+k,ce=[]}if(J){var T={};for(m=0;m<f.length;m+=1)T[f[m]]={},T[f[m]].text=N[m],T[f[m]].align=C[m];var F=d.call(this,T,ee);ne=f.map(function(oe){return new a(c,h,ee[oe],F,T[oe].text,void 0,T[oe].align)}),this.setTableHeaderRow(ne),this.printHeaderRow(1,!1)}var re=v.reduce(function(oe,Pe){return oe[Pe.name]=Pe.align,oe},{});for(m=0;m<x.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:x[m]},this);var q=d.call(this,x[m],ee);for(S=0;S<f.length;S+=1){var le=x[m][f[S]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:S,data:le},this),l.call(this,new a(c,h,ee[f[S]],q,le,m+2,re[f[S]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=h,this};var d=function(c,h){var x=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(c).map(function(m){var w=c[m];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,h[m]-x-x)},this).map(function(m){return this.getLineHeightFactor()*m.length*v/y+x+x},this).reduce(function(m,w){return Math.max(m,w)},0)};e.setTableHeaderRow=function(c){i.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,h){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var x;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){x=this.internal.__cell__.tableHeaderRow[m].clone(),h&&(x.y=this.internal.__cell__.margins.top||0,y.push(x)),x.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,x),this.setTextColor(w)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}}(wt.API);var b2={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},j2=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],bp=N2(j2),w2=[100,200,300,400,500,600,700,800,900],YN=N2(w2);function jp(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return b2[a=a||"normal"]?a:"normal"}(e.style),i=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(a){return typeof bp[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,i].join(" ")}}}function Cg(e,t,r,i){var s;for(s=r;s>=0&&s<t.length;s+=i)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=i)if(e[t[s]])return e[t[s]]}var QN={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kg={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ag(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function KN(e,t,r){for(var i=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},QN,r.genericFontFamilies||{}),a=null,l=null,d=0;d<t.length;++d)if(s[(a=jp(t[d])).family]&&(a.family=s[a.family]),e.hasOwnProperty(a.family)){l=e[a.family];break}if(!(l=l||e[i]))throw new Error("Could not find a font-family for the rule '"+Ag(a)+"' and default family '"+i+"'.");if(l=function(c,h){if(h[c])return h[c];var x=bp[c],v=x<=bp.normal?-1:1,y=Cg(h,j2,x,v);if(!y)throw new Error("Could not find a matching font-stretch value for "+c);return y}(a.stretch,l),l=function(c,h){if(h[c])return h[c];for(var x=b2[c],v=0;v<x.length;++v)if(h[x[v]])return h[x[v]];throw new Error("Could not find a matching font-style for "+c)}(a.style,l),!(l=function(c,h){if(h[c])return h[c];if(c===400&&h[500])return h[500];if(c===500&&h[400])return h[400];var x=YN[c],v=Cg(h,w2,x,c<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+c);return v}(a.weight,l)))throw new Error("Failed to resolve a font for the rule '"+Ag(a)+"'.");return l}function Lg(e){return e.trimLeft()}function XN(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function ZN(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Vd,Pg,zg,fh=["times"];(function(e){var t,r,i,s,a,l,d,c,h,x=function(z){return z=z||{},this.isStrokeTransparent=z.isStrokeTransparent||!1,this.strokeOpacity=z.strokeOpacity||1,this.strokeStyle=z.strokeStyle||"#000000",this.fillStyle=z.fillStyle||"#000000",this.isFillTransparent=z.isFillTransparent||!1,this.fillOpacity=z.fillOpacity||1,this.font=z.font||"10px sans-serif",this.textBaseline=z.textBaseline||"alphabetic",this.textAlign=z.textAlign||"left",this.lineWidth=z.lineWidth||1,this.lineJoin=z.lineJoin||"miter",this.lineCap=z.lineCap||"butt",this.path=z.path||[],this.transform=z.transform!==void 0?z.transform.clone():new c,this.globalCompositeOperation=z.globalCompositeOperation||"normal",this.globalAlpha=z.globalAlpha||1,this.clip_path=z.clip_path||[],this.currentPoint=z.currentPoint||new l,this.miterLimit=z.miterLimit||10,this.lastPoint=z.lastPoint||new l,this.lineDashOffset=z.lineDashOffset||0,this.lineDash=z.lineDash||[],this.margin=z.margin||[0,0,0,0],this.prevPageLastElemOffset=z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof z.ignoreClearRect!="boolean"||z.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new v(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,d=this.internal.Rectangle,c=this.internal.Matrix,h=new x}]);var v=function(z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var U=z;Object.defineProperty(this,"pdf",{get:function(){return U}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(ke){Q=!!ke}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(ke){G=!!ke}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(ke){isNaN(ke)||(ae=ke)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(ke){isNaN(ke)||(he=ke)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(ke){var I;typeof ke=="number"?I=[ke,ke,ke,ke]:((I=new Array(4))[0]=ke[0],I[1]=ke.length>=2?ke[1]:I[0],I[2]=ke.length>=3?ke[2]:I[0],I[3]=ke.length>=4?ke[3]:I[1]),h.margin=I}});var xe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return xe},set:function(ke){xe=ke}});var we=0;Object.defineProperty(this,"lastBreak",{get:function(){return we},set:function(ke){we=ke}});var Be=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Be},set:function(ke){Be=ke}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(ke){ke instanceof x&&(h=ke)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(ke){h.path=ke}});var He=[];Object.defineProperty(this,"ctxStack",{get:function(){return He},set:function(ke){He=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var I;I=y(ke),this.ctx.fillStyle=I.style,this.ctx.isFillTransparent=I.a===0,this.ctx.fillOpacity=I.a,this.pdf.setFillColor(I.r,I.g,I.b,{a:I.a}),this.pdf.setTextColor(I.r,I.g,I.b,{a:I.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var I=y(ke);this.ctx.strokeStyle=I.style,this.ctx.isStrokeTransparent=I.a===0,this.ctx.strokeOpacity=I.a,I.a===0?this.pdf.setDrawColor(255,255,255):(I.a,this.pdf.setDrawColor(I.r,I.g,I.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var Qe=null;function Ke(ke,I){if(Qe===null){var je=function(be){var ie=[];return Object.keys(be).forEach(function(ue){be[ue].forEach(function(Ae){var Ie=null;switch(Ae){case"bold":Ie={family:ue,weight:"bold"};break;case"italic":Ie={family:ue,style:"italic"};break;case"bolditalic":Ie={family:ue,weight:"bold",style:"italic"};break;case"":case"normal":Ie={family:ue}}Ie!==null&&(Ie.ref={name:ue,style:Ae},ie.push(Ie))})}),ie}(ke.getFontList());Qe=function(be){for(var ie={},ue=0;ue<be.length;++ue){var Ae=jp(be[ue]),Ie=Ae.family,Ge=Ae.stretch,it=Ae.style,A=Ae.weight;ie[Ie]=ie[Ie]||{},ie[Ie][Ge]=ie[Ie][Ge]||{},ie[Ie][Ge][it]=ie[Ie][Ge][it]||{},ie[Ie][Ge][it][A]=Ae}return ie}(je.concat(I))}return Qe}var tt=null;Object.defineProperty(this,"fontFaces",{get:function(){return tt},set:function(ke){Qe=null,tt=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var I;if(this.ctx.font=ke,(I=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var je=I[1];I[2];var be=I[3],ie=I[4];I[5];var ue=I[6],Ae=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ie)[2];ie=Math.floor(Ae==="px"?parseFloat(ie)*this.pdf.internal.scaleFactor:Ae==="em"?parseFloat(ie)*this.pdf.getFontSize():parseFloat(ie)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ie);var Ie=function(Fe){var De,Oe,_t=[],mt=Fe.trim();if(mt==="")return fh;if(mt in kg)return[kg[mt]];for(;mt!=="";){switch(Oe=null,De=(mt=Lg(mt)).charAt(0)){case'"':case"'":Oe=XN(mt.substring(1),De);break;default:Oe=ZN(mt)}if(Oe===null||(_t.push(Oe[0]),(mt=Lg(Oe[1]))!==""&&mt.charAt(0)!==","))return fh;mt=mt.replace(/^,/,"")}return _t}(ue);if(this.fontFaces){var Ge=KN(Ke(this.pdf,this.fontFaces),Ie.map(function(Fe){return{family:Fe,stretch:"normal",weight:be,style:je}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var it="";(be==="bold"||parseInt(be,10)>=700||je==="bold")&&(it="bold"),je==="italic"&&(it+="italic"),it.length===0&&(it="normal");for(var A="",H={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<Ie.length;ye++){if(this.pdf.internal.getFont(Ie[ye],it,{noFallback:!0,disableWarning:!0})!==void 0){A=Ie[ye];break}if(it==="bolditalic"&&this.pdf.internal.getFont(Ie[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)A=Ie[ye],it="bold";else if(this.pdf.internal.getFont(Ie[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){A=Ie[ye],it="normal";break}}if(A===""){for(var Je=0;Je<Ie.length;Je++)if(H[Ie[Je]]){A=H[Ie[Je]];break}}A=A===""?"Times":A,this.pdf.setFont(A,it)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,Pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,Pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};v.prototype.setLineDash=function(z){this.lineDash=z},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){V.call(this,"fill",!1)},v.prototype.stroke=function(){V.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(z,U){if(isNaN(z)||isNaN(U))throw en.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new l(z,U));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(z,U)},v.prototype.closePath=function(){var z=new l(0,0),U=0;for(U=this.path.length-1;U!==-1;U--)if(this.path[U].type==="begin"&&Qt(this.path[U+1])==="object"&&typeof this.path[U+1].x=="number"){z=new l(this.path[U+1].x,this.path[U+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(z.x,z.y)},v.prototype.lineTo=function(z,U){if(isNaN(z)||isNaN(U))throw en.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new l(z,U));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new l(Q.x,Q.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},v.prototype.quadraticCurveTo=function(z,U,Q,G){if(isNaN(Q)||isNaN(G)||isNaN(z)||isNaN(U))throw en.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new l(Q,G)),he=this.ctx.transform.applyToPoint(new l(z,U));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new l(ae.x,ae.y)},v.prototype.bezierCurveTo=function(z,U,Q,G,ae,he){if(isNaN(ae)||isNaN(he)||isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G))throw en.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var xe=this.ctx.transform.applyToPoint(new l(ae,he)),we=this.ctx.transform.applyToPoint(new l(z,U)),Be=this.ctx.transform.applyToPoint(new l(Q,G));this.path.push({type:"bct",x1:we.x,y1:we.y,x2:Be.x,y2:Be.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},v.prototype.arc=function(z,U,Q,G,ae,he){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G)||isNaN(ae))throw en.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var xe=this.ctx.transform.applyToPoint(new l(z,U));z=xe.x,U=xe.y;var we=this.ctx.transform.applyToPoint(new l(0,Q)),Be=this.ctx.transform.applyToPoint(new l(0,0));Q=Math.sqrt(Math.pow(we.x-Be.x,2)+Math.pow(we.y-Be.y,2))}Math.abs(ae-G)>=2*Math.PI&&(G=0,ae=2*Math.PI),this.path.push({type:"arc",x:z,y:U,radius:Q,startAngle:G,endAngle:ae,counterclockwise:he})},v.prototype.arcTo=function(z,U,Q,G,ae){throw new Error("arcTo not implemented.")},v.prototype.rect=function(z,U,Q,G){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G))throw en.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(z,U),this.lineTo(z+Q,U),this.lineTo(z+Q,U+G),this.lineTo(z,U+G),this.lineTo(z,U),this.lineTo(z+Q,U),this.lineTo(z,U)},v.prototype.fillRect=function(z,U,Q,G){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G))throw en.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(z,U,Q,G),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},v.prototype.strokeRect=function(z,U,Q,G){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G))throw en.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(z,U,Q,G),this.stroke())},v.prototype.clearRect=function(z,U,Q,G){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G))throw en.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(z,U,Q,G))},v.prototype.save=function(z){z=typeof z!="boolean"||z;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(U),z){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new x(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},v.prototype.restore=function(z){z=typeof z!="boolean"||z;for(var U=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(U),z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(z){var U,Q,G,ae;if(z.isCanvasGradient===!0&&(z=z.getColor()),!z)return{r:0,g:0,b:0,a:0,style:z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(z))U=0,Q=0,G=0,ae=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(z);if(he!==null)U=parseInt(he[1]),Q=parseInt(he[2]),G=parseInt(he[3]),ae=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(z))!==null)U=parseInt(he[1]),Q=parseInt(he[2]),G=parseInt(he[3]),ae=parseFloat(he[4]);else{if(ae=1,typeof z=="string"&&z.charAt(0)!=="#"){var xe=new p2(z);z=xe.ok?xe.toHex():"#000000"}z.length===4?(U=z.substring(1,2),U+=U,Q=z.substring(2,3),Q+=Q,G=z.substring(3,4),G+=G):(U=z.substring(1,3),Q=z.substring(3,5),G=z.substring(5,7)),U=parseInt(U,16),Q=parseInt(Q,16),G=parseInt(G,16)}}return{r:U,g:Q,b:G,a:ae,style:z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(z,U,Q,G){if(isNaN(U)||isNaN(Q)||typeof z!="string")throw en.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!m.call(this)){var ae=q(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;k.call(this,{text:z,x:U,y:Q,scale:he,angle:ae,align:this.textAlign,maxWidth:G})}},v.prototype.strokeText=function(z,U,Q,G){if(isNaN(U)||isNaN(Q)||typeof z!="string")throw en.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){G=isNaN(G)?void 0:G;var ae=q(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;k.call(this,{text:z,x:U,y:Q,scale:he,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:G})}},v.prototype.measureText=function(z){if(typeof z!="string")throw en.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var U=this.pdf,Q=this.pdf.internal.scaleFactor,G=U.internal.getFontSize(),ae=U.getStringUnitWidth(z)*G/U.internal.scaleFactor,he=function(xe){var we=(xe=xe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return we}}),this};return new he({width:ae*=Math.round(96*Q/72*1e4)/1e4})},v.prototype.scale=function(z,U){if(isNaN(z)||isNaN(U))throw en.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new c(z,0,0,U,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},v.prototype.rotate=function(z){if(isNaN(z))throw en.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var U=new c(Math.cos(z),Math.sin(z),-Math.sin(z),Math.cos(z),0,0);this.ctx.transform=this.ctx.transform.multiply(U)},v.prototype.translate=function(z,U){if(isNaN(z)||isNaN(U))throw en.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new c(1,0,0,1,z,U);this.ctx.transform=this.ctx.transform.multiply(Q)},v.prototype.transform=function(z,U,Q,G,ae,he){if(isNaN(z)||isNaN(U)||isNaN(Q)||isNaN(G)||isNaN(ae)||isNaN(he))throw en.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var xe=new c(z,U,Q,G,ae,he);this.ctx.transform=this.ctx.transform.multiply(xe)},v.prototype.setTransform=function(z,U,Q,G,ae,he){z=isNaN(z)?1:z,U=isNaN(U)?0:U,Q=isNaN(Q)?0:Q,G=isNaN(G)?1:G,ae=isNaN(ae)?0:ae,he=isNaN(he)?0:he,this.ctx.transform=new c(z,U,Q,G,ae,he)};var S=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(z,U,Q,G,ae,he,xe,we,Be){var He=this.pdf.getImageProperties(z),Qe=1,Ke=1,tt=1,ke=1;G!==void 0&&we!==void 0&&(tt=we/G,ke=Be/ae,Qe=He.width/G*we/G,Ke=He.height/ae*Be/ae),he===void 0&&(he=U,xe=Q,U=0,Q=0),G!==void 0&&we===void 0&&(we=G,Be=ae),G===void 0&&we===void 0&&(we=He.width,Be=He.height);for(var I,je=this.ctx.transform.decompose(),be=q(je.rotate.shx),ie=new c,ue=(ie=(ie=(ie=ie.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new d(he-U*tt,xe-Q*ke,G*Qe,ae*Ke)),Ae=j.call(this,ue),Ie=[],Ge=0;Ge<Ae.length;Ge+=1)Ie.indexOf(Ae[Ge])===-1&&Ie.push(Ae[Ge]);if(C(Ie),this.autoPaging)for(var it=Ie[0],A=Ie[Ie.length-1],H=it;H<A+1;H++){this.pdf.setPage(H);var ye=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=H===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],De=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Oe=H===1?0:Fe+(H-2)*De;if(this.ctx.clip_path.length!==0){var _t=this.path;I=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(I,this.posX+this.margin[3],-Oe+Je+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=_t}var mt=JSON.parse(JSON.stringify(ue));mt=N([mt],this.posX+this.margin[3],-Oe+Je+this.ctx.prevPageLastElemOffset)[0];var Ct=(H>it||H<A)&&S.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ye,De,null).clip().discardPath()),this.pdf.addImage(z,"JPEG",mt.x,mt.y,mt.w,mt.h,null,null,be),Ct&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(z,"JPEG",ue.x,ue.y,ue.w,ue.h,null,null,be)};var j=function(z,U,Q){var G=[];U=U||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(z.type){default:case"mt":case"lt":G.push(Math.floor((z.y+ae)/Q)+1);break;case"arc":G.push(Math.floor((z.y+ae-z.radius)/Q)+1),G.push(Math.floor((z.y+ae+z.radius)/Q)+1);break;case"qct":var he=le(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x,z.y);G.push(Math.floor((he.y+ae)/Q)+1),G.push(Math.floor((he.y+he.h+ae)/Q)+1);break;case"bct":var xe=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,z.x1,z.y1,z.x2,z.y2,z.x,z.y);G.push(Math.floor((xe.y+ae)/Q)+1),G.push(Math.floor((xe.y+xe.h+ae)/Q)+1);break;case"rect":G.push(Math.floor((z.y+ae)/Q)+1),G.push(Math.floor((z.y+z.h+ae)/Q)+1)}for(var we=0;we<G.length;we+=1)for(;this.pdf.internal.getNumberOfPages()<G[we];)f.call(this);return G},f=function(){var z=this.fillStyle,U=this.strokeStyle,Q=this.font,G=this.lineCap,ae=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=z,this.strokeStyle=U,this.font=Q,this.lineCap=G,this.lineWidth=ae,this.lineJoin=he},N=function(z,U,Q){for(var G=0;G<z.length;G++)switch(z[G].type){case"bct":z[G].x2+=U,z[G].y2+=Q;case"qct":z[G].x1+=U,z[G].y1+=Q;case"mt":case"lt":case"arc":default:z[G].x+=U,z[G].y+=Q}return z},C=function(z){return z.sort(function(U,Q){return U-Q})},V=function(z,U){for(var Q,G,ae=this.fillStyle,he=this.strokeStyle,xe=this.lineCap,we=this.lineWidth,Be=Math.abs(we*this.ctx.transform.scaleX),He=this.lineJoin,Qe=JSON.parse(JSON.stringify(this.path)),Ke=JSON.parse(JSON.stringify(this.path)),tt=[],ke=0;ke<Ke.length;ke++)if(Ke[ke].x!==void 0)for(var I=j.call(this,Ke[ke]),je=0;je<I.length;je+=1)tt.indexOf(I[je])===-1&&tt.push(I[je]);for(var be=0;be<tt.length;be++)for(;this.pdf.internal.getNumberOfPages()<tt[be];)f.call(this);if(C(tt),this.autoPaging)for(var ie=tt[0],ue=tt[tt.length-1],Ae=ie;Ae<ue+1;Ae++){this.pdf.setPage(Ae),this.fillStyle=ae,this.strokeStyle=he,this.lineCap=xe,this.lineWidth=Be,this.lineJoin=He;var Ie=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Ae===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],A=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],H=Ae===1?0:it+(Ae-2)*A;if(this.ctx.clip_path.length!==0){var ye=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Q,this.posX+this.margin[3],-H+Ge+this.ctx.prevPageLastElemOffset),ee.call(this,z,!0),this.path=ye}if(G=JSON.parse(JSON.stringify(Qe)),this.path=N(G,this.posX+this.margin[3],-H+Ge+this.ctx.prevPageLastElemOffset),U===!1||Ae===0){var Je=(Ae>ie||Ae<ue)&&S.call(this);Je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ie,A,null).clip().discardPath()),ee.call(this,z,U),Je&&this.pdf.restoreGraphicsState()}this.lineWidth=we}else this.lineWidth=Be,ee.call(this,z,U),this.lineWidth=we;this.path=Qe},ee=function(z,U){if((z!=="stroke"||U||!w.call(this))&&(z==="stroke"||U||!m.call(this))){for(var Q,G,ae=[],he=this.path,xe=0;xe<he.length;xe++){var we=he[xe];switch(we.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:we,deltas:[],abs:[]});break;case"lt":var Be=ae.length;if(he[xe-1]&&!isNaN(he[xe-1].x)&&(Q=[we.x-he[xe-1].x,we.y-he[xe-1].y],Be>0)){for(;Be>=0;Be--)if(ae[Be-1].close!==!0&&ae[Be-1].begin!==!0){ae[Be-1].deltas.push(Q),ae[Be-1].abs.push(we);break}}break;case"bct":Q=[we.x1-he[xe-1].x,we.y1-he[xe-1].y,we.x2-he[xe-1].x,we.y2-he[xe-1].y,we.x-he[xe-1].x,we.y-he[xe-1].y],ae[ae.length-1].deltas.push(Q);break;case"qct":var He=he[xe-1].x+2/3*(we.x1-he[xe-1].x),Qe=he[xe-1].y+2/3*(we.y1-he[xe-1].y),Ke=we.x+2/3*(we.x1-we.x),tt=we.y+2/3*(we.y1-we.y),ke=we.x,I=we.y;Q=[He-he[xe-1].x,Qe-he[xe-1].y,Ke-he[xe-1].x,tt-he[xe-1].y,ke-he[xe-1].x,I-he[xe-1].y],ae[ae.length-1].deltas.push(Q);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(we)}}G=U?null:z==="stroke"?"stroke":"fill";for(var je=!1,be=0;be<ae.length;be++)if(ae[be].arc)for(var ie=ae[be].abs,ue=0;ue<ie.length;ue++){var Ae=ie[ue];Ae.type==="arc"?O.call(this,Ae.x,Ae.y,Ae.radius,Ae.startAngle,Ae.endAngle,Ae.counterclockwise,void 0,U,!je):P.call(this,Ae.x,Ae.y),je=!0}else if(ae[be].close===!0)this.pdf.internal.out("h"),je=!1;else if(ae[be].begin!==!0){var Ie=ae[be].start.x,Ge=ae[be].start.y;R.call(this,ae[be].deltas,Ie,Ge),je=!0}G&&J.call(this,G),U&&te.call(this)}},ce=function(z){var U=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=U*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return z-Q;case"top":return z+U-Q;case"hanging":return z+U-2*Q;case"middle":return z+U/2-Q;case"ideographic":return z;case"alphabetic":default:return z}},ne=function(z){return z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var z=function(){};return z.colorStops=[],z.addColorStop=function(U,Q){this.colorStops.push([U,Q])},z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},z.isCanvasGradient=!0,z},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var O=function(z,U,Q,G,ae,he,xe,we,Be){for(var He=F.call(this,Q,G,ae,he),Qe=0;Qe<He.length;Qe++){var Ke=He[Qe];Qe===0&&(Be?M.call(this,Ke.x1+z,Ke.y1+U):P.call(this,Ke.x1+z,Ke.y1+U)),T.call(this,z,U,Ke.x2,Ke.y2,Ke.x3,Ke.y3,Ke.x4,Ke.y4)}we?te.call(this):J.call(this,xe)},J=function(z){switch(z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},te=function(){this.pdf.clip(),this.pdf.discardPath()},M=function(z,U){this.pdf.internal.out(r(z)+" "+i(U)+" m")},k=function(z){var U;switch(z.align){case"right":case"end":U="right";break;case"center":U="center";break;case"left":case"start":default:U="left"}var Q=this.pdf.getTextDimensions(z.text),G=ce.call(this,z.y),ae=ne.call(this,G)-Q.h,he=this.ctx.transform.applyToPoint(new l(z.x,G)),xe=this.ctx.transform.decompose(),we=new c;we=(we=(we=we.multiply(xe.translate)).multiply(xe.skew)).multiply(xe.scale);for(var Be,He,Qe,Ke=this.ctx.transform.applyToRectangle(new d(z.x,G,Q.w,Q.h)),tt=we.applyToRectangle(new d(z.x,ae,Q.w,Q.h)),ke=j.call(this,tt),I=[],je=0;je<ke.length;je+=1)I.indexOf(ke[je])===-1&&I.push(ke[je]);if(C(I),this.autoPaging)for(var be=I[0],ie=I[I.length-1],ue=be;ue<ie+1;ue++){this.pdf.setPage(ue);var Ae=ue===1?this.posY+this.margin[0]:this.margin[0],Ie=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],it=Ge-this.margin[0],A=this.pdf.internal.pageSize.width-this.margin[1],H=A-this.margin[3],ye=ue===1?0:Ie+(ue-2)*it;if(this.ctx.clip_path.length!==0){var Je=this.path;Be=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Be,this.posX+this.margin[3],-1*ye+Ae),ee.call(this,"fill",!0),this.path=Je}var Fe=N([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-ye+Ae+this.ctx.prevPageLastElemOffset)[0];z.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*z.scale),Qe=this.lineWidth,this.lineWidth=Qe*z.scale);var De=this.autoPaging!=="text";if(De||Fe.y+Fe.h<=Ge){if(De||Fe.y>=Ae&&Fe.x<=A){var Oe=De?z.text:this.pdf.splitTextToSize(z.text,z.maxWidth||A-Fe.x)[0],_t=N([JSON.parse(JSON.stringify(Ke))],this.posX+this.margin[3],-ye+Ae+this.ctx.prevPageLastElemOffset)[0],mt=De&&(ue>be||ue<ie)&&S.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],H,it,null).clip().discardPath()),this.pdf.text(Oe,_t.x,_t.y,{angle:z.angle,align:U,renderingMode:z.renderingMode}),mt&&this.pdf.restoreGraphicsState()}}else Fe.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Fe.y);z.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Qe)}else z.scale>=.01&&(He=this.pdf.internal.getFontSize(),this.pdf.setFontSize(He*z.scale),Qe=this.lineWidth,this.lineWidth=Qe*z.scale),this.pdf.text(z.text,he.x+this.posX,he.y+this.posY,{angle:z.angle,align:U,renderingMode:z.renderingMode,maxWidth:z.maxWidth}),z.scale>=.01&&(this.pdf.setFontSize(He),this.lineWidth=Qe)},P=function(z,U,Q,G){Q=Q||0,G=G||0,this.pdf.internal.out(r(z+Q)+" "+i(U+G)+" l")},R=function(z,U,Q){return this.pdf.lines(z,U,Q,null,null)},T=function(z,U,Q,G,ae,he,xe,we){this.pdf.internal.out([t(s(Q+z)),t(a(G+U)),t(s(ae+z)),t(a(he+U)),t(s(xe+z)),t(a(we+U)),"c"].join(" "))},F=function(z,U,Q,G){for(var ae=2*Math.PI,he=Math.PI/2;U>Q;)U-=ae;var xe=Math.abs(Q-U);xe<ae&&G&&(xe=ae-xe);for(var we=[],Be=G?-1:1,He=U;xe>1e-5;){var Qe=He+Be*Math.min(xe,he);we.push(re.call(this,z,He,Qe)),xe-=Math.abs(Qe-He),He=Qe}return we},re=function(z,U,Q){var G=(Q-U)/2,ae=z*Math.cos(G),he=z*Math.sin(G),xe=ae,we=-he,Be=xe*xe+we*we,He=Be+xe*ae+we*he,Qe=4/3*(Math.sqrt(2*Be*He)-He)/(xe*he-we*ae),Ke=xe-Qe*we,tt=we+Qe*xe,ke=Ke,I=-tt,je=G+U,be=Math.cos(je),ie=Math.sin(je);return{x1:z*Math.cos(U),y1:z*Math.sin(U),x2:Ke*be-tt*ie,y2:Ke*ie+tt*be,x3:ke*be-I*ie,y3:ke*ie+I*be,x4:z*Math.cos(Q),y4:z*Math.sin(Q)}},q=function(z){return 180*z/Math.PI},le=function(z,U,Q,G,ae,he){var xe=z+.5*(Q-z),we=U+.5*(G-U),Be=ae+.5*(Q-ae),He=he+.5*(G-he),Qe=Math.min(z,ae,xe,Be),Ke=Math.max(z,ae,xe,Be),tt=Math.min(U,he,we,He),ke=Math.max(U,he,we,He);return new d(Qe,tt,Ke-Qe,ke-tt)},oe=function(z,U,Q,G,ae,he,xe,we){var Be,He,Qe,Ke,tt,ke,I,je,be,ie,ue,Ae,Ie,Ge,it=Q-z,A=G-U,H=ae-Q,ye=he-G,Je=xe-ae,Fe=we-he;for(He=0;He<41;He++)be=(I=(Qe=z+(Be=He/40)*it)+Be*((tt=Q+Be*H)-Qe))+Be*(tt+Be*(ae+Be*Je-tt)-I),ie=(je=(Ke=U+Be*A)+Be*((ke=G+Be*ye)-Ke))+Be*(ke+Be*(he+Be*Fe-ke)-je),He==0?(ue=be,Ae=ie,Ie=be,Ge=ie):(ue=Math.min(ue,be),Ae=Math.min(Ae,ie),Ie=Math.max(Ie,be),Ge=Math.max(Ge,ie));return new d(Math.round(ue),Math.round(Ae),Math.round(Ie-ue),Math.round(Ge-Ae))},Pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var z,U,Q=(z=this.ctx.lineDash,U=this.ctx.lineDashOffset,JSON.stringify({lineDash:z,lineDashOffset:U}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(wt.API),function(e){var t=function(a){var l,d,c,h,x,v,y,m,w,S;for(d=[],c=0,h=(a+=l="\0\0\0\0".slice(a.length%4||4)).length;h>c;c+=4)(x=(a.charCodeAt(c)<<24)+(a.charCodeAt(c+1)<<16)+(a.charCodeAt(c+2)<<8)+a.charCodeAt(c+3))!==0?(v=(x=((x=((x=((x=(x-(S=x%85))/85)-(w=x%85))/85)-(m=x%85))/85)-(y=x%85))/85)%85,d.push(v+33,y+33,m+33,w+33,S+33)):d.push(122);return function(j,f){for(var N=f;N>0;N--)j.pop()}(d,l.length),String.fromCharCode.apply(String,d)+"~>"},r=function(a){var l,d,c,h,x,v=String,y="length",m=255,w="charCodeAt",S="slice",j="replace";for(a[S](-2),a=a[S](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],h=0,x=(a+=l="uuuuu"[S](a[y]%5||5))[y];x>h;h+=5)d=52200625*(a[w](h)-33)+614125*(a[w](h+1)-33)+7225*(a[w](h+2)-33)+85*(a[w](h+3)-33)+(a[w](h+4)-33),c.push(m&d>>24,m&d>>16,m&d>>8,m&d);return function(f,N){for(var C=N;C>0;C--)f.pop()}(c,l[y]),v.fromCharCode.apply(v,c)},i=function(a){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),l.test(a)===!1)return"";for(var d="",c=0;c<a.length;c+=2)d+=String.fromCharCode("0x"+(a[c]+a[c+1]));return d},s=function(a){for(var l=new Uint8Array(a.length),d=a.length;d--;)l[d]=a.charCodeAt(d);return a=(l=gp(l)).reduce(function(c,h){return c+String.fromCharCode(h)},"")};e.processDataByFilters=function(a,l){var d=0,c=a||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(x){return("0"+x.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:c,reverseChain:h.reverse().join(" ")}}}(wt.API),function(e){e.loadFile=function(t,r,i){return function(s,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var d=void 0;try{d=function(c,h,x){var v=new XMLHttpRequest,y=0,m=function(w){var S=w.length,j=[],f=String.fromCharCode;for(y=0;y<S;y+=1)j.push(f(255&w.charCodeAt(y)));return j.join("")};if(v.open("GET",c,!h),v.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(v.onload=function(){v.status===200?x(m(this.responseText)):x(void 0)}),v.send(null),h&&v.status===200)return m(v.responseText)}(s,a,l)}catch{}return d}(t,r,i)},e.loadImageFile=e.loadFile}(wt.API),function(e){function t(){return(St.html2canvas?Promise.resolve(St.html2canvas):up(()=>import("./html2canvas.esm-e0a7d97b.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(St.DOMPurify?Promise.resolve(St.DOMPurify):up(()=>import("./purify.es-31816194.js"),[],import.meta.url)).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var i=function(l){var d=Qt(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},s=function(l,d){var c=document.createElement(l);for(var h in d.className&&(c.className=d.className),d.innerHTML&&d.dompurify&&(c.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)c.style[h]=d.style[h];return c},a=function l(d){var c=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),c);return h=(h=h.setProgress(1,l,1,[l])).set(d)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(l,d){return l.__proto__=d||a.prototype,l},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(l,d){return this.then(function(){switch(d=d||function(c){switch(i(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(l)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:l,dompurify:c})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},a.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=function c(h,x){for(var v=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),y=h.firstChild;y;y=y.nextSibling)x!==!0&&y.nodeType===1&&y.nodeName==="SCRIPT"||v.appendChild(c(y,x));return h.nodeType===1&&(h.nodeName==="CANVAS"?(v.width=h.width,v.height=h.height,v.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(v.value=h.value),v.addEventListener("load",function(){v.scrollTop=h.scrollTop,v.scrollLeft=h.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,d(this.prop.container,c)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var c=this.opt.jsPDF,h=this.opt.fontFaces,x=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:x,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=h,h)for(var y=0;y<h.length;++y){var m=h[y],w=m.src.find(function(S){return S.format==="truetype"});w&&c.addFont(w.url,m.ref.name,m.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),d(this.prop.container,v)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(l,d,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},a.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},a.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},a.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(l){if(i(l)!=="object")return this;var d=Object.keys(l||{}).map(function(c){if(c in a.template.prop)return function(){this.prop[c]=l[c]};switch(c){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[c]=l[c]}}},this);return this.then(function(){return this.thenList(d)})},a.prototype.get=function(l,d){return this.then(function(){var c=l in a.template.prop?this.prop[l]:this.opt[l];return d?d(c):c})},a.prototype.setMargin=function(l){return this.then(function(){switch(i(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},a.prototype.setPageSize=function(l){function d(c,h){return Math.floor(c*h/72*96)}return this.then(function(){(l=l||wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},a.prototype.setProgress=function(l,d,c,h){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),c!=null&&(this.progress.n=c),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(l,d,c,h){return this.setProgress(l?this.progress.val+l:null,d||null,c?this.progress.n+c:null,h?this.progress.stack.concat(h):null)},a.prototype.then=function(l,d){var c=this;return this.thenCore(l,d,function(h,x){return c.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,h),v}).then(h,x).then(function(v){return c.updateProgress(1),v})})},a.prototype.thenCore=function(l,d,c){c=c||Promise.prototype.then,l&&(l=l.bind(this)),d&&(d=d.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),x=c.call(h,l,d);return a.convert(x,this.__proto__)},a.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},a.prototype.thenList=function(l){var d=this;return l.forEach(function(c){d=d.thenCore(c)}),d},a.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return a.convert(d,this)},a.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},a.prototype.error=function(l){return this.then(function(){throw new Error(l)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,wt.getPageSize=function(l,d,c){if(Qt(l)==="object"){var h=l;l=h.orientation,d=h.unit||d,c=h.format||c}d=d||"mm",c=c||"a4",l=(""+(l||"P")).toLowerCase();var x,v=(""+c).toLowerCase(),y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":x=1;break;case"mm":x=72/25.4;break;case"cm":x=72/2.54;break;case"in":x=72;break;case"px":x=.75;break;case"pc":case"em":x=12;break;case"ex":x=6;break;default:throw"Invalid unit: "+d}var m,w=0,S=0;if(y.hasOwnProperty(v))w=y[v][1]/x,S=y[v][0]/x;else try{w=c[1],S=c[0]}catch{throw new Error("Invalid format: "+c)}if(l==="p"||l==="portrait")l="p",S>w&&(m=S,S=w,w=m);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>S&&(m=S,S=w,w=m)}return{width:S,height:w,unit:d,k:x,orientation:l}},e.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(jp):null;var c=new a(d);return d.worker?c:c.from(l).doCallback()}}(wt.API),wt.API.addJS=function(e){return zg=e,this.internal.events.subscribe("postPutResources",function(){Vd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Vd+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Pg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zg+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Vd!==void 0&&Pg!==void 0&&this.internal.out("/Names <</JavaScript "+Vd+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var l=s[a],d=i.exec(l);if(d!=null){var c=d[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(l)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,x=[];for(a=0;a<h;a++){var v=r.internal.newObject();x.push(v);var y=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<x.length;a++)r.internal.write("(page_"+(a+1)+")"+x[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,s,a){var l={title:s,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var s=0;s<i.children.length;s++)this.genIds_r(i.children[s])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var d=this.count=this.count_r({count:0},l);if(d>0&&this.line("/Count "+d),l.options&&l.options.pageNumber){var c=r.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var h=0;h<i.children.length;h++)this.renderItems(i.children[h])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,s){for(var a=0;a<s.children.length;a++)i.count++,this.count_r(i,s.children[a]);return i.count}}])}(wt.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,s,a,l,d){var c,h=this.decode.DCT_DECODE,x=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=l||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(v){for(var y,m=256*v.charCodeAt(4)+v.charCodeAt(5),w=v.length,S={width:0,height:0,numcomponents:1},j=4;j<w;j+=2){if(j+=m,t.indexOf(v.charCodeAt(j+1))!==-1){y=256*v.charCodeAt(j+5)+v.charCodeAt(j+6),S={width:256*v.charCodeAt(j+7)+v.charCodeAt(j+8),height:y,numcomponents:v.charCodeAt(j+9)};break}m=256*v.charCodeAt(j+2)+v.charCodeAt(j+3)}return S}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}x={data:r,width:c.width,height:c.height,colorSpace:d,bitsPerComponent:8,filter:h,index:i,alias:s}}return x}}(wt.API);var ko,Gd,_g,Ig,Tg,eb=function(){var e,t,r;function i(a){var l,d,c,h,x,v,y,m,w,S,j,f,N,C;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(l=this.readUInt32(),w=(function(){var V,ee;for(ee=[],V=0;V<4;++V)ee.push(String.fromCharCode(this.data[this.pos++]));return ee}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(l);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},x=this.readUInt16(),h=this.readUInt16()||100,v.delay=1e3*x/h,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,l-=4),a=(v!=null?v.data:void 0)||this.imgData,f=0;0<=l?f<l:f>l;0<=l?++f:--f)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(l),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((S=c-this.transparency.indexed.length)>0)for(N=0;0<=S?N<S:N>S;0<=S?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(l)[0];break;case 2:this.transparency.rgb=this.read(l)}break;case"tEXt":y=(j=this.read(l)).indexOf(0),m=String.fromCharCode.apply(String,j.slice(0,y)),this.text[m]=String.fromCharCode.apply(String,j.slice(y+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(C=this.colorType)===4||C===6,d=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*d,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=l}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(a){var l,d;for(d=[],l=0;0<=a?l<a:l>a;0<=a?++l:--l)d.push(this.data[this.pos++]);return d},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(a){var l=this.pixelBitlength/8,d=new Uint8Array(this.width*this.height*l),c=0,h=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function x(v,y,m,w){var S,j,f,N,C,V,ee,ce,ne,O,J,te,M,k,P,R,T,F,re,q,le,oe=Math.ceil((h.width-v)/m),Pe=Math.ceil((h.height-y)/w),z=h.width==oe&&h.height==Pe;for(k=l*oe,te=z?d:new Uint8Array(k*Pe),V=a.length,M=0,j=0;M<Pe&&c<V;){switch(a[c++]){case 0:for(N=T=0;T<k;N=T+=1)te[j++]=a[c++];break;case 1:for(N=F=0;F<k;N=F+=1)S=a[c++],C=N<l?0:te[j-l],te[j++]=(S+C)%256;break;case 2:for(N=re=0;re<k;N=re+=1)S=a[c++],f=(N-N%l)/l,P=M&&te[(M-1)*k+f*l+N%l],te[j++]=(P+S)%256;break;case 3:for(N=q=0;q<k;N=q+=1)S=a[c++],f=(N-N%l)/l,C=N<l?0:te[j-l],P=M&&te[(M-1)*k+f*l+N%l],te[j++]=(S+Math.floor((C+P)/2))%256;break;case 4:for(N=le=0;le<k;N=le+=1)S=a[c++],f=(N-N%l)/l,C=N<l?0:te[j-l],M===0?P=R=0:(P=te[(M-1)*k+f*l+N%l],R=f&&te[(M-1)*k+(f-1)*l+N%l]),ee=C+P-R,ce=Math.abs(ee-C),O=Math.abs(ee-P),J=Math.abs(ee-R),ne=ce<=O&&ce<=J?C:O<=J?P:R,te[j++]=(S+ne)%256;break;default:throw new Error("Invalid filter algorithm: "+a[c-1])}if(!z){var U=((y+M*w)*h.width+v)*l,Q=M*k;for(N=0;N<oe;N+=1){for(var G=0;G<l;G+=1)d[U++]=te[Q++];U+=(m-1)*l}}M++}}return a=IN(a),h.interlaceMethod==1?(x(0,0,8,8),x(4,0,8,8),x(0,4,4,8),x(2,0,4,4),x(0,2,2,4),x(1,0,2,2),x(0,1,1,2)):x(0,0,1,1),d},i.prototype.decodePalette=function(){var a,l,d,c,h,x,v,y,m;for(d=this.palette,x=this.transparency.indexed||[],h=new Uint8Array((x.length||0)+d.length),c=0,a=0,l=v=0,y=d.length;v<y;l=v+=3)h[c++]=d[l],h[c++]=d[l+1],h[c++]=d[l+2],h[c++]=(m=x[a++])!=null?m:255;return h},i.prototype.copyToImageData=function(a,l){var d,c,h,x,v,y,m,w,S,j,f;if(c=this.colors,S=null,d=this.hasAlphaChannel,this.palette.length&&(S=(f=this._decodedPalette)!=null?f:this._decodedPalette=this.decodePalette(),c=4,d=!0),w=(h=a.data||a).length,v=S||l,x=y=0,c===1)for(;x<w;)m=S?4*l[x/4]:y,j=v[m++],h[x++]=j,h[x++]=j,h[x++]=j,h[x++]=d?v[m++]:255,y=m;else for(;x<w;)m=S?4*l[x/4]:y,h[x++]=v[m++],h[x++]=v[m++],h[x++]=v[m++],h[x++]=d?v[m++]:255,y=m},i.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(St)==="[object Window]"){try{t=St.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(a){var l;if(s()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(l=new Image).src=t.toDataURL(),l;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(a){var l,d,c,h,x,v,y,m;if(this.animation){for(m=[],d=x=0,v=(y=this.animation.frames).length;x<v;d=++x)l=y[d],c=a.createImageData(l.width,l.height),h=this.decodePixels(new Uint8Array(l.data)),this.copyToImageData(c,h),l.imageData=c,m.push(l.image=e(c));return m}},i.prototype.renderFrame=function(a,l){var d,c,h;return d=(c=this.animation.frames)[l],h=c[l-1],l===0&&a.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?a.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&a.putImageData(h.imageData,h.xOffset,h.yOffset),d.blendOp===0&&a.clearRect(d.xOffset,d.yOffset,d.width,d.height),a.drawImage(d.image,d.xOffset,d.yOffset)},i.prototype.animate=function(a){var l,d,c,h,x,v,y=this;return d=0,v=this.animation,h=v.numFrames,c=v.frames,x=v.numPlays,(l=function(){var m,w;if(m=d++%h,w=c[m],y.renderFrame(a,m),h>1&&d/h<x)return y.animation._timeout=setTimeout(l,w.delay)})()},i.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},i.prototype.render=function(a){var l,d;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,l=a.getContext("2d"),this.animation?(this.decodeFrames(l),this.animate(l)):(d=l.createImageData(this.width,this.height),this.copyToImageData(d,this.decodePixels()),l.putImageData(d,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tb(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,s=e[t++],a=s>>7,l=1<<(7&s)+1;e[t++],e[t++];var d=null,c=null;a&&(d=t,c=l,t+=3*l);var h=!0,x=[],v=0,y=null,m=0,w=null;for(this.width=r,this.height=i;h&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,w=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var S=e[t++];v=e[t++]|e[t++]<<8,y=e[t++],!(1&S)&&(y=null),m=S>>2&7,t++;break;case 254:for(;;){if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,f=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,V=e[t++],ee=V>>6&1,ce=1<<(7&V)+1,ne=d,O=c,J=!1;V>>7&&(J=!0,ne=t,O=ce,t+=3*ce);var te=t;for(t++;;){var M;if(!((M=e[t++])>=0))throw Error("Invalid block size");if(M===0)break;t+=M}x.push({x:j,y:f,width:N,height:C,has_local_palette:J,palette_offset:ne,palette_size:O,data_offset:te,data_length:t-te,transparent_index:y,interlaced:!!ee,delay:v,disposal:m});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return x.length},this.loopCount=function(){return w},this.frameInfo=function(k){if(k<0||k>=x.length)throw new Error("Frame index out of range.");return x[k]},this.decodeAndBlitFrameBGRA=function(k,P){var R=this.frameInfo(k),T=R.width*R.height,F=new Uint8Array(T);Mg(e,R.data_offset,F,T);var re=R.palette_offset,q=R.transparent_index;q===null&&(q=256);var le=R.width,oe=r-le,Pe=le,z=4*(R.y*r+R.x),U=4*((R.y+R.height)*r+R.x),Q=z,G=4*oe;R.interlaced===!0&&(G+=4*r*7);for(var ae=8,he=0,xe=F.length;he<xe;++he){var we=F[he];if(Pe===0&&(Pe=le,(Q+=G)>=U&&(G=4*oe+4*r*(ae-1),Q=z+(le+oe)*(ae<<1),ae>>=1)),we===q)Q+=4;else{var Be=e[re+3*we],He=e[re+3*we+1],Qe=e[re+3*we+2];P[Q++]=Qe,P[Q++]=He,P[Q++]=Be,P[Q++]=255}--Pe}},this.decodeAndBlitFrameRGBA=function(k,P){var R=this.frameInfo(k),T=R.width*R.height,F=new Uint8Array(T);Mg(e,R.data_offset,F,T);var re=R.palette_offset,q=R.transparent_index;q===null&&(q=256);var le=R.width,oe=r-le,Pe=le,z=4*(R.y*r+R.x),U=4*((R.y+R.height)*r+R.x),Q=z,G=4*oe;R.interlaced===!0&&(G+=4*r*7);for(var ae=8,he=0,xe=F.length;he<xe;++he){var we=F[he];if(Pe===0&&(Pe=le,(Q+=G)>=U&&(G=4*oe+4*r*(ae-1),Q=z+(le+oe)*(ae<<1),ae>>=1)),we===q)Q+=4;else{var Be=e[re+3*we],He=e[re+3*we+1],Qe=e[re+3*we+2];P[Q++]=Be,P[Q++]=He,P[Q++]=Qe,P[Q++]=255}--Pe}}}function Mg(e,t,r,i){for(var s=e[t++],a=1<<s,l=a+1,d=l+1,c=s+1,h=(1<<c)-1,x=0,v=0,y=0,m=e[t++],w=new Int32Array(4096),S=null;;){for(;x<16&&m!==0;)v|=e[t++]<<x,x+=8,m===1?m=e[t++]:--m;if(x<c)break;var j=v&h;if(v>>=c,x-=c,j!==a){if(j===l)break;for(var f=j<d?j:S,N=0,C=f;C>a;)C=w[C]>>8,++N;var V=C;if(y+N+(f!==j?1:0)>i)return void en.log("Warning, gif stream longer than expected.");r[y++]=V;var ee=y+=N;for(f!==j&&(r[y++]=V),C=f;N--;)C=w[C],r[--ee]=255&C,C>>=8;S!==null&&d<4096&&(w[d++]=S<<8|V,d>=h+1&&c<12&&(++c,h=h<<1|1)),S=j}else d=l+1,h=(1<<(c=s+1))-1,S=null}return y!==i&&en.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function gh(e){var t,r,i,s,a,l=Math.floor,d=new Array(64),c=new Array(64),h=new Array(64),x=new Array(64),v=new Array(65535),y=new Array(65535),m=new Array(64),w=new Array(64),S=[],j=0,f=7,N=new Array(64),C=new Array(64),V=new Array(64),ee=new Array(256),ce=new Array(2048),ne=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],O=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],J=[0,1,2,3,4,5,6,7,8,9,10,11],te=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],M=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],k=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],T=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(z,U){for(var Q=0,G=0,ae=new Array,he=1;he<=16;he++){for(var xe=1;xe<=z[he];xe++)ae[U[G]]=[],ae[U[G]][0]=Q,ae[U[G]][1]=he,G++,Q++;Q*=2}return ae}function re(z){for(var U=z[0],Q=z[1]-1;Q>=0;)U&1<<Q&&(j|=1<<f),Q--,--f<0&&(j==255?(q(255),q(0)):q(j),f=7,j=0)}function q(z){S.push(z)}function le(z){q(z>>8&255),q(255&z)}function oe(z,U,Q,G,ae){for(var he,xe=ae[0],we=ae[240],Be=function(ie,ue){var Ae,Ie,Ge,it,A,H,ye,Je,Fe,De,Oe=0;for(Fe=0;Fe<8;++Fe){Ae=ie[Oe],Ie=ie[Oe+1],Ge=ie[Oe+2],it=ie[Oe+3],A=ie[Oe+4],H=ie[Oe+5],ye=ie[Oe+6];var _t=Ae+(Je=ie[Oe+7]),mt=Ae-Je,Ct=Ie+ye,nt=Ie-ye,at=Ge+H,Nt=Ge-H,gt=it+A,Sn=it-A,Ht=_t+gt,W=_t-gt,ze=Ct+at,qe=Ct-at;ie[Oe]=Ht+ze,ie[Oe+4]=Ht-ze;var Me=.707106781*(qe+W);ie[Oe+2]=W+Me,ie[Oe+6]=W-Me;var lt=.382683433*((Ht=Sn+Nt)-(qe=nt+mt)),Rt=.5411961*Ht+lt,Mt=1.306562965*qe+lt,Fn=.707106781*(ze=Nt+nt),On=mt+Fn,vt=mt-Fn;ie[Oe+5]=vt+Rt,ie[Oe+3]=vt-Rt,ie[Oe+1]=On+Mt,ie[Oe+7]=On-Mt,Oe+=8}for(Oe=0,Fe=0;Fe<8;++Fe){Ae=ie[Oe],Ie=ie[Oe+8],Ge=ie[Oe+16],it=ie[Oe+24],A=ie[Oe+32],H=ie[Oe+40],ye=ie[Oe+48];var ir=Ae+(Je=ie[Oe+56]),ei=Ae-Je,Qn=Ie+ye,Cn=Ie-ye,ln=Ge+H,xr=Ge-H,Cs=it+A,ti=it-A,qr=ir+Cs,$r=ir-Cs,kr=Qn+ln,ni=Qn-ln;ie[Oe]=qr+kr,ie[Oe+32]=qr-kr;var Ar=.707106781*(ni+$r);ie[Oe+16]=$r+Ar,ie[Oe+48]=$r-Ar;var Rn=.382683433*((qr=ti+xr)-(ni=Cn+ei)),es=.5411961*qr+Rn,ks=1.306562965*ni+Rn,ts=.707106781*(kr=xr+Cn),As=ei+ts,Ls=ei-ts;ie[Oe+40]=Ls+es,ie[Oe+24]=Ls-es,ie[Oe+8]=As+ks,ie[Oe+56]=As-ks,Oe++}for(Fe=0;Fe<64;++Fe)De=ie[Fe]*ue[Fe],m[Fe]=De>0?De+.5|0:De-.5|0;return m}(z,U),He=0;He<64;++He)w[ne[He]]=Be[He];var Qe=w[0]-Q;Q=w[0],Qe==0?re(G[0]):(re(G[y[he=32767+Qe]]),re(v[he]));for(var Ke=63;Ke>0&&w[Ke]==0;)Ke--;if(Ke==0)return re(xe),Q;for(var tt,ke=1;ke<=Ke;){for(var I=ke;w[ke]==0&&ke<=Ke;)++ke;var je=ke-I;if(je>=16){tt=je>>4;for(var be=1;be<=tt;++be)re(we);je&=15}he=32767+w[ke],re(ae[(je<<4)+y[he]]),re(v[he]),ke++}return Ke!=63&&re(xe),Q}function Pe(z){z=Math.min(Math.max(z,1),100),a!=z&&(function(U){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var ae=l((Q[G]*U+50)/100);ae=Math.min(Math.max(ae,1),255),d[ne[G]]=ae}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],xe=0;xe<64;xe++){var we=l((he[xe]*U+50)/100);we=Math.min(Math.max(we,1),255),c[ne[xe]]=we}for(var Be=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],He=0,Qe=0;Qe<8;Qe++)for(var Ke=0;Ke<8;Ke++)h[He]=1/(d[ne[He]]*Be[Qe]*Be[Ke]*8),x[He]=1/(c[ne[He]]*Be[Qe]*Be[Ke]*8),He++}(z<50?Math.floor(5e3/z):Math.floor(200-2*z)),a=z)}this.encode=function(z,U){U&&Pe(U),S=new Array,j=0,f=7,le(65496),le(65504),le(16),q(74),q(70),q(73),q(70),q(0),q(1),q(1),q(0),le(1),le(1),q(0),q(0),function(){le(65499),le(132),q(0);for(var Ie=0;Ie<64;Ie++)q(d[Ie]);q(1);for(var Ge=0;Ge<64;Ge++)q(c[Ge])}(),function(Ie,Ge){le(65472),le(17),q(8),le(Ge),le(Ie),q(3),q(1),q(17),q(0),q(2),q(17),q(1),q(3),q(17),q(1)}(z.width,z.height),function(){le(65476),le(418),q(0);for(var Ie=0;Ie<16;Ie++)q(O[Ie+1]);for(var Ge=0;Ge<=11;Ge++)q(J[Ge]);q(16);for(var it=0;it<16;it++)q(te[it+1]);for(var A=0;A<=161;A++)q(M[A]);q(1);for(var H=0;H<16;H++)q(k[H+1]);for(var ye=0;ye<=11;ye++)q(P[ye]);q(17);for(var Je=0;Je<16;Je++)q(R[Je+1]);for(var Fe=0;Fe<=161;Fe++)q(T[Fe])}(),le(65498),le(12),q(3),q(1),q(0),q(2),q(17),q(3),q(17),q(0),q(63),q(0);var Q=0,G=0,ae=0;j=0,f=7,this.encode.displayName="_encode_";for(var he,xe,we,Be,He,Qe,Ke,tt,ke,I=z.data,je=z.width,be=z.height,ie=4*je,ue=0;ue<be;){for(he=0;he<ie;){for(He=ie*ue+he,Ke=-1,tt=0,ke=0;ke<64;ke++)Qe=He+(tt=ke>>3)*ie+(Ke=4*(7&ke)),ue+tt>=be&&(Qe-=ie*(ue+1+tt-be)),he+Ke>=ie&&(Qe-=he+Ke-ie+4),xe=I[Qe++],we=I[Qe++],Be=I[Qe++],N[ke]=(ce[xe]+ce[we+256>>0]+ce[Be+512>>0]>>16)-128,C[ke]=(ce[xe+768>>0]+ce[we+1024>>0]+ce[Be+1280>>0]>>16)-128,V[ke]=(ce[xe+1280>>0]+ce[we+1536>>0]+ce[Be+1792>>0]>>16)-128;Q=oe(N,h,Q,t,i),G=oe(C,x,G,r,s),ae=oe(V,x,ae,r,s),he+=32}ue+=8}if(f>=0){var Ae=[];Ae[1]=f+1,Ae[0]=(1<<f+1)-1,re(Ae)}return le(65497),new Uint8Array(S)},e=e||50,function(){for(var z=String.fromCharCode,U=0;U<256;U++)ee[U]=z(U)}(),t=F(O,J),r=F(k,P),i=F(te,M),s=F(R,T),function(){for(var z=1,U=2,Q=1;Q<=15;Q++){for(var G=z;G<U;G++)y[32767+G]=Q,v[32767+G]=[],v[32767+G][1]=Q,v[32767+G][0]=G;for(var ae=-(U-1);ae<=-z;ae++)y[32767+ae]=Q,v[32767+ae]=[],v[32767+ae][1]=Q,v[32767+ae][0]=U-1+ae;z<<=1,U<<=1}}(),function(){for(var z=0;z<256;z++)ce[z]=19595*z,ce[z+256>>0]=38470*z,ce[z+512>>0]=7471*z+32768,ce[z+768>>0]=-11059*z,ce[z+1024>>0]=-21709*z,ce[z+1280>>0]=32768*z+8421375,ce[z+1536>>0]=-27439*z,ce[z+1792>>0]=-5329*z}(),Pe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Pi(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Dg(e){function t(O){if(!O)throw Error("assert :P")}function r(O,J,te){for(var M=0;4>M;M++)if(O[J+M]!=te.charCodeAt(M))return!0;return!1}function i(O,J,te,M,k){for(var P=0;P<k;P++)O[J+P]=te[M+P]}function s(O,J,te,M){for(var k=0;k<M;k++)O[J+k]=te}function a(O){return new Int32Array(O)}function l(O,J){for(var te=[],M=0;M<O;M++)te.push(new J);return te}function d(O,J){var te=[];return function M(k,P,R){for(var T=R[P],F=0;F<T&&(k.push(R.length>P+1?[]:new J),!(R.length<P+1));F++)M(k[F],P+1,R)}(te,0,O),te}var c=function(){var O=this;function J(o,u){for(var g=1<<u-1>>>0;o&g;)g>>>=1;return g?(o&g-1)+g:o}function te(o,u,g,b,L){t(!(b%g));do o[u+(b-=g)]=L;while(0<b)}function M(o,u,g,b,L){if(t(2328>=L),512>=L)var D=a(512);else if((D=a(L))==null)return 0;return function(E,B,$,Z,pe,Se){var Ce,ve,$e=B,_e=1<<$,fe=a(16),ge=a(16);for(t(pe!=0),t(Z!=null),t(E!=null),t(0<$),ve=0;ve<pe;++ve){if(15<Z[ve])return 0;++fe[Z[ve]]}if(fe[0]==pe)return 0;for(ge[1]=0,Ce=1;15>Ce;++Ce){if(fe[Ce]>1<<Ce)return 0;ge[Ce+1]=ge[Ce]+fe[Ce]}for(ve=0;ve<pe;++ve)Ce=Z[ve],0<Z[ve]&&(Se[ge[Ce]++]=ve);if(ge[15]==1)return(Z=new k).g=0,Z.value=Se[0],te(E,$e,1,_e,Z),_e;var Ee,Ve=-1,Re=_e-1,ct=0,rt=1,jt=1,st=1<<$;for(ve=0,Ce=1,pe=2;Ce<=$;++Ce,pe<<=1){if(rt+=jt<<=1,0>(jt-=fe[Ce]))return 0;for(;0<fe[Ce];--fe[Ce])(Z=new k).g=Ce,Z.value=Se[ve++],te(E,$e+ct,pe,st,Z),ct=J(ct,Ce)}for(Ce=$+1,pe=2;15>=Ce;++Ce,pe<<=1){if(rt+=jt<<=1,0>(jt-=fe[Ce]))return 0;for(;0<fe[Ce];--fe[Ce]){if(Z=new k,(ct&Re)!=Ve){for($e+=st,Ee=1<<(Ve=Ce)-$;15>Ve&&!(0>=(Ee-=fe[Ve]));)++Ve,Ee<<=1;_e+=st=1<<(Ee=Ve-$),E[B+(Ve=ct&Re)].g=Ee+$,E[B+Ve].value=$e-B-Ve}Z.g=Ce-$,Z.value=Se[ve++],te(E,$e+(ct>>$),pe,st,Z),ct=J(ct,Ce)}}return rt!=2*ge[15]-1?0:_e}(o,u,g,b,L,D)}function k(){this.value=this.g=0}function P(){this.value=this.g=0}function R(){this.G=l(5,k),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Xn,P)}function T(o,u,g,b){t(o!=null),t(u!=null),t(2147483648>b),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=u,o.pa=g,o.Jd=u,o.Yc=g+b,o.Zc=4<=b?g+b-4+1:g,he(o)}function F(o,u){for(var g=0;0<u--;)g|=we(o,128)<<u;return g}function re(o,u){var g=F(o,u);return xe(o)?-g:g}function q(o,u,g,b){var L,D=0;for(t(o!=null),t(u!=null),t(4294967288>b),o.Sb=b,o.Ra=0,o.u=0,o.h=0,4<b&&(b=4),L=0;L<b;++L)D+=u[g+L]<<8*L;o.Ra=D,o.bb=b,o.oa=u,o.pa=g}function le(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<po-8>>>0,++o.bb,o.u-=8;Q(o)&&(o.h=1,o.u=0)}function oe(o,u){if(t(0<=u),!o.h&&u<=ho){var g=U(o)&mo[u];return o.u+=u,le(o),g}return o.h=1,o.u=0}function Pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function U(o){return o.Ra>>>(o.u&po-1)>>>0}function Q(o){return t(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>po}function G(o,u){o.u=u,o.h=Q(o)}function ae(o){o.u>=zl&&(t(o.u>=zl),le(o))}function he(o){t(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(t(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function xe(o){return F(o,1)}function we(o,u){var g=o.Ca;0>o.b&&he(o);var b=o.b,L=g*u>>>8,D=(o.I>>>b>L)+0;for(D?(g-=L,o.I-=L+1<<b>>>0):g=L+1,b=g,L=0;256<=b;)L+=8,b>>=8;return b=7^L+Pr[b],o.b-=b,o.Ca=(g<<b)-1,D}function Be(o,u,g){o[u+0]=g>>24&255,o[u+1]=g>>16&255,o[u+2]=g>>8&255,o[u+3]=g>>0&255}function He(o,u){return o[u+0]<<0|o[u+1]<<8}function Qe(o,u){return He(o,u)|o[u+2]<<16}function Ke(o,u){return He(o,u)|He(o,u+2)<<16}function tt(o,u){var g=1<<u;return t(o!=null),t(0<u),o.X=a(g),o.X==null?0:(o.Mb=32-u,o.Xa=u,1)}function ke(o,u){t(o!=null),t(u!=null),t(o.Xa==u.Xa),i(u.X,0,o.X,0,1<<u.Xa)}function I(){this.X=[],this.Xa=this.Mb=0}function je(o,u,g,b){t(g!=null),t(b!=null);var L=g[0],D=b[0];return L==0&&(L=(o*D+u/2)/u),D==0&&(D=(u*L+o/2)/o),0>=L||0>=D?0:(g[0]=L,b[0]=D,1)}function be(o,u){return o+(1<<u)-1>>>u}function ie(o,u){return((4278255360&o)+(4278255360&u)>>>0&4278255360)+((16711935&o)+(16711935&u)>>>0&16711935)>>>0}function ue(o,u){O[u]=function(g,b,L,D,E,B,$){var Z;for(Z=0;Z<E;++Z){var pe=O[o](B[$+Z-1],L,D+Z);B[$+Z]=ie(g[b+Z],pe)}}}function Ae(){this.ud=this.hd=this.jd=0}function Ie(o,u){return((4278124286&(o^u))>>>1)+(o&u)>>>0}function Ge(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function it(o,u){return Ge(o+(o-u+.5>>1))}function A(o,u,g){return Math.abs(u-g)-Math.abs(o-g)}function H(o,u,g,b,L,D,E){for(b=D[E-1],g=0;g<L;++g)D[E+g]=b=ie(o[u+g],b)}function ye(o,u,g,b,L){var D;for(D=0;D<g;++D){var E=o[u+D],B=E>>8&255,$=16711935&($=($=16711935&E)+((B<<16)+B));b[L+D]=(4278255360&E)+$>>>0}}function Je(o,u){u.jd=o>>0&255,u.hd=o>>8&255,u.ud=o>>16&255}function Fe(o,u,g,b,L,D){var E;for(E=0;E<b;++E){var B=u[g+E],$=B>>>8,Z=B,pe=255&(pe=(pe=B>>>16)+((o.jd<<24>>24)*($<<24>>24)>>>5));Z=255&(Z=(Z=Z+((o.hd<<24>>24)*($<<24>>24)>>>5))+((o.ud<<24>>24)*(pe<<24>>24)>>>5)),L[D+E]=(4278255360&B)+(pe<<16)+Z}}function De(o,u,g,b,L){O[u]=function(D,E,B,$,Z,pe,Se,Ce,ve){for($=Se;$<Ce;++$)for(Se=0;Se<ve;++Se)Z[pe++]=L(B[b(D[E++])])},O[o]=function(D,E,B,$,Z,pe,Se){var Ce=8>>D.b,ve=D.Ea,$e=D.K[0],_e=D.w;if(8>Ce)for(D=(1<<D.b)-1,_e=(1<<Ce)-1;E<B;++E){var fe,ge=0;for(fe=0;fe<ve;++fe)fe&D||(ge=b($[Z++])),pe[Se++]=L($e[ge&_e]),ge>>=Ce}else O["VP8LMapColor"+g]($,Z,$e,_e,pe,Se,E,B,ve)}}function Oe(o,u,g,b,L){for(g=u+g;u<g;){var D=o[u++];b[L++]=D>>16&255,b[L++]=D>>8&255,b[L++]=D>>0&255}}function _t(o,u,g,b,L){for(g=u+g;u<g;){var D=o[u++];b[L++]=D>>16&255,b[L++]=D>>8&255,b[L++]=D>>0&255,b[L++]=D>>24&255}}function mt(o,u,g,b,L){for(g=u+g;u<g;){var D=(E=o[u++])>>16&240|E>>12&15,E=E>>0&240|E>>28&15;b[L++]=D,b[L++]=E}}function Ct(o,u,g,b,L){for(g=u+g;u<g;){var D=(E=o[u++])>>16&248|E>>13&7,E=E>>5&224|E>>3&31;b[L++]=D,b[L++]=E}}function nt(o,u,g,b,L){for(g=u+g;u<g;){var D=o[u++];b[L++]=D>>0&255,b[L++]=D>>8&255,b[L++]=D>>16&255}}function at(o,u,g,b,L,D){if(D==0)for(g=u+g;u<g;)Be(b,((D=o[u++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),L+=32;else i(b,L,o,u,g)}function Nt(o,u){O[u][0]=O[o+"0"],O[u][1]=O[o+"1"],O[u][2]=O[o+"2"],O[u][3]=O[o+"3"],O[u][4]=O[o+"4"],O[u][5]=O[o+"5"],O[u][6]=O[o+"6"],O[u][7]=O[o+"7"],O[u][8]=O[o+"8"],O[u][9]=O[o+"9"],O[u][10]=O[o+"10"],O[u][11]=O[o+"11"],O[u][12]=O[o+"12"],O[u][13]=O[o+"13"],O[u][14]=O[o+"0"],O[u][15]=O[o+"0"]}function gt(o){return o==Nm||o==bm||o==cd||o==jm}function Sn(){this.eb=[],this.size=this.A=this.fb=0}function Ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function W(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sn,this.f.kb=new Ht,this.sd=null}function ze(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qe(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Me(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function lt(o,u){var g=o.T,b=u.ba.f.RGBA,L=b.eb,D=b.fb+o.ka*b.A,E=di[u.ba.S],B=o.y,$=o.O,Z=o.f,pe=o.N,Se=o.ea,Ce=o.W,ve=u.cc,$e=u.dc,_e=u.Mc,fe=u.Nc,ge=o.ka,Ee=o.ka+o.T,Ve=o.U,Re=Ve+1>>1;for(ge==0?E(B,$,null,null,Z,pe,Se,Ce,Z,pe,Se,Ce,L,D,null,null,Ve):(E(u.ec,u.fc,B,$,ve,$e,_e,fe,Z,pe,Se,Ce,L,D-b.A,L,D,Ve),++g);ge+2<Ee;ge+=2)ve=Z,$e=pe,_e=Se,fe=Ce,pe+=o.Rc,Ce+=o.Rc,D+=2*b.A,E(B,($+=2*o.fa)-o.fa,B,$,ve,$e,_e,fe,Z,pe,Se,Ce,L,D-b.A,L,D,Ve);return $+=o.fa,o.j+Ee<o.o?(i(u.ec,u.fc,B,$,Ve),i(u.cc,u.dc,Z,pe,Re),i(u.Mc,u.Nc,Se,Ce,Re),g--):1&Ee||E(B,$,null,null,Z,pe,Se,Ce,Z,pe,Se,Ce,L,D+b.A,null,null,Ve),g}function Rt(o,u,g){var b=o.F,L=[o.J];if(b!=null){var D=o.U,E=u.ba.S,B=E==ld||E==cd;u=u.ba.f.RGBA;var $=[0],Z=o.ka;$[0]=o.T,o.Kb&&(Z==0?--$[0]:(--Z,L[0]-=o.width),o.j+o.ka+o.T==o.o&&($[0]=o.o-o.j-Z));var pe=u.eb;Z=u.fb+Z*u.A,o=nn(b,L[0],o.width,D,$,pe,Z+(B?0:3),u.A),t(g==$),o&&gt(E)&&li(pe,Z,B,D,$,u.A)}return 0}function Mt(o){var u=o.ma,g=u.ba.S,b=11>g,L=g==ad||g==od||g==ld||g==ym||g==12||gt(g);if(u.memory=null,u.Ib=null,u.Jb=null,u.Nd=null,!Ll(u.Oa,o,L?11:12))return 0;if(L&&gt(g)&&Ye(),o.da)alert("todo:use_scaling");else{if(b){if(u.Ib=Me,o.Kb){if(g=o.U+1>>1,u.memory=a(o.U+2*g),u.memory==null)return 0;u.ec=u.memory,u.fc=0,u.cc=u.ec,u.dc=u.fc+o.U,u.Mc=u.cc,u.Nc=u.dc+g,u.Ib=lt,Ye()}}else alert("todo:EmitYUV");L&&(u.Jb=Rt,b&&Ne())}if(b&&!Mf){for(o=0;256>o;++o)V2[o]=89858*(o-128)+ud>>dd,J2[o]=-22014*(o-128)+ud,W2[o]=-45773*(o-128),G2[o]=113618*(o-128)+ud>>dd;for(o=Fl;o<Cm;++o)u=76283*(o-16)+ud>>dd,Y2[o-Fl]=Hr(u,255),Q2[o-Fl]=Hr(u+8>>4,15);Mf=1}return 1}function Fn(o){var u=o.ma,g=o.U,b=o.T;return t(!(1&o.ka)),0>=g||0>=b?0:(g=u.Ib(o,u),u.Jb!=null&&u.Jb(o,u,g),u.Dc+=g,1)}function On(o){o.ma.memory=null}function vt(o,u,g,b){return oe(o,8)!=47?0:(u[0]=oe(o,14)+1,g[0]=oe(o,14)+1,b[0]=oe(o,1),oe(o,3)!=0?0:!o.h)}function ir(o,u){if(4>o)return o+1;var g=o-2>>1;return(2+(1&o)<<g)+oe(u,g)+1}function ei(o,u){return 120<u?u-120:1<=(g=((g=_2[u-1])>>4)*o+(8-(15&g)))?g:1;var g}function Qn(o,u,g){var b=U(g),L=o[u+=255&b].g-8;return 0<L&&(G(g,g.u+8),b=U(g),u+=o[u].value,u+=b&(1<<L)-1),G(g,g.u+o[u].g),o[u].value}function Cn(o,u,g){return g.g+=o.g,g.value+=o.value<<u>>>0,t(8>=g.g),o.g}function ln(o,u,g){var b=o.xc;return t((u=b==0?0:o.vc[o.md*(g>>b)+(u>>b)])<o.Wb),o.Ya[u]}function xr(o,u,g,b){var L=o.ab,D=o.c*u,E=o.C;u=E+u;var B=g,$=b;for(b=o.Ta,g=o.Ua;0<L--;){var Z=o.gc[L],pe=E,Se=u,Ce=B,ve=$,$e=($=b,B=g,Z.Ea);switch(t(pe<Se),t(Se<=Z.nc),Z.hc){case 2:Zc(Ce,ve,(Se-pe)*$e,$,B);break;case 0:var _e=pe,fe=Se,ge=$,Ee=B,Ve=(st=Z).Ea;_e==0&&(xm(Ce,ve,null,null,1,ge,Ee),H(Ce,ve+1,0,0,Ve-1,ge,Ee+1),ve+=Ve,Ee+=Ve,++_e);for(var Re=1<<st.b,ct=Re-1,rt=be(Ve,st.b),jt=st.K,st=st.w+(_e>>st.b)*rt;_e<fe;){var Vt=jt,Gt=st,qt=1;for(_l(Ce,ve,ge,Ee-Ve,1,ge,Ee);qt<Ve;){var Ft=(qt&~ct)+Re;Ft>Ve&&(Ft=Ve),(0,Es[Vt[Gt++]>>8&15])(Ce,ve+ +qt,ge,Ee+qt-Ve,Ft-qt,ge,Ee+qt),qt=Ft}ve+=Ve,Ee+=Ve,++_e&ct||(st+=rt)}Se!=Z.nc&&i($,B-$e,$,B+(Se-pe-1)*$e,$e);break;case 1:for($e=Ce,fe=ve,Ve=(Ce=Z.Ea)-(Ee=Ce&~(ge=(ve=1<<Z.b)-1)),_e=be(Ce,Z.b),Re=Z.K,Z=Z.w+(pe>>Z.b)*_e;pe<Se;){for(ct=Re,rt=Z,jt=new Ae,st=fe+Ee,Vt=fe+Ce;fe<st;)Je(ct[rt++],jt),Aa(jt,$e,fe,ve,$,B),fe+=ve,B+=ve;fe<Vt&&(Je(ct[rt++],jt),Aa(jt,$e,fe,Ve,$,B),fe+=Ve,B+=Ve),++pe&ge||(Z+=_e)}break;case 3:if(Ce==$&&ve==B&&0<Z.b){for(fe=$,Ce=$e=B+(Se-pe)*$e-(Ee=(Se-pe)*be(Z.Ea,Z.b)),ve=$,ge=B,_e=[],Ee=(Ve=Ee)-1;0<=Ee;--Ee)_e[Ee]=ve[ge+Ee];for(Ee=Ve-1;0<=Ee;--Ee)fe[Ce+Ee]=_e[Ee];si(Z,pe,Se,$,$e,$,B)}else si(Z,pe,Se,Ce,ve,$,B)}B=b,$=g}$!=g&&i(b,g,B,$,D)}function Cs(o,u){var g=o.V,b=o.Ba+o.c*o.C,L=u-o.C;if(t(u<=o.l.o),t(16>=L),0<L){var D=o.l,E=o.Ta,B=o.Ua,$=D.width;if(xr(o,L,g,b),L=B=[B],t((g=o.C)<(b=u)),t(D.v<D.va),b>D.o&&(b=D.o),g<D.j){var Z=D.j-g;g=D.j,L[0]+=Z*$}if(g>=b?g=0:(L[0]+=4*D.v,D.ka=g-D.j,D.U=D.va-D.v,D.T=b-g,g=1),g){if(B=B[0],11>(g=o.ca).S){var pe=g.f.RGBA,Se=(b=g.S,L=D.U,D=D.T,Z=pe.eb,pe.A),Ce=D;for(pe=pe.fb+o.Ma*pe.A;0<Ce--;){var ve=E,$e=B,_e=L,fe=Z,ge=pe;switch(b){case sd:zr(ve,$e,_e,fe,ge);break;case ad:yr(ve,$e,_e,fe,ge);break;case Nm:yr(ve,$e,_e,fe,ge),li(fe,ge,0,_e,1,0);break;case Sf:os(ve,$e,_e,fe,ge);break;case od:at(ve,$e,_e,fe,ge,1);break;case bm:at(ve,$e,_e,fe,ge,1),li(fe,ge,0,_e,1,0);break;case ld:at(ve,$e,_e,fe,ge,0);break;case cd:at(ve,$e,_e,fe,ge,0),li(fe,ge,1,_e,1,0);break;case ym:Fs(ve,$e,_e,fe,ge);break;case jm:Fs(ve,$e,_e,fe,ge),tn(fe,ge,_e,1,0);break;case Cf:as(ve,$e,_e,fe,ge);break;default:t(0)}B+=$,pe+=Se}o.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");t(o.Ma<=g.height)}}o.C=u,t(o.C<=o.i)}function ti(o){var u;if(0<o.ua)return 0;for(u=0;u<o.Wb;++u){var g=o.Ya[u].G,b=o.Ya[u].H;if(0<g[1][b[1]+0].g||0<g[2][b[2]+0].g||0<g[3][b[3]+0].g)return 0}return 1}function qr(o,u,g,b,L,D){if(o.Z!=0){var E=o.qd,B=o.rd;for(t(qs[o.Z]!=null);u<g;++u)qs[o.Z](E,B,b,L,b,L,D),E=b,B=L,L+=D;o.qd=E,o.rd=B}}function $r(o,u){var g=o.l.ma,b=g.Z==0||g.Z==1?o.l.j:o.C;if(b=o.C<b?b:o.C,t(u<=o.l.o),u>b){var L=o.l.width,D=g.ca,E=g.tb+L*b,B=o.V,$=o.Ba+o.c*b,Z=o.gc;t(o.ab==1),t(Z[0].hc==3),ed(Z[0],b,u,B,$,D,E),qr(g,b,u,D,E,L)}o.C=o.Ma=u}function kr(o,u,g,b,L,D,E){var B=o.$/b,$=o.$%b,Z=o.m,pe=o.s,Se=g+o.$,Ce=Se;L=g+b*L;var ve=g+b*D,$e=280+pe.ua,_e=o.Pb?B:16777216,fe=0<pe.ua?pe.Wa:null,ge=pe.wc,Ee=Se<ve?ln(pe,$,B):null;t(o.C<D),t(ve<=L);var Ve=!1;e:for(;;){for(;Ve||Se<ve;){var Re=0;if(B>=_e){var ct=Se-g;t((_e=o).Pb),_e.wd=_e.m,_e.xd=ct,0<_e.s.ua&&ke(_e.s.Wa,_e.s.vb),_e=B+T2}if($&ge||(Ee=ln(pe,$,B)),t(Ee!=null),Ee.Qb&&(u[Se]=Ee.qb,Ve=!0),!Ve)if(ae(Z),Ee.jc){Re=Z,ct=u;var rt=Se,jt=Ee.pd[U(Re)&Xn-1];t(Ee.jc),256>jt.g?(G(Re,Re.u+jt.g),ct[rt]=jt.value,Re=0):(G(Re,Re.u+jt.g-256),t(256<=jt.value),Re=jt.value),Re==0&&(Ve=!0)}else Re=Qn(Ee.G[0],Ee.H[0],Z);if(Z.h)break;if(Ve||256>Re){if(!Ve)if(Ee.nd)u[Se]=(Ee.qb|Re<<8)>>>0;else{if(ae(Z),Ve=Qn(Ee.G[1],Ee.H[1],Z),ae(Z),ct=Qn(Ee.G[2],Ee.H[2],Z),rt=Qn(Ee.G[3],Ee.H[3],Z),Z.h)break;u[Se]=(rt<<24|Ve<<16|Re<<8|ct)>>>0}if(Ve=!1,++Se,++$>=b&&($=0,++B,E!=null&&B<=D&&!(B%16)&&E(o,B),fe!=null))for(;Ce<Se;)Re=u[Ce++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re}else if(280>Re){if(Re=ir(Re-256,Z),ct=Qn(Ee.G[4],Ee.H[4],Z),ae(Z),ct=ei(b,ct=ir(ct,Z)),Z.h)break;if(Se-g<ct||L-Se<Re)break e;for(rt=0;rt<Re;++rt)u[Se+rt]=u[Se+rt-ct];for(Se+=Re,$+=Re;$>=b;)$-=b,++B,E!=null&&B<=D&&!(B%16)&&E(o,B);if(t(Se<=L),$&ge&&(Ee=ln(pe,$,B)),fe!=null)for(;Ce<Se;)Re=u[Ce++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re}else{if(!(Re<$e))break e;for(Ve=Re-280,t(fe!=null);Ce<Se;)Re=u[Ce++],fe.X[(506832829*Re&4294967295)>>>fe.Mb]=Re;Re=Se,t(!(Ve>>>(ct=fe).Xa)),u[Re]=ct.X[Ve],Ve=!0}Ve||t(Z.h==Q(Z))}if(o.Pb&&Z.h&&Se<L)t(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&ke(o.s.vb,o.s.Wa);else{if(Z.h)break e;E!=null&&E(o,B>D?D:B),o.a=0,o.$=Se-g}return 1}return o.a=3,0}function ni(o){t(o!=null),o.vc=null,o.yc=null,o.Ya=null;var u=o.Wa;u!=null&&(u.X=null),o.vb=null,t(o!=null)}function Ar(){var o=new gm;return o==null?null:(o.a=0,o.xb=Lf,Nt("Predictor","VP8LPredictors"),Nt("Predictor","VP8LPredictors_C"),Nt("PredictorAdd","VP8LPredictorsAdd"),Nt("PredictorAdd","VP8LPredictorsAdd_C"),Zc=ye,Aa=Fe,zr=Oe,yr=_t,Fs=mt,as=Ct,os=nt,O.VP8LMapColor32b=fo,O.VP8LMapColor8b=td,o)}function Rn(o,u,g,b,L){var D=1,E=[o],B=[u],$=b.m,Z=b.s,pe=null,Se=0;e:for(;;){if(g)for(;D&&oe($,1);){var Ce=E,ve=B,$e=b,_e=1,fe=$e.m,ge=$e.gc[$e.ab],Ee=oe(fe,2);if($e.Oc&1<<Ee)D=0;else{switch($e.Oc|=1<<Ee,ge.hc=Ee,ge.Ea=Ce[0],ge.nc=ve[0],ge.K=[null],++$e.ab,t(4>=$e.ab),Ee){case 0:case 1:ge.b=oe(fe,3)+2,_e=Rn(be(ge.Ea,ge.b),be(ge.nc,ge.b),0,$e,ge.K),ge.K=ge.K[0];break;case 3:var Ve,Re=oe(fe,8)+1,ct=16<Re?0:4<Re?1:2<Re?2:3;if(Ce[0]=be(ge.Ea,ct),ge.b=ct,Ve=_e=Rn(Re,1,0,$e,ge.K)){var rt,jt=Re,st=ge,Vt=1<<(8>>st.b),Gt=a(Vt);if(Gt==null)Ve=0;else{var qt=st.K[0],Ft=st.w;for(Gt[0]=st.K[0][0],rt=1;rt<1*jt;++rt)Gt[rt]=ie(qt[Ft+rt],Gt[rt-1]);for(;rt<4*Vt;++rt)Gt[rt]=0;st.K[0]=null,st.K[0]=Gt,Ve=1}}_e=Ve;break;case 2:break;default:t(0)}D=_e}}if(E=E[0],B=B[0],D&&oe($,1)&&!(D=1<=(Se=oe($,4))&&11>=Se)){b.a=3;break e}var Zt;if(Zt=D)t:{var Xt,Tt,Tn,_r=b,Mn=E,Ir=B,Wt=Se,Vr=g,Gr=_r.m,Vn=_r.s,Zn=[null],br=1,ui=0,Hi=I2[Wt];n:for(;;){if(Vr&&oe(Gr,1)){var Gn=oe(Gr,3)+2,us=be(Mn,Gn),Ia=be(Ir,Gn),No=us*Ia;if(!Rn(us,Ia,0,_r,Zn))break n;for(Zn=Zn[0],Vn.xc=Gn,Xt=0;Xt<No;++Xt){var $s=Zn[Xt]>>8&65535;Zn[Xt]=$s,$s>=br&&(br=$s+1)}}if(Gr.h)break n;for(Tt=0;5>Tt;++Tt){var vn=kf[Tt];!Tt&&0<Wt&&(vn+=1<<Wt),ui<vn&&(ui=vn)}var km=l(br*Hi,k),Ff=br,Of=l(Ff,R);if(Of==null)var hd=null;else t(65536>=Ff),hd=Of;var Ol=a(ui);if(hd==null||Ol==null||km==null){_r.a=1;break n}var pd=km;for(Xt=Tn=0;Xt<br;++Xt){var ki=hd[Xt],bo=ki.G,jo=ki.H,Rf=0,fd=1,Bf=0;for(Tt=0;5>Tt;++Tt){vn=kf[Tt],bo[Tt]=pd,jo[Tt]=Tn,!Tt&&0<Wt&&(vn+=1<<Wt);i:{var gd,Am=vn,xd=_r,Rl=Ol,Z2=pd,ev=Tn,Lm=0,Hs=xd.m,tv=oe(Hs,1);if(s(Rl,0,0,Am),tv){var nv=oe(Hs,1)+1,rv=oe(Hs,1),qf=oe(Hs,rv==0?1:8);Rl[qf]=1,nv==2&&(Rl[qf=oe(Hs,8)]=1);var vd=1}else{var $f=a(19),Hf=oe(Hs,4)+4;if(19<Hf){xd.a=3;var yd=0;break i}for(gd=0;gd<Hf;++gd)$f[z2[gd]]=oe(Hs,3);var Pm=void 0,Bl=void 0,Uf=xd,iv=$f,Nd=Am,Vf=Rl,zm=0,Us=Uf.m,Gf=8,Wf=l(128,k);r:for(;M(Wf,0,7,iv,19);){if(oe(Us,1)){var sv=2+2*oe(Us,3);if((Pm=2+oe(Us,sv))>Nd)break r}else Pm=Nd;for(Bl=0;Bl<Nd&&Pm--;){ae(Us);var Jf=Wf[0+(127&U(Us))];G(Us,Us.u+Jf.g);var wo=Jf.value;if(16>wo)Vf[Bl++]=wo,wo!=0&&(Gf=wo);else{var av=wo==16,Yf=wo-16,ov=L2[Yf],Qf=oe(Us,A2[Yf])+ov;if(Bl+Qf>Nd)break r;for(var lv=av?Gf:0;0<Qf--;)Vf[Bl++]=lv}}zm=1;break r}zm||(Uf.a=3),vd=zm}(vd=vd&&!Hs.h)&&(Lm=M(Z2,ev,8,Rl,Am)),vd&&Lm!=0?yd=Lm:(xd.a=3,yd=0)}if(yd==0)break n;if(fd&&P2[Tt]==1&&(fd=pd[Tn].g==0),Rf+=pd[Tn].g,Tn+=yd,3>=Tt){var ql,_m=Ol[0];for(ql=1;ql<vn;++ql)Ol[ql]>_m&&(_m=Ol[ql]);Bf+=_m}}if(ki.nd=fd,ki.Qb=0,fd&&(ki.qb=(bo[3][jo[3]+0].value<<24|bo[1][jo[1]+0].value<<16|bo[2][jo[2]+0].value)>>>0,Rf==0&&256>bo[0][jo[0]+0].value&&(ki.Qb=1,ki.qb+=bo[0][jo[0]+0].value<<8)),ki.jc=!ki.Qb&&6>Bf,ki.jc){var bd,ms=ki;for(bd=0;bd<Xn;++bd){var Vs=bd,Gs=ms.pd[Vs],jd=ms.G[0][ms.H[0]+Vs];256<=jd.value?(Gs.g=jd.g+256,Gs.value=jd.value):(Gs.g=0,Gs.value=0,Vs>>=Cn(jd,8,Gs),Vs>>=Cn(ms.G[1][ms.H[1]+Vs],16,Gs),Vs>>=Cn(ms.G[2][ms.H[2]+Vs],0,Gs),Cn(ms.G[3][ms.H[3]+Vs],24,Gs))}}}Vn.vc=Zn,Vn.Wb=br,Vn.Ya=hd,Vn.yc=km,Zt=1;break t}Zt=0}if(!(D=Zt)){b.a=3;break e}if(0<Se){if(Z.ua=1<<Se,!tt(Z.Wa,Se)){b.a=1,D=0;break e}}else Z.ua=0;var Im=b,Kf=E,cv=B,Tm=Im.s,Mm=Tm.xc;if(Im.c=Kf,Im.i=cv,Tm.md=be(Kf,Mm),Tm.wc=Mm==0?-1:(1<<Mm)-1,g){b.xb=B2;break e}if((pe=a(E*B))==null){b.a=1,D=0;break e}D=(D=kr(b,pe,0,E,B,B,null))&&!$.h;break e}return D?(L!=null?L[0]=pe:(t(pe==null),t(g)),b.$=0,g||ni(Z)):ni(Z),D}function es(o,u){var g=o.c*o.i,b=g+u+16*u;return t(o.c<=u),o.V=a(b),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+g+u,1)}function ks(o,u){var g=o.C,b=u-g,L=o.V,D=o.Ba+o.c*g;for(t(u<=o.l.o);0<b;){var E=16<b?16:b,B=o.l.ma,$=o.l.width,Z=$*E,pe=B.ca,Se=B.tb+$*g,Ce=o.Ta,ve=o.Ua;xr(o,E,L,D),An(Ce,ve,pe,Se,Z),qr(B,g,g+E,pe,Se,$),b-=E,L+=E*o.c,g+=E}t(g==u),o.C=o.Ma=u}function ts(){this.ub=this.yd=this.td=this.Rb=0}function As(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ls(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Za(){this.Yb=function(){var o=[];return function u(g,b,L){for(var D=L[b],E=0;E<D&&(g.push(L.length>b+1?[]:0),!(L.length<b+1));E++)u(g[E],b+1,L)}(o,0,[3,11]),o}()}function ml(){this.jb=a(3),this.Wc=d([4,8],Za),this.Xc=d([4,17],Za)}function hl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Ps(){this.ld=this.La=this.dd=this.tc=0}function eo(){this.Na=this.la=0}function pl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Na(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ns(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ps),this.Y=0,this.ya=Array(new Na),this.aa=0,this.l=new ii}function ri(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Bn(){this.cb=this.a=0,this.sc="",this.m=new Pe,this.Od=new ts,this.Kc=new As,this.ed=new hl,this.Qa=new Ls,this.Ic=this.$c=this.Aa=0,this.D=new ns,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,Pe),this.ia=0,this.pb=l(4,pl),this.Pa=new ml,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ri),this.Hd=0,this.rb=Array(new eo),this.sb=0,this.wa=Array(new Ps),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Na),this.L=this.aa=0,this.gd=d([4,2],Ps),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ii(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fl(){var o=new Bn;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,El||(El=ba)),o}function dn(o,u,g){return o.a==0&&(o.a=u,o.sc=g,o.cb=0),0}function to(o,u,g){return 3<=g&&o[u+0]==157&&o[u+1]==1&&o[u+2]==42}function rs(o,u){if(o==null)return 0;if(o.a=0,o.sc="OK",u==null)return dn(o,2,"null VP8Io passed to VP8GetHeaders()");var g=u.data,b=u.w,L=u.ha;if(4>L)return dn(o,7,"Truncated header.");var D=g[b+0]|g[b+1]<<8|g[b+2]<<16,E=o.Od;if(E.Rb=!(1&D),E.td=D>>1&7,E.yd=D>>4&1,E.ub=D>>5,3<E.td)return dn(o,3,"Incorrect keyframe parameters.");if(!E.yd)return dn(o,4,"Frame not displayable.");b+=3,L-=3;var B=o.Kc;if(E.Rb){if(7>L)return dn(o,7,"cannot parse picture header");if(!to(g,b,L))return dn(o,3,"Bad code word");B.c=16383&(g[b+4]<<8|g[b+3]),B.Td=g[b+4]>>6,B.i=16383&(g[b+6]<<8|g[b+5]),B.Ud=g[b+6]>>6,b+=7,L-=7,o.za=B.c+15>>4,o.Ub=B.i+15>>4,u.width=B.c,u.height=B.i,u.Da=0,u.j=0,u.v=0,u.va=u.width,u.o=u.height,u.da=0,u.ib=u.width,u.hb=u.height,u.U=u.width,u.T=u.height,s((D=o.Pa).jb,0,255,D.jb.length),t((D=o.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,s(D.Zb,0,0,D.Zb.length),s(D.Lb,0,0,D.Lb)}if(E.ub>L)return dn(o,7,"bad partition length");T(D=o.m,g,b,E.ub),b+=E.ub,L-=E.ub,E.Rb&&(B.Ld=xe(D),B.Kd=xe(D)),B=o.Qa;var $,Z=o.Pa;if(t(D!=null),t(B!=null),B.Cb=xe(D),B.Cb){if(B.Bb=xe(D),xe(D)){for(B.Fb=xe(D),$=0;4>$;++$)B.Zb[$]=xe(D)?re(D,7):0;for($=0;4>$;++$)B.Lb[$]=xe(D)?re(D,6):0}if(B.Bb)for($=0;3>$;++$)Z.jb[$]=xe(D)?F(D,8):255}else B.Bb=0;if(D.Ka)return dn(o,3,"cannot parse segment header");if((B=o.ed).zd=xe(D),B.Tb=F(D,6),B.wb=F(D,3),B.Pc=xe(D),B.Pc&&xe(D)){for(Z=0;4>Z;++Z)xe(D)&&(B.vd[Z]=re(D,6));for(Z=0;4>Z;++Z)xe(D)&&(B.od[Z]=re(D,6))}if(o.L=B.Tb==0?0:B.zd?1:2,D.Ka)return dn(o,3,"cannot parse filter header");var pe=L;if(L=$=b,b=$+pe,B=pe,o.Xb=(1<<F(o.m,2))-1,pe<3*(Z=o.Xb))g=7;else{for($+=3*Z,B-=3*Z,pe=0;pe<Z;++pe){var Se=g[L+0]|g[L+1]<<8|g[L+2]<<16;Se>B&&(Se=B),T(o.Jc[+pe],g,$,Se),$+=Se,B-=Se,L+=3}T(o.Jc[+Z],g,$,B),g=$<b?0:5}if(g!=0)return dn(o,g,"cannot parse partitions");for(g=F($=o.m,7),L=xe($)?re($,4):0,b=xe($)?re($,4):0,B=xe($)?re($,4):0,Z=xe($)?re($,4):0,$=xe($)?re($,4):0,pe=o.Qa,Se=0;4>Se;++Se){if(pe.Cb){var Ce=pe.Zb[Se];pe.Fb||(Ce+=g)}else{if(0<Se){o.pb[Se]=o.pb[0];continue}Ce=g}var ve=o.pb[Se];ve.Sc[0]=wm[Hr(Ce+L,127)],ve.Sc[1]=Sm[Hr(Ce+0,127)],ve.Eb[0]=2*wm[Hr(Ce+b,127)],ve.Eb[1]=101581*Sm[Hr(Ce+B,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=wm[Hr(Ce+Z,117)],ve.Qc[1]=Sm[Hr(Ce+$,127)],ve.lc=Ce+$}if(!E.Rb)return dn(o,4,"Not a key frame.");for(xe(D),E=o.Pa,g=0;4>g;++g){for(L=0;8>L;++L)for(b=0;3>b;++b)for(B=0;11>B;++B)Z=we(D,O2[g][L][b][B])?F(D,8):E2[g][L][b][B],E.Wc[g][L].Yb[b][B]=Z;for(L=0;17>L;++L)E.Xc[g][L]=E.Wc[g][R2[L]]}return o.kc=xe(D),o.kc&&(o.Bd=F(D,8)),o.cb=1}function ba(o,u,g,b,L,D,E){var B=u[L].Yb[g];for(g=0;16>L;++L){if(!we(o,B[g+0]))return L;for(;!we(o,B[g+1]);)if(B=u[++L].Yb[0],g=0,L==16)return 16;var $=u[L+1].Yb;if(we(o,B[g+2])){var Z=o,pe=0;if(we(Z,(Ce=B)[(Se=g)+3]))if(we(Z,Ce[Se+6])){for(B=0,Se=2*(pe=we(Z,Ce[Se+8]))+(Ce=we(Z,Ce[Se+9+pe])),pe=0,Ce=M2[Se];Ce[B];++B)pe+=pe+we(Z,Ce[B]);pe+=3+(8<<Se)}else we(Z,Ce[Se+7])?(pe=7+2*we(Z,165),pe+=we(Z,145)):pe=5+we(Z,159);else pe=we(Z,Ce[Se+4])?3+we(Z,Ce[Se+5]):2;B=$[2]}else pe=1,B=$[1];$=E+D2[L],0>(Z=o).b&&he(Z);var Se,Ce=Z.b,ve=(Se=Z.Ca>>1)-(Z.I>>Ce)>>31;--Z.b,Z.Ca+=ve,Z.Ca|=1,Z.I-=(Se+1&ve)<<Ce,D[$]=((pe^ve)-ve)*b[(0<L)+0]}return 16}function zs(o){var u=o.rb[o.sb-1];u.la=0,u.Na=0,s(o.zc,0,0,o.zc.length),o.ja=0}function no(o,u){if(o==null)return 0;if(u==null)return dn(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!rs(o,u))return 0;if(t(o.cb),u.ac==null||u.ac(u)){u.ob&&(o.L=0);var g=md[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=u.v-g>>4,o.zb=u.j-g>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=u.o+15+g>>4,o.Hb=u.va+15+g>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var b=o.ed;for(g=0;4>g;++g){var L;if(o.Qa.Cb){var D=o.Qa.Lb[g];o.Qa.Fb||(D+=b.Tb)}else D=b.Tb;for(L=0;1>=L;++L){var E=o.gd[g][L],B=D;if(b.Pc&&(B+=b.vd[0],L&&(B+=b.od[0])),0<(B=0>B?0:63<B?63:B)){var $=B;0<b.wb&&($=4<b.wb?$>>2:$>>1)>9-b.wb&&($=9-b.wb),1>$&&($=1),E.dd=$,E.tc=2*B+$,E.ld=40<=B?2:15<=B?1:0}else E.tc=0;E.La=L}}}g=0}else dn(o,6,"Frame setup failed"),g=o.a;if(g=g==0){if(g){o.$c=0,0<o.Aa||(o.Ic=X2);e:{g=o.Ic,b=4*($=o.za);var Z=32*$,pe=$+1,Se=0<o.L?$*(0<o.Aa?2:1):0,Ce=(o.Aa==2?2:1)*$;if((E=b+832+(L=3*(16*g+md[o.L])/2*Z)+(D=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=E)g=0;else{if(E>o.Vb){if(o.Vb=0,o.Ec=a(E),o.Fc=0,o.Ec==null){g=dn(o,1,"no memory during frame initialization.");break e}o.Vb=E}E=o.Ec,B=o.Fc,o.Ac=E,o.Bc=B,B+=b,o.Gd=l(Z,ri),o.Hd=0,o.rb=l(pe+1,eo),o.sb=1,o.wa=Se?l(Se,Ps):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=$),t(!0),o.oc=E,o.pc=B,B+=832,o.ya=l(Ce,Na),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=$),o.R=16*$,o.B=8*$,$=(Z=md[o.L])*o.R,Z=Z/2*o.B,o.sa=E,o.ta=B+$,o.qa=o.sa,o.ra=o.ta+16*g*o.R+Z,o.Ha=o.qa,o.Ia=o.ra+8*g*o.B+Z,o.$c=0,B+=L,o.mb=D?E:null,o.nb=D?B:null,t(B+D<=o.Fc+o.Vb),zs(o),s(o.Ac,o.Bc,0,b),g=1}}if(g){if(u.ka=0,u.y=o.sa,u.O=o.ta,u.f=o.qa,u.N=o.ra,u.ea=o.Ha,u.Vd=o.Ia,u.fa=o.R,u.Rc=o.B,u.F=null,u.J=0,!rd){for(g=-255;255>=g;++g)qn[255+g]=0>g?-g:g;for(g=-1020;1020>=g;++g)cs[1020+g]=-128>g?-128:127<g?127:g;for(g=-112;112>=g;++g)Dl[112+g]=-16>g?-16:15<g?15:g;for(g=-255;510>=g;++g)yo[255+g]=0>g?0:255<g?255:g;rd=1}go=bt,ls=Y,Il=Le,Nr=Xe,ai=Lt,kn=ja,xo=yl,nd=Ca,Tl=fm,La=Nl,Pa=pm,Os=ao,za=bl,vo=Qc,_a=Yc,Rs=qi,Ml=ss,oi=hm,Ci[0]=Bi,Ci[1]=Dt,Ci[2]=om,Ci[3]=lm,Ci[4]=Uc,Ci[5]=io,Ci[6]=Vc,Ci[7]=gl,Ci[8]=dm,Ci[9]=cm,Bs[0]=ro,Bs[1]=Ri,Bs[2]=Bt,Bs[3]=vr,Bs[4]=sr,Bs[5]=am,Bs[6]=Hc,ds[0]=Ts,ds[1]=un,ds[2]=um,ds[3]=xl,ds[4]=Sa,ds[5]=mm,ds[6]=vl,g=1}else g=0}g&&(g=function(ve,$e){for(ve.M=0;ve.M<ve.Va;++ve.M){var _e,fe=ve.Jc[ve.M&ve.Xb],ge=ve.m,Ee=ve;for(_e=0;_e<Ee.za;++_e){var Ve=ge,Re=Ee,ct=Re.Ac,rt=Re.Bc+4*_e,jt=Re.zc,st=Re.ya[Re.aa+_e];if(Re.Qa.Bb?st.$b=we(Ve,Re.Pa.jb[0])?2+we(Ve,Re.Pa.jb[2]):we(Ve,Re.Pa.jb[1]):st.$b=0,Re.kc&&(st.Ad=we(Ve,Re.Bd)),st.Za=!we(Ve,145)+0,st.Za){var Vt=st.Ob,Gt=0;for(Re=0;4>Re;++Re){var qt,Ft=jt[0+Re];for(qt=0;4>qt;++qt){Ft=F2[ct[rt+qt]][Ft];for(var Zt=Af[we(Ve,Ft[0])];0<Zt;)Zt=Af[2*Zt+we(Ve,Ft[Zt])];Ft=-Zt,ct[rt+qt]=Ft}i(Vt,Gt,ct,rt,4),Gt+=4,jt[0+Re]=Ft}}else Ft=we(Ve,156)?we(Ve,128)?1:3:we(Ve,163)?2:0,st.Ob[0]=Ft,s(ct,rt,Ft,4),s(jt,0,Ft,4);st.Dd=we(Ve,142)?we(Ve,114)?we(Ve,183)?1:3:2:0}if(Ee.m.Ka)return dn(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Ee=fe,Ve=(ge=ve).rb[ge.sb-1],ct=ge.rb[ge.sb+ge.ja],_e=ge.ya[ge.aa+ge.ja],rt=ge.kc?_e.Ad:0)Ve.la=ct.la=0,_e.Za||(Ve.Na=ct.Na=0),_e.Hc=0,_e.Gc=0,_e.ia=0;else{var Xt,Tt;if(Ve=ct,ct=Ee,rt=ge.Pa.Xc,jt=ge.ya[ge.aa+ge.ja],st=ge.pb[jt.$b],Re=jt.ad,Vt=0,Gt=ge.rb[ge.sb-1],Ft=qt=0,s(Re,Vt,0,384),jt.Za)var Tn=0,_r=rt[3];else{Zt=a(16);var Mn=Ve.Na+Gt.Na;if(Mn=El(ct,rt[1],Mn,st.Eb,0,Zt,0),Ve.Na=Gt.Na=(0<Mn)+0,1<Mn)go(Zt,0,Re,Vt);else{var Ir=Zt[0]+3>>3;for(Zt=0;256>Zt;Zt+=16)Re[Vt+Zt]=Ir}Tn=1,_r=rt[0]}var Wt=15&Ve.la,Vr=15&Gt.la;for(Zt=0;4>Zt;++Zt){var Gr=1&Vr;for(Ir=Tt=0;4>Ir;++Ir)Wt=Wt>>1|(Gr=(Mn=El(ct,_r,Mn=Gr+(1&Wt),st.Sc,Tn,Re,Vt))>Tn)<<7,Tt=Tt<<2|(3<Mn?3:1<Mn?2:Re[Vt+0]!=0),Vt+=16;Wt>>=4,Vr=Vr>>1|Gr<<7,qt=(qt<<8|Tt)>>>0}for(_r=Wt,Tn=Vr>>4,Xt=0;4>Xt;Xt+=2){for(Tt=0,Wt=Ve.la>>4+Xt,Vr=Gt.la>>4+Xt,Zt=0;2>Zt;++Zt){for(Gr=1&Vr,Ir=0;2>Ir;++Ir)Mn=Gr+(1&Wt),Wt=Wt>>1|(Gr=0<(Mn=El(ct,rt[2],Mn,st.Qc,0,Re,Vt)))<<3,Tt=Tt<<2|(3<Mn?3:1<Mn?2:Re[Vt+0]!=0),Vt+=16;Wt>>=2,Vr=Vr>>1|Gr<<5}Ft|=Tt<<4*Xt,_r|=Wt<<4<<Xt,Tn|=(240&Vr)<<Xt}Ve.la=_r,Gt.la=Tn,jt.Hc=qt,jt.Gc=Ft,jt.ia=43690&Ft?0:st.ia,rt=!(qt|Ft)}if(0<ge.L&&(ge.wa[ge.Y+ge.ja]=ge.gd[_e.$b][_e.Za],ge.wa[ge.Y+ge.ja].La|=!rt),Ee.Ka)return dn(ve,7,"Premature end-of-file encountered.")}if(zs(ve),ge=$e,Ee=1,_e=(fe=ve).D,Ve=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(_e.M=fe.M,_e.uc=Ve,Al(fe,_e),Ee=1,_e=(Tt=fe.D).Nb,Ve=(Ft=md[fe.L])*fe.R,ct=Ft/2*fe.B,Zt=16*_e*fe.R,Ir=8*_e*fe.B,rt=fe.sa,jt=fe.ta-Ve+Zt,st=fe.qa,Re=fe.ra-ct+Ir,Vt=fe.Ha,Gt=fe.Ia-ct+Ir,Vr=(Wt=Tt.M)==0,qt=Wt>=fe.Va-1,fe.Aa==2&&Al(fe,Tt),Tt.uc)for(Gr=(Mn=fe).D.M,t(Mn.D.uc),Tt=Mn.yb;Tt<Mn.Hb;++Tt){Tn=Tt,_r=Gr;var Vn=(Zn=(vn=Mn).D).Nb;Xt=vn.R;var Zn=Zn.wa[Zn.Y+Tn],br=vn.sa,ui=vn.ta+16*Vn*Xt+16*Tn,Hi=Zn.dd,Gn=Zn.tc;if(Gn!=0)if(t(3<=Gn),vn.L==1)0<Tn&&Rs(br,ui,Xt,Gn+4),Zn.La&&oi(br,ui,Xt,Gn),0<_r&&_a(br,ui,Xt,Gn+4),Zn.La&&Ml(br,ui,Xt,Gn);else{var us=vn.B,Ia=vn.qa,No=vn.ra+8*Vn*us+8*Tn,$s=vn.Ha,vn=vn.Ia+8*Vn*us+8*Tn;Vn=Zn.ld,0<Tn&&(nd(br,ui,Xt,Gn+4,Hi,Vn),La(Ia,No,$s,vn,us,Gn+4,Hi,Vn)),Zn.La&&(Os(br,ui,Xt,Gn,Hi,Vn),vo(Ia,No,$s,vn,us,Gn,Hi,Vn)),0<_r&&(xo(br,ui,Xt,Gn+4,Hi,Vn),Tl(Ia,No,$s,vn,us,Gn+4,Hi,Vn)),Zn.La&&(Pa(br,ui,Xt,Gn,Hi,Vn),za(Ia,No,$s,vn,us,Gn,Hi,Vn))}}if(fe.ia&&alert("todo:DitherRow"),ge.put!=null){if(Tt=16*Wt,Wt=16*(Wt+1),Vr?(ge.y=fe.sa,ge.O=fe.ta+Zt,ge.f=fe.qa,ge.N=fe.ra+Ir,ge.ea=fe.Ha,ge.W=fe.Ia+Ir):(Tt-=Ft,ge.y=rt,ge.O=jt,ge.f=st,ge.N=Re,ge.ea=Vt,ge.W=Gt),qt||(Wt-=Ft),Wt>ge.o&&(Wt=ge.o),ge.F=null,ge.J=null,fe.Fa!=null&&0<fe.Fa.length&&Tt<Wt&&(ge.J=Cl(fe,ge,Tt,Wt-Tt),ge.F=fe.mb,ge.F==null&&ge.F.length==0)){Ee=dn(fe,3,"Could not decode alpha data.");break e}Tt<ge.j&&(Ft=ge.j-Tt,Tt=ge.j,t(!(1&Ft)),ge.O+=fe.R*Ft,ge.N+=fe.B*(Ft>>1),ge.W+=fe.B*(Ft>>1),ge.F!=null&&(ge.J+=ge.width*Ft)),Tt<Wt&&(ge.O+=ge.v,ge.N+=ge.v>>1,ge.W+=ge.v>>1,ge.F!=null&&(ge.J+=ge.v),ge.ka=Tt-ge.j,ge.U=ge.va-ge.v,ge.T=Wt-Tt,Ee=ge.put(ge))}_e+1!=fe.Ic||qt||(i(fe.sa,fe.ta-Ve,rt,jt+16*fe.R,Ve),i(fe.qa,fe.ra-ct,st,Re+8*fe.B,ct),i(fe.Ha,fe.Ia-ct,Vt,Gt+8*fe.B,ct))}if(!Ee)return dn(ve,6,"Output aborted.")}return 1}(o,u)),u.bc!=null&&u.bc(u),g&=1}return g?(o.cb=0,g):0}function Lr(o,u,g,b,L){L=o[u+g+32*b]+(L>>3),o[u+g+32*b]=-256&L?0>L?0:255:L}function is(o,u,g,b,L,D){Lr(o,u,0,g,b+L),Lr(o,u,1,g,b+D),Lr(o,u,2,g,b-D),Lr(o,u,3,g,b-L)}function Kn(o){return(20091*o>>16)+o}function _s(o,u,g,b){var L,D=0,E=a(16);for(L=0;4>L;++L){var B=o[u+0]+o[u+8],$=o[u+0]-o[u+8],Z=(35468*o[u+4]>>16)-Kn(o[u+12]),pe=Kn(o[u+4])+(35468*o[u+12]>>16);E[D+0]=B+pe,E[D+1]=$+Z,E[D+2]=$-Z,E[D+3]=B-pe,D+=4,u++}for(L=D=0;4>L;++L)B=(o=E[D+0]+4)+E[D+8],$=o-E[D+8],Z=(35468*E[D+4]>>16)-Kn(E[D+12]),Lr(g,b,0,0,B+(pe=Kn(E[D+4])+(35468*E[D+12]>>16))),Lr(g,b,1,0,$+Z),Lr(g,b,2,0,$-Z),Lr(g,b,3,0,B-pe),D++,b+=32}function ja(o,u,g,b){var L=o[u+0]+4,D=35468*o[u+4]>>16,E=Kn(o[u+4]),B=35468*o[u+1]>>16;is(g,b,0,L+E,o=Kn(o[u+1]),B),is(g,b,1,L+D,o,B),is(g,b,2,L-D,o,B),is(g,b,3,L-E,o,B)}function Y(o,u,g,b,L){_s(o,u,g,b),L&&_s(o,u+16,g,b+4)}function Le(o,u,g,b){ls(o,u+0,g,b,1),ls(o,u+32,g,b+128,1)}function Xe(o,u,g,b){var L;for(o=o[u+0]+4,L=0;4>L;++L)for(u=0;4>u;++u)Lr(g,b,u,L,o)}function Lt(o,u,g,b){o[u+0]&&Nr(o,u+0,g,b),o[u+16]&&Nr(o,u+16,g,b+4),o[u+32]&&Nr(o,u+32,g,b+128),o[u+48]&&Nr(o,u+48,g,b+128+4)}function bt(o,u,g,b){var L,D=a(16);for(L=0;4>L;++L){var E=o[u+0+L]+o[u+12+L],B=o[u+4+L]+o[u+8+L],$=o[u+4+L]-o[u+8+L],Z=o[u+0+L]-o[u+12+L];D[0+L]=E+B,D[8+L]=E-B,D[4+L]=Z+$,D[12+L]=Z-$}for(L=0;4>L;++L)E=(o=D[0+4*L]+3)+D[3+4*L],B=D[1+4*L]+D[2+4*L],$=D[1+4*L]-D[2+4*L],Z=o-D[3+4*L],g[b+0]=E+B>>3,g[b+16]=Z+$>>3,g[b+32]=E-B>>3,g[b+48]=Z-$>>3,b+=64}function kt(o,u,g){var b,L=u-32,D=Ur,E=255-o[L-1];for(b=0;b<g;++b){var B,$=D,Z=E+o[u-1];for(B=0;B<g;++B)o[u+B]=$[Z+o[L+B]];u+=32}}function Dt(o,u){kt(o,u,4)}function un(o,u){kt(o,u,8)}function Ri(o,u){kt(o,u,16)}function Bt(o,u){var g;for(g=0;16>g;++g)i(o,u+32*g,o,u-32,16)}function vr(o,u){var g;for(g=16;0<g;--g)s(o,u,o[u-1],16),u+=32}function Is(o,u,g){var b;for(b=0;16>b;++b)s(u,g+32*b,o,16)}function ro(o,u){var g,b=16;for(g=0;16>g;++g)b+=o[u-1+32*g]+o[u+g-32];Is(b>>5,o,u)}function sr(o,u){var g,b=8;for(g=0;16>g;++g)b+=o[u-1+32*g];Is(b>>4,o,u)}function am(o,u){var g,b=8;for(g=0;16>g;++g)b+=o[u+g-32];Is(b>>4,o,u)}function Hc(o,u){Is(128,o,u)}function At(o,u,g){return o+2*u+g+2>>2}function om(o,u){var g,b=u-32;for(b=new Uint8Array([At(o[b-1],o[b+0],o[b+1]),At(o[b+0],o[b+1],o[b+2]),At(o[b+1],o[b+2],o[b+3]),At(o[b+2],o[b+3],o[b+4])]),g=0;4>g;++g)i(o,u+32*g,b,0,b.length)}function lm(o,u){var g=o[u-1],b=o[u-1+32],L=o[u-1+64],D=o[u-1+96];Be(o,u+0,16843009*At(o[u-1-32],g,b)),Be(o,u+32,16843009*At(g,b,L)),Be(o,u+64,16843009*At(b,L,D)),Be(o,u+96,16843009*At(L,D,D))}function Bi(o,u){var g,b=4;for(g=0;4>g;++g)b+=o[u+g-32]+o[u-1+32*g];for(b>>=3,g=0;4>g;++g)s(o,u+32*g,b,4)}function Uc(o,u){var g=o[u-1+0],b=o[u-1+32],L=o[u-1+64],D=o[u-1-32],E=o[u+0-32],B=o[u+1-32],$=o[u+2-32],Z=o[u+3-32];o[u+0+96]=At(b,L,o[u-1+96]),o[u+1+96]=o[u+0+64]=At(g,b,L),o[u+2+96]=o[u+1+64]=o[u+0+32]=At(D,g,b),o[u+3+96]=o[u+2+64]=o[u+1+32]=o[u+0+0]=At(E,D,g),o[u+3+64]=o[u+2+32]=o[u+1+0]=At(B,E,D),o[u+3+32]=o[u+2+0]=At($,B,E),o[u+3+0]=At(Z,$,B)}function Vc(o,u){var g=o[u+1-32],b=o[u+2-32],L=o[u+3-32],D=o[u+4-32],E=o[u+5-32],B=o[u+6-32],$=o[u+7-32];o[u+0+0]=At(o[u+0-32],g,b),o[u+1+0]=o[u+0+32]=At(g,b,L),o[u+2+0]=o[u+1+32]=o[u+0+64]=At(b,L,D),o[u+3+0]=o[u+2+32]=o[u+1+64]=o[u+0+96]=At(L,D,E),o[u+3+32]=o[u+2+64]=o[u+1+96]=At(D,E,B),o[u+3+64]=o[u+2+96]=At(E,B,$),o[u+3+96]=At(B,$,$)}function io(o,u){var g=o[u-1+0],b=o[u-1+32],L=o[u-1+64],D=o[u-1-32],E=o[u+0-32],B=o[u+1-32],$=o[u+2-32],Z=o[u+3-32];o[u+0+0]=o[u+1+64]=D+E+1>>1,o[u+1+0]=o[u+2+64]=E+B+1>>1,o[u+2+0]=o[u+3+64]=B+$+1>>1,o[u+3+0]=$+Z+1>>1,o[u+0+96]=At(L,b,g),o[u+0+64]=At(b,g,D),o[u+0+32]=o[u+1+96]=At(g,D,E),o[u+1+32]=o[u+2+96]=At(D,E,B),o[u+2+32]=o[u+3+96]=At(E,B,$),o[u+3+32]=At(B,$,Z)}function gl(o,u){var g=o[u+0-32],b=o[u+1-32],L=o[u+2-32],D=o[u+3-32],E=o[u+4-32],B=o[u+5-32],$=o[u+6-32],Z=o[u+7-32];o[u+0+0]=g+b+1>>1,o[u+1+0]=o[u+0+64]=b+L+1>>1,o[u+2+0]=o[u+1+64]=L+D+1>>1,o[u+3+0]=o[u+2+64]=D+E+1>>1,o[u+0+32]=At(g,b,L),o[u+1+32]=o[u+0+96]=At(b,L,D),o[u+2+32]=o[u+1+96]=At(L,D,E),o[u+3+32]=o[u+2+96]=At(D,E,B),o[u+3+64]=At(E,B,$),o[u+3+96]=At(B,$,Z)}function cm(o,u){var g=o[u-1+0],b=o[u-1+32],L=o[u-1+64],D=o[u-1+96];o[u+0+0]=g+b+1>>1,o[u+2+0]=o[u+0+32]=b+L+1>>1,o[u+2+32]=o[u+0+64]=L+D+1>>1,o[u+1+0]=At(g,b,L),o[u+3+0]=o[u+1+32]=At(b,L,D),o[u+3+32]=o[u+1+64]=At(L,D,D),o[u+3+64]=o[u+2+64]=o[u+0+96]=o[u+1+96]=o[u+2+96]=o[u+3+96]=D}function dm(o,u){var g=o[u-1+0],b=o[u-1+32],L=o[u-1+64],D=o[u-1+96],E=o[u-1-32],B=o[u+0-32],$=o[u+1-32],Z=o[u+2-32];o[u+0+0]=o[u+2+32]=g+E+1>>1,o[u+0+32]=o[u+2+64]=b+g+1>>1,o[u+0+64]=o[u+2+96]=L+b+1>>1,o[u+0+96]=D+L+1>>1,o[u+3+0]=At(B,$,Z),o[u+2+0]=At(E,B,$),o[u+1+0]=o[u+3+32]=At(g,E,B),o[u+1+32]=o[u+3+64]=At(b,g,E),o[u+1+64]=o[u+3+96]=At(L,b,g),o[u+1+96]=At(D,L,b)}function um(o,u){var g;for(g=0;8>g;++g)i(o,u+32*g,o,u-32,8)}function xl(o,u){var g;for(g=0;8>g;++g)s(o,u,o[u-1],8),u+=32}function wa(o,u,g){var b;for(b=0;8>b;++b)s(u,g+32*b,o,8)}function Ts(o,u){var g,b=8;for(g=0;8>g;++g)b+=o[u+g-32]+o[u-1+32*g];wa(b>>4,o,u)}function mm(o,u){var g,b=4;for(g=0;8>g;++g)b+=o[u+g-32];wa(b>>3,o,u)}function Sa(o,u){var g,b=4;for(g=0;8>g;++g)b+=o[u-1+32*g];wa(b>>3,o,u)}function vl(o,u){wa(128,o,u)}function so(o,u,g){var b=o[u-g],L=o[u+0],D=3*(L-b)+vm[1020+o[u-2*g]-o[u+g]],E=id[112+(D+4>>3)];o[u-g]=Ur[255+b+id[112+(D+3>>3)]],o[u+0]=Ur[255+L-E]}function Gc(o,u,g,b){var L=o[u+0],D=o[u+g];return ci[255+o[u-2*g]-o[u-g]]>b||ci[255+D-L]>b}function Wc(o,u,g,b){return 4*ci[255+o[u-g]-o[u+0]]+ci[255+o[u-2*g]-o[u+g]]<=b}function Jc(o,u,g,b,L){var D=o[u-3*g],E=o[u-2*g],B=o[u-g],$=o[u+0],Z=o[u+g],pe=o[u+2*g],Se=o[u+3*g];return 4*ci[255+B-$]+ci[255+E-Z]>b?0:ci[255+o[u-4*g]-D]<=L&&ci[255+D-E]<=L&&ci[255+E-B]<=L&&ci[255+Se-pe]<=L&&ci[255+pe-Z]<=L&&ci[255+Z-$]<=L}function Yc(o,u,g,b){var L=2*b+1;for(b=0;16>b;++b)Wc(o,u+b,g,L)&&so(o,u+b,g)}function qi(o,u,g,b){var L=2*b+1;for(b=0;16>b;++b)Wc(o,u+b*g,1,L)&&so(o,u+b*g,1)}function ss(o,u,g,b){var L;for(L=3;0<L;--L)Yc(o,u+=4*g,g,b)}function hm(o,u,g,b){var L;for(L=3;0<L;--L)qi(o,u+=4,g,b)}function Ms(o,u,g,b,L,D,E,B){for(D=2*D+1;0<L--;){if(Jc(o,u,g,D,E))if(Gc(o,u,g,B))so(o,u,g);else{var $=o,Z=u,pe=g,Se=$[Z-2*pe],Ce=$[Z-pe],ve=$[Z+0],$e=$[Z+pe],_e=$[Z+2*pe],fe=27*(Ee=vm[1020+3*(ve-Ce)+vm[1020+Se-$e]])+63>>7,ge=18*Ee+63>>7,Ee=9*Ee+63>>7;$[Z-3*pe]=Ur[255+$[Z-3*pe]+Ee],$[Z-2*pe]=Ur[255+Se+ge],$[Z-pe]=Ur[255+Ce+fe],$[Z+0]=Ur[255+ve-fe],$[Z+pe]=Ur[255+$e-ge],$[Z+2*pe]=Ur[255+_e-Ee]}u+=b}}function wi(o,u,g,b,L,D,E,B){for(D=2*D+1;0<L--;){if(Jc(o,u,g,D,E))if(Gc(o,u,g,B))so(o,u,g);else{var $=o,Z=u,pe=g,Se=$[Z-pe],Ce=$[Z+0],ve=$[Z+pe],$e=id[112+((_e=3*(Ce-Se))+4>>3)],_e=id[112+(_e+3>>3)],fe=$e+1>>1;$[Z-2*pe]=Ur[255+$[Z-2*pe]+fe],$[Z-pe]=Ur[255+Se+_e],$[Z+0]=Ur[255+Ce-$e],$[Z+pe]=Ur[255+ve-fe]}u+=b}}function yl(o,u,g,b,L,D){Ms(o,u,g,1,16,b,L,D)}function Ca(o,u,g,b,L,D){Ms(o,u,1,g,16,b,L,D)}function pm(o,u,g,b,L,D){var E;for(E=3;0<E;--E)wi(o,u+=4*g,g,1,16,b,L,D)}function ao(o,u,g,b,L,D){var E;for(E=3;0<E;--E)wi(o,u+=4,1,g,16,b,L,D)}function fm(o,u,g,b,L,D,E,B){Ms(o,u,L,1,8,D,E,B),Ms(g,b,L,1,8,D,E,B)}function Nl(o,u,g,b,L,D,E,B){Ms(o,u,1,L,8,D,E,B),Ms(g,b,1,L,8,D,E,B)}function bl(o,u,g,b,L,D,E,B){wi(o,u+4*L,L,1,8,D,E,B),wi(g,b+4*L,L,1,8,D,E,B)}function Qc(o,u,g,b,L,D,E,B){wi(o,u+4,1,L,8,D,E,B),wi(g,b+4,1,L,8,D,E,B)}function oo(){this.ba=new W,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qe,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function jl(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function wl(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Kc(){this.ua=0,this.Wa=new I,this.vb=new I,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new k}function gm(){this.xb=this.a=0,this.l=new ii,this.ca=new W,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new z,this.Pb=0,this.wd=new z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Kc,this.ab=0,this.gc=l(4,wl),this.Oc=0}function lo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ii,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ka(o,u,g,b,L,D,E){for(o=o==null?0:o[u+0],u=0;u<E;++u)L[D+u]=o+g[b+u]&255,o=L[D+u]}function Sl(o,u,g,b,L,D,E){var B;if(o==null)ka(null,null,g,b,L,D,E);else for(B=0;B<E;++B)L[D+B]=o[u+B]+g[b+B]&255}function Ds(o,u,g,b,L,D,E){if(o==null)ka(null,null,g,b,L,D,E);else{var B,$=o[u+0],Z=$,pe=$;for(B=0;B<E;++B)Z=pe+($=o[u+B])-Z,pe=g[b+B]+(-256&Z?0>Z?0:255:Z)&255,Z=$,L[D+B]=pe}}function Cl(o,u,g,b){var L=u.width,D=u.o;if(t(o!=null&&u!=null),0>g||0>=b||g+b>D)return null;if(!o.Cc){if(o.ga==null){var E;if(o.ga=new lo,(E=o.ga==null)||(E=u.width*u.o,t(o.Gb.length==0),o.Gb=a(E),o.Uc=0,o.Gb==null?E=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,E=1),E=!E),!E){E=o.ga;var B=o.Fa,$=o.P,Z=o.qc,pe=o.mb,Se=o.nb,Ce=$+1,ve=Z-1,$e=E.l;if(t(B!=null&&pe!=null&&u!=null),qs[0]=null,qs[1]=ka,qs[2]=Sl,qs[3]=Ds,E.ca=pe,E.tb=Se,E.c=u.width,E.i=u.height,t(0<E.c&&0<E.i),1>=Z)u=0;else if(E.$a=B[$+0]>>0&3,E.Z=B[$+0]>>2&3,E.Lc=B[$+0]>>4&3,$=B[$+0]>>6&3,0>E.$a||1<E.$a||4<=E.Z||1<E.Lc||$)u=0;else if($e.put=Fn,$e.ac=Mt,$e.bc=On,$e.ma=E,$e.width=u.width,$e.height=u.height,$e.Da=u.Da,$e.v=u.v,$e.va=u.va,$e.j=u.j,$e.o=u.o,E.$a)e:{t(E.$a==1),u=Ar();t:for(;;){if(u==null){u=0;break e}if(t(E!=null),E.mc=u,u.c=E.c,u.i=E.i,u.l=E.l,u.l.ma=E,u.l.width=E.c,u.l.height=E.i,u.a=0,q(u.m,B,Ce,ve),!Rn(E.c,E.i,1,u,null)||(u.ab==1&&u.gc[0].hc==3&&ti(u.s)?(E.ic=1,B=u.c*u.i,u.Ta=null,u.Ua=0,u.V=a(B),u.Ba=0,u.V==null?(u.a=1,u=0):u=1):(E.ic=0,u=es(u,E.c)),!u))break t;u=1;break e}E.mc=null,u=0}else u=ve>=E.c*E.i;E=!u}if(E)return null;o.ga.Lc!=1?o.Ga=0:b=D-g}t(o.ga!=null),t(g+b<=D);e:{if(u=(B=o.ga).c,D=B.l.o,B.$a==0){if(Ce=o.rc,ve=o.Vc,$e=o.Fa,$=o.P+1+g*u,Z=o.mb,pe=o.nb+g*u,t($<=o.P+o.qc),B.Z!=0)for(t(qs[B.Z]!=null),E=0;E<b;++E)qs[B.Z](Ce,ve,$e,$,Z,pe,u),Ce=Z,ve=pe,pe+=u,$+=u;else for(E=0;E<b;++E)i(Z,pe,$e,$,u),Ce=Z,ve=pe,pe+=u,$+=u;o.rc=Ce,o.Vc=ve}else{if(t(B.mc!=null),u=g+b,t((E=B.mc)!=null),t(u<=E.i),E.C>=u)u=1;else if(B.ic||Ne(),B.ic){B=E.V,Ce=E.Ba,ve=E.c;var _e=E.i,fe=($e=1,$=E.$/ve,Z=E.$%ve,pe=E.m,Se=E.s,E.$),ge=ve*_e,Ee=ve*u,Ve=Se.wc,Re=fe<Ee?ln(Se,Z,$):null;t(fe<=ge),t(u<=_e),t(ti(Se));t:for(;;){for(;!pe.h&&fe<Ee;){if(Z&Ve||(Re=ln(Se,Z,$)),t(Re!=null),ae(pe),256>(_e=Qn(Re.G[0],Re.H[0],pe)))B[Ce+fe]=_e,++fe,++Z>=ve&&(Z=0,++$<=u&&!($%16)&&$r(E,$));else{if(!(280>_e)){$e=0;break t}_e=ir(_e-256,pe);var ct,rt=Qn(Re.G[4],Re.H[4],pe);if(ae(pe),!(fe>=(rt=ei(ve,rt=ir(rt,pe)))&&ge-fe>=_e)){$e=0;break t}for(ct=0;ct<_e;++ct)B[Ce+fe+ct]=B[Ce+fe+ct-rt];for(fe+=_e,Z+=_e;Z>=ve;)Z-=ve,++$<=u&&!($%16)&&$r(E,$);fe<Ee&&Z&Ve&&(Re=ln(Se,Z,$))}t(pe.h==Q(pe))}$r(E,$>u?u:$);break t}!$e||pe.h&&fe<ge?($e=0,E.a=pe.h?5:3):E.$=fe,u=$e}else u=kr(E,E.V,E.Ba,E.c,E.i,u,ks);if(!u){b=0;break e}}g+b>=D&&(o.Cc=1),b=1}if(!b)return null;if(o.Cc&&((b=o.ga)!=null&&(b.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+g*L}function p(o,u,g,b,L,D){for(;0<L--;){var E,B=o,$=u+(g?1:0),Z=o,pe=u+(g?0:3);for(E=0;E<b;++E){var Se=Z[pe+4*E];Se!=255&&(Se*=32897,B[$+4*E+0]=B[$+4*E+0]*Se>>23,B[$+4*E+1]=B[$+4*E+1]*Se>>23,B[$+4*E+2]=B[$+4*E+2]*Se>>23)}u+=D}}function _(o,u,g,b,L){for(;0<b--;){var D;for(D=0;D<g;++D){var E=o[u+2*D+0],B=15&(Z=o[u+2*D+1]),$=4369*B,Z=(240&Z|Z>>4)*$>>16;o[u+2*D+0]=(240&E|E>>4)*$>>16&240|(15&E|E<<4)*$>>16>>4&15,o[u+2*D+1]=240&Z|B}u+=L}}function se(o,u,g,b,L,D,E,B){var $,Z,pe=255;for(Z=0;Z<L;++Z){for($=0;$<b;++$){var Se=o[u+$];D[E+4*$]=Se,pe&=Se}u+=g,E+=B}return pe!=255}function me(o,u,g,b,L){var D;for(D=0;D<L;++D)g[b+D]=o[u+D]>>8}function Ne(){li=p,tn=_,nn=se,An=me}function Te(o,u,g){O[o]=function(b,L,D,E,B,$,Z,pe,Se,Ce,ve,$e,_e,fe,ge,Ee,Ve){var Re,ct=Ve-1>>1,rt=B[$+0]|Z[pe+0]<<16,jt=Se[Ce+0]|ve[$e+0]<<16;t(b!=null);var st=3*rt+jt+131074>>2;for(u(b[L+0],255&st,st>>16,_e,fe),D!=null&&(st=3*jt+rt+131074>>2,u(D[E+0],255&st,st>>16,ge,Ee)),Re=1;Re<=ct;++Re){var Vt=B[$+Re]|Z[pe+Re]<<16,Gt=Se[Ce+Re]|ve[$e+Re]<<16,qt=rt+Vt+jt+Gt+524296,Ft=qt+2*(Vt+jt)>>3;st=Ft+rt>>1,rt=(qt=qt+2*(rt+Gt)>>3)+Vt>>1,u(b[L+2*Re-1],255&st,st>>16,_e,fe+(2*Re-1)*g),u(b[L+2*Re-0],255&rt,rt>>16,_e,fe+(2*Re-0)*g),D!=null&&(st=qt+jt>>1,rt=Ft+Gt>>1,u(D[E+2*Re-1],255&st,st>>16,ge,Ee+(2*Re-1)*g),u(D[E+2*Re+0],255&rt,rt>>16,ge,Ee+(2*Re+0)*g)),rt=Vt,jt=Gt}1&Ve||(st=3*rt+jt+131074>>2,u(b[L+Ve-1],255&st,st>>16,_e,fe+(Ve-1)*g),D!=null&&(st=3*jt+rt+131074>>2,u(D[E+Ve-1],255&st,st>>16,ge,Ee+(Ve-1)*g)))}}function Ye(){di[sd]=q2,di[ad]=Pf,di[Sf]=$2,di[od]=zf,di[ld]=_f,di[ym]=If,di[Cf]=H2,di[Nm]=Pf,di[bm]=zf,di[cd]=_f,di[jm]=If}function ot(o){return o&~U2?0>o?0:255:o>>Tf}function yt(o,u){return ot((19077*o>>8)+(26149*u>>8)-14234)}function It(o,u,g){return ot((19077*o>>8)-(6419*u>>8)-(13320*g>>8)+8708)}function Pt(o,u){return ot((19077*o>>8)+(33050*u>>8)-17685)}function Ot(o,u,g,b,L){b[L+0]=yt(o,g),b[L+1]=It(o,u,g),b[L+2]=Pt(o,u)}function mn(o,u,g,b,L){b[L+0]=Pt(o,u),b[L+1]=It(o,u,g),b[L+2]=yt(o,g)}function xn(o,u,g,b,L){var D=It(o,u,g);u=D<<3&224|Pt(o,u)>>3,b[L+0]=248&yt(o,g)|D>>5,b[L+1]=u}function In(o,u,g,b,L){var D=240&Pt(o,u)|15;b[L+0]=240&yt(o,g)|It(o,u,g)>>4,b[L+1]=D}function ar(o,u,g,b,L){b[L+0]=255,Ot(o,u,g,b,L+1)}function Un(o,u,g,b,L){mn(o,u,g,b,L),b[L+3]=255}function Si(o,u,g,b,L){Ot(o,u,g,b,L),b[L+3]=255}function Hr(o,u){return 0>o?0:o>u?u:o}function $i(o,u,g){O[o]=function(b,L,D,E,B,$,Z,pe,Se){for(var Ce=pe+(-2&Se)*g;pe!=Ce;)u(b[L+0],D[E+0],B[$+0],Z,pe),u(b[L+1],D[E+0],B[$+0],Z,pe+g),L+=2,++E,++$,pe+=2*g;1&Se&&u(b[L+0],D[E+0],B[$+0],Z,pe)}}function Xc(o,u,g){return g==0?o==0?u==0?6:5:u==0?4:0:g}function kl(o,u,g,b,L){switch(o>>>30){case 3:ls(u,g,b,L,0);break;case 2:kn(u,g,b,L);break;case 1:Nr(u,g,b,L)}}function Al(o,u){var g,b,L=u.M,D=u.Nb,E=o.oc,B=o.pc+40,$=o.oc,Z=o.pc+584,pe=o.oc,Se=o.pc+600;for(g=0;16>g;++g)E[B+32*g-1]=129;for(g=0;8>g;++g)$[Z+32*g-1]=129,pe[Se+32*g-1]=129;for(0<L?E[B-1-32]=$[Z-1-32]=pe[Se-1-32]=129:(s(E,B-32-1,127,21),s($,Z-32-1,127,9),s(pe,Se-32-1,127,9)),b=0;b<o.za;++b){var Ce=u.ya[u.aa+b];if(0<b){for(g=-1;16>g;++g)i(E,B+32*g-4,E,B+32*g+12,4);for(g=-1;8>g;++g)i($,Z+32*g-4,$,Z+32*g+4,4),i(pe,Se+32*g-4,pe,Se+32*g+4,4)}var ve=o.Gd,$e=o.Hd+b,_e=Ce.ad,fe=Ce.Hc;if(0<L&&(i(E,B-32,ve[$e].y,0,16),i($,Z-32,ve[$e].f,0,8),i(pe,Se-32,ve[$e].ea,0,8)),Ce.Za){var ge=E,Ee=B-32+16;for(0<L&&(b>=o.za-1?s(ge,Ee,ve[$e].y[15],4):i(ge,Ee,ve[$e+1].y,0,4)),g=0;4>g;g++)ge[Ee+128+g]=ge[Ee+256+g]=ge[Ee+384+g]=ge[Ee+0+g];for(g=0;16>g;++g,fe<<=2)ge=E,Ee=B+Df[g],Ci[Ce.Ob[g]](ge,Ee),kl(fe,_e,16*+g,ge,Ee)}else if(ge=Xc(b,L,Ce.Ob[0]),Bs[ge](E,B),fe!=0)for(g=0;16>g;++g,fe<<=2)kl(fe,_e,16*+g,E,B+Df[g]);for(g=Ce.Gc,ge=Xc(b,L,Ce.Dd),ds[ge]($,Z),ds[ge](pe,Se),fe=_e,ge=$,Ee=Z,255&(Ce=g>>0)&&(170&Ce?Il(fe,256,ge,Ee):ai(fe,256,ge,Ee)),Ce=pe,fe=Se,255&(g>>=8)&&(170&g?Il(_e,320,Ce,fe):ai(_e,320,Ce,fe)),L<o.Ub-1&&(i(ve[$e].y,0,E,B+480,16),i(ve[$e].f,0,$,Z+224,8),i(ve[$e].ea,0,pe,Se+224,8)),g=8*D*o.B,ve=o.sa,$e=o.ta+16*b+16*D*o.R,_e=o.qa,Ce=o.ra+8*b+g,fe=o.Ha,ge=o.Ia+8*b+g,g=0;16>g;++g)i(ve,$e+g*o.R,E,B+32*g,16);for(g=0;8>g;++g)i(_e,Ce+g*o.B,$,Z+32*g,8),i(fe,ge+g*o.B,pe,Se+32*g,8)}}function co(o,u,g,b,L,D,E,B,$){var Z=[0],pe=[0],Se=0,Ce=$!=null?$.kd:0,ve=$??new jl;if(o==null||12>g)return 7;ve.data=o,ve.w=u,ve.ha=g,u=[u],g=[g],ve.gb=[ve.gb];e:{var $e=u,_e=g,fe=ve.gb;if(t(o!=null),t(_e!=null),t(fe!=null),fe[0]=0,12<=_e[0]&&!r(o,$e[0],"RIFF")){if(r(o,$e[0]+8,"WEBP")){fe=3;break e}var ge=Ke(o,$e[0]+4);if(12>ge||4294967286<ge){fe=3;break e}if(Ce&&ge>_e[0]-8){fe=7;break e}fe[0]=ge,$e[0]+=12,_e[0]-=12}fe=0}if(fe!=0)return fe;for(ge=0<ve.gb[0],g=g[0];;){e:{var Ee=o;_e=u,fe=g;var Ve=Z,Re=pe,ct=$e=[0];if((st=Se=[Se])[0]=0,8>fe[0])fe=7;else{if(!r(Ee,_e[0],"VP8X")){if(Ke(Ee,_e[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var rt=Ke(Ee,_e[0]+8),jt=1+Qe(Ee,_e[0]+12);if(2147483648<=jt*(Ee=1+Qe(Ee,_e[0]+15))){fe=3;break e}ct!=null&&(ct[0]=rt),Ve!=null&&(Ve[0]=jt),Re!=null&&(Re[0]=Ee),_e[0]+=18,fe[0]-=18,st[0]=1}fe=0}}if(Se=Se[0],$e=$e[0],fe!=0)return fe;if(_e=!!(2&$e),!ge&&Se)return 3;if(D!=null&&(D[0]=!!(16&$e)),E!=null&&(E[0]=_e),B!=null&&(B[0]=0),E=Z[0],$e=pe[0],Se&&_e&&$==null){fe=0;break}if(4>g){fe=7;break}if(ge&&Se||!ge&&!Se&&!r(o,u[0],"ALPH")){g=[g],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{rt=o,fe=u,ge=g;var st=ve.gb;Ve=ve.na,Re=ve.P,ct=ve.Sa,jt=22,t(rt!=null),t(ge!=null),Ee=fe[0];var Vt=ge[0];for(t(Ve!=null),t(ct!=null),Ve[0]=null,Re[0]=null,ct[0]=0;;){if(fe[0]=Ee,ge[0]=Vt,8>Vt){fe=7;break e}var Gt=Ke(rt,Ee+4);if(4294967286<Gt){fe=3;break e}var qt=8+Gt+1&-2;if(jt+=qt,0<st&&jt>st){fe=3;break e}if(!r(rt,Ee,"VP8 ")||!r(rt,Ee,"VP8L")){fe=0;break e}if(Vt[0]<qt){fe=7;break e}r(rt,Ee,"ALPH")||(Ve[0]=rt,Re[0]=Ee+8,ct[0]=Gt),Ee+=qt,Vt-=qt}}if(g=g[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}g=[g],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(st=o,fe=u,ge=g,Ve=ve.gb[0],Re=ve.Ja,ct=ve.xa,rt=fe[0],Ee=!r(st,rt,"VP8 "),jt=!r(st,rt,"VP8L"),t(st!=null),t(ge!=null),t(Re!=null),t(ct!=null),8>ge[0])fe=7;else{if(Ee||jt){if(st=Ke(st,rt+4),12<=Ve&&st>Ve-12){fe=3;break e}if(Ce&&st>ge[0]-8){fe=7;break e}Re[0]=st,fe[0]+=8,ge[0]-=8,ct[0]=jt}else ct[0]=5<=ge[0]&&st[rt+0]==47&&!(st[rt+4]>>5),Re[0]=ge[0];fe=0}if(g=g[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],u=u[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(B==null||_e||(B[0]=ve.xa?2:1),E=[E],$e=[$e],ve.xa){if(5>g){fe=7;break}B=E,Ce=$e,_e=D,o==null||5>g?o=0:5<=g&&o[u+0]==47&&!(o[u+4]>>5)?(ge=[0],st=[0],Ve=[0],q(Re=new z,o,u,g),vt(Re,ge,st,Ve)?(B!=null&&(B[0]=ge[0]),Ce!=null&&(Ce[0]=st[0]),_e!=null&&(_e[0]=Ve[0]),o=1):o=0):o=0}else{if(10>g){fe=7;break}B=$e,o==null||10>g||!to(o,u+3,g-3)?o=0:(Ce=o[u+0]|o[u+1]<<8|o[u+2]<<16,_e=16383&(o[u+7]<<8|o[u+6]),o=16383&(o[u+9]<<8|o[u+8]),1&Ce||3<(Ce>>1&7)||!(Ce>>4&1)||Ce>>5>=ve.Ja||!_e||!o?o=0:(E&&(E[0]=_e),B&&(B[0]=o),o=1))}if(!o||(E=E[0],$e=$e[0],Se&&(Z[0]!=E||pe[0]!=$e)))return 3;$!=null&&($[0]=ve,$.offset=u-$.w,t(4294967286>u-$.w),t($.offset==$.ha-g));break}return fe==0||fe==7&&Se&&$==null?(D!=null&&(D[0]|=ve.na!=null&&0<ve.na.length),b!=null&&(b[0]=E),L!=null&&(L[0]=$e),0):fe}function Ll(o,u,g){var b=u.width,L=u.height,D=0,E=0,B=b,$=L;if(u.Da=o!=null&&0<o.Da,u.Da&&(B=o.cd,$=o.bd,D=o.v,E=o.j,11>g||(D&=-2,E&=-2),0>D||0>E||0>=B||0>=$||D+B>b||E+$>L))return 0;if(u.v=D,u.j=E,u.va=D+B,u.o=E+$,u.U=B,u.T=$,u.da=o!=null&&0<o.da,u.da){if(!je(B,$,g=[o.ib],D=[o.hb]))return 0;u.ib=g[0],u.hb=D[0]}return u.ob=o!=null&&o.ob,u.Kb=o==null||!o.Sd,u.da&&(u.ob=u.ib<3*b/4&&u.hb<3*L/4,u.Kb=0),1}function Pl(o){if(o==null)return 2;if(11>o.S){var u=o.f.RGBA;u.fb+=(o.height-1)*u.A,u.A=-u.A}else u=o.f.kb,o=o.height,u.O+=(o-1)*u.fa,u.fa=-u.fa,u.N+=(o-1>>1)*u.Ab,u.Ab=-u.Ab,u.W+=(o-1>>1)*u.Db,u.Db=-u.Db,u.F!=null&&(u.J+=(o-1)*u.lb,u.lb=-u.lb);return 0}function uo(o,u,g,b){if(b==null||0>=o||0>=u)return 2;if(g!=null){if(g.Da){var L=g.cd,D=g.bd,E=-2&g.v,B=-2&g.j;if(0>E||0>B||0>=L||0>=D||E+L>o||B+D>u)return 2;o=L,u=D}if(g.da){if(!je(o,u,L=[g.ib],D=[g.hb]))return 2;o=L[0],u=D[0]}}b.width=o,b.height=u;e:{var $=b.width,Z=b.height;if(o=b.S,0>=$||0>=Z||!(o>=sd&&13>o))o=2;else{if(0>=b.Rd&&b.sd==null){E=D=L=u=0;var pe=(B=$*Ef[o])*Z;if(11>o||(D=(Z+1)/2*(u=($+1)/2),o==12&&(E=(L=$)*Z)),(Z=a(pe+2*D+E))==null){o=1;break e}b.sd=Z,11>o?(($=b.f.RGBA).eb=Z,$.fb=0,$.A=B,$.size=pe):(($=b.f.kb).y=Z,$.O=0,$.fa=B,$.Fd=pe,$.f=Z,$.N=0+pe,$.Ab=u,$.Cd=D,$.ea=Z,$.W=0+pe+D,$.Db=u,$.Ed=D,o==12&&($.F=Z,$.J=0+pe+2*D),$.Tc=E,$.lb=L)}if(u=1,L=b.S,D=b.width,E=b.height,L>=sd&&13>L)if(11>L)o=b.f.RGBA,u&=(B=Math.abs(o.A))*(E-1)+D<=o.size,u&=B>=D*Ef[L],u&=o.eb!=null;else{o=b.f.kb,B=(D+1)/2,pe=(E+1)/2,$=Math.abs(o.fa),Z=Math.abs(o.Ab);var Se=Math.abs(o.Db),Ce=Math.abs(o.lb),ve=Ce*(E-1)+D;u&=$*(E-1)+D<=o.Fd,u&=Z*(pe-1)+B<=o.Cd,u=(u&=Se*(pe-1)+B<=o.Ed)&$>=D&Z>=B&Se>=B,u&=o.y!=null,u&=o.f!=null,u&=o.ea!=null,L==12&&(u&=Ce>=D,u&=ve<=o.Tc,u&=o.F!=null)}else u=0;o=u?0:2}}return o!=0||g!=null&&g.fd&&(o=Pl(b)),o}var Xn=64,mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ho=24,po=32,zl=8,Pr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ue("Predictor0","PredictorAdd0"),O.Predictor0=function(){return 4278190080},O.Predictor1=function(o){return o},O.Predictor2=function(o,u,g){return u[g+0]},O.Predictor3=function(o,u,g){return u[g+1]},O.Predictor4=function(o,u,g){return u[g-1]},O.Predictor5=function(o,u,g){return Ie(Ie(o,u[g+1]),u[g+0])},O.Predictor6=function(o,u,g){return Ie(o,u[g-1])},O.Predictor7=function(o,u,g){return Ie(o,u[g+0])},O.Predictor8=function(o,u,g){return Ie(u[g-1],u[g+0])},O.Predictor9=function(o,u,g){return Ie(u[g+0],u[g+1])},O.Predictor10=function(o,u,g){return Ie(Ie(o,u[g-1]),Ie(u[g+0],u[g+1]))},O.Predictor11=function(o,u,g){var b=u[g+0];return 0>=A(b>>24&255,o>>24&255,(u=u[g-1])>>24&255)+A(b>>16&255,o>>16&255,u>>16&255)+A(b>>8&255,o>>8&255,u>>8&255)+A(255&b,255&o,255&u)?b:o},O.Predictor12=function(o,u,g){var b=u[g+0];return(Ge((o>>24&255)+(b>>24&255)-((u=u[g-1])>>24&255))<<24|Ge((o>>16&255)+(b>>16&255)-(u>>16&255))<<16|Ge((o>>8&255)+(b>>8&255)-(u>>8&255))<<8|Ge((255&o)+(255&b)-(255&u)))>>>0},O.Predictor13=function(o,u,g){var b=u[g-1];return(it((o=Ie(o,u[g+0]))>>24&255,b>>24&255)<<24|it(o>>16&255,b>>16&255)<<16|it(o>>8&255,b>>8&255)<<8|it(o>>0&255,b>>0&255))>>>0};var xm=O.PredictorAdd0;O.PredictorAdd1=H,ue("Predictor2","PredictorAdd2"),ue("Predictor3","PredictorAdd3"),ue("Predictor4","PredictorAdd4"),ue("Predictor5","PredictorAdd5"),ue("Predictor6","PredictorAdd6"),ue("Predictor7","PredictorAdd7"),ue("Predictor8","PredictorAdd8"),ue("Predictor9","PredictorAdd9"),ue("Predictor10","PredictorAdd10"),ue("Predictor11","PredictorAdd11"),ue("Predictor12","PredictorAdd12"),ue("Predictor13","PredictorAdd13");var _l=O.PredictorAdd2;De("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),De("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var Zc,si=O.ColorIndexInverseTransform,fo=O.MapARGB,ed=O.VP8LColorIndexInverseTransformAlpha,td=O.MapAlpha,Es=O.VP8LPredictorsAdd=[];Es.length=16,(O.VP8LPredictors=[]).length=16,(O.VP8LPredictorsAdd_C=[]).length=16,(O.VP8LPredictors_C=[]).length=16;var Aa,zr,yr,Fs,as,os,go,ls,kn,Il,Nr,ai,xo,nd,Tl,La,Pa,Os,za,vo,_a,Rs,Ml,oi,li,tn,nn,An,qn=a(511),cs=a(2041),Dl=a(225),yo=a(767),rd=0,vm=cs,id=Dl,Ur=yo,ci=qn,sd=0,ad=1,Sf=2,od=3,ld=4,ym=5,Cf=6,Nm=7,bm=8,cd=9,jm=10,A2=[2,3,7],L2=[3,3,11],kf=[280,256,256,256,40],P2=[0,1,1,1,0],z2=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],_2=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],I2=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],T2=8,wm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],El=null,M2=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],D2=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Af=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],E2=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],F2=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],O2=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],R2=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Bs=[],Ci=[],ds=[],B2=1,Lf=2,qs=[],di=[];Te("UpsampleRgbLinePair",Ot,3),Te("UpsampleBgrLinePair",mn,3),Te("UpsampleRgbaLinePair",Si,4),Te("UpsampleBgraLinePair",Un,4),Te("UpsampleArgbLinePair",ar,4),Te("UpsampleRgba4444LinePair",In,2),Te("UpsampleRgb565LinePair",xn,2);var q2=O.UpsampleRgbLinePair,$2=O.UpsampleBgrLinePair,Pf=O.UpsampleRgbaLinePair,zf=O.UpsampleBgraLinePair,_f=O.UpsampleArgbLinePair,If=O.UpsampleRgba4444LinePair,H2=O.UpsampleRgb565LinePair,dd=16,ud=1<<dd-1,Fl=-227,Cm=482,Tf=6,U2=(256<<Tf)-1,Mf=0,V2=a(256),G2=a(256),W2=a(256),J2=a(256),Y2=a(Cm-Fl),Q2=a(Cm-Fl);$i("YuvToRgbRow",Ot,3),$i("YuvToBgrRow",mn,3),$i("YuvToRgbaRow",Si,4),$i("YuvToBgraRow",Un,4),$i("YuvToArgbRow",ar,4),$i("YuvToRgba4444Row",In,2),$i("YuvToRgb565Row",xn,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],K2=[8,7,6,4,4,2,2,2,1,1,1,1],X2=1;this.WebPDecodeRGBA=function(o,u,g,b,L){var D=ad,E=new oo,B=new W;E.ba=B,B.S=D,B.width=[B.width],B.height=[B.height];var $=B.width,Z=B.height,pe=new ze;if(pe==null||o==null)var Se=2;else t(pe!=null),Se=co(o,u,g,pe.width,pe.height,pe.Pd,pe.Qd,pe.format,null);if(Se!=0?$=0:($!=null&&($[0]=pe.width[0]),Z!=null&&(Z[0]=pe.height[0]),$=1),$){B.width=B.width[0],B.height=B.height[0],b!=null&&(b[0]=B.width),L!=null&&(L[0]=B.height);e:{if(b=new ii,(L=new jl).data=o,L.w=u,L.ha=g,L.kd=1,u=[0],t(L!=null),((o=co(L.data,L.w,L.ha,null,null,null,u,null,L))==0||o==7)&&u[0]&&(o=4),(u=o)==0){if(t(E!=null),b.data=L.data,b.w=L.w+L.offset,b.ha=L.ha-L.offset,b.put=Fn,b.ac=Mt,b.bc=On,b.ma=E,L.xa){if((o=Ar())==null){E=1;break e}if(function(Ce,ve){var $e=[0],_e=[0],fe=[0];t:for(;;){if(Ce==null)return 0;if(ve==null)return Ce.a=2,0;if(Ce.l=ve,Ce.a=0,q(Ce.m,ve.data,ve.w,ve.ha),!vt(Ce.m,$e,_e,fe)){Ce.a=3;break t}if(Ce.xb=Lf,ve.width=$e[0],ve.height=_e[0],!Rn($e[0],_e[0],1,Ce,null))break t;return 1}return t(Ce.a!=0),0}(o,b)){if(b=(u=uo(b.width,b.height,E.Oa,E.ba))==0){t:{b=o;n:for(;;){if(b==null){b=0;break t}if(t(b.s.yc!=null),t(b.s.Ya!=null),t(0<b.s.Wb),t((g=b.l)!=null),t((L=g.ma)!=null),b.xb!=0){if(b.ca=L.ba,b.tb=L.tb,t(b.ca!=null),!Ll(L.Oa,g,od)){b.a=2;break n}if(!es(b,g.width)||g.da)break n;if((g.da||gt(b.ca.S))&&Ne(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&Ne()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!tt(b.s.vb,b.s.Wa.Xa)){b.a=1;break n}b.xb=0}if(!kr(b,b.V,b.Ba,b.c,b.i,g.o,Cs))break n;L.Dc=b.Ma,b=1;break t}t(b.a!=0),b=0}b=!b}b&&(u=o.a)}else u=o.a}else{if((o=new fl)==null){E=1;break e}if(o.Fa=L.na,o.P=L.P,o.qc=L.Sa,rs(o,b)){if((u=uo(b.width,b.height,E.Oa,E.ba))==0){if(o.Aa=0,g=E.Oa,t((L=o)!=null),g!=null){if(0<($=0>($=g.Md)?0:100<$?255:255*$/100)){for(Z=pe=0;4>Z;++Z)12>(Se=L.pb[Z]).lc&&(Se.ia=$*K2[0>Se.lc?0:Se.lc]>>3),pe|=Se.ia;pe&&(alert("todo:VP8InitRandom"),L.ia=1)}L.Ga=g.Id,100<L.Ga?L.Ga=100:0>L.Ga&&(L.Ga=0)}no(o,b)||(u=o.a)}}else u=o.a}u==0&&E.Oa!=null&&E.Oa.fd&&(u=Pl(E.ba))}E=u}D=E!=0?null:11>D?B.f.RGBA.eb:B.f.kb.y}else D=null;return D};var Ef=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(O,J){for(var te="",M=0;M<4;M++)te+=String.fromCharCode(O[J++]);return te}function x(O,J){return(O[J+0]<<0|O[J+1]<<8|O[J+2]<<16)>>>0}function v(O,J){return(O[J+0]<<0|O[J+1]<<8|O[J+2]<<16|O[J+3]<<24)>>>0}new c;var y=[0],m=[0],w=[],S=new c,j=e,f=function(O,J){var te={},M=0,k=!1,P=0,R=0;if(te.frames=[],!function(U,Q,G,ae){for(var he=0;he<ae;he++)if(U[Q+he]!=G.charCodeAt(he))return!0;return!1}(O,J,"RIFF",4)){for(v(O,J+=4),J+=8;J<O.length;){var T=h(O,J),F=v(O,J+=4);J+=4;var re=F+(1&F);switch(T){case"VP8 ":case"VP8L":te.frames[M]===void 0&&(te.frames[M]={}),(oe=te.frames[M]).src_off=k?R:J-8,oe.src_size=P+F+8,M++,k&&(k=!1,P=0,R=0);break;case"VP8X":(oe=te.header={}).feature_flags=O[J];var q=J+4;oe.canvas_width=1+x(O,q),q+=3,oe.canvas_height=1+x(O,q),q+=3;break;case"ALPH":k=!0,P=re+8,R=J-8;break;case"ANIM":(oe=te.header).bgcolor=v(O,J),q=J+4,oe.loop_count=(Pe=O)[(z=q)+0]<<0|Pe[z+1]<<8,q+=2;break;case"ANMF":var le,oe;(oe=te.frames[M]={}).offset_x=2*x(O,J),J+=3,oe.offset_y=2*x(O,J),J+=3,oe.width=1+x(O,J),J+=3,oe.height=1+x(O,J),J+=3,oe.duration=x(O,J),J+=3,le=O[J++],oe.dispose=1&le,oe.blend=le>>1&1}T!="ANMF"&&(J+=re)}var Pe,z;return te}}(j,0);f.response=j,f.rgbaoutput=!0,f.dataurl=!1;var N=f.header?f.header:null,C=f.frames?f.frames:null;if(N){N.loop_counter=N.loop_count,y=[N.canvas_height],m=[N.canvas_width];for(var V=0;V<C.length&&C[V].blend!=0;V++);}var ee=C[0],ce=S.WebPDecodeRGBA(j,ee.src_off,ee.src_size,m,y);ee.rgba=ce,ee.imgwidth=m[0],ee.imgheight=y[0];for(var ne=0;ne<m[0]*y[0]*4;ne++)w[ne]=ce[ne];return this.width=m,this.height=y,this.data=w,this}(function(e){var t=function(){return typeof gp=="function"},r=function(y,m,w,S){var j=4,f=l;switch(S){case e.image_compression.FAST:j=1,f=a;break;case e.image_compression.MEDIUM:j=6,f=d;break;case e.image_compression.SLOW:j=9,f=c}y=i(y,m,w,f);var N=gp(y,{level:j});return e.__addimage__.arrayBufferToBinaryString(N)},i=function(y,m,w,S){for(var j,f,N,C=y.length/m,V=new Uint8Array(y.length+C),ee=x(),ce=0;ce<C;ce+=1){if(N=ce*m,j=y.subarray(N,N+m),S)V.set(S(j,w,f),N+ce);else{for(var ne,O=ee.length,J=[];ne<O;ne+=1)J[ne]=ee[ne](j,w,f);var te=v(J.concat());V.set(J[te],N+ce)}f=j}return V},s=function(y){var m=Array.apply([],y);return m.unshift(0),m},a=function(y,m){var w,S=[],j=y.length;S[0]=1;for(var f=0;f<j;f+=1)w=y[f-m]||0,S[f+1]=y[f]-w+256&255;return S},l=function(y,m,w){var S,j=[],f=y.length;j[0]=2;for(var N=0;N<f;N+=1)S=w&&w[N]||0,j[N+1]=y[N]-S+256&255;return j},d=function(y,m,w){var S,j,f=[],N=y.length;f[0]=3;for(var C=0;C<N;C+=1)S=y[C-m]||0,j=w&&w[C]||0,f[C+1]=y[C]+256-(S+j>>>1)&255;return f},c=function(y,m,w){var S,j,f,N,C=[],V=y.length;C[0]=4;for(var ee=0;ee<V;ee+=1)S=y[ee-m]||0,j=w&&w[ee]||0,f=w&&w[ee-m]||0,N=h(S,j,f),C[ee+1]=y[ee]-N+256&255;return C},h=function(y,m,w){if(y===m&&m===w)return y;var S=Math.abs(m-w),j=Math.abs(y-w),f=Math.abs(y+m-w-w);return S<=j&&S<=f?y:j<=f?m:w},x=function(){return[s,a,l,d,c]},v=function(y){var m=y.map(function(w){return w.reduce(function(S,j){return S+Math.abs(j)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(y,m,w,S){var j,f,N,C,V,ee,ce,ne,O,J,te,M,k,P,R,T=this.decode.FLATE_DECODE,F="";if(this.__addimage__.isArrayBuffer(y)&&(y=new Uint8Array(y)),this.__addimage__.isArrayBufferView(y)){if(y=(N=new eb(y)).imgData,f=N.bits,j=N.colorSpace,V=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){O=(ne=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,te=new Uint8Array(O*N.colors),J=new Uint8Array(O);var re,q=N.pixelBitlength-N.bits;for(P=0,R=0;P<O;P++){for(k=ne[P],re=0;re<q;)te[R++]=k>>>re&255,re+=N.bits;J[P]=k>>>re&255}}if(N.bits===16){O=(ne=new Uint32Array(N.decodePixels().buffer)).length,te=new Uint8Array(O*(32/N.pixelBitlength)*N.colors),J=new Uint8Array(O*(32/N.pixelBitlength)),M=N.colors>1,P=0,R=0;for(var le=0;P<O;)k=ne[P++],te[R++]=k>>>0&255,M&&(te[R++]=k>>>16&255,k=ne[P++],te[R++]=k>>>0&255),J[le++]=k>>>16&255;f=8}S!==e.image_compression.NONE&&t()?(y=r(te,N.width*N.colors,N.colors,S),ce=r(J,N.width,1,S)):(y=te,ce=J,T=void 0)}if(N.colorType===3&&(j=this.color_spaces.INDEXED,ee=N.palette,N.transparency.indexed)){var oe=N.transparency.indexed,Pe=0;for(P=0,O=oe.length;P<O;++P)Pe+=oe[P];if((Pe/=255)===O-1&&oe.indexOf(0)!==-1)C=[oe.indexOf(0)];else if(Pe!==O){for(ne=N.decodePixels(),J=new Uint8Array(ne.length),P=0,O=ne.length;P<O;P++)J[P]=oe[ne[P]];ce=r(J,N.width,1)}}var z=function(U){var Q;switch(U){case e.image_compression.FAST:Q=11;break;case e.image_compression.MEDIUM:Q=13;break;case e.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(S);return T===this.decode.FLATE_DECODE&&(F="/Predictor "+z+" "),F+="/Colors "+V+" /BitsPerComponent "+f+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(y)||this.__addimage__.isArrayBufferView(y))&&(y=this.__addimage__.arrayBufferToBinaryString(y)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:w,data:y,index:m,filter:T,decodeParameters:F,transparency:C,palette:ee,sMask:ce,predictor:z,width:N.width,height:N.height,bitsPerComponent:f,colorSpace:j}}}})(wt.API),function(e){e.processGIF89A=function(t,r,i,s){var a=new tb(t),l=a.width,d=a.height,c=[];a.decodeAndBlitFrameRGBA(0,c);var h={data:c,width:l,height:d},x=new gh(100).encode(h,100);return e.processJPEG.call(this,x,r,i,s)},e.processGIF87A=e.processGIF89A}(wt.API),Pi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:i,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Pi.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){en.log("bit decode error:"+r)}},Pi.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*s*4,d=0;d<8&&8*s+d<this.width;d++){var c=this.palette[a>>7-d&1];this.data[l+4*d]=c.blue,this.data[l+4*d+1]=c.green,this.data[l+4*d+2]=c.red,this.data[l+4*d+3]=255}r!==0&&(this.pos+=4-r)}},Pi.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*s*4,d=a>>4,c=15&a,h=this.palette[d];if(this.data[l]=h.blue,this.data[l+1]=h.green,this.data[l+2]=h.red,this.data[l+3]=255,2*s+1>=this.width)break;h=this.palette[c],this.data[l+4]=h.blue,this.data[l+4+1]=h.green,this.data[l+4+2]=h.red,this.data[l+4+3]=255}t!==0&&(this.pos+=4-t)}},Pi.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*i;if(s<this.palette.length){var l=this.palette[s];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},Pi.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,d=(a>>5&t)/t*255|0,c=(a>>10&t)/t*255|0,h=a>>15?255:0,x=i*this.width*4+4*s;this.data[x]=c,this.data[x+1]=d,this.data[x+2]=l,this.data[x+3]=h}this.pos+=e}},Pi.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var s=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&t)/t*255|0,c=(l>>5&r)/r*255|0,h=(l>>11)/t*255|0,x=s*this.width*4+4*a;this.data[x]=h,this.data[x+1]=c,this.data[x+2]=d,this.data[x+3]=255}this.pos+=e}},Pi.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=a,this.data[l+1]=s,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},Pi.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=t*this.width*4+4*r;this.data[d]=a,this.data[d+1]=s,this.data[d+2]=i,this.data[d+3]=l}},Pi.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,s){var a=new Pi(t,!1),l=a.width,d=a.height,c={data:a.getData(),width:l,height:d},h=new gh(100).encode(c,100);return e.processJPEG.call(this,h,r,i,s)}}(wt.API),Dg.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,s){var a=new Dg(t),l=a.width,d=a.height,c={data:a.getData(),width:l,height:d},h=new gh(100).encode(c,100);return e.processJPEG.call(this,h,r,i,s)}}(wt.API),wt.API.processRGBA=function(e,t,r){for(var i=e.data,s=i.length,a=new Uint8Array(s/4*3),l=new Uint8Array(s/4),d=0,c=0,h=0;h<s;h+=4){var x=i[h],v=i[h+1],y=i[h+2],m=i[h+3];a[d++]=x,a[d++]=v,a[d++]=y,l[c++]=m}var w=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:w,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},wt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ko=wt.API,Gd=ko.getCharWidthsArray=function(e,t){var r,i,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),l=t.charSpace||this.internal.getCharSpace(),d=t.widths?t.widths:s.metadata.Unicode.widths,c=d.fof?d.fof:1,h=t.kerning?t.kerning:s.metadata.Unicode.kerning,x=h.fof?h.fof:1,v=t.doKerning!==!1,y=0,m=e.length,w=0,S=d[0]||c,j=[];for(r=0;r<m;r++)i=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?j.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(y=v&&Qt(h[i])==="object"&&!isNaN(parseInt(h[i][w],10))?h[i][w]/x:0,j.push((d[i]||S)/c+y)),w=i;return j},_g=ko.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return ko.processArabic&&(e=ko.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,s)/r:Gd.apply(this,arguments).reduce(function(a,l){return a+l},0)},Ig=function(e,t,r,i){for(var s=[],a=0,l=e.length,d=0;a!==l&&d+t[a]<r;)d+=t[a],a++;s.push(e.slice(0,a));var c=a;for(d=0;a!==l;)d+t[a]>i&&(s.push(e.slice(c,a)),d=0,c=a),d+=t[a],a++;return c!==a&&s.push(e.slice(c,a)),s},Tg=function(e,t,r){r||(r={});var i,s,a,l,d,c,h,x=[],v=[x],y=r.textIndent||0,m=0,w=0,S=e.split(" "),j=Gd.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?S[0].length+2:r.lineIndent||0){var f=Array(c).join(" "),N=[];S.map(function(V){(V=V.split(/\s*\n/)).length>1?N=N.concat(V.map(function(ee,ce){return(ce&&ee.length?`
`:"")+ee})):N.push(V[0])}),S=N,c=_g.apply(this,[f,r])}for(a=0,l=S.length;a<l;a++){var C=0;if(i=S[a],c&&i[0]==`
`&&(i=i.substr(1),C=1),y+m+(w=(s=Gd.apply(this,[i,r])).reduce(function(V,ee){return V+ee},0))>t||C){if(w>t){for(d=Ig.apply(this,[i,s,t-(y+m),t]),x.push(d.shift()),x=[d.pop()];d.length;)v.push([d.shift()]);w=s.slice(i.length-(x[0]?x[0].length:0)).reduce(function(V,ee){return V+ee},0)}else x=[i];v.push(x),y=w+c,m=j}else x.push(i),y+=m+w,m=j}return h=c?function(V,ee){return(ee?f:"")+V.join(" ")}:function(V){return V.join(" ")},v.map(h)},ko.splitTextToSize=function(e,t,r){var i,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(x){if(x.widths&&x.kerning)return{widths:x.widths,kerning:x.kerning};var v=this.internal.getFont(x.fontName,x.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var l=1*this.internal.scaleFactor*t/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var d,c,h=[];for(d=0,c=i.length;d<c;d++)h=h.concat(Tg.apply(this,[i[d],l,a]));return h},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},i={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],i["0123456789abcdef"[s]]=t[s];var a=function(v){return"0x"+parseInt(v,10).toString(16)},l=e.__fontmetrics__.compress=function(v){var y,m,w,S,j=["{"];for(var f in v){if(y=v[f],isNaN(parseInt(f,10))?m="'"+f+"'":(f=parseInt(f,10),m=(m=a(f).slice(2)).slice(0,-1)+i[m.slice(-1)]),typeof y=="number")y<0?(w=a(y).slice(3),S="-"):(w=a(y).slice(2),S=""),w=S+w.slice(0,-1)+i[w.slice(-1)];else{if(Qt(y)!=="object")throw new Error("Don't know what to do with value type "+Qt(y)+".");w=l(y)}j.push(m+w)}return j.push("}"),j.join("")},d=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var y,m,w,S,j={},f=1,N=j,C=[],V="",ee="",ce=v.length-1,ne=1;ne<ce;ne+=1)(S=v[ne])=="'"?y?(w=y.join(""),y=void 0):y=[]:y?y.push(S):S=="{"?(C.push([N,w]),N={},w=void 0):S=="}"?((m=C.pop())[0][m[1]]=N,w=void 0,N=m[0]):S=="-"?f=-1:w===void 0?r.hasOwnProperty(S)?(V+=r[S],w=parseInt(V,16)*f,f=1,V=""):V+=S:r.hasOwnProperty(S)?(ee+=r[S],N[w]=parseInt(ee,16)*f,f=1,w=void 0,ee=""):ee+=S;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},x={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var y=v.font,m=x.Unicode[y.postScriptName];m&&(y.metadata.Unicode={},y.metadata.Unicode.widths=m.widths,y.metadata.Unicode.kerning=m.kerning);var w=h.Unicode[y.postScriptName];w&&(y.metadata.Unicode.encoding=w,y.encoding=w.codePages[0])}])}(wt.API),function(e){var t=function(r){for(var i=r.length,s=new Uint8Array(i),a=0;a<i;a++)s[a]=r.charCodeAt(a);return s};e.API.events.push(["addFont",function(r){var i=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(i=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(l,d){d=/^\x00\x01\x00\x00/.test(d)?t(d):t(xc(d)),l.metadata=e.API.TTFFont.open(d),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(s,i)}}])}(wt),function(e){function t(){return(St.canvg?Promise.resolve(St.canvg):up(()=>import("./index.es-18d51397.js"),[],import.meta.url)).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}wt.API.addSvgAsImage=function(r,i,s,a,l,d,c,h){if(isNaN(i)||isNaN(s))throw en.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(l))throw en.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=a,x.height=l;var v=x.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,x.width,x.height);var y={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(w){return w.fromString(v,r,y)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(y)}).then(function(){m.addImage(x.toDataURL("image/jpeg",1),i,s,a,l,c,h)})}}(),wt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var s=0;s<this.internal.pages[i].length;s++)this.internal.pages[i][s]=this.internal.pages[i][s].replace(t,r);return this},wt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,s,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(l),c=[],h=0,x=0,v=0;function y(w,S){var j,f=!1;for(j=0;j<w.length;j+=1)w[j]===S&&(f=!0);return f}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=d.length;for(v=0;v<m;v+=1)r[d[v]].value=r[d[v]].defaultValue,r[d[v]].explicitSet=!1}if(Qt(e)==="object"){for(s in e)if(a=e[s],y(d,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&y(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(h=0;h<a.length;h+=1)if(i=!0,a[h].length===1&&typeof a[h][0]=="number")c.push(String(a[h]-1));else if(a[h].length>1){for(x=0;x<a[h].length;x+=1)typeof a[h][x]!="number"&&(i=!1);i===!0&&c.push([a[h][0]-1,a[h][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,S=[];for(w in r)r[w].explicitSet===!0&&(r[w].type==="name"?S.push("/"+w+" /"+r[w].value):S.push("/"+w+" "+r[w].value));S.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+S.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),h=a.length+l.length+d.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(s+a+l+d+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(wt.API),function(e){var t=e.API,r=t.pdfEscape16=function(a,l){for(var d,c=l.metadata.Unicode.widths,h=["","0","00","000","0000"],x=[""],v=0,y=a.length;v<y;++v){if(d=l.metadata.characterToGlyph(a.charCodeAt(v)),l.metadata.glyIdsUsed.push(d),l.metadata.toUnicode[d]=a.charCodeAt(v),c.indexOf(d)==-1&&(c.push(d),c.push([parseInt(l.metadata.widthOfGlyph(d),10)])),d=="0")return x.join("");d=d.toString(16),x.push(h[4-d.length],d)}return x.join("")},i=function(a){var l,d,c,h,x,v,y;for(x=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,y=(d=Object.keys(a).sort(function(m,w){return m-w})).length;v<y;v++)l=d[v],c.length>=100&&(x+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(h=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),c.push("<"+l+"><"+h+">"));return c.length&&(x+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),x+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(l){var d=l.font,c=l.out,h=l.newObject,x=l.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="Identity-H"){for(var v=d.metadata.Unicode.widths,y=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),m="",w=0;w<y.length;w++)m+=String.fromCharCode(y[w]);var S=h();x({data:m,addLength1:!0,objectId:S}),c("endobj");var j=h();x({data:i(d.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var f=h();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+_o(d.fontName)),c("/FontFile2 "+S+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),c("/Flags "+d.metadata.flags),c("/StemV "+d.metadata.stemV),c("/ItalicAngle "+d.metadata.italicAngle),c("/Ascent "+d.metadata.ascender),c("/Descent "+d.metadata.decender),c("/CapHeight "+d.metadata.capHeight),c(">>"),c("endobj");var N=h();c("<<"),c("/Type /Font"),c("/BaseFont /"+_o(d.fontName)),c("/FontDescriptor "+f+" 0 R"),c("/W "+e.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+d.encoding+")"),c(">>"),c(">>"),c("endobj"),d.objectNumber=h(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+_o(d.fontName)),c("/Encoding /"+d.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),d.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(l){var d=l.font,c=l.out,h=l.newObject,x=l.putStream;if(d.metadata instanceof e.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var v=d.metadata.rawData,y="",m=0;m<v.length;m++)y+=String.fromCharCode(v[m]);var w=h();x({data:y,addLength1:!0,objectId:w}),c("endobj");var S=h();x({data:i(d.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var j=h();c("<<"),c("/Descent "+d.metadata.decender),c("/CapHeight "+d.metadata.capHeight),c("/StemV "+d.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(d.metadata.bbox)),c("/FontName /"+_o(d.fontName)),c("/ItalicAngle "+d.metadata.italicAngle),c("/Ascent "+d.metadata.ascender),c(">>"),c("endobj"),d.objectNumber=h();for(var f=0;f<d.metadata.hmtx.widths.length;f++)d.metadata.hmtx.widths[f]=parseInt(d.metadata.hmtx.widths[f]*(1e3/d.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+S+" 0 R/BaseFont/"+_o(d.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),c("endobj"),d.isAlreadyPutted=!0}})(a)}]);var s=function(a){var l,d=a.text||"",c=a.x,h=a.y,x=a.options||{},v=a.mutex||{},y=v.pdfEscape,m=v.activeFontKey,w=v.fonts,S=m,j="",f=0,N="",C=w[S].encoding;if(w[S].encoding!=="Identity-H")return{text:d,x:c,y:h,options:x,mutex:v};for(N=d,S=m,Array.isArray(d)&&(N=d[0]),f=0;f<N.length;f+=1)w[S].metadata.hasOwnProperty("cmap")&&(l=w[S].metadata.cmap.unicode.codeMap[N[f].charCodeAt(0)]),l||N[f].charCodeAt(0)<256&&w[S].metadata.hasOwnProperty("Unicode")?j+=N[f]:j+="";var V="";return parseInt(S.slice(1))<14||C==="WinAnsiEncoding"?V=y(j,S).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):C==="Identity-H"&&(V=r(j,w[S])),v.isHex=!0,{text:V,x:c,y:h,options:x,mutex:v}};t.events.push(["postProcessText",function(a){var l=a.text||"",d=[],c={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var h=0;for(h=0;h<l.length;h+=1)Array.isArray(l[h])&&l[h].length===3?d.push([s(Object.assign({},c,{text:l[h][0]})).text,l[h][1],l[h][2]]):d.push(s(Object.assign({},c,{text:l[h]})).text);a.text=d}else a.text=s(Object.assign({},c,{text:l})).text}])}(wt),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(wt.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var s,a,l,d,c,h,x,v=t,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},S={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,C=0;this.__bidiEngine__={};var V=function(M){var k=M.charCodeAt(),P=k>>8,R=S[P];return R!==void 0?v[256*R+(255&k)]:P===252||P===253?"AL":f.test(P)?"L":P===8?"R":"N"},ee=function(M){for(var k,P=0;P<M.length;P++){if((k=V(M.charAt(P)))==="L")return!1;if(k==="R")return!0}return!1},ce=function(M,k,P,R){var T,F,re,q,le=k[R];switch(le){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(le="AN");break;case"AL":N=!0,le="R";break;case"WS":le="N";break;case"CS":R<1||R+1>=k.length||(T=P[R-1])!=="EN"&&T!=="AN"||(F=k[R+1])!=="EN"&&F!=="AN"?le="N":N&&(F="AN"),le=F===T?F:"N";break;case"ES":le=(T=R>0?P[R-1]:"B")==="EN"&&R+1<k.length&&k[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&P[R-1]==="EN"){le="EN";break}if(N){le="N";break}for(re=R+1,q=k.length;re<q&&k[re]==="ET";)re++;le=re<q&&k[re]==="EN"?"EN":"N";break;case"NSM":if(l&&!d){for(q=k.length,re=R+1;re<q&&k[re]==="NSM";)re++;if(re<q){var oe=M[R],Pe=oe>=1425&&oe<=2303||oe===64286;if(T=k[re],Pe&&(T==="R"||T==="AL")){le="R";break}}}le=R<1||(T=k[R-1])==="B"?"N":P[R-1];break;case"B":N=!1,s=!0,le=C;break;case"S":a=!0,le="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":le="N"}return le},ne=function(M,k,P){var R=M.split("");return P&&O(R,P,{hiLevel:C}),R.reverse(),k&&k.reverse(),R.join("")},O=function(M,k,P){var R,T,F,re,q,le=-1,oe=M.length,Pe=0,z=[],U=C?m:y,Q=[];for(N=!1,s=!1,a=!1,T=0;T<oe;T++)Q[T]=V(M[T]);for(F=0;F<oe;F++){if(q=Pe,z[F]=ce(M,Q,z,F),R=240&(Pe=U[q][w[z[F]]]),Pe&=15,k[F]=re=U[Pe][5],R>0)if(R===16){for(T=le;T<F;T++)k[T]=1;le=-1}else le=-1;if(U[Pe][6])le===-1&&(le=F);else if(le>-1){for(T=le;T<F;T++)k[T]=re;le=-1}Q[F]==="B"&&(k[F]=0),P.hiLevel|=re}a&&function(G,ae,he){for(var xe=0;xe<he;xe++)if(G[xe]==="S"){ae[xe]=C;for(var we=xe-1;we>=0&&G[we]==="WS";we--)ae[we]=C}}(Q,k,oe)},J=function(M,k,P,R,T){if(!(T.hiLevel<M)){if(M===1&&C===1&&!s)return k.reverse(),void(P&&P.reverse());for(var F,re,q,le,oe=k.length,Pe=0;Pe<oe;){if(R[Pe]>=M){for(q=Pe+1;q<oe&&R[q]>=M;)q++;for(le=Pe,re=q-1;le<re;le++,re--)F=k[le],k[le]=k[re],k[re]=F,P&&(F=P[le],P[le]=P[re],P[re]=F);Pe=q}Pe++}}},te=function(M,k,P){var R=M.split(""),T={hiLevel:C};return P||(P=[]),O(R,P,T),function(F,re,q){if(q.hiLevel!==0&&x)for(var le,oe=0;oe<F.length;oe++)re[oe]===1&&(le=j.indexOf(F[oe]))>=0&&(F[oe]=j[le+1])}(R,P,T),J(2,R,k,P,T),J(1,R,k,P,T),R.join("")};return this.__bidiEngine__.doBidiReorder=function(M,k,P){if(function(T,F){if(F)for(var re=0;re<T.length;re++)F[re]=re;d===void 0&&(d=ee(T)),h===void 0&&(h=ee(T))}(M,k),l||!c||h)if(l&&c&&d^h)C=d?1:0,M=ne(M,k,P);else if(!l&&c&&h)C=d?1:0,M=te(M,k,P),M=ne(M,k);else if(!l||d||c||h){if(l&&!c&&d^h)M=ne(M,k),d?(C=0,M=te(M,k,P)):(C=1,M=te(M,k,P),M=ne(M,k));else if(l&&d&&!c&&h)C=1,M=te(M,k,P),M=ne(M,k);else if(!l&&!c&&d^h){var R=x;d?(C=1,M=te(M,k,P),C=0,x=!1,M=te(M,k,P),x=R):(C=0,M=te(M,k,P),M=ne(M,k),C=1,x=!1,M=te(M,k,P),x=R,M=ne(M,k))}}else C=0,M=te(M,k,P);else C=d?1:0,M=te(M,k,P);return M},this.__bidiEngine__.setOptions=function(M){M&&(l=M.isInputVisual,c=M.isOutputVisual,d=M.isInputRtl,h=M.isOutputRtl,x=M.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var s=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var l=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var d=0;for(l=[],d=0;d<s.length;d+=1)Object.prototype.toString.call(s[d])==="[object Array]"?l.push([r.doBidiReorder(s[d][0]),s[d][1],s[d][2]]):l.push([r.doBidiReorder(s[d])]);i.text=l}else i.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(wt),wt.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new ga(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new gb(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new nb(this.contents),this.head=new ib(this),this.name=new cb(this),this.cmap=new S2(this),this.toUnicode={},this.hhea=new sb(this),this.maxp=new db(this),this.hmtx=new ub(this),this.post=new ob(this),this.os2=new ab(this),this.loca=new fb(this),this.glyf=new mb(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,d,c,h;for(h=[],l=0,d=(c=this.bbox).length;l<d;l++)t=c[l],h.push(Math.round(t*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(i=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var s,a,l,d;for(l=0,a=0,d=(t=""+t).length;0<=d?a<d:a>d;a=0<=d?++a:--a)s=t.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(s))+i*(1e3/r)||0;return l*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var Oi,ga=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,s;for(s=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,s,a,l,d,c;return t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),d=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^s)+16777216*(255^a)+65536*(255^l)+256*(255^d)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*s+16777216*a+65536*l+256*d+c},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,s,a;for(a=[],i=0,s=t.length;i<s;i++)r=t[i],a.push(this.writeByte(r));return a},e}(),nb=function(){var e;function t(r){var i,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,s,a,l,d,c,h,x,v,y,m,w,S;for(S in m=Object.keys(r).length,c=Math.log(2),v=16*Math.floor(Math.log(m)/c),l=Math.floor(v/c),x=16*m-v,(s=new ga).writeInt(this.scalarType),s.writeShort(m),s.writeShort(v),s.writeShort(l),s.writeShort(x),a=16*m,h=s.pos+a,d=null,w=[],r)for(y=r[S],s.writeString(S),s.writeInt(e(y)),s.writeInt(h),s.writeInt(y.length),w=w.concat(y),S==="head"&&(d=h),h+=y.length;h%4;)w.push(0),h++;return s.write(w),i=2981146554-e(s.data),s.pos=d+8,s.writeUInt32(i),s.data},e=function(r){var i,s,a,l;for(r=C2.call(r);r.length%4;)r.push(0);for(a=new ga(r),s=0,i=0,l=r.length;i<l;i=i+=4)s+=a.readUInt32();return 4294967295&s},t}(),rb={}.hasOwnProperty,Zi=function(e,t){for(var r in t)rb.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};Oi=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var ib=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var i;return(i=new ga).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},t}(),Eg=function(){function e(t,r){var i,s,a,l,d,c,h,x,v,y,m,w,S,j,f,N,C;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),v=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),y=m/2,t.pos+=6,a=function(){var V,ee;for(ee=[],c=V=0;0<=y?V<y:V>y;c=0<=y?++V:--V)ee.push(t.readUInt16());return ee}(),t.pos+=2,S=function(){var V,ee;for(ee=[],c=V=0;0<=y?V<y:V>y;c=0<=y?++V:--V)ee.push(t.readUInt16());return ee}(),h=function(){var V,ee;for(ee=[],c=V=0;0<=y?V<y:V>y;c=0<=y?++V:--V)ee.push(t.readUInt16());return ee}(),x=function(){var V,ee;for(ee=[],c=V=0;0<=y?V<y:V>y;c=0<=y?++V:--V)ee.push(t.readUInt16());return ee}(),s=(this.length-t.pos+this.offset)/2,d=function(){var V,ee;for(ee=[],c=V=0;0<=s?V<s:V>s;c=0<=s?++V:--V)ee.push(t.readUInt16());return ee}(),c=f=0,C=a.length;f<C;c=++f)for(j=a[c],i=N=w=S[c];w<=j?N<=j:N>=j;i=w<=j?++N:--N)x[c]===0?l=i+h[c]:(l=d[x[c]/2+(i-w)-(y-c)]||0)!==0&&(l+=h[c]),this.codeMap[i]=65535&l}t.pos=v}return e.encode=function(t,r){var i,s,a,l,d,c,h,x,v,y,m,w,S,j,f,N,C,V,ee,ce,ne,O,J,te,M,k,P,R,T,F,re,q,le,oe,Pe,z,U,Q,G,ae,he,xe,we,Be,He,Qe;switch(R=new ga,l=Object.keys(t).sort(function(Ke,tt){return Ke-tt}),r){case"macroman":for(S=0,j=function(){var Ke=[];for(w=0;w<256;++w)Ke.push(0);return Ke}(),N={0:0},a={},T=0,le=l.length;T<le;T++)N[we=t[s=l[T]]]==null&&(N[we]=++S),a[s]={old:t[s],new:N[t[s]]},j[s]=N[t[s]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(j),{charMap:a,subtable:R.data,maxGlyphID:S+1};case"unicode":for(k=[],v=[],C=0,N={},i={},f=h=null,F=0,oe=l.length;F<oe;F++)N[ee=t[s=l[F]]]==null&&(N[ee]=++C),i[s]={old:ee,new:N[ee]},d=N[ee]-s,f!=null&&d===h||(f&&v.push(f),k.push(s),h=d),f=s;for(f&&v.push(f),v.push(65535),k.push(65535),te=2*(J=k.length),O=2*Math.pow(Math.log(J)/Math.LN2,2),y=Math.log(O/2)/Math.LN2,ne=2*J-O,c=[],ce=[],m=[],w=re=0,Pe=k.length;re<Pe;w=++re){if(M=k[w],x=v[w],M===65535){c.push(0),ce.push(0);break}if(M-(P=i[M].new)>=32768)for(c.push(0),ce.push(2*(m.length+J-w)),s=q=M;M<=x?q<=x:q>=x;s=M<=x?++q:--q)m.push(i[s].new);else c.push(P-M),ce.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*J+2*m.length),R.writeUInt16(0),R.writeUInt16(te),R.writeUInt16(O),R.writeUInt16(y),R.writeUInt16(ne),he=0,z=v.length;he<z;he++)s=v[he],R.writeUInt16(s);for(R.writeUInt16(0),xe=0,U=k.length;xe<U;xe++)s=k[xe],R.writeUInt16(s);for(Be=0,Q=c.length;Be<Q;Be++)d=c[Be],R.writeUInt16(d);for(He=0,G=ce.length;He<G;He++)V=ce[He],R.writeUInt16(V);for(Qe=0,ae=m.length;Qe<ae;Qe++)S=m[Qe],R.writeUInt16(S);return{charMap:i,subtable:R.data,maxGlyphID:C+1}}},e}(),S2=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="cmap",t.prototype.parse=function(r){var i,s,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)i=new Eg(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(r,i){var s,a;return i==null&&(i="macroman"),s=Eg.encode(r,i),(a=new ga).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},t}(),sb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),ab=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,s;for(s=[],i=0;i<10;++i)s.push(r.readByte());return s}(),this.charRange=function(){var i,s;for(s=[],i=0;i<4;++i)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,s;for(s=[],i=0;i<2;i=++i)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),ob=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="post",t.prototype.parse=function(r){var i,s,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var l;for(s=r.readUInt16(),this.glyphNameIndex=[],l=0;0<=s?l<s:l>s;l=0<=s?++l:--l)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)i=r.readByte(),a.push(this.names.push(r.readString(i)));return a;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var d,c,h;for(h=[],l=d=0,c=this.file.maxp.numGlyphs;0<=c?d<c:d>c;l=0<=c?++d:--d)h.push(r.readUInt32());return h}).call(this)}},t}(),lb=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},cb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="name",t.prototype.parse=function(r){var i,s,a,l,d,c,h,x,v,y,m;for(r.pos=this.offset,r.readShort(),i=r.readShort(),c=r.readShort(),s=[],l=0;0<=i?l<i:l>i;l=0<=i?++l:--l)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(h={},l=v=0,y=s.length;v<y;l=++v)a=s[l],r.pos=a.offset,x=r.readString(a.length),d=new lb(x,a),h[m=a.nameID]==null&&(h[m]=[]),h[a.nameID].push(d);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},t}(),db=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),ub=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="hmtx",t.prototype.parse=function(r){var i,s,a,l,d,c,h;for(r.pos=this.offset,this.metrics=[],i=0,c=this.file.hhea.numberOfMetrics;0<=c?i<c:i>c;i=0<=c?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var x,v;for(v=[],i=x=0;0<=a?x<a:x>a;i=0<=a?++x:--x)v.push(r.readInt16());return v}(),this.widths=(function(){var x,v,y,m;for(m=[],x=0,v=(y=this.metrics).length;x<v;x++)l=y[x],m.push(l.advance);return m}).call(this),s=this.widths[this.widths.length-1],h=[],i=d=0;0<=a?d<a:d>a;i=0<=a?++d:--d)h.push(this.widths.push(s));return h},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),C2=[].slice,mb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var i,s,a,l,d,c,h,x,v,y;return r in this.cache?this.cache[r]:(l=this.file.loca,i=this.file.contents,s=l.indexOf(r),(a=l.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+s,d=(c=new ga(i.read(a))).readShort(),x=c.readShort(),y=c.readShort(),h=c.readShort(),v=c.readShort(),this.cache[r]=d===-1?new pb(c,x,y,h,v):new hb(c,d,x,y,h,v),this.cache[r]))},t.prototype.encode=function(r,i,s){var a,l,d,c,h;for(d=[],l=[],c=0,h=i.length;c<h;c++)a=r[i[c]],l.push(d.length),a&&(d=d.concat(a.encode(s)));return l.push(d.length),{table:d,offsets:l}},t}(),hb=function(){function e(t,r,i,s,a,l){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=s,this.xMax=a,this.yMax=l,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),pb=function(){function e(t,r,i,s,a){var l,d;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;d=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&d;)l.pos+=1&d?4:2,128&d?l.pos+=8:64&d?l.pos+=4:8&d&&(l.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new ga(C2.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),fb=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Zi(t,Oi),t.prototype.tag="loca",t.prototype.parse=function(r){var i,s;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var a,l;for(l=[],s=0,a=this.length;s<a;s+=2)l.push(2*r.readUInt16());return l}).call(this):(function(){var a,l;for(l=[],s=0,a=this.length;s<a;s+=4)l.push(r.readUInt32());return l}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,i){for(var s=new Uint32Array(this.offsets.length),a=0,l=0,d=0;d<s.length;++d)if(s[d]=a,l<i.length&&i[l]==d){++l,s[d]=a;var c=this.offsets[d],h=this.offsets[d+1]-c;h>0&&(a+=h)}for(var x=new Array(4*s.length),v=0;v<s.length;++v)x[4*v+3]=255&s[v],x[4*v+2]=(65280&s[v])>>8,x[4*v+1]=(16711680&s[v])>>16,x[4*v]=(4278190080&s[v])>>24;return x},t}(),gb=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,s,a;for(r in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)i=a[r],t[r]=s[i];return t},e.prototype.glyphsFor=function(t){var r,i,s,a,l,d,c;for(s={},l=0,d=t.length;l<d;l++)s[a=t[l]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(i=s[a])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(a in c=this.glyphsFor(r))i=c[a],s[a]=i;return s},e.prototype.encode=function(t,r){var i,s,a,l,d,c,h,x,v,y,m,w,S,j,f;for(s in i=S2.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(t),m={0:0},f=i.charMap)m[(c=f[s]).old]=c.new;for(w in y=i.maxGlyphID,l)w in m||(m[w]=y++);return x=function(N){var C,V;for(C in V={},N)V[N[C]]=C;return V}(m),v=Object.keys(x).sort(function(N,C){return N-C}),S=function(){var N,C,V;for(V=[],N=0,C=v.length;N<C;N++)d=v[N],V.push(x[d]);return V}(),a=this.font.glyf.encode(l,S,m),h=this.font.loca.encode(a.offsets,S),j={cmap:this.font.cmap.raw(),glyf:a.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e}();wt.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,s,a,l;if(Array.isArray(r))return"["+function(){var d,c,h;for(h=[],d=0,c=r.length;d<c;d++)i=r[d],h.push(t.convert(i));return h}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)l=r[s],a.push("/"+s+" "+t.convert(l));return a.push(">>"),a.join(`
`)}return""+r},t}();const er=[{id:"carne",name:"Carne",color:"bg-red-100 text-red-800",temp:"0-4C",storage:"Frigorifero"},{id:"pesce",name:"Pesce",color:"bg-blue-100 text-blue-800",temp:"0-2C",storage:"Frigorifero"},{id:"latticini",name:"Latticini",color:"bg-yellow-100 text-yellow-800",temp:"2-4C",storage:"Frigorifero"},{id:"verdura",name:"Verdura",color:"bg-green-100 text-green-800",temp:"2-8C",storage:"Frigorifero"},{id:"frutta",name:"Frutta",color:"bg-orange-100 text-orange-800",temp:"2-8C",storage:"Frigorifero"},{id:"pane",name:"Pane",color:"bg-amber-100 text-amber-800",temp:"Ambiente",storage:"Shelf"},{id:"conserva",name:"Conserve",color:"bg-purple-100 text-purple-800",temp:"Ambiente",storage:"Shelf"},{id:"bevande",name:"Bevande",color:"bg-cyan-100 text-cyan-800",temp:"2-8C",storage:"Frigorifero"}],Fg=[{id:"pollo",name:"Petto di Pollo",category:"carne",temp:"0-4C"},{id:"manzo",name:"Macinato di Manzo",category:"carne",temp:"0-4C"},{id:"salmone",name:"Salmone Fresco",category:"pesce",temp:"0-2C"},{id:"tonno",name:"Tonno Fresco",category:"pesce",temp:"0-2C"},{id:"latte",name:"Latte Intero",category:"latticini",temp:"2-4C"},{id:"formaggio",name:"Formaggio Grana",category:"latticini",temp:"2-4C"},{id:"pomodori",name:"Pomodori",category:"verdura",temp:"2-8C"},{id:"lattuga",name:"Lattuga",category:"verdura",temp:"2-8C"},{id:"mele",name:"Mele",category:"frutta",temp:"2-8C"},{id:"banane",name:"Banane",category:"frutta",temp:"2-8C"},{id:"pane_bianco",name:"Pane Bianco",category:"pane",temp:"Ambiente"},{id:"pasta",name:"Pasta",category:"conserva",temp:"Ambiente"},{id:"acqua",name:"Acqua",category:"bevande",temp:"2-8C"}],Ao=[{id:"glutine",name:"Glutine",color:"bg-amber-100 text-amber-800"},{id:"latte",name:"Latte",color:"bg-blue-100 text-blue-800"},{id:"uova",name:"Uova",color:"bg-yellow-100 text-yellow-800"},{id:"soia",name:"Soia",color:"bg-green-100 text-green-800"},{id:"frutta_guscio",name:"Frutta a Guscio",color:"bg-orange-100 text-orange-800"},{id:"arachidi",name:"Arachidi",color:"bg-red-100 text-red-800"},{id:"pesce",name:"Pesce",color:"bg-cyan-100 text-cyan-800"},{id:"crostacei",name:"Crostacei",color:"bg-purple-100 text-purple-800"}],xb=()=>{var Ht;const[e,t]=K.useState([]),[r,i]=K.useState(!1),[s,a]=K.useState(null),[l,d]=K.useState(""),[c,h]=K.useState(""),[x,v]=K.useState(""),[y,m]=K.useState(""),[w,S]=K.useState(""),[j,f]=K.useState(""),[N,C]=K.useState(""),[V,ee]=K.useState([]),[ce,ne]=K.useState([]),[O,J]=K.useState([]),[te,M]=K.useState(!1),[k,P]=K.useState(!1),[R,T]=K.useState([]),[F,re]=K.useState([]),[q,le]=K.useState(!1),[oe,Pe]=K.useState([]),[z,U]=K.useState(!1),[Q,G]=K.useState([]),[ae,he]=K.useState(!1),[xe,we]=K.useState(""),[Be,He]=K.useState(""),[Qe,Ke]=K.useState(""),[tt,ke]=K.useState(""),[I,je]=K.useState({name:"",category:"",location:"",expiryDate:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",supplierName:"",associatedOrderId:""}),[be,ie]=K.useState({orderId:"",supplierName:"",orderDate:new Date().toISOString().split("T")[0],notes:""});K.useEffect(()=>{const W=localStorage.getItem("haccp-inventory"),ze=localStorage.getItem("haccp-refrigerators"),qe=localStorage.getItem("haccp-suppliers"),Me=localStorage.getItem("haccp-orders");if(W)try{t(JSON.parse(W))}catch(Rt){console.error("Errore nel caricamento inventario:",Rt)}if(ze)try{ee(JSON.parse(ze))}catch(Rt){console.error("Errore nel caricamento frigoriferi:",Rt)}if(qe)try{ne(JSON.parse(qe))}catch(Rt){console.error("Errore nel caricamento fornitori:",Rt)}if(Me)try{J(JSON.parse(Me))}catch(Rt){console.error("Errore nel caricamento ordini:",Rt)}const lt=localStorage.getItem("haccp-used-ingredients");if(lt)try{G(JSON.parse(lt))}catch(Rt){console.error("Errore nel caricamento ingredienti utilizzati:",Rt)}},[]),K.useEffect(()=>{localStorage.setItem("haccp-inventory",JSON.stringify(e))},[e]),K.useEffect(()=>{localStorage.setItem("haccp-used-ingredients",JSON.stringify(Q))},[Q]);const ue=W=>{const ze=new Date,Me=new Date(W)-ze,lt=Math.ceil(Me/(1e3*60*60*24));return lt<0?{status:"expired",label:"Scaduto",color:"bg-red-100 text-red-800"}:lt<=3?{status:"critical",label:"Critico",color:"bg-red-100 text-red-800"}:lt<=7?{status:"warning",label:"In scadenza",color:"bg-yellow-100 text-yellow-800"}:{status:"ok",label:"OK",color:"bg-green-100 text-green-800"}},Ae=W=>{const ze=er.find(Me=>Me.id===W);if(!ze)return"Categoria non trovata";const qe=V.find(Me=>Me.temperature>=0&&Me.temperature<=4&&ze.temp.includes("0-4C"));return qe?qe.name:"Nessun frigorifero appropriato"},Ie=W=>{const ze=new Date;let qe=7;W==="latticini"?qe=7:W==="carne"?qe=3:W==="pesce"?qe=2:W==="verdure"||W==="frutta"?qe=7:W==="dispensa"?qe=365:W==="condimenti"?qe=730:W==="surgelati"&&(qe=180);const Me=new Date(ze);return Me.setDate(ze.getDate()+qe),Me.toISOString().split("T")[0]},Ge=W=>{G(ze=>ze.filter(qe=>qe.id!==W.id)),je({name:W.name,category:W.category,expiryDate:Ie(W.category),location:W.location||"",allergens:W.allergens||[],notes:W.notes||"",lotNumber:W.lotNumber||"",batchDeliveryDate:W.batchDeliveryDate||"",associatedOrderId:W.associatedOrderId||"",supplierName:W.supplierName||""}),i(!0),he(!1)},it=W=>{Pe(ze=>ze.includes(W)?ze.filter(qe=>qe!==W):[...ze,W])},A=W=>{W.preventDefault(),e.filter(qe=>oe.includes(qe.id));const ze=e.map(qe=>oe.includes(qe.id)?{...qe,associatedOrderId:be.orderId,supplierName:be.supplierName,batchDeliveryDate:be.orderDate,lotNumber:`L${new Date().toISOString().slice(2,10).replace(/-/g,"")}${Math.random().toString(36).substr(2,3).toUpperCase()}`}:qe);t(ze),Pe([]),U(!1),ie({orderId:"",supplierName:"",orderDate:new Date().toISOString().split("T")[0],notes:""})},H=W=>{re(ze=>ze.includes(W)?ze.filter(qe=>qe!==W):[...ze,W])},ye=()=>{const W=new wt;W.setFontSize(20),W.text("Lista della Spesa",20,30),W.setFontSize(12),W.text(`Data: ${new Date().toLocaleDateString("it-IT")}`,20,45);let ze=60;W.setFontSize(14),W.text("Prodotti da acquistare:",20,ze),ze+=10;const qe=e.filter(Me=>F.includes(Me.id));qe.length===0?(W.setFontSize(12),W.text("Nessun prodotto selezionato",20,ze)):(W.setFontSize(10),qe.forEach((Me,lt)=>{ze>280&&(W.addPage(),ze=20);const Rt=er.find(Mt=>Mt.id===Me.category);W.text(`${lt+1}. ${Me.name}`,20,ze),Rt&&W.text(`   Categoria: ${Rt.name}`,25,ze+5),Me.location&&W.text(`   Posizione: ${Me.location}`,25,ze+10),ze+=20})),W.save(`lista-spesa-${new Date().toISOString().split("T")[0]}.pdf`),le(!1),re([])},Je=e.filter(W=>{var On,vt;const ze=!l||W.name.toLowerCase().includes(l.toLowerCase())||((On=W.location)==null?void 0:On.toLowerCase().includes(l.toLowerCase()))||((vt=er.find(ir=>ir.id===W.category))==null?void 0:vt.name.toLowerCase().includes(l.toLowerCase())),qe=!c||W.category===c;let Me=!0;x&&(Me=ue(W.expiryDate).status===x);const lt=!y||W.allergens&&W.allergens.includes(y),Rt=!w||W.lotNumber&&W.lotNumber.toLowerCase().includes(w.toLowerCase()),Mt=!j||W.supplierName&&W.supplierName.toLowerCase().includes(j.toLowerCase()),Fn=!N||W.associatedOrderId&&W.associatedOrderId.toLowerCase().includes(N.toLowerCase());return ze&&qe&&Me&&lt&&Rt&&Mt&&Fn}),Fe=()=>{je({name:"",category:"",location:"",expiryDate:"",allergens:[],notes:"",lotNumber:"",batchDeliveryDate:"",supplierName:"",associatedOrderId:""}),a(null),i(!1)},De=(W,ze)=>{je(qe=>({...qe,[W]:ze}))},Oe=W=>{je(ze=>({...ze,allergens:ze.allergens.includes(W)?ze.allergens.filter(qe=>qe!==W):[...ze.allergens,W]}))},_t=W=>{if(W.preventDefault(),!I.name||!I.category||!I.location||!I.expiryDate){alert("Compila tutti i campi obbligatori");return}const ze={...I,id:s?s.id:Date.now().toString(),addedAt:s?s.addedAt:new Date().toISOString()};t(s?qe=>qe.map(Me=>Me.id===s.id?ze:Me):qe=>[...qe,ze]),Fe()},mt=W=>{je({name:W.name,category:W.category,location:W.location,expiryDate:W.expiryDate,allergens:W.allergens||[],notes:W.notes||"",lotNumber:W.lotNumber||"",batchDeliveryDate:W.batchDeliveryDate||"",supplierName:W.supplierName||"",associatedOrderId:W.associatedOrderId||""}),a(W),i(!0)},Ct=W=>{const ze=e.find(qe=>qe.id===W);if(ze){const qe={...ze,usedDate:new Date().toISOString(),id:`used_${Date.now()}_${ze.id}`};G(Me=>[...Me,qe])}t(qe=>qe.filter(Me=>Me.id!==W))},nt=W=>{const ze=new Date,qe=new Date(ze.getTime()+7*24*60*60*1e3),Me={...W,id:Date.now().toString(),location:Ae(W.category),expiryDate:qe.toISOString().split("T")[0],allergens:[],notes:"",lotNumber:"",batchDeliveryDate:ze.toISOString().split("T")[0],supplierName:"",associatedOrderId:"",addedAt:new Date().toISOString()};t(lt=>[...lt,Me])},at=W=>{T(ze=>ze.includes(W)?ze.filter(qe=>qe!==W):[...ze,W])},Nt=()=>{t(W=>W.filter(ze=>!R.includes(ze.id))),T([]),M(!1)},gt=()=>{t([]),P(!1)},Sn=()=>{const W=new wt;W.setFontSize(20),W.text("Inventario HACCP",20,20),W.setFontSize(12),W.text(`Data: ${new Date().toLocaleDateString("it-IT")}`,20,30),W.text(`Totale prodotti: ${e.length}`,20,40);let ze=60;e.forEach((qe,Me)=>{ze>280&&(W.addPage(),ze=20);const lt=er.find(Mt=>Mt.id===qe.category),Rt=ue(qe.expiryDate);if(W.text(`${Me+1}. ${qe.name}`,20,ze),W.text(`   Categoria: ${(lt==null?void 0:lt.name)||"N/A"}`,25,ze+5),W.text(`   Posizione: ${qe.location}`,25,ze+10),W.text(`   Scadenza: ${new Date(qe.expiryDate).toLocaleDateString("it-IT")} (${Rt.label})`,25,ze+15),qe.allergens&&qe.allergens.length>0){const Mt=qe.allergens.map(Fn=>{var On;return(On=Ao.find(vt=>vt.id===Fn))==null?void 0:On.name}).filter(Boolean).join(", ");W.text(`   Allergeni: ${Mt}`,25,ze+20),ze+=25}else ze+=20;qe.notes&&(W.text(`   Note: ${qe.notes}`,25,ze),ze+=10),ze+=10}),W.save(`inventario-haccp-${new Date().toISOString().split("T")[0]}.pdf`)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Inventario"}),n.jsx("p",{className:"text-gray-600",children:"Gestisci i prodotti e la tracciabilit HACCP"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:Sn,className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-4 w-4"}),"Export PDF"]}),n.jsxs(de,{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(jn,{className:"h-4 w-4 mr-2"}),"Aggiungi Prodotto"]}),n.jsxs(de,{variant:"outline",onClick:()=>he(!ae),className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-4 w-4"}),"Ingredienti Utilizzati (",Q.length,")"]})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(t2,{className:"h-5 w-5"}),"Filtri"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"search",children:"Cerca"}),n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(ut,{id:"search",value:l,onChange:W=>d(W.target.value),placeholder:"Nome prodotto, posizione...",className:"pl-10"})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"category",children:"Categoria"}),n.jsxs("select",{id:"category",value:c,onChange:W=>h(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tutte le categorie"}),er.map(W=>n.jsx("option",{value:W.id,children:W.name},W.id))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"expiry",children:"Scadenza"}),n.jsxs("select",{id:"expiry",value:x,onChange:W=>v(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"expired",children:"Scaduti"}),n.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),n.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"allergen",children:"Allergene"}),n.jsxs("select",{id:"allergen",value:y,onChange:W=>m(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"Tutti gli allergeni"}),Ao.map(W=>n.jsx("option",{value:W.id,children:W.name},W.id))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"lot",children:"Numero Lotto"}),n.jsx(ut,{id:"lot",value:w,onChange:W=>S(W.target.value),placeholder:"Filtra per numero lotto..."})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"supplier",children:"Fornitore"}),n.jsx(ut,{id:"supplier",value:j,onChange:W=>f(W.target.value),placeholder:"Filtra per fornitore..."})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"orderId",children:"ID Ordine"}),n.jsx(ut,{id:"orderId",value:N,onChange:W=>C(W.target.value),placeholder:"Filtra per ID ordine..."})]}),n.jsx("div",{className:"col-span-full",children:n.jsx(de,{onClick:()=>{d(""),h(""),v(""),m(""),S(""),f(""),C("")},variant:"outline",className:"w-full",children:" Reset Filtri"})})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Gestione Inventario"]}),n.jsx("div",{className:"flex gap-2",children:e.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(de,{onClick:()=>M(!0),className:"flex items-center gap-2",variant:"outline",children:" Rimuovi Prodotti"}),n.jsx(de,{onClick:()=>P(!0),className:"flex items-center gap-2",variant:"destructive",children:" Cancella Tutto l'Inventario"})]})})]})}),n.jsx(Ze,{children:Je.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-gray-600",children:e.length===0?"Inventario vuoto. Inizia aggiungendo prodotti con i pulsanti categoria sopra!":"Nessun prodotto trovato con i filtri attuali"})]}):n.jsx("div",{className:"space-y-3",children:Je.map(W=>{const ze=er.find(Me=>Me.id===W.category),qe=ue(W.expiryDate);return n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-medium",children:W.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ze==null?void 0:ze.color}`,children:ze==null?void 0:ze.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${qe.color}`,children:qe.label})]}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("p",{children:[" ",W.location]}),n.jsxs("p",{children:[" Scadenza: ",new Date(W.expiryDate).toLocaleDateString("it-IT")]}),W.allergens&&W.allergens.length>0&&n.jsxs("p",{children:[" Allergeni: ",W.allergens.map(Me=>{var lt;return(lt=Ao.find(Rt=>Rt.id===Me))==null?void 0:lt.name}).join(", ")]}),W.notes&&n.jsxs("p",{children:[" ",W.notes]})]})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsx(de,{onClick:()=>mt(W),size:"sm",variant:"outline",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>Ct(W.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:n.jsx(wn,{className:"h-4 w-4"})})]})]})},W.id)})})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs(pt,{children:["Prodotti nell'inventario (",Je.length,")"]}),n.jsx("div",{className:"flex gap-2",children:e.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(de,{onClick:()=>M(!0),className:"flex items-center gap-2",variant:"outline",children:" Rimuovi Prodotti"}),n.jsx(de,{onClick:()=>P(!0),className:"flex items-center gap-2",variant:"destructive",children:" Cancella Tutto l'Inventario"})]})})]})}),n.jsx(Ze,{children:Je.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-gray-600",children:e.length===0?"Inventario vuoto. Inizia aggiungendo prodotti con i pulsanti categoria sopra!":"Nessun prodotto trovato con i filtri attuali"})]}):n.jsx("div",{className:"space-y-3",children:Je.map(W=>{const ze=er.find(Me=>Me.id===W.category),qe=ue(W.expiryDate);return n.jsx("div",{className:"border rounded-lg p-4",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-medium",children:W.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${ze==null?void 0:ze.color}`,children:ze==null?void 0:ze.name}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${qe.color}`,children:qe.label})]}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[n.jsxs("p",{children:[" ",W.location]}),n.jsxs("p",{children:[" Scadenza: ",new Date(W.expiryDate).toLocaleDateString("it-IT")]}),W.allergens&&W.allergens.length>0&&n.jsxs("p",{children:[" Allergeni: ",W.allergens.map(Me=>{var lt;return(lt=Ao.find(Rt=>Rt.id===Me))==null?void 0:lt.name}).join(", ")]}),W.notes&&n.jsxs("p",{children:[" ",W.notes]})]})]}),n.jsxs("div",{className:"flex gap-2 ml-4",children:[n.jsx(de,{onClick:()=>mt(W),size:"sm",variant:"outline",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>Ct(W.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:n.jsx(wn,{className:"h-4 w-4"})})]})]})},W.id)})})})]}),!r&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Aggiunta prodotti rapidi"]})}),n.jsxs(Ze,{children:[n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:er.map(W=>{const ze=Fg.filter(qe=>qe.category===W.id);return n.jsx("div",{className:"space-y-2",children:n.jsxs("button",{onClick:()=>h(c===W.id?"":W.id),className:`w-full p-4 text-left rounded-lg border-2 transition-colors ${c===W.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}`,children:[n.jsx("div",{className:`inline-flex px-2 py-1 text-xs rounded-full ${W.color} mb-2`,children:W.name}),n.jsx("div",{className:"text-sm font-medium",children:W.temp}),n.jsx("div",{className:"text-xs text-gray-600",children:W.storage}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ze.length," prodotti"]})]})},W.id)})}),c&&n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("h4",{className:"font-medium mb-3",children:["Prodotti ",(Ht=er.find(W=>W.id===c))==null?void 0:Ht.name,":"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Fg.filter(W=>W.category===c).map(W=>{var ze;return n.jsx("button",{onClick:()=>nt(W),className:"p-3 text-left bg-green-50 border border-green-200 rounded-lg hover:bg-green-100 transition-colors group",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm text-green-900",children:W.name}),n.jsx("div",{className:"text-xs text-green-700 mt-1",children:V.length>0?Ae(W.category):"Nessun frigorifero registrato"}),n.jsx("div",{className:"text-xs text-green-600 mt-1",children:(ze=er.find(qe=>qe.id===W.category))==null?void 0:ze.temp})]}),n.jsx(jn,{className:"h-4 w-4 text-green-600 group-hover:text-green-700"})]})},W.id)})})]}),!c&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(hn,{className:"h-8 w-8 mx-auto mb-2 text-gray-400"}),n.jsx("p",{className:"text-sm",children:"Seleziona una categoria sopra per vedere i prodotti disponibili"})]})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Ordini e Spesa"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:" Lista della Spesa"}),n.jsx(de,{onClick:()=>le(!0),disabled:F.length===0,size:"sm",variant:"outline",children:" Genera PDF"})]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Je.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per la lista della spesa"}),n.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):Je.map(W=>{const ze=F.includes(W.id);return n.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:()=>H(W.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm",children:W.name}),n.jsx("div",{className:"text-xs text-gray-500",children:W.location})]})]},W.id)})}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Selezionati: ",F.length," prodotti"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold",children:" Gestione Ordini"}),n.jsx(de,{onClick:()=>U(!0),disabled:oe.length===0,size:"sm",variant:"outline",children:" Crea Ordine"})]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Je.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"Nessun prodotto disponibile per gli ordini"}),n.jsx("p",{className:"text-xs",children:"Aggiungi prodotti all'inventario per iniziare"})]}):Je.map(W=>{const ze=oe.includes(W.id);return n.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:()=>it(W.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-sm",children:W.name}),n.jsx("div",{className:"text-xs text-gray-500",children:W.location})]})]},W.id)})}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Prodotti selezionati: ",oe.length]})]})]})})]}),ae&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5 text-gray-600"}),"Ingredienti gi Utilizzati (",Q.length,")"]})}),n.jsx(Ze,{children:Q.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:"Nessun ingrediente utilizzato"}),n.jsx("p",{className:"text-sm",children:"I prodotti eliminati dall'inventario appariranno qui"})]}):n.jsx("div",{className:"space-y-3",children:Q.map(W=>{var ze;return n.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 border rounded-lg opacity-75",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium text-gray-900",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[(ze=er.find(qe=>qe.id===W.category))==null?void 0:ze.name," ",W.location,"  Utilizzato: ",new Date(W.usedDate).toLocaleDateString("it-IT")]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{onClick:()=>Ge(W),size:"sm",className:"bg-green-600 hover:bg-green-700",children:" Reinserisci"}),n.jsx(de,{onClick:()=>{confirm("Sei sicuro di voler eliminare definitivamente questo ingrediente?")&&G(qe=>qe.filter(Me=>Me.id!==W.id))},size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:" Elimina"})]})]},W.id)})})})]}),n.jsx(xN,{}),r&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-5 w-5"}),s?"Modifica Prodotto":"Aggiungi Prodotto"]})}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:_t,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Prodotto *"}),n.jsx(ut,{id:"name",value:I.name,onChange:W=>De("name",W.target.value),placeholder:"Es. Pomodori San Marzano",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"category",children:"Categoria *"}),n.jsxs("select",{id:"category",value:I.category,onChange:W=>De("category",W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),er.map(W=>n.jsx("option",{value:W.id,children:W.name},W.id))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"location",children:"Posizione *"}),n.jsx(ut,{id:"location",value:I.location,onChange:W=>De("location",W.target.value),placeholder:"Es. Frigorifero A, Scaffale 2",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"expiryDate",children:"Data di Scadenza *"}),n.jsx(ut,{id:"expiryDate",type:"date",value:I.expiryDate,onChange:W=>De("expiryDate",W.target.value),required:!0})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Allergeni"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:Ao.map(W=>n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",checked:I.allergens.includes(W.id),onChange:()=>Oe(W.id),className:"rounded"}),n.jsx("span",{className:"text-sm",children:W.name})]},W.id))})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"notes",children:"Note"}),n.jsx("textarea",{id:"notes",value:I.notes,onChange:W=>De("notes",W.target.value),placeholder:"Note aggiuntive sul prodotto...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(de,{type:"button",onClick:Fe,variant:"outline",children:"Annulla"}),n.jsxs(de,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",children:[s?"Aggiorna":"Aggiungi"," Prodotto"]})]})]})})]}),te&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Rimuovi Prodotti dall'Inventario"}),n.jsxs("div",{className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("input",{type:"text",value:xe,onChange:W=>we(W.target.value),placeholder:"Cerca prodotti...",className:"px-3 py-2 border rounded-md"}),n.jsxs("select",{value:Be,onChange:W=>He(W.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le categorie"}),er.map(W=>n.jsx("option",{value:W.id,children:W.name},W.id))]}),n.jsxs("select",{value:Qe,onChange:W=>Ke(W.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"expired",children:"Scaduti"}),n.jsx("option",{value:"critical",children:"Critici (3 giorni)"}),n.jsx("option",{value:"warning",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"ok",children:"OK (>7 giorni)"})]}),n.jsxs("select",{value:tt,onChange:W=>ke(W.target.value),className:"px-3 py-2 border rounded-md",children:[n.jsx("option",{value:"",children:"Tutti gli allergeni"}),Ao.map(W=>n.jsx("option",{value:W.id,children:W.name},W.id))]})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Seleziona i prodotti da rimuovere dall'inventario:"}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:Je.filter(W=>{var Rt,Mt;const ze=!xe||W.name.toLowerCase().includes(xe.toLowerCase())||((Rt=W.location)==null?void 0:Rt.toLowerCase().includes(xe.toLowerCase()))||((Mt=er.find(Fn=>Fn.id===W.category))==null?void 0:Mt.name.toLowerCase().includes(xe.toLowerCase())),qe=!Be||W.category===Be;let Me=!0;Qe&&(Me=ue(W.expiryDate).status===Qe);const lt=!tt||W.allergens&&W.allergens.includes(tt);return ze&&qe&&Me&&lt}).map(W=>{const ze=er.find(Me=>Me.id===W.category),qe=ue(W.expiryDate);return n.jsxs("div",{className:"flex items-center p-2 border rounded hover:bg-gray-50",children:[n.jsx("input",{type:"checkbox",checked:R.includes(W.id),onChange:()=>at(W.id),className:"mr-3 w-4 h-4"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-500",children:[ze==null?void 0:ze.name,"  ",W.location,"  Scade: ",new Date(W.expiryDate).toLocaleDateString("it-IT")]})]}),n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${qe.color}`,children:qe.label})]},W.id)})})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-gray-600",children:["Selezionati: ",R.length," prodotti"]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{onClick:()=>M(!1),variant:"outline",children:"Annulla"}),n.jsxs(de,{onClick:Nt,disabled:R.length===0,className:"bg-red-600 hover:bg-red-700",children:["Rimuovi ",R.length," Prodotti"]})]})]})]})}),q&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:" Lista della Spesa"}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Prodotti selezionati per la lista della spesa (",F.length,"):"]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:F.length===0?n.jsxs("div",{className:"text-center py-4 text-gray-500",children:[n.jsx("p",{className:"text-sm",children:"Nessun prodotto selezionato"}),n.jsx("p",{className:"text-xs",children:"Torna alla sezione inventario per selezionare i prodotti"})]}):e.filter(W=>F.includes(W.id)).map(W=>{const ze=er.find(qe=>qe.id===W.category);return n.jsx("div",{className:"flex items-center p-3 border rounded bg-gray-50",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"font-medium",children:W.name}),n.jsxs("div",{className:"text-sm text-gray-600",children:[ze==null?void 0:ze.name,"  ",W.location]})]})},W.id)})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx(de,{onClick:ye,className:"flex-1",children:" Genera PDF"}),n.jsx(de,{onClick:()=>{le(!1),re([])},variant:"outline",children:"Annulla"})]})]})}),z&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx("h2",{className:"text-xl font-bold mb-4",children:" Crea Nuovo Ordine"}),n.jsxs("form",{onSubmit:A,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{children:"Numero Ordine *"}),n.jsx(ut,{value:be.orderId,onChange:W=>ie({...be,orderId:W.target.value}),placeholder:"es. ORD-2024-001",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Fornitore *"}),n.jsx(ut,{value:be.supplierName,onChange:W=>ie({...be,supplierName:W.target.value}),placeholder:"Nome fornitore",required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Data Ordine *"}),n.jsx(ut,{type:"date",value:be.orderDate,onChange:W=>ie({...be,orderDate:W.target.value}),required:!0})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Note"}),n.jsx(ut,{value:be.notes,onChange:W=>ie({...be,notes:W.target.value}),placeholder:"Note aggiuntive..."})]})]}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsxs("h3",{className:"font-medium mb-3",children:["Prodotti selezionati (",oe.length,"):"]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:e.filter(W=>oe.includes(W.id)).map(W=>{const ze=er.find(qe=>qe.id===W.category);return n.jsxs("div",{className:"p-2 border rounded",children:[n.jsx("div",{className:"font-medium text-sm",children:W.name}),n.jsxs("div",{className:"text-xs text-gray-600",children:[ze==null?void 0:ze.name,"  ",W.location]})]},W.id)})})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx(de,{type:"submit",className:"flex-1",children:" Crea Ordine"}),n.jsx(de,{type:"button",onClick:()=>U(!1),variant:"outline",children:"Annulla"})]})]})]})}),k&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 text-red-600",children:" Conferma Cancellazione"}),n.jsx("p",{className:"text-gray-700 mb-6",children:"Sei sicuro di voler cancellare TUTTO l'inventario? Questa azione non pu essere annullata."}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(de,{onClick:()=>P(!1),variant:"outline",children:"Annulla"}),n.jsx(de,{onClick:gt,className:"bg-red-600 hover:bg-red-700",children:"S, Cancella Tutto"})]})]})})]})};function vb({productLabels:e=[],setProductLabels:t,products:r=[],currentUser:i}){var ba,zs,no,Lr,is,Kn,_s,ja;const[s,a]=K.useState("scanner"),[l,d]=K.useState(!1),[c,h]=K.useState("");K.useState(null);const[x,v]=K.useState(""),[y,m]=K.useState(!1),[w,S]=K.useState(!1),[j,f]=K.useState(null),[N,C]=K.useState(!1),[V,ee]=K.useState(null),[ce,ne]=K.useState(!1),[O,J]=K.useState([]),[te,M]=K.useState(!1),[k,P]=K.useState([]),[R,T]=K.useState(!1),[F,re]=K.useState(""),[q,le]=K.useState([]),[oe,Pe]=K.useState(null),[z,U]=K.useState(!1),[Q,G]=K.useState([]),[ae,he]=K.useState(""),[xe,we]=K.useState(""),[Be,He]=K.useState(""),[Qe,Ke]=K.useState(1),[tt,ke]=K.useState(20),[I,je]=K.useState(new Set),[be,ie]=K.useState("medium"),[ue,Ae]=K.useState(!1),[Ie,Ge]=K.useState([]),[it,A]=K.useState([]),[H,ye]=K.useState(""),[Je,Fe]=K.useState(!1),[De,Oe]=K.useState(null),[_t,mt]=K.useState(""),[Ct,nt]=K.useState(null);K.useState(null),K.useState(!1);const[at,Nt]=K.useState(!1),[gt,Sn]=K.useState(!1);K.useState("");const[Ht,W]=K.useState(!1),[ze,qe]=K.useState(""),[Me,lt]=K.useState({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]});K.useEffect(()=>{Za(),Rt()},[e]);const Rt=()=>{const Y=localStorage.getItem("haccp-label-groups");Y&&le(JSON.parse(Y))},Mt=Y=>{le(Y),localStorage.setItem("haccp-label-groups",JSON.stringify(Y))},Fn=()=>{M(!te),P([])},On=Y=>{P(Le=>Le.includes(Y)?Le.filter(Xe=>Xe!==Y):[...Le,Y])},vt=()=>{const Y=ns.map(Le=>Le.id);P(Y)},ir=()=>{P([])},ei=()=>{if(k.length===0){alert("Seleziona almeno una etichetta");return}T(!0)},Qn=()=>{if(!F.trim()){alert("Inserisci un nome per il gruppo");return}const Le=e.filter(bt=>k.includes(bt.id)).reduce((bt,kt)=>{const Dt=new Date(kt.createdAt);return Dt>bt?Dt:bt},new Date(0)),Xe={id:`group_${Date.now()}`,name:F,labelIds:k,labelCount:k.length,createdAt:new Date().toISOString(),createdBy:i.name,lastUpdate:Le.toISOString()},Lt=[...q,Xe];Mt(Lt),P([]),M(!1),T(!1),re("")},Cn=()=>{const Y=prompt("Nome del nuovo gruppo:");if(!Y)return;const Le={id:`group_${Date.now()}`,name:Y,labelIds:[],labelCount:0,createdAt:new Date().toISOString(),createdBy:i.name,lastUpdate:new Date().toISOString()},Xe=[...q,Le];Mt(Xe)},ln=Y=>q.find(Le=>Le.labelIds.includes(Y)),xr=()=>{if(!oe)return;const Y=e.filter(Le=>!oe.labelIds.includes(Le.id));Ge(Y),A([]),ye(""),Ae(!0)},Cs=()=>{if(!oe||it.length===0)return;const Y=[],Le=[];if(it.forEach(bt=>{var Dt;const kt=ln(bt);kt&&Le.push({labelId:bt,labelName:(Dt=e.find(un=>un.id===bt))==null?void 0:Dt.productName,fromGroup:kt.name}),Y.push(bt)}),Le.length>0){const bt=Le.map(Dt=>` "${Dt.labelName}" verr spostata da "${Dt.fromGroup}"`).join(`
`);if(!confirm(`ATTENZIONE: Le seguenti etichette verranno spostate:

${bt}

Continuare?`))return}const Xe=q.map(bt=>{if(bt.id===oe.id){const kt=[...bt.labelIds,...Y],Dt=[...new Set(kt)];return{...bt,labelIds:Dt,labelCount:Dt.length,lastUpdate:new Date().toISOString()}}else{const kt=bt.labelIds.filter(Dt=>!Y.includes(Dt));return{...bt,labelIds:kt,labelCount:kt.length,lastUpdate:kt.length!==bt.labelIds.length?new Date().toISOString():bt.lastUpdate}}});Mt(Xe);const Lt=Xe.find(bt=>bt.id===oe.id);Pe(Lt),Ae(!1),A([])},ti=Y=>{A(Le=>Le.includes(Y)?Le.filter(Xe=>Xe!==Y):[...Le,Y])},qr=()=>{const Y=Ie.filter(Le=>Le.productName.toLowerCase().includes(H.toLowerCase())||Le.barcode.includes(H)||Le.lotNumber.toLowerCase().includes(H.toLowerCase())).map(Le=>Le.id);A(Y)},$r=()=>{oe&&(Oe(oe),mt(oe.name),Fe(!0))},kr=()=>{if(!_t.trim()||!De)return;const Y=q.map(Le=>Le.id===De.id?{...Le,name:_t.trim(),lastUpdate:new Date().toISOString()}:Le);Mt(Y),oe&&oe.id===De.id&&Pe({...oe,name:_t.trim(),lastUpdate:new Date().toISOString()}),Fe(!1),Oe(null),mt("")},ni=Y=>{Oe(Y),mt(Y.name),Fe(!0)},Ar=Y=>{const Le=e.find(kt=>kt.id===Y);if(!Le||!confirm(`Eliminare l'etichetta "${Le.productName}"?

Questa azione non pu essere annullata.`))return;const Lt=e.filter(kt=>kt.id!==Y);t(Lt),localStorage.setItem("haccp-product-labels",JSON.stringify(Lt));const bt=q.map(kt=>({...kt,labelIds:kt.labelIds.filter(Dt=>Dt!==Y),labelCount:kt.labelIds.filter(Dt=>Dt!==Y).length,lastUpdate:kt.labelIds.includes(Y)?new Date().toISOString():kt.lastUpdate}));if(Mt(bt),oe&&oe.labelIds.includes(Y)){const kt=bt.find(Dt=>Dt.id===oe.id);Pe(kt)}},Rn=[{id:"latticini",name:"Latticini e Formaggi",color:"bg-blue-100 text-blue-800",emoji:""},{id:"carni",name:"Carni e Salumi",color:"bg-red-100 text-red-800",emoji:""},{id:"verdure",name:"Verdure e Ortaggi",color:"bg-green-100 text-green-800",emoji:""},{id:"frutta",name:"Frutta Fresca",color:"bg-orange-100 text-orange-800",emoji:""},{id:"pesce",name:"Pesce e Frutti di Mare",color:"bg-cyan-100 text-cyan-800",emoji:""},{id:"surgelati",name:"Surgelati",color:"bg-indigo-100 text-indigo-800",emoji:""},{id:"dispensa",name:"Dispensa Secca",color:"bg-yellow-100 text-yellow-800",emoji:""},{id:"condimenti",name:"Oli e Condimenti",color:"bg-amber-100 text-amber-800",emoji:""}],es=Y=>{Ct===Y?nt(null):(nt(Y),Pe(null))},ks=()=>{U(!z),G([])},ts=Y=>{G(Le=>Le.includes(Y)?Le.filter(Xe=>Xe!==Y):[...Le,Y])},As=()=>{const Y=ri.map(Le=>Le.id);G(Y)},Ls=()=>{G([])},Za=()=>{const Y=new Date,Le=e.filter(Xe=>new Date(Xe.expiryDate)<Y&&Xe.photo);Le.length>0&&(J(Le),ne(!0))},ml=()=>{m(!0),setTimeout(()=>{const Y=["8001234567890","8001234567891","8001234567892","8001234567893","8001234567894"],Le=Y[Math.floor(Math.random()*Y.length)];v(Le),lt(Xe=>({...Xe,barcode:Le})),m(!1),d(!0)},2e3)},hl=()=>{if(!Me.productName||!Me.expiryDate){alert("Nome prodotto e data scadenza sono obbligatori");return}Sn(!0)},Ps=()=>{const Y={id:`label_${Date.now()}`,...Me,createdAt:new Date().toISOString(),createdBy:i.name,status:"active"},Le=[...e,Y];t(Le),localStorage.setItem("haccp-product-labels",JSON.stringify(Le));const Xe={id:`prod_${Date.now()}`,name:Me.productName,category:Me.category.startsWith("group_")?"latticini":Me.category,expiryDate:Me.expiryDate,location:Me.location||"Posizione da definire",allergens:Me.allergens||[],notes:`${Me.notes?Me.notes+" - ":""}Generato automaticamente da etichetta. Lotto: ${Me.lotNumber||"N/A"}`,addedBy:i==null?void 0:i.id,addedByName:i==null?void 0:i.name,createdAt:new Date().toISOString(),status:"active",fromLabel:!0,labelId:Y.id,barcode:Me.barcode,lotNumber:Me.lotNumber||"",batchDeliveryDate:"",associatedOrderId:"",supplierName:""},bt=[...JSON.parse(localStorage.getItem("haccp-products")||"[]"),Xe];if(localStorage.setItem("haccp-products",JSON.stringify(bt)),Me.category&&Me.category.startsWith("group_")){const kt=Me.category.replace("group_",""),Dt=q.map(un=>un.id===kt?{...un,labelIds:[...un.labelIds,Y.id],labelCount:un.labelCount+1,lastUpdate:new Date().toISOString()}:un);Mt(Dt)}lt({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]}),d(!1),v(""),Sn(!1)},eo=Y=>{const Le=Y.target.files[0];if(Le){const Xe=new FileReader;Xe.onload=Lt=>{const bt=new Image;bt.onload=()=>{const kt=document.createElement("canvas"),Dt=kt.getContext("2d"),un=800,Ri=600;let{width:Bt,height:vr}=bt;Bt>vr?Bt>un&&(vr=vr*un/Bt,Bt=un):vr>Ri&&(Bt=Bt*Ri/vr,vr=Ri),kt.width=Bt,kt.height=vr,Dt.drawImage(bt,0,0,Bt,vr);const Is=kt.toDataURL("image/jpeg",.7);lt(ro=>({...ro,photo:Is}))},bt.src=Lt.target.result},Xe.readAsDataURL(Le)}},pl=Y=>{f(Y),S(!0)},Na=()=>{const Y=e.map(Le=>O.some(Xe=>Xe.id===Le.id)?{...Le,photo:null,cleanedAt:new Date().toISOString()}:Le);t(Y),localStorage.setItem("haccp-product-labels",JSON.stringify(Y)),ne(!1),J([])},ns=e.filter(Y=>{if(oe)return oe.labelIds.includes(Y.id);if(Ct){const Le=Y.category===Ct,Xe=Y.productName.toLowerCase().includes(c.toLowerCase())||Y.barcode.includes(c)||Y.lotNumber.toLowerCase().includes(c.toLowerCase());return Le&&Xe}return Y.productName.toLowerCase().includes(c.toLowerCase())||Y.barcode.includes(c)||Y.lotNumber.toLowerCase().includes(c.toLowerCase())}),ri=e.filter(Y=>{if(!Y.photo)return!1;const Le=!ae||Y.productName.toLowerCase().includes(ae.toLowerCase())||Y.barcode.includes(ae)||Y.lotNumber.toLowerCase().includes(ae.toLowerCase()),Xe=!xe||new Date(Y.createdAt).toDateString()===new Date(xe).toDateString(),Lt=!Be||(()=>{const bt=new Date(Y.expiryDate),Dt=Math.ceil((bt-new Date)/(1e3*60*60*24));switch(Be){case"expired":return Dt<0;case"expiring":return Dt>=0&&Dt<=7;case"fresh":return Dt>7;default:return!0}})();return Le&&Xe&&Lt}),Bn=Math.ceil(ri.length/tt),ii=ri.slice((Qe-1)*tt,Qe*tt),fl=(Y,Le=be)=>{if(!Y)return"";if(Y.startsWith("data:image/")&&Le==="low"&&Y.length>5e4){const Xe=document.createElement("canvas"),Lt=Xe.getContext("2d"),bt=new Image;return new Promise(kt=>{bt.onload=()=>{Xe.width=Math.min(bt.width,200),Xe.height=Math.min(bt.height,200),Lt.drawImage(bt,0,0,Xe.width,Xe.height),kt(Xe.toDataURL("image/jpeg",.5))},bt.src=Y})}return Y};K.useEffect(()=>{const Y=e.filter(Le=>Le.photo).map(Le=>Le.id);je(new Set(Y))},[e]),K.useEffect(()=>{Ke(1)},[ae,xe,Be]);const dn=()=>{const Y=ii.map(Le=>Le.id);G(Le=>[...new Set([...Le,...Y])])},to=()=>{const Y=e.filter(Lt=>Lt.photo).length,Le=Y>100,Xe=Y>500;return{totalPhotos:Y,isLargeDataset:Le,isVeryLargeDataset:Xe,recommendedPhotosPerPage:Xe?12:Le?20:50}},rs={total:e.length,withPhotos:e.filter(Y=>Y.photo).length,expiringSoon:e.filter(Y=>{const Le=new Date(Y.expiryDate),Lt=Math.ceil((Le-new Date)/(1e3*60*60*24));return Lt<=7&&Lt>=0}).length,expired:e.filter(Y=>new Date(Y.expiryDate)<new Date).length};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(sc,{className:"h-5 w-5"}),"Gestione Etichette Prodotti"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:rs.total}),n.jsx("div",{className:"text-sm text-blue-700",children:"Etichette Totali"})]}),n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:rs.withPhotos}),n.jsx("div",{className:"text-sm text-green-700",children:"Con Foto"})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:rs.expiringSoon}),n.jsx("div",{className:"text-sm text-yellow-700",children:"In Scadenza"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:rs.expired}),n.jsx("div",{className:"text-sm text-red-700",children:"Scaduti"})]})]})})]}),n.jsxs("div",{className:"flex gap-2 overflow-x-auto",children:[n.jsxs(de,{variant:s==="scanner"?"default":"outline",onClick:()=>a("scanner"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(ug,{className:"h-4 w-4"}),"Scanner"]}),n.jsxs(de,{variant:s==="labels"?"default":"outline",onClick:()=>a("labels"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(qd,{className:"h-4 w-4"}),"Le Mie Etichette"]}),n.jsxs(de,{variant:s==="photos"?"default":"outline",onClick:()=>a("photos"),className:"flex items-center gap-2 whitespace-nowrap",children:[n.jsx(Po,{className:"h-4 w-4"}),"Foto Prodotti"]})]}),s==="scanner"&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Z1,{className:"h-5 w-5"}),"Scanner Codici a Barre"]})}),n.jsx(Ze,{className:"space-y-4",children:n.jsx("div",{className:"text-center",children:y?n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"animate-pulse",children:n.jsx(sc,{className:"h-20 w-20 text-blue-500"})}),n.jsx("p",{className:"text-blue-600",children:"Scansione in corso..."})]}):n.jsxs("div",{className:"space-y-4",children:[x?n.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:n.jsxs("p",{className:"text-green-700",children:["Codice scansionato: ",n.jsx("strong",{children:x})]})}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-gray-300 rounded-lg",children:[n.jsx(sc,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:'Clicca "Avvia Scanner" per leggere un codice a barre'})]}),n.jsxs(de,{onClick:ml,disabled:y,className:"w-full",children:[n.jsx(ug,{className:"h-4 w-4 mr-2"}),"Avvia Scanner"]}),x&&n.jsxs(de,{onClick:()=>d(!0),variant:"outline",className:"w-full",children:[n.jsx(jn,{className:"h-4 w-4 mr-2"}),"Crea Etichetta per questo Prodotto"]})]})})})]}),s==="labels"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ut,{placeholder:oe?`Cerca in "${oe.name}"...`:Ct?`Cerca in "${(ba=Rn.find(Y=>Y.id===Ct))==null?void 0:ba.name}"...`:"Cerca per nome, codice, lotto...",value:c,onChange:Y=>h(Y.target.value),className:"pl-10"})]})}),n.jsxs(de,{onClick:()=>d(!0),className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4"}),"Nuova Etichetta"]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(de,{onClick:Fn,variant:te?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(cg,{className:"h-4 w-4"}),te?"Annulla Selezione":"Seleziona Etichette"]}),te&&n.jsxs(n.Fragment,{children:[n.jsxs(de,{onClick:vt,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Bd,{className:"h-4 w-4"}),"Seleziona Tutto"]}),n.jsxs(de,{onClick:ir,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),n.jsxs(de,{onClick:ei,variant:"default",size:"sm",className:"flex items-center gap-2",disabled:k.length===0,children:[n.jsx(eN,{className:"h-4 w-4"}),"Crea Gruppo (",k.length,")"]})]}),!oe&&!te&&n.jsxs(de,{onClick:Cn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(dg,{className:"h-4 w-4"}),"Crea Gruppo di Etichette"]}),!oe&&te&&k.length>0&&n.jsxs(de,{onClick:()=>W(!0),variant:"default",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Vi,{className:"h-4 w-4"}),"Sposta Etichette nel Gruppo..."]}),oe&&n.jsxs(n.Fragment,{children:[n.jsxs(de,{onClick:xr,variant:"default",size:"sm",className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4"}),"Aggiungi Etichette al Gruppo"]}),n.jsxs(de,{onClick:$r,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(fr,{className:"h-4 w-4"}),"Modifica Gruppo"]}),n.jsxs(de,{onClick:()=>Pe(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),'Esci da "',oe.name,'"']})]}),Ct&&n.jsxs(de,{onClick:()=>nt(null),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),'Esci da "',(zs=Rn.find(Y=>Y.id===Ct))==null?void 0:zs.name,'"']})]}),te&&k.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[k.length," etichett",k.length===1?"a selezionata":"e selezionate"]})})]})})}),!oe&&!Ct&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Vi,{className:"h-5 w-5"}),"I Miei Gruppi di Etichette"]}),q.length>0&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ut,{placeholder:"Cerca gruppi ed etichette...",value:ze,onChange:Y=>qe(Y.target.value),className:"pl-10 w-64"})]})})]})}),n.jsxs(Ze,{children:[ze&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(Ea,{className:"h-4 w-4"}),'Risultati Ricerca: "',ze,'"']}),(()=>{const Y=q.filter(Xe=>Xe.name.toLowerCase().includes(ze.toLowerCase())),Le=e.filter(Xe=>Xe.productName.toLowerCase().includes(ze.toLowerCase())||Xe.barcode.includes(ze)||Xe.lotNumber.toLowerCase().includes(ze.toLowerCase()));return Y.length===0&&Le.length===0?n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun risultato trovato"})}):n.jsxs("div",{className:"space-y-4",children:[Y.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[n.jsx(Vi,{className:"h-3 w-3"}),"GRUPPI (",Y.length,")"]}),n.jsx("div",{className:"grid gap-2",children:Y.map(Xe=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-blue-50 border-blue-200",onClick:()=>{Pe(Xe),qe("")},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[n.jsx(Vi,{className:"h-3 w-3"}),"GRUPPO"]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Xe.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Xe.labelIds.length," etichette"]})]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:"Click per aprire"})]},Xe.id))})]}),Le.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"text-xs font-medium text-gray-500 mb-2 flex items-center gap-1",children:[n.jsx(hn,{className:"h-3 w-3"}),"ETICHETTE (",Le.length,")"]}),n.jsxs("div",{className:"grid gap-2",children:[Le.slice(0,5).map(Xe=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors bg-green-50 border-green-200",onClick:()=>{f(Xe),S(!0),qe("")},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full",children:[n.jsx(hn,{className:"h-3 w-3"}),"ETICHETTA"]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Xe.productName}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Scadenza: ",Xe.expiryDate,"  Lotto: ",Xe.lotNumber]})]})]}),n.jsx("div",{className:"text-xs text-gray-400",children:"Click per visualizzare"})]},Xe.id)),Le.length>5&&n.jsx("div",{className:"text-center py-2",children:n.jsxs("p",{className:"text-xs text-gray-500",children:["... e altre ",Le.length-5," etichette"]})})]})]})]})})(),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>qe(""),className:"w-full",children:[n.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Chiudi Ricerca"]})})]}),!ze&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(qd,{className:"h-4 w-4"}),"Categorie Ingredienti (Scelte Rapide)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Rn.map(Y=>{const Xe=e.filter(Lt=>Lt.category===Y.id).length;return n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>es(Y.id),className:`flex items-center gap-2 ${Xe>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:Xe===0,children:[n.jsx("span",{className:"text-lg",children:Y.emoji}),n.jsx("span",{className:"hidden sm:inline",children:Y.name}),n.jsx("span",{className:"sm:hidden",children:Y.name.split(" ")[0]}),Xe>0&&n.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Y.color} ml-1`,children:Xe})]},Y.id)})}),n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su una categoria per vedere le relative etichette"})]}),q.length>0&&n.jsx("div",{className:"border-t border-gray-200 my-4"}),q.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(qd,{className:"h-4 w-4"}),"Gruppi Personalizzati (Scelte Rapide)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(Y=>{const Le=Y.labelIds.length;return n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>Pe(Y),className:`flex items-center gap-2 ${Le>0?"hover:shadow-md":"opacity-50 cursor-not-allowed"}`,disabled:Le===0,children:[n.jsx(Vi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:Y.name}),n.jsx("span",{className:"sm:hidden",children:Y.name.split(" ")[0]}),Le>0&&n.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 ml-1",children:Le})]},Y.id)})}),n.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Clicca su un gruppo per vedere le relative etichette"})]}),!ze&&n.jsx("div",{className:"border-t border-gray-200 my-4"}),!ze&&n.jsx("div",{children:n.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[n.jsx(fr,{className:"h-4 w-4"}),"Gestione Gruppi Personalizzati"]})}),!ze&&n.jsx("div",{className:"grid gap-3",children:q.map(Y=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 hover:shadow-md cursor-pointer transition-all",onClick:()=>Pe(Y),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vi,{className:"h-5 w-5 text-blue-500"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold",children:Y.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Y.labelCount," etichett",Y.labelCount===1?"a":"e","  Ultimo aggiornamento: ",new Date(Y.lastUpdate).toLocaleDateString("it-IT")]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{variant:"outline",size:"sm",onClick:Le=>{Le.stopPropagation(),ni(Y)},title:"Modifica gruppo",children:n.jsx(fr,{className:"h-4 w-4"})}),n.jsx(de,{variant:"outline",size:"sm",onClick:Le=>{if(Le.stopPropagation(),confirm(`Eliminare il gruppo "${Y.name}"? Le etichette non verranno eliminate.`)){const Xe=q.filter(Lt=>Lt.id!==Y.id);Mt(Xe)}},title:"Elimina gruppo",children:n.jsx(wn,{className:"h-4 w-4"})})]})]},Y.id))}),!ze&&q.length===0&&n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo personalizzato creato ancora."}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:'Usa "Seleziona Etichette" per creare gruppi dalle etichette esistenti'})]})]})]}),n.jsxs(n.Fragment,{children:[oe&&n.jsx(We,{children:n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2 text-lg",children:[n.jsx(Vi,{className:"h-5 w-5 text-blue-600"}),"Gruppo: ",n.jsx("span",{className:"text-blue-600",children:oe.name}),n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",oe.labelIds.length," etichette)"]})]})})}),Ct&&n.jsx(We,{children:n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2 text-lg",children:[n.jsx(qd,{className:"h-5 w-5 text-green-600"}),"Categoria: ",n.jsx("span",{className:"text-green-600",children:(no=Rn.find(Y=>Y.id===Ct))==null?void 0:no.name}),n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",ns.length," etichette)"]})]})})}),n.jsx(We,{children:n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(hn,{className:"h-5 w-5"}),"Etichette Registrate",n.jsxs("span",{className:"text-sm text-gray-500 font-normal",children:["(",ns.length," totali)"]})]})})})]}),n.jsxs("div",{className:"grid gap-4",children:[ns.map(Y=>{var un,Ri;const Le=new Date(Y.expiryDate),Xe=new Date,Lt=Math.ceil((Le-Xe)/(1e3*60*60*24)),bt=Le<Xe,kt=Lt<=7&&Lt>=0,Dt=k.includes(Y.id);return n.jsx(We,{className:`${bt?"border-red-200 bg-red-50":kt?"border-yellow-200 bg-yellow-50":""} ${Dt?"ring-2 ring-blue-500":""} ${te?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>te&&On(Y.id),children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex justify-between items-start",children:[te&&n.jsx("div",{className:"mr-3 mt-1",children:n.jsx("input",{type:"checkbox",checked:Dt,onChange:()=>On(Y.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:Y.productName}),Y.photo&&n.jsx(Po,{className:"h-4 w-4 text-blue-500"}),bt&&n.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded",children:"SCADUTO"}),kt&&!bt&&n.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:"IN SCADENZA"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",Y.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",Y.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(Y.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Categoria:"})," ",((un=Rn.find(Bt=>Bt.id===Y.category))==null?void 0:un.name)||((Ri=q.find(Bt=>Bt.id===Y.category))==null?void 0:Ri.name)||Y.category||"Non specificata"]}),n.jsxs("div",{className:"col-span-2",children:[n.jsx("strong",{children:"Gruppo:"})," ",(()=>{const Bt=ln(Y.id);return Bt?n.jsxs("span",{className:"inline-flex items-center gap-1 ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:[n.jsx(Vi,{className:"h-3 w-3"}),Bt.name]}):n.jsx("span",{className:"text-gray-400 ml-2",children:"Nessun gruppo"})})()]})]}),Y.location&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("strong",{children:"Posizione:"})," ",Y.location]}),Y.notes&&n.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.jsx("strong",{children:"Note:"})," ",Y.notes]}),n.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Creata da ",Y.createdBy," il ",new Date(Y.createdAt).toLocaleDateString("it-IT")]})]}),n.jsxs("div",{className:"flex flex-col gap-2 ml-4",children:[n.jsxs(de,{size:"sm",variant:"outline",onClick:Bt=>{Bt.stopPropagation(),f(Y),S(!0)},className:"flex items-center gap-1",children:[n.jsx(dp,{className:"h-3 w-3"}),"Visualizza"]}),n.jsxs(de,{size:"sm",onClick:Bt=>{Bt.stopPropagation(),pl(Y)},className:"flex items-center gap-1",children:[n.jsx(yi,{className:"h-3 w-3"}),"Download"]}),Y.photo&&n.jsxs(de,{size:"sm",variant:"outline",onClick:Bt=>{Bt.stopPropagation(),ee(Y.photo),C(!0)},className:"flex items-center gap-1",children:[n.jsx(Po,{className:"h-3 w-3"}),"Foto"]}),n.jsxs(de,{size:"sm",variant:"destructive",onClick:Bt=>{Bt.stopPropagation(),Ar(Y.id)},className:"flex items-center gap-1",children:[n.jsx(wn,{className:"h-3 w-3"}),"Elimina"]})]})]})})},Y.id)}),ns.length===0&&n.jsx(We,{children:n.jsxs(Ze,{className:"pt-6 text-center",children:[n.jsx(hn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:oe?`Nessuna etichetta nel gruppo "${oe.name}"`:Ct?`Nessuna etichetta nella categoria "${(Lr=Rn.find(Y=>Y.id===Ct))==null?void 0:Lr.name}"`:c?"Nessuna etichetta trovata":"Nessuna etichetta creata ancora"})]})})]})]}),s==="photos"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ut,{placeholder:"Cerca per nome, codice, lotto...",value:ae,onChange:Y=>he(Y.target.value),className:"pl-10"})]}),n.jsx(ut,{type:"date",placeholder:"Filtra per data creazione",value:xe,onChange:Y=>we(Y.target.value)}),n.jsxs("select",{value:Be,onChange:Y=>He(Y.target.value),className:"p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Tutte le scadenze"}),n.jsx("option",{value:"fresh",children:"Prodotti freschi (>7 giorni)"}),n.jsx("option",{value:"expiring",children:"In scadenza (7 giorni)"}),n.jsx("option",{value:"expired",children:"Scaduti"})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(de,{onClick:ks,variant:z?"default":"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(cg,{className:"h-4 w-4"}),z?"Annulla Selezione":"Seleziona Foto"]}),z&&n.jsxs(n.Fragment,{children:[n.jsxs(de,{onClick:As,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Bd,{className:"h-4 w-4"}),"Seleziona Tutte (",ri.length,")"]}),n.jsxs(de,{onClick:dn,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Bd,{className:"h-4 w-4"}),"Solo Pagina Corrente (",ii.length,")"]}),n.jsxs(de,{onClick:Ls,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Deseleziona Tutto"]}),n.jsxs(de,{variant:"destructive",size:"sm",className:"flex items-center gap-2",disabled:Q.length===0,onClick:()=>{if(confirm(`Eliminare ${Q.length} foto selezionate?`)){const Y=e.map(Le=>Q.includes(Le.id)?{...Le,photo:null}:Le);t(Y),localStorage.setItem("haccp-product-labels",JSON.stringify(Y)),G([]),U(!1)}},children:[n.jsx(wn,{className:"h-4 w-4"}),"Elimina Selezionate (",Q.length,")"]})]}),(ae||xe||Be)&&n.jsxs(de,{onClick:()=>{he(""),we(""),He("")},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Cancella Filtri"]})]}),z&&Q.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[Q.length," foto selezionat",Q.length===1?"a":"e"]})}),(ae||xe||Be)&&n.jsx("div",{className:"p-3 bg-yellow-50 rounded-lg",children:n.jsxs("p",{className:"text-yellow-700 text-sm",children:["Filtri attivi: ",ri.length," foto di ",e.filter(Y=>Y.photo).length]})}),(()=>{const Y=to();return Y.isLargeDataset?n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-blue-700 text-sm font-semibold",children:["Dataset grande: ",Y.totalPhotos," foto"]}),n.jsxs("p",{className:"text-blue-600 text-xs",children:["Modalit ottimizzata attiva  Pagina ",Qe," di ",Bn]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("select",{value:tt,onChange:Le=>{ke(Number(Le.target.value)),Ke(1)},className:"text-xs p-1 border rounded",children:[n.jsx("option",{value:12,children:"12 foto/pagina"}),n.jsx("option",{value:20,children:"20 foto/pagina"}),n.jsx("option",{value:50,children:"50 foto/pagina"}),n.jsx("option",{value:100,children:"100 foto/pagina"})]}),n.jsxs("select",{value:be,onChange:Le=>ie(Le.target.value),className:"text-xs p-1 border rounded",children:[n.jsx("option",{value:"low",children:"Qualit Bassa"}),n.jsx("option",{value:"medium",children:"Qualit Media"}),n.jsx("option",{value:"high",children:"Qualit Alta"})]})]})]})}):null})()]})})}),Bn>1&&n.jsx(We,{children:n.jsxs(Ze,{className:"pt-6",children:[n.jsxs("div",{className:"flex justify-center items-center gap-4",children:[n.jsx(de,{onClick:()=>Ke(Y=>Math.max(1,Y-1)),disabled:Qe===1,variant:"outline",size:"sm",children:" Precedente"}),n.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(5,Bn))].map((Y,Le)=>{let Xe;return Bn<=5?Xe=Le+1:(Xe=Math.max(1,Qe-2)+Le,Xe>Bn&&(Xe=Bn-(4-Le))),n.jsx(de,{onClick:()=>Ke(Xe),variant:Qe===Xe?"default":"outline",size:"sm",className:"w-8 h-8 p-0",children:Xe},Xe)})}),n.jsx(de,{onClick:()=>Ke(Y=>Math.min(Bn,Y+1)),disabled:Qe===Bn,variant:"outline",size:"sm",children:"Successiva "})]}),n.jsx("div",{className:"text-center mt-2",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Pagina ",Qe," di ",Bn,"  Mostrando ",ii.length," di ",ri.length," foto"]})})]})}),n.jsx("div",{className:`grid gap-4 ${tt<=12?"grid-cols-2 md:grid-cols-3 lg:grid-cols-4":tt<=20?"grid-cols-2 md:grid-cols-4 lg:grid-cols-5":"grid-cols-3 md:grid-cols-5 lg:grid-cols-6"}`,children:ii.map(Y=>{const Le=Q.includes(Y.id),Xe=new Date(Y.expiryDate),Lt=new Date,bt=Math.ceil((Xe-Lt)/(1e3*60*60*24)),kt=Xe<Lt,Dt=bt<=7&&bt>=0;return n.jsxs(We,{className:`overflow-hidden ${Le?"ring-2 ring-blue-500":""} ${z?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:()=>z&&ts(Y.id),children:[n.jsxs("div",{className:"relative",children:[z&&n.jsx("div",{className:"absolute top-2 left-2 z-10",children:n.jsx("input",{type:"checkbox",checked:Le,onChange:()=>ts(Y.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"})}),(kt||Dt)&&n.jsx("div",{className:"absolute top-2 right-2 z-10",children:n.jsx("span",{className:`px-2 py-1 text-xs rounded ${kt?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:kt?"SCADUTO":"SCADENZA"})}),n.jsxs("div",{className:"aspect-square bg-gray-100 cursor-pointer overflow-hidden",onClick:un=>{z||(un.stopPropagation(),ee(Y.photo),C(!0))},children:[n.jsx("img",{src:fl(Y.photo),alt:Y.productName,className:"w-full h-full object-cover transition-opacity duration-200",loading:"lazy",onError:un=>{un.target.style.display="none",un.target.nextSibling.style.display="flex"}}),n.jsx("div",{className:"w-full h-full hidden items-center justify-center bg-red-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx(En,{className:"h-6 w-6 text-red-400 mx-auto mb-1"}),n.jsx("p",{className:"text-xs text-red-600",children:"Errore caricamento"})]})})]})]}),n.jsxs(Ze,{className:"pt-4",children:[n.jsx("h4",{className:"font-semibold text-sm truncate",children:Y.productName}),n.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[n.jsxs("p",{children:["Scad: ",new Date(Y.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("p",{children:["Creata: ",new Date(Y.createdAt).toLocaleDateString("it-IT")]}),Y.lotNumber&&n.jsxs("p",{children:["Lotto: ",Y.lotNumber]})]})]})]},Y.id)})}),Bn>1&&ii.length>0&&n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex justify-center items-center gap-2",children:[n.jsx(de,{onClick:()=>Ke(1),disabled:Qe===1,variant:"outline",size:"sm",children:"Prima"}),n.jsx(de,{onClick:()=>Ke(Y=>Math.max(1,Y-1)),disabled:Qe===1,variant:"outline",size:"sm",children:""}),n.jsxs("span",{className:"px-4 py-2 text-sm bg-gray-100 rounded",children:[Qe," / ",Bn]}),n.jsx(de,{onClick:()=>Ke(Y=>Math.min(Bn,Y+1)),disabled:Qe===Bn,variant:"outline",size:"sm",children:""}),n.jsx(de,{onClick:()=>Ke(Bn),disabled:Qe===Bn,variant:"outline",size:"sm",children:"Ultima"})]})})}),ri.length===0&&e.filter(Y=>Y.photo).length>0&&n.jsx(We,{children:n.jsxs(Ze,{className:"pt-6 text-center",children:[n.jsx(t2,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Nessuna foto trovata con i filtri attuali"})]})}),e.filter(Y=>Y.photo).length===0&&n.jsx(We,{children:n.jsxs(Ze,{className:"pt-6 text-center",children:[n.jsx(Po,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Nessuna foto caricata ancora"})]})})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-md max-h-[90vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Nuova Etichetta Prodotto"}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>{d(!1),lt({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"productName",children:"Nome Prodotto *"}),n.jsx(ut,{id:"productName",value:Me.productName,onChange:Y=>lt(Le=>({...Le,productName:Y.target.value})),placeholder:"es. Mozzarella di Bufala"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"barcode",children:"Codice a Barre"}),n.jsx(ut,{id:"barcode",value:Me.barcode,onChange:Y=>lt(Le=>({...Le,barcode:Y.target.value})),placeholder:"Scansiona o inserisci manualmente"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"expiryDate",children:"Data Scadenza *"}),n.jsx(ut,{id:"expiryDate",type:"date",value:Me.expiryDate,onChange:Y=>lt(Le=>({...Le,expiryDate:Y.target.value}))})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"lotNumber",children:"Numero Lotto"}),n.jsx(ut,{id:"lotNumber",value:Me.lotNumber,onChange:Y=>lt(Le=>({...Le,lotNumber:Y.target.value})),placeholder:"es. L240315A"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"category",children:"Categoria"}),n.jsxs("select",{id:"category",value:Me.category,onChange:Y=>lt(Le=>({...Le,category:Y.target.value})),className:"w-full p-2 border border-gray-300 rounded-md",children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),n.jsxs("optgroup",{label:" Categorie Standard",children:[n.jsx("option",{value:"latticini",children:"Latticini e Formaggi"}),n.jsx("option",{value:"carni",children:"Carni e Salumi"}),n.jsx("option",{value:"verdure",children:"Verdure e Ortaggi"}),n.jsx("option",{value:"frutta",children:"Frutta Fresca"}),n.jsx("option",{value:"pesce",children:"Pesce e Frutti di Mare"}),n.jsx("option",{value:"surgelati",children:"Surgelati"}),n.jsx("option",{value:"dispensa",children:"Dispensa Secca"}),n.jsx("option",{value:"condimenti",children:"Oli e Condimenti"})]}),q.length>0&&n.jsx("optgroup",{label:" I Miei Gruppi di Etichette",children:q.map(Y=>n.jsxs("option",{value:`group_${Y.id}`,children:[Y.name," (",Y.labelCount," etichett",Y.labelCount===1?"a":"e",")"]},Y.id))})]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"location",children:"Posizione"}),n.jsx(ut,{id:"location",value:Me.location,onChange:Y=>lt(Le=>({...Le,location:Y.target.value})),placeholder:"es. Frigo A - Ripiano intermedio"})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Allergeni"}),n.jsx("div",{className:"grid grid-cols-3 md:grid-cols-7 gap-2 mt-2",children:ALLERGENS.map(Y=>n.jsx("button",{type:"button",onClick:()=>{const Le=Me.allergens.includes(Y.id);lt(Xe=>({...Xe,allergens:Le?Xe.allergens.filter(Lt=>Lt!==Y.id):[...Xe.allergens,Y.id]}))},className:`px-2 py-1 text-xs rounded transition-colors ${Me.allergens.includes(Y.id)?Y.color:"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Y.name},Y.id))})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"notes",children:"Note"}),n.jsx("textarea",{id:"notes",value:Me.notes,onChange:Y=>lt(Le=>({...Le,notes:Y.target.value})),placeholder:"Note aggiuntive...",className:"w-full p-2 border border-gray-300 rounded-md h-20 resize-none"})]}),n.jsxs("div",{children:[n.jsx(Ue,{children:"Foto Prodotto"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{type:"file",accept:"image/*",onChange:eo,className:"w-full p-2 border border-gray-300 rounded-md"}),Me.photo&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:Me.photo,alt:"Preview",className:"w-full h-32 object-cover rounded-md border"}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>lt(Y=>({...Y,photo:null})),className:"absolute top-2 right-2",children:n.jsx(Yt,{className:"h-3 w-3"})})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsxs(de,{onClick:hl,className:"flex-1",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Salva Etichetta"]}),n.jsx(de,{variant:"outline",onClick:()=>{d(!1),lt({productName:"",barcode:"",expiryDate:"",lotNumber:"",category:"",location:"",notes:"",photo:null,allergens:[]})},children:"Annulla"})]})]})]})}),w&&j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-md",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Anteprima Etichetta"}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>S(!1),children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsxs(Ze,{children:[n.jsx("div",{className:"border-2 border-dashed border-gray-300 p-4 rounded-lg bg-white",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h2",{className:"text-lg font-bold",children:j.productName}),n.jsxs("div",{className:"text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",j.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",j.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(j.expiryDate).toLocaleDateString("it-IT")]}),j.location&&n.jsxs("div",{children:[n.jsx("strong",{children:"Posizione:"})," ",j.location]})]}),n.jsx("div",{className:"flex justify-center my-4",children:n.jsx("div",{className:"w-16 h-16 bg-black border-2 border-gray-300 flex items-center justify-center",children:n.jsx(sc,{className:"h-12 w-12 text-white"})})}),n.jsxs("div",{className:"text-xs text-gray-600",children:["Creata il ",new Date(j.createdAt).toLocaleDateString("it-IT")]})]})}),n.jsx("div",{className:"mt-4 text-center",children:n.jsxs(de,{onClick:()=>alert("Funzione stampa in sviluppo"),children:[n.jsx(yi,{className:"h-4 w-4 mr-2"}),"Scarica Etichetta PDF"]})})]})]})}),N&&V&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[n.jsx(de,{variant:"outline",size:"sm",onClick:()=>C(!1),className:"absolute top-4 right-4 z-10",children:n.jsx(Yt,{className:"h-4 w-4"})}),n.jsx("img",{src:V,alt:"Foto prodotto",className:"max-w-full max-h-full object-contain rounded-lg"})]})}),ce&&O.length>0&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-md",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(En,{className:"h-5 w-5 text-orange-500"}),"Pulizia Automatica"]})}),n.jsxs(Ze,{children:[n.jsxs("p",{className:"mb-4",children:["Trovati ",n.jsx("strong",{children:O.length})," prodotti scaduti con foto. Vuoi eliminare le foto per liberare spazio in memoria?"]}),n.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto mb-4",children:O.map(Y=>n.jsxs("div",{className:"flex justify-between items-center p-2 bg-red-50 rounded",children:[n.jsx("span",{className:"text-sm",children:Y.productName}),n.jsxs("span",{className:"text-xs text-red-600",children:["Scad: ",new Date(Y.expiryDate).toLocaleDateString("it-IT")]})]},Y.id))}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:Na,className:"flex-1",variant:"destructive",children:[n.jsx(wn,{className:"h-4 w-4 mr-2"}),"Elimina Foto"]}),n.jsx(de,{variant:"outline",onClick:()=>ne(!1),children:"Mantieni"})]})]})]})}),R&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-md",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Crea Nuovo Gruppo"}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>{T(!1),re("")},children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"groupName",children:"Nome del Gruppo"}),n.jsx(ut,{id:"groupName",value:F,onChange:Y=>re(Y.target.value),placeholder:"es. Etichette Salumi",onKeyPress:Y=>Y.key==="Enter"&&Qn()})]}),n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo conterr ",k.length," etichett",k.length===1?"a":"e"," selezionat",k.length===1?"a":"e"]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:Qn,className:"flex-1",disabled:!F.trim(),children:[n.jsx(dg,{className:"h-4 w-4 mr-2"}),"Crea Gruppo"]}),n.jsx(de,{variant:"outline",onClick:()=>{T(!1),re("")},children:"Annulla"})]})]})]})}),ue&&oe&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsxs("span",{children:['Aggiungi Etichette al Gruppo "',oe.name,'"']}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>{Ae(!1),A([]),ye("")},children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsxs(Ze,{className:"space-y-4 overflow-y-auto",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(ut,{placeholder:"Cerca etichette da aggiungere...",value:H,onChange:Y=>ye(Y.target.value),className:"pl-10"})]})}),n.jsxs(de,{onClick:qr,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Bd,{className:"h-4 w-4"}),"Seleziona Tutte"]}),n.jsxs(de,{onClick:()=>A([]),variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Deseleziona"]})]}),it.length>0&&n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-blue-700 text-sm",children:[it.length," etichett",it.length===1?"a selezionata":"e selezionate"]})}),n.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxs("p",{className:"text-gray-700 text-sm",children:["Etichette disponibili: ",Ie.filter(Y=>Y.productName.toLowerCase().includes(H.toLowerCase())||Y.barcode.includes(H)||Y.lotNumber.toLowerCase().includes(H.toLowerCase())).length," di ",Ie.length]})})]}),n.jsxs("div",{className:"max-h-96 overflow-y-auto space-y-2",children:[Ie.filter(Y=>Y.productName.toLowerCase().includes(H.toLowerCase())||Y.barcode.includes(H)||Y.lotNumber.toLowerCase().includes(H.toLowerCase())).map(Y=>{const Le=it.includes(Y.id),Xe=ln(Y.id);return n.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors hover:shadow-md ${Le?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 hover:border-gray-400"}`,onClick:()=>ti(Y.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("input",{type:"checkbox",checked:Le,onChange:()=>ti(Y.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500 pointer-events-none"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h4",{className:"font-semibold",children:Y.productName}),Y.photo&&n.jsx(Po,{className:"h-4 w-4 text-blue-500"}),Xe&&n.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded",children:['In "',Xe.name,'"']})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Codice:"})," ",Y.barcode]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Lotto:"})," ",Y.lotNumber]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Scadenza:"})," ",new Date(Y.expiryDate).toLocaleDateString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Categoria:"})," ",Y.category]})]})]})]})},Y.id)}),Ie.length===0&&n.jsxs("div",{className:"text-center py-8",children:[n.jsx(hn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Tutte le etichette sono gi in questo gruppo"})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsxs(de,{onClick:Cs,className:"flex-1",disabled:it.length===0,children:[n.jsx(jn,{className:"h-4 w-4 mr-2"}),"Aggiungi ",it.length," Etichett",it.length===1?"a":"e"]}),n.jsx(de,{variant:"outline",onClick:()=>{Ae(!1),A([]),ye("")},children:"Annulla"})]})]})]})}),Je&&De&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs(We,{className:"w-full max-w-md",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Modifica Gruppo"}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>{Fe(!1),Oe(null),mt("")},children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"editGroupName",children:"Nome del Gruppo"}),n.jsx(ut,{id:"editGroupName",value:_t,onChange:Y=>mt(Y.target.value),placeholder:"es. Etichette Salumi",onKeyPress:Y=>Y.key==="Enter"&&kr()})]}),n.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[n.jsxs("p",{className:"text-blue-700 text-sm",children:["Il gruppo contiene ",De.labelCount," etichett",De.labelCount===1?"a":"e"]}),n.jsxs("p",{className:"text-blue-600 text-xs mt-1",children:["Creato da ",De.createdBy," il ",new Date(De.createdAt).toLocaleDateString("it-IT")]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:kr,className:"flex-1",disabled:!_t.trim()||_t.trim()===De.name,children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Salva Modifiche"]}),n.jsx(de,{variant:"outline",onClick:()=>{Fe(!1),Oe(null),mt("")},children:"Annulla"})]})]})]})}),gt&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(We,{className:"w-full max-w-md mx-4",children:[n.jsx(ht,{children:n.jsx(pt,{className:"text-center text-orange-600",children:" Conferma Salvataggio Etichetta"})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Stai per salvare l'etichetta con questi dati:"}),n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg text-left space-y-2",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Prodotto:"})," ",Me.productName]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Scadenza:"})," ",Me.expiryDate]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Lotto:"})," ",Me.lotNumber||"Non specificato"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Categoria:"})," ",((is=Rn.find(Y=>Y.id===Me.category))==null?void 0:is.name)||((Kn=q.find(Y=>Y.id===Me.category))==null?void 0:Kn.name)||"Non specificata"]}),Me.photo&&n.jsxs("p",{children:[n.jsx("strong",{children:"Foto:"}),"  Allegata"]})]}),n.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-red-700",children:[n.jsx("strong",{children:" ATTENZIONE:"}),n.jsx("br",{}),"Una volta salvata, l'etichetta ",n.jsx("strong",{children:"NON potr essere modificata"}),". In caso di errore sar necessario:"]}),n.jsxs("ul",{className:"text-xs text-red-600 mt-2 text-left",children:[n.jsx("li",{children:" Caricare una nuova foto"}),n.jsx("li",{children:" Rifare completamente la registrazione"})]}),n.jsx("p",{className:"text-sm text-red-700 mt-2",children:n.jsx("strong",{children:"Ricontrolla attentamente tutte le informazioni!"})})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{variant:"outline",onClick:()=>Sn(!1),className:"flex-1",children:" Modifica Dati"}),n.jsx(de,{onClick:Ps,className:"flex-1 bg-green-600 hover:bg-green-700",children:" Conferma e Salva"})]})]})})]})}),w&&j&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(We,{className:"w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(dp,{className:"h-5 w-5"}),"Visualizzazione Etichetta"]}),n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>{S(!1),f(null)},children:n.jsx(Yt,{className:"h-4 w-4"})})]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[j.photo&&n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-sm font-medium mb-2",children:"Foto Prodotto"}),n.jsxs("div",{className:"relative inline-block",children:[n.jsx("img",{src:j.photo,alt:"Foto prodotto",className:"w-32 h-32 object-cover rounded-lg border cursor-pointer hover:opacity-75 transition-opacity",onClick:()=>Nt(!0)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-50 rounded-lg",children:n.jsx("span",{className:"text-white text-xs",children:"Clicca per ingrandire"})})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Nome Prodotto"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.productName})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Codice/Barcode"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.barcode||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Data Scadenza"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.expiryDate})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Numero Lotto"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.lotNumber||"Non specificato"})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Categoria"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:((_s=Rn.find(Y=>Y.id===j.category))==null?void 0:_s.name)||((ja=q.find(Y=>Y.id===j.category))==null?void 0:ja.name)||"Non specificata"})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Posizione"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.location||"Non specificata"})]})]}),j.notes&&n.jsxs("div",{children:[n.jsx(Ue,{className:"text-sm font-medium",children:"Note"}),n.jsx("p",{className:"text-sm bg-gray-50 p-2 rounded",children:j.notes})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-xs text-gray-500",children:[n.jsxs("div",{children:[n.jsx(Ue,{className:"text-xs font-medium",children:"Creata da"}),n.jsx("p",{children:j.createdBy})]}),n.jsxs("div",{children:[n.jsx(Ue,{className:"text-xs font-medium",children:"Data Creazione"}),n.jsx("p",{children:new Date(j.createdAt).toLocaleString()})]})]})}),n.jsx("div",{className:"border-t pt-4 flex justify-center",children:n.jsx(de,{variant:"outline",onClick:()=>{S(!1),f(null)},className:"px-8",children:"Chiudi"})})]})})]})}),at&&(j==null?void 0:j.photo)&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:()=>Nt(!1),children:n.jsxs("div",{className:"relative max-w-4xl max-h-4xl p-4",children:[n.jsx(de,{variant:"ghost",size:"sm",className:"absolute top-2 right-2 text-white hover:bg-white hover:bg-opacity-20",onClick:()=>Nt(!1),children:n.jsx(Yt,{className:"h-6 w-6"})}),n.jsx("img",{src:j.photo,alt:"Foto prodotto ingrandita",className:"max-w-full max-h-full object-contain rounded-lg",onClick:Y=>Y.stopPropagation()})]})}),Ht&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:n.jsxs(We,{className:"w-full max-w-md mx-4",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Vi,{className:"h-5 w-5"}),"Sposta Etichette nel Gruppo"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["Seleziona il gruppo dove spostare le ",k.length," etichette selezionate:"]}),n.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:q.length===0?n.jsxs("div",{className:"text-center py-4",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Nessun gruppo disponibile."}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Crea prima un gruppo per spostare le etichette."})]}):q.map(Y=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{const Le=q.map(Xe=>{if(Xe.id===Y.id){const Lt=[...new Set([...Xe.labelIds,...k])];return{...Xe,labelIds:Lt,labelCount:Lt.length,lastUpdate:new Date().toISOString()}}else{const Lt=Xe.labelIds.filter(bt=>!k.includes(bt));return{...Xe,labelIds:Lt,labelCount:Lt.length,lastUpdate:Lt.length!==Xe.labelIds.length?new Date().toISOString():Xe.lastUpdate}}});Mt(Le),P([]),M(!1),W(!1)},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Y.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[Y.labelIds.length," etichette"]})]}),n.jsx(Vi,{className:"h-4 w-4 text-gray-400"})]},Y.id))}),n.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[n.jsx(de,{variant:"outline",onClick:()=>{W(!1)},className:"flex-1",children:"Annulla"}),n.jsxs(de,{onClick:()=>{W(!1),T(!0)},variant:"default",className:"flex-1",children:[n.jsx(jn,{className:"h-4 w-4 mr-2"}),"Nuovo Gruppo"]})]})]})})]})})]})}function yb({currentUser:e,currentSection:t,products:r=[],temperatures:i=[],cleaning:s=[],staff:a=[],onAction:l}){const[d,c]=K.useState([]),[h,x]=K.useState(""),[v,y]=K.useState(!1);K.useState([]);const[m,w]=K.useState(!1),[S,j]=K.useState(!1),[f,N]=K.useState(null),[C,V]=K.useState(!0),[ee,ce]=K.useState(!1),[ne,O]=K.useState(!1),J=K.useRef(null),te=K.useRef(!0),M=K.useRef(!0);console.log(" AIAssistant: Component rendering, isMinimized:",C,"isMounted:",ee,"isVisible:",ne),K.useEffect(()=>{console.log(" AIAssistant: useEffect triggered - setting up component"),V(!0),te.current=!0,M.current=!0,O(!1),console.log(" AIAssistant: Starting mount timer (500ms)"),setTimeout(()=>{console.log(" AIAssistant: Mount timer complete - making visible"),ce(!0),V(!0),te.current=!0,O(!0)},500),console.log(" AIAssistant: Starting grace period (2000ms)"),setTimeout(()=>{M.current=!1,console.log(" AIAssistant: Grace period ended, chat can now be opened by user")},2e3)},[]),K.useEffect(()=>{console.log(" AIAssistant: State changed - isMinimized:",C,"isMounted:",ee,"isVisible:",ne,"forceMinimized:",te.current,"gracePeriod:",M.current)},[C,ee,ne]);const k=G=>{if(console.log("AIAssistant: handleSetMinimized called with:",G,"gracePeriod:",M.current,"forceMinimized:",te.current),G===!1&&M.current){console.log("AIAssistant: BLOCKED - Still in grace period, no opening allowed");return}if(G===!1&&te.current){console.log("AIAssistant: Preventing auto-open, first user click required");return}te.current=!1,V(G)},P=()=>{var G;(G=J.current)==null||G.scrollIntoView({behavior:"smooth"})};K.useEffect(()=>{P()},[d]),K.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const G=window.SpeechRecognition||window.webkitSpeechRecognition,ae=new G;ae.continuous=!1,ae.interimResults=!1,ae.lang="it-IT",ae.onstart=()=>{j(!0),R("assistant"," Ti sto ascoltando... Parla ora!","system")},ae.onresult=he=>{const xe=he.results[0][0].transcript;x(xe),R("assistant",` Ho sentito: "${xe}"`,"system")},ae.onerror=he=>{console.error("Speech recognition error:",he.error),j(!1),R("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},ae.onend=()=>{j(!1)},N(ae)}},[]),K.useEffect(()=>{},[]);const R=(G,ae,he="text",xe=null)=>{const we={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:G,content:ae,type:he,data:xe,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};c(Be=>[...Be,we])},T=async()=>{if(!h.trim())return;const G=h.trim();x(""),R("user",G),y(!0),setTimeout(()=>{const ae=F(G,t);R("assistant",ae.content,ae.type,ae.data),y(!1)},1e3)},F=(G,ae)=>{const he=G.toLowerCase();switch(ae){case"inventory":return re(he);case"cleaning":return q(he);case"temperature":return le();case"staff":return oe();case"dashboard":return Pe();default:return z(he)}},re=G=>{if(G.includes("aggiungere")||G.includes("nuovo prodotto"))return{content:`Per aggiungere un nuovo prodotto:

1. **Vai alla sezione "Inventario"**
2. **Clicca "Aggiungi Prodotto"**
3. **Compila i campi richiesti:**
   - Nome prodotto
   - Categoria
   - Posizione
   - Data scadenza
   - Allergeni (se presenti)

**Suggerimento**: Puoi anche usare le categorie predefinite per aggiunta rapida!`,type:"text"};if(G.includes("scadenza")||G.includes("scaduti")){const ae=r.filter(he=>{const xe=Math.ceil((new Date(he.expiryDate)-new Date)/864e5);return xe<=7&&xe>0});return ae.length>0?{content:` **Prodotti in scadenza** (${ae.length} prodotti):

${ae.map(he=>` ${he.name} - Scade il ${he.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:ae}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}return{content:`Per l'inventario posso aiutarti con:
 Aggiungere prodotti
 Controllare scadenze
 Gestire categorie
 Suggerimenti ricette

Cosa ti serve?`,type:"text"}},q=G=>{if(G.includes("attivit")||G.includes("mansioni")){const ae=s.filter(he=>!he.completed);return{content:` **Attivit da svolgere** (${ae.length} totali):

${ae.slice(0,5).map(he=>` ${he.task} - Assegnato a: ${he.assignee}`).join(`
`)}
${ae.length>5?`
... e altre ${ae.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza (Giornaliere/Settimanali/Mensili/Annuali)`,type:"text"}}return G.includes("temperatura")||G.includes("frigo")?{content:` **Ultime temperature registrate**:

${i.slice(-3).map(he=>` ${he.location}: ${he.temperature}C (${he.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:`Per la sezione pulizia posso aiutarti con:
 Gestione attivit
 Controlli temperatura
 Frequenze mansioni
 Report completamento

Cosa ti serve?`,type:"text"}},le=G=>({content:`Per i controlli temperatura posso aiutarti con:
 Registrare nuove temperature
 Monitorare trend
 Alert automatici
 Report periodici

Cosa ti serve?`,type:"text"}),oe=G=>({content:`Per la gestione del personale posso aiutarti con:
 Aggiungere dipendenti
 Gestire ruoli
 Assegnare mansioni
 Report attivit

Cosa ti serve?`,type:"text"}),Pe=G=>({content:`Per la dashboard posso aiutarti con:
 Panoramica generale
 Statistiche rapide
 Alert importanti
 Navigazione sezioni

Cosa ti serve?`,type:"text"}),z=G=>G.includes("aiuto")||G.includes("help")?{content:` **Come posso aiutarti:**

** Inventario:**
 Aggiungere prodotti
 Controllare scadenze
 Suggerimenti ricette

** Pulizia:**
 Gestire attivit
 Controlli temperatura
 Frequenze mansioni

** Personale:**
 Gestire dipendenti
 Assegnare ruoli

** Dashboard:**
 Panoramica generale
 Statistiche

** Automatizzazioni:**
 Alert scadenze
 Ordini settimanali
 Suggerimenti ricette

Dimmi in quale sezione ti trovi o cosa ti serve!`,type:"text"}:{content:"Non sono sicuro di aver capito. Puoi essere pi specifico? Oppure dimmi in quale sezione ti trovi per ricevere aiuto mirato!",type:"text"},U=G=>{G.key==="Enter"&&!G.shiftKey&&(G.preventDefault(),T())},Q=()=>{if(!f){R("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}S?f.stop():f.start()};return n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:!ee||!ne?null:C?n.jsx(de,{onClick:()=>k(!1),className:"w-12 h-12 rounded-full bg-blue-600 hover:bg-blue-700 shadow-lg",children:n.jsx(na,{className:"h-6 w-6 text-white"})}):n.jsxs(We,{className:"w-80 h-96 flex flex-col",children:[n.jsx(ht,{className:"pb-3",children:n.jsxs(pt,{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-4 w-4 text-blue-600"}),"Assistente IA",S&&n.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[n.jsx(Eu,{className:"h-3 w-3 animate-pulse"}),n.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>k(!0),className:"h-6 w-6 p-0",children:n.jsx(Zy,{className:"h-3 w-3"})}),n.jsx(de,{variant:"ghost",size:"sm",onClick:()=>w(!m),className:"h-6 w-6 p-0",children:n.jsx(fr,{className:"h-3 w-3"})})]})]})}),n.jsxs(Ze,{className:"flex-1 flex flex-col p-0",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[d.map(G=>n.jsx("div",{className:`flex ${G.sender==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${G.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[G.sender==="assistant"&&n.jsx(na,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm whitespace-pre-wrap",children:G.content}),n.jsx("div",{className:`text-xs mt-1 ${G.sender==="user"?"text-blue-100":"text-gray-500"}`,children:G.timestamp})]})]})})},G.id)),v&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-4 w-4 text-blue-600"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),n.jsx("div",{ref:J})]}),n.jsx("div",{className:"p-4 border-t bg-white",children:n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsx(ut,{value:h,onChange:G=>x(G.target.value),onKeyPress:U,placeholder:"Scrivi un messaggio...",className:"flex-1 min-h-[40px]"}),n.jsx(de,{onClick:Q,disabled:v,size:"sm",className:`px-3 h-10 ${S?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:S?n.jsx(n2,{className:"h-4 w-4"}):n.jsx(Eu,{className:"h-4 w-4"})}),n.jsx(de,{onClick:T,disabled:!h.trim()||v,size:"sm",className:"px-3 h-10",children:n.jsx(r2,{className:"h-4 w-4"})})]})})]})]})})}function Nb({currentUser:e,products:t=[],temperatures:r=[],cleaning:i=[],staff:s=[],onAction:a}){const[l,d]=K.useState([]),[c,h]=K.useState(""),[x,v]=K.useState(!1),[y,m]=K.useState(!1),[w,S]=K.useState(null),[j,f]=K.useState(!1),[N,C]=K.useState([{id:1,name:"Alert Scadenze",enabled:!0,description:"Avvisa sui prodotti in scadenza"},{id:2,name:"Suggerimenti Ricette",enabled:!0,description:"Genera ricette per ingredienti in scadenza"},{id:3,name:"Ordini Settimanali",enabled:!1,description:"Crea ordini automatici ogni luned"},{id:4,name:"Alert Temperature",enabled:!0,description:"Avvisa su temperature critiche"}]),[V,ee]=K.useState(()=>{const P=localStorage.getItem("haccp-show-chat-icon");return P!==null?JSON.parse(P):!0});K.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const P=window.SpeechRecognition||window.webkitSpeechRecognition,R=new P;R.continuous=!1,R.interimResults=!1,R.lang="it-IT",R.onstart=()=>{m(!0),ce("assistant"," Ti sto ascoltando... Parla ora!","system")},R.onresult=T=>{const F=T.results[0][0].transcript;h(F),ce("assistant",` Ho sentito: "${F}"`,"system")},R.onerror=T=>{console.error("Speech recognition error:",T.error),m(!1),ce("assistant"," Errore nel riconoscimento vocale. Riprova!","system")},R.onend=()=>{m(!1)},S(R)}},[]),K.useEffect(()=>{l.length===0&&ce("assistant",`Ciao ${(e==null?void 0:e.name)||"utente"}!  Sono il tuo assistente IA per il sistema HACCP.

** Cosa posso fare:**
 **Gestione inventario** - Aggiungere prodotti, controllare scadenze
 **Controlli temperatura** - Registrare e monitorare temperature
 **Attivit di pulizia** - Gestire mansioni e frequenze
 **Automatizzazioni** - Alert intelligenti e suggerimenti
 ** Riconoscimento vocale** - Parla invece di scrivere!

** Automatizzazioni attive:**
${N.filter(P=>P.enabled).map(P=>` ${P.name}`).join(`
`)}

Dimmi cosa ti serve!`)},[]);const ce=(P,R,T="text",F=null)=>{const re={id:`${Date.now()}_${Math.random().toString(36).substr(2,9)}`,sender:P,content:R,type:T,data:F,timestamp:new Date().toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"})};d(q=>[...q,re])},ne=async()=>{if(!c.trim())return;const P=c.trim();h(""),ce("user",P),v(!0),setTimeout(()=>{const R=O(P);ce("assistant",R.content,R.type,R.data),v(!1)},1e3)},O=P=>{const R=P.toLowerCase();if(R.includes("aiuto")||R.includes("help"))return{content:` **Come posso aiutarti:**

** Inventario:**
 "Aggiungi un nuovo prodotto"
 "Controlla le scadenze"
 "Mostra i prodotti in scadenza"

** Temperature:**
 "Registra una temperatura"
 "Mostra le ultime temperature"
 "Controlla i frigoriferi"

** Pulizia:**
 "Mostra le attivit da svolgere"
 "Aggiungi una nuova attivit"
 "Controlla le mansioni"

** Automatizzazioni:**
 "Attiva alert scadenze"
 "Genera ricette"
 "Configura automatizzazioni"

** Comandi vocali:**
 Parla chiaramente in italiano
 Usa frasi semplici e dirette
 Clicca il microfono per iniziare`,type:"text"};if(R.includes("scadenza")||R.includes("scaduti")){const T=t.filter(F=>{const re=Math.ceil((new Date(F.expiryDate)-new Date)/864e5);return re<=7&&re>0});return T.length>0?{content:` **Prodotti in scadenza** (${T.length} prodotti):

${T.map(F=>` ${F.name} - Scade il ${F.expiryDate}`).join(`
`)}

**Suggerimento**: Vuoi che generi delle ricette per utilizzare questi ingredienti?`,type:"alert",data:{products:T}}:{content:" Nessun prodotto in scadenza nei prossimi 7 giorni!",type:"text"}}if(R.includes("attivit")||R.includes("mansioni")){const T=i.filter(F=>!F.completed);return{content:` **Attivit da svolgere** (${T.length} totali):

${T.slice(0,5).map(F=>` ${F.task} - Assegnato a: ${F.assignee}`).join(`
`)}
${T.length>5?`
... e altre ${T.length-5} attivit`:""}

**Suggerimento**: Usa le schede per filtrare per frequenza!`,type:"text"}}return R.includes("temperatura")||R.includes("frigo")?{content:` **Ultime temperature registrate**:

${r.slice(-3).map(F=>` ${F.location}: ${F.temperature}C (${F.status})`).join(`
`)}

**Suggerimento**: Registra temperature regolarmente per monitorare la sicurezza alimentare!`,type:"text"}:{content:'Non sono sicuro di aver capito. Prova a dire "aiuto" per vedere tutti i comandi disponibili!',type:"text"}},J=()=>{if(!w){ce("assistant"," Riconoscimento vocale non supportato dal tuo browser. Usa Chrome o Edge!","system");return}y?w.stop():w.start()},te=P=>{C(R=>R.map(T=>T.id===P?{...T,enabled:!T.enabled}:T))},M=()=>{const P=!V;ee(P),localStorage.setItem("haccp-show-chat-icon",JSON.stringify(P))};K.useEffect(()=>{localStorage.setItem("haccp-show-chat-icon",JSON.stringify(V))},[V]);const k=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),ne())};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"IA Assistant"}),n.jsx("p",{className:"text-gray-600",children:"Il tuo assistente intelligente per la gestione HACCP"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(de,{onClick:J,disabled:x,className:`${y?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"}`,children:[y?n.jsx(n2,{className:"h-4 w-4 mr-2"}):n.jsx(Eu,{className:"h-4 w-4 mr-2"}),y?"Ferma Ascolto":"Parla"]}),n.jsxs(de,{variant:"outline",onClick:()=>f(!j),children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Impostazioni"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-2",children:n.jsxs(We,{className:"h-96",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5 text-blue-600"}),"Chat con l'IA",y&&n.jsxs("div",{className:"flex items-center gap-1 text-red-600",children:[n.jsx(Eu,{className:"h-3 w-3 animate-pulse"}),n.jsx("span",{className:"text-xs",children:"Ascoltando..."})]})]})}),n.jsxs(Ze,{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex-1 overflow-y-auto space-y-3 mb-4",children:[l.map(P=>n.jsx("div",{className:`flex ${P.sender==="user"?"justify-end":"justify-start"}`,children:n.jsx("div",{className:`max-w-[80%] rounded-lg p-3 ${P.sender==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[P.sender==="assistant"&&n.jsx(na,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"text-sm whitespace-pre-wrap",children:P.content}),n.jsx("div",{className:`text-xs mt-1 ${P.sender==="user"?"text-blue-100":"text-gray-500"}`,children:P.timestamp})]})]})})},P.id)),x&&n.jsx("div",{className:"flex justify-start",children:n.jsx("div",{className:"bg-gray-100 rounded-lg p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-4 w-4 text-blue-600"}),n.jsxs("div",{className:"flex space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ut,{value:c,onChange:P=>h(P.target.value),onKeyPress:k,placeholder:"Scrivi un messaggio o parla...",className:"flex-1"}),n.jsx(de,{onClick:ne,disabled:!c.trim()||x,children:n.jsx(r2,{className:"h-4 w-4"})})]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(lN,{className:"h-5 w-5 text-yellow-600"}),"Automatizzazioni"]})}),n.jsx(Ze,{children:n.jsx("div",{className:"space-y-3",children:N.map(P=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:P.name}),n.jsx("p",{className:"text-xs text-gray-600",children:P.description})]}),n.jsx(de,{size:"sm",variant:P.enabled?"default":"outline",onClick:()=>te(P.id),children:P.enabled?"Attiva":"Disattiva"})]},P.id))})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(tm,{className:"h-5 w-5 text-purple-600"}),"Azioni Rapide"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs(de,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("Controlla le scadenze"),children:[n.jsx(hn,{className:"h-4 w-4 mr-2"}),"Controlla Scadenze"]}),n.jsxs(de,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("Mostra le attivit da svolgere"),children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Attivit da Svolgere"]}),n.jsxs(de,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("Mostra le ultime temperature"),children:[n.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Ultime Temperature"]}),n.jsxs(de,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("Aiuto"),children:[n.jsx(Lo,{className:"h-4 w-4 mr-2"}),"Aiuto"]})]})})]}),j&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fr,{className:"h-5 w-5 text-gray-600"}),"Impostazioni Chat IA"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-sm",children:"Mostra Icona Chat"}),n.jsx("p",{className:"text-xs text-gray-600",children:"Visualizza l'icona della chat IA nell'app"})]}),n.jsx(de,{size:"sm",variant:V?"default":"outline",onClick:M,children:V?"Attiva":"Disattiva"})]}),n.jsxs("div",{className:"text-xs text-blue-600 bg-blue-50 p-3 rounded-lg",children:[" ",n.jsx("strong",{children:"Suggerimento:"}),` Se disattivi l'icona della chat, potrai sempre accedere all'IA dalla sezione "Assistente IA" nel menu principale.`]})]})})]})]})]})]})}function bb({products:e=[],onRecipeSuggestion:t}){const[r,i]=K.useState([]),[s,a]=K.useState(!1),[l,d]=K.useState([]),[c,h]=K.useState(!1);K.useEffect(()=>{(()=>{const w=new Date,S=e.filter(j=>{if(!j.expiryDate)return!1;const f=new Date(j.expiryDate),N=Math.ceil((f-w)/(1e3*60*60*24));return N<=7&&N>0});i(S),S.length>0&&h(!1)})()},[e]);const x=()=>{const m=[];r.forEach(w=>{const S=y(w);S&&m.push(S)}),d(m),a(!0)},v=()=>{h(!0)},y=m=>({"Mozzarella di Bufala":{name:"Insalata Caprese",ingredients:["Mozzarella di Bufala","Pomodoro","Basilico","Olio EVO"],instructions:"Taglia mozzarella e pomodoro a fette, alterna su piatto, guarnisci con basilico e olio.",difficulty:"Facile",time:"10 minuti"},"Parmigiano Reggiano":{name:"Risotto al Parmigiano",ingredients:["Riso Carnaroli","Parmigiano Reggiano","Burro","Brodo"],instructions:"Prepara risotto classico, manteca con parmigiano e burro.",difficulty:"Media",time:"25 minuti"},"Prosciutto Crudo":{name:"Antipasto Prosciutto e Melone",ingredients:["Prosciutto Crudo","Melone","Rucola"],instructions:"Avvolgi fette di prosciutto su cubetti di melone, guarnisci con rucola.",difficulty:"Facile",time:"5 minuti"},Salmone:{name:"Salmone al Forno con Erbe",ingredients:["Salmone","Limone","Erbe aromatiche","Olio EVO"],instructions:"Condisci salmone con erbe, limone e olio, cuoci in forno a 180C per 15 min.",difficulty:"Facile",time:"20 minuti"},"Basilico Fresco":{name:"Pesto alla Genovese",ingredients:["Basilico Fresco","Parmigiano","Pine Nuts","Olio EVO","Aglio"],instructions:"Frulla tutti gli ingredienti fino a ottenere una crema omogenea.",difficulty:"Facile",time:"10 minuti"}})[m.name]||{name:`Ricetta con ${m.name}`,ingredients:[m.name,"Altri ingredienti disponibili"],instructions:"Crea una ricetta utilizzando questo ingrediente prima che scada.",difficulty:"Media",time:"15 minuti"};return r.length===0||c?null:n.jsx("div",{className:"fixed top-4 right-4 z-50 max-w-md",children:n.jsxs(We,{className:"border-orange-200 bg-orange-50",children:[n.jsx(ht,{className:"pb-3",children:n.jsxs(pt,{className:"flex items-center gap-2 text-orange-800",children:[n.jsx(En,{className:"h-5 w-5"}),"Prodotti in Scadenza"]})}),n.jsxs(Ze,{className:"space-y-3",children:[n.jsxs("div",{className:"text-sm text-orange-700",children:[n.jsxs("p",{className:"font-medium mb-2",children:[r.length," prodotto",r.length>1?"i":""," in scadenza:"]}),n.jsx("ul",{className:"space-y-1",children:r.map(m=>n.jsxs("li",{className:"flex items-center gap-2",children:[n.jsx(Dc,{className:"h-3 w-3"}),n.jsx("span",{children:m.name}),n.jsxs("span",{className:"text-xs",children:["(scade il ",new Date(m.expiryDate).toLocaleDateString("it-IT"),")"]})]},m.id))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:x,className:"bg-orange-600 hover:bg-orange-700 text-white",size:"sm",children:[n.jsx($y,{className:"h-4 w-4 mr-1"}),"Suggerisci Ricette"]}),n.jsxs(de,{variant:"outline",size:"sm",className:"text-orange-600 border-orange-300",onClick:v,children:[n.jsx(wn,{className:"h-4 w-4 mr-1"}),"Rimuovi Alert"]})]}),s&&l.length>0&&n.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg border",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Ricette Suggerite:"}),n.jsx("div",{className:"space-y-2",children:l.map((m,w)=>n.jsxs("div",{className:"p-2 bg-gray-50 rounded",children:[n.jsx("h5",{className:"font-medium text-sm",children:m.name}),n.jsxs("p",{className:"text-xs text-gray-600",children:["Tempo: ",m.time,"  Difficolt: ",m.difficulty]}),n.jsx("p",{className:"text-xs text-gray-700 mt-1",children:m.instructions})]},w))})]})]})]})})}function jb({temperatures:e,cleaning:t,products:r,refrigerators:i,setTemperatures:s,setCleaning:a,setProducts:l,setRefrigerators:d}){const[c,h]=K.useState(!1),[x,v]=K.useState({temperatures:0,cleaning:0,products:0,refrigerators:0,totalSize:0});K.useEffect(()=>{(()=>{const f=e||[],N=t||[],C=r||[],V=i||[],ee=JSON.stringify(f).length,ce=JSON.stringify(N).length,ne=JSON.stringify(C).length,O=JSON.stringify(V).length;v({temperatures:f.length,cleaning:N.length,products:C.length,refrigerators:V.length,totalSize:ee+ce+ne+O})})()},[e,t,r,i]);const y=()=>{if(!c)return;const j=new Date;j.setDate(j.getDate()-30);const f=e||[],N=t||[],C=f.filter(M=>new Date(M.timestamp)<j),V=f.filter(M=>new Date(M.timestamp)>=j),ee=N.filter(M=>M.completed&&new Date(M.createdAt)<j),ce=N.filter(M=>!M.completed||new Date(M.createdAt)>=j);let ne=[];const O={temperatures:C,cleaning:ee,expiredLabels:ne,archivedAt:new Date().toISOString()},J=JSON.parse(localStorage.getItem("haccp-archives")||"[]");J.push(O),localStorage.setItem("haccp-archives",JSON.stringify(J)),s(V),a(ce),C.length+ee.length+ne.length>0?alert(` Archiviazione completata!

 Elementi archiviati:
 ${C.length} registrazioni temperature
 ${ee.length} attivit completate
 ${ne.length} etichette prodotti scaduti

 Controllo scadenze temporaneamente disabilitato`):alert(` Archiviazione completata!

 Elementi archiviati:
 ${C.length} registrazioni temperature
 ${ee.length} attivit completate
 Controllo etichette scadute: disabilitato`)};K.useEffect(()=>{if(!c)return;const j=setInterval(()=>{y()},24*60*60*1e3);return()=>clearInterval(j)},[c]);const m=j=>Math.min(j/5242880*100,100),w=j=>j<50?"text-green-600":j<80?"text-yellow-600":"text-red-600",S=j=>{if(j===0)return"0 Bytes";const f=1024,N=["Bytes","KB","MB","GB"],C=Math.floor(Math.log(j)/Math.log(f));return parseFloat((j/Math.pow(f,C)).toFixed(2))+" "+N[C]};return n.jsx("div",{className:"space-y-6",children:n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(rc,{className:"h-5 w-5"}),"Gestione Storage"]})}),n.jsxs(Ze,{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Utilizzo Storage"}),n.jsxs("div",{className:"relative w-48 h-48 mx-auto",children:[n.jsxs("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 100 100",children:[n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#3B82F6",strokeWidth:"8",strokeDasharray:`${x.temperatures/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:"0"}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#10B981",strokeWidth:"8",strokeDasharray:`${x.cleaning/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${x.temperatures/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#F59E0B",strokeWidth:"8",strokeDasharray:`${x.products/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(x.temperatures+x.cleaning)/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`}),n.jsx("circle",{cx:"50",cy:"50",r:"40",fill:"none",stroke:"#8B5CF6",strokeWidth:"8",strokeDasharray:`${x.refrigerators/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2} 251.2`,strokeDashoffset:`-${(x.temperatures+x.cleaning+x.products)/(x.temperatures+x.cleaning+x.products+x.refrigerators)*251.2}`})]}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:`text-2xl font-bold ${w(m(x.totalSize))}`,children:S(x.totalSize)}),n.jsx("div",{className:"text-sm text-gray-600",children:"Utilizzato"})]})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Dettaglio Dati"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Temperature"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.temperatures," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Attivit"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.cleaning," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Prodotti"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.products," record"]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-purple-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium",children:"Frigoriferi"})]}),n.jsxs("span",{className:"text-sm text-gray-600",children:[x.refrigerators," record"]})]})]})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[n.jsx(og,{className:"h-4 w-4"}),"Archiviazione Automatica"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Rimuove automaticamente i dati vecchi per mantenere l'app veloce"})]}),n.jsx(de,{variant:c?"default":"outline",onClick:()=>h(!c),className:"flex items-center gap-2",children:c?n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-4 w-4"}),"Abilitata"]}):n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"h-4 w-4"}),"Disabilitata"]})})]}),c&&n.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Cosa fa l'archiviazione automatica:"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[n.jsx("li",{children:" Rimuove le registrazioni temperature pi vecchie di 30 giorni"}),n.jsx("li",{children:" Archivia le attivit completate pi vecchie di 30 giorni"}),n.jsx("li",{children:" Chiede conferma per rimuovere etichette di prodotti scaduti OGGI"}),n.jsx("li",{children:" Mantiene tutti i prodotti e frigoriferi attivi"}),n.jsx("li",{children:" Crea un backup completo dei dati rimossi"}),n.jsx("li",{children:" Libera spazio solo con conferma utente per le foto"}),n.jsx("li",{children:" Si esegue automaticamente ogni 24 ore"})]}),n.jsx("div",{className:"mt-3",children:n.jsxs(de,{onClick:y,className:"flex items-center gap-2",size:"sm",children:[n.jsx(og,{className:"h-4 w-4"}),"Archivia Ora"]})})]})]}),n.jsxs("div",{className:"border-t pt-6",children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Azioni Manuali"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs(de,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{const j={temperatures:e,cleaning:t,products:r,refrigerators:i,exportedAt:new Date().toISOString()},f=new Blob([JSON.stringify(j,null,2)],{type:"application/json"}),N=URL.createObjectURL(f),C=document.createElement("a");C.href=N,C.download=`haccp-backup-${new Date().toISOString().split("T")[0]}.json`,C.click()},children:[n.jsx(yi,{className:"h-4 w-4"}),"Esporta Tutti i Dati"]}),n.jsxs(de,{variant:"outline",className:"flex items-center gap-2",onClick:()=>{confirm("Sei sicuro di voler eliminare tutti i dati? Questa azione non pu essere annullata.")&&(s([]),a([]),l([]),d([]),alert("Tutti i dati sono stati eliminati."))},children:[n.jsx(wn,{className:"h-4 w-4"}),"Elimina Tutti i Dati"]})]})]})]})]})})}function wb(){const[e,t]=K.useState(null),[r,i]=K.useState(!1),[s,a]=K.useState(!1);K.useEffect(()=>{const c=()=>window.matchMedia("(display-mode: standalone)").matches?(a(!0),!0):!1,h=localStorage.getItem("pwa-install-rejected");return!c()&&!h&&(window.addEventListener("beforeinstallprompt",x=>{x.preventDefault(),t(x),i(!0)}),window.addEventListener("appinstalled",()=>{a(!0),i(!1),t(null)})),()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})}},[]);const l=async()=>{if(!e)return;e.prompt();const{outcome:c}=await e.userChoice;c==="accepted"?(console.log("PWA installata con successo!"),a(!0)):(console.log("Installazione PWA rifiutata"),localStorage.setItem("pwa-install-rejected","true")),t(null),i(!1)},d=()=>{i(!1),localStorage.setItem("pwa-install-rejected","true")};return s||!r?null:n.jsx("div",{className:"fixed bottom-4 left-4 right-4 bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(yi,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900",children:"Installa l'App"})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Installa Mini-ePackPro sul tuo dispositivo per un accesso pi veloce e funzionalit offline."}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{onClick:l,size:"sm",className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-4 w-4"}),"Installa"]}),n.jsxs(de,{onClick:d,variant:"outline",size:"sm",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Non ora"]})]})]})})})}class Sb{constructor(t){this.companyId=t,this.storagePrefix=`cloud-sim-${t}`,console.log(" CloudSimulator attivo per:",t)}async saveToCloud(t,r,i){return new Promise((s,a)=>{try{setTimeout(()=>{const l=`${this.storagePrefix}-${t}`,d={data:r,lastModified:new Date().toISOString(),modifiedBy:i,companyId:this.companyId,version:Date.now()};localStorage.setItem(l,JSON.stringify(d)),console.log(` [SIMULATO] Salvato in cloud: ${t}`),s({success:!0,message:` ${t} condiviso con tutti!`,timestamp:d.lastModified})},800+Math.random()*400)}catch{a({success:!1,message:` Errore simulato nel salvare ${t}`})}})}async loadFromCloud(t){return new Promise((r,i)=>{try{setTimeout(()=>{const s=`${this.storagePrefix}-${t}`,a=localStorage.getItem(s);if(a){const l=JSON.parse(a);console.log(` [SIMULATO] Scaricato dal cloud: ${t}`),r({success:!0,data:l.data,lastModified:l.lastModified,message:` Ricevuti aggiornamenti di ${t}!`})}else r({success:!0,data:null,message:` Nessun dato di ${t} nel cloud`})},600+Math.random()*300)}catch{i({success:!1,message:` Errore nel scaricare ${t}`})}})}isOnline(){return navigator.onLine}async getCompanyInfo(){return new Promise(t=>{setTimeout(()=>{t({id:this.companyId,name:"Demo Pizzeria Da Mario",plan:"free",users:5,maxUsers:25,storageUsed:"45 MB",storageMax:"1 GB"})},300)})}async getRecentChanges(){return new Promise(t=>{setTimeout(()=>{t({success:!0,changes:[{type:"inventory",user:"Luca (Magazzino)",action:"Aggiunto: Mozzarella di Bufala",time:"5 min fa"},{type:"temperatures",user:"Sara (Cucina)",action:"Temperatura Frigo A: 4.2C",time:"12 min fa"},{type:"cleaning",user:"Marco (Pulizie)",action:"Completata: Sanificazione tavoli",time:"25 min fa"}],hasUpdates:Math.random()>.5})},400)})}getStorageStats(){return{localSpace:"45 MB",cloudSpace:"12 MB",photosCount:23,documentsCount:156,lastSync:localStorage.getItem("haccp-last-sync")||"Mai",syncCount:parseInt(localStorage.getItem("cloud-sim-sync-count")||"0")}}incrementSyncCount(){const t=parseInt(localStorage.getItem("cloud-sim-sync-count")||"0");localStorage.setItem("cloud-sim-sync-count",(t+1).toString())}async cleanupCloudStorage(){return new Promise(t=>{setTimeout(()=>{const r=Math.floor(Math.random()*20)+5;t({success:!0,message:` Liberati ${r} MB dal cloud!`,spaceSaved:`${r} MB`})},1e3)})}}const Cb=(e="demo-company")=>new Sb(e),fi={version:"2.0",lastUpdated:"2024-12-19",principles:[{id:"data-collection",title:"Raccolta Dati Pertinenti",description:"Raccogliere dati pertinenti (temperature, pulizie, controlli, fornitori, prodotti) in formato tracciabile",critical:!0,implementation:"Ogni funzione deve salvare timestamp, operatore e dati completi"},{id:"data-archiving",title:"Archiviazione 12 Mesi",description:"Archiviare i dati per almeno 12 mesi in formato esportabile (PDF o JSON) leggibile da terzi (ASL, NAS, auditor)",critical:!0,implementation:"Sistema di backup automatico e export manuale"},{id:"data-integrity",title:"Integrit Dati",description:"Garantire integrit dei dati (nessuna modifica senza tracciamento, log azioni con data e ora)",critical:!0,implementation:"Log di tutte le modifiche con timestamp e operatore"},{id:"prerequisites",title:"Prerequisiti Normativi",description:"Facilitare il rispetto dei prerequisiti normativi: igiene personale, controllo infestanti, manutenzione impianti, formazione personale",critical:!0,implementation:"Checklist e promemoria per prerequisiti"},{id:"ccp-management",title:"Gestione CCP",description:"Gestire i CCP (Critical Control Points) con controlli programmati e azioni correttive",critical:!0,implementation:"Sistema di allarmi e azioni correttive automatiche"}],guidelines:{temperature:{id:"temperature-control",title:"Registrazione Temperature",frequency:"Almeno 2 volte al giorno (inizio e met turno)",criticalPoints:[{name:"Frigo A - Conservazione Freschi",range:{min:2,max:4,unit:"C"},description:"Latticini, formaggi freschi, salumi, verdure fresche",preset:"pizzeria-bar",allowedCategories:["latticini","carni","verdure","formaggi"]},{name:"Frigo B - Surgelati",range:{min:-19,max:-16,unit:"C"},description:"Surgelati, pesce congelato, gelati",preset:"pizzeria-bar",allowedCategories:["surgelati","pesce_surgelato","gelati"]},{name:"Banco ingredienti",range:{min:0,max:8,unit:"C"},description:"Pomodoro, mozzarella, verdure fresche",preset:"pizzeria",allowedCategories:["verdure","latticini","condimenti"]},{name:"Freezer",range:{min:-18,max:null,unit:"C"},description:"Tutti i prodotti surgelati",preset:"universal",allowedCategories:["surgelati","pesce_surgelato","gelati","verdure_congelate"]}],correctiveActions:["Isolare prodotto e segnalarlo immediatamente","Riparare/controllare apparecchio","Registrare azione correttiva e prodotto isolato","Verificare temperatura prima di riutilizzare"],whyMatters:"Le temperature fuori range favoriscono la proliferazione batterica e compromettono la sicurezza alimentare"},conservationPoints:{id:"conservation-points-haccp",title:"Punti di Conservazione HACCP",description:"Gestione strutturata dei punti di conservazione secondo standard HACCP",criticalPoints:[{name:"Frigo A - Conservazione Freschi",temperature:{min:2,max:4,unit:"C"},categories:["latticini","carni","verdure","formaggi"],monitoring:"2 volte al giorno",correctiveAction:"Isolare prodotti e verificare temperatura",preset:"pizzeria-bar"},{name:"Frigo B - Surgelati",temperature:{min:-19,max:-16,unit:"C"},categories:["surgelati","pesce_surgelato","gelati"],monitoring:"1 volta al giorno",correctiveAction:"Verificare funzionamento e isolare prodotti",preset:"pizzeria-bar"}],validationRules:["Temperatura deve essere sempre nel range specificato","Categorie prodotti devono corrispondere al punto di conservazione","Monitoraggio frequente e registrazione obbligatoria","Azioni correttive immediate in caso di deviazione"],whyMatters:"La corretta gestione dei punti di conservazione  fondamentale per la sicurezza alimentare e la conformit HACCP"},cleaning:{id:"cleaning-sanitization",title:"Pulizie e Sanificazioni",zones:[{name:"Superfici di lavoro",frequency:"Dopo ogni uso",products:["Detergente neutro","Disinfettante alimentare"]},{name:"Celle e frigoriferi",frequency:"Settimanale",products:["Detergente specifico","Disinfettante alimentare"]},{name:"Pavimenti",frequency:"Quotidiano",products:["Detergente pavimenti","Disinfettante"]},{name:"Attrezzature",frequency:"Secondo manuale tecnico",products:["Detergente specifico per attrezzature"]}],recording:"Indicare operatore, orario, detergente/disinfettante usato",whyMatters:"La pulizia regolare previene contaminazioni e mantiene standard igienici"},staff:{id:"staff-management",title:"Gestione Personale",roles:[{name:"Amministratore",level:1,responsibilities:["Gestione completa sistema","Responsabilit legale","Approvazione procedure"]},{name:"Responsabile",level:2,responsibilities:["Supervisione operativa","Controllo procedure","Formazione staff"]},{name:"Dipendente",level:3,responsibilities:["Esecuzione procedure","Registrazione dati","Segnalazione problemi"]},{name:"Collaboratore occasionale",level:4,responsibilities:["Esecuzione procedure base","Seguire istruzioni responsabile"]}],requirements:["Mansioni assegnate e documentate","Formazione HACCP registrata e aggiornata","Conoscenza procedure operative","Responsabilit chiare per ogni ruolo"],whyMatters:"Personale formato e responsabilizzato garantisce applicazione corretta delle procedure HACCP"},products:{id:"product-management",title:"Gestione Prodotti",scheda:["Nome commerciale e nome scientifico","Categoria (carne, latticini, verdure, ecc.)","Data di ricezione e scadenza","Fornitore e documentazione","Etichetta interna se necessario (es. preparazioni interne con TMC)","Condizioni di conservazione","Allergeni presenti"],whyMatters:"Tracciabilit completa garantisce sicurezza e conformit normativa"},suppliers:{id:"supplier-management",title:"Gestione Fornitori",registration:["Nome e categoria merceologica","Contatti e documentazione","DDT/fatture con data di consegna","Valutazione periodica affidabilit","Controllo documenti di trasporto","Verifica certificazioni HACCP"],whyMatters:"Fornitori qualificati garantiscono materie prime sicure e conformi"},nonConformity:{id:"non-conformity",title:"Gestione Non Conformit",recording:["Data e ora del rilevamento","Descrizione dettagliata del problema","Azione correttiva intrapresa","Responsabile dell'azione","Verifica efficacia azione correttiva","Prevenzione ricorrenza"],examples:["Temperatura fuori range per pi di 2 ore","Presenza infestanti in magazzino","Prodotto scaduto in vendita","Dispositivo di controllo non funzionante","Personale non formato per mansione"],whyMatters:"Gestione corretta delle non conformit previene rischi e migliora il sistema"}},requirements:{refrigerators:{mandatory:["nome","tipo","range-temperatura","posizione"],validation:"Minimo 1 registrato per sbloccare registrazione temperature",blocking:["temperatures"],whyMatters:"I frigoriferi sono punti di controllo critici per la catena del freddo"},temperature:{mandatory:["punto-controllo","valore","ora","operatore"],validation:"Se valore fuori range  mostra alert e richiede azione correttiva",blocking:[],whyMatters:"Le temperature fuori range compromettono la sicurezza alimentare"},staff:{mandatory:["nome","ruolo","mansioni","formazione-haccp"],validation:"Minimo 1 per sbloccare pulizie e controlli",blocking:["cleaning","inventory"],whyMatters:"Il personale formato  responsabile dell'applicazione delle procedure"},cleaning:{mandatory:["area","frequenza","prodotto-usato","operatore","data-ora"],validation:"Blocco se area non associata a un reparto",blocking:[],whyMatters:"Le pulizie regolari prevengono contaminazioni"},products:{mandatory:["nome","categoria","data-ricezione","scadenza","fornitore"],validation:"Alert se scadenza imminente (<3 giorni)",blocking:[],whyMatters:"La tracciabilit garantisce sicurezza e conformit"},suppliers:{mandatory:["nome","categoria","contatto","documentazione"],validation:"Minimo 1 per associare prodotti",blocking:["products"],whyMatters:"I fornitori qualificati garantiscono materie prime sicure"},nonConformity:{mandatory:["data","descrizione","azione-correttiva","responsabile"],validation:"Blocco salvataggio se mancano dettagli essenziali",blocking:[],whyMatters:"La gestione delle non conformit previene rischi futuri"}},educationalMessages:{welcome:"Benvenuto nel sistema HACCP! Questo sistema ti guider nella gestione della sicurezza alimentare.",whyHaccp:"L'HACCP  un sistema preventivo richiesto per legge che garantisce la sicurezza alimentare.",dataImportance:"Ogni dato registrato contribuisce alla sicurezza e alla conformit normativa.",responsibility:"La sicurezza alimentare  responsabilit di tutti i membri dello staff."},getRequirement:e=>fi.requirements[e]||null,getGuideline:e=>fi.guidelines[e]||null,getPrinciple:e=>fi.principles.find(t=>t.id===e)||null,validateRequirement:(e,t)=>{const r=fi.getRequirement(e);if(!r)return{valid:!1,error:"Sezione non trovata"};const i=r.mandatory.filter(s=>!t[s]);return{valid:i.length===0,missing:i,message:i.length>0?`Campi mancanti: ${i.join(", ")}`:"Tutti i campi obbligatori sono compilati"}},getBlockingSections:e=>{const t=fi.getRequirement(e);return t?t.blocking:[]},isSectionBlocked:(e,t)=>{if(!fi.getRequirement(e))return!1;switch(e){case"temperatures":return!t.refrigerators||t.refrigerators.length===0;case"cleaning":return!t.refrigerators||t.refrigerators.length===0||!t.staff||t.staff.length===0;case"inventory":return!t.departments||t.departments.length===0||!t.refrigerators||t.refrigerators.length===0;case"products":return!t.suppliers||t.suppliers.length===0;default:return!1}}};function kb(){K.useState(new Set(["principles"]));const[e,t]=K.useState("principles"),[r,i]=K.useState(""),s=fi.principles.filter(v=>v.title.toLowerCase().includes(r.toLowerCase())||v.description.toLowerCase().includes(r.toLowerCase())),a=Object.entries(fi.guidelines).filter(([v,y])=>y.title.toLowerCase().includes(r.toLowerCase())||y.whyMatters&&y.whyMatters.toLowerCase().includes(r.toLowerCase())),l=v=>n.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border-l-4 border-blue-500 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("h4",{className:"font-semibold text-blue-900 mb-2 flex items-center gap-2",children:[n.jsx(mg,{className:"h-5 w-5"}),v.title]}),n.jsx("p",{className:"text-blue-800 mb-2",children:v.description}),n.jsxs("div",{className:"bg-blue-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Implementazione:"}),n.jsx("p",{className:"text-sm text-blue-800",children:v.implementation})]})]}),n.jsx(bn,{className:"h-6 w-6 text-blue-600 flex-shrink-0 ml-2"})]})},v.id),d=(v,y)=>n.jsxs("div",{className:"mb-6 p-4 bg-green-50 rounded-lg border-l-4 border-green-500",children:[n.jsxs("h4",{className:"font-semibold text-green-900 mb-3 flex items-center gap-2",children:[h(v),y.title]}),y.frequency&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Frequenza:"}),n.jsx("p",{className:"text-green-700",children:y.frequency})]}),y.criticalPoints&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Punti di Controllo:"}),n.jsx("div",{className:"space-y-2",children:y.criticalPoints.map((m,w)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:m.name}),n.jsxs("p",{className:"text-sm text-green-800",children:["Range: ",m.range.min,"C - ",m.range.max||"","C"]}),n.jsx("p",{className:"text-sm text-green-700",children:m.description})]},w))})]}),y.zones&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Zone e Frequenza:"}),n.jsx("div",{className:"space-y-2",children:y.zones.map((m,w)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:m.name}),n.jsxs("p",{className:"text-sm text-green-800",children:["Frequenza: ",m.frequency]}),n.jsxs("p",{className:"text-sm text-green-700",children:["Prodotti: ",m.products.join(", ")]})]},w))})]}),y.roles&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Ruoli e Responsabilit:"}),n.jsx("div",{className:"space-y-2",children:y.roles.map((m,w)=>n.jsxs("div",{className:"bg-green-100 p-2 rounded",children:[n.jsx("p",{className:"font-medium text-green-900",children:m.name}),n.jsxs("div",{className:"text-sm text-green-800",children:[n.jsx("p",{children:"Responsabilit:"}),n.jsx("ul",{className:"list-disc list-inside ml-2",children:m.responsibilities.map((S,j)=>n.jsx("li",{children:S},j))})]})]},w))})]}),y.correctiveActions&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Azioni Correttive:"}),n.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.correctiveActions.map((m,w)=>n.jsx("li",{className:"text-green-700",children:m},w))})]}),y.whyMatters&&n.jsxs("div",{className:"bg-green-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-green-900 mb-1",children:"Perch  importante:"}),n.jsx("p",{className:"text-sm text-green-800",children:y.whyMatters})]})]},y.id),c=(v,y)=>n.jsxs("div",{className:"mb-4 p-4 bg-orange-50 rounded-lg border-l-4 border-orange-500",children:[n.jsxs("h4",{className:"font-semibold text-orange-900 mb-3 flex items-center gap-2",children:[n.jsx(Ni,{className:"h-5 w-5"}),x(v)]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Dati obbligatori:"}),n.jsx("ul",{className:"list-disc list-inside space-y-1",children:y.mandatory.map((m,w)=>n.jsx("li",{className:"text-orange-700",children:m},w))})]}),n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Validazione:"}),n.jsx("p",{className:"text-orange-700",children:y.validation})]}),y.blocking&&y.blocking.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Blocca sezioni:"}),n.jsx("p",{className:"text-orange-700",children:y.blocking.join(", ")})]}),n.jsxs("div",{className:"bg-orange-100 p-3 rounded",children:[n.jsx("p",{className:"text-sm font-medium text-orange-900 mb-1",children:"Perch  importante:"}),n.jsx("p",{className:"text-sm text-orange-800",children:y.whyMatters})]})]},v),h=v=>({temperature:n.jsx(Jt,{className:"h-5 w-5"}),cleaning:n.jsx(tm,{className:"h-5 w-5"}),staff:n.jsx(mi,{className:"h-5 w-5"}),products:n.jsx(hn,{className:"h-5 w-5"}),suppliers:n.jsx(fc,{className:"h-5 w-5"}),nonConformity:n.jsx(En,{className:"h-5 w-5"})})[v]||n.jsx(Ni,{className:"h-5 w-5"}),x=v=>({refrigerators:"Gestione Frigoriferi",temperature:"Registrazione Temperature",staff:"Gestione Personale",cleaning:"Gestione Pulizie",products:"Gestione Prodotti",suppliers:"Gestione Fornitori",nonConformity:"Gestione Non Conformit"})[v]||v;return n.jsxs("div",{className:"space-y-6",children:[n.jsx(We,{children:n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-3 text-2xl",children:[n.jsx(Du,{className:"h-8 w-8 text-blue-600"}),"Manuale HACCP - Guida Completa"]}),n.jsx("p",{className:"text-gray-600",children:"Riferimento completo per normative HACCP e procedure operative"})]})}),n.jsxs(yf,{value:e,onValueChange:t,className:"w-full",children:[n.jsxs(nm,{className:"grid w-full grid-cols-3",children:[n.jsx(Tr,{value:"principles",children:"Principi Base"}),n.jsx(Tr,{value:"guidelines",children:"Linee Guida"}),n.jsx(Tr,{value:"requirements",children:"Requisiti"})]}),n.jsx(Mr,{value:"principles",className:"space-y-4",children:n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(mg,{className:"h-6 w-6 text-blue-600"}),"Principi Fondamentali HACCP"]}),n.jsx("p",{className:"text-gray-600",children:"Questi principi garantiscono la conformit alle normative di sicurezza alimentare"}),n.jsxs("div",{className:"mt-4 relative",children:[n.jsx("input",{type:"text",placeholder:"Cerca nei principi...",value:r,onChange:v=>i(v.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r&&n.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:n.jsx(X,{className:"h-4 w-4"})})]})]}),n.jsx(Ze,{children:s.map(l)})]})}),n.jsx(Mr,{value:"guidelines",className:"space-y-4",children:n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Du,{className:"h-6 w-6 text-green-600"}),"Linee Guida Operative"]}),n.jsx("p",{className:"text-gray-600",children:"Procedure dettagliate per ogni area operativa"})]}),n.jsx(Ze,{children:a.map(([v,y])=>d(v,y))})]})}),n.jsx(Mr,{value:"requirements",className:"space-y-4",children:n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(bn,{className:"h-6 w-6 text-orange-600"}),"Requisiti Minimi e Validazioni"]}),n.jsx("p",{className:"text-gray-600",children:"Dati obbligatori e controlli automatici per ogni sezione"})]}),n.jsx(Ze,{children:Object.entries(fi.requirements).map(([v,y])=>c(v,y))})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Ni,{className:"h-6 w-6 text-purple-600"}),"Informazioni Importanti"]})}),n.jsx(Ze,{children:n.jsx("div",{className:"space-y-3",children:Object.entries(fi.educationalMessages).map(([v,y])=>n.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border-l-4 border-purple-500",children:n.jsx("p",{className:"text-purple-800",children:y})},v))})})]}),n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-sm text-gray-500",children:[n.jsxs("p",{children:["Versione ",fi.version,"  Ultimo aggiornamento: ",fi.lastUpdated]}),n.jsx("p",{className:"mt-1",children:"Questo manuale  conforme alle normative HACCP vigenti"})]})})})]})}const Wd=[{key:"latticini",name:"Latticini",icon:"",description:"Latte, formaggi, yogurt"},{key:"salumi",name:"Salumi",icon:"",description:"Prosciutto, salame, mortadella"},{key:"verdure",name:"Verdure",icon:"",description:"Verdure fresche e ortaggi"},{key:"farine",name:"Farine",icon:"",description:"Farine, cereali, impasti"},{key:"surgelati",name:"Surgelati",icon:"",description:"Prodotti surgelati"},{key:"altro",name:"Altro",icon:"",description:"Altri prodotti alimentari"}];function Ab({currentUser:e}){const[t,r]=K.useState([]),[i,s]=K.useState(!1),[a,l]=K.useState(null),[d,c]=K.useState({name:"",category:"",vat:"",phone:"",email:"",notes:""});K.useEffect(()=>{const f=localStorage.getItem("haccp-suppliers");if(f)try{r(JSON.parse(f))}catch(N){console.error("Errore nel caricamento fornitori:",N),r([])}},[]),K.useEffect(()=>{localStorage.setItem("haccp-suppliers",JSON.stringify(t))},[t]);const h=()=>{c({name:"",category:"",vat:"",phone:"",email:"",notes:""}),l(null),s(!1)},x=f=>{if(f.preventDefault(),!d.name.trim()||!d.category){alert(" Attenzione: Nome fornitore e categoria sono obbligatori per la tracciabilit HACCP");return}const N={id:(a==null?void 0:a.id)||Date.now().toString(),...d,name:d.name.trim(),category:d.category,createdAt:(a==null?void 0:a.createdAt)||new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:(a==null?void 0:a.createdBy)||(e==null?void 0:e.id)||"unknown",updatedBy:(e==null?void 0:e.id)||"unknown"};a?(r(C=>C.map(V=>V.id===a.id?N:V)),alert(" Fornitore aggiornato con successo!")):(r(C=>[...C,N]),alert(" Nuovo fornitore aggiunto con successo!")),h()},v=f=>{confirm(` ATTENZIONE: Stai per eliminare questo fornitore.

Questa azione non pu essere annullata e rimuover tutte le informazioni di tracciabilit associate.

Procedere?`)&&(r(N=>N.filter(C=>C.id!==f)),alert(" Fornitore eliminato con successo"))},y=f=>{l(f),c({name:f.name,category:f.category,vat:f.vat||"",phone:f.phone||"",email:f.email||"",notes:f.notes||""}),s(!0)},m=f=>Wd.find(N=>N.key===f)||{name:"Sconosciuta",icon:"",description:"Categoria non definita"},[w,S]=K.useState("all"),j=w==="all"?t:t.filter(f=>f.category===w);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestione Fornitori"}),n.jsx("p",{className:"text-gray-600",children:" Gestisci i fornitori per garantire la tracciabilit HACCP e la sicurezza alimentare"})]}),n.jsxs(de,{onClick:()=>s(!0),className:"flex items-center gap-2",children:[n.jsx(jn,{className:"h-4 w-4"}),"Nuovo Fornitore"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx(We,{children:n.jsxs(Ze,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Fornitori Totali"})]})}),Wd.map(f=>n.jsx(We,{children:n.jsxs(Ze,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.filter(N=>N.category===f.key).length}),n.jsx("div",{className:"text-sm text-gray-600",children:f.name})]})},f.key))]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(ra,{className:"h-5 w-5"}),"Filtra per Categoria"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>S("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${w==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tutti (",t.length,")"]}),Wd.map(f=>n.jsxs("button",{onClick:()=>S(f.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${w===f.key?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[f.icon," ",f.name," (",t.filter(N=>N.category===f.key).length,")"]},f.key))]})})]}),i&&n.jsxs(We,{children:[n.jsxs(ht,{children:[n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fc,{className:"h-5 w-5"}),a?"Modifica Fornitore":"Nuovo Fornitore"]}),n.jsx("p",{className:"text-sm text-gray-600",children:" Compila i campi obbligatori per garantire la tracciabilit HACCP"})]}),n.jsx(Ze,{children:n.jsxs("form",{onSubmit:x,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ue,{htmlFor:"name",className:"flex items-center gap-2",children:["Nome Fornitore *",n.jsx("span",{className:"text-xs text-gray-500",title:"Nome completo del fornitore per la tracciabilit",children:""})]}),n.jsx(ut,{id:"name",value:d.name,onChange:f=>c({...d,name:f.target.value}),placeholder:"Es: Fornitura Rossi SRL",required:!0}),n.jsx("p",{className:"text-xs text-gray-500",children:" Inserisci il nome completo per la tracciabilit HACCP"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(Ue,{htmlFor:"category",className:"flex items-center gap-2",children:["Categoria *",n.jsx("span",{className:"text-xs text-gray-500",title:"Tipo di prodotti forniti",children:""})]}),n.jsxs("select",{id:"category",value:d.category,onChange:f=>c({...d,category:f.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[n.jsx("option",{value:"",children:"-- Seleziona Categoria --"}),Wd.map(f=>n.jsxs("option",{value:f.key,children:[f.icon," ",f.name," - ",f.description]},f.key))]}),n.jsx("p",{className:"text-xs text-gray-500",children:" Categorizza per tipo di prodotto fornito"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"vat",children:"Partita IVA"}),n.jsx(ut,{id:"vat",value:d.vat,onChange:f=>c({...d,vat:f.target.value}),placeholder:"IT12345678901"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"phone",children:"Telefono"}),n.jsx(ut,{id:"phone",value:d.phone,onChange:f=>c({...d,phone:f.target.value}),placeholder:"+39 123 456 7890"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"email",children:"Email"}),n.jsx(ut,{id:"email",type:"email",value:d.email,onChange:f=>c({...d,email:f.target.value}),placeholder:"fornitore@example.com"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Ue,{htmlFor:"notes",children:"Note"}),n.jsx("textarea",{id:"notes",value:d.notes,onChange:f=>c({...d,notes:f.target.value}),placeholder:"Note aggiuntive, orari di consegna, requisiti speciali...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(de,{type:"submit",className:"flex items-center gap-2",children:[n.jsx(rN,{className:"h-4 w-4"}),a?"Aggiorna":"Salva"," Fornitore"]}),n.jsxs(de,{type:"button",variant:"outline",onClick:h,className:"flex items-center gap-2",children:[n.jsx(Yt,{className:"h-4 w-4"}),"Annulla"]})]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fc,{className:"h-5 w-5"}),"Fornitori (",j.length,")"]})}),n.jsx(Ze,{children:j.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(fc,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{className:"text-lg font-medium",children:"Nessun fornitore trovato"}),n.jsx("p",{className:"text-sm",children:w==="all"?"Inizia aggiungendo il primo fornitore per la tracciabilit HACCP":`Nessun fornitore nella categoria "${m(w).name}"`})]}):n.jsx("div",{className:"space-y-3",children:j.map(f=>{const N=m(f.category);return n.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"font-semibold text-lg",children:f.name}),n.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:[N.icon," ",N.name]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[f.vat&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Partita IVA:"}),n.jsx("div",{className:"font-medium",children:f.vat})]}),f.phone&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Telefono:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(nN,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:f.phone})]})]}),f.email&&n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Email:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Xy,{className:"h-3 w-3"}),n.jsx("span",{className:"font-medium",children:f.email})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Aggiornato:"}),n.jsx("div",{className:"font-medium",children:new Date(f.updatedAt).toLocaleDateString("it-IT")})]})]}),f.notes&&n.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-lg",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Note:"}),n.jsx("p",{className:"text-gray-800 mt-1",children:f.notes})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{size:"sm",variant:"outline",onClick:()=>y(f),className:"text-blue-600 hover:text-blue-700",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{size:"sm",variant:"outline",onClick:()=>v(f.id),className:"text-red-600 hover:text-red-700",children:n.jsx(wn,{className:"h-4 w-4"})})]})]})},f.id)})})})]})]})}const Xl=["haccp-temperatures","haccp-refrigerators","haccp-staff","haccp-cleaning","haccp-products","haccp-departments","haccp-users","haccp-actions","haccp-roles","haccp-suppliers","haccp-onboarding","haccp-presets","haccp-dev-mode"];function Lb({currentUser:e,isAdmin:t=!1}){const[r,i]=K.useState({autoBackupEnabled:!1,autoBackupFrequency:"weekly",lastBackupDate:null,nextBackupDate:null}),[s,a]=K.useState([]),[l,d]=K.useState(!1),[c,h]=K.useState(!1);K.useEffect(()=>{const m=localStorage.getItem("haccp-backup-settings");if(m)try{const S=JSON.parse(m);i(j=>({...j,...S}))}catch(S){console.error("Errore nel caricamento impostazioni backup:",S)}const w=localStorage.getItem("haccp-backup-history");if(w)try{a(JSON.parse(w))}catch(S){console.error("Errore nel caricamento cronologia backup:",S)}},[]),K.useEffect(()=>{localStorage.setItem("haccp-backup-settings",JSON.stringify(r))},[r]),K.useEffect(()=>{if(r.autoBackupEnabled&&r.lastBackupDate){const m=new Date(r.lastBackupDate),w=new Date(m);r.autoBackupFrequency==="weekly"?w.setDate(w.getDate()+7):r.autoBackupFrequency==="monthly"&&w.setMonth(w.getMonth()+1),i(S=>({...S,nextBackupDate:w.toISOString()}))}},[r.autoBackupEnabled,r.lastBackupDate,r.autoBackupFrequency]);const x=async()=>{d(!0);try{const m={version:"1.0",timestamp:new Date().toISOString(),exportedBy:(e==null?void 0:e.name)||"unknown",data:{}};for(const N of Xl){const C=localStorage.getItem(N);if(C)try{m.data[N]=JSON.parse(C)}catch(V){console.warn(`Errore nel parsing ${N}:`,V),m.data[N]=C}}const w=new Blob([JSON.stringify(m,null,2)],{type:"application/json"}),S=URL.createObjectURL(w),j=document.createElement("a");j.href=S,j.download=`haccp-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(S);const f={id:Date.now().toString(),type:"manual",timestamp:new Date().toISOString(),user:(e==null?void 0:e.name)||"unknown",size:w.size,success:!0};a(N=>[f,...N.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([f,...s.slice(0,9)])),alert(` Export completato con successo!

 File scaricato nella cartella Download
 Tutti i dati HACCP sono stati esportati`)}catch(m){console.error("Errore durante export:",m),alert(` Errore durante l'export dei dati

Controlla la console per maggiori dettagli`)}finally{d(!1)}},v=async m=>{const w=m.target.files[0];if(w){h(!0);try{const S=await w.text(),j=JSON.parse(S);if(!j.version||!j.data||!j.timestamp)throw new Error("Formato file non valido. Il file deve contenere version, data e timestamp.");const f=Object.keys(j.data);if(!confirm(` ATTENZIONE: Stai per importare dati HACCP!

 Dati trovati: ${f.length} chiavi
 Data export: ${new Date(j.timestamp).toLocaleString("it-IT")}
 Esportato da: ${j.exportedBy||"sconosciuto"}

 Questa operazione sovrascriver i dati esistenti!

Procedere con l'import?`)){h(!1);return}const C={};for(const ne of Xl){const O=localStorage.getItem(ne);O&&(C[ne]=O)}const V={version:"1.0",timestamp:new Date().toISOString(),type:"pre-import-backup",data:C};localStorage.setItem("haccp-pre-import-backup",JSON.stringify(V));let ee=0;for(const[ne,O]of Object.entries(j.data))if(Xl.includes(ne))try{typeof O=="string"?localStorage.setItem(ne,O):localStorage.setItem(ne,JSON.stringify(O)),ee++}catch(J){console.warn(`Errore nell'import di ${ne}:`,J)}const ce={id:Date.now().toString(),type:"import",timestamp:new Date().toISOString(),user:(e==null?void 0:e.name)||"unknown",importedKeys:ee,success:!0,sourceFile:w.name};a(ne=>[ce,...ne.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([ce,...s.slice(0,9)])),alert(` Import completato con successo!

 Chiavi importate: ${ee}/${Object.keys(j.data).length}
 Backup pre-import salvato come 'haccp-pre-import-backup'

 Ricarica la pagina per applicare le modifiche`),setTimeout(()=>{window.location.reload()},2e3)}catch(S){console.error("Errore durante import:",S),alert(` Errore durante l'import:

${S.message}

Controlla che il file sia un backup HACCP valido.`)}finally{h(!1),m.target.value=""}}},y=async()=>{try{await x(),i(w=>({...w,lastBackupDate:new Date().toISOString()}));const m={id:Date.now().toString(),type:"auto",timestamp:new Date().toISOString(),user:"Sistema",success:!0};a(w=>[m,...w.slice(0,9)]),localStorage.setItem("haccp-backup-history",JSON.stringify([m,...s.slice(0,9)]))}catch(m){console.error("Errore backup automatico:",m)}};return K.useEffect(()=>{if(r.autoBackupEnabled&&r.nextBackupDate){const m=new Date,w=new Date(r.nextBackupDate);m>=w&&y()}},[r.autoBackupEnabled,r.nextBackupDate]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Backup e Export Dati"}),n.jsx("p",{className:"text-gray-600",children:" Gestisci il backup e l'export dei dati HACCP per garantire la sicurezza e la tracciabilit"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(We,{children:n.jsxs(Ze,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.filter(m=>m.success).length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Backup Completati"})]})}),n.jsx(We,{children:n.jsxs(Ze,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.filter(m=>m.type==="auto").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Backup Automatici"})]})}),n.jsx(We,{children:n.jsxs(Ze,{className:"p-4 text-center",children:[n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.filter(m=>m.type==="import").length}),n.jsx("div",{className:"text-sm text-gray-600",children:"Import Completati"})]})})]}),t&&n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fr,{className:"h-5 w-5"}),"Backup Automatico"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Abilita Backup Automatico"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Crea automaticamente backup periodici per garantire la sicurezza dei dati"})]}),n.jsx(de,{variant:r.autoBackupEnabled?"default":"outline",onClick:()=>i(m=>({...m,autoBackupEnabled:!m.autoBackupEnabled})),className:"flex items-center gap-2",children:r.autoBackupEnabled?n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-4 w-4"}),"Abilitato"]}):n.jsxs(n.Fragment,{children:[n.jsx(En,{className:"h-4 w-4"}),"Disabilitato"]})})]}),r.autoBackupEnabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:"Frequenza Backup"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Quanto spesso creare backup automatici"})]}),n.jsxs("select",{value:r.autoBackupFrequency,onChange:m=>i(w=>({...w,autoBackupFrequency:m.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[n.jsx("option",{value:"weekly",children:"Settimanale"}),n.jsx("option",{value:"monthly",children:"Mensile"})]})]}),r.lastBackupDate&&n.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[n.jsx(Ni,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Ultimo backup:"}),n.jsx("span",{children:new Date(r.lastBackupDate).toLocaleString("it-IT")})]}),r.nextBackupDate&&n.jsxs("div",{className:"text-blue-700 text-sm mt-1",children:["Prossimo backup: ",new Date(r.nextBackupDate).toLocaleString("it-IT")]})]})]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-5 w-5"}),"Export Dati"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:" Esporta tutti i dati HACCP in formato JSON per backup, migrazione o condivisione. Include temperature, pulizie, inventario, staff e tutte le configurazioni."}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(de,{onClick:x,disabled:l,className:"flex items-center gap-2",children:[l?n.jsx(au,{className:"h-4 w-4 animate-spin"}):n.jsx(yi,{className:"h-4 w-4"}),l?"Esportando...":"Export Completo JSON"]}),n.jsxs("span",{className:"text-sm text-gray-500",children:[Xl.length," chiavi dati incluse"]})]}),n.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[n.jsx(bn,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Dati inclusi nell'export:"})]}),n.jsx("div",{className:"text-green-700 text-sm mt-2 grid grid-cols-2 gap-2",children:Xl.map(m=>n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Vy,{className:"h-3 w-3"}),m.replace("haccp-","")]},m))})]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(gc,{className:"h-5 w-5"}),"Import Dati"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:" Importa dati HACCP da un file di backup JSON.  Questa operazione sovrascriver i dati esistenti!"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"file",accept:".json",onChange:v,className:"hidden",id:"import-file"}),n.jsx("label",{htmlFor:"import-file",children:n.jsxs(de,{as:"span",disabled:c,className:"flex items-center gap-2 cursor-pointer",children:[c?n.jsx(au,{className:"h-4 w-4 animate-spin"}):n.jsx(gc,{className:"h-4 w-4"}),c?"Importando...":"Seleziona File JSON"]})}),c&&n.jsx("span",{className:"text-sm text-gray-500",children:"Import in corso..."})]}),n.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[n.jsx(En,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Attenzione Import:"})]}),n.jsxs("ul",{className:"text-yellow-700 text-sm mt-2 space-y-1",children:[n.jsx("li",{children:" I dati esistenti verranno sovrascritti"}),n.jsx("li",{children:" Verr creato un backup automatico pre-import"}),n.jsx("li",{children:" Solo file JSON HACCP validi sono accettati"}),n.jsx("li",{children:" La pagina verr ricaricata dopo l'import"})]})]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Dc,{className:"h-5 w-5"}),"Cronologia Backup"]})}),n.jsx(Ze,{children:s.length===0?n.jsxs("div",{className:"text-center py-6 text-gray-500",children:[n.jsx(Dc,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),n.jsx("p",{children:"Nessun backup registrato"}),n.jsx("p",{className:"text-sm",children:"I backup appariranno qui dopo aver eseguito export o import"})]}):n.jsx("div",{className:"space-y-3",children:s.map(m=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`p-2 rounded-full ${m.type==="auto"?"bg-blue-100 text-blue-600":m.type==="import"?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:m.type==="auto"?n.jsx(au,{className:"h-4 w-4"}):m.type==="import"?n.jsx(gc,{className:"h-4 w-4"}):n.jsx(yi,{className:"h-4 w-4"})}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:m.type==="auto"?"Backup Automatico":m.type==="import"?"Import Dati":"Export Manuale"}),n.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(m.timestamp).toLocaleString("it-IT"),"  ",m.user]}),m.sourceFile&&n.jsxs("div",{className:"text-xs text-gray-500",children:["File: ",m.sourceFile]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:m.success?n.jsx(bn,{className:"h-5 w-5 text-green-600"}):n.jsx(En,{className:"h-5 w-5 text-red-600"})})]},m.id))})})]})]})}function Pb({currentUser:e,isAdmin:t=!1,onSettingsChange:r}){const[i,s]=K.useState(!1),[a,l]=K.useState({keepPhotosLocal:!1,keepDocsLocal:!0,keepDataLocal:!0,autoShareTemperatures:!0,autoShareInventory:!0,autoShareCleaning:!0,autoShareStaff:t,keepDaysLocal:7,maxPhotosLocal:t?100:20}),[d,c]=K.useState({usedSpace:"45 MB",availableSpace:"2.1 GB",photosCount:23,docsCount:156}),[h]=K.useState(()=>Cb("demo-pizzeria"));K.useEffect(()=>{const m=localStorage.getItem("haccp-data-settings");m&&l({...a,...JSON.parse(m)});const w=h.getStorageStats();c({usedSpace:w.localSpace,availableSpace:"2.1 GB",photosCount:w.photosCount,docsCount:w.documentsCount})},[h]);const x=(m,w)=>{const S={...a,[m]:w};l(S),localStorage.setItem("haccp-data-settings",JSON.stringify(S)),r==null||r(S)},v=({title:m,description:w,value:S,onChange:j,icon:f,adminOnly:N=!1})=>N&&!t?null:n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-white",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(f,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:m}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w}),N&&n.jsxs("span",{className:"inline-flex items-center gap-1 mt-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:[n.jsx(fr,{className:"h-3 w-3"}),"Solo Amministratore"]})]})]}),n.jsx(de,{variant:"ghost",onClick:()=>j(!S),className:"p-1",children:S?n.jsx(aN,{className:"h-6 w-6 text-green-600"}):n.jsx(sN,{className:"h-6 w-6 text-gray-400"})})]}),y=({title:m,description:w,current:S,options:j,onChange:f,icon:N})=>n.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[n.jsx(N,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-gray-900",children:m}),n.jsx("p",{className:"text-sm text-gray-600",children:w})]})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-2",children:j.map(C=>n.jsx(de,{variant:S===C.value?"default":"outline",onClick:()=>f(C.value),className:"text-sm py-2",children:C.label},C.value))})]});return n.jsxs(K.Fragment,{children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:" Gestione Dati"}),n.jsx("p",{className:"text-gray-600",children:"Decidi cosa tenere sul tuo telefono e cosa condividere"})]}),n.jsxs(We,{className:"bg-gradient-to-r from-green-50 to-blue-50",children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(iN,{className:"h-5 w-5"}),"Spazio sul Tuo Telefono"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:d.usedSpace}),n.jsx("p",{className:"text-xs text-gray-600",children:"Usato dall'app"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:d.availableSpace}),n.jsx("p",{className:"text-xs text-gray-600",children:"Spazio libero"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:d.photosCount}),n.jsx("p",{className:"text-xs text-gray-600",children:"Foto salvate"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:d.docsCount}),n.jsx("p",{className:"text-xs text-gray-600",children:"Documenti"})]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Po,{className:"h-5 w-5"}),"Foto e Documenti"]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsx(v,{icon:Z1,title:"Salva Foto sul Telefono",description:"Le foto delle etichette rimangono sul tuo telefono anche senza internet. Occupa pi spazio ma  pi veloce.",value:a.keepPhotosLocal,onChange:m=>x("keepPhotosLocal",m)}),n.jsx(v,{icon:Jy,title:"Salva Documenti sul Telefono",description:"Tieni una copia di ricette, procedure e documenti sul telefono per consultarli anche offline.",value:a.keepDocsLocal,onChange:m=>x("keepDocsLocal",m)}),n.jsx(y,{icon:rc,title:"Quante Foto Tenere",description:"Numero massimo di foto da tenere salvate sul telefono",current:a.maxPhotosLocal,onChange:m=>x("maxPhotosLocal",m),options:[{value:10,label:"10 foto"},{value:50,label:"50 foto"},{value:100,label:"100 foto"}]})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(pg,{className:"h-5 w-5"}),"Condivisione Automatica"]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[" ",n.jsx("strong",{children:"Cosa significa:"})," Se attivi queste opzioni, le modifiche che fai verranno condivise automaticamente con i colleghi appena hai internet."]})}),n.jsx(v,{icon:Jt,title:"Condividi Temperature Automaticamente",description:"Le temperature dei frigoriferi vengono condivise subito con tutti. Importante per la sicurezza alimentare.",value:a.autoShareTemperatures,onChange:m=>x("autoShareTemperatures",m)}),n.jsx(v,{icon:hn,title:"Condividi Inventario Automaticamente",description:"Quando aggiungi o modifichi prodotti, tutti vedono subito le modifiche.",value:a.autoShareInventory,onChange:m=>x("autoShareInventory",m)}),n.jsx(v,{icon:bn,title:"Condividi Pulizie Automaticamente",description:"Le attivit di pulizia completate vengono condivise subito con il team.",value:a.autoShareCleaning,onChange:m=>x("autoShareCleaning",m)}),n.jsx(v,{icon:mi,title:"Condividi Gestione Staff",description:"Modifiche a dipendenti, ruoli e permessi vengono condivise automaticamente.",value:a.autoShareStaff,onChange:m=>x("autoShareStaff",m),adminOnly:!0})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(rc,{className:"h-5 w-5"}),"Quanto Tenere sul Telefono"]})}),n.jsxs(Ze,{className:"space-y-4",children:[n.jsx(y,{icon:rc,title:"Giorni di Dati da Tenere",description:"Quanti giorni di temperature, pulizie e inventario tenere salvati sul telefono",current:a.keepDaysLocal,onChange:m=>x("keepDaysLocal",m),options:[{value:3,label:"3 giorni"},{value:7,label:"1 settimana"},{value:30,label:"1 mese"}]}),n.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Ni,{className:"h-4 w-4 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Perch  importante?"}),n.jsxs("ul",{className:"text-xs text-gray-600 mt-1 space-y-1",children:[n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Meno giorni"})," = telefono pi veloce e pi spazio libero"]}),n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Pi giorni"})," = puoi vedere dati anche senza internet"]}),n.jsxs("li",{children:["  ",n.jsx("strong",{children:"Tutti i dati"})," rimangono sempre salvati online"]})]})]})]})})]})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsx(pt,{children:" Azioni Rapide"})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs(de,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{try{const m=await h.cleanupCloudStorage();if(m.success){alert(` ${m.message}
 Spazio liberato: ${m.spaceSaved}`);const w=h.getStorageStats();c(S=>({...S,usedSpace:w.localSpace}))}}catch{alert(" Errore durante la pulizia dello spazio")}},children:[n.jsx(rc,{className:"h-4 w-4"}),"Libera Spazio"]}),n.jsxs(de,{variant:"outline",className:"flex items-center gap-2",onClick:async()=>{var m;try{alert(" Sto sincronizzando tutto..."),await new Promise(S=>setTimeout(S,1500));const w=await h.getRecentChanges();w.success&&alert(` Sincronizzazione completata!
 Trovate ${((m=w.changes)==null?void 0:m.length)||0} modifiche dai colleghi`)}catch{alert(" Errore durante la sincronizzazione")}},children:[n.jsx(pg,{className:"h-4 w-4"}),"Sincronizza Ora"]})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-5 w-5"}),"Backup e Export Dati"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:" Gestisci il backup e l'export dei dati HACCP per garantire la sicurezza e la tracciabilit. Esporta tutti i dati in formato JSON o importa da backup esistenti."}),n.jsx(Lb,{currentUser:e,isAdmin:t})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(fc,{className:"h-5 w-5"}),"Gestione Fornitori"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:" Gestisci i fornitori per garantire la tracciabilit HACCP e la sicurezza alimentare. Mantieni aggiornate le informazioni sui fornitori per la compliance normativa."}),n.jsx(Ab,{currentUser:e})]})})]}),n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(Du,{className:"h-5 w-5"}),"Manuale HACCP"]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-gray-600",children:"Consulta la guida completa per normative HACCP e procedure operative. Questo manuale ti aiuter a comprendere i requisiti e implementare correttamente le procedure."}),n.jsxs(de,{variant:"outline",className:"flex items-center gap-2 w-full",onClick:()=>s(!0),children:[n.jsx(Du,{className:"h-4 w-4"}),"Apri Manuale HACCP"]})]})})]})]}),i&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:"Manuale HACCP"}),n.jsx(de,{variant:"outline",size:"sm",onClick:()=>s(!1),children:" Chiudi"})]}),n.jsx("div",{className:"overflow-y-auto h-full p-4",children:n.jsx(kb,{})})]})})]})}function zb({isOpen:e,onClose:t,onLogin:r,users:i,onAddUser:s}){const[a,l]=K.useState(""),[d,c]=K.useState(""),[h,x]=K.useState(!1),[v,y]=K.useState(!1),[m,w]=K.useState(""),[S,j]=K.useState({name:"",pin:"",role:"employee",department:""}),[f,N]=K.useState([]),[C,V]=K.useState([]);K.useEffect(()=>{const J=localStorage.getItem("haccp-departments"),te=localStorage.getItem("haccp-departments-version"),M=["Banconisti","Cuochi","Amministrazione"];if(te!=="2.0"||!J)N(M),V(M);else try{const P=JSON.parse(J).filter(T=>T.isCustom).map(T=>T.name),R=[...P];M.forEach(T=>{P.includes(T)||R.push(T)}),N(R),V(M)}catch(k){console.error("Errore nel caricamento reparti:",k),N(M),V(M)}},[]);const ee=()=>{if(!a||!d){w("Seleziona utente e inserisci PIN");return}const J=i.find(te=>te.id===a);if(!J){w("Utente non trovato");return}if(J.pin!==d){w("PIN non corretto");return}r(J),ne()},ce=()=>{if(!S.name.trim()||!S.pin.trim()){w("Nome e PIN sono obbligatori");return}if(S.pin.length!==4){w("Il PIN deve essere di 4 cifre");return}if(i.some(J=>J.pin===S.pin)){w("PIN gi in uso, scegline un altro");return}s(S),x(!1),j({name:"",pin:"",role:"employee",department:""}),w("")},ne=()=>{l(""),c(""),w(""),x(!1),y(!1)},O=()=>{ne(),t()};return e?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[n.jsx("h2",{className:"text-xl font-semibold",children:h?"Aggiungi Nuovo Utente":"Inizia il Turno"}),n.jsx(de,{variant:"ghost",size:"sm",onClick:O,children:n.jsx(Yt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"p-6",children:[m&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-4",children:m}),h?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"new-name",children:"Nome Completo"}),n.jsx(ut,{id:"new-name",value:S.name,onChange:J=>j({...S,name:J.target.value}),placeholder:"es. Mario Rossi"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"new-pin",children:"PIN (4 cifre)"}),n.jsx(ut,{id:"new-pin",type:"password",value:S.pin,onChange:J=>{const te=J.target.value.replace(/\D/g,"").slice(0,4);j({...S,pin:te})},maxLength:4,placeholder:""})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"new-role",children:"Ruolo"}),n.jsxs("select",{id:"new-role",value:S.role,onChange:J=>j({...S,role:J.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona ruolo --"}),n.jsx("option",{value:"dipendente",children:"Dipendente (Staff Fisso) (Consigliato)"}),n.jsx("option",{value:"responsabile",children:"Responsabile (Consigliato)"}),n.jsx("option",{value:"collaboratore",children:"Collaboratore Occasionale (Consigliato)"}),n.jsx("option",{value:"admin",children:"Amministratore (Consigliato)"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I ruoli contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"new-department",children:"Reparto"}),n.jsxs("select",{id:"new-department",value:S.department,onChange:J=>j({...S,department:J.target.value}),className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Seleziona reparto --"}),f.map(J=>{const te=C.includes(J);return n.jsxs("option",{value:J,children:[J," ",te?"(Consigliato)":""]},J)})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:`I reparti contrassegnati come "Consigliato" sono provvisori e verranno sostituiti dalle categorie create dall'amministratore.`})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(de,{onClick:ce,className:"flex-1",disabled:!S.name.trim()||S.pin.length!==4,children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),"Crea Utente"]}),n.jsx(de,{variant:"outline",onClick:()=>{x(!1),w("")},children:"Indietro"})]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"user-select",children:"Seleziona Utente"}),n.jsxs("select",{id:"user-select",value:a,onChange:J=>{l(J.target.value),w("")},className:"mt-1 block w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",children:[n.jsx("option",{value:"",children:"-- Scegli utente --"}),i.map(J=>n.jsxs("option",{value:J.id,children:[J.name," (",J.department,")",J.role==="admin"&&" - Admin"]},J.id))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"pin",children:"PIN (4 cifre)"}),n.jsxs("div",{className:"relative",children:[n.jsx(ut,{id:"pin",type:v?"text":"password",value:d,onChange:J=>{const te=J.target.value.replace(/\D/g,"").slice(0,4);c(te),w("")},maxLength:4,placeholder:"",className:"pr-10"}),n.jsx(de,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3",onClick:()=>y(!v),children:v?n.jsx(Gy,{className:"h-4 w-4"}):n.jsx(dp,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsxs(de,{onClick:ee,className:"flex-1",disabled:!a||d.length!==4,children:[n.jsx(i2,{className:"mr-2 h-4 w-4"}),"Entra"]}),n.jsx(de,{variant:"outline",onClick:O,children:"Annulla"})]}),n.jsx("div",{className:"pt-4 border-t",children:n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>x(!0),className:"w-full",children:[n.jsx(jn,{className:"mr-2 h-4 w-4"}),"Aggiungi Nuovo Utente"]})})]})]})]})}):null}function _b({activeTab:e,temperatures:t}){const[r,i]=K.useState(!1);K.useEffect(()=>{i(e==="temperature")},[e]);const s=()=>{if(typeof window.jspdf>"u"){alert("Errore: Librerie PDF non caricate. Ricarica la pagina e riprova.");return}if(t.length===0){alert("Nessuna temperatura registrata da esportare.");return}try{const a=["Posizione","Temperatura","Orario"],l=[];t.forEach(y=>{l.push([y.location,`${y.temperature}C`,y.time])});const{jsPDF:d}=window.jspdf,c=new d;c.setFontSize(18),c.text("Report: Temperature HACCP",14,22),c.setFontSize(12);const h=new Date().toLocaleDateString("it-IT");c.text(`Data esportazione: ${h}`,14,32),c.text(`Totale rilevazioni: ${t.length}`,14,40),c.autoTable({startY:50,head:[a],body:l,theme:"striped",styles:{fontSize:10,cellPadding:3},headStyles:{fillColor:[25,118,210],textColor:255,fontStyle:"bold"},alternateRowStyles:{fillColor:[245,245,245]},columnStyles:{0:{cellWidth:60},1:{cellWidth:40,halign:"center"},2:{cellWidth:50}}});const x=c.internal.getNumberOfPages();c.setFontSize(8);for(let y=1;y<=x;y++)c.setPage(y),c.text(`Mini-ePackPro HACCP - Pagina ${y} di ${x}`,14,c.internal.pageSize.height-10);const v=`report_Temperature_${new Date().toISOString().slice(0,10)}.pdf`;c.save(v)}catch(a){console.error("PDF export error:",a),alert("Errore durante l'esportazione del PDF. Riprova.")}};return r?n.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:n.jsxs(de,{onClick:s,className:"bg-primary-500 hover:bg-primary-600 text-white shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2 px-6 py-3 rounded-xl",size:"lg",children:[n.jsx(Wy,{className:"h-5 w-5"}),n.jsx("span",{className:"hidden sm:inline",children:"Esporta Temperature in PDF"}),n.jsx("span",{className:"sm:hidden",children:"PDF"})]})}):null}const Ib=()=>({"haccp-roles":[],"haccp-suppliers":[],"haccp-onboarding":{currentStep:"preset",completedSteps:[],progress:0,startedAt:new Date().toISOString(),lastActivity:new Date().toISOString()},"haccp-presets":[],"haccp-dev-mode":{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:new Date().toISOString()}}),Tb=()=>{try{if(new URLSearchParams(window.location.search).get("dev")==="1"){const t={enabled:!0,features:["bypass-onboarding","show-debug-info"],bypassOnboarding:!0,showDebugInfo:!0,lastToggled:new Date().toISOString(),reason:"Attivato via URL parameter"};return localStorage.setItem("haccp-dev-mode",JSON.stringify(t)),console.log(" Dev mode attivato via URL parameter"),!0}}catch(e){console.warn("Errore nell'inizializzazione dev mode:",e)}return!1},Fc="haccp-dev-mode",ul=()=>{try{const e=localStorage.getItem(Fc);if(e&&e!=="undefined"&&e!=="null"&&e!=="[object Object]"){const t=JSON.parse(e);return t&&typeof t=="object"&&t.enabled===!0}}catch(e){console.warn("Errore nel parsing dev mode:",e),localStorage.removeItem(Fc),localStorage.removeItem("haccp-dev-mode"),localStorage.removeItem("haccp-dev-mode-version")}return!1},Mb=(e=null,t="")=>{const r=ul(),i=e!==null?e:!r,s={enabled:i,features:i?["bypass-onboarding","show-debug-info"]:[],bypassOnboarding:i,showDebugInfo:i,lastToggled:new Date().toISOString(),reason:t||(i?"Attivato manualmente":"Disattivato manualmente")};try{return localStorage.setItem(Fc,JSON.stringify(s)),i&&!r&&window.location.reload(),i}catch(a){return console.error("Errore nel salvataggio dev mode:",a),!1}},wf=()=>{try{const e=localStorage.getItem(Fc);if(e&&e!=="undefined"&&e!=="null"){const t=JSON.parse(e);if(t&&typeof t=="object")return t}}catch(e){console.warn("Errore nel parsing dev mode settings:",e),localStorage.removeItem(Fc)}return{enabled:!1,features:[],bypassOnboarding:!1,showDebugInfo:!1,lastToggled:null,reason:null}},k2=e=>ul()?wf().features.includes(e):!1,Db=()=>ul()&&k2("bypass-onboarding"),Eb=()=>ul()&&k2("show-debug-info"),Fb=()=>Eb()?{timestamp:new Date().toISOString(),userAgent:navigator.userAgent,localStorage:{keys:Object.keys(localStorage),size:new Blob(Object.values(localStorage)).size},sessionStorage:{keys:Object.keys(sessionStorage),size:new Blob(Object.values(sessionStorage)).size},url:window.location.href,devMode:wf()}:null,Ob=()=>{if(!ul())return!1;try{return["haccp-dev-mode","haccp-onboarding","haccp-presets"].forEach(t=>{localStorage.removeItem(t)}),!0}catch(e){return console.error("Errore nella pulizia dati dev:",e),!1}};function Og(){const[e,t]=K.useState(!1),[r,i]=K.useState(!1),[s,a]=K.useState(!1),[l,d]=K.useState(null);if(K.useEffect(()=>{const y=()=>{const w=ul();t(w),w&&d(wf())};y();const m=w=>{w.key==="haccp-dev-mode"&&y()};return window.addEventListener("storage",m),()=>{window.removeEventListener("storage",m)}},[]),!e)return null;const c=()=>{Mb(!1,"Disattivato via banner")},h=async()=>{confirm(` ATTENZIONE: Stai per rimuovere tutti i dati di sviluppo.

Questo rimuover:
 Modalit dev
 Onboarding
 Preset

I dati HACCP (temperature, pulizie, inventario) NON verranno toccati.

Procedere?`)&&(Ob()?(alert(` Dati di sviluppo rimossi con successo!

La modalit dev  stata disattivata.`),window.location.reload()):alert(" Errore nella rimozione dei dati di sviluppo"))},x=()=>{window.location.reload()},v=Fb();return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-yellow-500 text-yellow-900 px-4 py-2 shadow-lg",children:n.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(En,{className:"h-5 w-5"}),n.jsx("span",{className:"font-bold",children:"DEV MODE ATTIVO"}),n.jsx("span",{className:"text-sm opacity-75",children:" Onboarding bypassato  Debug info  Testing features"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>a(!s),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Mostra info debug",children:n.jsx(Ni,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>i(!r),className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Impostazioni dev",children:n.jsx(fr,{className:"h-4 w-4"})}),n.jsx("button",{onClick:x,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Ricarica pagina",children:n.jsx(au,{className:"h-4 w-4"})}),n.jsx("button",{onClick:c,className:"p-1 hover:bg-yellow-400 rounded transition-colors",title:"Disattiva dev mode",children:n.jsx(Yt,{className:"h-4 w-4"})})]})]})}),s&&v&&n.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-h-96 overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[n.jsx(Ni,{className:"h-5 w-5"}),"Debug Info"]}),n.jsx("button",{onClick:()=>a(!1),className:"p-1 hover:bg-gray-100 rounded",children:n.jsx(Yt,{className:"h-4 w-4"})})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Timestamp:"})," ",v.timestamp]}),n.jsxs("div",{children:[n.jsx("strong",{children:"URL:"})," ",v.url]}),n.jsxs("div",{children:[n.jsx("strong",{children:"User Agent:"})," ",v.userAgent]}),n.jsxs("div",{children:[n.jsx("strong",{children:"LocalStorage:"})," ",v.localStorage.keys.length," chiavi, ",Math.round(v.localStorage.size/1024)," KB"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"SessionStorage:"})," ",v.sessionStorage.keys.length," chiavi, ",Math.round(v.sessionStorage.size/1024)," KB"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Dev Mode Settings:"}),n.jsx("pre",{className:"mt-1 p-2 bg-gray-100 rounded text-xs overflow-x-auto",children:JSON.stringify(v.devMode,null,2)})]})]})]}),r&&n.jsxs("div",{className:"fixed top-16 left-4 right-4 z-40 bg-white border border-yellow-300 rounded-lg shadow-xl p-4 max-w-md",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold text-yellow-800 flex items-center gap-2",children:[n.jsx(fr,{className:"h-5 w-5"}),"Impostazioni Dev Mode"]}),n.jsx("button",{onClick:()=>i(!1),className:"p-1 hover:bg-gray-100 rounded",children:n.jsx(Yt,{className:"h-4 w-4"})})]}),l&&n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Stato:"}),n.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"ATTIVO"})]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Attivato il:"})," ",new Date(l.lastToggled).toLocaleString("it-IT")]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Motivo:"})," ",l.reason]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Features:"}),n.jsx("div",{className:"mt-1 space-y-1",children:l.features.map(y=>n.jsx("div",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:y},y))})]}),n.jsxs("div",{className:"pt-3 border-t",children:[n.jsxs("button",{onClick:h,className:"w-full px-3 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[n.jsx(wn,{className:"h-4 w-4"}),"Rimuovi Dati Dev"]}),n.jsx("p",{className:"text-xs text-gray-600 mt-1 text-center",children:"Rimuove solo i dati di sviluppo, mantiene i dati HACCP"})]})]})]}),n.jsx("div",{className:"h-16"})]})}const Rb=({formData:e,setFormData:t,currentStep:r,validateStep:i,confirmStep:s,markStepAsUnconfirmed:a,isStepConfirmed:l,canConfirmStep:d})=>{var v,y,m,w,S,j,f,N,C,V;const[c,h]=K.useState(null),x=ee=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ee);return K.useEffect(()=>{var ce;const ee=((ce=e.business)==null?void 0:ce.email)||"";ee.length>0?h(x(ee)):h(null)},[(v=e.business)==null?void 0:v.email]),(y=e.business)!=null&&y.name&&((m=e.business)!=null&&m.address)&&((w=e.business)!=null&&w.email),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Informazioni Attivit"}),n.jsx("p",{className:"text-gray-600",children:"Configura i dati base della tua attivit"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"businessName",children:"Nome Attivit *"}),n.jsx(ut,{id:"businessName",value:((S=e.business)==null?void 0:S.name)||"",onChange:ee=>t(ce=>({...ce,business:{...ce.business,name:ee.target.value}})),placeholder:"Es. Pizzeria Bella Napoli",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"vatNumber",children:"P.IVA"}),n.jsx(ut,{id:"vatNumber",value:((j=e.business)==null?void 0:j.vatNumber)||"",onChange:ee=>t(ce=>({...ce,business:{...ce.business,vatNumber:ee.target.value}})),placeholder:"11 caratteri max",maxLength:11,className:"mt-1"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"address",children:"Indirizzo *"}),n.jsxs("div",{className:"flex gap-2 mt-1",children:[n.jsx(ut,{id:"address",value:((f=e.business)==null?void 0:f.address)||"",onChange:ee=>t(ce=>({...ce,business:{...ce.business,address:ee.target.value}})),placeholder:"Via Roma 123, Milano",className:"flex-1"}),n.jsx(de,{variant:"outline",size:"sm",onClick:async()=>{if(navigator.geolocation)try{const ee=event.target.closest("button"),ce=ee.innerHTML;ee.innerHTML='<div class="animate-spin h-4 w-4 border-2 border-blue-600 border-t-transparent rounded-full"></div>',ee.disabled=!0;const ne=await new Promise((M,k)=>{navigator.geolocation.getCurrentPosition(M,k,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:O,longitude:J}=ne.coords,te=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${O}&lon=${J}&zoom=18&addressdetails=1`);if(te.ok){const M=await te.json();if(M.display_name&&M.address){const k=M.address,P=k.road||"",R=k.house_number||"",T=k.postcode||"",F=k.city||k.town||k.village||"",re=k.state||"",q=[P,R,F,re].filter(Boolean).join(", ");t(le=>({...le,business:{...le.business,address:q,via:P,civico:R,cap:T,citta:F,provincia:re,coordinates:{lat:O,lon:J}}})),ee.innerHTML='<div class="text-green-600"></div>',setTimeout(()=>{ee.innerHTML=ce,ee.disabled=!1},2e3)}}else throw new Error("Errore nel reverse geocoding")}catch(ee){console.error("Errore geolocalizzazione:",ee),alert("Errore nella geolocalizzazione: "+ee.message);const ce=event.target.closest("button");ce.innerHTML=originalContent,ce.disabled=!1}else alert("Geolocalizzazione non supportata dal browser")},children:n.jsx(ic,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:" Clicca il pulsante GPS per rilevare automaticamente la tua posizione e compilare l'indirizzo"}),((N=e.business)==null?void 0:N.address)&&n.jsx("div",{className:"space-y-2 mt-2",children:n.jsxs("div",{className:"flex items-start gap-2 p-2 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsx("div",{className:"text-yellow-600 mt-0.5",children:""}),n.jsxs("div",{className:"text-sm text-yellow-800",children:[n.jsx("p",{className:"font-medium",children:"Verifica il numero civico!"}),n.jsx("p",{className:"text-xs mt-1",children:"La geolocalizzazione ha un margine di errore di 5-15 metri. Controlla che il numero civico sia corretto e modificalo se necessario."})]})]})})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"phone",children:"Telefono"}),n.jsx(ut,{id:"phone",value:((C=e.business)==null?void 0:C.phone)||"",onChange:ee=>t(ce=>({...ce,business:{...ce.business,phone:ee.target.value}})),placeholder:"+39 123 456 7890",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"email",children:"Email *"}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx(ut,{id:"email",type:"email",value:((V=e.business)==null?void 0:V.email)||"",onChange:ee=>t(ce=>({...ce,business:{...ce.business,email:ee.target.value}})),placeholder:"info@pizzeria.it",className:`pr-10 ${c===!0?"border-green-500 focus:border-green-500 focus:ring-green-500":c===!1?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"}`}),c===!0&&n.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:n.jsx(bn,{className:"h-5 w-5 text-green-500"})}),c===!1&&n.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:n.jsx(oN,{className:"h-5 w-5 text-red-500"})})]}),c===!1&&n.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Inserisci un indirizzo email valido (es. info@pizzeria.it)"})]})]}),n.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ni,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900",children:"Campi obbligatori"}),n.jsx("p",{className:"text-sm text-blue-800 mt-1",children:"Nome Attivit, Indirizzo e Email sono obbligatori per procedere."})]})]})})]})},Bb=({formData:e,setFormData:t,currentStep:r,validateStep:i,confirmStep:s,markStepAsUnconfirmed:a,isStepConfirmed:l,canConfirmStep:d})=>{const[c,h]=K.useState(""),[x,v]=K.useState([{id:"cucina",name:"Cucina",enabled:!0,isCustom:!1,required:!1},{id:"bancone",name:"Bancone",enabled:!0,isCustom:!1,required:!1},{id:"sala",name:"Sala",enabled:!0,isCustom:!1,required:!1},{id:"magazzino",name:"Magazzino",enabled:!0,isCustom:!1,required:!1}]);K.useEffect(()=>{var f;if((f=e.departments)!=null&&f.list&&e.departments.list.length>0){const N=e.departments.list,V=[{id:"cucina",name:"Cucina",enabled:!0,isCustom:!1,required:!1},{id:"bancone",name:"Bancone",enabled:!0,isCustom:!1,required:!1},{id:"sala",name:"Sala",enabled:!0,isCustom:!1,required:!1},{id:"magazzino",name:"Magazzino",enabled:!0,isCustom:!1,required:!1}].map(ce=>{const ne=N.find(O=>O.id===ce.id);return ne?{...ne,required:!1}:ce}),ee=N.filter(ce=>ce.isCustom);v([...V,...ee])}},[]);const y=f=>{v(N=>N.map(C=>C.id===f?{...C,enabled:!C.enabled}:C))},m=()=>{if(c.trim()){const f={id:`custom-${Date.now()}`,name:c.trim(),enabled:!0,isCustom:!0};v(N=>[...N,f]),h("")}},w=f=>{v(N=>N.filter(C=>C.id!==f))},S=x.filter(f=>f.enabled).length,j=S>0;return K.useEffect(()=>{const f=x.filter(N=>N.enabled);t(N=>({...N,departments:{list:f,enabledCount:f.length}}))},[x]),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Reparti"}),n.jsx("p",{className:"text-gray-600",children:"Organizza la struttura operativa della tua attivit"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Reparti Standard"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.filter(f=>!f.isCustom).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsx("span",{className:"font-medium",children:f.name}),n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:f.enabled,onChange:()=>y(f.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"ml-2 text-sm text-gray-600",children:f.enabled?"Attivo":"Inattivo"})]})]},f.id))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Aggiungi Reparto Personalizzato"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(ut,{value:c,onChange:f=>h(f.target.value),placeholder:"Nome del nuovo reparto",className:"flex-1"}),n.jsxs(de,{onClick:m,disabled:!c.trim(),variant:"outline",size:"sm",children:[n.jsx(jn,{className:"h-4 w-4 mr-1"}),"Aggiungi"]})]})]}),x.filter(f=>f.isCustom).length>0&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Reparti Personalizzati"}),x.filter(f=>f.isCustom).map(f=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg bg-gray-50",children:[n.jsx("span",{className:"font-medium",children:f.name}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("label",{className:"flex items-center cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:f.enabled,onChange:()=>y(f.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"ml-2 text-sm text-gray-600",children:f.enabled?"Attivo":"Inattivo"})]}),n.jsx(de,{onClick:()=>w(f.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:n.jsx(Yt,{className:"h-4 w-4"})})]})]},f.id))]}),n.jsx("div",{className:`p-4 rounded-lg ${j?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${j?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:S}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${j?"text-green-900":"text-yellow-900"}`,children:["Reparti attivi: ",S]}),n.jsx("p",{className:`text-sm ${j?"text-green-800":"text-yellow-800"}`,children:j?" Requisito soddisfatto! Puoi procedere.":" Devi attivare almeno un reparto per continuare."})]})]})})]})},qb=({formData:e,setFormData:t,currentStep:r,setCurrentStep:i,validateStep:s,confirmStep:a,markStepAsUnconfirmed:l,isStepConfirmed:d,canConfirmStep:c})=>{var T;const[h,x]=K.useState(((T=e.staff)==null?void 0:T.staffMembers)||[]),[v,y]=K.useState(!1),[m,w]=K.useState(null),[S,j]=K.useState({}),[f,N]=K.useState({name:"",surname:"",role:"",categories:[""],haccpExpiry:""});K.useEffect(()=>{var F;(F=e.staff)!=null&&F.staffMembers&&e.staff.staffMembers.length>0&&x(e.staff.staffMembers)},[e.staff]),K.useEffect(()=>{const F={...e,staff:{staffMembers:h}};t(F)},[h]);const C=["Amministratore","Responsabile","Dipendente","Collaboratore Occasionale / Part-time"],V=["Cuochi","Banconisti","Camerieri","Social & Media Manager","Amministratore","Altro"],ee=()=>{N({name:"",surname:"",role:"",categories:[""],haccpExpiry:""}),w(null)},ce=F=>F.some(re=>re!=="Social & Media Manager"&&re!=="Altro"),ne=()=>{N(F=>({...F,categories:[...F.categories,""]}))},O=F=>{f.categories.length>1&&N(re=>({...re,categories:re.categories.filter((q,le)=>le!==F)}))},J=(F,re)=>{N(q=>({...q,categories:q.categories.map((le,oe)=>oe===F?re:le)}))},te=()=>{const F=[...new Set(f.categories.filter(re=>re.trim()))];if(f.name&&f.surname&&f.role&&F.length>0){const re={id:Date.now(),name:f.name,surname:f.surname,role:f.role,categories:F,primaryCategory:F[0],fullName:`${f.name} ${f.surname}`,haccpExpiry:ce(F)&&f.haccpExpiry?f.haccpExpiry:""},q=[...h,re];x(q),t(le=>({...le,staff:{...le.staff,staffMembers:q}})),d(r)&&l(r),ee(),y(!1),j({})}},M=F=>{N({name:F.name,surname:F.surname,role:F.role||"",categories:F.categories&&F.categories.length>0?F.categories:[F.category||""],haccpExpiry:F.haccpExpiry}),w(F),y(!0)},k=()=>{const F=[...new Set(f.categories.filter(re=>re.trim()))];if(f.name&&f.surname&&f.role&&F.length>0){const re=h.map(q=>q.id===m.id?{...q,name:f.name,surname:f.surname,role:f.role,categories:F,primaryCategory:F[0],fullName:`${f.name} ${f.surname}`,haccpExpiry:ce(F)&&f.haccpExpiry?f.haccpExpiry:""}:q);x(re),t(q=>({...q,staff:{...q.staff,staffMembers:re}})),d(r)&&l(r),ee(),y(!1),j({})}},P=F=>{const re=h.filter(q=>q.id!==F);x(re),t(q=>({...q,staff:{...q.staff,staffMembers:re}})),d(r)&&l(r),j({})},R=()=>h.length===0?!1:h.every(F=>F.fullName&&F.fullName.trim().length>=3&&F.role&&(F.categories&&F.categories.length>0||F.category));return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Staff e Ruoli"}),n.jsx("p",{className:"text-gray-600",children:"Registra il personale e assegna responsabilit"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Membri dello Staff"}),n.jsxs(de,{onClick:()=>y(!0),variant:"outline",size:"sm",children:[n.jsx(jn,{className:"h-4 w-4 mr-1"}),"Aggiungi Staff"]})]}),h.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx("p",{children:"Nessun membro dello staff registrato"}),n.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Staff" per iniziare'})]}):n.jsx("div",{className:"space-y-3",children:h.map((F,re)=>n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gray-50",children:[n.jsx("div",{className:"flex-1",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:F.fullName}),n.jsx("p",{className:"text-sm text-gray-600",children:F.role}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(F.categories&&F.categories.length>0?F.categories:[F.category||"Non assegnato"]).map((q,le)=>n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:q},le))})]}),F.haccpExpiry&&n.jsxs("div",{className:"text-sm text-gray-600",children:["HACCP: ",F.haccpExpiry]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{onClick:()=>M(F),variant:"outline",size:"sm",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>P(F.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:n.jsx(wn,{className:"h-4 w-4"})})]})]}),(S[`staff_${re}_name`]||S[`staff_${re}_role`]||S[`staff_${re}_category`])&&n.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-red-800",children:[S[`staff_${re}_name`]&&n.jsxs("p",{children:[" ",S[`staff_${re}_name`]]}),S[`staff_${re}_role`]&&n.jsxs("p",{children:[" ",S[`staff_${re}_role`]]}),S[`staff_${re}_category`]&&n.jsxs("p",{children:[" ",S[`staff_${re}_category`]]})]})})]},F.id))})]}),v&&n.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:m?"Modifica Membro":"Aggiungi Nuovo Membro"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome *"}),n.jsx(ut,{id:"name",value:f.name,onChange:F=>N(re=>({...re,name:F.target.value})),placeholder:"Nome",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"surname",children:"Cognome *"}),n.jsx(ut,{id:"surname",value:f.surname,onChange:F=>N(re=>({...re,surname:F.target.value})),placeholder:"Cognome",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"role",children:"Ruolo *"}),n.jsxs("select",{id:"role",value:f.role,onChange:F=>N(re=>({...re,role:F.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona ruolo"}),C.map(F=>n.jsx("option",{value:F,children:F},F))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"categories",children:"Categorie *"}),n.jsxs("div",{className:"space-y-2",children:[f.categories.map((F,re)=>n.jsxs("div",{className:"flex gap-2 items-center",children:[n.jsxs("select",{value:F,onChange:q=>J(re,q.target.value),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",required:re===0,children:[n.jsx("option",{value:"",children:"Seleziona una categoria..."}),V.map(q=>n.jsx("option",{value:q,children:q},q))]}),f.categories.length>1&&n.jsx(de,{type:"button",onClick:()=>O(re),variant:"outline",size:"sm",className:"h-10 w-10 p-0 text-red-600 hover:text-red-800",children:""})]},re)),n.jsx(de,{type:"button",onClick:ne,variant:"outline",size:"sm",className:"w-full",children:"+ Aggiungi Categoria"})]})]}),ce(f.categories)&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"haccpExpiry",children:"Scadenza Attestato HACCP"}),n.jsx(ut,{id:"haccpExpiry",type:"date",value:f.haccpExpiry,onChange:F=>N(re=>({...re,haccpExpiry:F.target.value})),className:"mt-1"})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(de,{variant:"outline",onClick:()=>{y(!1),ee()},children:"Annulla"}),n.jsx(de,{onClick:m?k:te,disabled:!f.name||!f.surname||!f.role||f.categories.every(F=>!F.trim()),children:m?"Aggiorna":"Aggiungi"})]})]}),n.jsx("div",{className:`p-4 rounded-lg ${d(r)?"bg-green-50 border border-green-200":R()?"bg-blue-50 border border-blue-200":"bg-yellow-50 border border-yellow-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${d(r)?"bg-green-500":R()?"bg-blue-500":"bg-yellow-500"} text-white text-sm font-bold`,children:h.length}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${d(r)?"text-green-900":R()?"text-blue-900":"text-yellow-900"}`,children:["Membri registrati: ",h.length]}),n.jsx("p",{className:`text-sm ${d(r)?"text-green-800":R()?"text-blue-800":"text-yellow-800"}`,children:d(r)?" Step confermato! Puoi procedere al prossimo step.":R()?' Dati validi! Clicca "Conferma Dati Staff" per confermare.':" Devi registrare almeno un membro con tutti i campi obbligatori."})]})]})}),S.staff&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("p",{className:"font-medium",children:" Errore generale:"}),n.jsxs("p",{children:[" ",S.staff]})]})})]})},$b=({formData:e,setFormData:t,currentStep:r,validateStep:i,confirmStep:s,markStepAsUnconfirmed:a,isStepConfirmed:l,canConfirmStep:d})=>{var P,R;const[c,h]=K.useState([]),[x,v]=K.useState(!1),[y,m]=K.useState(null),[w,S]=K.useState({}),[j,f]=K.useState({name:"",location:"",targetTemp:"",selectedCategories:[]}),N=((P=e.departments)==null?void 0:P.list)||[];(R=e.staff)!=null&&R.staffMembers;const C=N.length>0?N.map(T=>T.name||T):["Cucina","Bancone","Sala","Magazzino"];K.useEffect(()=>{var T;(T=e.conservation)!=null&&T.points&&e.conservation.points.length>0&&h(e.conservation.points)},[e.conservation]),K.useEffect(()=>{const T={...e,conservation:{points:c,count:c.length}};t(T)},[c]);const V=()=>{f({name:"",location:"",targetTemp:"",selectedCategories:[]}),m(null)},ee=(T,F=[])=>{const re=parseFloat(T);if(isNaN(re))return{compliant:!1,message:"Temperatura non valida",type:"error"};if(F.length>0){const q=Ut.tolerance;let le=!1;for(let U=0;U<F.length;U++){for(let Q=U+1;Q<F.length;Q++){const G=Ut.categories.find(he=>he.id===F[U]),ae=Ut.categories.find(he=>he.id===F[Q]);if(G&&ae){const he=G.minTemp-q,xe=G.maxTemp+q,we=ae.minTemp-q,Be=ae.maxTemp+q;if(xe<we||Be<he){le=!0;break}}}if(le)break}if(le)return{compliant:!1,message:" Categorie incompatibili selezionate",type:"error",color:"red"};let oe=!1,Pe=!1,z=null;for(const U of F){const Q=Ut.categories.find(G=>G.id===U);if(Q){if(z=Q,re>=Q.minTemp&&re<=Q.maxTemp){oe=!0;break}const G=Q.minTemp-q,ae=Q.maxTemp+q;if(re>=G&&re<=ae){Pe=!0;break}}}return oe?{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}:Pe?{compliant:!0,message:"Temperatura impostata entro i limiti accettabili (0,5C di differenza)",type:"warning",color:"yellow"}:{compliant:!1,message:` Fuori range HACCP per ${(z==null?void 0:z.name)||"categorie selezionate"}`,type:"error",color:"red"}}return re<-30||re>80?{compliant:!1,message:"Range temperatura fuori limiti operativi",type:"error",color:"red"}:{compliant:!0,message:" Valore temperatura valido",type:"compliant",color:"green"}},ce=(T,F,re)=>{if(F.length===0)return"neutral";const q=parseFloat(re);if(isNaN(q))return"neutral";const le=Ut.categories.find(U=>U.id===T);if(!le)return"neutral";if(F.includes(T))return"selected";const oe=Ut.tolerance,Pe=le.minTemp-oe,z=le.maxTemp+oe;if(q>=le.minTemp&&q<=le.maxTemp){for(const U of F){const Q=Ut.categories.find(G=>G.id===U);if(Q){const G=Q.minTemp-oe,ae=Q.maxTemp+oe;if(G<=z&&ae>=Pe)return"compatible"}}return"incompatible"}else if(q>=Pe&&q<=z){for(const U of F){const Q=Ut.categories.find(G=>G.id===U);if(Q){const G=Q.minTemp-oe,ae=Q.maxTemp+oe;if(G<=z&&ae>=Pe)return"tolerance"}}return"incompatible"}return"incompatible"},ne=T=>{if(!T.selectedCategories||T.selectedCategories.length===0)return null;const F=parseFloat(T.targetTemp);if(isNaN(F))return null;const re=Ut.categories.find(U=>U.id===T.selectedCategories[0]);if(!re)return null;const q=Ut.tolerance,le=re.minTemp,oe=re.maxTemp,Pe=le-q,z=oe+q;if(F>=le&&F<=oe)return null;if(F>=Pe&&F<=z){const U=(le+oe)/2;return F<U?`Aumenta la temperatura verso ${U.toFixed(1)}C per ottimizzare la conservazione`:`Diminuisci la temperatura verso ${U.toFixed(1)}C per ottimizzare la conservazione`}return F<Pe?`Aumenta la temperatura al range ottimale ${le}-${oe}C`:F>z?`Diminuisci la temperatura al range ottimale ${le}-${oe}C`:null},O=()=>{if(j.name&&j.location&&j.targetTemp&&j.selectedCategories.length>0){const T=ee(j.targetTemp,j.selectedCategories),F={...j,compliance:T};if(y)h(re=>re.map(q=>q.id===y?{...q,...F}:q));else{const re={id:Date.now(),...F};h(q=>[...q,re])}V(),v(!1)}},J=T=>{h(F=>F.filter(re=>re.id!==T))},te=T=>{const F=c.find(re=>re.id===T);F&&(f({name:F.name,location:F.location,targetTemp:F.targetTemp,selectedCategories:F.selectedCategories||[]}),m(T),v(!0))},M=c.length>0&&c.every(T=>T.name&&T.location&&T.targetTemp&&T.selectedCategories&&T.selectedCategories.length>0),k=c.some(T=>T.compliance&&T.compliance.type!=="compliant");return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Punti di Conservazione"}),n.jsx("p",{className:"text-gray-600",children:"Configura frigoriferi e aree di stoccaggio"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Punti di Conservazione"}),n.jsxs(de,{onClick:()=>{console.log(" Pulsante Aggiungi cliccato");try{V(),v(!0),console.log(" Form resettato e showAddForm impostato a true")}catch(T){console.error(" Errore nel pulsante Aggiungi:",T)}},variant:"outline",size:"sm",className:"flex items-center gap-2 px-3 py-2 text-sm font-medium whitespace-nowrap min-w-fit",children:[n.jsx(jn,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:"Aggiungi Nuovo Punto di Conservazione"}),n.jsx("span",{className:"sm:hidden",children:"Aggiungi Punto"})]})]}),c.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Jt,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"Nessun punto di conservazione configurato"}),n.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Nuovo Punto di Conservazione" per iniziare'})]}):n.jsx("div",{className:"space-y-3",children:c.map(T=>n.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("h5",{className:"font-medium",children:T.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:T.location})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Temperatura:"}),n.jsxs("p",{className:"font-medium",children:[T.targetTemp,"C"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"HACCP:"}),n.jsxs("div",{className:`flex items-center gap-1 ${T.compliance.type==="compliant"?"text-green-600":T.compliance.type==="warning"?"text-yellow-600":"text-red-600"}`,children:[T.compliance.type==="compliant"?"":T.compliance.type==="warning"?"":"",n.jsx("span",{className:"text-xs",children:T.compliance.message})]})]})]}),T.selectedCategories&&T.selectedCategories.length>0&&n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Categorie:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:T.selectedCategories.map(F=>{const re=Ut.categories.find(q=>q.id===F);return re?n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:re.name},F):null})})]}),(()=>{const F=ne(T);return F?n.jsxs("div",{className:"mt-2",children:[n.jsx("span",{className:"text-gray-600 text-sm",children:"Suggerimenti:"}),n.jsx("div",{className:"mt-1 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:F})]}):null})()]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{onClick:()=>te(T.id),variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>J(T.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:n.jsx(Yt,{className:"h-4 w-4"})})]})]})},T.id))})]}),x&&n.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:y?"Modifica Punto di Conservazione":"Aggiungi Nuovo Punto di Conservazione"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Punto di Conservazione *"}),n.jsx(ut,{id:"name",value:j.name,onChange:T=>f(F=>({...F,name:T.target.value})),placeholder:"Es. Frigo A, Freezer, Abbattitore",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"location",children:"Luogo *"}),n.jsxs("select",{id:"location",value:j.location,onChange:T=>f(F=>({...F,location:T.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona reparto"}),C.map(T=>n.jsx("option",{value:T,children:T},T))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"targetTemp",children:"Temperatura Punto di Conservazione (C) *"}),n.jsx(ut,{id:"targetTemp",type:"number",min:"-30",max:"80",step:"0.1",value:j.targetTemp,onChange:T=>{console.log(" Temperatura cambiata:",T.target.value),f(F=>({...F,targetTemp:T.target.value}))},placeholder:"4",className:`mt-1 ${j.targetTemp&&j.selectedCategories.length>0?(()=>{const T=ee(j.targetTemp,j.selectedCategories);return T.color==="green"?"border-green-500 focus:border-green-500 focus:ring-green-500":T.color==="yellow"?"border-yellow-500 focus:border-yellow-500 focus:ring-yellow-500":T.color==="red"?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300"})():"border-gray-300"}`}),j.targetTemp&&j.selectedCategories.length>0&&n.jsx("div",{className:"mt-1",children:(()=>{const T=ee(j.targetTemp,j.selectedCategories);return n.jsx("p",{className:`text-xs ${T.color==="green"?"text-green-600":T.color==="yellow"?"text-yellow-600":T.color==="red"?"text-red-600":"text-gray-600"}`,children:T.message})})()})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"categories",children:"Categorie Prodotti Conservati *"}),n.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 gap-2",children:Ut.categories.map(T=>{const F=ce(T.id,j.selectedCategories,j.targetTemp);console.log(` Category ${T.name}: compatibility=${F}, selected=${j.selectedCategories}, temp=${j.targetTemp}`);const re=()=>{switch(F){case"selected":return"bg-blue-200 border-blue-400 text-blue-900 shadow-sm";case"compatible":return"bg-green-200 border-green-400 text-green-900 shadow-sm";case"tolerance":return"bg-yellow-200 border-yellow-400 text-yellow-900 shadow-sm";case"incompatible":return"bg-red-200 border-red-400 text-red-900 shadow-sm";default:return"bg-gray-100 border-gray-300 text-gray-700"}};return n.jsxs("label",{className:`flex items-center gap-2 cursor-pointer p-2 rounded border ${re()}`,children:[n.jsx("input",{type:"checkbox",checked:j.selectedCategories.includes(T.id),onChange:q=>{console.log(" Categoria cambiata:",T.id,"checked:",q.target.checked),q.target.checked?f(le=>{const oe=[...le.selectedCategories,T.id];return console.log(" Categorie aggiornate:",oe),{...le,selectedCategories:oe}}):f(le=>{const oe=le.selectedCategories.filter(Pe=>Pe!==T.id);return console.log(" Categorie aggiornate:",oe),{...le,selectedCategories:oe}})},className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsx("span",{className:"text-sm font-medium",children:T.name}),F==="compatible"&&n.jsx("span",{className:"text-xs",children:""}),F==="incompatible"&&n.jsx("span",{className:"text-xs",children:""}),F==="tolerance"&&n.jsx("span",{className:"text-xs",children:""})]},T.id)})}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Seleziona le categorie di prodotti che verranno conservate in questo punto"}),n.jsxs("div",{className:"mt-2 p-3 bg-gray-50 rounded text-xs border",children:[n.jsx("p",{className:"font-medium mb-2",children:"Legenda compatibilit:"}),n.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-4 h-4 bg-green-200 border-2 border-green-400 rounded shadow-sm"}),n.jsx("span",{className:"font-medium text-green-900",children:"Verde: Compatibile con temperatura"})]}),n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-4 h-4 bg-yellow-200 border-2 border-yellow-400 rounded shadow-sm"}),n.jsx("span",{className:"font-medium text-yellow-900",children:"Giallo: Entro i limiti accettabili (0,5C)"})]}),n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-4 h-4 bg-red-200 border-2 border-red-400 rounded shadow-sm"}),n.jsx("span",{className:"font-medium text-red-900",children:"Rosso: Incompatibile"})]})]})]}),j.selectedCategories.length===0&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:" Seleziona almeno una categoria per procedere"})]})]}),j.targetTemp&&j.selectedCategories.length>0&&n.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jt,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const T=ee(j.targetTemp,j.selectedCategories);return n.jsxs("div",{className:`mt-2 flex items-center gap-2 ${T.color==="green"?"text-green-600":T.color==="yellow"?"text-yellow-600":"text-red-600"}`,children:[T.type==="compliant"?"":T.type==="warning"?"":"",n.jsx("span",{className:"text-sm",children:T.message})]})})(),j.selectedCategories.length>0&&n.jsx("div",{className:"mt-3 p-2 rounded-lg bg-blue-50 border border-blue-200",children:n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsx("strong",{children:"Suggerimento:"})," ",(()=>{const T=Ut.getOptimalTemperatureSuggestions(j.selectedCategories);return T&&!T.compatible||T?T.message:"Seleziona categorie per ottenere suggerimenti sulle temperature ottimali"})()]})})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(de,{variant:"outline",onClick:()=>{v(!1),V()},children:"Annulla"}),n.jsx(de,{onClick:O,disabled:!j.name||!j.location||!j.targetTemp||j.selectedCategories.length===0,children:y?"Salva Modifiche":"Aggiungi Punto"})]})]}),n.jsx("div",{className:`p-4 rounded-lg ${M&&!k?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${M&&!k?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:c.length}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${M&&!k?"text-green-900":"text-yellow-900"}`,children:["Punti configurati: ",c.length]}),n.jsx("p",{className:`text-sm ${M&&!k?"text-green-800":"text-yellow-800"}`,children:M?k?" Alcuni punti di conservazione non sono in linea con le norme HACCP. Controlla le temperature e le categorie selezionate.":" Tutti i punti hanno i campi obbligatori compilati!":" Devi configurare almeno un punto di conservazione con tutti i campi obbligatori."})]})]})}),Object.keys(w).length>0&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(w).map(([T,F])=>n.jsxs("p",{children:[" ",F]},T))]})})]})},Hb=({formData:e,setFormData:t,currentStep:r,validateStep:i,confirmStep:s,markStepAsUnconfirmed:a,isStepConfirmed:l,canConfirmStep:d})=>{var k,P,R;const[c,h]=K.useState([]),[x,v]=K.useState(!1),[y,m]=K.useState(null),[w,S]=K.useState({}),[j,f]=K.useState({name:"",assignedRole:"",assignedEmployee:"",frequency:""});K.useEffect(()=>{var T;(T=e.tasks)!=null&&T.list&&e.tasks.list.length>0&&h(e.tasks.list)},[e.tasks]);const N=((k=e.conservation)==null?void 0:k.count)||0,C=c.filter(T=>{const F=T.name.toLowerCase(),re=F.includes("rilevamento temperature")||F.includes("rilevamento temperatura")||F.includes("temperature")||F.includes("temperatura")||F.includes("monitoraggio");return console.log(` Task "${T.name}": isTemperatureTask=${re}`),re}).length;console.log(` Temperature tasks count: ${C}, Total tasks: ${c.length}`),console.log(" All tasks:",c),K.useEffect(()=>{const T={...e,tasks:{list:c,count:c.length,temperatureTasksCount:C,conservationPointsCount:N}};t(T)},[c,C,N]);const V=["Giornalmente","Settimanalmente","Mensilmente","Annualmente"],ee=()=>{f({name:"",assignedRole:"",assignedEmployee:"",frequency:""}),m(null)},ce=T=>T?`Rilevamento temperatura ${T.name}`:"Rilevamento temperatura",ne=()=>{var F;const T=((F=e.conservation)==null?void 0:F.points)||[];return console.log(" Conservation points:",T),T},O=T=>c.some(F=>{const re=F.name.toLowerCase(),q=re.includes("rilevamento temperature")||re.includes("rilevamento temperatura")||re.includes("temperature")||re.includes("temperatura")||re.includes("monitoraggio"),le=re.includes(T.id.toString()),oe=re.includes(T.name.toLowerCase());return console.log(` Checking point ${T.id} (${T.name}): task="${F.name}", isTemperatureTask=${q}, containsPointId=${le}, containsPointName=${oe}`),q&&(le||oe)});K.useEffect(()=>{if(x){const F=ne().filter(re=>!O(re));if(F.length>0){const re=F[0];f(q=>({...q,name:ce(re)}))}}},[x]);const J=()=>{if(j.name&&j.assignedRole&&j.frequency){const T={id:Date.now(),name:j.name,assignedRole:j.assignedRole,assignedEmployee:j.assignedEmployee||null,frequency:j.frequency};console.log(" Aggiungendo nuova attivit:",T),h(F=>{const re=[...F,T];return console.log(" Lista attivit aggiornata:",re),re}),ee(),v(!1)}},te=T=>{h(F=>F.filter(re=>re.id!==T))},M=c.length>0&&c.every(T=>T.name&&T.assignedRole&&T.frequency)&&C>=N;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Mansioni e Attivit"}),n.jsx("p",{className:"text-gray-600",children:"Assegna compiti al personale"})]}),(()=>{const T=ne(),F=T.filter(re=>!O(re));return console.log(" Missing tasks check:",{conservationPoints:T.map(re=>({id:re.id,name:re.name})),missingTasks:F.map(re=>({id:re.id,name:re.name})),allTasks:c.map(re=>({name:re.name,assignedRole:re.assignedRole}))}),F.length>0?n.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(En,{className:"h-5 w-5 text-yellow-600"}),n.jsx("h4",{className:"font-medium text-yellow-900",children:"Punti di Conservazione senza Mansioni"})]}),n.jsx("p",{className:"text-sm text-yellow-800 mb-3",children:"I seguenti punti di conservazione necessitano di mansioni di rilevamento temperature:"}),n.jsx("div",{className:"space-y-2",children:F.map(re=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-yellow-100 rounded",children:[n.jsx("span",{className:"text-sm font-medium",children:re.name}),n.jsx(de,{onClick:()=>{v(!0),f(q=>({...q,name:ce(re)}))},size:"sm",className:"bg-yellow-600 hover:bg-yellow-700 text-white",children:"Aggiungi Mansione"})]},re.id))})]}):null})(),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Attivit e Mansioni"}),n.jsxs(de,{onClick:()=>v(!0),variant:"outline",size:"sm",children:[n.jsx(jn,{className:"h-4 w-4 mr-1"}),"Aggiungi Nuova Attivit"]})]}),c.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(e2,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"Nessuna attivit configurata"}),n.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Nuova Attivit" per iniziare'})]}):n.jsx("div",{className:"space-y-3",children:c.map(T=>n.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("h5",{className:"font-medium",children:T.name}),n.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm",children:T.frequency})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium",children:"Assegnato a:"})," ",T.assignedRole,T.assignedEmployee&&n.jsxs("span",{className:"ml-2 text-blue-600",children:["(",T.assignedEmployee,")"]})]}),T.name.toLowerCase().includes("rilevamento temperature")&&n.jsx("div",{className:"mt-2 text-sm text-blue-600",children:" Attivit di monitoraggio temperature"})]}),n.jsx("div",{className:"flex gap-2",children:n.jsx(de,{onClick:()=>te(T.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",children:n.jsx(Yt,{className:"h-4 w-4"})})})]})},T.id))})]}),x&&n.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:"Aggiungi Nuova Attivit"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Attivit *"}),n.jsx(ut,{id:"name",value:j.name,onChange:T=>f(F=>({...F,name:T.target.value})),placeholder:ce(),className:"mt-1"}),n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Suggerimento: ",ce()]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"assignedRole",children:"Assegna rilevamento temperature a: *"}),n.jsxs("select",{id:"assignedRole",value:j.assignedRole,onChange:T=>f(F=>({...F,assignedRole:T.target.value,assignedEmployee:""})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona categoria"}),n.jsx("option",{value:"Amministratore",children:"Amministratore"}),n.jsx("option",{value:"Cuochi",children:"Cuochi"}),n.jsx("option",{value:"Banconisti",children:"Banconisti"}),n.jsx("option",{value:"Camerieri",children:"Camerieri"}),n.jsx("option",{value:"Responsabile",children:"Responsabile"}),n.jsx("option",{value:"Dipendente",children:"Dipendente"})]}),!j.assignedRole&&n.jsx("p",{className:"text-xs text-red-500 mt-1",children:" Seleziona una categoria per procedere"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"assignedEmployee",children:"Dipendente Specifico (Opzionale)"}),n.jsxs("select",{id:"assignedEmployee",value:j.assignedEmployee,onChange:T=>f(F=>({...F,assignedEmployee:T.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",disabled:!j.assignedRole,children:[n.jsx("option",{value:"",children:"Seleziona dipendente specifico"}),(R=(P=e.staff)==null?void 0:P.staffMembers)==null?void 0:R.filter(T=>["Responsabile","Dipendente","Amministratore"].includes(j.assignedRole)?T.role===j.assignedRole:T.category===j.assignedRole).map(T=>n.jsxs("option",{value:T.name,children:[T.name," - ",T.role," (",T.category,")"]},T.id))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"frequency",children:"Frequenza *"}),n.jsxs("select",{id:"frequency",value:j.frequency,onChange:T=>f(F=>({...F,frequency:T.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona frequenza"}),V.map(T=>n.jsx("option",{value:T,children:T},T))]})]})]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(de,{variant:"outline",onClick:()=>{v(!1),ee()},children:"Annulla"}),n.jsx(de,{onClick:J,disabled:!j.name||!j.assignedRole||!j.frequency,children:"Aggiungi Attivit"})]})]}),n.jsx("div",{className:`p-4 rounded-lg ${M?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${M?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:c.length}),n.jsx("div",{children:n.jsxs("p",{className:`font-medium ${M?"text-green-900":"text-yellow-900"}`,children:["Attivit configurate: ",c.length]})})]}),n.jsxs("div",{className:`p-3 rounded-lg ${C>=N?"bg-green-100":"bg-red-100"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(En,{className:`h-4 w-4 ${C>=N?"text-green-600":"text-red-600"}`}),n.jsx("span",{className:`font-medium ${C>=N?"text-green-900":"text-red-900"}`,children:"Validazione Critica: Attivit Monitoraggio Temperature"})]}),n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsxs("p",{className:C>=N?"text-green-800":"text-red-800",children:[n.jsx("strong",{children:"Punti di conservazione:"})," ",N," |",n.jsx("strong",{children:" Attivit temperature:"})," ",C]}),n.jsx("p",{className:C>=N?"text-green-800":"text-red-800",children:C>=N?" Requisito soddisfatto! Ogni punto ha la sua attivit di monitoraggio.":" Devi creare almeno 1 attivit di monitoraggio temperature per ogni punto di conservazione."})]})]})]})}),Object.keys(w).length>0&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(w).map(([T,F])=>n.jsxs("p",{children:[" ",F]},T))]})})]})},Ub=({formData:e,setFormData:t,currentStep:r,validateStep:i,confirmStep:s,markStepAsUnconfirmed:a,isStepConfirmed:l,canConfirmStep:d})=>{const[c,h]=K.useState([]),[x,v]=K.useState(!1),[y,m]=K.useState(null),[w,S]=K.useState({}),[j,f]=K.useState({name:"",type:"",expiryDate:"",position:"",allergens:[]}),N=()=>{var k;return(k=e.conservation)!=null&&k.points&&e.conservation.points.length>0?e.conservation.points:[{id:1,name:"Frigo A",minTemp:2,maxTemp:4},{id:2,name:"Freezer",minTemp:-18,maxTemp:-15},{id:3,name:"Abbattitore",minTemp:0,maxTemp:3}]};K.useEffect(()=>{var k;(k=e.inventory)!=null&&k.products&&e.inventory.products.length>0&&h(e.inventory.products)},[e.inventory]),K.useEffect(()=>{const k={...e,inventory:{products:c,count:c.length}};t(k)},[c]);const C=["Latticini e Formaggi","Carni Fresche","Pesce e Frutti di Mare","Verdure e Ortaggi","Frutta","Prodotti da Forno","Bevande","Altro"],V=[{id:"glutine",name:"Glutine",icon:""},{id:"latte",name:"Latte",icon:""},{id:"uova",name:"Uova",icon:""},{id:"pesce",name:"Pesce",icon:""},{id:"crostacei",name:"Crostacei",icon:""},{id:"frutta_secca",name:"Frutta a guscio",icon:""},{id:"arachidi",name:"Arachidi",icon:""},{id:"soia",name:"Soia",icon:""},{id:"sedano",name:"Sedano",icon:""},{id:"senape",name:"Senape",icon:""},{id:"sesamo",name:"Sesamo",icon:""},{id:"solfiti",name:"Solfiti",icon:""},{id:"lupini",name:"Lupini",icon:""},{id:"molluschi",name:"Molluschi",icon:""}],ee=()=>{f({name:"",type:"",expiryDate:"",position:"",allergens:[]}),m(null)},ce=(k,P)=>{const R=N().find(T=>T.id===parseInt(P));return R?k==="Latticini e Formaggi"&&(R.minTemp>5||R.maxTemp>5)?{compliant:!1,message:"Temperatura troppo alta per latticini"}:k==="Carni Fresche"&&(R.minTemp>7||R.maxTemp>7)?{compliant:!1,message:"Temperatura troppo alta per carni fresche"}:k==="Pesce e Frutti di Mare"&&(R.minTemp>2||R.maxTemp>2)?{compliant:!1,message:"Temperatura troppo alta per pesce"}:{compliant:!0,message:"Posizione conforme HACCP per questo tipo di prodotto"}:{compliant:!1,message:"Posizione non valida"}},ne=()=>{if(j.name&&j.type&&j.expiryDate&&j.position){const k=ce(j.type,j.position);if(y)h(P=>P.map(R=>R.id===y?{...R,...j,compliance:k}:R));else{const P={id:Date.now(),...j,compliance:k};h(R=>[...R,P])}ee(),v(!1)}},O=k=>{h(P=>P.filter(R=>R.id!==k))},J=k=>{const P=c.find(R=>R.id===k);P&&(f({name:P.name,type:P.type,expiryDate:P.expiryDate,position:P.position,allergens:P.allergens||[]}),m(k),v(!0))},te=k=>{f(P=>({...P,allergens:P.allergens.includes(k)?P.allergens.filter(R=>R!==k):[...P.allergens,k]}))},M=c.length>0&&c.every(k=>k.name&&k.type&&k.expiryDate&&k.position);return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Inventario Prodotti"}),n.jsx("p",{className:"text-gray-600",children:"Gestisci prodotti e allergeni"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"font-medium text-gray-900",children:"Prodotti nell'Inventario"}),n.jsxs(de,{onClick:()=>{ee(),v(!0)},variant:"outline",size:"sm",children:[n.jsx(jn,{className:"h-4 w-4 mr-1"}),"Aggiungi Prodotto"]})]}),c.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(hn,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),n.jsx("p",{children:"Nessun prodotto registrato"}),n.jsx("p",{className:"text-sm",children:'Clicca "Aggiungi Prodotto" per iniziare'})]}):n.jsx("div",{className:"space-y-3",children:c.map(k=>n.jsx("div",{className:"border rounded-lg p-4 bg-gray-50",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[n.jsx("h5",{className:"font-medium",children:k.name}),n.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-sm",children:k.type})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Scadenza:"}),n.jsx("p",{className:"font-medium",children:k.expiryDate})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Posizione:"}),n.jsx("p",{className:"font-medium",children:k.position})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"Allergeni:"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:k.allergens.map(P=>{const R=V.find(T=>T.id===P);return R?n.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded-full text-xs",children:[R.icon," ",R.name]},P):null})})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-600",children:"HACCP:"}),n.jsxs("div",{className:`flex items-center gap-1 ${k.compliance.compliant?"text-green-600":"text-red-600"}`,children:[k.compliance.compliant?"":"",n.jsx("span",{className:"text-xs",children:k.compliance.message})]})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(de,{onClick:()=>J(k.id),variant:"outline",size:"sm",className:"text-blue-600 hover:text-blue-700",title:"Modifica prodotto",children:n.jsx(xi,{className:"h-4 w-4"})}),n.jsx(de,{onClick:()=>O(k.id),variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",title:"Elimina prodotto",children:n.jsx(Yt,{className:"h-4 w-4"})})]})]})},k.id))})]}),x&&n.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[n.jsx("h4",{className:"font-medium text-gray-900 mb-4",children:y?"Modifica Prodotto":"Aggiungi Nuovo Prodotto"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"name",children:"Nome Prodotto *"}),n.jsx(ut,{id:"name",value:j.name,onChange:k=>f(P=>({...P,name:k.target.value})),placeholder:"Es. Acqua nat 0,5",className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"type",children:"Tipologia *"}),n.jsxs("select",{id:"type",value:j.type,onChange:k=>f(P=>({...P,type:k.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona tipologia"}),C.map(k=>n.jsx("option",{value:k,children:k},k))]})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"expiryDate",children:"Data di Scadenza *"}),n.jsx(ut,{id:"expiryDate",type:"date",value:j.expiryDate,onChange:k=>f(P=>({...P,expiryDate:k.target.value})),className:"mt-1"})]}),n.jsxs("div",{children:[n.jsx(Ue,{htmlFor:"position",children:"Posizione *"}),n.jsxs("select",{id:"position",value:j.position,onChange:k=>f(P=>({...P,position:k.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleziona posizione"}),N().map(k=>n.jsxs("option",{value:k.id,children:[k.name," (",k.minTemp,"C - ",k.maxTemp,"C)"]},k.id))]})]})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(Ue,{children:"Allergeni"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:V.map(k=>n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:j.allergens.includes(k.id),onChange:()=>te(k.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),n.jsxs("span",{className:"text-sm",children:[k.icon," ",k.name]})]},k.id))})]}),j.type&&j.position&&n.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-gray-50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(En,{className:"h-4 w-4"}),n.jsx("span",{className:"font-medium",children:"Validazione HACCP:"})]}),(()=>{const k=ce(j.type,j.position);return n.jsxs("div",{className:`mt-2 flex items-center gap-2 ${k.compliant?"text-green-600":"text-red-600"}`,children:[k.compliant?"":"",n.jsx("span",{className:"text-sm",children:k.message})]})})()]}),n.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[n.jsx(de,{variant:"outline",onClick:()=>{v(!1),ee()},children:"Annulla"}),n.jsx(de,{onClick:ne,disabled:!j.name||!j.type||!j.expiryDate||!j.position,children:y?"Salva Modifiche":"Aggiungi Prodotto"})]})]}),n.jsx("div",{className:`p-4 rounded-lg ${M?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${M?"bg-green-500":"bg-yellow-500"} text-white text-sm font-bold`,children:c.length}),n.jsxs("div",{children:[n.jsxs("p",{className:`font-medium ${M?"text-green-900":"text-yellow-900"}`,children:["Prodotti registrati: ",c.length]}),n.jsx("p",{className:`text-sm ${M?"text-green-800":"text-yellow-800"}`,children:M?" Tutti i prodotti hanno i campi obbligatori compilati!":" Devi registrare almeno un prodotto con tutti i campi obbligatori."})]})]})}),Object.keys(w).length>0&&n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsxs("div",{className:"text-sm text-red-800",children:[n.jsx("p",{className:"font-medium",children:" Errori di validazione:"}),Object.entries(w).map(([k,P])=>n.jsxs("p",{children:[" ",P]},k))]})})]})},Vb=(e,t)=>{const r=parseFloat(e);if(isNaN(r))return{compliant:!1,message:"Temperatura non valida"};if(t.length>0){const i=Ut.tolerance;let s=!1;for(let d=0;d<t.length;d++){for(let c=d+1;c<t.length;c++){const h=Ut.categories.find(v=>v.id===t[d]),x=Ut.categories.find(v=>v.id===t[c]);if(h&&x){const v=h.minTemp-i,y=h.maxTemp+i,m=x.minTemp-i,w=x.maxTemp+i;if(y<m||w<v){s=!0;break}}}if(s)break}if(s)return{compliant:!1,message:"Categorie incompatibili selezionate"};let a=!1,l=!1;for(const d of t){const c=Ut.categories.find(h=>h.id===d);if(c){if(r>=c.minTemp&&r<=c.maxTemp){a=!0;break}const h=c.minTemp-i,x=c.maxTemp+i;if(r>=h&&r<=x){l=!0;break}}}return a?{compliant:!0,message:"Conforme HACCP"}:l?{compliant:!0,message:"Temperatura impostata entro i limiti accettabili (0,5C di differenza)"}:{compliant:!1,message:"Fuori range HACCP per le categorie selezionate"}}return{compliant:!0,message:"Conforme HACCP"}},ps=[{id:"business",title:"Informazioni Attivit",description:"Configura i dati base della tua attivit",icon:ra,component:Rb},{id:"departments",title:"Reparti",description:"Organizza la struttura operativa",icon:ra,component:Bb},{id:"staff",title:"Staff e Ruoli",description:"Registra il personale e assegna responsabilit",icon:mi,component:qb},{id:"conservation",title:"Punti di Conservazione",description:"Configura frigoriferi e aree di stoccaggio",icon:Jt,component:$b},{id:"tasks",title:"Mansioni e Attivit",description:"Assegna compiti al personale",icon:e2,component:Hb},{id:"inventory",title:"Inventario Prodotti",description:"Gestisci prodotti e allergeni",icon:hn,component:Ub}];function Gb({isOpen:e,onClose:t,onComplete:r}){const[i,s]=K.useState(0),a=O=>{console.log(` setCurrentStep chiamato: ${i}  ${O}`),console.log(" Stack trace:",new Error().stack),s(O)},[l,d]=K.useState(new Set),[c,h]=K.useState(new Set),[x,v]=K.useState({business:{},departments:{},staff:{},conservation:{},tasks:{},inventory:{}}),y=(O,J)=>{var M,k,P,R,T,F,re,q,le,oe,Pe,z,U,Q,G,ae,he,xe,we,Be,He,Qe,Ke;const te={};if(O===0&&((k=(M=J.business)==null?void 0:M.name)!=null&&k.trim()||(te.businessName="Il nome attivit  obbligatorio"),(R=(P=J.business)==null?void 0:P.address)!=null&&R.trim()||(te.address="L'indirizzo  obbligatorio"),(F=(T=J.business)==null?void 0:T.email)!=null&&F.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(J.business.email)||(te.email="Inserisci una email valida (formato: nome@dominio.com)"):te.email="L'email  obbligatoria",(q=(re=J.business)==null?void 0:re.name)!=null&&q.trim()&&J.business.name.trim().length<3&&(te.businessName="Il nome attivit deve essere di almeno 3 caratteri"),(oe=(le=J.business)==null?void 0:le.address)!=null&&oe.trim()&&J.business.address.trim().length<10&&(te.address="L'indirizzo deve essere di almeno 10 caratteri"),(z=(Pe=J.business)==null?void 0:Pe.name)!=null&&z.trim()&&J.business.name.trim().toLowerCase().length<3&&(te.businessName="Il nome attivit deve essere di almeno 3 caratteri"),!((Q=(U=J.business)==null?void 0:U.phone)!=null&&Q.trim())&&!((ae=(G=J.business)==null?void 0:G.email)!=null&&ae.trim())&&(te.contactInfo="Devi fornire almeno un metodo di contatto (telefono o email)")),O===1){const ke=(((he=J.departments)==null?void 0:he.list)||[]).filter(I=>I.enabled);if(ke.length<4)te.departments="Devi attivare almeno 4 reparti per procedere";else{ke.forEach((be,ie)=>{var ue;(!((ue=be.name)!=null&&ue.trim())||be.name.trim().length<2)&&(te[`department_${ie}_name`]="Nome reparto deve essere di almeno 2 caratteri")});const I=ke.map(be=>be.name.toLowerCase().trim()),je=new Set(I);I.length!==je.size&&(te.departmentNames="I nomi dei reparti devono essere unici")}}if(O===2){const tt=((xe=J.staff)==null?void 0:xe.staffMembers)||[];if(tt.length===0)te.staff="Devi aggiungere almeno un membro dello staff";else{tt.forEach((je,be)=>{var ue;(ue=je.fullName)!=null&&ue.trim()?je.fullName.trim().length<3&&(te[`staff_${be}_name`]="Nome deve essere di almeno 3 caratteri"):te[`staff_${be}_name`]="Nome obbligatorio",je.role?["Amministratore","Responsabile","Dipendente","Collaboratore Occasionale / Part-time"].includes(je.role)||(te[`staff_${be}_role`]="Ruolo non valido - seleziona un ruolo valido"):te[`staff_${be}_role`]="Ruolo obbligatorio";const ie=je.categories&&je.categories.length>0?je.categories:je.category?[je.category]:[];if(ie.length===0)te[`staff_${be}_category`]="Categoria obbligatoria";else{const Ae=["Cuochi","Banconisti","Camerieri","Social & Media Manager","Amministratore","Altro"];ie.forEach(Ie=>{Ae.includes(Ie)||(te[`staff_${be}_category`]="Categoria non valida - seleziona una categoria valida")})}});const ke=tt.map(je=>je.fullName.toLowerCase().trim()),I=new Set(ke);ke.length!==I.size&&(te.staffNames="I nomi dei membri dello staff devono essere unici")}}if(O===3){const tt=((we=J.conservation)==null?void 0:we.points)||[];if(tt.length===0)te.conservation="Devi aggiungere almeno un punto di conservazione";else{tt.forEach((je,be)=>{var ie,ue;if((ie=je.name)!=null&&ie.trim()?je.name.trim().length<2&&(te[`conservation_${be}_name`]="Nome deve essere di almeno 2 caratteri"):te[`conservation_${be}_name`]="Nome obbligatorio",je.location?(((ue=J.departments)==null?void 0:ue.list)||[]).find(Ge=>Ge.name===je.location&&Ge.enabled)||(te[`conservation_${be}_location`]="Posizione non valida - seleziona un reparto attivo"):te[`conservation_${be}_location`]="Posizione obbligatoria",!je.targetTemp)te[`conservation_${be}_temperature`]="Temperatura target obbligatoria";else{const Ae=parseFloat(je.targetTemp);isNaN(Ae)&&(te[`conservation_${be}_temperature`]="Temperatura non valida")}if(!je.selectedCategories||je.selectedCategories.length===0)te[`conservation_${be}_categories`]="Categorie prodotti obbligatorie";else{const Ae=["fresh_dairy","fresh_meat","fresh_fish","fresh_produce","fresh_fruits","frozen","deep_frozen","dry_goods","hot_holding","chilled_ready"];if(je.selectedCategories.forEach(Ie=>{Ae.includes(Ie)||(te[`conservation_${be}_categories`]="Categoria non valida - seleziona categorie valide")}),je.targetTemp&&je.selectedCategories.length>0){const Ie=Vb(je.targetTemp,je.selectedCategories);Ie.compliant||(te[`conservation_${be}_haccp`]=`Non conforme HACCP: ${Ie.message}`)}}});const ke=tt.map(je=>je.name.toLowerCase().trim()),I=new Set(ke);ke.length!==I.size&&(te.conservationNames="I nomi dei punti di conservazione devono essere unici")}}if(O===4){const tt=((Be=J.tasks)==null?void 0:Be.list)||[];if(tt.length===0)te.tasks="Devi aggiungere almeno un'attivit";else{tt.forEach((ie,ue)=>{var Ae;(Ae=ie.name)!=null&&Ae.trim()?ie.name.trim().length<5&&(te[`task_${ue}_name`]="Nome attivit deve essere di almeno 5 caratteri"):te[`task_${ue}_name`]="Nome attivit obbligatorio",ie.assignedRole||(te[`task_${ue}_assigned`]="Assegnazione obbligatoria"),ie.frequency?["Giornalmente","Settimanalmente","Mensilmente","Annualmente"].includes(ie.frequency)||(te[`task_${ue}_frequency`]="Frequenza non valida - seleziona una frequenza valida"):te[`task_${ue}_frequency`]="Frequenza obbligatoria"});const ke=((He=J.conservation)==null?void 0:He.points)||[];tt.filter(ie=>{const ue=ie.name.toLowerCase();return ue.includes("rilevamento temperature")||ue.includes("rilevamento temperatura")||ue.includes("temperature")||ue.includes("temperatura")||ue.includes("monitoraggio")}).length<ke.length&&(te.temperatureTasks=`Devi creare almeno ${ke.length} attivit di monitoraggio temperature (una per ogni punto di conservazione)`);const je=tt.map(ie=>ie.name.toLowerCase().trim()),be=new Set(je);je.length!==be.size&&(te.taskNames="I nomi delle attivit devono essere unici")}}if(O===5){const tt=((Qe=J.inventory)==null?void 0:Qe.products)||[];if(tt.length===0)te.inventory="Devi aggiungere almeno un prodotto";else{tt.forEach((be,ie)=>{var ue;if((ue=be.name)!=null&&ue.trim()?be.name.trim().length<2&&(te[`product_${ie}_name`]="Nome prodotto deve essere di almeno 2 caratteri"):te[`product_${ie}_name`]="Nome prodotto obbligatorio",be.type?["Latticini e Formaggi","Carni Fresche","Pesce e Frutti di Mare","Verdure e Ortaggi","Frutta","Prodotti da Forno","Bevande","Altro"].includes(be.type)||(te[`product_${ie}_type`]="Tipologia non valida - seleziona una tipologia valida"):te[`product_${ie}_type`]="Tipologia obbligatoria",!be.expiryDate)te[`product_${ie}_expiry`]="Data scadenza obbligatoria";else{const Ae=new Date(be.expiryDate),Ie=new Date;Ie.setHours(0,0,0,0),Ae<Ie&&(te[`product_${ie}_expiry`]="La data di scadenza deve essere nel futuro")}be.position||(te[`product_${ie}_position`]="Posizione obbligatoria")});const ke=((Ke=J.conservation)==null?void 0:Ke.points)||[];ke.length===0?te.conservationRequired="Devi prima configurare i punti di conservazione per assegnare i prodotti":tt.forEach((be,ie)=>{ke.find(Ae=>Ae.id===parseInt(be.position))||(te[`product_${ie}_position`]="Posizione non valida - seleziona un punto di conservazione esistente")});const I=tt.map(be=>be.name.toLowerCase().trim()),je=new Set(I);I.length!==je.size&&(te.productNames="I nomi dei prodotti devono essere unici")}}return te},m=O=>{const J=y(O,x);return Object.keys(J).length===0},w=O=>{const J=y(O,x);return Object.keys(J).length===0},S=O=>c.has(O),j=O=>(console.log(` confirmStep chiamato per step ${O}`),console.log(` Stato prima: currentStep=${i}, confirmedSteps=${Array.from(c)}`),m(O)?(console.log(` Step ${O} valido, marcando come confermato`),h(J=>new Set([...J,O])),console.log(` Step ${O} confermato con successo`),!0):(console.log(` Step ${O} non valido`),!1)),f=O=>{h(J=>{const te=new Set(J);return te.delete(O),te})},N=()=>{const O={currentStep:i,completedSteps:Array.from(l),confirmedSteps:Array.from(c),formData:x,lastActivity:new Date().toISOString()};localStorage.setItem("haccp-onboarding-new",JSON.stringify(O))},C=()=>{if(console.log(" nextStep chiamato"),console.log(` Stato: currentStep=${i}`),i<ps.length-1){const O=y(i,x);Object.keys(O).length===0?(console.log(` Step ${i} valido, navigando al prossimo`),d(J=>new Set([...J,ps[i].id])),a(i+1),N(),console.log(` Navigazione completata a step ${i+1}`)):(console.log(` Step ${i} non valido:`,O),console.log(" Errori dettagliati:",Object.entries(O).map(([J,te])=>`${J}: ${te}`)),console.log(" Errori completi:",O),alert(`Ci sono errori di validazione:
${Object.values(O).join(`
`)}`))}else console.log(" Ultimo step raggiunto, navigazione non possibile")},V=()=>{i>0&&(a(i-1),N())},ee=()=>{const O=y(i,x);Object.keys(O).length===0?(console.log(" Ultimo step valido, completando onboarding"),d(J=>new Set([...J,ps[i].id])),N(),r&&r(x)):(console.log(" Ultimo step non valido:",O),alert(`Ci sono errori di validazione:
${Object.values(O).join(`
`)}`))};if(qa.useEffect(()=>{const O=localStorage.getItem("haccp-onboarding-new");if(O)try{const J=JSON.parse(O);a(J.currentStep||0),d(new Set(J.completedSteps||[])),h(new Set(J.confirmedSteps||[])),v(J.formData||x)}catch(J){console.warn("Errore nel caricamento progresso onboarding:",J)}},[]),!e)return null;const ce=ps[i].component,ne=i===ps.length-1;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-6 border-b",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Configurazione Iniziale HACCP"}),n.jsx(de,{variant:"outline",onClick:t,children:"Chiudi"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[n.jsxs("span",{children:["Progresso: ",Math.round(l.size/ps.length*100),"%"]}),n.jsxs("span",{children:["Step ",i+1," di ",ps.length]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${l.size/ps.length*100}%`}})})]}),n.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:ps.map((O,J)=>n.jsxs("div",{className:"flex items-center",children:[J>0&&n.jsx("div",{className:"w-8 h-px bg-gray-300 mx-2"}),n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${l.has(O.id)?"bg-green-500 text-white":J===i?"bg-blue-500 text-white":"bg-gray-200 text-gray-600"}`,children:l.has(O.id)?n.jsx(bn,{className:"h-4 w-4"}):J+1})]},O.id))})]}),n.jsx("div",{className:"p-6",children:n.jsx(ce,{formData:x,setFormData:v,currentStep:i,setCurrentStep:a,onComplete:r,validateStep:y,confirmStep:j,markStepAsUnconfirmed:f,isStepConfirmed:S,canConfirmStep:w})}),n.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-between",children:[n.jsxs(de,{variant:"outline",onClick:V,disabled:i===0,children:[n.jsx(By,{className:"h-4 w-4 mr-2"}),"Precedente"]}),n.jsx("div",{className:"flex gap-2",children:ne?n.jsxs(de,{onClick:ee,className:"bg-green-600 hover:bg-green-700",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Completa Configurazione"]}):n.jsxs(de,{onClick:C,className:"bg-blue-600 hover:bg-blue-700",children:["Avanti",n.jsx(K1,{className:"h-4 w-4 ml-2"})]})})]})]})})}function Wb({isOpen:e,onClose:t,missingRequirements:r=[],suggestions:i=[],onFixRequirement:s}){if(!e)return null;const a=l=>{s&&s(l),t()};return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:t}),n.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white rounded-t-2xl shadow-2xl transform transition-transform duration-300 ease-out",children:[n.jsx("div",{className:"flex justify-center pt-3 pb-2",children:n.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),n.jsx("div",{className:"px-6 pb-4 border-b",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(En,{className:"h-6 w-6 text-orange-500"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Prerequisiti Richiesti"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completa questi passaggi per accedere alla sezione"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:n.jsx(Yt,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"px-6 py-4 max-h-96 overflow-y-auto",children:[n.jsx("div",{className:"space-y-4",children:r.map((l,d)=>{const c=i.find(h=>h.requirement===l);return n.jsx(We,{className:"border-orange-200 bg-orange-50",children:n.jsx(Ze,{className:"p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center flex-shrink-0 mt-0.5",children:n.jsx("span",{className:"text-sm font-medium text-orange-600",children:d+1})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-orange-900 mb-2",children:(c==null?void 0:c.action)||`Completa ${l}`}),(c==null?void 0:c.description)&&n.jsx("p",{className:"text-sm text-orange-800 mb-3",children:c.description}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(de,{size:"sm",onClick:()=>a(l),className:"bg-orange-600 hover:bg-orange-700 text-white",children:[n.jsx(K1,{className:"h-4 w-4 mr-1"}),"Risolvi"]}),n.jsxs("div",{className:"flex items-center gap-1 text-xs text-orange-700",children:[n.jsx(Ni,{className:"h-3 w-3"}),n.jsxs("span",{children:["Priorit: ",(c==null?void 0:c.priority)==="high"?"Alta":"Media"]})]})]})]})]})})},d)})}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ni,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900 mb-1",children:"Perch questi prerequisiti sono importanti?"}),n.jsx("p",{className:"text-sm text-blue-800",children:"I prerequisiti garantiscono che la tua struttura HACCP sia completa e funzionale. Ogni elemento contribuisce alla sicurezza alimentare e alla compliance normativa."})]})]})})]}),n.jsx("div",{className:"px-6 py-4 border-t bg-gray-50",children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx(de,{variant:"outline",onClick:t,className:"flex-1",children:"Chiudi"}),n.jsxs(de,{onClick:()=>{s&&s("onboarding"),t()},className:"flex-1",children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Avvia Onboarding"]})]})})]})]})}function Jb(){var be;const[e,t]=K.useState("dashboard"),[r,i]=K.useState([]),[s,a]=K.useState([]),[l,d]=K.useState([]),[c,h]=K.useState([]),[x,v]=K.useState([]),[y,m]=K.useState([]),[w,S]=K.useState([]),[j,f]=K.useState(null),[N,C]=K.useState([]),[V,ee]=K.useState(!1),[ce,ne]=K.useState(!0),[O,J]=K.useState(()=>{const ie=localStorage.getItem("haccp-last-check");return ie?JSON.parse(ie):{}}),[te,M]=K.useState([]);K.useState(()=>localStorage.getItem("haccp-last-sync")||null),K.useState(()=>localStorage.getItem("haccp-company-id")||"demo-pizzeria");const[k,P]=K.useState(!1),[R,T]=K.useState(!1),[F,re]=K.useState(!1),[q,le]=K.useState({users:[],departments:[],refrigerators:[],staff:[],cleaning:[],inventory:[]}),oe={isOnboardingComplete:!0,currentSectionAccess:{isEnabled:!0,message:null},missingRequirements:[],onboardingProgress:100,canAccessSection:()=>({isEnabled:!0,message:null}),areRequirementsMet:()=>!0,getMissingRequirements:()=>[],getNextOnboardingStep:()=>null,getOnboardingProgress:()=>100,validateField:()=>null,getEducationalMessage:()=>"",getSuggestions:()=>[],validateConservationPoint:()=>({isValid:!0,errors:[],warnings:[]}),getEducationalMessages:()=>[],onboardingStatus:{isComplete:!0,progress:100,nextStep:null},sectionAccess:{isEnabled:!0,message:null}},Pe=()=>{const ie=JSON.parse(localStorage.getItem("haccp-users")||"[]"),ue=JSON.parse(localStorage.getItem("haccp-departments")||"[]"),Ae=JSON.parse(localStorage.getItem("haccp-refrigerators")||"[]"),Ie=JSON.parse(localStorage.getItem("haccp-staff")||"[]"),Ge=JSON.parse(localStorage.getItem("haccp-cleaning")||"[]"),it=JSON.parse(localStorage.getItem("haccp-products")||"[]");le({users:ie,departments:ue,refrigerators:Ae,staff:Ie,cleaning:Ge,inventory:it})};K.useEffect(()=>{},[]),K.useEffect(()=>{const ie=Ib();Object.entries(ie).forEach(([De,Oe])=>{localStorage.getItem(De)||localStorage.setItem(De,Oe)}),Tb(),Pe();const ue=localStorage.getItem("haccp-temperatures"),Ae=localStorage.getItem("haccp-cleaning"),Ie=localStorage.getItem("haccp-refrigerators"),Ge=localStorage.getItem("haccp-staff"),it=localStorage.getItem("haccp-products"),A=localStorage.getItem("haccp-departments"),H=localStorage.getItem("haccp-product-labels"),ye=localStorage.getItem("haccp-users");localStorage.getItem("haccp-current-user");try{ue&&i(JSON.parse(ue)),Ae&&a(JSON.parse(Ae)),Ie&&d(JSON.parse(Ie)),Ge&&h(JSON.parse(Ge)),it&&v(JSON.parse(it)),A&&m(JSON.parse(A)),H&&S(JSON.parse(H))}catch(De){console.warn("Errore nel parsing dei dati:",De),localStorage.removeItem("haccp-temperatures"),localStorage.removeItem("haccp-cleaning"),localStorage.removeItem("haccp-refrigerators"),localStorage.removeItem("haccp-staff"),localStorage.removeItem("haccp-products"),localStorage.removeItem("haccp-departments"),localStorage.removeItem("haccp-product-labels")}if(ye)try{C(JSON.parse(ye))}catch(De){console.warn("Errore nel parsing users:",De),localStorage.removeItem("haccp-users")}else{const De={id:"admin_001",name:"Admin",pin:"0000",role:"admin",department:"Amministrazione",createdAt:new Date().toISOString()};C([De]),localStorage.setItem("haccp-users",JSON.stringify([De]))}const Je=localStorage.getItem("haccp-show-chat-icon");if(Je!==null)try{ne(JSON.parse(Je))}catch(De){console.warn("Errore nel parsing chat icon pref:",De),localStorage.removeItem("haccp-show-chat-icon")}const Fe=De=>{if(De.key==="haccp-show-chat-icon")try{ne(JSON.parse(De.newValue))}catch(Oe){console.warn("Errore nel parsing chat icon pref change:",Oe)}};return window.addEventListener("storage",Fe),()=>{window.removeEventListener("storage",Fe)}},[]),K.useEffect(()=>{},[x,r,s,c,w]),K.useEffect(()=>{localStorage.setItem("haccp-temperatures",JSON.stringify(r))},[r]),K.useEffect(()=>{localStorage.setItem("haccp-refrigerators",JSON.stringify(l))},[l]),K.useEffect(()=>{localStorage.setItem("haccp-cleaning",JSON.stringify(s))},[s]),K.useEffect(()=>{localStorage.setItem("haccp-staff",JSON.stringify(c))},[c]),K.useEffect(()=>{localStorage.setItem("haccp-products",JSON.stringify(x))},[x]),K.useEffect(()=>{localStorage.setItem("haccp-departments",JSON.stringify(y))},[y]),K.useEffect(()=>{localStorage.setItem("haccp-product-labels",JSON.stringify(w))},[w]);const z=ie=>{f(ie),ee(!1),localStorage.setItem("haccp-current-user",JSON.stringify(ie));const ue={id:Date.now(),timestamp:new Date().toISOString(),user:ie.id,userName:ie.name,type:"login",description:`Accesso di ${ie.name}`};try{const Ae=JSON.parse(localStorage.getItem("haccp-actions")||"[]");Ae.push(ue),localStorage.setItem("haccp-actions",JSON.stringify(Ae))}catch(Ae){console.warn("Errore nel parsing actions:",Ae),localStorage.removeItem("haccp-actions")}},U=()=>{const ie={dashboard:0,cleaning:0,inventory:0,labels:0,staff:0,refrigerators:0},ue=O.cleaning||"2000-01-01T00:00:00.000Z",Ae=s.filter(nt=>new Date(nt.createdAt||nt.timestamp)>new Date(ue)).length;ie.cleaning+=Ae;const Ie=O.inventory||"2000-01-01T00:00:00.000Z",Ge=new Date,it=new Date(Ge.getTime()+3*24*60*60*1e3),A=new Date(Ge.getTime()+4*24*60*60*1e3),H=x.filter(nt=>{const at=new Date(nt.expiryDate);return at>=it&&at<=A}).length,ye=x.filter(nt=>new Date(nt.createdAt||nt.addedDate)>new Date(Ie)).length;ie.inventory+=H+ye;const Je=O.labels||"2000-01-01T00:00:00.000Z",Fe=w.filter(nt=>new Date(nt.createdAt||"2000-01-01")>new Date(Je)).length;ie.labels+=Fe;const De=O.staff||"2000-01-01T00:00:00.000Z",Oe=c&&Array.isArray(c)?c.filter(nt=>nt&&new Date(nt.addedDate||nt.createdAt||"2000-01-01")>new Date(De)).length:0;ie.staff+=Oe;const _t=O.refrigerators||"2000-01-01T00:00:00.000Z",mt=r.filter(nt=>{const Nt=new Date(nt.timestamp)>new Date(_t),gt=nt.status==="warning"||nt.status==="danger";return Nt&&gt}).length;ie.refrigerators+=mt;const Ct=x.filter(nt=>{const at=new Date(nt.expiryDate),Nt=new Date;return at.setHours(0,0,0,0),Nt.setHours(0,0,0,0),at.getTime()===Nt.getTime()}).length;return ie.dashboard=Ct+mt,ie},Q=ie=>{const ue={...O,[ie]:new Date().toISOString()};J(ue),localStorage.setItem("haccp-last-check",JSON.stringify(ue))},G=U(),ae=({hasNotification:ie,className:ue=""})=>ie?n.jsx("div",{className:`absolute -top-1 -right-1 w-3 h-3 bg-blue-500 rounded-full ${ue}`}):null,he=(ie,ue,Ae=null)=>{const Ie={id:Ae||`${ie}_${Date.now()}`,type:ie,data:ue,timestamp:new Date().toISOString(),userId:j==null?void 0:j.id,userName:j==null?void 0:j.name};M(Ge=>[...Ge.filter(A=>!(A.type===ie&&A.id===Ie.id)),Ie])},xe=(ie,ue,Ae)=>{console.log(" TRACKING:",ie,"with",(ue==null?void 0:ue.length)||0,"items"),he(ie,ue,Ae)};K.useEffect(()=>{x.length>0&&j&&(console.log(" Products changed:",x.length,"items"),xe("inventory",x,"auto-inventory"))},[x,j]),K.useEffect(()=>{r.length>0&&j&&(console.log(" Temperatures changed:",r.length,"items"),xe("temperatures",r,"auto-temperatures"))},[r,j]),K.useEffect(()=>{s.length>0&&j&&(console.log(" Cleaning changed:",s.length,"items"),xe("cleaning",s,"auto-cleaning"))},[s,j]),K.useEffect(()=>{c.length>0&&j&&(console.log(" Staff changed:",c.length,"items"),xe("staff",c,"auto-staff"))},[c,j]),K.useEffect(()=>{console.log(" PENDING CHANGES:",te.length,te)},[te]);const we=()=>{if(j){const ie={id:Date.now(),timestamp:new Date().toISOString(),user:j.id,userName:j.name,type:"logout",description:`Disconnessione di ${j.name}`};try{const ue=JSON.parse(localStorage.getItem("haccp-actions")||"[]");ue.push(ie),localStorage.setItem("haccp-actions",JSON.stringify(ue))}catch(ue){console.warn("Errore nel parsing actions logout:",ue),localStorage.removeItem("haccp-actions")}}f(null),t("dashboard"),localStorage.removeItem("haccp-current-user")},Be=ie=>{const ue={...ie,id:`user_${Date.now()}`,createdAt:new Date().toISOString()},Ae=[...N,ue];C(Ae),localStorage.setItem("haccp-users",JSON.stringify(Ae));const Ie={id:`staff_${Date.now()}`,name:ie.name,role:ie.role==="admin"?"Amministratore":ie.role==="dipendente"?"Dipendente":ie.role==="responsabile"?"Responsabile":ie.role==="collaboratore"?"Collaboratore Occasionale":"Dipendente",department:ie.department||"Non assegnato",certification:"",notes:`Utente registrato il ${new Date().toLocaleDateString("it-IT")}`,addedDate:new Date().toLocaleDateString("it-IT"),addedTime:new Date().toLocaleString("it-IT"),isRegisteredUser:!0,userId:ue.id},Ge=[...c,Ie];h(Ge),localStorage.setItem("haccp-staff",JSON.stringify(Ge))},He=()=>j&&j.role==="admin",Ke=(()=>{const ie=r.filter(it=>it.status==="ok").length,ue=r.filter(it=>it.status==="danger").length,Ae=s.filter(it=>!it.completed).length,Ie=new Date,Ge=x.filter(it=>{const H=new Date(it.expiryDate)-Ie,ye=Math.ceil(H/(1e3*60*60*24));return ye<=7&&ye>=0}).length;return{temperatureOk:ie,temperatureProblems:ue,cleaningPending:Ae,expiringToday:Ge}})(),tt=()=>{const ie={temperatures:r,cleaningTasks:s,staff:c,products:x,departments:y,productLabels:w,exportDate:new Date().toISOString()},ue=new Blob([JSON.stringify(ie,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(ue),Ie=document.createElement("a");Ie.href=Ae,Ie.download=`haccp-data-${new Date().toISOString().split("T")[0]}.json`,Ie.click(),URL.revokeObjectURL(Ae)},ke=ie=>{const ue=ie.target.files[0];if(!ue)return;const Ae=new FileReader;Ae.onload=Ie=>{try{const Ge=JSON.parse(Ie.target.result);Ge.temperatures&&(i(Ge.temperatures),localStorage.setItem("haccp-temperatures",JSON.stringify(Ge.temperatures))),Ge.cleaningTasks&&(a(Ge.cleaningTasks),localStorage.setItem("haccp-cleaning",JSON.stringify(Ge.cleaningTasks))),Ge.staff&&(h(Ge.staff),localStorage.setItem("haccp-staff",JSON.stringify(Ge.staff))),Ge.products&&(v(Ge.products),localStorage.setItem("haccp-products",JSON.stringify(Ge.products))),Ge.departments&&(m(Ge.departments),localStorage.setItem("haccp-departments",JSON.stringify(Ge.departments))),Ge.productLabels&&(S(Ge.productLabels),localStorage.setItem("haccp-product-labels",JSON.stringify(Ge.productLabels))),alert("Dati importati con successo!")}catch(Ge){alert("Errore durante l'importazione del file"),console.error("Import error:",Ge)}},Ae.readAsText(ue)};K.useEffect(()=>{if(j&&!R){if(Db()){T(!0);return}const ie=localStorage.getItem("haccp-onboarding");if(ie&&ie!=="undefined"&&ie!=="null"&&ie!=="[object Object]")try{const ue=JSON.parse(ie);if(ue&&typeof ue=="object"&&ue.completed){T(!0);return}}catch(ue){console.warn("Errore nel parsing onboarding:",ue),localStorage.removeItem("haccp-onboarding")}P(!0)}},[j,R]);const I=ie=>{var Ae,Ie,Ge,it,A;P(!1),T(!0);const ue={...ie,completed:!0,completedAt:new Date().toISOString()};if(localStorage.setItem("haccp-onboarding",JSON.stringify(ue)),ie.business&&localStorage.setItem("haccp-business-info",JSON.stringify(ie.business)),(Ae=ie.departments)!=null&&Ae.list){const H=ie.departments.list.map(ye=>({id:Date.now()+Math.random(),name:ye,createdAt:new Date().toISOString()}));m(H),localStorage.setItem("haccp-departments",JSON.stringify(H))}if((Ie=ie.staff)!=null&&Ie.staffMembers){const H=ie.staff.staffMembers.map(ye=>({...ye,id:ye.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));h(H),localStorage.setItem("haccp-staff",JSON.stringify(H))}if((Ge=ie.conservation)!=null&&Ge.points){const H=ie.conservation.points.map(ye=>({...ye,id:ye.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));d(H),localStorage.setItem("haccp-refrigerators",JSON.stringify(H))}if((it=ie.tasks)!=null&&it.list){const H=ie.tasks.list.map(ye=>({...ye,id:ye.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));a(H),localStorage.setItem("haccp-cleaning",JSON.stringify(H))}if((A=ie.inventory)!=null&&A.products){const H=ie.inventory.products.map(ye=>({...ye,id:ye.id||Date.now()+Math.random(),createdAt:new Date().toISOString()}));v(H),localStorage.setItem("haccp-products",JSON.stringify(H))}ie.preset&&localStorage.setItem("haccp-presets",JSON.stringify({selected:ie.preset,applied:!0,appliedAt:new Date().toISOString()})),Pe()};K.useEffect(()=>{},[]);const je=ie=>{if(ie==="onboarding")P(!0);else switch(ie){case"departments":t("staff");break;case"refrigerators":t("refrigerators");break;case"staff":t("staff");break;default:t("dashboard")}};return j?n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Og,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business HACCP Manager"}),n.jsxs("p",{className:"text-gray-600",children:["Benvenuto, ",n.jsxs("span",{className:"font-['Dancing_Script'] font-semibold text-2xl text-purple-600",children:[j.name," - ",j.role==="admin"?"Admin":"Dipendente"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[!1,n.jsxs(de,{onClick:tt,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-4 w-4"}),"Esporta"]}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(de,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(gc,{className:"h-4 w-4"}),n.jsx("span",{children:"Importa"})]})}),n.jsx("input",{type:"file",accept:".json",onChange:ke,className:"hidden"})]})]})]}),n.jsxs(yf,{value:e,onValueChange:ie=>{t(ie),Q(ie)},children:[n.jsxs(nm,{className:`grid w-full ${He()?"grid-cols-3 md:grid-cols-9":"grid-cols-3 md:grid-cols-8"} gap-1 mb-8`,children:[n.jsxs(Tr,{value:"dashboard",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(lg,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Home"}),n.jsx(ae,{hasNotification:G.dashboard>0})]}),n.jsxs(Tr,{value:"refrigerators",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(Jt,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Punti di Conservazione"}),n.jsx(ae,{hasNotification:G.refrigerators>0})]}),n.jsxs(Tr,{value:"cleaning",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(tm,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Attivit e Mansioni"}),n.jsx(ae,{hasNotification:G.cleaning>0})]}),n.jsxs(Tr,{value:"inventory",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(hn,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Inventario"}),n.jsx(ae,{hasNotification:G.inventory>0})]}),n.jsxs(Tr,{value:"labels",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(sc,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Gestione Etichette"}),n.jsx(ae,{hasNotification:G.labels>0})]}),n.jsxs(Tr,{value:"ai-assistant",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm",children:[n.jsx(na,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"IA Assistant"})]}),n.jsxs(Tr,{value:"data-settings",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm",children:[n.jsx(fr,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Impostazioni e Dati"})]}),He()&&n.jsxs(Tr,{value:"staff",className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm relative",children:[n.jsx(mi,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Gestione"}),n.jsx(ae,{hasNotification:G.staff>0})]}),n.jsxs("div",{className:"flex flex-col gap-1",children:[He()&&n.jsxs(de,{variant:"outline",size:"sm",onClick:()=>t("staff"),className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm h-9 px-3",children:[n.jsx(fr,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Impostazioni"})]}),n.jsxs(de,{variant:"outline",size:"sm",onClick:we,className:"flex items-center gap-1 md:gap-2 text-xs md:text-sm h-9 px-3",children:[n.jsx(Ky,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Esci"})]})]})]}),n.jsx(Mr,{value:"dashboard",children:n.jsx("div",{className:"space-y-6",children:n.jsx(cN,{temperatures:r,cleaning:s,products:x,staff:c,currentUser:j})})}),n.jsx(Mr,{value:"refrigerators",children:n.jsx(pN,{temperatures:r,setTemperatures:ie=>{i(ie),xe("temperatures",ie)},currentUser:j,refrigerators:l,setRefrigerators:ie=>{d(ie),xe("refrigerators",ie)},departments:y,setDepartments:ie=>{m(ie),xe("departments",ie)}})}),n.jsx(Mr,{value:"cleaning",children:n.jsx(mN,{cleaning:s,setCleaning:ie=>{a(ie),xe("cleaning",ie)},currentUser:j,departments:y})}),n.jsx(Mr,{value:"inventory",children:n.jsx(xb,{products:x,setProducts:ie=>{v(ie),xe("inventory",ie)},currentUser:j,refrigerators:l})}),n.jsx(Mr,{value:"labels",children:n.jsx(vb,{productLabels:w,setProductLabels:S,products:x,currentUser:j})}),n.jsx(Mr,{value:"ai-assistant",children:n.jsx(Nb,{currentUser:j,products:x,temperatures:r,cleaning:s,staff:c,onAction:ie=>{console.log("AI Action:",ie)}})}),n.jsx(Mr,{value:"data-settings",children:n.jsx(Pb,{currentUser:j,isAdmin:He(),onSettingsChange:ie=>{console.log(" Impostazioni dati aggiornate:",ie)}})}),He()&&n.jsx(Mr,{value:"staff",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx(gN,{staff:c,setStaff:ie=>{h(ie),xe("staff",ie)},users:N,setUsers:C,currentUser:j,isAdmin:He(),departments:y,setDepartments:ie=>{m(ie),xe("departments",ie)}}),n.jsx(jb,{temperatures:r,setTemperatures:i,cleaning:s,setCleaning:a,products:x,setProducts:v,refrigerators:l,setRefrigerators:d})]})})]}),n.jsx(_b,{activeTab:e,temperatures:r}),j&&ce&&n.jsx(yb,{currentUser:j,currentSection:e,products:x,temperatures:r,cleaning:s,staff:c,onAction:ie=>{console.log("AI Action:",ie)}}),j&&n.jsx(bb,{products:x,onRecipeSuggestion:ie=>{console.log("Recipe suggestions:",ie)}}),n.jsx(wb,{}),k&&n.jsx(Gb,{isOpen:k,onClose:()=>P(!1),onComplete:I,currentData:q}),n.jsx(Wb,{isOpen:F,onClose:()=>re(!1),missingRequirements:oe.missingRequirements,suggestions:oe.getSuggestions(),onFixRequirement:je})]})]}):n.jsxs("div",{className:"min-h-screen bg-gray-50",children:[n.jsx(Og,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Business HACCP Manager"}),n.jsx("p",{className:"text-gray-600",children:"Sistema di Gestione HACCP per Ristoranti"})]}),n.jsx("div",{className:"max-w-4xl mx-auto mb-8",children:n.jsxs(We,{children:[n.jsx(ht,{children:n.jsxs(pt,{className:"flex items-center gap-2",children:[n.jsx(lg,{className:"h-5 w-5"}),"Report Giornalieri - ",new Date().toLocaleDateString("it-IT")]})}),n.jsx(Ze,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600",children:Ke.temperatureOk}),n.jsx("div",{className:"text-sm text-green-700",children:"Temperature OK"})]}),n.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:Ke.temperatureProblems}),n.jsx("div",{className:"text-sm text-red-700",children:"Problemi Temp."})]}),n.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:Ke.cleaningPending}),n.jsx("div",{className:"text-sm text-yellow-700",children:"Pulizie Pending"})]}),n.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ke.expiringToday}),n.jsx("div",{className:"text-sm text-blue-700",children:"Scadenze Prodotti"})]})]})})]})}),n.jsx("div",{className:"max-w-md mx-auto mb-4",children:n.jsx(We,{children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsxs(de,{onClick:tt,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[n.jsx(yi,{className:"h-4 w-4"}),"Esporta"]}),n.jsxs("label",{className:"cursor-pointer",children:[n.jsx(de,{variant:"outline",size:"sm",className:"flex items-center gap-2",asChild:!0,children:n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(gc,{className:"h-4 w-4"}),"Importa"]})}),n.jsx("input",{type:"file",accept:".json",onChange:ke,className:"hidden"})]})]})})})}),n.jsxs("div",{className:"max-w-md mx-auto",children:[N.length>1&&n.jsx(We,{className:"mb-4",children:n.jsx(Ze,{className:"pt-6",children:n.jsxs("div",{className:"text-center text-gray-600",children:[n.jsx("div",{className:"text-sm",children:"Ultimo accesso:"}),n.jsx("div",{className:"font-semibold",children:(be=N[N.length-1])==null?void 0:be.name})]})})}),n.jsx("div",{className:"text-center",children:n.jsxs(de,{size:"lg",className:"text-lg px-8 py-4",onClick:()=>ee(!0),children:[n.jsx(Qy,{className:"mr-2 h-5 w-5"})," INIZIA TURNO"]})})]})]}),n.jsx(zb,{isOpen:V,onClose:()=>ee(!1),onLogin:z,users:N,onAddUser:Be})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{console.log("SW registered: ",e),e.addEventListener("updatefound",()=>{const t=e.installing;t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&confirm("Nuova versione disponibile. Ricaricare la pagina?")&&window.location.reload()})})}).catch(e=>{console.log("SW registration failed: ",e)})});xh.createRoot(document.getElementById("root")).render(n.jsx(qa.StrictMode,{children:n.jsx(Jb,{})}));export{Qt as _,Yb as c,dv as g};
